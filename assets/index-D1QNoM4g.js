var wm=Object.defineProperty;var xm=(s,t,n)=>t in s?wm(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var Ya=(s,t,n)=>(xm(s,typeof t!="symbol"?t+"":t,n),n),Rc=(s,t,n)=>{if(!t.has(s))throw TypeError("Cannot "+n)};var Or=(s,t,n)=>(Rc(s,t,"read from private field"),n?n.call(s):t.get(s)),qs=(s,t,n)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,n)},Io=(s,t,n,r)=>(Rc(s,t,"write to private field"),r?r.call(s,n):t.set(s,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function Kt(){}function xt(s,t){for(const n in t)s[n]=t[n];return s}function Th(s){return s()}function Dc(){return Object.create(null)}function Os(s){s.forEach(Th)}function Hl(s){return typeof s=="function"}function ar(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function jm(s){return Object.keys(s).length===0}function Wl(s,...t){if(s==null){for(const r of t)r(void 0);return Kt}const n=s.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Cm(s){let t;return Wl(s,n=>t=n)(),t}function ns(s,t,n){s.$$.on_destroy.push(Wl(t,n))}function $r(s,t,n,r){if(s){const i=Mh(s,t,n,r);return s[0](i)}}function Mh(s,t,n,r){return s[1]&&r?xt(n.ctx.slice(),s[1](r(t))):n.ctx}function Zr(s,t,n,r){if(s[2]&&r){const i=s[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const c=[],o=Math.max(t.dirty.length,i.length);for(let d=0;d<o;d+=1)c[d]=t.dirty[d]|i[d];return c}return t.dirty|i}return t.dirty}function Qr(s,t,n,r,i,c){if(i){const o=Mh(t,n,r,c);s.p(o,i)}}function Jr(s){if(s.ctx.length>32){const t=[],n=s.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Nr(s){const t={};for(const n in s)n[0]!=="$"&&(t[n]=s[n]);return t}function Qt(s,t){const n={};t=new Set(t);for(const r in s)!t.has(r)&&r[0]!=="$"&&(n[r]=s[r]);return n}function Lh(s,t,n){return s.set(n),t}const Em=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function jl(s,t){s.appendChild(t)}function _t(s,t,n){s.insertBefore(t,n||null)}function gt(s){s.parentNode&&s.parentNode.removeChild(s)}function Yr(s){return document.createElement(s)}function Ah(s){return document.createTextNode(s)}function Gr(){return Ah(" ")}function mr(){return Ah("")}function Yo(s,t,n,r){return s.addEventListener(t,n,r),()=>s.removeEventListener(t,n,r)}function Oh(s,t,n){n==null?s.removeAttribute(t):s.getAttribute(t)!==n&&s.setAttribute(t,n)}function Sm(s){return Array.from(s.childNodes)}function or(s,t,n,r){n==null?s.style.removeProperty(t):s.style.setProperty(t,n,"")}let Vi;function Pm(){if(Vi===void 0){Vi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Vi=!0}}return Vi}function km(s,t){getComputedStyle(s).position==="static"&&(s.style.position="relative");const r=Yr("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Pm();let c;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",c=Yo(window,"message",o=>{o.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{c=Yo(r.contentWindow,"resize",t),t()}),jl(s,r),()=>{(i||c&&r.contentWindow)&&c(),gt(r)}}function Bi(s,t,n){s.classList.toggle(t,!!n)}function Tm(s,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:t,bubbles:n,cancelable:r})}let Zo;function Ko(s){Zo=s}function mo(){if(!Zo)throw new Error("Function called outside component initialization");return Zo}function Mm(s){mo().$$.before_update.push(s)}function Rs(s){mo().$$.on_mount.push(s)}function Ds(s){mo().$$.on_destroy.push(s)}function ya(){const s=mo();return(t,n,{cancelable:r=!1}={})=>{const i=s.$$.callbacks[t];if(i){const c=Tm(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(s,c)}),!c.defaultPrevented}return!0}}function $i(s,t){return mo().$$.context.set(s,t),t}function ln(s){return mo().$$.context.get(s)}function Vn(s,t){const n=s.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const no=[],Je=[];let io=[];const Cl=[],Lm=Promise.resolve();let El=!1;function Am(){El||(El=!0,Lm.then(Rh))}function sa(s){io.push(s)}function ot(s){Cl.push(s)}const Ka=new Set;let Hs=0;function Rh(){if(Hs!==0)return;const s=Zo;do{try{for(;Hs<no.length;){const t=no[Hs];Hs++,Ko(t),Om(t.$$)}}catch(t){throw no.length=0,Hs=0,t}for(Ko(null),no.length=0,Hs=0;Je.length;)Je.pop()();for(let t=0;t<io.length;t+=1){const n=io[t];Ka.has(n)||(Ka.add(n),n())}io.length=0}while(no.length);for(;Cl.length;)Cl.pop()();El=!1,Ka.clear(),Ko(s)}function Om(s){if(s.fragment!==null){s.update(),Os(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(sa)}}function Rm(s){const t=[],n=[];io.forEach(r=>s.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),io=t}const Zi=new Set;let ws;function yo(){ws={r:0,c:[],p:ws}}function go(){ws.r||Os(ws.c),ws=ws.p}function Ue(s,t){s&&s.i&&(Zi.delete(s),s.i(t))}function He(s,t,n,r){if(s&&s.o){if(Zi.has(s))return;Zi.add(s),ws.c.push(()=>{Zi.delete(s),r&&(n&&s.d(1),r())}),s.o(t)}else r&&r()}function Ic(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Dm(s,t){He(s,1,1,()=>{t.delete(s.key)})}function Im(s,t,n,r,i,c,o,d,a,l,b,y){let u=s.length,p=c.length,h=u;const m={};for(;h--;)m[s[h].key]=h;const g=[],f=new Map,v=new Map,_=[];for(h=p;h--;){const S=y(i,c,h),P=n(S);let L=o.get(P);L?_.push(()=>L.p(S,t)):(L=l(P,S),L.c()),f.set(P,g[h]=L),P in m&&v.set(P,Math.abs(h-m[P]))}const x=new Set,j=new Set;function M(S){Ue(S,1),S.m(d,b),o.set(S.key,S),b=S.first,p--}for(;u&&p;){const S=g[p-1],P=s[u-1],L=S.key,D=P.key;S===P?(b=S.first,u--,p--):f.has(D)?!o.has(L)||x.has(L)?M(S):j.has(D)?u--:v.get(L)>v.get(D)?(j.add(L),M(S)):(x.add(D),u--):(a(P,o),u--)}for(;u--;){const S=s[u];f.has(S.key)||a(S,o)}for(;p;)M(g[p-1]);return Os(_),g}function Hr(s,t){const n={},r={},i={$$scope:1};let c=s.length;for(;c--;){const o=s[c],d=t[c];if(d){for(const a in o)a in d||(r[a]=1);for(const a in d)i[a]||(n[a]=d[a],i[a]=1);s[c]=d}else for(const a in o)i[a]=1}for(const o in r)o in n||(n[o]=void 0);return n}function Wr(s){return typeof s=="object"&&s!==null?s:{}}function it(s,t,n){const r=s.$$.props[t];r!==void 0&&(s.$$.bound[r]=n,n(s.$$.ctx[r]))}function dt(s){s&&s.c()}function ut(s,t,n){const{fragment:r,after_update:i}=s.$$;r&&r.m(t,n),sa(()=>{const c=s.$$.on_mount.map(Th).filter(Hl);s.$$.on_destroy?s.$$.on_destroy.push(...c):Os(c),s.$$.on_mount=[]}),i.forEach(sa)}function ct(s,t){const n=s.$$;n.fragment!==null&&(Rm(n.after_update),Os(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Fm(s,t){s.$$.dirty[0]===-1&&(no.push(s),Am(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function ur(s,t,n,r,i,c,o=null,d=[-1]){const a=Zo;Ko(s);const l=s.$$={fragment:null,ctx:[],props:c,update:Kt,not_equal:i,bound:Dc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Dc(),dirty:d,skip_bound:!1,root:t.target||a.$$.root};o&&o(l.root);let b=!1;if(l.ctx=n?n(s,t.props||{},(y,u,...p)=>{const h=p.length?p[0]:u;return l.ctx&&i(l.ctx[y],l.ctx[y]=h)&&(!l.skip_bound&&l.bound[y]&&l.bound[y](h),b&&Fm(s,y)),u}):[],l.update(),b=!0,Os(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const y=Sm(t.target);l.fragment&&l.fragment.l(y),y.forEach(gt)}else l.fragment&&l.fragment.c();t.intro&&Ue(s.$$.fragment),ut(s,t.target,t.anchor),Rh()}Ko(a)}class cr{constructor(){Ya(this,"$$");Ya(this,"$$set")}$destroy(){ct(this,1),this.$destroy=Kt}$on(t,n){if(!Hl(n))return Kt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!jm(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Nm="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nm);var Ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Gi(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dh={exports:{}};/*! p5.js v1.9.4 May 21, 2024 */(function(s,t){(function(n){s.exports=n()})(function(){var n;return function r(i,c,o){function d(b,y){if(!c[b]){if(!i[b]){var u=typeof Gi=="function"&&Gi;if(!y&&u)return u(b,!0);if(a)return a(b,!0);throw(y=new Error("Cannot find module '"+b+"'")).code="MODULE_NOT_FOUND",y}u=c[b]={exports:{}},i[b][0].call(u.exports,function(p){return d(i[b][1][p]||p)},u,u.exports,r,i,c,o)}return c[b].exports}for(var a=typeof Gi=="function"&&Gi,l=0;l<o.length;l++)d(o[l]);return d}({1:[function(r,i,c){c.byteLength=function(m){var m=u(m),h=m[0],m=m[1];return 3*(h+m)/4-m},c.toByteArray=function(p){var h,m,f=u(p),g=f[0],f=f[1],v=new a(function(j,M){return 3*(j+M)/4-M}(g,f)),_=0,x=0<f?g-4:g;for(m=0;m<x;m+=4)h=d[p.charCodeAt(m)]<<18|d[p.charCodeAt(m+1)]<<12|d[p.charCodeAt(m+2)]<<6|d[p.charCodeAt(m+3)],v[_++]=h>>16&255,v[_++]=h>>8&255,v[_++]=255&h;return f===2&&(h=d[p.charCodeAt(m)]<<2|d[p.charCodeAt(m+1)]>>4,v[_++]=255&h),f===1&&(h=d[p.charCodeAt(m)]<<10|d[p.charCodeAt(m+1)]<<4|d[p.charCodeAt(m+2)]>>2,v[_++]=h>>8&255,v[_++]=255&h),v},c.fromByteArray=function(p){for(var h,m=p.length,g=m%3,f=[],v=0,_=m-g;v<_;v+=16383)f.push(function(x,j,M){for(var S,P=[],L=j;L<M;L+=3)S=(x[L]<<16&16711680)+(x[L+1]<<8&65280)+(255&x[L+2]),P.push(function(D){return o[D>>18&63]+o[D>>12&63]+o[D>>6&63]+o[63&D]}(S));return P.join("")}(p,v,_<v+16383?_:v+16383));return g==1?(h=p[m-1],f.push(o[h>>2]+o[h<<4&63]+"==")):g==2&&(h=(p[m-2]<<8)+p[m-1],f.push(o[h>>10]+o[h>>4&63]+o[h<<2&63]+"=")),f.join("")};for(var o=[],d=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,y=l.length;b<y;++b)o[b]=l[b],d[l.charCodeAt(b)]=b;function u(p){var h=p.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return p=p.indexOf("="),h=(p=p===-1?h:p)===h?0:4-p%4,[p,h]}d[45]=62,d[95]=63},{}],2:[function(r,i,c){},{}],3:[function(r,i,c){},{}],4:[function(r,i,c){(function(u){var d=r("base64-js"),a=r("ieee754"),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,b=(c.Buffer=u,c.SlowBuffer=function(E){return+E!=E&&(E=0),u.alloc(+E)},c.INSPECT_MAX_BYTES=50,2147483647);function y(E){if(b<E)throw new RangeError('The value "'+E+'" is invalid for option "size"');return E=new Uint8Array(E),Object.setPrototypeOf(E,u.prototype),E}function u(E,R,B){if(typeof E!="number")return p(E,R,B);if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(E)}function p(E,R,B){if(typeof E=="string"){var H=E,Z=R;if(u.isEncoding(Z=typeof Z=="string"&&Z!==""?Z:"utf8"))return te=0|v(H,Z),se=y(te),se=(H=se.write(H,Z))!==te?se.slice(0,H):se;throw new TypeError("Unknown encoding: "+Z)}if(ArrayBuffer.isView(E))return g(E);if(E!=null){if(Y(E,ArrayBuffer)||E&&Y(E.buffer,ArrayBuffer)){var te=E,H=R,se=B;if(H<0||te.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<H+(se||0))throw new RangeError('"length" is outside of buffer bounds');return te=H===void 0&&se===void 0?new Uint8Array(te):se===void 0?new Uint8Array(te,H):new Uint8Array(te,H,se),Object.setPrototypeOf(te,u.prototype),te}if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(Z=E.valueOf&&E.valueOf(),Z!=null&&Z!==E)return u.from(Z,R,B);var pe=function(oe){{var he,de;if(u.isBuffer(oe))return he=0|f(oe.length),(de=y(he)).length!==0&&oe.copy(de,0,0,he),de}if(oe.length!==void 0)return typeof oe.length!="number"||$(oe.length)?y(0):g(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return g(oe.data)}(E);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return u.from(E[Symbol.toPrimitive]("string"),R,B)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}function h(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function m(E){return h(E),y(E<0?0:0|f(E))}function g(E){for(var R=E.length<0?0:0|f(E.length),B=y(R),H=0;H<R;H+=1)B[H]=255&E[H];return B}function f(E){if(b<=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|E}function v(E,R){if(u.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||Y(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var B=E.length,H=2<arguments.length&&arguments[2]===!0;if(!H&&B===0)return 0;for(var Z=!1;;)switch(R){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return W(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*B;case"hex":return B>>>1;case"base64":return G(E).length;default:if(Z)return H?-1:W(E).length;R=(""+R).toLowerCase(),Z=!0}}function _(E,R,B){var H,Z=!1;if((R=R===void 0||R<0?0:R)>this.length||(B=B===void 0||B>this.length?this.length:B)<=0||(B>>>=0)<=(R>>>=0))return"";for(E=E||"utf8";;)switch(E){case"hex":var te=this,ge=R,se=B,de=te.length;(!se||se<0||de<se)&&(se=de);for(var pe="",oe=ge=!ge||ge<0?0:ge;oe<se;++oe)pe+=ie[te[oe]];return pe;case"utf8":case"utf-8":return L(this,R,B);case"ascii":var he=this,de=R,J=B,ue="";J=Math.min(he.length,J);for(var ye=de;ye<J;++ye)ue+=String.fromCharCode(127&he[ye]);return ue;case"latin1":case"binary":var Ce=this,ge=R,_e=B,Ee="";_e=Math.min(Ce.length,_e);for(var Ie=ge;Ie<_e;++Ie)Ee+=String.fromCharCode(Ce[Ie]);return Ee;case"base64":return Te=this,H=B,(Qe=R)===0&&H===Te.length?d.fromByteArray(Te):d.fromByteArray(Te.slice(Qe,H));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Te=R,Qe=B,ze=this.slice(Te,Qe),qe="",Xe=0;Xe<ze.length;Xe+=2)qe+=String.fromCharCode(ze[Xe]+256*ze[Xe+1]);return qe;default:if(Z)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),Z=!0}}function x(E,R,B){var H=E[R];E[R]=E[B],E[B]=H}function j(E,R,B,H,Z){if(E.length===0)return-1;if(typeof B=="string"?(H=B,B=0):2147483647<B?B=2147483647:B<-2147483648&&(B=-2147483648),(B=(B=$(B=+B)?Z?0:E.length-1:B)<0?E.length+B:B)>=E.length){if(Z)return-1;B=E.length-1}else if(B<0){if(!Z)return-1;B=0}if(typeof R=="string"&&(R=u.from(R,H)),u.isBuffer(R))return R.length===0?-1:M(E,R,B,H,Z);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?(Z?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(E,R,B):M(E,[R],B,H,Z);throw new TypeError("val must be string, number or Buffer")}function M(E,R,B,H,Z){var te=1,se=E.length,pe=R.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(E.length<2||R.length<2)return-1;se/=te=2,pe/=2,B/=2}function oe(ye,Ce){return te===1?ye[Ce]:ye.readUInt16BE(Ce*te)}if(Z)for(var he=-1,de=B;de<se;de++)if(oe(E,de)===oe(R,he===-1?0:de-he)){if(de-(he=he===-1?de:he)+1===pe)return he*te}else he!==-1&&(de-=de-he),he=-1;else for(de=B=se<B+pe?se-pe:B;0<=de;de--){for(var J=!0,ue=0;ue<pe;ue++)if(oe(E,de+ue)!==oe(R,ue)){J=!1;break}if(J)return de}return-1}function S(E,R,B,H){return z(function(Z){for(var te=[],se=0;se<Z.length;++se)te.push(255&Z.charCodeAt(se));return te}(R),E,B,H)}function P(E,R,B,H){return z(function(Z,te){for(var se,pe,oe=[],he=0;he<Z.length&&!((te-=2)<0);++he)pe=Z.charCodeAt(he),se=pe>>8,pe=pe%256,oe.push(pe),oe.push(se);return oe}(R,E.length-B),E,B,H)}function L(E,R,B){B=Math.min(E.length,B);for(var H=[],Z=R;Z<B;){var te,se,pe,oe,he=E[Z],de=null,J=239<he?4:223<he?3:191<he?2:1;if(Z+J<=B)switch(J){case 1:he<128&&(de=he);break;case 2:(192&(te=E[Z+1]))==128&&127<(oe=(31&he)<<6|63&te)&&(de=oe);break;case 3:te=E[Z+1],se=E[Z+2],(192&te)==128&&(192&se)==128&&2047<(oe=(15&he)<<12|(63&te)<<6|63&se)&&(oe<55296||57343<oe)&&(de=oe);break;case 4:te=E[Z+1],se=E[Z+2],pe=E[Z+3],(192&te)==128&&(192&se)==128&&(192&pe)==128&&65535<(oe=(15&he)<<18|(63&te)<<12|(63&se)<<6|63&pe)&&oe<1114112&&(de=oe)}de===null?(de=65533,J=1):65535<de&&(de-=65536,H.push(de>>>10&1023|55296),de=56320|1023&de),H.push(de),Z+=J}var ue=H,ye=ue.length;if(ye<=D)return String.fromCharCode.apply(String,ue);for(var Ce="",ge=0;ge<ye;)Ce+=String.fromCharCode.apply(String,ue.slice(ge,ge+=D));return Ce}c.kMaxLength=b,(u.TYPED_ARRAY_SUPPORT=function(){try{var E=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(E,R),E.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=p,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(E,R,B){return R=R,B=B,h(E=E),!(E<=0)&&R!==void 0?typeof B=="string"?y(E).fill(R,B):y(E).fill(R):y(E)},u.allocUnsafe=m,u.allocUnsafeSlow=m,u.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==u.prototype},u.compare=function(E,R){if(Y(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),Y(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(E)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===R)return 0;for(var B=E.length,H=R.length,Z=0,te=Math.min(B,H);Z<te;++Z)if(E[Z]!==R[Z]){B=E[Z],H=R[Z];break}return B<H?-1:H<B?1:0},u.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(E,R){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return u.alloc(0);if(R===void 0)for(Z=R=0;Z<E.length;++Z)R+=E[Z].length;for(var B=u.allocUnsafe(R),H=0,Z=0;Z<E.length;++Z){var te=E[Z];if(Y(te,Uint8Array)&&(te=u.from(te)),!u.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(B,H),H+=te.length}return B},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var E=this.length;if(E%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<E;R+=2)x(this,R,R+1);return this},u.prototype.swap32=function(){var E=this.length;if(E%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<E;R+=4)x(this,R,R+3),x(this,R+1,R+2);return this},u.prototype.swap64=function(){var E=this.length;if(E%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<E;R+=8)x(this,R,R+7),x(this,R+1,R+6),x(this,R+2,R+5),x(this,R+3,R+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var E=this.length;return E===0?"":arguments.length===0?L(this,0,E):_.apply(this,arguments)},u.prototype.equals=function(E){if(u.isBuffer(E))return this===E||u.compare(this,E)===0;throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var R="",E=c.INSPECT_MAX_BYTES,R=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();return this.length>E&&(R+=" ... "),"<Buffer "+R+">"},l&&(u.prototype[l]=u.prototype.inspect),u.prototype.compare=function(E,R,B,H,Z){if(Y(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(B===void 0&&(B=E?E.length:0),H===void 0&&(H=0),Z===void 0&&(Z=this.length),(R=R===void 0?0:R)<0||B>E.length||H<0||Z>this.length)throw new RangeError("out of range index");if(Z<=H&&B<=R)return 0;if(Z<=H)return-1;if(B<=R)return 1;if(this===E)return 0;for(var te=(Z>>>=0)-(H>>>=0),se=(B>>>=0)-(R>>>=0),pe=Math.min(te,se),oe=this.slice(H,Z),he=E.slice(R,B),de=0;de<pe;++de)if(oe[de]!==he[de]){te=oe[de],se=he[de];break}return te<se?-1:se<te?1:0},u.prototype.includes=function(E,R,B){return this.indexOf(E,R,B)!==-1},u.prototype.indexOf=function(E,R,B){return j(this,E,R,B,!0)},u.prototype.lastIndexOf=function(E,R,B){return j(this,E,R,B,!1)},u.prototype.write=function(E,R,B,H){if(R===void 0)H="utf8",B=this.length,R=0;else if(B===void 0&&typeof R=="string")H=R,B=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(B)?(B>>>=0,H===void 0&&(H="utf8")):(H=B,B=void 0)}var Z=this.length-R;if((B===void 0||Z<B)&&(B=Z),0<E.length&&(B<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");H=H||"utf8";for(var te,se,pe,oe=!1;;)switch(H){case"hex":var he=this,de=E,J=R,ue=B,ye=(J=Number(J)||0,he.length-J);(!ue||ye<(ue=Number(ue)))&&(ue=ye),(ye=de.length)/2<ue&&(ue=ye/2);for(var Ce=0;Ce<ue;++Ce){var ge=parseInt(de.substr(2*Ce,2),16);if($(ge))return Ce;he[J+Ce]=ge}return Ce;case"utf8":case"utf-8":return ye=R,pe=B,z(W(E,(se=this).length-ye),se,ye,pe);case"ascii":return S(this,E,R,B);case"latin1":case"binary":return S(this,E,R,B);case"base64":return se=this,pe=R,te=B,z(G(E),se,pe,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,E,R,B);default:if(oe)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),oe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function k(E,R,B){if(E%1!=0||E<0)throw new RangeError("offset is not uint");if(B<E+R)throw new RangeError("Trying to access beyond buffer length")}function I(E,R,B,H,Z,te){if(!u.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z<R||R<te)throw new RangeError('"value" argument is out of bounds');if(B+H>E.length)throw new RangeError("Index out of range")}function A(E,R,B,H){if(B+H>E.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function F(E,R,B,H,Z){return R=+R,B>>>=0,Z||A(E,0,B,4),a.write(E,R,B,H,23,4),B+4}function N(E,R,B,H,Z){return R=+R,B>>>=0,Z||A(E,0,B,8),a.write(E,R,B,H,52,8),B+8}u.prototype.slice=function(E,R){var B=this.length,B=((E=~~E)<0?(E+=B)<0&&(E=0):B<E&&(E=B),(R=R===void 0?B:~~R)<0?(R+=B)<0&&(R=0):B<R&&(R=B),R<E&&(R=E),this.subarray(E,R));return Object.setPrototypeOf(B,u.prototype),B},u.prototype.readUIntLE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E],Z=1,te=0;++te<R&&(Z*=256);)H+=this[E+te]*Z;return H},u.prototype.readUIntBE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E+--R],Z=1;0<R&&(Z*=256);)H+=this[E+--R]*Z;return H},u.prototype.readUInt8=function(E,R){return E>>>=0,R||k(E,1,this.length),this[E]},u.prototype.readUInt16LE=function(E,R){return E>>>=0,R||k(E,2,this.length),this[E]|this[E+1]<<8},u.prototype.readUInt16BE=function(E,R){return E>>>=0,R||k(E,2,this.length),this[E]<<8|this[E+1]},u.prototype.readUInt32LE=function(E,R){return E>>>=0,R||k(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+16777216*this[E+3]},u.prototype.readUInt32BE=function(E,R){return E>>>=0,R||k(E,4,this.length),16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])},u.prototype.readIntLE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E],Z=1,te=0;++te<R&&(Z*=256);)H+=this[E+te]*Z;return(Z*=128)<=H&&(H-=Math.pow(2,8*R)),H},u.prototype.readIntBE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=R,Z=1,te=this[E+--H];0<H&&(Z*=256);)te+=this[E+--H]*Z;return(Z*=128)<=te&&(te-=Math.pow(2,8*R)),te},u.prototype.readInt8=function(E,R){return E>>>=0,R||k(E,1,this.length),128&this[E]?-1*(255-this[E]+1):this[E]},u.prototype.readInt16LE=function(E,R){return E>>>=0,R||k(E,2,this.length),R=this[E]|this[E+1]<<8,32768&R?4294901760|R:R},u.prototype.readInt16BE=function(E,R){return E>>>=0,R||k(E,2,this.length),R=this[E+1]|this[E]<<8,32768&R?4294901760|R:R},u.prototype.readInt32LE=function(E,R){return E>>>=0,R||k(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},u.prototype.readInt32BE=function(E,R){return E>>>=0,R||k(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},u.prototype.readFloatLE=function(E,R){return E>>>=0,R||k(E,4,this.length),a.read(this,E,!0,23,4)},u.prototype.readFloatBE=function(E,R){return E>>>=0,R||k(E,4,this.length),a.read(this,E,!1,23,4)},u.prototype.readDoubleLE=function(E,R){return E>>>=0,R||k(E,8,this.length),a.read(this,E,!0,52,8)},u.prototype.readDoubleBE=function(E,R){return E>>>=0,R||k(E,8,this.length),a.read(this,E,!1,52,8)},u.prototype.writeUIntLE=function(E,R,B,H){E=+E,R>>>=0,B>>>=0,H||I(this,E,R,B,Math.pow(2,8*B)-1,0);var Z=1,te=0;for(this[R]=255&E;++te<B&&(Z*=256);)this[R+te]=E/Z&255;return R+B},u.prototype.writeUIntBE=function(E,R,B,H){E=+E,R>>>=0,B>>>=0,H||I(this,E,R,B,Math.pow(2,8*B)-1,0);var Z=B-1,te=1;for(this[R+Z]=255&E;0<=--Z&&(te*=256);)this[R+Z]=E/te&255;return R+B},u.prototype.writeUInt8=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,1,255,0),this[R]=255&E,R+1},u.prototype.writeUInt16LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,65535,0),this[R]=255&E,this[R+1]=E>>>8,R+2},u.prototype.writeUInt16BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,65535,0),this[R]=E>>>8,this[R+1]=255&E,R+2},u.prototype.writeUInt32LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,4294967295,0),this[R+3]=E>>>24,this[R+2]=E>>>16,this[R+1]=E>>>8,this[R]=255&E,R+4},u.prototype.writeUInt32BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,4294967295,0),this[R]=E>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=255&E,R+4},u.prototype.writeIntLE=function(E,R,B,H){E=+E,R>>>=0,H||I(this,E,R,B,(H=Math.pow(2,8*B-1))-1,-H);var Z=0,te=1,se=0;for(this[R]=255&E;++Z<B&&(te*=256);)E<0&&se===0&&this[R+Z-1]!==0&&(se=1),this[R+Z]=(E/te>>0)-se&255;return R+B},u.prototype.writeIntBE=function(E,R,B,H){E=+E,R>>>=0,H||I(this,E,R,B,(H=Math.pow(2,8*B-1))-1,-H);var Z=B-1,te=1,se=0;for(this[R+Z]=255&E;0<=--Z&&(te*=256);)E<0&&se===0&&this[R+Z+1]!==0&&(se=1),this[R+Z]=(E/te>>0)-se&255;return R+B},u.prototype.writeInt8=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,1,127,-128),this[R]=255&(E=E<0?255+E+1:E),R+1},u.prototype.writeInt16LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,32767,-32768),this[R]=255&E,this[R+1]=E>>>8,R+2},u.prototype.writeInt16BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,32767,-32768),this[R]=E>>>8,this[R+1]=255&E,R+2},u.prototype.writeInt32LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,2147483647,-2147483648),this[R]=255&E,this[R+1]=E>>>8,this[R+2]=E>>>16,this[R+3]=E>>>24,R+4},u.prototype.writeInt32BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,2147483647,-2147483648),this[R]=(E=E<0?4294967295+E+1:E)>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=255&E,R+4},u.prototype.writeFloatLE=function(E,R,B){return F(this,E,R,!0,B)},u.prototype.writeFloatBE=function(E,R,B){return F(this,E,R,!1,B)},u.prototype.writeDoubleLE=function(E,R,B){return N(this,E,R,!0,B)},u.prototype.writeDoubleBE=function(E,R,B){return N(this,E,R,!1,B)},u.prototype.copy=function(E,R,B,H){if(!u.isBuffer(E))throw new TypeError("argument should be a Buffer");if(B=B||0,H||H===0||(H=this.length),R>=E.length&&(R=E.length),(H=0<H&&H<B?B:H)===B||E.length===0||this.length===0)return 0;if((R=R||0)<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length);var Z=(H=E.length-R<H-B?E.length-R+B:H)-B;if(this===E&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,B,H);else if(this===E&&B<R&&R<H)for(var te=Z-1;0<=te;--te)E[te+R]=this[te+B];else Uint8Array.prototype.set.call(E,this.subarray(B,H),R);return Z},u.prototype.fill=function(E,R,B,H){if(typeof E=="string"){if(typeof R=="string"?(H=R,R=0,B=this.length):typeof B=="string"&&(H=B,B=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!u.isEncoding(H))throw new TypeError("Unknown encoding: "+H);var Z;E.length===1&&(Z=E.charCodeAt(0),(H==="utf8"&&Z<128||H==="latin1")&&(E=Z))}else typeof E=="number"?E&=255:typeof E=="boolean"&&(E=Number(E));if(R<0||this.length<R||this.length<B)throw new RangeError("Out of range index");var te;if(!(B<=R))if(R>>>=0,B=B===void 0?this.length:B>>>0,typeof(E=E||0)=="number")for(te=R;te<B;++te)this[te]=E;else{var se=u.isBuffer(E)?E:u.from(E,H),pe=se.length;if(pe===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(te=0;te<B-R;++te)this[te+R]=se[te%pe]}return this};var U=/[^+/0-9A-Za-z-_]/g;function W(E,R){R=R||1/0;for(var B,H=E.length,Z=null,te=[],se=0;se<H;++se){if(55295<(B=E.charCodeAt(se))&&B<57344){if(!Z){if(56319<B){-1<(R-=3)&&te.push(239,191,189);continue}if(se+1===H){-1<(R-=3)&&te.push(239,191,189);continue}Z=B;continue}if(B<56320){-1<(R-=3)&&te.push(239,191,189),Z=B;continue}B=65536+(Z-55296<<10|B-56320)}else Z&&-1<(R-=3)&&te.push(239,191,189);if(Z=null,B<128){if(--R<0)break;te.push(B)}else if(B<2048){if((R-=2)<0)break;te.push(B>>6|192,63&B|128)}else if(B<65536){if((R-=3)<0)break;te.push(B>>12|224,B>>6&63|128,63&B|128)}else{if(!(B<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;te.push(B>>18|240,B>>12&63|128,B>>6&63|128,63&B|128)}}return te}function G(E){return d.toByteArray(function(R){if((R=(R=R.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(E))}function z(E,R,B,H){for(var Z=0;Z<H&&!(Z+B>=R.length||Z>=E.length);++Z)R[Z+B]=E[Z];return Z}function Y(E,R){return E instanceof R||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===R.name}function $(E){return E!=E}var ie=function(){for(var E="0123456789abcdef",R=new Array(256),B=0;B<16;++B)for(var H=16*B,Z=0;Z<16;++Z)R[H+Z]=E[B]+E[Z];return R}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(r,i,c){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(r,i,c){var o=r("../internals/is-object");i.exports=function(d){if(o(d)||d===null)return d;throw TypeError("Can't set "+String(d)+" as a prototype")}},{"../internals/is-object":75}],7:[function(a,i,c){var o=a("../internals/well-known-symbol"),d=a("../internals/object-create"),a=a("../internals/object-define-property"),l=o("unscopables"),b=Array.prototype;b[l]==null&&a.f(b,l,{configurable:!0,value:d(null)}),i.exports=function(y){b[l][y]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(r,i,c){var o=r("../internals/string-multibyte").charAt;i.exports=function(d,a,l){return a+(l?o(d,a).length:1)}},{"../internals/string-multibyte":124}],9:[function(r,i,c){i.exports=function(o,d,a){if(o instanceof d)return o;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},{}],10:[function(r,i,c){var o=r("../internals/is-object");i.exports=function(d){if(o(d))return d;throw TypeError(String(d)+" is not an object")}},{"../internals/is-object":75}],11:[function(r,i,c){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(A,i,c){function o(N){return y(N)&&u(F,p(N))}var d,a=A("../internals/array-buffer-native"),l=A("../internals/descriptors"),b=A("../internals/global"),y=A("../internals/is-object"),u=A("../internals/has"),p=A("../internals/classof"),h=A("../internals/create-non-enumerable-property"),m=A("../internals/redefine"),g=A("../internals/object-define-property").f,f=A("../internals/object-get-prototype-of"),v=A("../internals/object-set-prototype-of"),D=A("../internals/well-known-symbol"),A=A("../internals/uid"),_=b.Int8Array,x=_&&_.prototype,j=b.Uint8ClampedArray,j=j&&j.prototype,M=_&&f(_),S=x&&f(x),P=Object.prototype,L=P.isPrototypeOf,D=D("toStringTag"),k=A("TYPED_ARRAY_TAG"),I=a&&!!v&&p(b.opera)!=="Opera",A=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(d in F)b[d]||(I=!1);if((!I||typeof M!="function"||M===Function.prototype)&&(M=function(){throw TypeError("Incorrect invocation")},I))for(d in F)b[d]&&v(b[d],M);if((!I||!S||S===P)&&(S=M.prototype,I))for(d in F)b[d]&&v(b[d].prototype,S);if(I&&f(j)!==S&&v(j,S),l&&!u(S,D))for(d in A=!0,g(S,D,{get:function(){return y(this)?this[k]:void 0}}),F)b[d]&&h(b[d],k,d);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:A&&k,aTypedArray:function(N){if(o(N))return N;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(N){if(v){if(L.call(M,N))return N}else for(var U in F)if(u(F,d)&&(U=b[U],U&&(N===U||L.call(U,N))))return N;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(N,U,W){if(l){if(W)for(var G in F)G=b[G],G&&u(G.prototype,N)&&delete G.prototype[N];S[N]&&!W||m(S,N,!W&&I&&x[N]||U)}},exportTypedArrayStaticMethod:function(N,U,W){var G,z;if(l){if(v){if(W)for(G in F)(z=b[G])&&u(z,N)&&delete z[N];if(M[N]&&!W)return;try{return m(M,N,!W&&I&&_[N]||U)}catch{}}for(G in F)!(z=b[G])||z[N]&&!W||m(z,N,U)}},isView:function(N){return N=p(N),N==="DataView"||u(F,N)},isTypedArray:o,TypedArray:M,TypedArrayPrototype:S}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(B,i,c){function o(J){return[255&J]}function d(J){return[255&J,J>>8&255]}function a(J){return[255&J,J>>8&255,J>>16&255,J>>24&255]}function l(J){return J[3]<<24|J[2]<<16|J[1]<<8|J[0]}function b(J){return te(J,23,4)}function y(J){return te(J,52,8)}function u(J,ue){A(J[Y],ue,{get:function(){return U(this)[ue]}})}function p(Ee,ue,_e,Ce){if(_e=P(_e),Ee=U(Ee),_e+ue>Ee.byteLength)throw Z($);var ge=U(Ee.buffer).bytes,_e=_e+Ee.byteOffset,Ee=ge.slice(_e,_e+ue);return Ce?Ee:Ee.reverse()}function h(J,ue,ye,Ce,ge,_e){if(ye=P(ye),J=U(J),ye+ue>J.byteLength)throw Z($);for(var Ee=U(J.buffer).bytes,Ie=ye+J.byteOffset,Te=Ce(+ge),Qe=0;Qe<ue;Qe++)Ee[Ie+Qe]=Te[_e?Qe:ue-Qe-1]}var m=B("../internals/global"),g=B("../internals/descriptors"),f=B("../internals/array-buffer-native"),v=B("../internals/create-non-enumerable-property"),_=B("../internals/redefine-all"),x=B("../internals/fails"),j=B("../internals/an-instance"),M=B("../internals/to-integer"),S=B("../internals/to-length"),P=B("../internals/to-index"),L=B("../internals/ieee754"),D=B("../internals/object-get-prototype-of"),k=B("../internals/object-set-prototype-of"),I=B("../internals/object-get-own-property-names").f,A=B("../internals/object-define-property").f,F=B("../internals/array-fill"),N=B("../internals/set-to-string-tag"),B=B("../internals/internal-state"),U=B.get,W=B.set,G="ArrayBuffer",z="DataView",Y="prototype",$="Wrong index",ie=m[G],E=ie,R=m[z],B=R&&R[Y],H=Object.prototype,Z=m.RangeError,te=L.pack,se=L.unpack;if(f){if(!x(function(){ie(1)})||!x(function(){new ie(-1)})||x(function(){return new ie,new ie(1.5),new ie(NaN),ie.name!=G})){for(var pe,m=(E=function(ye){return j(this,E),new ie(P(ye))})[Y]=ie[Y],oe=I(ie),he=0;oe.length>he;)(pe=oe[he++])in E||v(E,pe,ie[pe]);m.constructor=E}k&&D(B)!==H&&k(B,H);var L=new R(new E(2)),de=B.setInt8;L.setInt8(0,2147483648),L.setInt8(1,2147483649),!L.getInt8(0)&&L.getInt8(1)||_(B,{setInt8:function(ue,ye){de.call(this,ue,ye<<24>>24)},setUint8:function(ue,ye){de.call(this,ue,ye<<24>>24)}},{unsafe:!0})}else E=function(J){j(this,E,G),J=P(J),W(this,{bytes:F.call(new Array(J),0),byteLength:J}),g||(this.byteLength=J)},R=function(J,ge,ye){j(this,R,z),j(J,E,z);var Ce=U(J).byteLength,ge=M(ge);if(ge<0||Ce<ge)throw Z("Wrong offset");if(Ce<ge+(ye=ye===void 0?Ce-ge:S(ye)))throw Z("Wrong length");W(this,{buffer:J,byteLength:ye,byteOffset:ge}),g||(this.buffer=J,this.byteLength=ye,this.byteOffset=ge)},g&&(u(E,"byteLength"),u(R,"buffer"),u(R,"byteLength"),u(R,"byteOffset")),_(R[Y],{getInt8:function(J){return p(this,1,J)[0]<<24>>24},getUint8:function(J){return p(this,1,J)[0]},getInt16:function(J){return J=p(this,2,J,1<arguments.length?arguments[1]:void 0),(J[1]<<8|J[0])<<16>>16},getUint16:function(J){return J=p(this,2,J,1<arguments.length?arguments[1]:void 0),J[1]<<8|J[0]},getInt32:function(J){return l(p(this,4,J,1<arguments.length?arguments[1]:void 0))},getUint32:function(J){return l(p(this,4,J,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(J){return se(p(this,4,J,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(J){return se(p(this,8,J,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(J,ue){h(this,1,J,o,ue)},setUint8:function(J,ue){h(this,1,J,o,ue)},setInt16:function(J,ue){h(this,2,J,d,ue,2<arguments.length?arguments[2]:void 0)},setUint16:function(J,ue){h(this,2,J,d,ue,2<arguments.length?arguments[2]:void 0)},setInt32:function(J,ue){h(this,4,J,a,ue,2<arguments.length?arguments[2]:void 0)},setUint32:function(J,ue){h(this,4,J,a,ue,2<arguments.length?arguments[2]:void 0)},setFloat32:function(J,ue){h(this,4,J,b,ue,2<arguments.length?arguments[2]:void 0)},setFloat64:function(J,ue){h(this,8,J,y,ue,2<arguments.length?arguments[2]:void 0)}});N(E,G),N(R,z),i.exports={ArrayBuffer:E,DataView:R}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(r,i,c){var o=r("../internals/to-object"),d=r("../internals/to-absolute-index"),a=r("../internals/to-length"),l=Math.min;i.exports=[].copyWithin||function(g,y){var u=o(this),p=a(u.length),h=d(g,p),m=d(y,p),g=2<arguments.length?arguments[2]:void 0,f=l((g===void 0?p:d(g,p))-m,p-h),v=1;for(m<h&&h<m+f&&(v=-1,m+=f-1,h+=f-1);0<f--;)m in u?u[h]=u[m]:delete u[h],h+=v,m+=v;return u}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(r,i,c){var o=r("../internals/to-object"),d=r("../internals/to-absolute-index"),a=r("../internals/to-length");i.exports=function(l){for(var b=o(this),y=a(b.length),p=arguments.length,u=d(1<p?arguments[1]:void 0,y),p=2<p?arguments[2]:void 0,h=p===void 0?y:d(p,y);u<h;)b[u++]=l;return b}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(a,i,c){var o=a("../internals/array-iteration").forEach,d=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),d=d("forEach"),a=a("forEach");i.exports=d&&a?[].forEach:function(l){return o(this,l,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,i,c){var o=r("../internals/function-bind-context"),d=r("../internals/to-object"),a=r("../internals/call-with-safe-iteration-closing"),l=r("../internals/is-array-iterator-method"),b=r("../internals/to-length"),y=r("../internals/create-property"),u=r("../internals/get-iterator-method");i.exports=function(j){var h,m,g,f,v,_,x=d(j),j=typeof this=="function"?this:Array,M=arguments.length,S=1<M?arguments[1]:void 0,P=S!==void 0,L=u(x),D=0;if(P&&(S=o(S,2<M?arguments[2]:void 0,2)),L==null||j==Array&&l(L))for(m=new j(h=b(x.length));D<h;D++)_=P?S(x[D],D):x[D],y(m,D,_);else for(v=(f=L.call(x)).next,m=new j;!(g=v.call(f)).done;D++)_=P?a(f,S,[g.value,D],!0):g.value,y(m,D,_);return m.length=D,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(r,i,c){function o(b){return function(y,u,p){var h,m=d(y),g=a(m.length),f=l(p,g);if(b&&u!=u){for(;f<g;)if((h=m[f++])!=h)return!0}else for(;f<g;f++)if((b||f in m)&&m[f]===u)return b||f||0;return!b&&-1}}var d=r("../internals/to-indexed-object"),a=r("../internals/to-length"),l=r("../internals/to-absolute-index");i.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(r,i,c){function o(p){var h=p==1,m=p==2,g=p==3,f=p==4,v=p==6,_=p==5||v;return function(x,j,M,S){for(var P,L,D=l(x),k=a(D),I=d(j,M,3),A=b(k.length),F=0,j=S||y,N=h?j(x,A):m?j(x,0):void 0;F<A;F++)if((_||F in k)&&(L=I(P=k[F],F,D),p)){if(h)N[F]=L;else if(L)switch(p){case 3:return!0;case 5:return P;case 6:return F;case 2:u.call(N,P)}else if(f)return!1}return v?-1:g||f?f:N}}var d=r("../internals/function-bind-context"),a=r("../internals/indexed-object"),l=r("../internals/to-object"),b=r("../internals/to-length"),y=r("../internals/array-species-create"),u=[].push;i.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(p,i,c){var o=p("../internals/to-indexed-object"),d=p("../internals/to-integer"),a=p("../internals/to-length"),u=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),l=Math.min,b=[].lastIndexOf,y=!!b&&1/[1].lastIndexOf(1,-0)<0,u=u("lastIndexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});i.exports=y||!u||!p?function(h){if(y)return b.apply(this,arguments)||0;var m=o(this),g=a(m.length),f=g-1;for((f=1<arguments.length?l(f,d(arguments[1])):f)<0&&(f=g+f);0<=f;f--)if(f in m&&m[f]===h)return f||0;return-1}:b},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(r,i,c){var o=r("../internals/fails"),d=r("../internals/well-known-symbol"),a=r("../internals/engine-v8-version"),l=d("species");i.exports=function(b){return 51<=a||!o(function(){var y=[];return(y.constructor={})[l]=function(){return{foo:1}},y[b](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(r,i,c){var o=r("../internals/fails");i.exports=function(d,a){var l=[][d];return!!l&&o(function(){l.call(null,a||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,i,c){function o(u){throw u}var d=r("../internals/descriptors"),a=r("../internals/fails"),l=r("../internals/has"),b=Object.defineProperty,y={};i.exports=function(u,p){var h,m,g,f;return l(y,u)?y[u]:(h=[][u],m=!!l(p=p||{},"ACCESSORS")&&p.ACCESSORS,g=l(p,0)?p[0]:o,f=l(p,1)?p[1]:void 0,y[u]=!!h&&!a(function(){if(m&&!d)return!0;var v={length:-1};m?b(v,1,{enumerable:!0,get:o}):v[1]=1,h.call(v,g,f)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(r,i,c){function o(y){return function(u,p,h,m){d(p);var g=a(u),f=l(g),v=b(g.length),_=y?v-1:0,x=y?-1:1;if(h<2)for(;;){if(_ in f){m=f[_],_+=x;break}if(_+=x,y?_<0:v<=_)throw TypeError("Reduce of empty array with no initial value")}for(;y?0<=_:_<v;_+=x)_ in f&&(m=p(m,f[_],_,g));return m}}var d=r("../internals/a-function"),a=r("../internals/to-object"),l=r("../internals/indexed-object"),b=r("../internals/to-length");i.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(r,i,c){var o=r("../internals/is-object"),d=r("../internals/is-array"),a=r("../internals/well-known-symbol")("species");i.exports=function(l,b){var y;return new((y=d(l)&&(typeof(y=l.constructor)=="function"&&(y===Array||d(y.prototype))||o(y)&&(y=y[a])===null)?void 0:y)===void 0?Array:y)(b===0?0:b)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(r,i,c){var o=r("../internals/an-object");i.exports=function(d,a,l,b){try{return b?a(o(l)[0],l[1]):a(l)}catch(y){throw b=d.return,b!==void 0&&o(b.call(d)),y}}},{"../internals/an-object":10}],27:[function(r,i,c){var o=r("../internals/well-known-symbol")("iterator"),d=!1;try{var a=0,l={next:function(){return{done:!!a++}},return:function(){d=!0}};l[o]=function(){return this},Array.from(l,function(){throw 2})}catch{}i.exports=function(b,y){if(!y&&!d)return!1;var u=!1;try{var p={};p[o]=function(){return{next:function(){return{done:u=!0}}}},b(p)}catch{}return u}},{"../internals/well-known-symbol":149}],28:[function(r,i,c){var o={}.toString;i.exports=function(d){return o.call(d).slice(8,-1)}},{}],29:[function(r,i,c){var o=r("../internals/to-string-tag-support"),d=r("../internals/classof-raw"),a=r("../internals/well-known-symbol")("toStringTag"),l=d(function(){return arguments}())=="Arguments";i.exports=o?d:function(b){var y;return b===void 0?"Undefined":b===null?"Null":typeof(y=function(u,p){try{return u[p]}catch{}}(b=Object(b),a))=="string"?y:l?d(b):(y=d(b))=="Object"&&typeof b.callee=="function"?"Arguments":y}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(g,i,c){var o=g("../internals/object-define-property").f,d=g("../internals/object-create"),a=g("../internals/redefine-all"),l=g("../internals/function-bind-context"),b=g("../internals/an-instance"),y=g("../internals/iterate"),u=g("../internals/define-iterator"),p=g("../internals/set-species"),h=g("../internals/descriptors"),m=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),f=g.set,v=g.getterFor;i.exports={getConstructor:function(_,x,j,M){function S(k,I,A){var F,N=D(k),U=P(k,I);return U?U.value=A:(N.last=U={index:F=m(I,!0),key:I,value:A,previous:I=N.last,next:void 0,removed:!1},N.first||(N.first=U),I&&(I.next=U),h?N.size++:k.size++,F!=="F"&&(N.index[F]=U)),k}function P(F,I){var A,F=D(F),N=m(I);if(N!=="F")return F.index[N];for(A=F.first;A;A=A.next)if(A.key==I)return A}var L=_(function(k,I){b(k,L,x),f(k,{type:x,index:d(null),first:void 0,last:void 0,size:0}),h||(k.size=0),I!=null&&y(I,k[M],k,j)}),D=v(x);return a(L.prototype,{clear:function(){for(var k=D(this),I=k.index,A=k.first;A;)A.removed=!0,A.previous&&(A.previous=A.previous.next=void 0),delete I[A.index],A=A.next;k.first=k.last=void 0,h?k.size=0:this.size=0},delete:function(N){var I,A,F=D(this),N=P(this,N);return N&&(I=N.next,A=N.previous,delete F.index[N.index],N.removed=!0,A&&(A.next=I),I&&(I.previous=A),F.first==N&&(F.first=I),F.last==N&&(F.last=A),h?F.size--:this.size--),!!N},forEach:function(k){for(var I,A=D(this),F=l(k,1<arguments.length?arguments[1]:void 0,3);I=I?I.next:A.first;)for(F(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(k){return!!P(this,k)}}),a(L.prototype,j?{get:function(k){return k=P(this,k),k&&k.value},set:function(k,I){return S(this,k===0?0:k,I)}}:{add:function(k){return S(this,k=k===0?0:k,k)}}),h&&o(L.prototype,"size",{get:function(){return D(this).size}}),L},setStrong:function(_,x,j){var M=x+" Iterator",S=v(x),P=v(M);u(_,x,function(L,D){f(this,{type:M,target:L,state:S(L),kind:D,last:void 0})},function(){for(var L=P(this),D=L.kind,k=L.last;k&&k.removed;)k=k.previous;return L.target&&(L.last=k=k?k.next:L.state.first)?D=="keys"?{value:k.key,done:!1}:D=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:L.target=void 0,done:!0}},j?"entries":"values",!j,!0),p(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(f,i,c){function o(S){return S.frozen||(S.frozen=new d)}function d(){this.entries=[]}function a(S,P){return x(S.entries,function(L){return L[0]===P})}var l=f("../internals/redefine-all"),b=f("../internals/internal-metadata").getWeakData,y=f("../internals/an-object"),u=f("../internals/is-object"),p=f("../internals/an-instance"),h=f("../internals/iterate"),m=f("../internals/array-iteration"),g=f("../internals/has"),f=f("../internals/internal-state"),v=f.set,_=f.getterFor,x=m.find,j=m.findIndex,M=0;d.prototype={get:function(S){if(S=a(this,S),S)return S[1]},has:function(S){return!!a(this,S)},set:function(S,P){var L=a(this,S);L?L[1]=P:this.entries.push([S,P])},delete:function(S){var P=j(this.entries,function(L){return L[0]===S});return~P&&this.entries.splice(P,1),!!~P}},i.exports={getConstructor:function(S,P,L,D){function k(F,N,U){var W=A(F),G=b(y(N),!0);return G===!0?o(W).set(N,U):G[W.id]=U,F}var I=S(function(F,N){p(F,I,P),v(F,{type:P,id:M++,frozen:void 0}),N!=null&&h(N,F[D],F,L)}),A=_(P);return l(I.prototype,{delete:function(F){var N,U=A(this);return!!u(F)&&((N=b(F))===!0?o(U).delete(F):N&&g(N,U.id)&&delete N[U.id])},has:function(F){var N,U=A(this);return!!u(F)&&((N=b(F))===!0?o(U).has(F):N&&g(N,U.id))}}),l(I.prototype,L?{get:function(F){var N,U=A(this);if(u(F))return(N=b(F))===!0?o(U).get(F):N?N[U.id]:void 0},set:function(F,N){return k(this,F,N)}}:{add:function(F){return k(this,F,!0)}}),I}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/global"),a=r("../internals/is-forced"),l=r("../internals/redefine"),b=r("../internals/internal-metadata"),y=r("../internals/iterate"),u=r("../internals/an-instance"),p=r("../internals/is-object"),h=r("../internals/fails"),m=r("../internals/check-correctness-of-iteration"),g=r("../internals/set-to-string-tag"),f=r("../internals/inherit-if-required");i.exports=function(v,_,x){function j(G){var z=N[G];l(N,G,G=="add"?function(Y){return z.call(this,Y===0?0:Y),this}:G=="delete"?function(Y){return!(I&&!p(Y))&&z.call(this,Y===0?0:Y)}:G=="get"?function(Y){return I&&!p(Y)?void 0:z.call(this,Y===0?0:Y)}:G=="has"?function(Y){return!(I&&!p(Y))&&z.call(this,Y===0?0:Y)}:function(Y,$){return z.call(this,Y===0?0:Y,$),this})}var M,S,P,L,D,k=v.indexOf("Map")!==-1,I=v.indexOf("Weak")!==-1,A=k?"set":"add",F=d[v],N=F&&F.prototype,U=F,W={};return a(v,typeof F!="function"||!(I||N.forEach&&!h(function(){new F().entries().next()})))?(U=x.getConstructor(_,v,k,A),b.REQUIRED=!0):a(v,!0)&&(S=(M=new U)[A](I?{}:-0,1)!=M,P=h(function(){M.has(1)}),L=m(function(G){new F(G)}),D=!I&&h(function(){for(var G=new F,z=5;z--;)G[A](z,z);return!G.has(-0)}),L||(((U=_(function(G,z){return u(G,U,v),G=f(new F,G,U),z!=null&&y(z,G[A],G,k),G})).prototype=N).constructor=U),(P||D)&&(j("delete"),j("has"),k&&j("get")),(D||S)&&j(A),I&&N.clear&&delete N.clear),W[v]=U,o({global:!0,forced:U!=F},W),g(U,v),I||x.setStrong(U,v,k),U}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(r,i,c){var o=r("../internals/has"),d=r("../internals/own-keys"),a=r("../internals/object-get-own-property-descriptor"),l=r("../internals/object-define-property");i.exports=function(b,y){for(var u=d(y),p=l.f,h=a.f,m=0;m<u.length;m++){var g=u[m];o(b,g)||p(b,g,h(y,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(r,i,c){var o=r("../internals/well-known-symbol")("match");i.exports=function(d){var a=/./;try{"/./"[d](a)}catch{try{return a[o]=!1,"/./"[d](a)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(r,i,c){r=r("../internals/fails"),i.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(r,i,c){var o=r("../internals/require-object-coercible"),d=/"/g;i.exports=function(u,l,b,y){var u=String(o(u)),p="<"+l;return b!==""&&(p+=" "+b+'="'+String(y).replace(d,"&quot;")+'"'),p+">"+u+"</"+l+">"}},{"../internals/require-object-coercible":114}],37:[function(r,i,c){function o(){return this}var d=r("../internals/iterators-core").IteratorPrototype,a=r("../internals/object-create"),l=r("../internals/create-property-descriptor"),b=r("../internals/set-to-string-tag"),y=r("../internals/iterators");i.exports=function(u,p,h){return p+=" Iterator",u.prototype=a(d,{next:l(1,h)}),b(u,p,!1,!0),y[p]=o,u}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/object-define-property"),a=r("../internals/create-property-descriptor");i.exports=o?function(l,b,y){return d.f(l,b,a(1,y))}:function(l,b,y){return l[b]=y,l}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(r,i,c){i.exports=function(o,d){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:d}}},{}],40:[function(r,i,c){var o=r("../internals/to-primitive"),d=r("../internals/object-define-property"),a=r("../internals/create-property-descriptor");i.exports=function(l,b,y){b=o(b),b in l?d.f(l,b,a(0,y)):l[b]=y}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(f,i,c){function o(){return this}var d=f("../internals/export"),a=f("../internals/create-iterator-constructor"),l=f("../internals/object-get-prototype-of"),b=f("../internals/object-set-prototype-of"),y=f("../internals/set-to-string-tag"),u=f("../internals/create-non-enumerable-property"),p=f("../internals/redefine"),h=f("../internals/well-known-symbol"),m=f("../internals/is-pure"),g=f("../internals/iterators"),f=f("../internals/iterators-core"),v=f.IteratorPrototype,_=f.BUGGY_SAFARI_ITERATORS,x=h("iterator"),j="values",M="entries";i.exports=function(S,P,L,W,k,I,A){a(L,P,W);function F(E){if(E===k&&$)return $;if(!_&&E in z)return z[E];switch(E){case"keys":case j:case M:return function(){return new L(this,E)}}return function(){return new L(this)}}var N,U,W=P+" Iterator",G=!1,z=S.prototype,Y=z[x]||z["@@iterator"]||k&&z[k],$=!_&&Y||F(k),ie=P=="Array"&&z.entries||Y;if(ie&&(ie=l(ie.call(new S)),v!==Object.prototype&&ie.next&&(m||l(ie)===v||(b?b(ie,v):typeof ie[x]!="function"&&u(ie,x,o)),y(ie,W,!0,!0),m&&(g[W]=o))),k==j&&Y&&Y.name!==j&&(G=!0,$=function(){return Y.call(this)}),m&&!A||z[x]===$||u(z,x,$),g[P]=$,k)if(N={values:F(j),keys:I?$:F("keys"),entries:F(M)},A)for(U in N)!_&&!G&&U in z||p(z,U,N[U]);else d({target:P,proto:!0,forced:_||G},N);return N}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(r,i,c){var o=r("../internals/path"),d=r("../internals/has"),a=r("../internals/well-known-symbol-wrapped"),l=r("../internals/object-define-property").f;i.exports=function(b){var y=o.Symbol||(o.Symbol={});d(y,b)||l(y,b,{value:a.f(b)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(r,i,c){r=r("../internals/fails"),i.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(d,i,c){var o=d("../internals/global"),d=d("../internals/is-object"),a=o.document,l=d(a)&&d(a.createElement);i.exports=function(b){return l?a.createElement(b):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(r,i,c){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,i,c){r=r("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,i,c){r=r("../internals/get-built-in"),i.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(a,i,c){var o,d,l=a("../internals/global"),a=a("../internals/engine-user-agent"),l=l.process,l=l&&l.versions,l=l&&l.v8;l?d=(o=l.split("."))[0]+o[1]:a&&(!(o=a.match(/Edge\/(\d+)/))||74<=o[1])&&(o=a.match(/Chrome\/(\d+)/))&&(d=o[1]),i.exports=d&&+d},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(r,i,c){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,i,c){var o=r("../internals/global"),d=r("../internals/object-get-own-property-descriptor").f,a=r("../internals/create-non-enumerable-property"),l=r("../internals/redefine"),b=r("../internals/set-global"),y=r("../internals/copy-constructor-properties"),u=r("../internals/is-forced");i.exports=function(p,h){var m,g,f,v=p.target,_=p.global,x=p.stat,j=_?o:x?o[v]||b(v,{}):(o[v]||{}).prototype;if(j)for(m in h){if(g=h[m],f=p.noTargetGet?(f=d(j,m))&&f.value:j[m],!u(_?m:v+(x?".":"#")+m,p.forced)&&f!==void 0){if(typeof g==typeof f)continue;y(g,f)}(p.sham||f&&f.sham)&&a(g,"sham",!0),l(j,m,g,p)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(r,i,c){i.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(h,i,c){h("../modules/es.regexp.exec");var o=h("../internals/redefine"),d=h("../internals/fails"),a=h("../internals/well-known-symbol"),l=h("../internals/regexp-exec"),b=h("../internals/create-non-enumerable-property"),y=a("species"),u=!d(function(){var f=/./;return f.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(f,"$<a>")!=="7"}),p="a".replace(/./,"$0")==="$0",h=a("replace"),m=!!/./[h]&&/./[h]("a","$0")==="",g=!d(function(){var v=/(?:)/,f=v.exec,v=(v.exec=function(){return f.apply(this,arguments)},"ab".split(v));return v.length!==2||v[0]!=="a"||v[1]!=="b"});i.exports=function(f,v,_,x){var j,M,S=a(f),P=!d(function(){var D={};return D[S]=function(){return 7},""[f](D)!=7}),L=P&&!d(function(){var D=!1,k=/a/;return f==="split"&&((k={constructor:{}}).constructor[y]=function(){return k},k.flags="",k[S]=/./[S]),k.exec=function(){return D=!0,null},k[S](""),!D});P&&L&&(f!=="replace"||u&&p&&!m)&&(f!=="split"||g)||(j=/./[S],_=(L=_(S,""[f],function(D,k,I,A,F){return k.exec===l?P&&!F?{done:!0,value:j.call(k,I,A)}:{done:!0,value:D.call(I,k,A)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}))[0],M=L[1],o(String.prototype,f,_),o(RegExp.prototype,S,v==2?function(D,k){return M.call(D,this,k)}:function(D){return M.call(D,this)})),x&&b(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(r,i,c){function o(b,y,u,p,h,m,g,f){for(var v,_=h,x=0,j=!!g&&l(g,f,3);x<p;){if(x in u){if(v=j?j(u[x],x,y):u[x],0<m&&d(v))_=o(b,y,v,a(v.length),_,m-1)-1;else{if(9007199254740991<=_)throw TypeError("Exceed the acceptable array length");b[_]=v}_++}x++}return _}var d=r("../internals/is-array"),a=r("../internals/to-length"),l=r("../internals/function-bind-context");i.exports=o},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(r,i,c){r=r("../internals/fails"),i.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(r,i,c){var o=r("../internals/a-function");i.exports=function(d,a,l){if(o(d),a===void 0)return d;switch(l){case 0:return function(){return d.call(a)};case 1:return function(b){return d.call(a,b)};case 2:return function(b,y){return d.call(a,b,y)};case 3:return function(b,y,u){return d.call(a,b,y,u)}}return function(){return d.apply(a,arguments)}}},{"../internals/a-function":5}],56:[function(r,i,c){var o=r("../internals/a-function"),d=r("../internals/is-object"),a=[].slice,l={};i.exports=Function.bind||function(b){var y=o(this),u=a.call(arguments,1),p=function(){var h=u.concat(a.call(arguments));if(this instanceof p){var m=y,g=h.length,f=h;if(!(g in l)){for(var v=[],_=0;_<g;_++)v[_]="a["+_+"]";l[g]=Function("C,a","return new C("+v.join(",")+")")}return l[g](m,f)}return y.apply(b,h)};return d(y.prototype)&&(p.prototype=y.prototype),p}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(r,i,c){function o(l){return typeof l=="function"?l:void 0}var d=r("../internals/path"),a=r("../internals/global");i.exports=function(l,b){return arguments.length<2?o(d[l])||o(a[l]):d[l]&&d[l][b]||a[l]&&a[l][b]}},{"../internals/global":60,"../internals/path":105}],58:[function(r,i,c){var o=r("../internals/classof"),d=r("../internals/iterators"),a=r("../internals/well-known-symbol")("iterator");i.exports=function(l){if(l!=null)return l[a]||l["@@iterator"]||d[o(l)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(r,i,c){var o=r("../internals/an-object"),d=r("../internals/get-iterator-method");i.exports=function(a){var l=d(a);if(typeof l!="function")throw TypeError(String(a)+" is not iterable");return o(l.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(r,i,c){(function(o){function d(a){return a&&a.Math==Math&&a}i.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof Ui<"u"?Ui:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(r,i,c){var o={}.hasOwnProperty;i.exports=function(d,a){return o.call(d,a)}},{}],62:[function(r,i,c){i.exports={}},{}],63:[function(r,i,c){var o=r("../internals/global");i.exports=function(d,a){var l=o.console;l&&l.error&&(arguments.length===1?l.error(d):l.error(d,a))}},{"../internals/global":60}],64:[function(r,i,c){r=r("../internals/get-built-in"),i.exports=r("document","documentElement")},{"../internals/get-built-in":57}],65:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/fails"),a=r("../internals/document-create-element");i.exports=!o&&!d(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(r,i,c){var o=Math.abs,d=Math.pow,a=Math.floor,l=Math.log,b=Math.LN2;i.exports={pack:function(y,u,_){var h,m,g,f=new Array(_),v=8*_-u-1,_=(1<<v)-1,x=_>>1,j=u===23?d(2,-24)-d(2,-77):0,M=y<0||y===0&&1/y<0?1:0,S=0;for((y=o(y))!=y||y===1/0?(m=y!=y?1:0,h=_):(h=a(l(y)/b),y*(g=d(2,-h))<1&&(h--,g*=2),2<=(y+=1<=h+x?j/g:j*d(2,1-x))*g&&(h++,g/=2),_<=h+x?(m=0,h=_):1<=h+x?(m=(y*g-1)*d(2,u),h+=x):(m=y*d(2,x-1)*d(2,u),h=0));8<=u;f[S++]=255&m,m/=256,u-=8);for(h=h<<u|m,v+=u;0<v;f[S++]=255&h,h/=256,v-=8);return f[--S]|=128*M,f},unpack:function(y,u){var p,h=y.length,_=8*h-u-1,m=(1<<_)-1,g=m>>1,f=_-7,v=h-1,_=y[v--],x=127&_;for(_>>=7;0<f;x=256*x+y[v],v--,f-=8);for(p=x&(1<<-f)-1,x>>=-f,f+=u;0<f;p=256*p+y[v],v--,f-=8);if(x===0)x=1-g;else{if(x===m)return p?NaN:_?-1/0:1/0;p+=d(2,u),x-=g}return(_?-1:1)*p*d(2,x-u)}}},{}],67:[function(r,i,c){var o=r("../internals/fails"),d=r("../internals/classof-raw"),a="".split;i.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return d(l)=="String"?a.call(l,""):Object(l)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(r,i,c){var o=r("../internals/is-object"),d=r("../internals/object-set-prototype-of");i.exports=function(a,l,b){return d&&typeof(l=l.constructor)=="function"&&l!==b&&o(l=l.prototype)&&l!==b.prototype&&d(a,l),a}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(o,i,c){var o=o("../internals/shared-store"),d=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(a){return d.call(a)}),i.exports=o.inspectSource},{"../internals/shared-store":120}],70:[function(r,i,c){function o(f){b(f,p,{value:{objectID:"O"+ ++h,weakData:{}}})}var d=r("../internals/hidden-keys"),a=r("../internals/is-object"),l=r("../internals/has"),b=r("../internals/object-define-property").f,y=r("../internals/uid"),u=r("../internals/freezing"),p=y("meta"),h=0,m=Object.isExtensible||function(){return!0},g=i.exports={REQUIRED:!1,fastKey:function(f,v){if(!a(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!l(f,p)){if(!m(f))return"F";if(!v)return"E";o(f)}return f[p].objectID},getWeakData:function(f,v){if(!l(f,p)){if(!m(f))return!0;if(!v)return!1;o(f)}return f[p].weakData},onFreeze:function(f){return u&&g.REQUIRED&&m(f)&&!l(f,p)&&o(f),f}};d[p]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(_,i,c){var o,d,a,l,b,y,u,p,h=_("../internals/native-weak-map"),x=_("../internals/global"),m=_("../internals/is-object"),g=_("../internals/create-non-enumerable-property"),f=_("../internals/has"),v=_("../internals/shared-key"),_=_("../internals/hidden-keys"),x=x.WeakMap;u=h?(o=new x,d=o.get,a=o.has,l=o.set,b=function(j,M){return l.call(o,j,M),M},y=function(j){return d.call(o,j)||{}},function(j){return a.call(o,j)}):(_[p=v("state")]=!0,b=function(j,M){return g(j,p,M),M},y=function(j){return f(j,p)?j[p]:{}},function(j){return f(j,p)}),i.exports={set:b,get:y,has:u,enforce:function(j){return u(j)?y(j):b(j,{})},getterFor:function(j){return function(M){if(m(M)&&(M=y(M)).type===j)return M;throw TypeError("Incompatible receiver, "+j+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(r,i,c){var o=r("../internals/well-known-symbol"),d=r("../internals/iterators"),a=o("iterator"),l=Array.prototype;i.exports=function(b){return b!==void 0&&(d.Array===b||l[a]===b)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(r,i,c){var o=r("../internals/classof-raw");i.exports=Array.isArray||function(d){return o(d)=="Array"}},{"../internals/classof-raw":28}],74:[function(r,i,c){function o(p,h){return(p=b[l(p)])==u||p!=y&&(typeof h=="function"?d(h):!!h)}var d=r("../internals/fails"),a=/#|\.prototype\./,l=o.normalize=function(p){return String(p).replace(a,".").toLowerCase()},b=o.data={},y=o.NATIVE="N",u=o.POLYFILL="P";i.exports=o},{"../internals/fails":51}],75:[function(r,i,c){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],76:[function(r,i,c){i.exports=!1},{}],77:[function(r,i,c){var o=r("../internals/is-object"),d=r("../internals/classof-raw"),a=r("../internals/well-known-symbol")("match");i.exports=function(l){var b;return o(l)&&((b=l[a])!==void 0?!!b:d(l)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(r,i,c){function o(p,h){this.stopped=p,this.result=h}var d=r("../internals/an-object"),a=r("../internals/is-array-iterator-method"),l=r("../internals/to-length"),b=r("../internals/function-bind-context"),y=r("../internals/get-iterator-method"),u=r("../internals/call-with-safe-iteration-closing");(i.exports=function(p,h,m,g,f){var v,_,x,j,M,S,P=b(h,m,g?2:1);if(f)v=p;else{if(typeof(h=y(p))!="function")throw TypeError("Target is not iterable");if(a(h)){for(_=0,x=l(p.length);_<x;_++)if((j=g?P(d(S=p[_])[0],S[1]):P(p[_]))&&j instanceof o)return j;return new o(!1)}v=h.call(p)}for(M=v.next;!(S=M.call(v)).done;)if(typeof(j=u(v,P,S.value,g))=="object"&&j&&j instanceof o)return j;return new o(!1)}).stop=function(p){return new o(!0,p)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(y,i,c){var o,d,a=y("../internals/object-get-prototype-of"),l=y("../internals/create-non-enumerable-property"),b=y("../internals/has"),u=y("../internals/well-known-symbol"),y=y("../internals/is-pure"),u=u("iterator"),p=!1;[].keys&&("next"in(d=[].keys())?(a=a(a(d)))!==Object.prototype&&(o=a):p=!0),o==null&&(o={}),y||b(o,u)||l(o,u,function(){return this}),i.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:p}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(r,i,c){i.exports={}},{}],81:[function(r,i,c){i.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],82:[function(g,i,c){var o,d,a,l,b,y,u,p,h=g("../internals/global"),M=g("../internals/object-get-own-property-descriptor").f,j=g("../internals/classof-raw"),m=g("../internals/task").set,g=g("../internals/engine-is-ios"),f=h.MutationObserver||h.WebKitMutationObserver,v=h.process,_=h.Promise,x=j(v)=="process",j=M(h,"queueMicrotask"),M=j&&j.value;M||(o=function(){var S,P;for(x&&(S=v.domain)&&S.exit();d;){P=d.fn,d=d.next;try{P()}catch(L){throw d?l():a=void 0,L}}a=void 0,S&&S.enter()},l=x?function(){v.nextTick(o)}:f&&!g?(b=!0,y=document.createTextNode(""),new f(o).observe(y,{characterData:!0}),function(){y.data=b=!b}):_&&_.resolve?(u=_.resolve(void 0),p=u.then,function(){p.call(u,o)}):function(){m.call(h,o)}),i.exports=M||function(S){S={fn:S,next:void 0},a&&(a.next=S),d||(d=S,l()),a=S}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(r,i,c){r=r("../internals/global"),i.exports=r.Promise},{"../internals/global":60}],84:[function(r,i,c){r=r("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(r,i,c){var o=r("../internals/fails"),d=r("../internals/well-known-symbol"),a=r("../internals/is-pure"),l=d("iterator");i.exports=!o(function(){var b=new URL("b?a=1&b=2&c=3","http://a"),y=b.searchParams,u="";return b.pathname="c%20d",y.forEach(function(p,h){y.delete("b"),u+=h+p}),a&&!b.toJSON||!y.sort||b.href!=="http://a/c%20d?a=1&c=3"||y.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!y[l]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(o,i,c){var d=o("../internals/global"),o=o("../internals/inspect-source"),d=d.WeakMap;i.exports=typeof d=="function"&&/native code/.test(o(d))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(r,i,c){function o(a){var l,b;this.promise=new a(function(y,u){if(l!==void 0||b!==void 0)throw TypeError("Bad Promise constructor");l=y,b=u}),this.resolve=d(l),this.reject=d(b)}var d=r("../internals/a-function");i.exports.f=function(a){return new o(a)}},{"../internals/a-function":5}],88:[function(r,i,c){var o=r("../internals/is-regexp");i.exports=function(d){if(o(d))throw TypeError("The method doesn't accept regular expressions");return d}},{"../internals/is-regexp":77}],89:[function(r,i,c){var o=r("../internals/global").isFinite;i.exports=Number.isFinite||function(d){return typeof d=="number"&&o(d)}},{"../internals/global":60}],90:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/fails"),a=r("../internals/object-keys"),l=r("../internals/object-get-own-property-symbols"),b=r("../internals/object-property-is-enumerable"),y=r("../internals/to-object"),u=r("../internals/indexed-object"),p=Object.assign,h=Object.defineProperty;i.exports=!p||d(function(){var m,g,f,v;return!(!o||p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},v="abcdefghijklmnopqrst",(m={})[f=Symbol()]=7,v.split("").forEach(function(_){g[_]=_}),p({},m)[f]!=7||a(p({},g)).join("")!=v)})?function(m,g){for(var f=y(m),v=arguments.length,_=1,x=l.f,j=b.f;_<v;)for(var M,S=u(arguments[_++]),P=x?a(S).concat(x(S)):a(S),L=P.length,D=0;D<L;)M=P[D++],o&&!j.call(S,M)||(f[M]=S[M]);return f}:p},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(h,i,c){function o(){}var d,a=h("../internals/an-object"),l=h("../internals/object-define-properties"),b=h("../internals/enum-bug-keys"),y=h("../internals/hidden-keys"),u=h("../internals/html"),p=h("../internals/document-create-element"),h=h("../internals/shared-key"),m="prototype",g="script",f=h("IE_PROTO"),v=function(x){return"<"+g+">"+x+"</"+g+">"},_=function(){try{d=document.domain&&new ActiveXObject("htmlfile")}catch{}_=d?((x=d).write(v("")),x.close(),j=x.parentWindow.Object,x=null,j):(x=p("iframe"),j="java"+g+":",x.style.display="none",u.appendChild(x),x.src=String(j),(j=x.contentWindow.document).open(),j.write(v("document.F=Object")),j.close(),j.F);for(var x,j,M=b.length;M--;)delete _[m][b[M]];return _()};y[f]=!0,i.exports=Object.create||function(x,j){var M;return x!==null?(o[m]=a(x),M=new o,o[m]=null,M[f]=x):M=_(),j===void 0?M:l(M,j)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/object-define-property"),a=r("../internals/an-object"),l=r("../internals/object-keys");i.exports=o?Object.defineProperties:function(b,y){a(b);for(var u,p=l(y),h=p.length,m=0;m<h;)d.f(b,u=p[m++],y[u]);return b}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/ie8-dom-define"),a=r("../internals/an-object"),l=r("../internals/to-primitive"),b=Object.defineProperty;c.f=o?b:function(y,u,p){if(a(y),u=l(u,!0),a(p),d)try{return b(y,u,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(y[u]=p.value),y}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/object-property-is-enumerable"),a=r("../internals/create-property-descriptor"),l=r("../internals/to-indexed-object"),b=r("../internals/to-primitive"),y=r("../internals/has"),u=r("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;c.f=o?p:function(h,m){if(h=l(h),m=b(m,!0),u)try{return p(h,m)}catch{}if(y(h,m))return a(!d.f.call(h,m),h[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(r,i,c){var o=r("../internals/to-indexed-object"),d=r("../internals/object-get-own-property-names").f,a={}.toString,l=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(b){if(!l||a.call(b)!="[object Window]")return d(o(b));try{return d(b)}catch{return l.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(r,i,c){var o=r("../internals/object-keys-internal"),d=r("../internals/enum-bug-keys").concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return o(a,d)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(r,i,c){c.f=Object.getOwnPropertySymbols},{}],98:[function(l,i,c){var o=l("../internals/has"),d=l("../internals/to-object"),a=l("../internals/shared-key"),l=l("../internals/correct-prototype-getter"),b=a("IE_PROTO"),y=Object.prototype;i.exports=l?Object.getPrototypeOf:function(u){return u=d(u),o(u,b)?u[b]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?y:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(r,i,c){var o=r("../internals/has"),d=r("../internals/to-indexed-object"),a=r("../internals/array-includes").indexOf,l=r("../internals/hidden-keys");i.exports=function(b,y){var u,p=d(b),h=0,m=[];for(u in p)!o(l,u)&&o(p,u)&&m.push(u);for(;y.length>h;)!o(p,u=y[h++])||~a(m,u)||m.push(u);return m}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(r,i,c){var o=r("../internals/object-keys-internal"),d=r("../internals/enum-bug-keys");i.exports=Object.keys||function(a){return o(a,d)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(r,i,c){var o={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,a=d&&!o.call({1:2},1);c.f=a?function(l){return l=d(this,l),!!l&&l.enumerable}:o},{}],102:[function(r,i,c){var o=r("../internals/an-object"),d=r("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,l=!1,b={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(b,[]),l=b instanceof Array}catch{}return function(y,u){return o(y),d(u),l?a.call(y,u):y.__proto__=u,y}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(r,i,c){var o=r("../internals/to-string-tag-support"),d=r("../internals/classof");i.exports=o?{}.toString:function(){return"[object "+d(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(r,i,c){var o=r("../internals/get-built-in"),d=r("../internals/object-get-own-property-names"),a=r("../internals/object-get-own-property-symbols"),l=r("../internals/an-object");i.exports=o("Reflect","ownKeys")||function(b){var y=d.f(l(b)),u=a.f;return u?y.concat(u(b)):y}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(r,i,c){r=r("../internals/global"),i.exports=r},{"../internals/global":60}],106:[function(r,i,c){i.exports=function(o){try{return{error:!1,value:o()}}catch(d){return{error:!0,value:d}}}},{}],107:[function(r,i,c){var o=r("../internals/an-object"),d=r("../internals/is-object"),a=r("../internals/new-promise-capability");i.exports=function(l,b){return o(l),d(b)&&b.constructor===l?b:((0,(l=a.f(l)).resolve)(b),l.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(r,i,c){var o=r("../internals/redefine");i.exports=function(d,a,l){for(var b in a)o(d,b,a[b],l);return d}},{"../internals/redefine":109}],109:[function(y,i,c){var o=y("../internals/global"),d=y("../internals/create-non-enumerable-property"),a=y("../internals/has"),l=y("../internals/set-global"),b=y("../internals/inspect-source"),y=y("../internals/internal-state"),u=y.get,p=y.enforce,h=String(String).split("String");(i.exports=function(m,g,f,j){var _=!!j&&!!j.unsafe,x=!!j&&!!j.enumerable,j=!!j&&!!j.noTargetGet;typeof f=="function"&&(typeof g!="string"||a(f,"name")||d(f,"name",g),p(f).source=h.join(typeof g=="string"?g:"")),m===o?x?m[g]=f:l(g,f):(_?!j&&m[g]&&(x=!0):delete m[g],x?m[g]=f:d(m,g,f))})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||b(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(r,i,c){var o=r("./classof-raw"),d=r("./regexp-exec");i.exports=function(a,l){var b=a.exec;if(typeof b=="function"){if(b=b.call(a,l),typeof b!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return b}if(o(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return d.call(a,l)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(l,i,c){var o,d,a=l("./regexp-flags"),l=l("./regexp-sticky-helpers"),b=RegExp.prototype.exec,y=String.prototype.replace,u=b,p=(o=/a/,d=/b*/g,b.call(o,"a"),b.call(d,"a"),o.lastIndex!==0||d.lastIndex!==0),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0;i.exports=u=p||m||h?function(g){var f,v,_,x,j=this,M=h&&j.sticky,S=a.call(j),P=j.source,L=0,D=g;return M&&((S=S.replace("y","")).indexOf("g")===-1&&(S+="g"),D=String(g).slice(j.lastIndex),0<j.lastIndex&&(!j.multiline||j.multiline&&g[j.lastIndex-1]!==`
`)&&(P="(?: "+P+")",D=" "+D,L++),v=new RegExp("^(?:"+P+")",S)),m&&(v=new RegExp("^"+P+"$(?!\\s)",S)),p&&(f=j.lastIndex),_=b.call(M?v:j,D),M?_?(_.input=_.input.slice(L),_[0]=_[0].slice(L),_.index=j.lastIndex,j.lastIndex+=_[0].length):j.lastIndex=0:p&&_&&(j.lastIndex=j.global?_.index+_[0].length:f),m&&_&&1<_.length&&y.call(_[0],v,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(_[x]=void 0)}),_}:u},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(r,i,c){var o=r("../internals/an-object");i.exports=function(){var d=o(this),a="";return d.global&&(a+="g"),d.ignoreCase&&(a+="i"),d.multiline&&(a+="m"),d.dotAll&&(a+="s"),d.unicode&&(a+="u"),d.sticky&&(a+="y"),a}},{"../internals/an-object":10}],113:[function(r,i,c){r=r("./fails");function o(d,a){return RegExp(d,a)}c.UNSUPPORTED_Y=r(function(){var d=o("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),c.BROKEN_CARET=r(function(){var d=o("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},{"./fails":51}],114:[function(r,i,c){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],115:[function(r,i,c){i.exports=Object.is||function(o,d){return o===d?o!==0||1/o==1/d:o!=o&&d!=d}},{}],116:[function(r,i,c){var o=r("../internals/global"),d=r("../internals/create-non-enumerable-property");i.exports=function(a,l){try{d(o,a,l)}catch{o[a]=l}return l}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(r,i,c){var o=r("../internals/get-built-in"),d=r("../internals/object-define-property"),a=r("../internals/well-known-symbol"),l=r("../internals/descriptors"),b=a("species");i.exports=function(u){var u=o(u),p=d.f;l&&u&&!u[b]&&p(u,b,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(r,i,c){var o=r("../internals/object-define-property").f,d=r("../internals/has"),a=r("../internals/well-known-symbol")("toStringTag");i.exports=function(l,b,y){l&&!d(l=y?l:l.prototype,a)&&o(l,a,{configurable:!0,value:b})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(r,i,c){var o=r("../internals/shared"),d=r("../internals/uid"),a=o("keys");i.exports=function(l){return a[l]||(a[l]=d(l))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(o,i,c){var a=o("../internals/global"),o=o("../internals/set-global"),d="__core-js_shared__",a=a[d]||o(d,{});i.exports=a},{"../internals/global":60,"../internals/set-global":116}],121:[function(r,i,c){var o=r("../internals/is-pure"),d=r("../internals/shared-store");(i.exports=function(a,l){return d[a]||(d[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(r,i,c){var o=r("../internals/an-object"),d=r("../internals/a-function"),a=r("../internals/well-known-symbol")("species");i.exports=function(y,b){var y=o(y).constructor;return y===void 0||(y=o(y)[a])==null?b:d(y)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(r,i,c){var o=r("../internals/fails");i.exports=function(d){return o(function(){var a=""[d]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":51}],124:[function(r,i,c){function o(l){return function(p,h){var u,p=String(a(p)),h=d(h),m=p.length;return h<0||m<=h?l?"":void 0:(u=p.charCodeAt(h))<55296||56319<u||h+1===m||(m=p.charCodeAt(h+1))<56320||57343<m?l?p.charAt(h):u:l?p.slice(h,h+2):m-56320+(u-55296<<10)+65536}}var d=r("../internals/to-integer"),a=r("../internals/require-object-coercible");i.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(r,i,c){r=r("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],126:[function(r,i,c){function o(y){return function(m,v,f){var m=String(l(m)),g=m.length,f=f===void 0?" ":String(f),v=d(v);return v<=g||f==""?m:((g=a.call(f,b((v=v-g)/f.length))).length>v&&(g=g.slice(0,v)),y?m+g:g+m)}}var d=r("../internals/to-length"),a=r("../internals/string-repeat"),l=r("../internals/require-object-coercible"),b=Math.ceil;i.exports={start:o(!1),end:o(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(r,i,c){function o(_){return _+22+75*(_<26)}function d(_){var x,j=[],M=(_=function(Y){for(var $=[],ie=0,E=Y.length;ie<E;){var R,B=Y.charCodeAt(ie++);55296<=B&&B<=56319&&ie<E?(64512&(R=Y.charCodeAt(ie++)))==56320?$.push(((1023&B)<<10)+(1023&R)+65536):($.push(B),ie--):$.push(B)}return $}(_)).length,S=128,P=0,L=72;for(A=0;A<_.length;A++)(x=_[A])<128&&j.push(v(x));var D=j.length,k=D;for(D&&j.push("-");k<M;){for(var I=a,A=0;A<_.length;A++)S<=(x=_[A])&&x<I&&(I=x);var F=k+1;if(I-S>f((a-P)/F))throw RangeError(m);for(P+=(I-S)*F,S=I,A=0;A<_.length;A++){if((x=_[A])<S&&++P>a)throw RangeError(m);if(x==S){for(var N=P,U=l;;U+=l){var W=U<=L?1:L+b<=U?b:U-L;if(N<W)break;var G=N-W,z=l-W;j.push(v(o(W+G%z))),N=f(G/z)}j.push(v(o(N))),L=function(Y,$,ie){var E=0;for(Y=ie?f(Y/u):Y>>1,Y+=f(Y/$);g*b>>1<Y;E+=l)Y=f(Y/g);return f(E+(g+1)*Y/(Y+y))}(P,F,k==D),P=0,++k}}++P,++S}return j.join("")}var a=2147483647,l=36,b=26,y=38,u=700,p=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",g=l-1,f=Math.floor,v=String.fromCharCode;i.exports=function(_){for(var x,j=[],M=_.toLowerCase().replace(h,".").split("."),S=0;S<M.length;S++)x=M[S],j.push(p.test(x)?"xn--"+d(x):x);return j.join(".")}},{}],128:[function(r,i,c){var o=r("../internals/to-integer"),d=r("../internals/require-object-coercible");i.exports="".repeat||function(a){var l=String(d(this)),b="",y=o(a);if(y<0||y==1/0)throw RangeError("Wrong number of repetitions");for(;0<y;(y>>>=1)&&(l+=l))1&y&&(b+=l);return b}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(r,i,c){var o=r("../internals/fails"),d=r("../internals/whitespaces");i.exports=function(a){return o(function(){return!!d[a]()||""[a]()!=""||d[a].name!==a})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(a,i,c){function o(y){return function(u){return u=String(d(u)),1&y&&(u=u.replace(l,"")),u=2&y?u.replace(b,""):u}}var d=a("../internals/require-object-coercible"),a="["+a("../internals/whitespaces")+"]",l=RegExp("^"+a+a+"*"),b=RegExp(a+a+"*$");i.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(g,i,c){function o(k){return function(){D(k)}}function d(k){D(k.data)}function a(k){b.postMessage(k+"",f.protocol+"//"+f.host)}var l,b=g("../internals/global"),y=g("../internals/fails"),u=g("../internals/classof-raw"),p=g("../internals/function-bind-context"),h=g("../internals/html"),m=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),f=b.location,v=b.setImmediate,_=b.clearImmediate,x=b.process,j=b.MessageChannel,M=b.Dispatch,S=0,P={},L="onreadystatechange",D=function(k){var I;P.hasOwnProperty(k)&&(I=P[k],delete P[k],I())};v&&_||(v=function(k){for(var I=[],A=1;A<arguments.length;)I.push(arguments[A++]);return P[++S]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,I)},l(S),S},_=function(k){delete P[k]},u(x)=="process"?l=function(k){x.nextTick(o(k))}:M&&M.now?l=function(k){M.now(o(k))}:j&&!g?(g=(u=new j).port2,u.port1.onmessage=d,l=p(g.postMessage,g,1)):!b.addEventListener||typeof postMessage!="function"||b.importScripts||y(a)||f.protocol==="file:"?l=L in m("script")?function(k){h.appendChild(m("script"))[L]=function(){h.removeChild(this),D(k)}}:function(k){setTimeout(o(k),0)}:(l=a,b.addEventListener("message",d,!1))),i.exports={set:v,clear:_}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(r,i,c){var o=r("../internals/classof-raw");i.exports=function(d){if(typeof d!="number"&&o(d)!="Number")throw TypeError("Incorrect invocation");return+d}},{"../internals/classof-raw":28}],133:[function(r,i,c){var o=r("../internals/to-integer"),d=Math.max,a=Math.min;i.exports=function(l,b){return l=o(l),l<0?d(l+b,0):a(l,b)}},{"../internals/to-integer":136}],134:[function(r,i,c){var o=r("../internals/to-integer"),d=r("../internals/to-length");i.exports=function(l){if(l===void 0)return 0;var l=o(l),b=d(l);if(l!==b)throw RangeError("Wrong length or index");return b}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(r,i,c){var o=r("../internals/indexed-object"),d=r("../internals/require-object-coercible");i.exports=function(a){return o(d(a))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(r,i,c){var o=Math.ceil,d=Math.floor;i.exports=function(a){return isNaN(a=+a)?0:(0<a?d:o)(a)}},{}],137:[function(r,i,c){var o=r("../internals/to-integer"),d=Math.min;i.exports=function(a){return 0<a?d(o(a),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(r,i,c){var o=r("../internals/require-object-coercible");i.exports=function(d){return Object(o(d))}},{"../internals/require-object-coercible":114}],139:[function(r,i,c){var o=r("../internals/to-positive-integer");i.exports=function(d,a){if(d=o(d),d%a)throw RangeError("Wrong offset");return d}},{"../internals/to-positive-integer":140}],140:[function(r,i,c){var o=r("../internals/to-integer");i.exports=function(d){if(d=o(d),d<0)throw RangeError("The argument can't be less than 0");return d}},{"../internals/to-integer":136}],141:[function(r,i,c){var o=r("../internals/is-object");i.exports=function(d,a){if(!o(d))return d;var l,b;if(a&&typeof(l=d.toString)=="function"&&!o(b=l.call(d))||typeof(l=d.valueOf)=="function"&&!o(b=l.call(d))||!a&&typeof(l=d.toString)=="function"&&!o(b=l.call(d)))return b;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(r,i,c){var o={};o[r("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(r,i,c){function o(ge,_e){for(var Ee=0,Ie=_e.length,Te=new(J(ge))(Ie);Ee<Ie;)Te[Ee]=_e[Ee++];return Te}function d(ge,_e){R(ge,_e,{get:function(){return ie(this)[_e]}})}function a(ge){return ge instanceof te||(ge=D(ge))=="ArrayBuffer"||ge=="SharedArrayBuffer"}function l(ge,_e){return ue(ge)&&typeof _e!="symbol"&&_e in ge&&String(+_e)==String(_e)}function b(ge,_e){return l(ge,_e=P(_e,!0))?_(2,ge[_e]):B(ge,_e)}function y(ge,_e,Ee){return!(l(ge,_e=P(_e,!0))&&k(Ee)&&L(Ee,"value"))||L(Ee,"get")||L(Ee,"set")||Ee.configurable||L(Ee,"writable")&&!Ee.writable||L(Ee,"enumerable")&&!Ee.enumerable?R(ge,_e,Ee):(ge[_e]=Ee.value,ge)}var u=r("../internals/export"),p=r("../internals/global"),h=r("../internals/descriptors"),m=r("../internals/typed-array-constructors-require-wrappers"),g=r("../internals/array-buffer-view-core"),f=r("../internals/array-buffer"),v=r("../internals/an-instance"),_=r("../internals/create-property-descriptor"),x=r("../internals/create-non-enumerable-property"),j=r("../internals/to-length"),M=r("../internals/to-index"),S=r("../internals/to-offset"),P=r("../internals/to-primitive"),L=r("../internals/has"),D=r("../internals/classof"),k=r("../internals/is-object"),I=r("../internals/object-create"),A=r("../internals/object-set-prototype-of"),F=r("../internals/object-get-own-property-names").f,N=r("../internals/typed-array-from"),U=r("../internals/array-iteration").forEach,W=r("../internals/set-species"),G=r("../internals/object-define-property"),z=r("../internals/object-get-own-property-descriptor"),Y=r("../internals/internal-state"),$=r("../internals/inherit-if-required"),ie=Y.get,E=Y.set,R=G.f,B=z.f,H=Math.round,Z=p.RangeError,te=f.ArrayBuffer,se=f.DataView,pe=g.NATIVE_ARRAY_BUFFER_VIEWS,oe=g.TYPED_ARRAY_TAG,he=g.TypedArray,de=g.TypedArrayPrototype,J=g.aTypedArrayConstructor,ue=g.isTypedArray,ye="BYTES_PER_ELEMENT",Ce="Wrong length";h?(pe||(z.f=b,G.f=y,d(de,"buffer"),d(de,"byteOffset"),d(de,"byteLength"),d(de,"length")),u({target:"Object",stat:!0,forced:!pe},{getOwnPropertyDescriptor:b,defineProperty:y}),i.exports=function(ce,_e,Ee){function Ie(xe,Q){R(xe,Q,{get:function(){var re=this,K=Q;return(re=ie(re)).view[ze](K*Te+re.byteOffset,!0)},set:function(re){var K=this,ne=Q;K=ie(K),Ee&&(re=(re=H(re))<0?0:255<re?255:255&re),K.view[qe](ne*Te+K.byteOffset,re,!0)},enumerable:!0})}var Te=ce.match(/\d+$/)[0]/8,Qe=ce+(Ee?"Clamped":"")+"Array",ze="get"+ce,qe="set"+ce,Xe=p[Qe],We=Xe,ce=We&&We.prototype,Ae={};pe?m&&(We=_e(function(xe,Q,re,K){return v(xe,We,Qe),$(k(Q)?a(Q)?K!==void 0?new Xe(Q,S(re,Te),K):re!==void 0?new Xe(Q,S(re,Te)):new Xe(Q):ue(Q)?o(We,Q):N.call(We,Q):new Xe(M(Q)),xe,We)}),A&&A(We,he),U(F(Xe),function(xe){xe in We||x(We,xe,Xe[xe])}),We.prototype=ce):(We=_e(function(xe,Q,re,K){v(xe,We,Qe);var ne,ve,je=0,Le=0;if(k(Q)){if(!a(Q))return ue(Q)?o(We,Q):N.call(We,Q);var Ne=Q,Le=S(re,Te),re=Q.byteLength;if(K===void 0){if(re%Te||(ne=re-Le)<0)throw Z(Ce)}else if(re<(ne=j(K)*Te)+Le)throw Z(Ce);ve=ne/Te}else ve=M(Q),Ne=new te(ne=ve*Te);for(E(xe,{buffer:Ne,byteOffset:Le,byteLength:ne,length:ve,view:new se(Ne)});je<ve;)Ie(xe,je++)}),A&&A(We,he),ce=We.prototype=I(de)),ce.constructor!==We&&x(ce,"constructor",We),oe&&x(ce,oe,Qe),Ae[Qe]=We,u({global:!0,forced:We!=Xe,sham:!pe},Ae),ye in We||x(We,ye,Te),ye in ce||x(ce,ye,Te),W(Qe)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(l,i,c){var o=l("../internals/global"),d=l("../internals/fails"),a=l("../internals/check-correctness-of-iteration"),l=l("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,b=o.ArrayBuffer,y=o.Int8Array;i.exports=!l||!d(function(){y(1)})||!d(function(){new y(-1)})||!a(function(u){new y,new y(null),new y(1.5),new y(u)},!0)||d(function(){return new y(new b(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(r,i,c){var o=r("../internals/to-object"),d=r("../internals/to-length"),a=r("../internals/get-iterator-method"),l=r("../internals/is-array-iterator-method"),b=r("../internals/function-bind-context"),y=r("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(u){var p,h,m,g,f,v,_=o(u),x=arguments.length,j=1<x?arguments[1]:void 0,M=j!==void 0,S=a(_);if(S!=null&&!l(S))for(v=(f=S.call(_)).next,_=[];!(g=v.call(f)).done;)_.push(g.value);for(M&&2<x&&(j=b(j,arguments[2],2)),h=d(_.length),m=new(y(this))(h),p=0;p<h;p++)m[p]=M?j(_[p],p):_[p];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(r,i,c){var o=0,d=Math.random();i.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++o+d).toString(36)}},{}],147:[function(r,i,c){r=r("../internals/native-symbol"),i.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(r,i,c){r=r("../internals/well-known-symbol"),c.f=r},{"../internals/well-known-symbol":149}],149:[function(y,i,c){var o=y("../internals/global"),d=y("../internals/shared"),a=y("../internals/has"),l=y("../internals/uid"),b=y("../internals/native-symbol"),y=y("../internals/use-symbol-as-uid"),u=d("wks"),p=o.Symbol,h=y?p:p&&p.withoutSetter||l;i.exports=function(m){return a(u,m)||(b&&a(p,m)?u[m]=p[m]:u[m]=h("Symbol."+m)),u[m]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(r,i,c){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],151:[function(a,i,c){var o=a("../internals/export"),d=a("../internals/global"),b=a("../internals/array-buffer"),a=a("../internals/set-species"),l="ArrayBuffer",b=b[l];o({global:!0,forced:d[l]!==b},{ArrayBuffer:b}),a(l)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(_,i,c){var o=_("../internals/export"),d=_("../internals/fails"),a=_("../internals/is-array"),l=_("../internals/is-object"),b=_("../internals/to-object"),y=_("../internals/to-length"),u=_("../internals/create-property"),p=_("../internals/array-species-create"),h=_("../internals/array-method-has-species-support"),v=_("../internals/well-known-symbol"),_=_("../internals/engine-v8-version"),m=v("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",v=51<=_||!d(function(){var x=[];return x[m]=!1,x.concat()[0]!==x}),_=h("concat");o({target:"Array",proto:!0,forced:!v||!_},{concat:function(x){for(var j,M,S,P,L,D=b(this),k=p(D,0),I=0,A=-1,F=arguments.length;A<F;A++)if(L=void 0,!l(P=S=A===-1?D:arguments[A])||((L=P[m])!==void 0?!L:!a(P))){if(g<=I)throw TypeError(f);u(k,I++,S)}else{if(M=y(S.length),g<I+M)throw TypeError(f);for(j=0;j<M;j++,I++)j in S&&u(k,I,S[j])}return k.length=I,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(a,i,c){var o=a("../internals/export"),d=a("../internals/array-copy-within"),a=a("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:d}),a("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(l,i,c){var o=l("../internals/export"),d=l("../internals/array-iteration").every,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("every"),l=l("every");o({target:"Array",proto:!0,forced:!a||!l},{every:function(b){return d(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(a,i,c){var o=a("../internals/export"),d=a("../internals/array-fill"),a=a("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:d}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(l,i,c){var o=l("../internals/export"),d=l("../internals/array-iteration").filter,a=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),a=a("filter"),l=l("filter");o({target:"Array",proto:!0,forced:!a||!l},{filter:function(b){return d(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(y,i,c){var o=y("../internals/export"),d=y("../internals/array-iteration").findIndex,a=y("../internals/add-to-unscopables"),y=y("../internals/array-method-uses-to-length"),l="findIndex",b=!0,y=y(l);l in[]&&Array(1)[l](function(){b=!1}),o({target:"Array",proto:!0,forced:b||!y},{findIndex:function(u){return d(this,u,1<arguments.length?arguments[1]:void 0)}}),a(l)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/flatten-into-array"),a=r("../internals/to-object"),l=r("../internals/to-length"),b=r("../internals/a-function"),y=r("../internals/array-species-create");o({target:"Array",proto:!0},{flatMap:function(u){var p,h=a(this),m=l(h.length);return b(u),(p=y(h,0)).length=d(p,h,h,m,0,1,u,1<arguments.length?arguments[1]:void 0),p}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/flatten-into-array"),a=r("../internals/to-object"),l=r("../internals/to-length"),b=r("../internals/to-integer"),y=r("../internals/array-species-create");o({target:"Array",proto:!0},{flat:function(){var u=arguments.length?arguments[0]:void 0,p=a(this),h=l(p.length),m=y(p,0);return m.length=d(m,p,p,h,0,u===void 0?1:b(u)),m}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(d,i,c){var o=d("../internals/export"),d=d("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=d},{forEach:d})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/array-from");o({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:d})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/array-includes").includes,a=r("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(l){return d(this,l,1<arguments.length?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(y,i,c){var o=y("../internals/export"),d=y("../internals/array-includes").indexOf,b=y("../internals/array-method-is-strict"),y=y("../internals/array-method-uses-to-length"),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,b=b("indexOf"),y=y("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:l||!b||!y},{indexOf:function(u){return l?a.apply(this,arguments)||0:d(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(b,i,c){var o=b("../internals/to-indexed-object"),d=b("../internals/add-to-unscopables"),a=b("../internals/iterators"),l=b("../internals/internal-state"),b=b("../internals/define-iterator"),y="Array Iterator",u=l.set,p=l.getterFor(y);i.exports=b(Array,"Array",function(h,m){u(this,{type:y,target:o(h),index:0,kind:m})},function(){var h=p(this),m=h.target,g=h.kind,f=h.index++;return!m||f>=m.length?{value:h.target=void 0,done:!0}:g=="keys"?{value:f,done:!1}:g=="values"?{value:m[f],done:!1}:{value:[f,m[f]],done:!1}},"values"),a.Arguments=a.Array,d("keys"),d("values"),d("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(b,i,c){var o=b("../internals/export"),l=b("../internals/indexed-object"),d=b("../internals/to-indexed-object"),b=b("../internals/array-method-is-strict"),a=[].join,l=l!=Object,b=b("join",",");o({target:"Array",proto:!0,forced:l||!b},{join:function(y){return a.call(d(this),y===void 0?",":y)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(d,i,c){var o=d("../internals/export"),d=d("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:d!==[].lastIndexOf},{lastIndexOf:d})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(l,i,c){var o=l("../internals/export"),d=l("../internals/array-iteration").map,a=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),a=a("map"),l=l("map");o({target:"Array",proto:!0,forced:!a||!l},{map:function(b){return d(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(m,i,c){var o=m("../internals/export"),d=m("../internals/is-object"),a=m("../internals/is-array"),l=m("../internals/to-absolute-index"),b=m("../internals/to-length"),y=m("../internals/to-indexed-object"),u=m("../internals/create-property"),p=m("../internals/well-known-symbol"),h=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),h=h("slice"),m=m("slice",{ACCESSORS:!0,0:0,1:2}),g=p("species"),f=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!h||!m},{slice:function(_,x){var j,M,S,P=y(this),L=b(P.length),D=l(_,L),k=l(x===void 0?L:x,L);if(a(P)&&((j=typeof(j=P.constructor)=="function"&&(j===Array||a(j.prototype))||d(j)&&(j=j[g])===null?void 0:j)===Array||j===void 0))return f.call(P,D,k);for(M=new(j===void 0?Array:j)(v(k-D,0)),S=0;D<k;D++,S++)D in P&&u(M,S,P[D]);return M.length=S,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(l,i,c){var o=l("../internals/export"),d=l("../internals/array-iteration").some,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("some"),l=l("some");o({target:"Array",proto:!0,forced:!a||!l},{some:function(b){return d(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(h,i,c){var o=h("../internals/export"),d=h("../internals/to-absolute-index"),a=h("../internals/to-integer"),l=h("../internals/to-length"),b=h("../internals/to-object"),y=h("../internals/array-species-create"),u=h("../internals/create-property"),p=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),p=p("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min;o({target:"Array",proto:!0,forced:!p||!h},{splice:function(I,v){var _,x,j,M,S,P,L=b(this),D=l(L.length),k=d(I,D),I=arguments.length;if(I===0?_=x=0:x=I===1?(_=0,D-k):(_=I-2,g(m(a(v),0),D-k)),9007199254740991<D+_-x)throw TypeError("Maximum allowed length exceeded");for(j=y(L,x),M=0;M<x;M++)(S=k+M)in L&&u(j,M,L[S]);if(_<(j.length=x)){for(M=k;M<D-x;M++)P=M+_,(S=M+x)in L?L[P]=L[S]:delete L[P];for(M=D;D-x+_<M;M--)delete L[M-1]}else if(x<_)for(M=D-x;k<M;M--)P=M+_-1,(S=M+x-1)in L?L[P]=L[S]:delete L[P];for(M=0;M<_;M++)L[M+k]=arguments[M+2];return L.length=D-x+_,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(r,i,c){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(r,i,c){r("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(d,i,c){var o=d("../internals/descriptors"),d=d("../internals/object-define-property").f,a=Function.prototype,l=a.toString,b=/^\s*function ([^ (]*)/;!o||"name"in a||d(a,"name",{configurable:!0,get:function(){try{return l.call(this).match(b)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(d,i,c){var o=d("../internals/collection"),d=d("../internals/collection-strong");i.exports=o("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},d)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(o,i,c){var o=o("../internals/export"),d=Math.hypot,a=Math.abs,l=Math.sqrt;o({target:"Math",stat:!0,forced:!!d&&d(1/0,NaN)!==1/0},{hypot:function(b,y){for(var u,p,h=0,m=0,g=arguments.length,f=0;m<g;)f<(u=a(arguments[m++]))?(h=h*(p=f/u)*p+1,f=u):h+=0<u?(p=u/f)*p:u;return f===1/0?1/0:f*l(h)}})},{"../internals/export":50}],176:[function(o,i,c){var o=o("../internals/export"),d=Math.log,a=Math.LN2;o({target:"Math",stat:!0},{log2:function(l){return d(l)/a}})},{"../internals/export":50}],177:[function(r,i,c){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(r,i,c){function o(A){var F,N,U,W,G,z,Y,$=h(A,!1);if(typeof $=="string"&&2<$.length){if((A=($=x($)).charCodeAt(0))===43||A===45){if((F=$.charCodeAt(2))===88||F===120)return NaN}else if(A===48){switch($.charCodeAt(1)){case 66:case 98:N=2,U=49;break;case 79:case 111:N=8,U=55;break;default:return+$}for(G=(W=$.slice(2)).length,z=0;z<G;z++)if((Y=W.charCodeAt(z))<48||U<Y)return NaN;return parseInt(W,N)}}return+$}var d=r("../internals/descriptors"),a=r("../internals/global"),l=r("../internals/is-forced"),b=r("../internals/redefine"),y=r("../internals/has"),u=r("../internals/classof-raw"),p=r("../internals/inherit-if-required"),h=r("../internals/to-primitive"),m=r("../internals/fails"),g=r("../internals/object-create"),f=r("../internals/object-get-own-property-names").f,v=r("../internals/object-get-own-property-descriptor").f,_=r("../internals/object-define-property").f,x=r("../internals/string-trim").trim,j="Number",M=a[j],S=M.prototype,P=u(g(S))==j;if(l(j,!M(" 0o1")||!M("0b1")||M("+0x1"))){for(var L,D=function(F){var F=arguments.length<1?0:F,N=this;return N instanceof D&&(P?m(function(){S.valueOf.call(N)}):u(N)!=j)?p(new M(o(F)),N,D):o(F)},k=d?f(M):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;k.length>I;I++)y(M,L=k[I])&&!y(D,L)&&_(D,L,v(M,L));(D.prototype=S).constructor=D,b(a,j,D)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(r,i,c){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(y,i,c){function o(h,m,g){return m===0?g:m%2==1?o(h,m-1,g*h):o(h*h,m/2,g)}var d=y("../internals/export"),a=y("../internals/to-integer"),l=y("../internals/this-number-value"),b=y("../internals/string-repeat"),y=y("../internals/fails"),u=1 .toFixed,p=Math.floor;d({target:"Number",proto:!0,forced:u&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!y(function(){u.call({})})},{toFixed:function(j){function m(L,D){for(var k=-1,I=D;++k<6;)I+=L*M[k],M[k]=I%1e7,I=p(I/1e7)}function g(L){for(var D=6,k=0;0<=--D;)k+=M[D],M[D]=p(k/L),k=k%L*1e7}function f(){for(var L,D=6,k="";0<=--D;)k===""&&D!==0&&M[D]===0||(L=String(M[D]),k=k===""?L:k+b.call("0",7-L.length)+L);return k}var v,_,x=l(this),j=a(j),M=[0,0,0,0,0,0],S="",P="0";if(j<0||20<j)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(S="-",x=-x),1e-21<x)if(x=(v=function(L){for(var D=0,k=L;4096<=k;)D+=12,k/=4096;for(;2<=k;)D+=1,k/=2;return D}(x*o(2,69,1))-69)<0?x*o(2,-v,1):x/o(2,v,1),x*=4503599627370496,0<(v=52-v)){for(m(0,x),_=j;7<=_;)m(1e7,0),_-=7;for(m(o(10,_,1),0),_=v-1;23<=_;)g(1<<23),_-=23;g(1<<_),m(1,1),g(2),P=f()}else m(0,x),m(1<<-v,0),P=f()+b.call("0",j);return P=0<j?S+((x=P.length)<=j?"0."+b.call("0",j-x)+P:P.slice(0,x-j)+"."+P.slice(x-j)):S+P}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(d,i,c){var o=d("../internals/export"),d=d("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==d},{assign:d})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/iterate"),a=r("../internals/create-property");o({target:"Object",stat:!0},{fromEntries:function(l){var b={};return d(l,function(y,u){a(b,y,u)},void 0,!0),b}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(l,i,c){var o=l("../internals/export"),b=l("../internals/fails"),d=l("../internals/to-indexed-object"),a=l("../internals/object-get-own-property-descriptor").f,l=l("../internals/descriptors"),b=b(function(){a(1)});o({target:"Object",stat:!0,forced:!l||b,sham:!l},{getOwnPropertyDescriptor:function(y,u){return a(d(y),u)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(a,i,c){var o=a("../internals/export"),d=a("../internals/fails"),a=a("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:d(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(b,i,c){var o=b("../internals/export"),d=b("../internals/fails"),a=b("../internals/to-object"),l=b("../internals/object-get-prototype-of"),b=b("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:d(function(){l(1)}),sham:!b},{getPrototypeOf:function(y){return l(a(y))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/to-object"),a=r("../internals/object-keys");o({target:"Object",stat:!0,forced:r("../internals/fails")(function(){a(1)})},{keys:function(l){return a(d(l))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(a,i,c){var o=a("../internals/to-string-tag-support"),d=a("../internals/redefine"),a=a("../internals/object-to-string");o||d(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(Ee,i,c){var o,d,a,l,b=Ee("../internals/export"),y=Ee("../internals/is-pure"),u=Ee("../internals/global"),p=Ee("../internals/get-built-in"),h=Ee("../internals/native-promise-constructor"),m=Ee("../internals/redefine"),g=Ee("../internals/redefine-all"),f=Ee("../internals/set-to-string-tag"),v=Ee("../internals/set-species"),_=Ee("../internals/is-object"),x=Ee("../internals/a-function"),j=Ee("../internals/an-instance"),M=Ee("../internals/classof-raw"),S=Ee("../internals/inspect-source"),P=Ee("../internals/iterate"),L=Ee("../internals/check-correctness-of-iteration"),D=Ee("../internals/species-constructor"),k=Ee("../internals/task").set,I=Ee("../internals/microtask"),A=Ee("../internals/promise-resolve"),F=Ee("../internals/host-report-errors"),N=Ee("../internals/new-promise-capability"),U=Ee("../internals/perform"),W=Ee("../internals/internal-state"),G=Ee("../internals/is-forced"),Ie=Ee("../internals/well-known-symbol"),z=Ee("../internals/engine-v8-version"),Y=Ie("species"),$="Promise",ie=W.get,E=W.set,R=W.getterFor($),B=h,H=u.TypeError,Z=u.document,te=u.process,se=p("fetch"),pe=N.f,oe=pe,he=M(te)=="process",de=!!(Z&&Z.createEvent&&u.dispatchEvent),J="unhandledrejection",ue="rejectionhandled",ye=1,Ce=2,ge=1,_e=2,Ee=G($,function(){var Ae,xe;return S(B)===String(B)&&(z===66||!he&&typeof PromiseRejectionEvent!="function")?!0:!(!y||B.prototype.finally)||!(51<=z&&/native code/.test(B))&&(xe=function(Q){Q(function(){},function(){})},((Ae=B.resolve(1)).constructor={})[Y]=xe,!(Ae.then(function(){})instanceof xe))}),Ie=Ee||!L(function(Ae){B.all(Ae).catch(function(){})}),Te=function(Ae){var xe;return!(!_(Ae)||typeof(xe=Ae.then)!="function")&&xe},Qe=function(Ae,xe,Q){var re;xe.notified||(xe.notified=!0,re=xe.reactions,I(function(){for(var K,ne,ve=xe.value,je=xe.state==ye,Le=0;re.length>Le;){var Ne,Be,Ge,Ke=re[Le++],mt=je?Ke.ok:Ke.fail,lt=Ke.resolve,et=Ke.reject,pt=Ke.domain;try{mt?(je||(xe.rejection===_e&&function(at,zt){k.call(u,function(){he?te.emit("rejectionHandled",at):ze(ue,at,zt.value)})}(Ae,xe),xe.rejection=ge),mt===!0?Ne=ve:(pt&&pt.enter(),Ne=mt(ve),pt&&(pt.exit(),Ge=!0)),Ne===Ke.promise?et(H("Promise-chain cycle")):(Be=Te(Ne))?Be.call(Ne,lt,et):lt(Ne)):et(ve)}catch(at){pt&&!Ge&&pt.exit(),et(at)}}xe.reactions=[],xe.notified=!1,Q&&!xe.rejection&&(K=Ae,ne=xe,k.call(u,function(){var at=ne.value,zt=qe(ne);if(zt&&(zt=U(function(){he?te.emit("unhandledRejection",at,K):ze(J,K,at)}),ne.rejection=he||qe(ne)?_e:ge,zt.error))throw zt.value}))}))},ze=function(Ae,xe,Q){var re;de?((re=Z.createEvent("Event")).promise=xe,re.reason=Q,re.initEvent(Ae,!1,!0),u.dispatchEvent(re)):re={promise:xe,reason:Q},(xe=u["on"+Ae])?xe(re):Ae===J&&F("Unhandled promise rejection",Q)},qe=function(Ae){return Ae.rejection!==ge&&!Ae.parent},Xe=function(Ae,xe,Q,re){return function(K){Ae(xe,Q,K,re)}},We=function(Ae,xe,Q,re){xe.done||(xe.done=!0,(xe=re||xe).value=Q,xe.state=Ce,Qe(Ae,xe,!0))},ce=function(Ae,xe,Q,re){if(!xe.done){xe.done=!0,re&&(xe=re);try{if(Ae===Q)throw H("Promise can't be resolved itself");var K=Te(Q);K?I(function(){var ne={done:!1};try{K.call(Q,Xe(ce,Ae,ne,xe),Xe(We,Ae,ne,xe))}catch(ve){We(Ae,ne,ve,xe)}}):(xe.value=Q,xe.state=ye,Qe(Ae,xe,!1))}catch(ne){We(Ae,{done:!1},ne,xe)}}};Ee&&(B=function(Ae){j(this,B,$),x(Ae),o.call(this);var xe=ie(this);try{Ae(Xe(ce,this,xe),Xe(We,this,xe))}catch(Q){We(this,xe,Q)}},(o=function(Ae){E(this,{type:$,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(B.prototype,{then:function(Ae,xe){var Q=R(this),re=pe(D(this,B));return re.ok=typeof Ae!="function"||Ae,re.fail=typeof xe=="function"&&xe,re.domain=he?te.domain:void 0,Q.parent=!0,Q.reactions.push(re),Q.state!=0&&Qe(this,Q,!1),re.promise},catch:function(Ae){return this.then(void 0,Ae)}}),d=function(){var Ae=new o,xe=ie(Ae);this.promise=Ae,this.resolve=Xe(ce,Ae,xe),this.reject=Xe(We,Ae,xe)},N.f=pe=function(Ae){return Ae===B||Ae===a?new d:oe(Ae)},y||typeof h!="function"||(l=h.prototype.then,m(h.prototype,"then",function(Ae,xe){var Q=this;return new B(function(re,K){l.call(Q,re,K)}).then(Ae,xe)},{unsafe:!0}),typeof se=="function"&&b({global:!0,enumerable:!0,forced:!0},{fetch:function(Ae){return A(B,se.apply(u,arguments))}}))),b({global:!0,wrap:!0,forced:Ee},{Promise:B}),f(B,$,!1,!0),v($),a=p($),b({target:$,stat:!0,forced:Ee},{reject:function(Ae){var xe=pe(this);return xe.reject.call(void 0,Ae),xe.promise}}),b({target:$,stat:!0,forced:y||Ee},{resolve:function(Ae){return A(y&&this===a?B:this,Ae)}}),b({target:$,stat:!0,forced:Ie},{all:function(Ae){var xe=this,Q=pe(xe),re=Q.resolve,K=Q.reject,ne=U(function(){var ve=x(xe.resolve),je=[],Le=0,Ne=1;P(Ae,function(Be){var Ge=Le++,Ke=!1;je.push(void 0),Ne++,ve.call(xe,Be).then(function(mt){Ke||(Ke=!0,je[Ge]=mt,--Ne||re(je))},K)}),--Ne||re(je)});return ne.error&&K(ne.value),Q.promise},race:function(Ae){var xe=this,Q=pe(xe),re=Q.reject,K=U(function(){var ne=x(xe.resolve);P(Ae,function(ve){ne.call(xe,ve).then(Q.resolve,re)})});return K.error&&re(K.value),Q.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(u,i,c){var o=u("../internals/export"),g=u("../internals/get-built-in"),d=u("../internals/a-function"),a=u("../internals/an-object"),l=u("../internals/is-object"),b=u("../internals/object-create"),y=u("../internals/function-bind"),u=u("../internals/fails"),p=g("Reflect","construct"),h=u(function(){function f(){}return!(p(function(){},[],f)instanceof f)}),m=!u(function(){p(function(){})}),g=h||m;o({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(f,v){d(f),a(v);var _=arguments.length<3?f:d(arguments[2]);if(m&&!h)return p(f,v,_);if(f==_){switch(v.length){case 0:return new f;case 1:return new f(v[0]);case 2:return new f(v[0],v[1]);case 3:return new f(v[0],v[1],v[2]);case 4:return new f(v[0],v[1],v[2],v[3])}var x=[null];return x.push.apply(x,v),new(y.apply(f,x))}return x=_.prototype,_=b(l(x)?x:Object.prototype),x=Function.apply.call(f,_,v),l(x)?x:_}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/is-object"),a=r("../internals/an-object"),l=r("../internals/has"),b=r("../internals/object-get-own-property-descriptor"),y=r("../internals/object-get-prototype-of");o({target:"Reflect",stat:!0},{get:function u(p,h){var m,g=arguments.length<3?p:arguments[2];return a(p)===g?p[h]:(m=b.f(p,h))?l(m,"value")?m.value:m.get===void 0?void 0:m.get.call(g):d(m=y(p))?u(m,h,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(r,i,c){var o=r("../internals/descriptors"),d=r("../internals/global"),a=r("../internals/is-forced"),l=r("../internals/inherit-if-required"),b=r("../internals/object-define-property").f,y=r("../internals/object-get-own-property-names").f,u=r("../internals/is-regexp"),p=r("../internals/regexp-flags"),h=r("../internals/regexp-sticky-helpers"),m=r("../internals/redefine"),g=r("../internals/fails"),f=r("../internals/internal-state").set,v=r("../internals/set-species"),_=r("../internals/well-known-symbol")("match"),x=d.RegExp,j=x.prototype,M=/a/g,S=/a/g,P=new x(M)!==M,L=h.UNSUPPORTED_Y;if(o&&a("RegExp",!P||L||g(function(){return S[_]=!1,x(M)!=M||x(S)==S||x(M,"i")!="/a/i"}))){for(var D=function(A,F){var N,U=this instanceof D,W=u(A),G=F===void 0;return!U&&W&&A.constructor===D&&G?A:(P?W&&!G&&(A=A.source):A instanceof D&&(G&&(F=p.call(A)),A=A.source),L&&(N=!!F&&-1<F.indexOf("y"))&&(F=F.replace(/y/g,"")),W=l(P?new x(A,F):x(A,F),U?this:j,D),L&&N&&f(W,{sticky:N}),W)},k=y(x),I=0;k.length>I;)(function(A){A in D||b(D,A,{configurable:!0,get:function(){return x[A]},set:function(F){x[A]=F}})})(k[I++]);(j.constructor=D).prototype=j,m(d,"RegExp",D)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(d,i,c){var o=d("../internals/export"),d=d("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(l,i,c){var o=l("../internals/redefine"),d=l("../internals/an-object"),u=l("../internals/fails"),a=l("../internals/regexp-flags"),l="toString",b=RegExp.prototype,y=b[l],u=u(function(){return y.call({source:"a",flags:"b"})!="/a/b"}),p=y.name!=l;(u||p)&&o(RegExp.prototype,l,function(){var h=d(this),m=String(h.source),g=h.flags;return"/"+m+"/"+String(g===void 0&&h instanceof RegExp&&!("flags"in b)?a.call(h):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(d,i,c){var o=d("../internals/collection"),d=d("../internals/collection-strong");i.exports=o("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},d)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(y,i,c){var o=y("../internals/export"),d=y("../internals/object-get-own-property-descriptor").f,a=y("../internals/to-length"),l=y("../internals/not-a-regexp"),b=y("../internals/require-object-coercible"),h=y("../internals/correct-is-regexp-logic"),y=y("../internals/is-pure"),u="".endsWith,p=Math.min,h=h("endsWith");o({target:"String",proto:!0,forced:!!(y||h||!(o=d(String.prototype,"endsWith"))||o.writable)&&!h},{endsWith:function(m){var g=String(b(this)),f=(l(m),1<arguments.length?arguments[1]:void 0),v=a(g.length),f=f===void 0?v:p(a(f),v),v=String(m);return u?u.call(g,v,f):g.slice(f-v.length,f)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/not-a-regexp"),a=r("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(l){return!!~String(a(this)).indexOf(d(l),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(a,i,c){var o=a("../internals/string-multibyte").charAt,d=a("../internals/internal-state"),a=a("../internals/define-iterator"),l="String Iterator",b=d.set,y=d.getterFor(l);a(String,"String",function(u){b(this,{type:l,string:String(u),index:0})},function(){var u=y(this),p=u.string,h=u.index;return h>=p.length?{value:void 0,done:!0}:(p=o(p,h),u.index+=p.length,{value:p,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(r,i,c){var o=r("../internals/fix-regexp-well-known-symbol-logic"),d=r("../internals/an-object"),a=r("../internals/to-length"),l=r("../internals/require-object-coercible"),b=r("../internals/advance-string-index"),y=r("../internals/regexp-exec-abstract");o("match",1,function(u,p,h){return[function(m){var g=l(this),f=m==null?void 0:m[u];return f!==void 0?f.call(m,g):new RegExp(m)[u](String(g))},function(m){var g=h(p,m,this);if(g.done)return g.value;var f=d(m),v=String(this);if(!f.global)return y(f,v);for(var _=f.unicode,x=[],j=f.lastIndex=0;(M=y(f,v))!==null;){var M=String(M[0]);(x[j]=M)===""&&(f.lastIndex=b(v,a(f.lastIndex),_)),j++}return j===0?null:x}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/string-pad").start;o({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(a){return d(this,a,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(r,i,c){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(r,i,c){var o=r("../internals/fix-regexp-well-known-symbol-logic"),d=r("../internals/an-object"),a=r("../internals/to-object"),l=r("../internals/to-length"),b=r("../internals/to-integer"),y=r("../internals/require-object-coercible"),u=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract"),h=Math.max,m=Math.min,g=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;o("replace",2,function(_,x,j,M){var S=M.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,P=M.REPLACE_KEEPS_$0,L=S?"$":"$0";return[function(D,k){var I=y(this),A=D==null?void 0:D[_];return A!==void 0?A.call(D,I,k):x.call(String(I),D,k)},function(D,k){if(!S&&P||typeof k=="string"&&k.indexOf(L)===-1){var I=j(x,D,this,k);if(I.done)return I.value}for(var A,F=d(D),N=String(this),U=typeof k=="function",W=(U||(k=String(k)),F.global),G=(W&&(A=F.unicode,F.lastIndex=0),[]);(E=p(F,N))!==null&&(G.push(E),W);)String(E[0])===""&&(F.lastIndex=u(N,l(F.lastIndex),A));for(var z,Y="",$=0,ie=0;ie<G.length;ie++){for(var E=G[ie],R=String(E[0]),B=h(m(b(E.index),N.length),0),H=[],Z=1;Z<E.length;Z++)H.push((z=E[Z])===void 0?z:String(z));var te=E.groups,se=U?(se=[R].concat(H,B,N),te!==void 0&&se.push(te),String(k.apply(void 0,se))):function(pe,oe,he,de,J,ue){var ye=he+pe.length,Ce=de.length,ge=v;return J!==void 0&&(J=a(J),ge=f),x.call(ue,ge,function(_e,Ee){var Ie;switch(Ee.charAt(0)){case"$":return"$";case"&":return pe;case"`":return oe.slice(0,he);case"'":return oe.slice(ye);case"<":Ie=J[Ee.slice(1,-1)];break;default:var Te,Qe=+Ee;if(Qe==0)return _e;if(Ce<Qe)return(Te=g(Qe/10))!==0&&Te<=Ce?de[Te-1]===void 0?Ee.charAt(1):de[Te-1]+Ee.charAt(1):_e;Ie=de[Qe-1]}return Ie===void 0?"":Ie})}(R,N,B,H,te,k);$<=B&&(Y+=N.slice($,B)+se,$=B+R.length)}return Y+N.slice($)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(r,i,c){var o=r("../internals/fix-regexp-well-known-symbol-logic"),d=r("../internals/an-object"),a=r("../internals/require-object-coercible"),l=r("../internals/same-value"),b=r("../internals/regexp-exec-abstract");o("search",1,function(y,u,p){return[function(h){var m=a(this),g=h==null?void 0:h[y];return g!==void 0?g.call(h,m):new RegExp(h)[y](String(m))},function(h){var m,g=p(u,h,this);return g.done?g.value:(g=d(h),h=String(this),m=g.lastIndex,l(m,0)||(g.lastIndex=0),h=b(g,h),l(g.lastIndex,m)||(g.lastIndex=m),h===null?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(m,i,c){var o=m("../internals/fix-regexp-well-known-symbol-logic"),d=m("../internals/is-regexp"),a=m("../internals/an-object"),l=m("../internals/require-object-coercible"),b=m("../internals/species-constructor"),y=m("../internals/advance-string-index"),u=m("../internals/to-length"),p=m("../internals/regexp-exec-abstract"),h=m("../internals/regexp-exec"),m=m("../internals/fails"),g=[].push,f=Math.min,v=4294967295,_=!m(function(){return!RegExp(v,"y")});o("split",2,function(x,j,M){var S="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(P,L){var D=String(l(this)),k=L===void 0?v:L>>>0;if(k==0)return[];if(P===void 0)return[D];if(!d(P))return j.call(D,P,k);for(var I,A,F,N=[],L=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(P.sticky?"y":""),U=0,W=new RegExp(P.source,L+"g");(I=h.call(W,D))&&!(U<(A=W.lastIndex)&&(N.push(D.slice(U,I.index)),1<I.length&&I.index<D.length&&g.apply(N,I.slice(1)),F=I[0].length,U=A,N.length>=k));)W.lastIndex===I.index&&W.lastIndex++;return U===D.length?!F&&W.test("")||N.push(""):N.push(D.slice(U)),N.length>k?N.slice(0,k):N}:"0".split(void 0,0).length?function(P,L){return P===void 0&&L===0?[]:j.call(this,P,L)}:j;return[function(P,L){var D=l(this),k=P==null?void 0:P[x];return k!==void 0?k.call(P,D,L):S.call(String(D),P,L)},function(I,L){var D=M(S,I,this,L,S!==j);if(D.done)return D.value;var D=a(I),k=String(this),I=b(D,RegExp),A=D.unicode,F=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(_?"y":"g"),N=new I(_?D:"^(?:"+D.source+")",F),U=L===void 0?v:L>>>0;if(U==0)return[];if(k.length===0)return p(N,k)===null?[k]:[];for(var W=0,G=0,z=[];G<k.length;){N.lastIndex=_?G:0;var Y,$=p(N,_?k:k.slice(G));if($===null||(Y=f(u(N.lastIndex+(_?0:G)),k.length))===W)G=y(k,G,A);else{if(z.push(k.slice(W,G)),z.length===U)return z;for(var ie=1;ie<=$.length-1;ie++)if(z.push($[ie]),z.length===U)return z;G=W=Y}}return z.push(k.slice(W)),z}]},!_)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(y,i,c){var o=y("../internals/export"),d=y("../internals/object-get-own-property-descriptor").f,a=y("../internals/to-length"),l=y("../internals/not-a-regexp"),b=y("../internals/require-object-coercible"),h=y("../internals/correct-is-regexp-logic"),y=y("../internals/is-pure"),u="".startsWith,p=Math.min,h=h("startsWith");o({target:"String",proto:!0,forced:!!(y||h||!(o=d(String.prototype,"startsWith"))||o.writable)&&!h},{startsWith:function(v){var g=String(b(this)),f=(l(v),a(p(1<arguments.length?arguments[1]:void 0,g.length))),v=String(v);return u?u.call(g,v,f):g.slice(f,f+v.length)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/create-html");o({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return d(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(r,i,c){var o=r("../internals/export"),d=r("../internals/string-trim").trim;o({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return d(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(f,i,c){var o,d,a,l,b,y=f("../internals/export"),u=f("../internals/descriptors"),p=f("../internals/global"),h=f("../internals/has"),m=f("../internals/is-object"),g=f("../internals/object-define-property").f,f=f("../internals/copy-constructor-properties"),v=p.Symbol;!u||typeof v!="function"||"description"in v.prototype&&v().description===void 0||(o={},f(d=function(){var _=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof d?new v(_):_===void 0?v():v(_);return _===""&&(o[x]=!0),x},v),(p=d.prototype=v.prototype).constructor=d,a=p.toString,l=String(v("test"))=="Symbol(test)",b=/^Symbol\((.*)\)[^)]+$/,g(p,"description",{configurable:!0,get:function(){var _=m(this)?this.valueOf():this,x=a.call(_);return h(o,_)?"":(_=l?x.slice(7,-1):x.replace(b,"$1"))===""?void 0:_}}),y({global:!0,forced:!0},{Symbol:d}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(r,i,c){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(oe,i,c){function o(K,ne){var ve=Ie[K]=D(ue[pe]);return he(ve,{type:se,tag:K,description:ne}),h||(ve.description=ne),ve}function d(K,je){j(K);var ve=S(je),je=k(ve).concat(re(ve));return Z(je,function(Le){h&&!Q.call(ve,Le)||xe(K,Le,ve[Le])}),K}function a(je,Le){var ve,je=S(je),Le=P(Le,!0);if(je!==J||!v(Ie,Le)||v(Te,Le))return!(ve=Ce(je,Le))||!v(Ie,Le)||v(je,te)&&je[te][Le]||(ve.enumerable=!0),ve}function l(ne){var ne=_e(S(ne)),ve=[];return Z(ne,function(je){v(Ie,je)||v($,je)||ve.push(je)}),ve}var b=oe("../internals/export"),y=oe("../internals/global"),u=oe("../internals/get-built-in"),p=oe("../internals/is-pure"),h=oe("../internals/descriptors"),m=oe("../internals/native-symbol"),g=oe("../internals/use-symbol-as-uid"),f=oe("../internals/fails"),v=oe("../internals/has"),_=oe("../internals/is-array"),x=oe("../internals/is-object"),j=oe("../internals/an-object"),M=oe("../internals/to-object"),S=oe("../internals/to-indexed-object"),P=oe("../internals/to-primitive"),L=oe("../internals/create-property-descriptor"),D=oe("../internals/object-create"),k=oe("../internals/object-keys"),I=oe("../internals/object-get-own-property-names"),A=oe("../internals/object-get-own-property-names-external"),F=oe("../internals/object-get-own-property-symbols"),N=oe("../internals/object-get-own-property-descriptor"),U=oe("../internals/object-define-property"),W=oe("../internals/object-property-is-enumerable"),G=oe("../internals/create-non-enumerable-property"),z=oe("../internals/redefine"),Y=oe("../internals/shared"),qe=oe("../internals/shared-key"),$=oe("../internals/hidden-keys"),ie=oe("../internals/uid"),E=oe("../internals/well-known-symbol"),R=oe("../internals/well-known-symbol-wrapped"),B=oe("../internals/define-well-known-symbol"),H=oe("../internals/set-to-string-tag"),Xe=oe("../internals/internal-state"),Z=oe("../internals/array-iteration").forEach,te=qe("hidden"),se="Symbol",pe="prototype",oe=E("toPrimitive"),he=Xe.set,de=Xe.getterFor(se),J=Object[pe],ue=y.Symbol,ye=u("JSON","stringify"),Ce=N.f,ge=U.f,_e=A.f,Ee=W.f,Ie=Y("symbols"),Te=Y("op-symbols"),Qe=Y("string-to-symbol-registry"),ze=Y("symbol-to-string-registry"),qe=Y("wks"),Xe=y.QObject,We=!Xe||!Xe[pe]||!Xe[pe].findChild,ce=h&&f(function(){return D(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a!=7})?function(K,ne,ve){var je=Ce(J,ne);je&&delete J[ne],ge(K,ne,ve),je&&K!==J&&ge(J,ne,je)}:ge,Ae=g?function(K){return typeof K=="symbol"}:function(K){return Object(K)instanceof ue},xe=function(K,ne,ve){return K===J&&xe(Te,ne,ve),j(K),ne=P(ne,!0),j(ve),(v(Ie,ne)?(ve.enumerable?(v(K,te)&&K[te][ne]&&(K[te][ne]=!1),ve=D(ve,{enumerable:L(0,!1)})):(v(K,te)||ge(K,te,L(1,{})),K[te][ne]=!0),ce):ge)(K,ne,ve)},Q=function(ne){var ne=P(ne,!0),ve=Ee.call(this,ne);return!(this===J&&v(Ie,ne)&&!v(Te,ne))&&(!(ve||!v(this,ne)||!v(Ie,ne)||v(this,te)&&this[te][ne])||ve)},re=function(ve){var ne=ve===J,ve=_e(ne?Te:S(ve)),je=[];return Z(ve,function(Le){!v(Ie,Le)||ne&&!v(J,Le)||je.push(Ie[Le])}),je};m||(z((ue=function(){if(this instanceof ue)throw TypeError("Symbol is not a constructor");var K=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ne=ie(K),ve=function(je){this===J&&ve.call(Te,je),v(this,te)&&v(this[te],ne)&&(this[te][ne]=!1),ce(this,ne,L(1,je))};return h&&We&&ce(J,ne,{configurable:!0,set:ve}),o(ne,K)})[pe],"toString",function(){return de(this).tag}),z(ue,"withoutSetter",function(K){return o(ie(K),K)}),W.f=Q,U.f=xe,N.f=a,I.f=A.f=l,F.f=re,R.f=function(K){return o(E(K),K)},h&&(ge(ue[pe],"description",{configurable:!0,get:function(){return de(this).description}}),p||z(J,"propertyIsEnumerable",Q,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:ue}),Z(k(qe),function(K){B(K)}),b({target:se,stat:!0,forced:!m},{for:function(ve){var ne,ve=String(ve);return v(Qe,ve)?Qe[ve]:(ne=ue(ve),Qe[ve]=ne,ze[ne]=ve,ne)},keyFor:function(K){if(!Ae(K))throw TypeError(K+" is not a symbol");if(v(ze,K))return ze[K]},useSetter:function(){We=!0},useSimple:function(){We=!1}}),b({target:"Object",stat:!0,forced:!m,sham:!h},{create:function(K,ne){return ne===void 0?D(K):d(D(K),ne)},defineProperty:xe,defineProperties:d,getOwnPropertyDescriptor:a}),b({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:l,getOwnPropertySymbols:re}),b({target:"Object",stat:!0,forced:f(function(){F.f(1)})},{getOwnPropertySymbols:function(K){return F.f(M(K))}}),ye&&b({target:"JSON",stat:!0,forced:!m||f(function(){var K=ue();return ye([K])!="[null]"||ye({a:K})!="{}"||ye(Object(K))!="{}"})},{stringify:function(K,ne,ve){for(var je,Le=[K],Ne=1;Ne<arguments.length;)Le.push(arguments[Ne++]);if((x(je=ne)||K!==void 0)&&!Ae(K))return _(ne)||(ne=function(Be,Ge){if(typeof je=="function"&&(Ge=je.call(this,Be,Ge)),!Ae(Ge))return Ge}),Le[1]=ne,ye.apply(null,Le)}}),ue[pe][oe]||G(ue[pe],oe,ue[pe].valueOf),H(ue,se),$[te]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-copy-within"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(l,b){return d.call(a(this),l,b,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").every,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-fill"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(l){return d.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").filter,a=r("../internals/species-constructor"),l=o.aTypedArray,b=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(y){for(var u=d(l(this),y,1<arguments.length?arguments[1]:void 0),y=a(this,this.constructor),p=0,h=u.length,m=new(b(y))(h);p<h;)m[p]=u[p++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").findIndex,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").find,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(r,i,c){r("../internals/typed-array-constructor")("Float32",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],217:[function(r,i,c){r("../internals/typed-array-constructor")("Float64",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],218:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").forEach,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(l){d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-includes").includes,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-includes").indexOf,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(r,i,c){r("../internals/typed-array-constructor")("Int16",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],222:[function(r,i,c){r("../internals/typed-array-constructor")("Int32",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],223:[function(d,i,c){function o(){return a.call(y(this))}var h=d("../internals/global"),p=d("../internals/array-buffer-view-core"),u=d("../modules/es.array.iterator"),d=d("../internals/well-known-symbol")("iterator"),h=h.Uint8Array,a=u.values,l=u.keys,b=u.entries,y=p.aTypedArray,u=p.exportTypedArrayMethod,p=h&&h.prototype[d],h=!!p&&(p.name=="values"||p.name==null);u("entries",function(){return b.call(y(this))}),u("keys",function(){return l.call(y(this))}),u("values",o,!h),u(d,o,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(d,i,c){var d=d("../internals/array-buffer-view-core"),o=d.aTypedArray,d=d.exportTypedArrayMethod,a=[].join;d("join",function(l){return a.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-last-index-of"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(l){return d.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").map,a=r("../internals/species-constructor"),l=o.aTypedArray,b=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(y){return d(l(this),y,1<arguments.length?arguments[1]:void 0,function(u,p){return new(b(a(u,u.constructor)))(p)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-reduce").right,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(l){return d(a(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-reduce").left,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(l){return d(a(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(d,i,c){var d=d("../internals/array-buffer-view-core"),o=d.aTypedArray,d=d.exportTypedArrayMethod,a=Math.floor;d("reverse",function(){for(var l,b=o(this).length,y=a(b/2),u=0;u<y;)l=this[u],this[u++]=this[--b],this[b]=l;return this})},{"../internals/array-buffer-view-core":12}],230:[function(b,i,c){var o=b("../internals/array-buffer-view-core"),d=b("../internals/to-length"),a=b("../internals/to-offset"),l=b("../internals/to-object"),b=b("../internals/fails"),y=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(u){y(this);var p=a(1<arguments.length?arguments[1]:void 0,1),h=this.length,m=l(u),g=d(m.length),f=0;if(h<g+p)throw RangeError("Wrong length");for(;f<g;)this[p+f]=m[f++]},b(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(d,i,c){var b=d("../internals/array-buffer-view-core"),o=d("../internals/species-constructor"),d=d("../internals/fails"),a=b.aTypedArray,l=b.aTypedArrayConstructor,b=b.exportTypedArrayMethod,y=[].slice;b("slice",function(u,p){for(var h=y.call(a(this),u,p),u=o(this,this.constructor),m=0,g=h.length,f=new(l(u))(g);m<g;)f[m]=h[m++];return f},d(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/array-iteration").some,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(l){return d(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(d,i,c){var d=d("../internals/array-buffer-view-core"),o=d.aTypedArray,d=d.exportTypedArrayMethod,a=[].sort;d("sort",function(l){return a.call(o(this),l)})},{"../internals/array-buffer-view-core":12}],234:[function(r,i,c){var o=r("../internals/array-buffer-view-core"),d=r("../internals/to-length"),a=r("../internals/to-absolute-index"),l=r("../internals/species-constructor"),b=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(m,u){var p=b(this),h=p.length,m=a(m,h);return new(l(p,p.constructor))(p.buffer,p.byteOffset+m*p.BYTES_PER_ELEMENT,d((u===void 0?h:a(u,h))-m))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(d,i,c){var b=d("../internals/global"),o=d("../internals/array-buffer-view-core"),d=d("../internals/fails"),a=b.Int8Array,l=o.aTypedArray,b=o.exportTypedArrayMethod,y=[].toLocaleString,u=[].slice,p=!!a&&d(function(){y.call(new a(1))});b("toLocaleString",function(){return y.apply(p?u.call(l(this)):l(this),arguments)},d(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!d(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(d,i,c){var o=d("../internals/array-buffer-view-core").exportTypedArrayMethod,b=d("../internals/fails"),d=d("../internals/global").Uint8Array,d=d&&d.prototype||{},a=[].toString,l=[].join,b=(b(function(){a.call({})})&&(a=function(){return l.call(this)}),d.toString!=a);o("toString",a,b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(r,i,c){r("../internals/typed-array-constructor")("Uint16",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],238:[function(r,i,c){r("../internals/typed-array-constructor")("Uint32",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],239:[function(r,i,c){r("../internals/typed-array-constructor")("Uint8",function(o){return function(d,a,l){return o(this,d,a,l)}})},{"../internals/typed-array-constructor":143}],240:[function(r,i,c){r("../internals/typed-array-constructor")("Uint8",function(o){return function(d,a,l){return o(this,d,a,l)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(v,j,c){function o(M){return function(){return M(this,arguments.length?arguments[0]:void 0)}}var d,a,l,b,y,_=v("../internals/global"),u=v("../internals/redefine-all"),p=v("../internals/internal-metadata"),h=v("../internals/collection"),m=v("../internals/collection-weak"),g=v("../internals/is-object"),f=v("../internals/internal-state").enforce,v=v("../internals/native-weak-map"),_=!_.ActiveXObject&&"ActiveXObject"in _,x=Object.isExtensible,j=j.exports=h("WeakMap",o,m);v&&_&&(d=m.getConstructor(o,"WeakMap",!0),p.REQUIRED=!0,h=j.prototype,a=h.delete,l=h.has,b=h.get,y=h.set,u(h,{delete:function(M){var S;return g(M)&&!x(M)?((S=f(this)).frozen||(S.frozen=new d),a.call(this,M)||S.frozen.delete(M)):a.call(this,M)},has:function(M){var S;return g(M)&&!x(M)?((S=f(this)).frozen||(S.frozen=new d),l.call(this,M)||S.frozen.has(M)):l.call(this,M)},get:function(M){var S;return!g(M)||x(M)||((S=f(this)).frozen||(S.frozen=new d),l.call(this,M))?b.call(this,M):S.frozen.get(M)},set:function(M,S){var P;return!g(M)||x(M)||((P=f(this)).frozen||(P.frozen=new d),l.call(this,M))?y.call(this,M,S):P.frozen.set(M,S),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(r,i,c){var o,d=r("../internals/global"),a=r("../internals/dom-iterables"),l=r("../internals/array-for-each"),b=r("../internals/create-non-enumerable-property");for(o in a){var y=d[o],y=y&&y.prototype;if(y&&y.forEach!==l)try{b(y,"forEach",l)}catch{y.forEach=l}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(y,i,c){var o,d=y("../internals/global"),a=y("../internals/dom-iterables"),l=y("../modules/es.array.iterator"),b=y("../internals/create-non-enumerable-property"),y=y("../internals/well-known-symbol"),u=y("iterator"),p=y("toStringTag"),h=l.values;for(o in a){var m=d[o],g=m&&m.prototype;if(g){if(g[u]!==h)try{b(g,u,h)}catch{g[u]=h}if(g[p]||b(g,p,o),a[o]){for(var f in l)if(g[f]!==l[f])try{b(g,f,l[f])}catch{g[f]=l[f]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(te,i,c){te("../modules/es.array.iterator");function o(se){try{return decodeURIComponent(se)}catch{return se}}function d(se){return B[se]}function a(se){return encodeURIComponent(se).replace(R,d)}function l(se){this.entries.length=0,H(this.entries,se)}function b(se,pe){if(se<pe)throw TypeError("Not enough arguments")}function y(){_(this,y,U);var se,pe,oe,he,de,J,ue,ye,Ce=0<arguments.length?arguments[0]:void 0,ge=[];if(G(this,{type:U,entries:ge,updateURL:function(){},updateSearchParams:l}),Ce!==void 0)if(P(Ce))if(typeof(se=I(Ce))=="function")for(oe=(pe=se.call(Ce)).next;!(he=oe.call(pe)).done;){if((J=(de=(he=k(S(he.value))).next).call(he)).done||(ue=de.call(he)).done||!de.call(he).done)throw TypeError("Expected sequence with length 2");ge.push({key:J.value+"",value:ue.value+""})}else for(ye in Ce)x(Ce,ye)&&ge.push({key:ye,value:Ce[ye]+""});else H(ge,typeof Ce=="string"?Ce.charAt(0)==="?"?Ce.slice(1):Ce:Ce+"")}var u=te("../internals/export"),N=te("../internals/get-built-in"),p=te("../internals/native-url"),h=te("../internals/redefine"),m=te("../internals/redefine-all"),g=te("../internals/set-to-string-tag"),f=te("../internals/create-iterator-constructor"),v=te("../internals/internal-state"),_=te("../internals/an-instance"),x=te("../internals/has"),j=te("../internals/function-bind-context"),M=te("../internals/classof"),S=te("../internals/an-object"),P=te("../internals/is-object"),L=te("../internals/object-create"),D=te("../internals/create-property-descriptor"),k=te("../internals/get-iterator"),I=te("../internals/get-iterator-method"),te=te("../internals/well-known-symbol"),A=N("fetch"),F=N("Headers"),N=te("iterator"),U="URLSearchParams",W=U+"Iterator",G=v.set,z=v.getterFor(U),Y=v.getterFor(W),$=/\+/g,ie=Array(4),E=function(se){var pe,oe=se.replace($," "),he=4;try{return decodeURIComponent(oe)}catch{for(;he;)oe=oe.replace((pe=he--,ie[pe-1]||(ie[pe-1]=RegExp("((?:%[\\da-f]{2}){"+pe+"})","gi"))),o);return oe}},R=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},H=function(se,pe){if(pe)for(var oe,he=pe.split("&"),de=0;de<he.length;)(oe=he[de++]).length&&(oe=oe.split("="),se.push({key:E(oe.shift()),value:E(oe.join("="))}))},Z=f(function(se,pe){G(this,{type:W,iterator:k(z(se).entries),kind:pe})},"Iterator",function(){var pe=Y(this),se=pe.kind,pe=pe.iterator.next(),oe=pe.value;return pe.done||(pe.value=se==="keys"?oe.key:se==="values"?oe.value:[oe.key,oe.value]),pe}),te=y.prototype;m(te,{append:function(se,pe){b(arguments.length,2);var oe=z(this);oe.entries.push({key:se+"",value:pe+""}),oe.updateURL()},delete:function(se){b(arguments.length,1);for(var pe=z(this),oe=pe.entries,he=se+"",de=0;de<oe.length;)oe[de].key===he?oe.splice(de,1):de++;pe.updateURL()},get:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=0;he<pe.length;he++)if(pe[he].key===oe)return pe[he].value;return null},getAll:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=[],de=0;de<pe.length;de++)pe[de].key===oe&&he.push(pe[de].value);return he},has:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=0;he<pe.length;)if(pe[he++].key===oe)return!0;return!1},set:function(se,pe){b(arguments.length,1);for(var oe,he=z(this),de=he.entries,J=!1,ue=se+"",ye=pe+"",Ce=0;Ce<de.length;Ce++)(oe=de[Ce]).key===ue&&(J?de.splice(Ce--,1):(J=!0,oe.value=ye));J||de.push({key:ue,value:ye}),he.updateURL()},sort:function(){for(var se,pe,oe=z(this),he=oe.entries,de=he.slice(),J=he.length=0;J<de.length;J++){for(se=de[J],pe=0;pe<J;pe++)if(he[pe].key>se.key){he.splice(pe,0,se);break}pe===J&&he.push(se)}oe.updateURL()},forEach:function(se){for(var pe,oe=z(this).entries,he=j(se,1<arguments.length?arguments[1]:void 0,3),de=0;de<oe.length;)he((pe=oe[de++]).value,pe.key,this)},keys:function(){return new Z(this,"keys")},values:function(){return new Z(this,"values")},entries:function(){return new Z(this,"entries")}},{enumerable:!0}),h(te,N,te.entries),h(te,"toString",function(){for(var se,pe=z(this).entries,oe=[],he=0;he<pe.length;)se=pe[he++],oe.push(a(se.key)+"="+a(se.value));return oe.join("&")},{enumerable:!0}),g(y,U),u({global:!0,forced:!p},{URLSearchParams:y}),p||typeof A!="function"||typeof F!="function"||u({global:!0,enumerable:!0,forced:!0},{fetch:function(de){var pe,oe,he,de=[de];return 1<arguments.length&&(P(pe=arguments[1])&&(oe=pe.body,M(oe)===U&&((he=pe.headers?new F(pe.headers):new F).has("content-type")||he.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),pe=L(pe,{body:D(0,String(oe)),headers:D(0,he)}))),de.push(pe)),A.apply(this,de)}}),i.exports={URLSearchParams:y,getState:z}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,c){k("../modules/es.string.iterator");function o(me){var Ve,Ze,Fe,Ct;if(typeof me=="number"){for(Ve=[],Ze=0;Ze<4;Ze++)Ve.unshift(me%256),me=W(me/256);return Ve.join(".")}if(typeof me!="object")return me;for(Ve="",Fe=ue(me),Ze=0;Ze<8;Ze++)Ct&&me[Ze]===0||(Ct=Ct&&!1,Fe===Ze?(Ve+=Ze?":":"::",Ct=!0):(Ve+=me[Ze].toString(16),Ze<7&&(Ve+=":")));return"["+Ve+"]"}function d(me){return!me.host||me.cannotBeABaseURL||me.scheme=="file"}function a(me,Ve,Ze,Fe){var Ct,De,Pt,Ye=Ze||Ae,Et=0,$e="",lr=!1,vr=!1,nr=!1;for(Ze||(me.scheme="",me.username="",me.password="",me.host=null,me.port=null,me.path=[],me.query=null,me.fragment=null,me.cannotBeABaseURL=!1,Ve=Ve.replace(he,"")),Ve=Ve.replace(de,""),Ct=M(Ve);Et<=Ct.length;){switch(De=Ct[Et],Ye){case Ae:if(!De||!E.test(De)){if(Ze)return Y;Ye=Q;continue}$e+=De.toLowerCase(),Ye=xe;break;case xe:if(De&&(R.test(De)||De=="+"||De=="-"||De=="."))$e+=De.toLowerCase();else{if(De!=":"){if(Ze)return Y;$e="",Ye=Q,Et=0;continue}if(Ze&&(Te(me)!=x(Ie,$e)||$e=="file"&&(Qe(me)||me.port!==null)||me.scheme=="file"&&!me.host))return;if(me.scheme=$e,Ze)return void(Te(me)&&Ie[me.scheme]==me.port&&(me.port=null));$e="",me.scheme=="file"?Ye=mt:Te(me)&&Fe&&Fe.scheme==me.scheme?Ye=re:Te(me)?Ye=je:Ct[Et+1]=="/"?(Ye=K,Et++):(me.cannotBeABaseURL=!0,me.path.push(""),Ye=zt)}break;case Q:if(!Fe||Fe.cannotBeABaseURL&&De!="#")return Y;if(Fe.cannotBeABaseURL&&De=="#"){me.scheme=Fe.scheme,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",me.cannotBeABaseURL=!0,Ye=dr;break}Ye=Fe.scheme=="file"?mt:ne;continue;case re:if(De!="/"||Ct[Et+1]!="/"){Ye=ne;continue}Ye=Le,Et++;break;case K:if(De=="/"){Ye=Ne;break}Ye=at;continue;case ne:if(me.scheme=Fe.scheme,De==y)me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query=Fe.query;else if(De=="/"||De=="\\"&&Te(me))Ye=ve;else if(De=="?")me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query="",Ye=kr;else{if(De!="#"){me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.path.pop(),Ye=at;continue}me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",Ye=dr}break;case ve:if(!Te(me)||De!="/"&&De!="\\"){if(De!="/"){me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,Ye=at;continue}Ye=Ne}else Ye=Le;break;case je:if(Ye=Le,De!="/"||$e.charAt(Et+1)!="/")continue;Et++;break;case Le:if(De=="/"||De=="\\")break;Ye=Ne;continue;case Ne:if(De=="@"){lr&&($e="%40"+$e);for(var lr=!0,xr=M($e),bn=0;bn<xr.length;bn++){var Xr=xr[bn];Xr!=":"||nr?(Xr=Ee(Xr,_e),nr?me.password+=Xr:me.username+=Xr):nr=!0}$e=""}else if(De==y||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)){if(lr&&$e=="")return z;Et-=M($e).length+1,$e="",Ye=Be}else $e+=De;break;case Be:case Ge:if(Ze&&me.scheme=="file"){Ye=et;continue}if(De!=":"||vr){if(De==y||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)){if(Te(me)&&$e=="")return $;if(Ze&&$e==""&&(Qe(me)||me.port!==null))return;if(Pt=J(me,$e))return Pt;if($e="",Ye=pt,Ze)return;continue}De=="["?vr=!0:De=="]"&&(vr=!1),$e+=De}else{if($e=="")return $;if(Pt=J(me,$e))return Pt;if($e="",Ye=Ke,Ze==Ge)return}break;case Ke:if(!B.test(De)){if(De==y||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)||Ze){if($e!=""){var _n=parseInt($e,10);if(65535<_n)return ie;me.port=Te(me)&&_n===Ie[me.scheme]?null:_n,$e=""}if(Ze)return;Ye=pt;continue}return ie}$e+=De;break;case mt:if(me.scheme="file",De=="/"||De=="\\")Ye=lt;else{if(!Fe||Fe.scheme!="file"){Ye=at;continue}if(De==y)me.host=Fe.host,me.path=Fe.path.slice(),me.query=Fe.query;else if(De=="?")me.host=Fe.host,me.path=Fe.path.slice(),me.query="",Ye=kr;else{if(De!="#"){qe(Ct.slice(Et).join(""))||(me.host=Fe.host,me.path=Fe.path.slice(),Xe(me)),Ye=at;continue}me.host=Fe.host,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",Ye=dr}}break;case lt:if(De=="/"||De=="\\"){Ye=et;break}Fe&&Fe.scheme=="file"&&!qe(Ct.slice(Et).join(""))&&(ze(Fe.path[0],!0)?me.path.push(Fe.path[0]):me.host=Fe.host),Ye=at;continue;case et:if(De==y||De=="/"||De=="\\"||De=="?"||De=="#"){if(!Ze&&ze($e))Ye=at;else{if($e==""){if(me.host="",Ze)return}else{if(Pt=J(me,$e))return Pt;if(me.host=="localhost"&&(me.host=""),Ze)return;$e=""}Ye=pt}continue}$e+=De;break;case pt:if(Te(me)){if(Ye=at,De!="/"&&De!="\\")continue}else if(Ze||De!="?")if(Ze||De!="#"){if(De!=y&&(Ye=at,De!="/"))continue}else me.fragment="",Ye=dr;else me.query="",Ye=kr;break;case at:if(De==y||De=="/"||De=="\\"&&Te(me)||!Ze&&(De=="?"||De=="#")){if(ce($e)?(Xe(me),De=="/"||De=="\\"&&Te(me)||me.path.push("")):We($e)?De=="/"||De=="\\"&&Te(me)||me.path.push(""):(me.scheme=="file"&&!me.path.length&&ze($e)&&(me.host&&(me.host=""),$e=$e.charAt(0)+":"),me.path.push($e)),$e="",me.scheme=="file"&&(De==y||De=="?"||De=="#"))for(;1<me.path.length&&me.path[0]==="";)me.path.shift();De=="?"?(me.query="",Ye=kr):De=="#"&&(me.fragment="",Ye=dr)}else $e+=Ee(De,ge);break;case zt:De=="?"?(me.query="",Ye=kr):De=="#"?(me.fragment="",Ye=dr):De!=y&&(me.path[0]+=Ee(De,ye));break;case kr:Ze||De!="#"?De!=y&&(De=="'"&&Te(me)?me.query+="%27":me.query+=De=="#"?"%23":Ee(De,ye)):(me.fragment="",Ye=dr);break;case dr:De!=y&&(me.fragment+=Ee(De,Ce))}Et++}}function l(De){var Ve,Ze,Fe=_(this,l,"URL"),Ct=1<arguments.length?arguments[1]:void 0,De=String(De),Pt=N(Fe,{type:"URL"});if(Ct!==void 0){if(Ct instanceof l)Ve=U(Ct);else if(Ze=a(Ve={},String(Ct)))throw TypeError(Ze)}if(Ze=a(Pt,De,null,Ve))throw TypeError(Ze);var Ye=Pt.searchParams=new A;(Ct=F(Ye)).updateSearchParams(Pt.query),Ct.updateURL=function(){Pt.query=String(Ye)||null},m||(Fe.href=Wt.call(Fe),Fe.origin=St.call(Fe),Fe.protocol=Er.call(Fe),Fe.username=wr.call(Fe),Fe.password=Vt.call(Fe),Fe.host=Sr.call(Fe),Fe.hostname=Po.call(Fe),Fe.port=ko.call(Fe),Fe.pathname=To.call(Fe),Fe.search=Oi.call(Fe),Fe.searchParams=Mo.call(Fe),Fe.hash=Lo.call(Fe))}function b(me,Ve){return{get:me,set:Ve,configurable:!0,enumerable:!0}}var y,u,p,h=k("../internals/export"),m=k("../internals/descriptors"),g=k("../internals/native-url"),Ot=k("../internals/global"),f=k("../internals/object-define-properties"),v=k("../internals/redefine"),_=k("../internals/an-instance"),x=k("../internals/has"),j=k("../internals/object-assign"),M=k("../internals/array-from"),S=k("../internals/string-multibyte").codeAt,P=k("../internals/string-punycode-to-ascii"),L=k("../internals/set-to-string-tag"),D=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),I=Ot.URL,A=D.URLSearchParams,F=D.getState,N=k.set,U=k.getterFor("URL"),W=Math.floor,G=Math.pow,z="Invalid authority",Y="Invalid scheme",$="Invalid host",ie="Invalid port",E=/[A-Za-z]/,R=/[\d+-.A-Za-z]/,B=/\d/,H=/^(0x|0X)/,Z=/^[0-7]+$/,te=/^\d+$/,se=/^[\dA-Fa-f]+$/,pe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,oe=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,he=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,de=/[\u0009\u000A\u000D]/g,J=function(me,Ve){var Ze,Fe,Ct;if(Ve.charAt(0)=="[")return Ve.charAt(Ve.length-1)=="]"&&(Ze=function(De){var Pt=[0,0,0,0,0,0,0,0],Ye=0,Et=null,$e=0,lr,vr,nr,xr,bn,Xr,_n,jr=function(){return De.charAt($e)};if(jr()==":"){if(De.charAt(1)!=":")return;$e+=2,Ye++,Et=Ye}for(;jr();){if(Ye==8)return;if(jr()==":"){if(Et!==null)return;$e++,Ye++,Et=Ye;continue}for(lr=vr=0;vr<4&&se.test(jr());)lr=lr*16+parseInt(jr(),16),$e++,vr++;if(jr()=="."){if(vr==0||($e-=vr,Ye>6))return;for(nr=0;jr();){if(xr=null,nr>0)if(jr()=="."&&nr<4)$e++;else return;if(!B.test(jr()))return;for(;B.test(jr());){if(bn=parseInt(jr(),10),xr===null)xr=bn;else{if(xr==0)return;xr=xr*10+bn}if(xr>255)return;$e++}Pt[Ye]=Pt[Ye]*256+xr,nr++,(nr==2||nr==4)&&Ye++}if(nr!=4)return;break}else if(jr()==":"){if($e++,!jr())return}else if(jr())return;Pt[Ye++]=lr}if(Et!==null)for(Xr=Ye-Et,Ye=7;Ye!=0&&Xr>0;)_n=Pt[Ye],Pt[Ye--]=Pt[Et+Xr-1],Pt[Et+--Xr]=_n;else if(Ye!=8)return;return Pt}(Ve.slice(1,-1)))?void(me.host=Ze):$;if(Te(me))return Ve=P(Ve),pe.test(Ve)||(Ze=function(De){var Pt=De.split("."),Ye,Et,$e,lr,vr,nr,xr;if(Pt.length&&Pt[Pt.length-1]==""&&Pt.pop(),(Ye=Pt.length)>4)return De;for(Et=[],$e=0;$e<Ye;$e++){if(lr=Pt[$e],lr=="")return De;if(vr=10,lr.length>1&&lr.charAt(0)=="0"&&(vr=H.test(lr)?16:8,lr=lr.slice(vr==8?1:2)),lr==="")nr=0;else{if(!(vr==10?te:vr==8?Z:se).test(lr))return De;nr=parseInt(lr,vr)}Et.push(nr)}for($e=0;$e<Ye;$e++)if(nr=Et[$e],$e==Ye-1){if(nr>=G(256,5-Ye))return null}else if(nr>255)return null;for(xr=Et.pop(),$e=0;$e<Et.length;$e++)xr+=Et[$e]*G(256,3-$e);return xr}(Ve))===null?$:void(me.host=Ze);if(oe.test(Ve))return $;for(Ze="",Fe=M(Ve),Ct=0;Ct<Fe.length;Ct++)Ze+=Ee(Fe[Ct],ye);me.host=Ze},ue=function(me){for(var Ve=null,Ze=1,Fe=null,Ct=0,De=0;De<8;De++)me[De]!==0?(Ze<Ct&&(Ve=Fe,Ze=Ct),Fe=null,Ct=0):(Fe===null&&(Fe=De),++Ct);return Ze<Ct&&(Ve=Fe,Ze=Ct),Ve},ye={},Ce=j({},ye,{" ":1,'"':1,"<":1,">":1,"`":1}),ge=j({},Ce,{"#":1,"?":1,"{":1,"}":1}),_e=j({},ge,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ee=function(me,Ve){var Ze=S(me,0);return 32<Ze&&Ze<127&&!x(Ve,me)?me:encodeURIComponent(me)},Ie={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Te=function(me){return x(Ie,me.scheme)},Qe=function(me){return me.username!=""||me.password!=""},ze=function(me,Ve){return me.length==2&&E.test(me.charAt(0))&&((me=me.charAt(1))==":"||!Ve&&me=="|")},qe=function(me){return 1<me.length&&ze(me.slice(0,2))&&(me.length==2||(me=me.charAt(2))==="/"||me==="\\"||me==="?"||me==="#")},Xe=function(me){var Ve=me.path,Ze=Ve.length;!Ze||me.scheme=="file"&&Ze==1&&ze(Ve[0],!0)||Ve.pop()},We=function(me){return me==="."||me.toLowerCase()==="%2e"},ce=function(me){return(me=me.toLowerCase())===".."||me==="%2e."||me===".%2e"||me==="%2e%2e"},Ae={},xe={},Q={},re={},K={},ne={},ve={},je={},Le={},Ne={},Be={},Ge={},Ke={},mt={},lt={},et={},pt={},at={},zt={},kr={},dr={},Ot=l.prototype,Wt=function(){var me=U(this),Ve=me.scheme,Ze=me.username,Fe=me.password,Ct=me.host,De=me.port,Pt=me.path,Ye=me.query,Et=me.fragment,$e=Ve+":";return Ct!==null?($e+="//",Qe(me)&&($e+=Ze+(Fe?":"+Fe:"")+"@"),$e+=o(Ct),De!==null&&($e+=":"+De)):Ve=="file"&&($e+="//"),$e+=me.cannotBeABaseURL?Pt[0]:Pt.length?"/"+Pt.join("/"):"",Ye!==null&&($e+="?"+Ye),Et!==null&&($e+="#"+Et),$e},St=function(){var me=U(this),Ve=me.scheme,Ze=me.port;if(Ve=="blob")try{return new URL(Ve.path[0]).origin}catch{return"null"}return Ve!="file"&&Te(me)?Ve+"://"+o(me.host)+(Ze!==null?":"+Ze:""):"null"},Er=function(){return U(this).scheme+":"},wr=function(){return U(this).username},Vt=function(){return U(this).password},Sr=function(){var Ve=U(this),me=Ve.host,Ve=Ve.port;return me===null?"":Ve===null?o(me):o(me)+":"+Ve},Po=function(){var me=U(this).host;return me===null?"":o(me)},ko=function(){var me=U(this).port;return me===null?"":String(me)},To=function(){var me=U(this),Ve=me.path;return me.cannotBeABaseURL?Ve[0]:Ve.length?"/"+Ve.join("/"):""},Oi=function(){var me=U(this).query;return me?"?"+me:""},Mo=function(){return U(this).searchParams},Lo=function(){var me=U(this).fragment;return me?"#"+me:""};m&&f(Ot,{href:b(Wt,function(Ze){var Ve=U(this),Ze=String(Ze),Ze=a(Ve,Ze);if(Ze)throw TypeError(Ze);F(Ve.searchParams).updateSearchParams(Ve.query)}),origin:b(St),protocol:b(Er,function(me){var Ve=U(this);a(Ve,String(me)+":",Ae)}),username:b(wr,function(me){var Ve=U(this),Ze=M(String(me));if(!d(Ve)){Ve.username="";for(var Fe=0;Fe<Ze.length;Fe++)Ve.username+=Ee(Ze[Fe],_e)}}),password:b(Vt,function(me){var Ve=U(this),Ze=M(String(me));if(!d(Ve)){Ve.password="";for(var Fe=0;Fe<Ze.length;Fe++)Ve.password+=Ee(Ze[Fe],_e)}}),host:b(Sr,function(me){var Ve=U(this);Ve.cannotBeABaseURL||a(Ve,String(me),Be)}),hostname:b(Po,function(me){var Ve=U(this);Ve.cannotBeABaseURL||a(Ve,String(me),Ge)}),port:b(ko,function(me){var Ve=U(this);d(Ve)||((me=String(me))==""?Ve.port=null:a(Ve,me,Ke))}),pathname:b(To,function(me){var Ve=U(this);Ve.cannotBeABaseURL||(Ve.path=[],a(Ve,me+"",pt))}),search:b(Oi,function(me){var Ve=U(this);(me=String(me))==""?Ve.query=null:(me.charAt(0)=="?"&&(me=me.slice(1)),Ve.query="",a(Ve,me,kr)),F(Ve.searchParams).updateSearchParams(Ve.query)}),searchParams:b(Mo),hash:b(Lo,function(me){var Ve=U(this);(me=String(me))==""?Ve.fragment=null:(me.charAt(0)=="#"&&(me=me.slice(1)),Ve.fragment="",a(Ve,me,dr))})}),v(Ot,"toJSON",function(){return Wt.call(this)},{enumerable:!0}),v(Ot,"toString",function(){return Wt.call(this)},{enumerable:!0}),I&&(u=I.createObjectURL,p=I.revokeObjectURL,u&&v(l,"createObjectURL",function(me){return u.apply(I,arguments)}),p&&v(l,"revokeObjectURL",function(me){return p.apply(I,arguments)})),L(l,"URL"),h({global:!0,forced:!g,sham:!m},{URL:l})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(r,i,c){i.exports=r("./").polyfill()},{"./":247}],247:[function(r,i,c){(function(o,d){var a,l;a=this,l=function(){function b(J){return typeof J=="function"}var y=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},u=0,p=void 0,h=void 0,m=function(J,ue){j[u]=J,j[u+1]=ue,(u+=2)===2&&(h?h(M):A())},g=typeof window<"u"?window:void 0,f=g||{},f=f.MutationObserver||f.WebKitMutationObserver,v=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",_=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var J=setTimeout;return function(){return J(M,1)}}var j=new Array(1e3);function M(){for(var J=0;J<u;J+=2)(0,j[J])(j[J+1]),j[J]=void 0,j[J+1]=void 0;u=0}function S(){try{var J=Function("return this")().require("vertx");return(p=J.runOnLoop||J.runOnContext)!==void 0?function(){p(M)}:x()}catch{return x()}}var P,L,D,A=void 0;function k(J,ue){var ye,Ce=this,ge=new this.constructor(N),_e=(ge[F]===void 0&&se(ge),Ce._state);return _e?(ye=arguments[_e-1],m(function(){return Z(_e,ge,ye,Ce._result)})):B(Ce,ge,J,ue),ge}function I(J){var ue;return J&&typeof J=="object"&&J.constructor===this?J:($(ue=new this(N),J),ue)}var A=v?function(){return o.nextTick(M)}:f?(L=0,v=new f(M),D=document.createTextNode(""),v.observe(D,{characterData:!0}),function(){D.data=L=++L%2}):_?((P=new MessageChannel).port1.onmessage=M,function(){return P.port2.postMessage(0)}):(g===void 0&&typeof r=="function"?S:x)(),F=Math.random().toString(36).substring(2);function N(){}var U=void 0,W=1,G=2;function z(J,ue,ye){m(function(Ce){var ge=!1,_e=function(Ee,Ie,Te,Qe){try{Ee.call(Ie,Te,Qe)}catch(ze){return ze}}(ye,ue,function(Ee){ge||(ge=!0,(ue!==Ee?$:E)(Ce,Ee))},function(Ee){ge||(ge=!0,R(Ce,Ee))},Ce._label);!ge&&_e&&(ge=!0,R(Ce,_e))},J)}function Y(J,ue,ye){var Ce,ge;ue.constructor===J.constructor&&ye===k&&ue.constructor.resolve===I?(Ce=J,(ge=ue)._state===W?E(Ce,ge._result):ge._state===G?R(Ce,ge._result):B(ge,void 0,function(_e){return $(Ce,_e)},function(_e){return R(Ce,_e)})):ye!==void 0&&b(ye)?z(J,ue,ye):E(J,ue)}function $(J,ue){if(J===ue)R(J,new TypeError("You cannot resolve a promise with itself"));else if(ye=typeof ue,ue===null||ye!="object"&&ye!="function")E(J,ue);else{ye=void 0;try{ye=ue.then}catch(Ce){return void R(J,Ce)}Y(J,ue,ye)}var ye}function ie(J){J._onerror&&J._onerror(J._result),H(J)}function E(J,ue){J._state===U&&(J._result=ue,J._state=W,J._subscribers.length!==0&&m(H,J))}function R(J,ue){J._state===U&&(J._state=G,J._result=ue,m(ie,J))}function B(J,ue,ye,Ce){var ge=J._subscribers,_e=ge.length;J._onerror=null,ge[_e]=ue,ge[_e+W]=ye,ge[_e+G]=Ce,_e===0&&J._state&&m(H,J)}function H(J){var ue=J._subscribers,ye=J._state;if(ue.length!==0){for(var Ce,ge=void 0,_e=J._result,Ee=0;Ee<ue.length;Ee+=3)Ce=ue[Ee],ge=ue[Ee+ye],Ce?Z(ye,Ce,ge,_e):ge(_e);J._subscribers.length=0}}function Z(J,ue,ye,Ce){var ge=b(ye),_e=void 0,Ee=void 0,Ie=!0;if(ge){try{_e=ye(Ce)}catch(Te){Ie=!1,Ee=Te}if(ue===_e)return void R(ue,new TypeError("A promises callback cannot return that same promise."))}else _e=Ce;ue._state===U&&(ge&&Ie?$(ue,_e):Ie===!1?R(ue,Ee):J===W?E(ue,_e):J===G&&R(ue,_e))}var te=0;function se(J){J[F]=te++,J._state=void 0,J._result=void 0,J._subscribers=[]}oe.prototype._enumerate=function(J){for(var ue=0;this._state===U&&ue<J.length;ue++)this._eachEntry(J[ue],ue)},oe.prototype._eachEntry=function(J,ue){var ye=this._instanceConstructor,Ce=ye.resolve;if(Ce===I){var ge,_e=void 0,Ee=void 0,Ie=!1;try{_e=J.then}catch(Te){Ie=!0,Ee=Te}_e===k&&J._state!==U?this._settledAt(J._state,ue,J._result):typeof _e!="function"?(this._remaining--,this._result[ue]=J):ye===he?(ge=new ye(N),Ie?R(ge,Ee):Y(ge,J,_e),this._willSettleAt(ge,ue)):this._willSettleAt(new ye(function(Te){return Te(J)}),ue)}else this._willSettleAt(Ce(J),ue)},oe.prototype._settledAt=function(J,ue,ye){var Ce=this.promise;Ce._state===U&&(this._remaining--,J===G?R(Ce,ye):this._result[ue]=ye),this._remaining===0&&E(Ce,this._result)},oe.prototype._willSettleAt=function(J,ue){var ye=this;B(J,void 0,function(Ce){return ye._settledAt(W,ue,Ce)},function(Ce){return ye._settledAt(G,ue,Ce)})};var pe=oe;function oe(J,ue){this._instanceConstructor=J,this.promise=new J(N),this.promise[F]||se(this.promise),y(ue)?(this.length=ue.length,this._remaining=ue.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ue),this._remaining!==0)||E(this.promise,this._result)):R(this.promise,new Error("Array Methods must be provided an Array"))}de.prototype.catch=function(J){return this.then(null,J)},de.prototype.finally=function(J){var ue=this.constructor;return b(J)?this.then(function(ye){return ue.resolve(J()).then(function(){return ye})},function(ye){return ue.resolve(J()).then(function(){throw ye})}):this.then(J,J)};var he=de;function de(J){if(this[F]=te++,this._result=this._state=void 0,this._subscribers=[],N!==J){if(typeof J!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof de))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ue=this;try{J(function(ye){$(ue,ye)},function(ye){R(ue,ye)})}catch(ye){R(ue,ye)}}}return he.prototype.then=k,he.all=function(J){return new pe(this,J).promise},he.race=function(J){var ue=this;return y(J)?new ue(function(ye,Ce){for(var ge=J.length,_e=0;_e<ge;_e++)ue.resolve(J[_e]).then(ye,Ce)}):new ue(function(ye,Ce){return Ce(new TypeError("You must pass an array to race."))})},he.resolve=I,he.reject=function(J){var ue=new this(N);return R(ue,J),ue},he._setScheduler=function(J){h=J},he._setAsap=function(J){m=J},he._asap=m,he.polyfill=function(){var J=void 0;if(d!==void 0)J=d;else if(typeof self<"u")J=self;else try{J=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ue=J.Promise;if(ue){var ye=null;try{ye=Object.prototype.toString.call(ue.resolve())}catch{}if(ye==="[object Promise]"&&!ue.cast)return}J.Promise=he},he.Promise=he},typeof c=="object"&&i!==void 0?i.exports=l():a.ES6Promise=l()}).call(this,r("_process"),typeof Ui<"u"?Ui:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(r,i,c){var o,d;o=this,d=function(a,l){var b=5e3,y="callback";function u(h){try{delete window[h]}catch{window[h]=void 0}}function p(h){h=document.getElementById(h),h&&document.getElementsByTagName("head")[0].removeChild(h)}l.exports=function(h){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=h,f=m.timeout||b,v=m.jsonpCallback||y,_=void 0;return new Promise(function(x,j){var M=m.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=v+"_"+M,P=(window[M]=function(L){x({ok:!0,json:function(){return Promise.resolve(L)}}),_&&clearTimeout(_),p(S),u(M)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));P.setAttribute("src",""+g+v+"="+M),m.charset&&P.setAttribute("charset",m.charset),P.id=S,document.getElementsByTagName("head")[0].appendChild(P),_=setTimeout(function(){j(new Error("JSONP request to "+h+" timed out")),u(M),p(S),window[M]=function(){u(M)}},f),P.onerror=function(){j(new Error("JSONP request to "+h+" failed")),u(M),p(S),_&&clearTimeout(_)}})}},c!==void 0&&i!==void 0?d(0,i):(d(d={exports:{}},d),o.fetchJsonp=d.exports)},{}],249:[function(r,i,c){var o=function(d){var a,l,b,y,u,p,h,m,g,f,v;if(!(d===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=d.document,a=function(){return d.URL||d.webkitURL||d},l=v.createElementNS("http://www.w3.org/1999/xhtml","a"),b="download"in l,y=/constructor/i.test(d.HTMLElement)||d.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(_){(d.setImmediate||d.setTimeout)(function(){throw _},0)},h=4e4,m=function(_){setTimeout(function(){typeof _=="string"?a().revokeObjectURL(_):_.remove()},h)},g=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_},v=(f=function(_,x,L){L||(_=g(_));var M,S,P=this,L=_.type==="application/octet-stream",D=function(){for(var k=P,I="writestart progress write writeend".split(" "),A=void 0,F=(I=[].concat(I)).length;F--;){var N=k["on"+I[F]];if(typeof N=="function")try{N.call(k,A||k)}catch(U){p(U)}}};P.readyState=P.INIT,b?(M=a().createObjectURL(_),setTimeout(function(){var k,I;l.href=M,l.download=x,k=l,I=new MouseEvent("click"),k.dispatchEvent(I),D(),m(M),P.readyState=P.DONE})):(u||L&&y)&&d.FileReader?((S=new FileReader).onloadend=function(){var k=u?S.result:S.result.replace(/^data:[^;]*;/,"data:attachment/file;");d.open(k,"_blank")||(d.location.href=k),k=void 0,P.readyState=P.DONE,D()},S.readAsDataURL(_),P.readyState=P.INIT):(M=M||a().createObjectURL(_),!L&&d.open(M,"_blank")||(d.location.href=M),P.readyState=P.DONE,D(),m(M))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(_,x,j){return x=x||_.name||"download",j||(_=g(_)),navigator.msSaveOrOpenBlob(_,x)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(_,x,j){return new f(_,x||_.name||"download",j)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=o:n!=null},{}],250:[function(r,i,c){var o,d=Object.defineProperty,a=(d(c,"__esModule",{value:!0}),c),l={GIFEncoder:()=>D,applyPalette:()=>function(U,W,G="rgb565"){if(!U||!U.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(U instanceof Uint8Array||U instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<W.length)throw new Error("applyPalette() only works with 256 colors or less");const z=new Uint32Array(U.buffer),Y=z.length,$=G==="rgb444"?4096:65536,ie=new Uint8Array(Y),E=new Array($);if(G==="rgba4444")for(let de=0;de<Y;de++){var Z=z[de],R=Z>>24&255,B=Z>>16&255,H=Z>>8&255,Z=255&Z,te=m(Z,H,B,R),te=te in E?E[te]:E[te]=function(J,ue,ye,Ce,ge){let _e=0,Ee=1e100;for(let ze=0;ze<ge.length;ze++){var Ie,Te=ge[ze],Qe=S(Te[3]-Ce);Qe>Ee||(Ie=Te[0],(Qe+=S(Ie-J))>Ee||(Ie=Te[1],(Qe+=S(Ie-ue))>Ee||(Ie=Te[2],(Qe+=S(Ie-ye))>Ee||(Ee=Qe,_e=ze))))}return _e}(Z,H,B,R,W);ie[de]=te}else{const de=G==="rgb444"?g:h;for(let J=0;J<Y;J++){var oe=z[J],se=oe>>16&255,pe=oe>>8&255,oe=255&oe,he=de(oe,pe,se),he=he in E?E[he]:E[he]=function(ue,ye,Ce,ge){let _e=0,Ee=1e100;for(let ze=0;ze<ge.length;ze++){var Ie,Te=ge[ze],Qe=S(Te[0]-ue);Qe>Ee||(Ie=Te[1],(Qe+=S(Ie-ye))>Ee||(Ie=Te[2],(Qe+=S(Ie-Ce))>Ee||(Ee=Qe,_e=ze)))}return _e}(oe,pe,se,W);ie[J]=he}}return ie},default:()=>N,nearestColor:()=>function(U,W,G=j){return U[P(U,W,G)]},nearestColorIndex:()=>P,nearestColorIndexWithDistance:()=>L,prequantize:()=>function(U,{roundRGB:W=5,roundAlpha:G=10,oneBitAlpha:z=null}={}){const Y=new Uint32Array(U.buffer);for(let B=0;B<Y.length;B++){var R=Y[B];let H=R>>24&255;var $,ie=R>>16&255,E=R>>8&255,R=255&R;H=M(H,G),z&&($=typeof z=="number"?z:127,H=H<=$?0:255),R=M(R,W),E=M(E,W),ie=M(ie,W),Y[B]=H<<24|ie<<16|E<<8|R<<0}},quantize:()=>function(U,W,G={}){var{format:z="rgb565",clearAlpha:Y=!0,clearAlphaColor:$=0,clearAlphaThreshold:ie=0,oneBitAlpha:E=!1}=G;if(!U||!U.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(U instanceof Uint8Array||U instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");U=new Uint32Array(U.buffer);let R=G.useSqrt!==!1;const B=z==="rgba4444",H=function(qe,Xe){const We=Xe==="rgb444"?4096:65536,ce=new Array(We),Ae=qe.length;if(Xe==="rgba4444")for(let lt=0;lt<Ae;++lt){var K=qe[lt],xe=K>>24&255,Q=K>>16&255,re=K>>8&255,K=255&K,ne=m(K,re,Q,xe);let et=ne in ce?ce[ne]:ce[ne]=x();et.rc+=K,et.gc+=re,et.bc+=Q,et.ac+=xe,et.cnt++}else if(Xe==="rgb444")for(let lt=0;lt<Ae;++lt){var Le=qe[lt],ve=Le>>16&255,je=Le>>8&255,Le=255&Le,Ne=g(Le,je,ve);let et=Ne in ce?ce[Ne]:ce[Ne]=x();et.rc+=Le,et.gc+=je,et.bc+=ve,et.cnt++}else for(let lt=0;lt<Ae;++lt){var Ke=qe[lt],Be=Ke>>16&255,Ge=Ke>>8&255,Ke=255&Ke,mt=h(Ke,Ge,Be);let et=mt in ce?ce[mt]:ce[mt]=x();et.rc+=Ke,et.gc+=Ge,et.bc+=Be,et.cnt++}return ce}(U,z),Z=H.length,te=Z-1,se=new Uint32Array(Z+1);for(var pe=0,oe=0;oe<Z;++oe){const qe=H[oe];qe!=null&&(Te=1/qe.cnt,B&&(qe.ac*=Te),qe.rc*=Te,qe.gc*=Te,qe.bc*=Te,H[pe++]=qe)}v(W)/pe<.022&&(R=!1);for(var he,de,J,oe=0;oe<pe-1;++oe)H[oe].fw=oe+1,H[oe+1].bk=oe,R&&(H[oe].cnt=Math.sqrt(H[oe].cnt));for(R&&(H[oe].cnt=Math.sqrt(H[oe].cnt)),oe=0;oe<pe;++oe){_(H,oe);var ue=H[oe].err;for(de=++se[0];1<de&&(J=de>>1,!(H[he=se[J]].err<=ue));de=J)se[de]=he;se[de]=oe}var ye,Ce=pe-W;for(oe=0;oe<Ce;){for(;;){var ge=se[1];if((ye=H[ge]).tm>=ye.mtm&&H[ye.nn].mtm<=ye.tm)break;for(ye.mtm==te?ge=se[1]=se[se[0]--]:(_(H,ge),ye.tm=oe),ue=H[ge].err,de=1;(J=de+de)<=se[0]&&(J<se[0]&&H[se[J]].err>H[se[J+1]].err&&J++,!(ue<=H[he=se[J]].err));de=J)se[de]=he;se[de]=ge}var _e=H[ye.nn],Ee=ye.cnt,Ie=_e.cnt,Te=1/(Ee+Ie);B&&(ye.ac=Te*(Ee*ye.ac+Ie*_e.ac)),ye.rc=Te*(Ee*ye.rc+Ie*_e.rc),ye.gc=Te*(Ee*ye.gc+Ie*_e.gc),ye.bc=Te*(Ee*ye.bc+Ie*_e.bc),ye.cnt+=_e.cnt,ye.mtm=++oe,H[_e.bk].fw=_e.fw,H[_e.fw].bk=_e.bk,_e.mtm=te}let Qe=[];for(oe=0;;0){let qe=f(Math.round(H[oe].rc),0,255),Xe=f(Math.round(H[oe].gc),0,255),We=f(Math.round(H[oe].bc),0,255),ce=255;B&&(ce=f(Math.round(H[oe].ac),0,255),E&&(ze=typeof E=="number"?E:127,ce=ce<=ze?0:255),Y&&ce<=ie&&(qe=Xe=We=$,ce=0));var ze=B?[qe,Xe,We,ce]:[qe,Xe,We];if(function(Ae,xe){for(let K=0;K<Ae.length;K++){var re=Ae[K],Q=re[0]===xe[0]&&re[1]===xe[1]&&re[2]===xe[2],re=!(4<=re.length&&4<=xe.length)||re[3]===xe[3];if(Q&&re)return!0}return!1}(Qe,ze)||Qe.push(ze),(oe=H[oe].fw)==0)break}return Qe},snapColorsToPalette:()=>function(U,W,G=5){if(U.length&&W.length){var z=U.map(R=>R.slice(0,3)),Y=G*G,$=U[0].length;for(let R=0;R<W.length;R++){let B=W[R];B=B.length<$?[B[0],B[1],B[2],255]:B.length>$?B.slice(0,3):B.slice();var E=L(z,B.slice(0,3),j),ie=E[0],E=E[1];0<E&&E<=Y&&(U[ie]=B)}}}};for(o in l)d(a,o,{get:l[o],enumerable:!0});var b={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function y(U=256){let W=0,G=new Uint8Array(U);return{get buffer(){return G.buffer},reset(){W=0},bytesView(){return G.subarray(0,W)},bytes(){return G.slice(0,W)},writeByte(Y){z(W+1),G[W]=Y,W++},writeBytes(Y,$=0,ie=Y.length){z(W+ie);for(let E=0;E<ie;E++)G[W++]=Y[E+$]},writeBytesView(Y,$=0,ie=Y.byteLength){z(W+ie),G.set(Y.subarray($,$+ie),W),W+=ie}};function z(Y){var $=G.length;if(!(Y<=$)){Y=Math.max(Y,$*($<1048576?2:1.125)>>>0),$!=0&&(Y=Math.max(Y,256));const ie=G;G=new Uint8Array(Y),0<W&&G.set(ie.subarray(0,W),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],p=function(U,W,G,B,Y=y(512),$=new Uint8Array(256),ie=new Int32Array(5003),E=new Int32Array(5003)){var R=ie.length,B=Math.max(2,B);$.fill(0),E.fill(0),ie.fill(-1);let H=0,Z=0;var te=B+1;const se=te;let pe=!1,oe=se,he=(1<<oe)-1;var de=1<<te-1;const J=1+de;let ue=2+de,ye=0,Ce=G[0],ge=0;for(let ze=R;ze<65536;ze*=2)++ge;ge=8-ge,Y.writeByte(B),Qe(de);var _e=G.length;for(let ze=1;ze<_e;ze++)e:{var Ee=G[ze],Ie=(Ee<<12)+Ce;let qe=Ee<<ge^Ce;if(ie[qe]===Ie)Ce=E[qe];else{for(var Te=qe===0?1:R-qe;0<=ie[qe];)if((qe-=Te)<0&&(qe+=R),ie[qe]===Ie){Ce=E[qe];break e}Qe(Ce),Ce=Ee,ue<4096?(E[qe]=ue++,ie[qe]=Ie):(ie.fill(-1),ue=2+de,pe=!0,Qe(de))}}return Qe(Ce),Qe(J),Y.writeByte(0),Y.bytesView();function Qe(ze){for(H&=u[Z],0<Z?H|=ze<<Z:H=ze,Z+=oe;8<=Z;)$[ye++]=255&H,254<=ye&&(Y.writeByte(ye),Y.writeBytesView($,0,ye),ye=0),H>>=8,Z-=8;if((ue>he||pe)&&(pe?(oe=se,he=(1<<oe)-1,pe=!1):(++oe,he=oe===12?1<<oe:(1<<oe)-1)),ze==J){for(;0<Z;)$[ye++]=255&H,254<=ye&&(Y.writeByte(ye),Y.writeBytesView($,0,ye),ye=0),H>>=8,Z-=8;0<ye&&(Y.writeByte(ye),Y.writeBytesView($,0,ye),ye=0)}}};function h(U,W,G){return U<<8&63488|W<<2&992|G>>3}function m(U,W,G,z){return U>>4|240&W|(240&G)<<4|(240&z)<<8}function g(U,W,G){return U>>4<<8|240&W|G>>4}function f(U,W,G){return U<W?W:G<U?G:U}function v(U){return U*U}function _(U,W,G){var z=0,Y=1e100;const $=U[W];for(var ie=$.cnt,E=$.ac,R=$.rc,B=$.gc,H=$.bc,Z=$.fw;Z!=0;Z=U[Z].fw){var te,se=U[Z],pe=se.cnt,pe=ie*pe/(ie+pe);Y<=pe||(te=0,Y<=(te+=pe*v(se.rc-R))||Y<=(te+=pe*v(se.gc-B))||Y<=(te+=pe*v(se.bc-H))||(Y=te,z=Z))}$.err=Y,$.nn=z}function x(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function j(U,W){for(var G=0,z=0;z<U.length;z++){var Y=U[z]-W[z];G+=Y*Y}return G}function M(U,W){return 1<W?Math.round(U/W)*W:U}function S(U){return U*U}function P(U,W,G=j){let z=1/0,Y=-1;for(let ie=0;ie<U.length;ie++){var $=G(W,U[ie]);$<z&&(z=$,Y=ie)}return Y}function L(U,W,G=j){let z=1/0,Y=-1;for(let ie=0;ie<U.length;ie++){var $=G(W,U[ie]);$<z&&(z=$,Y=ie)}return[Y,z]}function D(U={}){const{initialCapacity:W=4096,auto:G=!0}=U,z=y(W),Y=new Uint8Array(256),$=new Int32Array(5003),ie=new Int32Array(5003);let E=!1;return{reset(){z.reset(),E=!1},finish(){z.writeByte(b.trailer)},bytes(){return z.bytes()},bytesView(){return z.bytesView()},get buffer(){return z.buffer},get stream(){return z},writeHeader:R,writeFrame(B,H,Z,Ce={}){var{transparent:se=!1,transparentIndex:pe=0,delay:Te=0,palette:oe=null,repeat:_e=0,colorDepth:he=8,dispose:de=-1}=Ce;let J=!1;if(G?E||(J=!0,R(),E=!0):J=!!Ce.first,H=Math.max(0,Math.floor(H)),Z=Math.max(0,Math.floor(Z)),J){if(!oe)throw new Error("First frame must include a { palette } option");var[Ce,Ee,ye,Ie,ge=8]=[z,H,Z,oe,he];Ie=F(Ie.length)-1,ge=128|ge-1<<4|Ie,I(Ce,Ee),I(Ce,ye),Ce.writeBytes([ge,0,0]),k(z,oe),0<=_e&&(Ie=z,Ee=_e,Ie.writeByte(33),Ie.writeByte(255),Ie.writeByte(11),A(Ie,"NETSCAPE2.0"),Ie.writeByte(3),Ie.writeByte(1),I(Ie,Ee),Ie.writeByte(0))}var ue,ye=Math.round(Te/10),Ce=z,ge=de,_e=ye,Ee=se,Ie=pe,Te=(Ce.writeByte(33),Ce.writeByte(249),Ce.writeByte(4),Ie<0&&(Ie=0,Ee=!1),Ee=Ee?(ue=1,2):ue=0,0<=ge&&(Ee=7&ge),Ee<<=2,Ce.writeByte(0|Ee|ue),I(Ce,_e),Ce.writeByte(Ie||0),Ce.writeByte(0),!!oe&&!J);de=z,se=H,pe=Z,ue=Te?oe:null,de.writeByte(44),I(de,0),I(de,0),I(de,se),I(de,pe),ue?(se=F(ue.length)-1,de.writeByte(128|se)):de.writeByte(0),Te&&k(z,oe),[_e,Ce,pe,se,de=8,Te,oe,B]=[z,B,H,Z,he,Y,$,ie],p(pe,se,Ce,de,_e,Te,oe,B)}};function R(){A(z,"GIF89a")}}function k(U,W){var G=1<<F(W.length);for(let z=0;z<G;z++){let Y=[0,0,0];z<W.length&&(Y=W[z]),U.writeByte(Y[0]),U.writeByte(Y[1]),U.writeByte(Y[2])}}function I(U,W){U.writeByte(255&W),U.writeByte(W>>8&255)}function A(U,W){for(var G=0;G<W.length;G++)U.writeByte(W.charCodeAt(G))}function F(U){return Math.max(Math.ceil(Math.log2(U)),1)}var N=D},{}],251:[function(r,i,c){c.read=function(o,d,a,l,_){var y,u,p=8*_-l-1,h=(1<<p)-1,m=h>>1,g=-7,f=a?_-1:0,v=a?-1:1,_=o[d+f];for(f+=v,y=_&(1<<-g)-1,_>>=-g,g+=p;0<g;y=256*y+o[d+f],f+=v,g-=8);for(u=y&(1<<-g)-1,y>>=-g,g+=l;0<g;u=256*u+o[d+f],f+=v,g-=8);if(y===0)y=1-m;else{if(y===h)return u?NaN:1/0*(_?-1:1);u+=Math.pow(2,l),y-=m}return(_?-1:1)*u*Math.pow(2,y-l)},c.write=function(o,d,a,l,b,x){var u,p,h=8*x-b-1,m=(1<<h)-1,g=m>>1,f=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:x-1,_=l?1:-1,x=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(p=isNaN(d)?1:0,u=m):(u=Math.floor(Math.log(d)/Math.LN2),d*(l=Math.pow(2,-u))<1&&(u--,l*=2),2<=(d+=1<=u+g?f/l:f*Math.pow(2,1-g))*l&&(u++,l/=2),m<=u+g?(p=0,u=m):1<=u+g?(p=(d*l-1)*Math.pow(2,b),u+=g):(p=d*Math.pow(2,g-1)*Math.pow(2,b),u=0));8<=b;o[a+v]=255&p,v+=_,p/=256,b-=8);for(u=u<<b|p,h+=b;0<h;o[a+v]=255&u,v+=_,u/=256,h-=8);o[a+v-_]|=128*x}},{}],252:[function(r,i,c){var o;function d(Q,re){return Q.b===re.b&&Q.a===re.a}function a(Q,re){return Q.b<re.b||Q.b===re.b&&Q.a<=re.a}function l(Q,re,K){var ne=re.b-Q.b,ve=K.b-re.b;return 0<ne+ve?ne<ve?re.a-Q.a+ne/(ne+ve)*(Q.a-K.a):re.a-K.a+ve/(ne+ve)*(K.a-Q.a):0}function b(Q,re,K){var ne=re.b-Q.b,ve=K.b-re.b;return 0<ne+ve?(re.a-K.a)*ne+(re.a-Q.a)*ve:0}function y(Q,re){return Q.a<re.a||Q.a===re.a&&Q.b<=re.b}function u(Q,re,K){var ne=re.a-Q.a,ve=K.a-re.a;return 0<ne+ve?ne<ve?re.b-Q.b+ne/(ne+ve)*(Q.b-K.b):re.b-K.b+ve/(ne+ve)*(K.b-Q.b):0}function p(Q,re,K){var ne=re.a-Q.a,ve=K.a-re.a;return 0<ne+ve?(re.b-K.b)*ne+(re.b-Q.b)*ve:0}function h(Q,re,K,ne){return(Q=Q<0?0:Q)<=(K=K<0?0:K)?K===0?(re+ne)/2:re+Q/(Q+K)*(ne-re):ne+K/(Q+K)*(re-ne)}function m(Q){var re=x(Q.b);return M(re,Q.c),M(re.b,Q.c),S(re,Q.a),re}function g(Q,re){var K=!1,ne=!1;Q!==re&&(re.a!==Q.a&&(ne=!0,L(re.a,Q.a)),re.d!==Q.d&&(K=!0,D(re.d,Q.d)),j(re,Q),ne||(M(re,Q.a),Q.a.c=Q),K||(S(re,Q.d),Q.d.a=Q))}function f(Q){var re=Q.b,K=!1;Q.d!==Q.b.d&&(K=!0,D(Q.d,Q.b.d)),Q.c===Q?L(Q.a,null):(Q.b.d.a=Q.b.e,Q.a.c=Q.c,j(Q,Q.b.e),K||S(Q,Q.d)),re.c===re?(L(re.a,null),D(re.d,null)):(Q.d.a=re.b.e,re.a.c=re.c,j(re,re.b.e)),P(Q)}function v(Q){var re=x(Q),K=re.b;return j(re,Q.e),re.a=Q.b.a,M(K,re.a),re.d=K.d=Q.d,re=re.b,j(Q.b,Q.b.b.e),j(Q.b,re),Q.b.a=re.a,re.b.a.c=re.b,re.b.d=Q.b.d,re.f=Q.f,re.b.f=Q.b.f,re}function _(Q,re){var K=!1,ne=x(Q),ve=ne.b;return re.d!==Q.d&&(K=!0,D(re.d,Q.d)),j(ne,Q.e),j(ve,re),ne.a=Q.b.a,ve.a=re.a,ne.d=ve.d=Q.d,Q.d.a=ve,K||S(ne,Q.d),ne}function x(Q){var re=new ye,K=new ye,ne=Q.b.h;return(((K.h=ne).b.h=re).h=Q).b.h=K,re.b=K,((re.c=re).e=K).b=re,(K.c=K).e=re}function j(Q,re){var K=Q.c,ne=re.c;K.b.e=re,(ne.b.e=Q).c=ne,re.c=K}function M(Q,re){var K=re.f,ne=new ge(re,K);for(K.e=ne,K=(re.f=ne).c=Q;K.a=ne,(K=K.c)!==Q;);}function S(Q,re){var K=re.d,ne=new ue(re,K);for(K.b=ne,(re.d=ne).a=Q,ne.c=re.c,K=Q;K.d=ne,(K=K.e)!==Q;);}function P(Q){var re=Q.h;Q=Q.b.h,(re.b.h=Q).b.h=re}function L(Q,re){for(var K=Q.c,ne=K;ne.a=re,(ne=ne.c)!==K;);K=Q.f,((ne=Q.e).f=K).e=ne}function D(Q,re){for(var K=Q.a,ne=K;ne.d=re,(ne=ne.e)!==K;);K=Q.d,((ne=Q.b).d=K).b=ne}function k(Q){var re=0;return Math.abs(Q[1])>Math.abs(Q[0])&&(re=1),re=Math.abs(Q[2])>Math.abs(Q[re])?2:re}function I(Q,re){Q.f+=re.f,Q.b.f+=re.b.f}function A(Q,re,K){return Q=Q.a,re=re.a,K=K.a,re.b.a===Q?K.b.a===Q?a(re.a,K.a)?b(K.b.a,re.a,K.a)<=0:0<=b(re.b.a,K.a,re.a):b(K.b.a,Q,K.a)<=0:K.b.a===Q?0<=b(re.b.a,Q,re.a):(re=l(re.b.a,Q,re.a),(Q=l(K.b.a,Q,K.a))<=re)}function F(Q){Q.a.i=null;var re=Q.e;re.a.c=re.c,re.c.a=re.a,Q.e=null}function N(Q,re){f(Q.a),Q.c=!1,(Q.a=re).i=Q}function U(Q){for(var re=Q.a.a;(Q=xe(Q)).a.a===re;);return Q.c&&(N(Q,re=_(Ae(Q).a.b,Q.a.e)),Q=xe(Q)),Q}function W(Q,re,K){var ne=new ce;return ne.a=K,ne.e=pe(Q.f,re.e,ne),K.i=ne}function G(Q,re){switch(Q.s){case 100130:return(1&re)!=0;case 100131:return re!==0;case 100132:return 0<re;case 100133:return re<0;case 100134:return 2<=re||re<=-2}return!1}function z(Q){var re=Q.a,K=re.d;K.c=Q.d,K.a=re,F(Q)}function Y(Q,re,K){for(re=(Q=re).a;Q!==K;){Q.c=!1;var ne=Ae(Q),ve=ne.a;if(ve.a!==re.a){if(!ne.c){z(Q);break}N(ne,ve=_(re.c.b,ve.b))}re.c!==ve&&(g(ve.b.e,ve),g(re,ve)),z(Q),re=ne.a,Q=ne}return re}function $(Q,re,K,ne,ve,je){for(var Le=!0;W(Q,re,K.b),(K=K.c)!==ne;);for(ve===null&&(ve=Ae(re).a.b.c);(K=(ne=Ae(re)).a.b).a===ve.a;)K.c!==ve&&(g(K.b.e,K),g(ve.b.e,K)),ne.f=re.f-K.f,ne.d=G(Q,ne.f),re.b=!0,!Le&&B(Q,re)&&(I(K,ve),F(re),f(ve)),Le=!1,re=ne,ve=K;re.b=!0,je&&Z(Q,re)}function ie(Q,re,K,ne,ve){var je=[re.g[0],re.g[1],re.g[2]];re.d=null,re.d=Q.o&&Q.o(je,K,ne,Q.c)||null,re.d===null&&(ve?Q.n||(J(Q,100156),Q.n=!0):re.d=K[0])}function E(Q,re,K){var ne=[null,null,null,null];ne[0]=re.a.d,ne[1]=K.a.d,ie(Q,re.a,ne,[.5,.5,0,0],!1),g(re,K)}function R(Q,re,K,ne,ve){var je=Math.abs(re.b-Q.b)+Math.abs(re.a-Q.a),Le=Math.abs(K.b-Q.b)+Math.abs(K.a-Q.a),Ne=ve+1;ne[ve]=.5*Le/(je+Le),ne[Ne]=.5*je/(je+Le),Q.g[0]+=ne[ve]*re.g[0]+ne[Ne]*K.g[0],Q.g[1]+=ne[ve]*re.g[1]+ne[Ne]*K.g[1],Q.g[2]+=ne[ve]*re.g[2]+ne[Ne]*K.g[2]}function B(Q,re){var K=Ae(re),ne=re.a,ve=K.a;if(a(ne.a,ve.a)){if(0<b(ve.b.a,ne.a,ve.a))return;if(d(ne.a,ve.a)){if(ne.a!==ve.a){var K=Q.e,je=ne.a.h;if(0<=je){var Le=(K=K.b).d,Ne=K.e,Be=K.c,Ge=Be[je];Le[Ge]=Le[K.a],(Be[Le[Ge]]=Ge)<=--K.a&&(Ge<=1||a(Ne[Le[Ge>>1]],Ne[Le[Ge]])?Xe:We)(K,Ge),Ne[je]=null,Be[je]=K.b,K.b=je}else for(K.c[-(je+1)]=null;0<K.a&&K.c[K.d[K.a-1]]===null;)--K.a;E(Q,ve.b.e,ne)}}else v(ve.b),g(ne,ve.b.e),re.b=K.b=!0}else{if(b(ne.b.a,ve.a,ne.a)<0)return;xe(re).b=re.b=!0,v(ne.b),g(ve.b.e,ne)}return 1}function H(Q,re){var K=Ae(re),ne=re.a,ve=K.a,je=ne.a,Le=ve.a,Ne=ne.b.a,Be=ve.b.a,Ge=new ge;if(b(Ne,Q.a,je),b(Be,Q.a,Le),!(je===Le||Math.min(je.a,Ne.a)>Math.max(Le.a,Be.a))){if(a(je,Le)){if(0<b(Be,je,Le))return}else if(b(Ne,Le,je)<0)return;var Ke,mt,lt=Ne,et=je,pt=Be,at=Le;if(a(lt,et)||(Ke=lt,lt=et,et=Ke),a(pt,at)||(Ke=pt,pt=at,at=Ke),a(lt,pt)||(Ke=lt,lt=pt,pt=Ke,Ke=et,et=at,at=Ke),a(pt,et)?a(et,at)?((Ke=l(lt,pt,et))+(mt=l(pt,et,at))<0&&(Ke=-Ke,mt=-mt),Ge.b=h(Ke,pt.b,mt,et.b)):((Ke=b(lt,pt,et))+(mt=-b(lt,at,et))<0&&(Ke=-Ke,mt=-mt),Ge.b=h(Ke,pt.b,mt,at.b)):Ge.b=(pt.b+et.b)/2,y(lt,et)||(Ke=lt,lt=et,et=Ke),y(pt,at)||(Ke=pt,pt=at,at=Ke),y(lt,pt)||(Ke=lt,lt=pt,pt=Ke,Ke=et,et=at,at=Ke),y(pt,et)?y(et,at)?((Ke=u(lt,pt,et))+(mt=u(pt,et,at))<0&&(Ke=-Ke,mt=-mt),Ge.a=h(Ke,pt.a,mt,et.a)):((Ke=p(lt,pt,et))+(mt=-p(lt,at,et))<0&&(Ke=-Ke,mt=-mt),Ge.a=h(Ke,pt.a,mt,at.a)):Ge.a=(pt.a+et.a)/2,a(Ge,Q.a)&&(Ge.b=Q.a.b,Ge.a=Q.a.a),lt=a(je,Le)?je:Le,a(lt,Ge)&&(Ge.b=lt.b,Ge.a=lt.a),d(Ge,je)||d(Ge,Le))return B(Q,re),0;if(!d(Ne,Q.a)&&0<=b(Ne,Q.a,Ge)||!d(Be,Q.a)&&b(Be,Q.a,Ge)<=0){if(Be===Q.a)v(ne.b),g(ve.b,ne),ne=Ae(re=U(re)).a,Y(Q,Ae(re),K),$(Q,re,ne.b.e,ne,ne,!0);else{if(Ne!==Q.a)return 0<=b(Ne,Q.a,Ge)&&(xe(re).b=re.b=!0,v(ne.b),ne.a.b=Q.a.b,ne.a.a=Q.a.a),void(b(Be,Q.a,Ge)<=0&&(re.b=K.b=!0,v(ve.b),ve.a.b=Q.a.b,ve.a.a=Q.a.a));for(v(ve.b),g(ne.e,ve.b.e),Le=(je=K=re).a.b.a;(je=xe(je)).a.b.a===Le;);je=Ae(re=je).a.b.c,K.a=ve.b.e,$(Q,re,(ve=Y(Q,K,null)).c,ne.b.c,je,!0)}return 1}v(ne.b),v(ve.b),g(ve.b.e,ne),ne.a.b=Ge.b,ne.a.a=Ge.a,ne.a.h=Ee(Q.e,ne.a),ne=ne.a,ve=[0,0,0,0],Ge=[je.d,Ne.d,Le.d,Be.d],ne.g[0]=ne.g[1]=ne.g[2]=0,R(ne,je,Ne,ve,0),R(ne,Le,Be,ve,2),ie(Q,ne,Ge,ve,!0),xe(re).b=re.b=K.b=!0}}function Z(Q,re){for(var K=Ae(re);;){for(;K.b;)K=Ae(re=K);if(!re.b&&((re=xe(K=re))===null||!re.b))break;re.b=!1;var ne=re.a,ve=K.a;if(je=ne.b.a!==ve.b.a)e:{var je,Le=Ae(je=re),Ne=je.a,Be=Le.a,Ge=void 0;if(a(Ne.b.a,Be.b.a)){if(b(Ne.b.a,Be.b.a,Ne.a)<0){je=!1;break e}xe(je).b=je.b=!0,Ge=v(Ne),g(Be.b,Ge),Ge.d.c=je.d}else{if(0<b(Be.b.a,Ne.b.a,Be.a)){je=!1;break e}je.b=Le.b=!0,Ge=v(Be),g(Ne.e,Be.b),Ge.b.d.c=je.d}je=!0}if(je&&(K.c?(F(K),f(ve),ve=(K=Ae(re)).a):re.c&&(F(re),f(ne),ne=(re=xe(K)).a)),ne.a!==ve.a){if(ne.b.a===ve.b.a||re.c||K.c||ne.b.a!==Q.a&&ve.b.a!==Q.a)B(Q,re);else if(H(Q,re))break}ne.a===ve.a&&ne.b.a===ve.b.a&&(I(ve,ne),F(re),f(ne),re=xe(K))}}function te(Q,re){var K=new ce,ne=m(Q.b);ne.a.b=4e150,ne.a.a=re,ne.b.a.b=-4e150,ne.b.a.a=re,Q.a=ne.b.a,K.a=ne,K.f=0,K.d=!1,K.c=!1,K.h=!0,K.b=!1,ne=pe(ne=Q.f,ne.a,K),K.e=ne}function se(Q){this.a=new oe,this.b=Q,this.c=A}function pe(Q,re,K){for(;(re=re.c).b!==null&&!Q.c(Q.b,re.b,K););return Q=new oe(K,re.a,re),re.a.c=Q,re.a=Q}function oe(Q,re,K){this.b=Q||null,this.a=re||this,this.c=K||this}function he(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function de(Q,re){if(Q.d!==re)for(;Q.d!==re;)if(Q.d<re)switch(Q.d){case 0:J(Q,100151),Q.u(null);break;case 1:J(Q,100152),Q.t()}else switch(Q.d){case 2:J(Q,100154),Q.v();break;case 1:J(Q,100153),Q.w()}}function J(Q,re){Q.p&&Q.p(re,Q.c)}function ue(Q,re){this.b=Q||this,this.d=re||this,this.a=null,this.c=!1}function ye(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ce(){this.c=new ge,this.a=new ue,this.b=new ye,this.d=new ye,this.b.b=this.d,this.d.b=this.b}function ge(Q,re){this.e=Q||this,this.f=re||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function _e(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Te}function Ee(Q,re){var K,ne,ve;return Q.e?(2*(ne=++(K=Q.b).a)>K.f&&(K.f*=2,K.c=Qe(K.c,K.f+1)),K.b===0?ve=ne:(ve=K.b,K.b=K.c[K.b]),K.e[ve]=re,K.c[ve]=ne,K.d[ne]=ve,K.h&&We(K,ne),ve):(K=Q.a++,Q.c[K]=re,-(K+1))}function Ie(Q){if(Q.a===0)return qe(Q.b);var re=Q.c[Q.d[Q.a-1]];if(Q.b.a!==0&&a(ze(Q.b),re))return qe(Q.b);for(;--Q.a,0<Q.a&&Q.c[Q.d[Q.a-1]]===null;);return re}function Te(){this.d=Qe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Qe(Q,re){for(var K=Array(re),ne=0;ne<Q.length;ne++)K[ne]=Q[ne];for(;ne<re;ne++)K[ne]=0;return K}function ze(Q){return Q.e[Q.d[1]]}function qe(Q){var re=Q.d,K=Q.e,ne=Q.c,ve=re[1],je=K[ve];return 0<Q.a&&(re[1]=re[Q.a],ne[re[1]]=1,K[ve]=null,ne[ve]=Q.b,Q.b=ve,0<--Q.a&&Xe(Q,1)),je}function Xe(Q,re){for(var K=Q.d,ne=Q.e,ve=Q.c,je=re,Le=K[je];;){var Ne=je<<1,Be=(Ne<Q.a&&a(ne[K[Ne+1]],ne[K[Ne]])&&(Ne+=1),K[Ne]);if(Ne>Q.a||a(ne[Le],ne[Be])){ve[K[je]=Le]=je;break}ve[K[je]=Be]=je,je=Ne}}function We(Q,re){for(var K=Q.d,ne=Q.e,ve=Q.c,je=re,Le=K[je];;){var Ne=je>>1,Be=K[Ne];if(Ne==0||a(ne[Be],ne[Le])){ve[K[je]=Le]=je;break}ve[K[je]=Be]=je,je=Ne}}function ce(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ae(Q){return Q.e.c.b}function xe(Q){return Q.e.a.b}(o=he.prototype).x=function(){de(this,0)},o.B=function(Q,re){switch(Q){case 100142:return;case 100140:switch(re){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=re)}break;case 100141:return void(this.m=!!re);default:return void J(this,100900)}J(this,100901)},o.y=function(Q){switch(Q){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:J(this,100900)}return!1},o.A=function(Q,re,K){this.j[0]=Q,this.j[1]=re,this.j[2]=K},o.z=function(Q,re){var K=re||null;switch(Q){case 100100:case 100106:this.h=K;break;case 100104:case 100110:this.l=K;break;case 100101:case 100107:this.k=K;break;case 100102:case 100108:this.i=K;break;case 100103:case 100109:this.p=K;break;case 100105:case 100111:this.o=K;break;case 100112:this.r=K;break;default:J(this,100900)}},o.C=function(Q,re){var K=!1,ne=[0,0,0];de(this,2);for(var ve=0;ve<3;++ve){var je=Q[ve];je<-1e150&&(je=-1e150,K=!0),1e150<je&&(je=1e150,K=!0),ne[ve]=je}K&&J(this,100155),(K=this.q)===null?g(K=m(this.b),K.b):(v(K),K=K.e),K.a.d=re,K.a.g[0]=ne[0],K.a.g[1]=ne[1],K.a.g[2]=ne[2],K.f=1,K.b.f=-1,this.q=K},o.u=function(Q){de(this,0),this.d=1,this.b=new Ce,this.c=Q},o.t=function(){de(this,1),this.d=2,this.q=null},o.v=function(){de(this,2),this.d=1},o.w=function(){de(this,1),this.d=0;var Q,re,K=this.j[0],ne=this.j[1],ve=this.j[2],je=!1,Le=[K,ne,ve];if(K===0&&ne===0&&ve===0){for(var ne=[-2e150,-2e150,-2e150],Ne=[2e150,2e150,2e150],ve=[],Be=[],K=(je=this.b.c).e;K!==je;K=K.e)for(var Ge=0;Ge<3;++Ge){var Ke=K.g[Ge];Ke<Ne[Ge]&&(Ne[Ge]=Ke,Be[Ge]=K),Ke>ne[Ge]&&(ne[Ge]=Ke,ve[Ge]=K)}if(ne[1]-Ne[1]>ne[K=0]-Ne[0]&&(K=1),Ne[K=ne[2]-Ne[2]>ne[K]-Ne[K]?2:K]>=ne[K])Le[0]=0,Le[1]=0,Le[2]=1;else{for(Ne=Be[K],ve=ve[K],Be=[ne=0,0,0],Ne=[Ne.g[0]-ve.g[0],Ne.g[1]-ve.g[1],Ne.g[2]-ve.g[2]],Ge=[0,0,0],K=je.e;K!==je;K=K.e)Ge[0]=K.g[0]-ve.g[0],Ge[1]=K.g[1]-ve.g[1],Ge[2]=K.g[2]-ve.g[2],Be[0]=Ne[1]*Ge[2]-Ne[2]*Ge[1],Be[1]=Ne[2]*Ge[0]-Ne[0]*Ge[2],Be[2]=Ne[0]*Ge[1]-Ne[1]*Ge[0],ne<(Ke=Be[0]*Be[0]+Be[1]*Be[1]+Be[2]*Be[2])&&(ne=Ke,Le[0]=Be[0],Le[1]=Be[1],Le[2]=Be[2]);ne<=0&&(Le[0]=Le[1]=Le[2]=0,Le[k(Ne)]=1)}je=!0}for(Be=k(Le),K=this.b.c,ne=(Be+1)%3,ve=(Be+2)%3,Be=0<Le[Be]?1:-1,Le=K.e;Le!==K;Le=Le.e)Le.b=Le.g[ne],Le.a=Be*Le.g[ve];if(je){for(Le=0,K=(je=this.b.a).b;K!==je;K=K.b)if(!((ne=K.a).f<=0))for(;Le+=(ne.a.b-ne.b.a.b)*(ne.a.a+ne.b.a.a),(ne=ne.e)!==K.a;);if(Le<0)for(je=(Le=this.b.c).e;je!==Le;je=je.e)je.a=-je.a}for(this.n=!1,Le=this.b.b,K=Le.h;K!==Le;K=je)je=K.h,ne=K.e,d(K.a,K.b.a)&&K.e.e!==K&&(E(this,ne,K),f(K),ne=(K=ne).e),ne.e===K&&(ne!==K&&(ne!==je&&ne!==je.b||(je=je.h),f(ne)),K!==je&&K!==je.b||(je=je.h),f(K));for(this.e=Le=new _e,je=this.b.c,K=je.e;K!==je;K=K.e)K.h=Ee(Le,K);var mt=Le;mt.d=[];for(var lt=0;lt<mt.a;lt++)mt.d[lt]=lt;mt.d.sort(function(at){return function(zt,kr){return a(at[zt],at[kr])?1:-1}}(mt.c)),mt.e=!0;for(var et=mt.b,pt=et.a;1<=pt;--pt)Xe(et,pt);for(et.h=!0,this.f=new se(this),te(this,-4e150),te(this,4e150);(Le=Ie(this.e))!==null;){for(;;){e:if((K=this.e).a===0)je=ze(K.b);else if(je=K.c[K.d[K.a-1]],K.b.a!==0&&a(K=ze(K.b),je)){je=K;break e}if(je===null||!d(je,Le))break;je=Ie(this.e),E(this,Le.c,je.c)}(function at(zt,kr){for(var dr,Ot=(zt.a=kr).c;Ot.i===null;)if((Ot=Ot.c)===kr.c){var Ot=zt,Wt=kr;(Vt=new ce).a=Wt.c.b;for(var Sr=(St=Ot.f).a;(Sr=Sr.a).b!==null&&!St.c(St.b,Vt,Sr.b););var St,Er,wr=Ae(St=Sr.b),Vt=St.a,Sr=wr.a;return void(b(Vt.b.a,Wt,Vt.a)===0?d((Vt=St.a).a,Wt)||d(Vt.b.a,Wt)||(v(Vt.b),St.c&&(f(Vt.c),St.c=!1),g(Wt.c,Vt),at(Ot,Wt)):(Er=a(Sr.b.a,Vt.b.a)?St:wr,wr=void 0,St.d||Er.c?(wr=Er===St?_(Wt.c.b,Vt.e):_(Sr.b.c.b,Wt.c).b,Er.c?N(Er,wr):((St=W(Vt=Ot,St,wr)).f=xe(St).f+St.a.f,St.d=G(Vt,St.f)),at(Ot,Wt)):$(Ot,St,Wt.c,Wt.c,null,!0)))}St=(Vt=Ae(Ot=U(Ot.i))).a,(Vt=Y(zt,Vt,null)).c===St?(Vt=(St=Vt).c,Sr=Ae(Ot),wr=Ot.a,Er=Sr.a,dr=!1,wr.b.a!==Er.b.a&&H(zt,Ot),d(wr.a,zt.a)&&(g(Vt.b.e,wr),Vt=Ae(Ot=U(Ot)).a,Y(zt,Ae(Ot),Sr),dr=!0),d(Er.a,zt.a)&&(g(St,Er.b.e),St=Y(zt,Sr,null),dr=!0),dr?$(zt,Ot,St.c,Vt,Vt,!0):(Wt=a(Er.a,wr.a)?Er.b.e:wr,$(zt,Ot,Wt=_(St.c.b,Wt),Wt.c,Wt.c,!1),Wt.b.i.c=!0,Z(zt,Ot))):$(zt,Ot,Vt.c,St,St,!0)})(this,Le)}for(this.a=this.f.a.a.b.a.a,Le=0;(je=this.f.a.a.b)!==null;)je.h||++Le,F(je);for(this.f=null,(Le=this.e).b=null,Le.d=null,this.e=Le.c=null,Le=this.b,K=Le.a.b;K!==Le.a;K=je)je=K.b,(K=K.a).e.e===K&&(I(K.c,K),f(K));if(!this.n){if(Le=this.b,this.m)for(K=Le.b.h;K!==Le.b;K=je)je=K.h,K.b.d.c!==K.d.c?K.f=K.d.c?1:-1:f(K);else for(K=Le.a.b;K!==Le.a;K=je)if(je=K.b,K.c){for(K=K.a;a(K.b.a,K.a);K=K.c.b);for(;a(K.a,K.b.a);K=K.e);for(ne=K.c.b,ve=void 0;K.e!==ne;)if(a(K.b.a,ne.a)){for(;ne.e!==K&&(a((re=ne.e).b.a,re.a)||b(ne.a,ne.b.a,ne.e.b.a)<=0);)ne=(ve=_(ne.e,ne)).b;ne=ne.c.b}else{for(;ne.e!==K&&(a((Q=K.c.b).a,Q.b.a)||0<=b(K.b.a,K.a,K.c.b.a));)K=(ve=_(K,K.c.b)).b;K=K.e}for(;ne.e.e!==K;)ve=_(ne.e,ne),ne=ve.b}if(this.h||this.i||this.k||this.l)if(this.m){for(je=(Le=this.b).a.b;je!==Le.a;je=je.b)if(je.c){for(this.h&&this.h(2,this.c),K=je.a;this.k&&this.k(K.a.d,this.c),(K=K.e)!==je.a;);this.i&&this.i(this.c)}}else{for(Le=this.b,je=!!this.l,K=!1,ne=-1,ve=Le.a.d;ve!==Le.a;ve=ve.d)if(ve.c)for(K||(this.h&&this.h(4,this.c),K=!0),Be=ve.a;je&&(Ne=Be.b.d.c?0:1,ne!==Ne&&(ne=Ne,this.l&&this.l(!!ne,this.c))),this.k&&this.k(Be.a.d,this.c),(Be=Be.e)!==ve.a;);K&&this.i&&this.i(this.c)}if(this.r){for(Le=this.b,K=Le.a.b;K!==Le.a;K=je)if(je=K.b,!K.c){for(ve=(ne=K.a).e,Be=void 0;ve=(Be=ve).e,(Be.d=null)===Be.b.d&&(Be.c===Be?L(Be.a,null):(Be.a.c=Be.c,j(Be,Be.b.e)),(Ne=Be.b).c===Ne?L(Ne.a,null):(Ne.a.c=Ne.c,j(Ne,Ne.b.e)),P(Be)),Be!==ne;);ne=K.d,((K=K.b).d=ne).b=K}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:he,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},he.prototype.gluDeleteTess=he.prototype.x,he.prototype.gluTessProperty=he.prototype.B,he.prototype.gluGetTessProperty=he.prototype.y,he.prototype.gluTessNormal=he.prototype.A,he.prototype.gluTessCallback=he.prototype.z,he.prototype.gluTessVertex=he.prototype.C,he.prototype.gluTessBeginPolygon=he.prototype.u,he.prototype.gluTessBeginContour=he.prototype.t,he.prototype.gluTessEndContour=he.prototype.v,he.prototype.gluTessEndPolygon=he.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(r,i,c){function o(a,l,b,y){var u=0,p=(y=y===void 0?{}:y).loop===void 0?null:y.loop,h=y.palette===void 0?null:y.palette;if(l<=0||b<=0||65535<l||65535<b)throw new Error("Width/Height invalid.");function m(S){if(S=S.length,S<2||256<S||S&S-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return S}a[u++]=71,a[u++]=73,a[u++]=70,a[u++]=56,a[u++]=57,a[u++]=97;var g=0,f=0;if(h!==null){for(var v=m(h);v>>=1;)++g;if(v=1<<g,--g,y.background!==void 0){if(v<=(f=y.background))throw new Error("Background index out of range.");if(f===0)throw new Error("Background index explicitly passed as 0.")}}if(a[u++]=255&l,a[u++]=l>>8&255,a[u++]=255&b,a[u++]=b>>8&255,a[u++]=(h!==null?128:0)|g,a[u++]=f,a[u++]=0,h!==null)for(var _=0,x=h.length;_<x;++_){var j=h[_];a[u++]=j>>16&255,a[u++]=j>>8&255,a[u++]=255&j}if(p!==null){if(p<0||65535<p)throw new Error("Loop count invalid.");a[u++]=33,a[u++]=255,a[u++]=11,a[u++]=78,a[u++]=69,a[u++]=84,a[u++]=83,a[u++]=67,a[u++]=65,a[u++]=80,a[u++]=69,a[u++]=50,a[u++]=46,a[u++]=48,a[u++]=3,a[u++]=1,a[u++]=255&p,a[u++]=p>>8&255,a[u++]=0}var M=!1;this.addFrame=function(S,P,L,D,k,I){if(M===!0&&(--u,M=!1),I=I===void 0?{}:I,S<0||P<0||65535<S||65535<P)throw new Error("x/y invalid.");if(L<=0||D<=0||65535<L||65535<D)throw new Error("Width/Height invalid.");if(k.length<L*D)throw new Error("Not enough pixels for the frame size.");var A=!0,F=I.palette;if(F==null&&(A=!1,F=h),F==null)throw new Error("Must supply either a local or global palette.");for(var U=m(F),N=0;U>>=1;)++N;var U=1<<N,W=I.delay===void 0?0:I.delay,G=I.disposal===void 0?0:I.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var z=!1,Y=0;if(I.transparent!==void 0&&I.transparent!==null&&(z=!0,(Y=I.transparent)<0||U<=Y))throw new Error("Transparent color index.");if(G===0&&!z&&W===0||(a[u++]=33,a[u++]=249,a[u++]=4,a[u++]=G<<2|(z===!0?1:0),a[u++]=255&W,a[u++]=W>>8&255,a[u++]=Y,a[u++]=0),a[u++]=44,a[u++]=255&S,a[u++]=S>>8&255,a[u++]=255&P,a[u++]=P>>8&255,a[u++]=255&L,a[u++]=L>>8&255,a[u++]=255&D,a[u++]=D>>8&255,a[u++]=A===!0?128|N-1:0,A===!0)for(var $=0,ie=F.length;$<ie;++$){var E=F[$];a[u++]=E>>16&255,a[u++]=E>>8&255,a[u++]=255&E}return u=function(R,B,H,Z){R[B++]=H;var te=B++,se=1<<H,pe=se-1,oe=1+se,he=1+oe,de=H+1,J=0,ue=0;function ye(qe){for(;qe<=J;)R[B++]=255&ue,ue>>=8,J-=8,B===te+256&&(R[te]=255,te=B++)}function Ce(qe){ue|=qe<<J,J+=de,ye(8)}var ge=Z[0]&pe,_e={};Ce(se);for(var Ee=1,Ie=Z.length;Ee<Ie;++Ee){var Te=Z[Ee]&pe,Qe=ge<<8|Te,ze=_e[Qe];if(ze===void 0){for(ue|=ge<<J,J+=de;8<=J;)R[B++]=255&ue,ue>>=8,J-=8,B===te+256&&(R[te]=255,te=B++);he===4096?(Ce(se),he=1+oe,de=H+1,_e={}):(1<<de<=he&&++de,_e[Qe]=he++),ge=Te}else ge=ze}return Ce(ge),Ce(oe),ye(1),te+1===B?R[te]=0:(R[te]=B-te-1,R[B++]=0),B}(a,u,N<2?2:N,k)},this.end=function(){return M===!1&&(a[u++]=59,M=!0),u},this.getOutputBuffer=function(){return a},this.setOutputBuffer=function(S){a=S},this.getOutputBufferPosition=function(){return u},this.setOutputBufferPosition=function(S){u=S}}function d(a,l,b,y){for(var u=a[l++],p=1<<u,h=1+p,m=1+h,g=u+1,f=(1<<g)-1,v=0,_=0,x=0,j=a[l++],M=new Int32Array(4096),S=null;;){for(;v<16&&j!==0;)_|=a[l++]<<v,v+=8,j===1?j=a[l++]:--j;if(v<g)break;var P=_&f;if(_>>=g,v-=g,P==p)m=1+h,f=(1<<(g=u+1))-1,S=null;else{if(P==h)break;for(var L=P<m?P:S,D=0,k=L;p<k;)k=M[k]>>8,++D;var I=k;if(y<x+D+(L!==P?1:0))return void console.log("Warning, gif stream longer than expected.");b[x++]=I;var A=x+=D;for(L!==P&&(b[x++]=I),k=L;D--;)k=M[k],b[--A]=255&k,k>>=8;S!==null&&m<4096&&(M[m++]=S<<8|I,f+1<=m&&g<12&&(++g,f=f<<1|1)),S=P}}x!==y&&console.log("Warning, gif stream shorter than expected.")}try{c.GifWriter=o,c.GifReader=function(a){var l=0;if(a[l++]!==71||a[l++]!==73||a[l++]!==70||a[l++]!==56||(a[l++]+1&253)!=56||a[l++]!==97)throw new Error("Invalid GIF 87a/89a header.");var b=a[l++]|a[l++]<<8,y=a[l++]|a[l++]<<8,u=a[l++],p=1<<1+(7&u),h=(a[l++],a[l++],null),m=null,g=(u>>7&&(h=l,l+=3*(m=p)),!0),f=[],v=0,_=null,x=0,j=null;for(this.width=b,this.height=y;g&&l<a.length;)switch(a[l++]){case 33:switch(a[l++]){case 255:if(a[l]!==11||a[l+1]==78&&a[l+2]==69&&a[l+3]==84&&a[l+4]==83&&a[l+5]==67&&a[l+6]==65&&a[l+7]==80&&a[l+8]==69&&a[l+9]==50&&a[l+10]==46&&a[l+11]==48&&a[l+12]==3&&a[l+13]==1&&a[l+16]==0)l+=14,j=a[l++]|a[l++]<<8,l++;else for(l+=12;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}break;case 249:if(a[l++]!==4||a[l+4]!==0)throw new Error("Invalid graphics extension block.");var M=a[l++],v=a[l++]|a[l++]<<8,_=a[l++];!(1&M)&&(_=null),x=M>>2&7,l++;break;case 254:for(;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}break;default:throw new Error("Unknown graphic control label: 0x"+a[l-1].toString(16))}break;case 44:var S,P=a[l++]|a[l++]<<8,L=a[l++]|a[l++]<<8,D=a[l++]|a[l++]<<8,k=a[l++]|a[l++]<<8,W=a[l++],I=W>>6&1,A=1<<1+(7&W),F=h,N=m,U=!1,W=(W>>7&&(U=!0,F=l,l+=3*(N=A)),l);for(l++;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}f.push({x:P,y:L,width:D,height:k,has_local_palette:U,palette_offset:F,palette_size:N,data_offset:W,data_length:l-W,transparent_index:_,interlaced:!!I,delay:v,disposal:x});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+a[l-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return j},this.frameInfo=function(G){if(G<0||G>=f.length)throw new Error("Frame index out of range.");return f[G]},this.decodeAndBlitFrameBGRA=function(G,z){for(var G=this.frameInfo(G),Y=G.width*G.height,$=new Uint8Array(Y),ie=(d(a,G.data_offset,$,Y),G.palette_offset),E=G.transparent_index,R=(E===null&&(E=256),G.width),B=b-R,H=R,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),se=Z,pe=4*B,oe=(G.interlaced===!0&&(pe+=4*b*7),8),he=0,de=$.length;he<de;++he){var J,ue,ye=$[he];H===0&&(H=R,te<=(se+=pe)&&(pe=4*B+4*b*(oe-1),se=Z+(R+B)*(oe<<1),oe>>=1)),ye===E?se+=4:(J=a[ie+3*ye],ue=a[ie+3*ye+1],ye=a[ie+3*ye+2],z[se++]=ye,z[se++]=ue,z[se++]=J,z[se++]=255),--H}},this.decodeAndBlitFrameRGBA=function(G,z){for(var G=this.frameInfo(G),Y=G.width*G.height,$=new Uint8Array(Y),ie=(d(a,G.data_offset,$,Y),G.palette_offset),E=G.transparent_index,R=(E===null&&(E=256),G.width),B=b-R,H=R,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),se=Z,pe=4*B,oe=(G.interlaced===!0&&(pe+=4*b*7),8),he=0,de=$.length;he<de;++he){var J,ue,ye=$[he];H===0&&(H=R,te<=(se+=pe)&&(pe=4*B+4*b*(oe-1),se=Z+(R+B)*(oe<<1),oe>>=1)),ye===E?se+=4:(J=a[ie+3*ye],ue=a[ie+3*ye+1],ye=a[ie+3*ye+2],z[se++]=J,z[se++]=ue,z[se++]=ye,z[se++]=255),--H}}}}catch{}},{}],254:[function(r,i,c){(function(o){var d,a;d=this,a=function(l){function b(V){if(this==null)throw TypeError();var C,T=String(this),O=T.length,V=V?Number(V):0;if(!((V=V!=V?0:V)<0||O<=V))return 55296<=(C=T.charCodeAt(V))&&C<=56319&&V+1<O&&56320<=(O=T.charCodeAt(V+1))&&O<=57343?1024*(C-55296)+O-56320+65536:C}String.prototype.codePointAt||((y=function(){try{var w={},C=Object.defineProperty,T=C(w,w,w)&&C}catch{}return T}())?y(String.prototype,"codePointAt",{value:b,configurable:!0,writable:!0}):String.prototype.codePointAt=b);var y,u=0,p=-3;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function m(w,C){this.source=w,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=C,this.destLen=0,this.ltree=new h,this.dtree=new h}var g=new h,f=new h,v=new Uint8Array(30),_=new Uint16Array(30),x=new Uint8Array(30),j=new Uint16Array(30),M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new h,P=new Uint8Array(320);function L(w,C,T,O){for(var V,q=0;q<T;++q)w[q]=0;for(q=0;q<30-T;++q)w[q+T]=q/T|0;for(V=O,q=0;q<30;++q)C[q]=V,V+=1<<w[q]}var D=new Uint16Array(16);function k(w,C,T,O){for(var V,q=0;q<16;++q)w.table[q]=0;for(q=0;q<O;++q)w.table[C[T+q]]++;for(q=V=w.table[0]=0;q<16;++q)D[q]=V,V+=w.table[q];for(q=0;q<O;++q)C[T+q]&&(w.trans[D[C[T+q]]++]=q)}function I(w,C,T){if(!C)return T;for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;var O=w.tag&65535>>>16-C;return w.tag>>>=C,w.bitcount-=C,O+T}function A(w,C){for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;for(var T=0,O=0,V=0,q=w.tag;O=2*O+(1&q),q>>>=1,T+=C.table[++V],0<=(O-=C.table[V]););return w.tag=q,w.bitcount-=V,C.trans[T+O]}function F(w,C,T){for(;;){var O=A(w,C);if(O===256)return u;if(O<256)w.dest[w.destLen++]=O;else for(var V,q=I(w,v[O-=257],_[O]),O=A(w,T),X=V=w.destLen-I(w,x[O],j[O]);X<V+q;++X)w.dest[w.destLen++]=w.dest[X]}}for(var N=g,U=f,W=0;W<7;++W)N.table[W]=0;for(N.table[7]=24,N.table[8]=152,N.table[9]=112,W=0;W<24;++W)N.trans[W]=256+W;for(W=0;W<144;++W)N.trans[24+W]=W;for(W=0;W<8;++W)N.trans[168+W]=280+W;for(W=0;W<112;++W)N.trans[176+W]=144+W;for(W=0;W<5;++W)U.table[W]=0;for(U.table[5]=32,W=0;W<32;++W)U.trans[W]=W;L(v,_,4,3),L(x,j,2,1),v[28]=0,_[28]=258;var G=function(w,C){var T,O,V,q=new m(w,C);do{switch(V=void 0,(O=q).bitcount--||(O.tag=O.source[O.sourceIndex++],O.bitcount=7),V=1&O.tag,O.tag>>>=1,O=V,I(q,2,0)){case 0:T=function(ke){for(var rt,yt;8<ke.bitcount;)ke.sourceIndex--,ke.bitcount-=8;if((rt=256*ke.source[ke.sourceIndex+1]+ke.source[ke.sourceIndex])!==(65535&~(256*ke.source[ke.sourceIndex+3]+ke.source[ke.sourceIndex+2])))return p;for(ke.sourceIndex+=4,yt=rt;yt;--yt)ke.dest[ke.destLen++]=ke.source[ke.sourceIndex++];return ke.bitcount=0,u}(q);break;case 1:T=F(q,g,f);break;case 2:Oe=Me=Re=Pe=X=fe=we=Se=be=ae=le=ee=void 0;for(var X,ee=q,le=q.ltree,ae=q.dtree,be=I(ee,5,257),Se=I(ee,5,1),we=I(ee,4,4),fe=0;fe<19;++fe)P[fe]=0;for(fe=0;fe<we;++fe){var Re=I(ee,3,0);P[M[fe]]=Re}for(k(S,P,0,19),X=0;X<be+Se;){var Me=A(ee,S);switch(Me){case 16:for(var Oe=P[X-1],Pe=I(ee,2,3);Pe;--Pe)P[X++]=Oe;break;case 17:for(Pe=I(ee,3,3);Pe;--Pe)P[X++]=0;break;case 18:for(Pe=I(ee,7,11);Pe;--Pe)P[X++]=0;break;default:P[X++]=Me}}k(le,P,0,be),k(ae,P,be,Se),T=F(q,q.ltree,q.dtree);break;default:T=p}if(T!==u)throw new Error("Data error")}while(!O);return q.destLen<q.dest.length?typeof q.dest.slice=="function"?q.dest.slice(0,q.destLen):q.dest.subarray(0,q.destLen):q.dest};function z(w,C,T,O,V){return Math.pow(1-V,3)*w+3*Math.pow(1-V,2)*V*C+3*(1-V)*Math.pow(V,2)*T+Math.pow(V,3)*O}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function $(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ie(w){throw new Error(w)}function E(w,C){w||ie(C)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(w,C){typeof w=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=w,this.x2=w),w<this.x1&&(this.x1=w),w>this.x2&&(this.x2=w)),typeof C=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=C,this.y2=C),C<this.y1&&(this.y1=C),C>this.y2&&(this.y2=C))},Y.prototype.addX=function(w){this.addPoint(w,null)},Y.prototype.addY=function(w){this.addPoint(null,w)},Y.prototype.addBezier=function(w,C,T,O,V,q,X,ee){var le=[w,C],ae=[T,O],be=[V,q],Se=[X,ee];this.addPoint(w,C),this.addPoint(X,ee);for(var we=0;we<=1;we++){var fe,Re=6*le[we]-12*ae[we]+6*be[we],Me=-3*le[we]+9*ae[we]-9*be[we]+3*Se[we],Oe=3*ae[we]-3*le[we];Me==0?Re==0||0<(fe=-Oe/Re)&&fe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],fe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],fe))):(fe=Math.pow(Re,2)-4*Oe*Me)<0||(0<(Oe=(-Re+Math.sqrt(fe))/(2*Me))&&Oe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],Oe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],Oe))),0<(Oe=(-Re-Math.sqrt(fe))/(2*Me))&&Oe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],Oe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],Oe))))}},Y.prototype.addQuad=function(w,C,T,O,V,q){T=w+2/3*(T-w),O=C+2/3*(O-C),this.addBezier(w,C,T,O,T+1/3*(V-w),O+1/3*(q-C),V,q)},$.prototype.moveTo=function(w,C){this.commands.push({type:"M",x:w,y:C})},$.prototype.lineTo=function(w,C){this.commands.push({type:"L",x:w,y:C})},$.prototype.curveTo=$.prototype.bezierCurveTo=function(w,C,T,O,V,q){this.commands.push({type:"C",x1:w,y1:C,x2:T,y2:O,x:V,y:q})},$.prototype.quadTo=$.prototype.quadraticCurveTo=function(w,C,T,O){this.commands.push({type:"Q",x1:w,y1:C,x:T,y:O})},$.prototype.close=$.prototype.closePath=function(){this.commands.push({type:"Z"})},$.prototype.extend=function(w){var C;if(w.commands)w=w.commands;else if(w instanceof Y)return C=w,this.moveTo(C.x1,C.y1),this.lineTo(C.x2,C.y1),this.lineTo(C.x2,C.y2),this.lineTo(C.x1,C.y2),void this.close();Array.prototype.push.apply(this.commands,w)},$.prototype.getBoundingBox=function(){for(var w=new Y,C=0,T=0,O=0,V=0,q=0;q<this.commands.length;q++){var X=this.commands[q];switch(X.type){case"M":w.addPoint(X.x,X.y),C=O=X.x,T=V=X.y;break;case"L":w.addPoint(X.x,X.y),O=X.x,V=X.y;break;case"Q":w.addQuad(O,V,X.x1,X.y1,X.x,X.y),O=X.x,V=X.y;break;case"C":w.addBezier(O,V,X.x1,X.y1,X.x2,X.y2,X.x,X.y),O=X.x,V=X.y;break;case"Z":O=C,V=T;break;default:throw new Error("Unexpected path command "+X.type)}}return w.isEmpty()&&w.addPoint(0,0),w},$.prototype.draw=function(w){w.beginPath();for(var C=0;C<this.commands.length;C+=1){var T=this.commands[C];T.type==="M"?w.moveTo(T.x,T.y):T.type==="L"?w.lineTo(T.x,T.y):T.type==="C"?w.bezierCurveTo(T.x1,T.y1,T.x2,T.y2,T.x,T.y):T.type==="Q"?w.quadraticCurveTo(T.x1,T.y1,T.x,T.y):T.type==="Z"&&w.closePath()}this.fill&&(w.fillStyle=this.fill,w.fill()),this.stroke&&(w.strokeStyle=this.stroke,w.lineWidth=this.strokeWidth,w.stroke())},$.prototype.toPathData=function(w){function C(){for(var q=arguments,X="",ee=0;ee<arguments.length;ee+=1){var le=q[ee];0<=le&&0<ee&&(X+=" "),X+=(le=le,Math.round(le)===le?""+Math.round(le):le.toFixed(w))}return X}w=w!==void 0?w:2;for(var T="",O=0;O<this.commands.length;O+=1){var V=this.commands[O];V.type==="M"?T+="M"+C(V.x,V.y):V.type==="L"?T+="L"+C(V.x,V.y):V.type==="C"?T+="C"+C(V.x1,V.y1,V.x2,V.y2,V.x,V.y):V.type==="Q"?T+="Q"+C(V.x1,V.y1,V.x,V.y):V.type==="Z"&&(T+="Z")}return T},$.prototype.toSVG=function(w){var C=(C='<path d="')+this.toPathData(w)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?C+=' fill="none"':C+=' fill="'+this.fill+'"'),this.stroke&&(C+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),C+="/>"},$.prototype.toDOMElement=function(C){var C=this.toPathData(C),T=document.createElementNS("http://www.w3.org/2000/svg","path");return T.setAttribute("d",C),T};var R={fail:ie,argument:E,assert:E},B={},H={},Z={};function te(w){return function(){return w}}H.BYTE=function(w){return R.argument(0<=w&&w<=255,"Byte value should be between 0 and 255."),[w]},Z.BYTE=te(1),H.CHAR=function(w){return[w.charCodeAt(0)]},Z.CHAR=te(1),H.CHARARRAY=function(w){for(var C=[],T=0;T<w.length;T+=1)C[T]=w.charCodeAt(T);return C},Z.CHARARRAY=function(w){return w.length},H.USHORT=function(w){return[w>>8&255,255&w]},Z.USHORT=te(2),H.SHORT=function(w){return[(w=32768<=w?-(65536-w):w)>>8&255,255&w]},Z.SHORT=te(2),H.UINT24=function(w){return[w>>16&255,w>>8&255,255&w]},Z.UINT24=te(3),H.ULONG=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]},Z.ULONG=te(4),H.LONG=function(w){return[(w=2147483648<=w?-(4294967296-w):w)>>24&255,w>>16&255,w>>8&255,255&w]},Z.LONG=te(4),H.FIXED=H.ULONG,Z.FIXED=Z.ULONG,H.FWORD=H.SHORT,Z.FWORD=Z.SHORT,H.UFWORD=H.USHORT,Z.UFWORD=Z.USHORT,H.LONGDATETIME=function(w){return[0,0,0,0,w>>24&255,w>>16&255,w>>8&255,255&w]},Z.LONGDATETIME=te(8),H.TAG=function(w){return R.argument(w.length===4,"Tag should be exactly 4 ASCII characters."),[w.charCodeAt(0),w.charCodeAt(1),w.charCodeAt(2),w.charCodeAt(3)]},Z.TAG=te(4),H.Card8=H.BYTE,Z.Card8=Z.BYTE,H.Card16=H.USHORT,Z.Card16=Z.USHORT,H.OffSize=H.BYTE,Z.OffSize=Z.BYTE,H.SID=H.USHORT,Z.SID=Z.USHORT,H.NUMBER=function(w){return-107<=w&&w<=107?[w+139]:108<=w&&w<=1131?[247+((w-=108)>>8),255&w]:-1131<=w&&w<=-108?[251+((w=-w-108)>>8),255&w]:-32768<=w&&w<=32767?H.NUMBER16(w):H.NUMBER32(w)},Z.NUMBER=function(w){return H.NUMBER(w).length},H.NUMBER16=function(w){return[28,w>>8&255,255&w]},Z.NUMBER16=te(3),H.NUMBER32=function(w){return[29,w>>24&255,w>>16&255,w>>8&255,255&w]},Z.NUMBER32=te(5),H.REAL=function(w){for(var C=w.toString(),T=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(C),O=(T&&(T=parseFloat("1e"+((T[2]?+T[2]:0)+T[1].length)),C=(Math.round(w*T)/T).toString()),""),V=0,q=C.length;V<q;V+=1){var X=C[V];O+=X==="e"?C[++V]==="-"?"c":"b":X==="."?"a":X==="-"?"e":X}for(var ee=[30],le=0,ae=(O+=1&O.length?"f":"ff").length;le<ae;le+=2)ee.push(parseInt(O.substr(le,2),16));return ee},Z.REAL=function(w){return H.REAL(w).length},H.NAME=H.CHARARRAY,Z.NAME=Z.CHARARRAY,H.STRING=H.CHARARRAY,Z.STRING=Z.CHARARRAY,B.UTF8=function(w,C,T){for(var O=[],V=T,q=0;q<V;q++,C+=1)O[q]=w.getUint8(C);return String.fromCharCode.apply(null,O)},B.UTF16=function(w,C,T){for(var O=[],V=T/2,q=0;q<V;q++,C+=2)O[q]=w.getUint16(C);return String.fromCharCode.apply(null,O)},H.UTF16=function(w){for(var C=[],T=0;T<w.length;T+=1){var O=w.charCodeAt(T);C[C.length]=O>>8&255,C[C.length]=255&O}return C},Z.UTF16=function(w){return 2*w.length};var se,pe={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},oe=(B.MACSTRING=function(w,C,T,O){var V=pe[O];if(V!==void 0){for(var q="",X=0;X<T;X++){var ee=w.getUint8(C+X);q+=ee<=127?String.fromCharCode(ee):V[127&ee]}return q}},typeof WeakMap=="function"&&new WeakMap);function he(w){return-128<=w&&w<=127}H.MACSTRING=function(w,C){var T=function(X){if(!se)for(var ee in se={},pe)se[ee]=new String(ee);var le=se[X];if(le!==void 0){if(oe){var ae=oe.get(le);if(ae!==void 0)return ae}var be=pe[X];if(be!==void 0){for(var Se={},we=0;we<be.length;we++)Se[be.charCodeAt(we)]=we+128;return oe&&oe.set(le,Se),Se}}}(C);if(T!==void 0){for(var O=[],V=0;V<w.length;V++){var q=w.charCodeAt(V);if(128<=q&&(q=T[q])===void 0)return;O[V]=q}return O}},Z.MACSTRING=function(w,C){return w=H.MACSTRING(w,C),w!==void 0?w.length:0},H.VARDELTAS=function(w){for(var O=0,C=[];O<w.length;)var T=w[O],O=(T===0?function(V,q,X){for(var ee=0,le=V.length;q<le&&ee<64&&V[q]===0;)++q,++ee;return X.push(128|ee-1),q}:-128<=T&&T<=127?function(V,q,X){for(var ee=0,le=V.length,ae=q;ae<le&&ee<64;){var be=V[ae];if(!he(be)||be===0&&ae+1<le&&V[ae+1]===0)break;++ae,++ee}X.push(ee-1);for(var Se=q;Se<ae;++Se)X.push(V[Se]+256&255);return ae}:function(V,q,X){for(var ee=0,le=V.length,ae=q;ae<le&&ee<64;){var be=V[ae];if(be===0||he(be)&&ae+1<le&&he(V[ae+1]))break;++ae,++ee}X.push(64|ee-1);for(var Se=q;Se<ae;++Se){var we=V[Se];X.push(we+65536>>8&255,we+256&255)}return ae})(w,O,C);return C},H.INDEX=function(w){for(var C=1,T=[C],O=[],V=0;V<w.length;V+=1){var q=H.OBJECT(w[V]);Array.prototype.push.apply(O,q),C+=q.length,T.push(C)}if(O.length===0)return[0,0];for(var X=[],ee=1+Math.floor(Math.log(C)/Math.log(2))/8|0,le=[void 0,H.BYTE,H.USHORT,H.UINT24,H.ULONG][ee],ae=0;ae<T.length;ae+=1){var be=le(T[ae]);Array.prototype.push.apply(X,be)}return Array.prototype.concat(H.Card16(w.length),H.OffSize(ee),X,O)},Z.INDEX=function(w){return H.INDEX(w).length},H.DICT=function(w){for(var C=[],T=Object.keys(w),O=T.length,V=0;V<O;V+=1){var q=parseInt(T[V],0),X=w[q];C=(C=C.concat(H.OPERAND(X.value,X.type))).concat(H.OPERATOR(q))}return C},Z.DICT=function(w){return H.DICT(w).length},H.OPERATOR=function(w){return w<1200?[w]:[12,w-1200]},H.OPERAND=function(w,C){var T=[];if(Array.isArray(C))for(var O=0;O<C.length;O+=1)R.argument(w.length===C.length,"Not enough arguments given for type"+C),T=T.concat(H.OPERAND(w[O],C[O]));else if(C==="SID")T=T.concat(H.NUMBER(w));else if(C==="offset")T=T.concat(H.NUMBER32(w));else if(C==="number")T=T.concat(H.NUMBER(w));else{if(C!=="real")throw new Error("Unknown operand type "+C);T=T.concat(H.REAL(w))}return T},H.OP=H.BYTE,Z.OP=Z.BYTE;var de=typeof WeakMap=="function"&&new WeakMap;function J(w,C,T){for(var O=0;O<C.length;O+=1){var V=C[O];this[V.name]=V.value}if(this.tableName=w,this.fields=C,T)for(var q=Object.keys(T),X=0;X<q.length;X+=1){var ee=q[X],le=T[ee];this[ee]!==void 0&&(this[ee]=le)}}function ue(w,C,T){T===void 0&&(T=C.length);var O=new Array(C.length+1);O[0]={name:w+"Count",type:"USHORT",value:T};for(var V=0;V<C.length;V++)O[V+1]={name:w+V,type:"USHORT",value:C[V]};return O}function ye(w,C,T){var O=C.length,V=new Array(O+1);V[0]={name:w+"Count",type:"USHORT",value:O};for(var q=0;q<O;q++)V[q+1]={name:w+q,type:"TABLE",value:T(C[q],q)};return V}function Ce(w,C,T){var O=C.length,V=[];V[0]={name:w+"Count",type:"USHORT",value:O};for(var q=0;q<O;q++)V=V.concat(T(C[q],q));return V}function ge(w){w.format===1?J.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ue("glyph",w.glyphs))):R.assert(!1,"Can't create coverage table format 2 yet.")}function _e(w){J.call(this,"scriptListTable",Ce("scriptRecord",w,function(C,T){var O=C.script,V=O.defaultLangSys;return R.assert(!!V,"Unable to write GSUB: script "+C.tag+" has no default language system."),[{name:"scriptTag"+T,type:"TAG",value:C.tag},{name:"script"+T,type:"TABLE",value:new J("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new J("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:V.reqFeatureIndex}].concat(ue("featureIndex",V.featureIndexes)))}].concat(Ce("langSys",O.langSysRecords,function(q,X){var ee=q.langSys;return[{name:"langSysTag"+X,type:"TAG",value:q.tag},{name:"langSys"+X,type:"TABLE",value:new J("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ee.reqFeatureIndex}].concat(ue("featureIndex",ee.featureIndexes)))}]})))}]}))}function Ee(w){J.call(this,"featureListTable",Ce("featureRecord",w,function(C,T){var O=C.feature;return[{name:"featureTag"+T,type:"TAG",value:C.tag},{name:"feature"+T,type:"TABLE",value:new J("featureTable",[{name:"featureParams",type:"USHORT",value:O.featureParams}].concat(ue("lookupListIndex",O.lookupListIndexes)))}]}))}function Ie(w,C){J.call(this,"lookupListTable",ye("lookup",w,function(T){var O=C[T.lookupType];return R.assert(!!O,"Unable to write GSUB lookup type "+T.lookupType+" tables."),new J("lookupTable",[{name:"lookupType",type:"USHORT",value:T.lookupType},{name:"lookupFlag",type:"USHORT",value:T.lookupFlag}].concat(ye("subtable",T.subtables,O)))}))}H.CHARSTRING=function(w){if(de){var C=de.get(w);if(C!==void 0)return C}for(var q=[],T=w.length,O=0;O<T;O+=1)var V=w[O],q=q.concat(H[V.type](V.value));return de&&de.set(w,q),q},Z.CHARSTRING=function(w){return H.CHARSTRING(w).length},H.OBJECT=function(w){var C=H[w.type];return R.argument(C!==void 0,"No encoding function for type "+w.type),C(w.value)},Z.OBJECT=function(w){var C=Z[w.type];return R.argument(C!==void 0,"No sizeOf function for type "+w.type),C(w.value)},H.TABLE=function(w){for(var C=[],T=w.fields.length,O=[],V=[],q=0;q<T;q+=1){var X=w.fields[q],le=H[X.type],ee=(R.argument(le!==void 0,"No encoding function for field type "+X.type+" ("+X.name+")"),w[X.name]),le=le(ee=ee===void 0?X.value:ee);X.type==="TABLE"?(V.push(C.length),C=C.concat([0,0]),O.push(le)):C=C.concat(le)}for(var ae=0;ae<O.length;ae+=1){var be=V[ae],Se=C.length;R.argument(Se<65536,"Table "+w.tableName+" too big."),C[be]=Se>>8,C[be+1]=255&Se,C=C.concat(O[ae])}return C},Z.TABLE=function(w){for(var C=0,T=w.fields.length,O=0;O<T;O+=1){var V=w.fields[O],q=Z[V.type],X=(R.argument(q!==void 0,"No sizeOf function for field type "+V.type+" ("+V.name+")"),w[V.name]);C+=q(X=X===void 0?V.value:X),V.type==="TABLE"&&(C+=2)}return C},H.RECORD=H.TABLE,Z.RECORD=Z.TABLE,H.LITERAL=function(w){return w},Z.LITERAL=function(w){return w.length},J.prototype.encode=function(){return H.TABLE(this)},J.prototype.sizeOf=function(){return Z.TABLE(this)};var Te={Table:J,Record:J,Coverage:(ge.prototype=Object.create(J.prototype)).constructor=ge,ScriptList:(_e.prototype=Object.create(J.prototype)).constructor=_e,FeatureList:(Ee.prototype=Object.create(J.prototype)).constructor=Ee,LookupList:(Ie.prototype=Object.create(J.prototype)).constructor=Ie,ushortList:ue,tableList:ye,recordList:Ce};function Qe(w,C){return w.getUint8(C)}function ze(w,C){return w.getUint16(C,!1)}function qe(w,C){return w.getUint32(C,!1)}function Xe(w,C){return w.getInt16(C,!1)+w.getUint16(C+2,!1)/65535}var We={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ce(w,C){this.data=w,this.offset=C,this.relativeOffset=0}ce.prototype.parseByte=function(){var w=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},ce.prototype.parseChar=function(){var w=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},ce.prototype.parseCard8=ce.prototype.parseByte,ce.prototype.parseCard16=ce.prototype.parseUShort=function(){var w=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},ce.prototype.parseSID=ce.prototype.parseUShort,ce.prototype.parseOffset16=ce.prototype.parseUShort,ce.prototype.parseShort=function(){var w=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},ce.prototype.parseF2Dot14=function(){var w=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,w},ce.prototype.parseOffset32=ce.prototype.parseULong=function(){var w=qe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},ce.prototype.parseFixed=function(){var w=Xe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},ce.prototype.parseString=function(w){var C=this.data,T=this.offset+this.relativeOffset,O="";this.relativeOffset+=w;for(var V=0;V<w;V++)O+=String.fromCharCode(C.getUint8(T+V));return O},ce.prototype.parseTag=function(){return this.parseString(4)},ce.prototype.parseLongDateTime=function(){var w=qe(this.data,this.offset+this.relativeOffset+4);return w-=2082844800,this.relativeOffset+=8,w},ce.prototype.parseVersion=function(w){var C=ze(this.data,this.offset+this.relativeOffset),T=ze(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,C+T/(w=w===void 0?4096:w)/10},ce.prototype.skip=function(w,C){this.relativeOffset+=We[w]*(C=C===void 0?1:C)},ce.prototype.parseULongList=function(w){w===void 0&&(w=this.parseULong());for(var C=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)C[V]=T.getUint32(O),O+=4;return this.relativeOffset+=4*w,C},ce.prototype.parseOffset16List=ce.prototype.parseUShortList=function(w){w===void 0&&(w=this.parseUShort());for(var C=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)C[V]=T.getUint16(O),O+=2;return this.relativeOffset+=2*w,C},ce.prototype.parseShortList=function(w){for(var C=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)C[V]=T.getInt16(O),O+=2;return this.relativeOffset+=2*w,C},ce.prototype.parseByteList=function(w){for(var C=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)C[V]=T.getUint8(O++);return this.relativeOffset+=w,C},ce.prototype.parseList=function(w,C){C||(C=w,w=this.parseUShort());for(var T=new Array(w),O=0;O<w;O++)T[O]=C.call(this);return T},ce.prototype.parseList32=function(w,C){C||(C=w,w=this.parseULong());for(var T=new Array(w),O=0;O<w;O++)T[O]=C.call(this);return T},ce.prototype.parseRecordList=function(w,C){C||(C=w,w=this.parseUShort());for(var T=new Array(w),O=Object.keys(C),V=0;V<w;V++){for(var q={},X=0;X<O.length;X++){var ee=O[X],le=C[ee];q[ee]=le.call(this)}T[V]=q}return T},ce.prototype.parseRecordList32=function(w,C){C||(C=w,w=this.parseULong());for(var T=new Array(w),O=Object.keys(C),V=0;V<w;V++){for(var q={},X=0;X<O.length;X++){var ee=O[X],le=C[ee];q[ee]=le.call(this)}T[V]=q}return T},ce.prototype.parseStruct=function(w){if(typeof w=="function")return w.call(this);for(var C=Object.keys(w),T={},O=0;O<C.length;O++){var V=C[O],q=w[V];T[V]=q.call(this)}return T},ce.prototype.parseValueRecord=function(w){var C;if((w=w===void 0?this.parseUShort():w)!==0)return C={},1&w&&(C.xPlacement=this.parseShort()),2&w&&(C.yPlacement=this.parseShort()),4&w&&(C.xAdvance=this.parseShort()),8&w&&(C.yAdvance=this.parseShort()),16&w&&(C.xPlaDevice=void 0,this.parseShort()),32&w&&(C.yPlaDevice=void 0,this.parseShort()),64&w&&(C.xAdvDevice=void 0,this.parseShort()),128&w&&(C.yAdvDevice=void 0,this.parseShort()),C},ce.prototype.parseValueRecordList=function(){for(var w=this.parseUShort(),C=this.parseUShort(),T=new Array(C),O=0;O<C;O++)T[O]=this.parseValueRecord(w);return T},ce.prototype.parsePointer=function(w){var C=this.parseOffset16();if(0<C)return new ce(this.data,this.offset+C).parseStruct(w)},ce.prototype.parsePointer32=function(w){var C=this.parseOffset32();if(0<C)return new ce(this.data,this.offset+C).parseStruct(w)},ce.prototype.parseListOfLists=function(w){for(var C=this.parseOffset16List(),T=C.length,O=this.relativeOffset,V=new Array(T),q=0;q<T;q++){var X=C[q];if(X===0)V[q]=void 0;else if(this.relativeOffset=X,w){for(var ee=this.parseOffset16List(),le=new Array(ee.length),ae=0;ae<ee.length;ae++)this.relativeOffset=X+ee[ae],le[ae]=w.call(this);V[q]=le}else V[q]=this.parseUShortList()}return this.relativeOffset=O,V},ce.prototype.parseCoverage=function(){var w=this.offset+this.relativeOffset,C=this.parseUShort(),T=this.parseUShort();if(C===1)return{format:1,glyphs:this.parseUShortList(T)};if(C!==2)throw new Error("0x"+w.toString(16)+": Coverage format must be 1 or 2.");for(var O=new Array(T),V=0;V<T;V++)O[V]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:O}},ce.prototype.parseClassDef=function(){var w=this.offset+this.relativeOffset,C=this.parseUShort();if(C===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(C===2)return{format:2,ranges:this.parseRecordList({start:ce.uShort,end:ce.uShort,classId:ce.uShort})};throw new Error("0x"+w.toString(16)+": ClassDef format must be 1 or 2.")},ce.list=function(w,C){return function(){return this.parseList(w,C)}},ce.list32=function(w,C){return function(){return this.parseList32(w,C)}},ce.recordList=function(w,C){return function(){return this.parseRecordList(w,C)}},ce.recordList32=function(w,C){return function(){return this.parseRecordList32(w,C)}},ce.pointer=function(w){return function(){return this.parsePointer(w)}},ce.pointer32=function(w){return function(){return this.parsePointer32(w)}},ce.tag=ce.prototype.parseTag,ce.byte=ce.prototype.parseByte,ce.uShort=ce.offset16=ce.prototype.parseUShort,ce.uShortList=ce.prototype.parseUShortList,ce.uLong=ce.offset32=ce.prototype.parseULong,ce.uLongList=ce.prototype.parseULongList,ce.struct=ce.prototype.parseStruct,ce.coverage=ce.prototype.parseCoverage,ce.classDef=ce.prototype.parseClassDef;var Ae={reserved:ce.uShort,reqFeatureIndex:ce.uShort,featureIndexes:ce.uShortList},xe=(ce.prototype.parseScriptList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,script:ce.pointer({defaultLangSys:ce.pointer(Ae),langSysRecords:ce.recordList({tag:ce.tag,langSys:ce.pointer(Ae)})})}))||[]},ce.prototype.parseFeatureList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,feature:ce.pointer({featureParams:ce.offset16,lookupListIndexes:ce.uShortList})}))||[]},ce.prototype.parseLookupList=function(w){return this.parsePointer(ce.list(ce.pointer(function(){var C=this.parseUShort(),T=(R.argument(1<=C&&C<=9,"GPOS/GSUB lookup type "+C+" unknown."),this.parseUShort()),O=16&T;return{lookupType:C,lookupFlag:T,subtables:this.parseList(ce.pointer(w[C])),markFilteringSet:O?this.parseUShort():void 0}})))||[]},ce.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var w=this.parseUShort(),C=this.parseUShort();return R.argument(w===1&&C<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ce.offset32,featureTableSubstitutionOffset:ce.offset32})})||[]},{getByte:Qe,getCard8:Qe,getUShort:ze,getCard16:ze,getShort:function(w,C){return w.getInt16(C,!1)},getULong:qe,getFixed:Xe,getTag:function(w,C){for(var T="",O=C;O<C+4;O+=1)T+=String.fromCharCode(w.getInt8(O));return T},getOffset:function(w,C,T){for(var O=0,V=0;V<T;V+=1)O=(O<<=8)+w.getUint8(C+V);return O},getBytes:function(w,C,T){for(var O=[],V=C;V<T;V+=1)O.push(w.getUint8(V));return O},bytesToString:function(w){for(var C="",T=0;T<w.length;T+=1)C+=String.fromCharCode(w[T]);return C},Parser:ce}),Q={parse:function(w,C){for(var T={},O=(T.version=xe.getUShort(w,C),R.argument(T.version===0,"cmap table version should be 0."),T.numTables=xe.getUShort(w,C+2),-1),V=T.numTables-1;0<=V;--V){var q=xe.getUShort(w,C+4+8*V),X=xe.getUShort(w,C+4+8*V+2);if(q===3&&(X===0||X===1||X===10)||q===0&&(X===0||X===1||X===2||X===3||X===4)){O=xe.getULong(w,C+4+8*V+4);break}}if(O===-1)throw new Error("No valid cmap sub-tables found.");var ee=new xe.Parser(w,C+O);if(T.format=ee.parseUShort(),T.format===12){var le,ae=T,be=ee;be.parseUShort(),ae.length=be.parseULong(),ae.language=be.parseULong(),ae.groupCount=le=be.parseULong(),ae.glyphIndexMap={};for(var Se=0;Se<le;Se+=1)for(var we=be.parseULong(),fe=be.parseULong(),Re=be.parseULong(),Me=we;Me<=fe;Me+=1)ae.glyphIndexMap[Me]=Re,Re++}else{if(T.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+T.format+").");var Oe=T,Pe=w,ke=C,rt=O;Oe.length=ee.parseUShort(),Oe.language=ee.parseUShort(),Oe.segCount=yt=ee.parseUShort()>>1,ee.skip("uShort",3),Oe.glyphIndexMap={};for(var yt,nt=new xe.Parser(Pe,ke+rt+14),st=new xe.Parser(Pe,ke+rt+16+2*yt),wt=new xe.Parser(Pe,ke+rt+16+4*yt),qt=new xe.Parser(Pe,ke+rt+16+6*yt),sr=ke+rt+16+8*yt,pr=0;pr<yt-1;pr+=1)for(var Tr=void 0,Mr=nt.parseUShort(),fn=st.parseUShort(),Ut=wt.parseShort(),Xt=qt.parseUShort(),Ft=fn;Ft<=Mr;Ft+=1)Xt!==0?(sr=(sr=qt.offset+qt.relativeOffset-2)+Xt+2*(Ft-fn),(Tr=xe.getUShort(Pe,sr))!==0&&(Tr=Tr+Ut&65535)):Tr=Ft+Ut&65535,Oe.glyphIndexMap[Ft]=Tr}return T},make:function(w){for(var C=!0,T=w.length-1;0<T;--T)if(65535<w.get(T).unicode){console.log("Adding CMAP format 12 (needed!)"),C=!1;break}var O,V,q=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:C?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:C?12:20}],X=(q=(q=C?q:q.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Te.Table("cmap",q));for(X.segments=[],T=0;T<w.length;T+=1){for(var ee=w.get(T),le=0;le<ee.unicodes.length;le+=1)O=ee.unicodes[le],V=T,X.segments.push({end:O,start:O,delta:-(O-V),offset:0,glyphIndex:V});X.segments=X.segments.sort(function(ke,rt){return ke.start-rt.start})}X.segments.push({end:65535,start:65535,delta:1,offset:0});var ae=X.segments.length,be=0,Se=[],we=[],fe=[],Re=[],Me=[],Oe=[];for(T=0;T<ae;T+=1){var Pe=X.segments[T];Pe.end<=65535&&Pe.start<=65535?(Se=Se.concat({name:"end_"+T,type:"USHORT",value:Pe.end}),we=we.concat({name:"start_"+T,type:"USHORT",value:Pe.start}),fe=fe.concat({name:"idDelta_"+T,type:"SHORT",value:Pe.delta}),Re=Re.concat({name:"idRangeOffset_"+T,type:"USHORT",value:Pe.offset}),Pe.glyphId!==void 0&&(Me=Me.concat({name:"glyph_"+T,type:"USHORT",value:Pe.glyphId}))):be+=1,C||Pe.glyphIndex===void 0||(Oe=(Oe=(Oe=Oe.concat({name:"cmap12Start_"+T,type:"ULONG",value:Pe.start})).concat({name:"cmap12End_"+T,type:"ULONG",value:Pe.end})).concat({name:"cmap12Glyph_"+T,type:"ULONG",value:Pe.glyphIndex}))}return X.segCountX2=2*(ae-be),X.searchRange=2*Math.pow(2,Math.floor(Math.log(ae-be)/Math.log(2))),X.entrySelector=Math.log(X.searchRange/2)/Math.log(2),X.rangeShift=X.segCountX2-X.searchRange,X.fields=X.fields.concat(Se),X.fields.push({name:"reservedPad",type:"USHORT",value:0}),X.fields=X.fields.concat(we),X.fields=X.fields.concat(fe),X.fields=X.fields.concat(Re),X.fields=X.fields.concat(Me),X.cmap4Length=14+2*Se.length+2+2*we.length+2*fe.length+2*Re.length+2*Me.length,C||(q=16+4*Oe.length,X.cmap12Offset=20+X.cmap4Length,X.fields=X.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:q},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Oe.length/3}]),X.fields=X.fields.concat(Oe)),X}},re=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],K=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ve=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function je(w){this.font=w}function Le(w){this.cmap=w}function Ne(w,C){this.encoding=w,this.charset=C}function Be(w){switch(w.version){case 1:this.names=ve.slice();break;case 2:this.names=new Array(w.numberOfGlyphs);for(var C=0;C<w.numberOfGlyphs;C++)w.glyphNameIndex[C]<ve.length?this.names[C]=ve[w.glyphNameIndex[C]]:this.names[C]=w.names[w.glyphNameIndex[C]-ve.length];break;case 2.5:this.names=new Array(w.numberOfGlyphs);for(var T=0;T<w.numberOfGlyphs;T++)this.names[T]=ve[T+w.glyphNameIndex[T]];break;default:this.names=[]}}je.prototype.charToGlyphIndex=function(w){var C=w.codePointAt(0),T=this.font.glyphs;if(T){for(var O=0;O<T.length;O+=1)for(var V=T.get(O),q=0;q<V.unicodes.length;q+=1)if(V.unicodes[q]===C)return O}return null},Le.prototype.charToGlyphIndex=function(w){return this.cmap.glyphIndexMap[w.codePointAt(0)]||0},Ne.prototype.charToGlyphIndex=function(w){return w=w.codePointAt(0),w=this.encoding[w],this.charset.indexOf(w)},Be.prototype.nameToGlyphIndex=function(w){return this.names.indexOf(w)},Be.prototype.glyphIndexToName=function(w){return this.names[w]};var Ge={line:function(w,C,T,O,V){w.beginPath(),w.moveTo(C,T),w.lineTo(O,V),w.stroke()}};function Ke(w){this.bindConstructorValues(w)}function mt(w,C,T){Object.defineProperty(w,C,{get:function(){return w.path,w[T]},set:function(O){w[T]=O},enumerable:!0,configurable:!0})}function lt(w,C){if(this.font=w,this.glyphs={},Array.isArray(C))for(var T=0;T<C.length;T++)this.glyphs[T]=C[T];this.length=C&&C.length||0}Ke.prototype.bindConstructorValues=function(w){var C;this.index=w.index||0,this.name=w.name||null,this.unicode=w.unicode||void 0,this.unicodes=w.unicodes||w.unicode!==void 0?[w.unicode]:[],w.xMin&&(this.xMin=w.xMin),w.yMin&&(this.yMin=w.yMin),w.xMax&&(this.xMax=w.xMax),w.yMax&&(this.yMax=w.yMax),w.advanceWidth&&(this.advanceWidth=w.advanceWidth),Object.defineProperty(this,"path",(w=w.path,C=w||new $,{configurable:!0,get:function(){return C=typeof C=="function"?C():C},set:function(T){C=T}}))},Ke.prototype.addUnicode=function(w){this.unicodes.length===0&&(this.unicode=w),this.unicodes.push(w)},Ke.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ke.prototype.getPath=function(w,C,T,O,V){w=w!==void 0?w:0,C=C!==void 0?C:0,T=T!==void 0?T:72;for(var q,X,ee=(O=O||{}).xScale,le=O.yScale,ae=((q=O.hinting&&V&&V.hinting?this.path&&V.hinting.exec(this,T):q)?(X=V.hinting.getCommands(q),w=Math.round(w),C=Math.round(C),ee=le=1):(X=this.path.commands,O=1/this.path.unitsPerEm*T,ee===void 0&&(ee=O),le===void 0&&(le=O)),new $),be=0;be<X.length;be+=1){var Se=X[be];Se.type==="M"?ae.moveTo(w+Se.x*ee,C+-Se.y*le):Se.type==="L"?ae.lineTo(w+Se.x*ee,C+-Se.y*le):Se.type==="Q"?ae.quadraticCurveTo(w+Se.x1*ee,C+-Se.y1*le,w+Se.x*ee,C+-Se.y*le):Se.type==="C"?ae.curveTo(w+Se.x1*ee,C+-Se.y1*le,w+Se.x2*ee,C+-Se.y2*le,w+Se.x*ee,C+-Se.y*le):Se.type==="Z"&&ae.closePath()}return ae},Ke.prototype.getContours=function(){if(this.points===void 0)return[];for(var w=[],C=[],T=0;T<this.points.length;T+=1){var O=this.points[T];C.push(O),O.lastPointOfContour&&(w.push(C),C=[])}return R.argument(C.length===0,"There are still points left in the current contour."),w},Ke.prototype.getMetrics=function(){for(var w=this.path.commands,C=[],T=[],O=0;O<w.length;O+=1){var V=w[O];V.type!=="Z"&&(C.push(V.x),T.push(V.y)),V.type!=="Q"&&V.type!=="C"||(C.push(V.x1),T.push(V.y1)),V.type==="C"&&(C.push(V.x2),T.push(V.y2))}var q={xMin:Math.min.apply(null,C),yMin:Math.min.apply(null,T),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,T),leftSideBearing:this.leftSideBearing};return isFinite(q.xMin)||(q.xMin=0),isFinite(q.xMax)||(q.xMax=this.advanceWidth),isFinite(q.yMin)||(q.yMin=0),isFinite(q.yMax)||(q.yMax=0),q.rightSideBearing=this.advanceWidth-q.leftSideBearing-(q.xMax-q.xMin),q},Ke.prototype.draw=function(w,C,T,O,V){this.getPath(C,T,O,V).draw(w)},Ke.prototype.drawPoints=function(w,C,T,O){function V(be,Se,we,fe){var Re=2*Math.PI;w.beginPath();for(var Me=0;Me<be.length;Me+=1)w.moveTo(Se+be[Me].x*fe,we+be[Me].y*fe),w.arc(Se+be[Me].x*fe,we+be[Me].y*fe,2,0,Re,!1);w.closePath(),w.fill()}C=C!==void 0?C:0,T=T!==void 0?T:0;for(var O=1/this.path.unitsPerEm*(O=O!==void 0?O:24),q=[],X=[],ee=this.path,le=0;le<ee.commands.length;le+=1){var ae=ee.commands[le];ae.x!==void 0&&q.push({x:ae.x,y:-ae.y}),ae.x1!==void 0&&X.push({x:ae.x1,y:-ae.y1}),ae.x2!==void 0&&X.push({x:ae.x2,y:-ae.y2})}w.fillStyle="blue",V(q,C,T,O),w.fillStyle="red",V(X,C,T,O)},Ke.prototype.drawMetrics=function(w,C,T,O){C=C!==void 0?C:0,T=T!==void 0?T:0,O=1/this.path.unitsPerEm*(O=O!==void 0?O:24),w.lineWidth=1,w.strokeStyle="black",Ge.line(w,C,-1e4,C,1e4),Ge.line(w,-1e4,T,1e4,T);var V=this.xMin||0,q=this.yMin||0,X=this.xMax||0,ee=this.yMax||0,le=this.advanceWidth||0;w.strokeStyle="blue",Ge.line(w,C+V*O,-1e4,C+V*O,1e4),Ge.line(w,C+X*O,-1e4,C+X*O,1e4),Ge.line(w,-1e4,T+-q*O,1e4,T+-q*O),Ge.line(w,-1e4,T+-ee*O,1e4,T+-ee*O),w.strokeStyle="green",Ge.line(w,C+le*O,-1e4,C+le*O,1e4)},lt.prototype.get=function(w){return typeof this.glyphs[w]=="function"&&(this.glyphs[w]=this.glyphs[w]()),this.glyphs[w]},lt.prototype.push=function(w,C){this.glyphs[w]=C,this.length++};var et={GlyphSet:lt,glyphLoader:function(w,C){return new Ke({index:C,font:w})},ttfGlyphLoader:function(w,C,T,O,V,q){return function(){var X=new Ke({index:C,font:w});return X.path=function(){T(X,O,V);var ee=q(w.glyphs,X);return ee.unitsPerEm=w.unitsPerEm,ee},mt(X,"xMin","_xMin"),mt(X,"xMax","_xMax"),mt(X,"yMin","_yMin"),mt(X,"yMax","_yMax"),X}},cffGlyphLoader:function(w,C,T,O){return function(){var V=new Ke({index:C,font:w});return V.path=function(){var q=T(w,V,O);return q.unitsPerEm=w.unitsPerEm,q},V}}};function pt(w){return w=w.length<1240?107:w.length<33900?1131:32768,w}function at(w,C,T){var O,V=[],q=[],X=xe.getCard16(w,C);if(X!==0){for(var ee=xe.getByte(w,C+2),le=C+(X+1)*ee+2,ae=C+3,be=0;be<X+1;be+=1)V.push(xe.getOffset(w,ae,ee)),ae+=ee;O=le+V[X]}else O=C+2;for(var Se=0;Se<V.length-1;Se+=1){var we=xe.getBytes(w,le+V[Se],le+V[Se+1]);T&&(we=T(we)),q.push(we)}return{objects:q,startOffset:C,endOffset:O}}function zt(w,C){if(C===28)return w.parseByte()<<8|w.parseByte();if(C===29)return w.parseByte()<<24|w.parseByte()<<16|w.parseByte()<<8|w.parseByte();if(C===30){for(var T=w,O="",V=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var X=T.parseByte(),q=X>>4,X=15&X;if(q==15||(O+=V[q],X==15))break;O+=V[X]}return parseFloat(O)}if(32<=C&&C<=246)return C-139;if(247<=C&&C<=250)return 256*(C-247)+w.parseByte()+108;if(251<=C&&C<=254)return 256*-(C-251)-w.parseByte()-108;throw new Error("Invalid b0 "+C)}function kr(w,C,T){var O=new xe.Parser(w,C=C!==void 0?C:0),V=[],q=[];for(T=T!==void 0?T:w.length;O.relativeOffset<T;){var X=O.parseByte();X<=21?(X===12&&(X=1200+O.parseByte()),V.push([X,q]),q=[]):q.push(zt(O,X))}for(var ee=V,le={},ae=0;ae<ee.length;ae+=1){var be=ee[ae][0],Se=ee[ae][1],we=void 0,we=Se.length===1?Se[0]:Se;if(le.hasOwnProperty(be)&&!isNaN(le[be]))throw new Error("Object "+le+" already has key "+be);le[be]=we}return le}function dr(w,C){return C=C<=390?re[C]:w[C-391]}function Ot(w,C,T){for(var O,V={},q=0;q<C.length;q+=1){var X=C[q];if(Array.isArray(X.type)){var ee=[];ee.length=X.type.length;for(var le=0;le<X.type.length;le++)(O=w[X.op]!==void 0?w[X.op][le]:void 0)===void 0&&(O=X.value!==void 0&&X.value[le]!==void 0?X.value[le]:null),X.type[le]==="SID"&&(O=dr(T,O)),ee[le]=O;V[X.name]=ee}else(O=w[X.op])===void 0&&(O=X.value!==void 0?X.value:null),X.type==="SID"&&(O=dr(T,O)),V[X.name]=O}return V}var Wt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],St=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Er(w,C,T,O){return Ot(kr(w,C,T),St,O)}function wr(w,C,T,O){for(var V=[],q=0;q<T.length;q+=1){var X=new DataView(new Uint8Array(T[q]).buffer),X=(ee=O,Ot(kr(X,0,X.byteLength),Wt,ee)),ee=(X._subrs=[],X._subrsBias=0,X.private[0]),le=X.private[1];ee!==0&&le!==0&&(ee=Er(w,le+C,ee,O),X._defaultWidthX=ee.defaultWidthX,X._nominalWidthX=ee.nominalWidthX,ee.subrs!==0&&(le=at(w,le+ee.subrs+C),X._subrs=le.objects,X._subrsBias=pt(X._subrs)),X._privateDict=ee),V.push(X)}return V}function Vt(w,C,T){var O,V,q,X,ee,le,ae,be,Se,we=new $,fe=[],Re=0,Me=!1,Oe=!1,Pe=0,ke=0,rt=(Se=(w.isCIDFont?(ee=w.tables.cff.topDict._fdSelect[C.index],ee=w.tables.cff.topDict._fdArray[ee],le=ee._subrs,ae=ee._subrsBias,be=ee._defaultWidthX,ee):(le=w.tables.cff.topDict._subrs,ae=w.tables.cff.topDict._subrsBias,be=w.tables.cff.topDict._defaultWidthX,w.tables.cff.topDict))._nominalWidthX,be);function yt(st,wt){Oe&&we.closePath(),we.moveTo(st,wt),Oe=!0}function nt(){fe.length%2==0||Me||(rt=fe.shift()+Se),Re+=fe.length>>1,fe.length=0,Me=!0}return function st(wt){for(var qt,sr,pr,Tr,Mr,fn,Ut,Xt,Ft,Lr,tr,Pr,Yt=0;Yt<wt.length;){var Cr=wt[Yt];switch(Yt+=1,Cr){case 1:case 3:nt();break;case 4:1<fe.length&&!Me&&(rt=fe.shift()+Se,Me=!0),ke+=fe.pop(),yt(Pe,ke);break;case 5:for(;0<fe.length;)Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);break;case 6:for(;0<fe.length&&(Pe+=fe.shift(),we.lineTo(Pe,ke),fe.length!==0);)ke+=fe.shift(),we.lineTo(Pe,ke);break;case 7:for(;0<fe.length&&(ke+=fe.shift(),we.lineTo(Pe,ke),fe.length!==0);)Pe+=fe.shift(),we.lineTo(Pe,ke);break;case 8:for(;0<fe.length;)O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 10:Mr=fe.pop()+ae,(fn=le[Mr])&&st(fn);break;case 11:return;case 12:switch(Cr=wt[Yt],Yt+=1,Cr){case 35:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X+fe.shift(),Ft=Ut+fe.shift(),Lr=Xt+fe.shift(),tr=Ft+fe.shift(),Pr=Lr+fe.shift(),Pe=tr+fe.shift(),ke=Pr+fe.shift(),fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,Lr,tr,Pr,Pe,ke);break;case 34:O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X,Ft=Ut+fe.shift(),Lr=X,tr=Ft+fe.shift(),Pr=ke,Pe=tr+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,Lr,tr,Pr,Pe,ke);break;case 36:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X,Ft=Ut+fe.shift(),Lr=X,tr=Ft+fe.shift(),Pr=Lr+fe.shift(),Pe=tr+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,Lr,tr,Pr,Pe,ke);break;case 37:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X+fe.shift(),Ft=Ut+fe.shift(),Lr=Xt+fe.shift(),tr=Ft+fe.shift(),Pr=Lr+fe.shift(),Math.abs(tr-Pe)>Math.abs(Pr-ke)?Pe=tr+fe.shift():ke=Pr+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,Lr,tr,Pr,Pe,ke);break;default:console.log("Glyph "+C.index+": unknown operator 1200"+Cr),fe.length=0}break;case 14:0<fe.length&&!Me&&(rt=fe.shift()+Se,Me=!0),Oe&&(we.closePath(),Oe=!1);break;case 18:nt();break;case 19:case 20:nt(),Yt+=Re+7>>3;break;case 21:2<fe.length&&!Me&&(rt=fe.shift()+Se,Me=!0),ke+=fe.pop(),yt(Pe+=fe.pop(),ke);break;case 22:1<fe.length&&!Me&&(rt=fe.shift()+Se,Me=!0),yt(Pe+=fe.pop(),ke);break;case 23:nt();break;case 24:for(;2<fe.length;)O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);break;case 25:for(;6<fe.length;)Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 26:for(fe.length%2&&(Pe+=fe.shift());0<fe.length;)O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q,ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 27:for(fe.length%2&&(ke+=fe.shift());0<fe.length;)O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X,we.curveTo(O,V,q,X,Pe,ke);break;case 28:qt=wt[Yt],sr=wt[Yt+1],fe.push((qt<<24|sr<<16)>>16),Yt+=2;break;case 29:Mr=fe.pop()+w.gsubrsBias,(fn=w.gsubrs[Mr])&&st(fn);break;case 30:for(;0<fe.length&&(O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke),fe.length!==0);)O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),ke=X+fe.shift(),Pe=q+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke);break;case 31:for(;0<fe.length&&(O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),ke=X+fe.shift(),Pe=q+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke),fe.length!==0);)O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke);break;default:Cr<32?console.log("Glyph "+C.index+": unknown operator "+Cr):Cr<247?fe.push(Cr-139):Cr<251?(qt=wt[Yt],Yt+=1,fe.push(256*(Cr-247)+qt+108)):Cr<255?(qt=wt[Yt],Yt+=1,fe.push(256*-(Cr-251)-qt-108)):(qt=wt[Yt],sr=wt[Yt+1],pr=wt[Yt+2],Tr=wt[Yt+3],Yt+=4,fe.push((qt<<24|sr<<16|pr<<8|Tr)/65536))}}}(T),C.advanceWidth=rt,we}function Sr(w,C){var T,O=re.indexOf(w);return 0<=O&&(T=O),0<=(O=C.indexOf(w))?T=O+re.length:(T=re.length+C.length,C.push(w)),T}function Po(w,C,T){for(var O={},V=0;V<w.length;V+=1){var q=w[V],X=C[q.name];X===void 0||function ee(le,ae){if(le===ae)return 1;if(Array.isArray(le)&&Array.isArray(ae)&&le.length===ae.length){for(var be=0;be<le.length;be+=1)if(!ee(le[be],ae[be]))return;return 1}}(X,q.value)||(q.type==="SID"&&(X=Sr(X,T)),O[q.op]={name:q.name,type:q.type,value:X})}return O}function ko(w,C){var T=new Te.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return T.dict=Po(Wt,w,C),T}function To(w){var C=new Te.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return C.topDicts=[{name:"topDict_0",type:"TABLE",value:w}],C}function Oi(w){for(var C=new Te.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),T=0;T<w.length;T+=1){var O=w.get(T),V=function(q){for(var X=[],ee=q.path,le=(X.push({name:"width",type:"NUMBER",value:q.advanceWidth}),0),ae=0,be=0;be<ee.commands.length;be+=1){var Se,we,fe,Re,Me=void 0,Oe=void 0,Pe=ee.commands[be];(Pe=Pe.type==="Q"?{type:"C",x:Pe.x,y:Pe.y,x1:1/3*le+2/3*Pe.x1,y1:1/3*ae+2/3*Pe.y1,x2:1/3*Pe.x+2/3*Pe.x1,y2:1/3*Pe.y+2/3*Pe.y1}:Pe).type==="M"?(Me=Math.round(Pe.x-le),Oe=Math.round(Pe.y-ae),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rmoveto",type:"OP",value:21}),le=Math.round(Pe.x),ae=Math.round(Pe.y)):Pe.type==="L"?(Me=Math.round(Pe.x-le),Oe=Math.round(Pe.y-ae),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rlineto",type:"OP",value:5}),le=Math.round(Pe.x),ae=Math.round(Pe.y)):Pe.type==="C"&&(Se=Math.round(Pe.x1-le),we=Math.round(Pe.y1-ae),fe=Math.round(Pe.x2-Pe.x1),Re=Math.round(Pe.y2-Pe.y1),Me=Math.round(Pe.x-Pe.x2),Oe=Math.round(Pe.y-Pe.y2),X.push({name:"dx1",type:"NUMBER",value:Se}),X.push({name:"dy1",type:"NUMBER",value:we}),X.push({name:"dx2",type:"NUMBER",value:fe}),X.push({name:"dy2",type:"NUMBER",value:Re}),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rrcurveto",type:"OP",value:8}),le=Math.round(Pe.x),ae=Math.round(Pe.y))}return X.push({name:"endchar",type:"OP",value:14}),X}(O);C.charStrings.push({name:O.name,type:"CHARSTRING",value:V})}return C}var Mo={parse:function(w,C,T){T.tables.cff={},ee=w,O=C,(V={}).formatMajor=xe.getCard8(ee,O),V.formatMinor=xe.getCard8(ee,O+1),V.size=xe.getCard8(ee,O+2),V.offsetSize=xe.getCard8(ee,O+3),V.startOffset=O,V.endOffset=O+4;var ee=at(w,V.endOffset,xe.bytesToString),O=at(w,ee.endOffset),V=at(w,O.endOffset,xe.bytesToString),ee=at(w,V.endOffset);if(T.gsubrs=ee.objects,T.gsubrsBias=pt(T.gsubrs),(ee=wr(w,C,O.objects,V.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ee.length);if(O=ee[0],(T.tables.cff.topDict=O)._privateDict&&(T.defaultWidthX=O._privateDict.defaultWidthX,T.nominalWidthX=O._privateDict.nominalWidthX),O.ros[0]!==void 0&&O.ros[1]!==void 0&&(T.isCIDFont=!0),T.isCIDFont){var ee=O.fdArray,q=O.fdSelect;if(ee===0||q===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ee=wr(w,C,at(w,ee+=C).objects,V.objects),O._fdArray=ee,O._fdSelect=function(we,fe,Re,Me){var Oe,Pe=[],ke=new xe.Parser(we,fe);if((we=ke.parseCard8())===0)for(var rt=0;rt<Re;rt++){if(Me<=(Oe=ke.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Oe+" (FD count "+Me+")");Pe.push(Oe)}else{if(we!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+we);var yt,nt=ke.parseCard16(),st=ke.parseCard16();if(st!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+st);for(var wt=0;wt<nt;wt++){if(Oe=ke.parseCard8(),yt=ke.parseCard16(),Me<=Oe)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Oe+" (FD count "+Me+")");if(Re<yt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+yt);for(;st<yt;st++)Pe.push(Oe);st=yt}if(yt!==Re)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+yt)}return Pe}(w,q+=C,T.numGlyphs,ee.length)}var q=C+O.private[1],ee=Er(w,q,O.private[0],V.objects),X=(T.defaultWidthX=ee.defaultWidthX,T.nominalWidthX=ee.nominalWidthX,ee.subrs!==0?(q=at(w,q+ee.subrs),T.subrs=q.objects,T.subrsBias=pt(T.subrs)):(T.subrs=[],T.subrsBias=0),at(w,C+O.charStrings)),ee=(T.nGlyphs=X.objects.length,function(be,Se,we,fe){var Re=new xe.Parser(be,Se),Me=(--we,[".notdef"]);if((be=Re.parseCard8())===0)for(var Oe=0;Oe<we;Oe+=1)Pe=Re.parseSID(),Me.push(dr(fe,Pe));else if(be===1)for(;Me.length<=we;)for(var Pe=Re.parseSID(),ke=Re.parseCard8(),rt=0;rt<=ke;rt+=1)Me.push(dr(fe,Pe)),Pe+=1;else{if(be!==2)throw new Error("Unknown charset format "+be);for(;Me.length<=we;){Pe=Re.parseSID(),ke=Re.parseCard16();for(var yt=0;yt<=ke;yt+=1)Me.push(dr(fe,Pe)),Pe+=1}}return Me}(w,C+O.charset,T.nGlyphs,V.objects));O.encoding===0?T.cffEncoding=new Ne(K,ee):O.encoding===1?T.cffEncoding=new Ne(ne,ee):T.cffEncoding=function(be,Se,we){var fe={},Re=new xe.Parser(be,Se);if((be=Re.parseCard8())===0)for(var Me=Re.parseCard8(),Oe=0;Oe<Me;Oe+=1)fe[ke=Re.parseCard8()]=Oe;else{if(be!==1)throw new Error("Unknown encoding format "+be);for(var Pe=Re.parseCard8(),ke=1,rt=0;rt<Pe;rt+=1)for(var yt=Re.parseCard8(),nt=Re.parseCard8(),st=yt;st<=yt+nt;st+=1)fe[st]=ke,ke+=1}return new Ne(fe,we)}(w,C+O.encoding,ee),T.encoding=T.encoding||T.cffEncoding,T.glyphs=new et.GlyphSet(T);for(var le=0;le<T.nGlyphs;le+=1){var ae=X.objects[le];T.glyphs.push(le,et.cffGlyphLoader(T,le,Vt,ae))}},make:function(w,be){for(var T,O=new Te.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),V=1/be.unitsPerEm,V={version:be.version,fullName:be.fullName,familyName:be.familyName,weight:be.weightName,fontBBox:be.fontBBox||[0,0,0,0],fontMatrix:[V,0,0,V,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},q=[],X=1;X<w.length;X+=1)T=w.get(X),q.push(T.name);var ee,le,ae=[],be=(O.header=new Te.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),O.nameIndex=function(we){var fe=new Te.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);fe.names=[];for(var Re=0;Re<we.length;Re+=1)fe.names.push({name:"name_"+Re,type:"NAME",value:we[Re]});return fe}([be.postScriptName]),ko(V,ae)),Se=(O.topDictIndex=To(be),O.globalSubrIndex=new Te.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),O.charsets=function(we,fe){for(var Re=new Te.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Me=0;Me<we.length;Me+=1){var Oe=Sr(we[Me],fe);Re.fields.push({name:"glyph_"+Me,type:"SID",value:Oe})}return Re}(q,ae),O.charStringsIndex=Oi(w),O.privateDict=(Se={},ee=ae,(le=new Te.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Po(St,Se,ee),le),O.stringIndex=function(we){var fe=new Te.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);fe.strings=[];for(var Re=0;Re<we.length;Re+=1)fe.strings.push({name:"string_"+Re,type:"STRING",value:we[Re]});return fe}(ae),O.header.sizeOf()+O.nameIndex.sizeOf()+O.topDictIndex.sizeOf()+O.stringIndex.sizeOf()+O.globalSubrIndex.sizeOf());return V.charset=Se,V.encoding=0,V.charStrings=V.charset+O.charsets.sizeOf(),V.private[1]=V.charStrings+O.charStringsIndex.sizeOf(),be=ko(V,ae),O.topDictIndex=To(be),O}},Lo={parse:function(O,C){var T={},O=new xe.Parser(O,C);return T.version=O.parseVersion(),T.fontRevision=Math.round(1e3*O.parseFixed())/1e3,T.checkSumAdjustment=O.parseULong(),T.magicNumber=O.parseULong(),R.argument(T.magicNumber===1594834165,"Font header has wrong magic number."),T.flags=O.parseUShort(),T.unitsPerEm=O.parseUShort(),T.created=O.parseLongDateTime(),T.modified=O.parseLongDateTime(),T.xMin=O.parseShort(),T.yMin=O.parseShort(),T.xMax=O.parseShort(),T.yMax=O.parseShort(),T.macStyle=O.parseUShort(),T.lowestRecPPEM=O.parseUShort(),T.fontDirectionHint=O.parseShort(),T.indexToLocFormat=O.parseShort(),T.glyphDataFormat=O.parseShort(),T},make:function(w){var C=Math.round(new Date().getTime()/1e3)+2082844800,T=C;return w.createdTimestamp&&(T=w.createdTimestamp+2082844800),new Te.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:T},{name:"modified",type:"LONGDATETIME",value:C},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],w)}},me={parse:function(O,C){var T={},O=new xe.Parser(O,C);return T.version=O.parseVersion(),T.ascender=O.parseShort(),T.descender=O.parseShort(),T.lineGap=O.parseShort(),T.advanceWidthMax=O.parseUShort(),T.minLeftSideBearing=O.parseShort(),T.minRightSideBearing=O.parseShort(),T.xMaxExtent=O.parseShort(),T.caretSlopeRise=O.parseShort(),T.caretSlopeRun=O.parseShort(),T.caretOffset=O.parseShort(),O.relativeOffset+=8,T.metricDataFormat=O.parseShort(),T.numberOfHMetrics=O.parseUShort(),T},make:function(w){return new Te.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],w)}},Ve={parse:function(w,C,T,O,V){for(var q,X,ee=new xe.Parser(w,C),le=0;le<O;le+=1){le<T&&(q=ee.parseUShort(),X=ee.parseShort());var ae=V.get(le);ae.advanceWidth=q,ae.leftSideBearing=X}},make:function(w){for(var C=new Te.Table("hmtx",[]),T=0;T<w.length;T+=1){var V=w.get(T),O=V.advanceWidth||0,V=V.leftSideBearing||0;C.fields.push({name:"advanceWidth_"+T,type:"USHORT",value:O}),C.fields.push({name:"leftSideBearing_"+T,type:"SHORT",value:V})}return C}},Ze={make:function(w){for(var C=new Te.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:w.length}]),T="",O=12+4*w.length,V=0;V<w.length;++V){var q=T.indexOf(w[V]);q<0&&(q=T.length,T+=w[V]),C.fields.push({name:"offset "+V,type:"USHORT",value:O+q}),C.fields.push({name:"length "+V,type:"USHORT",value:w[V].length})}return C.fields.push({name:"stringPool",type:"CHARARRAY",value:T}),C},parse:function(w,C){for(var T=new xe.Parser(w,C),O=T.parseULong(),V=(R.argument(O===1,"Unsupported ltag table version."),T.skip("uLong",1),T.parseULong()),q=[],X=0;X<V;X++){for(var ee="",le=C+T.parseUShort(),ae=T.parseUShort(),be=le;be<le+ae;++be)ee+=String.fromCharCode(w.getInt8(be));q.push(ee)}return q}},Fe={parse:function(O,C){var T={},O=new xe.Parser(O,C);return T.version=O.parseVersion(),T.numGlyphs=O.parseUShort(),T.version===1&&(T.maxPoints=O.parseUShort(),T.maxContours=O.parseUShort(),T.maxCompositePoints=O.parseUShort(),T.maxCompositeContours=O.parseUShort(),T.maxZones=O.parseUShort(),T.maxTwilightPoints=O.parseUShort(),T.maxStorage=O.parseUShort(),T.maxFunctionDefs=O.parseUShort(),T.maxInstructionDefs=O.parseUShort(),T.maxStackElements=O.parseUShort(),T.maxSizeOfInstructions=O.parseUShort(),T.maxComponentElements=O.parseUShort(),T.maxComponentDepth=O.parseUShort()),T},make:function(w){return new Te.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:w}])}},Ct=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],De={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Pt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Ye={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Et="utf-16",$e={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},lr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function vr(w,C,T){switch(w){case 0:return Et;case 1:return lr[T]||$e[C];case 3:if(C===1||C===10)return Et}}function nr(w){var C,T={};for(C in w)T[w[C]]=parseInt(C);return T}function xr(w,C,T,O,V,q){return new Te.Record("NameRecord",[{name:"platformID",type:"USHORT",value:w},{name:"encodingID",type:"USHORT",value:C},{name:"languageID",type:"USHORT",value:T},{name:"nameID",type:"USHORT",value:O},{name:"length",type:"USHORT",value:V},{name:"offset",type:"USHORT",value:q}])}function bn(w,C){if((T=function(q,X){var ee=q.length,le=X.length-ee+1;e:for(var ae=0;ae<le;ae++)for(;ae<le;ae++){for(var be=0;be<ee;be++)if(X[ae+be]!==q[be])continue e;return ae}return-1}(w,C))<0)for(var T=C.length,O=0,V=w.length;O<V;++O)C.push(w[O]);return T}var Xr={parse:function(w,C,T){for(var O={},V=new xe.Parser(w,C),C=V.parseUShort(),q=V.parseUShort(),X=V.offset+V.parseUShort(),ee=0;ee<q;ee++){var Re=V.parseUShort(),le=V.parseUShort(),ae=V.parseUShort(),be=V.parseUShort(),be=Ct[be]||be,Se=V.parseUShort(),we=V.parseUShort(),fe=function(Oe,Pe,ke){switch(Oe){case 0:if(Pe===65535)return"und";if(ke)return ke[Pe];break;case 1:return De[Pe];case 3:return Ye[Pe]}}(Re,ae,T),Re=vr(Re,le,ae);Re!==void 0&&fe!==void 0&&(le=void 0,(le=Re===Et?B.UTF16(w,X+we,Se):B.MACSTRING(w,X+we,Se,Re))&&((ae=(ae=O[be])===void 0?O[be]={}:ae)[fe]=le))}return C===1&&V.parseUShort(),O},make:function(w,C){var T,O=[],V={},q=nr(Ct);for(T in w){var X=q[T];if(X===void 0&&(X=T),we=parseInt(X),isNaN(we))throw new Error('Name table entry "'+T+'" does not exist, see nameTableNames for complete list.');V[we]=w[T],O.push(we)}for(var ee=nr(De),le=nr(Ye),ae=[],be=[],Se=0;Se<O.length;Se++){var we,fe,Re=V[we=O[Se]];for(fe in Re){var Me=Re[fe],yt=1,Oe=ee[fe],Pe=Pt[Oe],ke=vr(yt,Pe,Oe),ke=H.MACSTRING(Me,ke),rt=(ke===void 0&&(yt=0,(Oe=C.indexOf(fe))<0&&(Oe=C.length,C.push(fe)),Pe=4,ke=H.UTF16(Me)),bn(ke,be)),yt=(ae.push(xr(yt,Pe,Oe,we,ke.length,rt)),le[fe]);yt!==void 0&&(Oe=bn(Pe=H.UTF16(Me),be),ae.push(xr(3,1,yt,we,Pe.length,Oe)))}}ae.sort(function(wt,qt){return wt.platformID-qt.platformID||wt.encodingID-qt.encodingID||wt.languageID-qt.languageID||wt.nameID-qt.nameID});for(var nt=new Te.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ae.length},{name:"stringOffset",type:"USHORT",value:6+12*ae.length}]),st=0;st<ae.length;st++)nt.fields.push({name:"record_"+st,type:"RECORD",value:ae[st]});return nt.fields.push({name:"strings",type:"LITERAL",value:be}),nt}},_n=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],jr={parse:function(w,C){var T={},O=new xe.Parser(w,C);T.version=O.parseUShort(),T.xAvgCharWidth=O.parseShort(),T.usWeightClass=O.parseUShort(),T.usWidthClass=O.parseUShort(),T.fsType=O.parseUShort(),T.ySubscriptXSize=O.parseShort(),T.ySubscriptYSize=O.parseShort(),T.ySubscriptXOffset=O.parseShort(),T.ySubscriptYOffset=O.parseShort(),T.ySuperscriptXSize=O.parseShort(),T.ySuperscriptYSize=O.parseShort(),T.ySuperscriptXOffset=O.parseShort(),T.ySuperscriptYOffset=O.parseShort(),T.yStrikeoutSize=O.parseShort(),T.yStrikeoutPosition=O.parseShort(),T.sFamilyClass=O.parseShort(),T.panose=[];for(var V=0;V<10;V++)T.panose[V]=O.parseByte();return T.ulUnicodeRange1=O.parseULong(),T.ulUnicodeRange2=O.parseULong(),T.ulUnicodeRange3=O.parseULong(),T.ulUnicodeRange4=O.parseULong(),T.achVendID=String.fromCharCode(O.parseByte(),O.parseByte(),O.parseByte(),O.parseByte()),T.fsSelection=O.parseUShort(),T.usFirstCharIndex=O.parseUShort(),T.usLastCharIndex=O.parseUShort(),T.sTypoAscender=O.parseShort(),T.sTypoDescender=O.parseShort(),T.sTypoLineGap=O.parseShort(),T.usWinAscent=O.parseUShort(),T.usWinDescent=O.parseUShort(),1<=T.version&&(T.ulCodePageRange1=O.parseULong(),T.ulCodePageRange2=O.parseULong()),2<=T.version&&(T.sxHeight=O.parseShort(),T.sCapHeight=O.parseShort(),T.usDefaultChar=O.parseUShort(),T.usBreakChar=O.parseUShort(),T.usMaxContent=O.parseUShort()),T},make:function(w){return new Te.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],w)},unicodeRanges:_n,getUnicodeRange:function(w){for(var C=0;C<_n.length;C+=1){var T=_n[C];if(w>=T.begin&&w<T.end)return C}return-1}},Zu={parse:function(w,C){var T={},O=new xe.Parser(w,C);switch(T.version=O.parseVersion(),T.italicAngle=O.parseFixed(),T.underlinePosition=O.parseShort(),T.underlineThickness=O.parseShort(),T.isFixedPitch=O.parseULong(),T.minMemType42=O.parseULong(),T.maxMemType42=O.parseULong(),T.minMemType1=O.parseULong(),T.maxMemType1=O.parseULong(),T.version){case 1:T.names=ve.slice();break;case 2:T.numberOfGlyphs=O.parseUShort(),T.glyphNameIndex=new Array(T.numberOfGlyphs);for(var V=0;V<T.numberOfGlyphs;V++)T.glyphNameIndex[V]=O.parseUShort();T.names=[];for(var q,X=0;X<T.numberOfGlyphs;X++)T.glyphNameIndex[X]>=ve.length&&(q=O.parseChar(),T.names.push(O.parseString(q)));break;case 2.5:T.numberOfGlyphs=O.parseUShort(),T.offset=new Array(T.numberOfGlyphs);for(var ee=0;ee<T.numberOfGlyphs;ee++)T.offset[ee]=O.parseChar()}return T},make:function(){return new Te.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},hn=new Array(9),Bs=(hn[1]=function(){var w=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(ce.coverage),deltaGlyphId:this.parseUShort()}:C===2?{substFormat:2,coverage:this.parsePointer(ce.coverage),substitute:this.parseOffset16List()}:void R.assert(!1,"0x"+w.toString(16)+": lookup type 1 format must be 1 or 2.")},hn[2]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),sequences:this.parseListOfLists()}},hn[3]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),alternateSets:this.parseListOfLists()}},hn[4]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB ligature table identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:ce.uShort,lookupListIndex:ce.uShort});hn[5]=function(){var w,C,T=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:O,coverage:this.parsePointer(ce.coverage),ruleSets:this.parseListOfLists(function(){var V=this.parseUShort(),q=this.parseUShort();return{input:this.parseUShortList(V-1),lookupRecords:this.parseRecordList(q,Bs)}})}:O===2?{substFormat:O,coverage:this.parsePointer(ce.coverage),classDef:this.parsePointer(ce.classDef),classSets:this.parseListOfLists(function(){var V=this.parseUShort(),q=this.parseUShort();return{classes:this.parseUShortList(V-1),lookupRecords:this.parseRecordList(q,Bs)}})}:O===3?(w=this.parseUShort(),C=this.parseUShort(),{substFormat:O,coverages:this.parseList(w,ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(C,Bs)}):void R.assert(!1,"0x"+T.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},hn[6]=function(){var w=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(ce.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bs)}})}:C===2?{substFormat:2,coverage:this.parsePointer(ce.coverage),backtrackClassDef:this.parsePointer(ce.classDef),inputClassDef:this.parsePointer(ce.classDef),lookaheadClassDef:this.parsePointer(ce.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bs)}})}:C===3?{substFormat:3,backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),inputCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(Bs)}:void R.assert(!1,"0x"+w.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},hn[7]=function(){var w=this.parseUShort(),w=(R.argument(w===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),C=new ce(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:w,extension:hn[w].call(C)}},hn[8]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),substitutes:this.parseUShortList()}};var Ri=new Array(9);Ri[1]=function(w){return w.substFormat===1?new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)},{name:"deltaGlyphID",type:"USHORT",value:w.deltaGlyphId}]):new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.ushortList("substitute",w.substitute)))},Ri[3]=function(w){return R.assert(w.substFormat===1,"Lookup type 3 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.tableList("altSet",w.alternateSets,function(C){return new Te.Table("alternateSetTable",Te.ushortList("alternate",C))})))},Ri[4]=function(w){return R.assert(w.substFormat===1,"Lookup type 4 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.tableList("ligSet",w.ligatureSets,function(C){return new Te.Table("ligatureSetTable",Te.tableList("ligature",C,function(T){return new Te.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:T.ligGlyph}].concat(Te.ushortList("component",T.components,T.components.length+1)))}))})))};var Qu={parse:function(w,C){return C=(w=new ce(w,C=C||0)).parseVersion(1),R.argument(C===1||C===1.1,"Unsupported GSUB table version."),C===1?{version:C,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(hn)}:{version:C,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(hn),variations:w.parseFeatureVariationsList()}},make:function(w){return new Te.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(w.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(w.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(w.lookups,Ri)}])}},Ju={parse:function(w,C){for(var T=new xe.Parser(w,C),O=T.parseULong(),V=(R.argument(O===1,"Unsupported META table version."),T.parseULong(),T.parseULong(),T.parseULong()),q={},X=0;X<V;X++){var ee=T.parseTag(),ae=T.parseULong(),le=T.parseULong(),ae=B.UTF8(w,C+ae,le);q[ee]=ae}return q},make:function(w){var C,T=Object.keys(w).length,O="",V=16+12*T,q=new Te.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:V},{name:"numTags",type:"ULONG",value:T}]);for(C in w){var X=O.length;O+=w[C],q.fields.push({name:"tag "+C,type:"TAG",value:C}),q.fields.push({name:"offset "+C,type:"ULONG",value:V+X}),q.fields.push({name:"length "+C,type:"ULONG",value:w[C].length})}return q.fields.push({name:"stringPool",type:"CHARARRAY",value:O}),q}};function ec(w){return Math.log(w)/Math.log(2)|0}function Ua(w){for(;w.length%4!=0;)w.push(0);for(var C=0,T=0;T<w.length;T+=4)C+=(w[T]<<24)+(w[T+1]<<16)+(w[T+2]<<8)+w[T+3];return C%=Math.pow(2,32)}function tc(w,C,T,O){return new Te.Record("Table Record",[{name:"tag",type:"TAG",value:w!==void 0?w:""},{name:"checkSum",type:"ULONG",value:C!==void 0?C:0},{name:"offset",type:"ULONG",value:T!==void 0?T:0},{name:"length",type:"ULONG",value:O!==void 0?O:0}])}function rc(w){for(var C=new Te.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),T=(C.tables=w,C.numTables=w.length,Math.pow(2,ec(C.numTables))),O=(C.searchRange=16*T,C.entrySelector=ec(T),C.rangeShift=16*C.numTables-C.searchRange,[]),V=[],q=C.sizeOf()+tc().sizeOf()*C.numTables;q%4!=0;)q+=1,V.push({name:"padding",type:"BYTE",value:0});for(var X=0;X<w.length;X+=1){var ee=w[X],le=(R.argument(ee.tableName.length===4,"Table name"+ee.tableName+" is invalid."),ee.sizeOf()),ae=tc(ee.tableName,Ua(ee.encode()),q,le);for(O.push({name:ae.tag+" Table Record",type:"RECORD",value:ae}),V.push({name:ee.tableName+" table",type:"RECORD",value:ee}),q+=le,R.argument(!isNaN(q),"Something went wrong calculating the offset.");q%4!=0;)q+=1,V.push({name:"padding",type:"BYTE",value:0})}return O.sort(function(be,Se){return be.value.tag>Se.value.tag?1:-1}),C.fields=C.fields.concat(O),C.fields=C.fields.concat(V),C}function nc(w,C,T){for(var O=0;O<C.length;O+=1){var V=w.charToGlyphIndex(C[O]);if(0<V)return w.glyphs.get(V).getMetrics()}return T}var rm={make:rc,fontToTable:function(w){for(var C,T=[],O=[],V=[],q=[],X=[],ee=[],le=[],ae=0,be=0,Se=0,we=0,fe=0,Re=0;Re<w.glyphs.length;Re+=1){var Me=w.glyphs.get(Re),Oe=0|Me.unicode;if(isNaN(Me.advanceWidth))throw new Error("Glyph "+Me.name+" ("+Re+"): advanceWidth is not a number.");(Oe<C||C===void 0)&&0<Oe&&(C=Oe),ae<Oe&&(ae=Oe);var Oe=jr.getUnicodeRange(Oe);if(Oe<32)be|=1<<Oe;else if(Oe<64)Se|=1<<Oe-32;else if(Oe<96)we|=1<<Oe-64;else{if(!(Oe<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");fe|=1<<Oe-96}Me.name!==".notdef"&&(Oe=Me.getMetrics(),T.push(Oe.xMin),O.push(Oe.yMin),V.push(Oe.xMax),q.push(Oe.yMax),ee.push(Oe.leftSideBearing),le.push(Oe.rightSideBearing),X.push(Me.advanceWidth))}var Pe,ke={xMin:Math.min.apply(null,T),yMin:Math.min.apply(null,O),xMax:Math.max.apply(null,V),yMax:Math.max.apply(null,q),advanceWidthMax:Math.max.apply(null,X),advanceWidthAvg:function(Cr){for(var Do=0,zs=0;zs<Cr.length;zs+=1)Do+=Cr[zs];return Do/Cr.length}(X),minLeftSideBearing:Math.min.apply(null,ee),maxLeftSideBearing:Math.max.apply(null,ee),minRightSideBearing:Math.min.apply(null,le)},rt=(ke.ascender=w.ascender,ke.descender=w.descender,Lo.make({flags:3,unitsPerEm:w.unitsPerEm,xMin:ke.xMin,yMin:ke.yMin,xMax:ke.xMax,yMax:ke.yMax,lowestRecPPEM:3,createdTimestamp:w.createdTimestamp})),yt=me.make({ascender:ke.ascender,descender:ke.descender,advanceWidthMax:ke.advanceWidthMax,minLeftSideBearing:ke.minLeftSideBearing,minRightSideBearing:ke.minRightSideBearing,xMaxExtent:ke.maxLeftSideBearing+(ke.xMax-ke.xMin),numberOfHMetrics:w.glyphs.length}),nt=Fe.make(w.glyphs.length),st=jr.make({xAvgCharWidth:Math.round(ke.advanceWidthAvg),usWeightClass:w.tables.os2.usWeightClass,usWidthClass:w.tables.os2.usWidthClass,usFirstCharIndex:C,usLastCharIndex:ae,ulUnicodeRange1:be,ulUnicodeRange2:Se,ulUnicodeRange3:we,ulUnicodeRange4:fe,fsSelection:w.tables.os2.fsSelection,sTypoAscender:ke.ascender,sTypoDescender:ke.descender,sTypoLineGap:0,usWinAscent:ke.yMax,usWinDescent:Math.abs(ke.yMin),ulCodePageRange1:1,sxHeight:nc(w,"xyvw",{yMax:Math.round(ke.ascender/2)}).yMax,sCapHeight:nc(w,"HIKLEFJMNTZBDPRAGOQSUVWXY",ke).yMax,usDefaultChar:w.hasChar(" ")?32:0,usBreakChar:w.hasChar(" ")?32:0}),wt=Ve.make(w.glyphs),qt=Q.make(w.glyphs),Xt=w.getEnglishName("fontFamily"),Ft=w.getEnglishName("fontSubfamily"),Ut=Xt+" "+Ft,sr=(sr=w.getEnglishName("postScriptName"))||Xt.replace(/\s/g,"")+"-"+Ft,pr={};for(Pe in w.names)pr[Pe]=w.names[Pe];pr.uniqueID||(pr.uniqueID={en:w.getEnglishName("manufacturer")+":"+Ut}),pr.postScriptName||(pr.postScriptName={en:sr}),pr.preferredFamily||(pr.preferredFamily=w.names.fontFamily),pr.preferredSubfamily||(pr.preferredSubfamily=w.names.fontSubfamily);var Mr=[],Tr=Xr.make(pr,Mr),Mr=0<Mr.length?Ze.make(Mr):void 0,fn=Zu.make(),Ut=Mo.make(w.glyphs,{version:w.getEnglishName("version"),fullName:Ut,familyName:Xt,weightName:Ft,postScriptName:sr,unitsPerEm:w.unitsPerEm,fontBBox:[0,ke.yMin,ke.ascender,ke.advanceWidthMax]}),Xt=w.metas&&0<Object.keys(w.metas).length?Ju.make(w.metas):void 0,Ft=[rt,yt,nt,st,Tr,qt,fn,Ut,wt];Mr&&Ft.push(Mr),w.tables.gsub&&Ft.push(Qu.make(w.tables.gsub)),Xt&&Ft.push(Xt);for(var Lr=Ua((sr=rc(Ft)).encode()),tr=sr.fields,Pr=!1,Yt=0;Yt<tr.length;Yt+=1)if(tr[Yt].name==="head table"){tr[Yt].value.checkSumAdjustment=2981146554-Lr,Pr=!0;break}if(Pr)return sr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ua};function Ga(w,C){for(var T=0,O=w.length-1;T<=O;){var V=T+O>>>1,q=w[V].tag;if(q===C)return V;q<C?T=1+V:O=V-1}return-T-1}function sc(w,C){for(var T=0,O=w.length-1;T<=O;){var V=T+O>>>1,q=w[V];if(q===C)return V;q<C?T=1+V:O=V-1}return-T-1}function oc(w,C){for(var T=0,O=w.length-1;T<=O;){var V,q=T+O>>>1,X=(V=w[q]).start;if(X===C)return V;X<C?T=1+q:O=q-1}if(0<T)return C>(V=w[T-1]).end?0:V}function Di(w,C){this.font=w,this.tableName=C}function Ii(w){Di.call(this,w,"gpos")}function wn(w){Di.call(this,w,"gsub")}function ic(w,C,T){for(var O=w.subtables,V=0;V<O.length;V++){var q=O[V];if(q.substFormat===C)return q}if(T)return O.push(T),T}function ac(w){for(var C=new ArrayBuffer(w.length),T=new Uint8Array(C),O=0;O<w.length;++O)T[O]=w[O];return C}function Us(w,C){if(!w)throw C}function lc(w,C,T,O,V){var q=0<(C&O)?(q=w.parseByte(),T+(q=C&V?q:-q)):0<(C&V)?T:T+w.parseShort();return q}function nm(w,C,T){var O,V=new xe.Parser(C,T);if(w.numberOfContours=V.parseShort(),w._xMin=V.parseShort(),w._yMin=V.parseShort(),w._xMax=V.parseShort(),w._yMax=V.parseShort(),0<w.numberOfContours){for(var q=w.endPointIndices=[],X=0;X<w.numberOfContours;X+=1)q.push(V.parseUShort());w.instructionLength=V.parseUShort(),w.instructions=[];for(var ee=0;ee<w.instructionLength;ee+=1)w.instructions.push(V.parseByte());for(var le=q[q.length-1]+1,ae=[],be=0;be<le;be+=1)if(O=V.parseByte(),ae.push(O),0<(8&O))for(var Se=V.parseByte(),we=0;we<Se;we+=1)ae.push(O),be+=1;if(R.argument(ae.length===le,"Bad flags."),0<q.length){var fe,Re=[];if(0<le){for(var Me=0;Me<le;Me+=1)O=ae[Me],(fe={}).onCurve=!!(1&O),fe.lastPointOfContour=0<=q.indexOf(Me),Re.push(fe);for(var Oe=0,Pe=0;Pe<le;Pe+=1)O=ae[Pe],(fe=Re[Pe]).x=lc(V,O,Oe,2,16),Oe=fe.x;for(var ke=0,rt=0;rt<le;rt+=1)O=ae[rt],(fe=Re[rt]).y=lc(V,O,ke,4,32),ke=fe.y}w.points=Re}else w.points=[]}else if(w.numberOfContours===0)w.points=[];else{w.isComposite=!0,w.points=[],w.components=[];for(var yt=!0;yt;){ae=V.parseUShort();var nt={glyphIndex:V.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ae)?0<(2&ae)?(nt.dx=V.parseShort(),nt.dy=V.parseShort()):nt.matchedPoints=[V.parseUShort(),V.parseUShort()]:0<(2&ae)?(nt.dx=V.parseChar(),nt.dy=V.parseChar()):nt.matchedPoints=[V.parseByte(),V.parseByte()],0<(8&ae)?nt.xScale=nt.yScale=V.parseF2Dot14():0<(64&ae)?(nt.xScale=V.parseF2Dot14(),nt.yScale=V.parseF2Dot14()):0<(128&ae)&&(nt.xScale=V.parseF2Dot14(),nt.scale01=V.parseF2Dot14(),nt.scale10=V.parseF2Dot14(),nt.yScale=V.parseF2Dot14()),w.components.push(nt),yt=!!(32&ae)}if(256&ae){w.instructionLength=V.parseUShort(),w.instructions=[];for(var st=0;st<w.instructionLength;st+=1)w.instructions.push(V.parseByte())}}}function za(w,C){for(var T=[],O=0;O<w.length;O+=1){var V=w[O],V={x:C.xScale*V.x+C.scale01*V.y+C.dx,y:C.scale10*V.x+C.yScale*V.y+C.dy,onCurve:V.onCurve,lastPointOfContour:V.lastPointOfContour};T.push(V)}return T}function uc(w){var C=new $;if(w)for(var T=function(Se){for(var we=[],fe=[],Re=0;Re<Se.length;Re+=1){var Me=Se[Re];fe.push(Me),Me.lastPointOfContour&&(we.push(fe),fe=[])}return R.argument(fe.length===0,"There are still points left in the current contour."),we}(w),O=0;O<T.length;++O){var V,q=T[O],X=q[q.length-1],ee=q[0];X.onCurve?C.moveTo(X.x,X.y):ee.onCurve?C.moveTo(ee.x,ee.y):(V={x:.5*(X.x+ee.x),y:.5*(X.y+ee.y)},C.moveTo(V.x,V.y));for(var le=0;le<q.length;++le){var ae,be=X,X=ee,ee=q[(le+1)%q.length];X.onCurve?C.lineTo(X.x,X.y):(ae=ee,be.onCurve||(X.x,be.x,X.y,be.y),ee.onCurve||(ae={x:.5*(X.x+ee.x),y:.5*(X.y+ee.y)}),C.quadraticCurveTo(X.x,X.y,ae.x,ae.y))}C.closePath()}return C}function sm(w,C){if(C.isComposite)for(var T=0;T<C.components.length;T+=1){var O=C.components[T],V=w.get(O.glyphIndex);if(V.getPath(),V.points){var q=void 0;if(O.matchedPoints===void 0)q=za(V.points,O);else{if(O.matchedPoints[0]>C.points.length-1||O.matchedPoints[1]>V.points.length-1)throw Error("Matched points out of range in "+C.name);var X=C.points[O.matchedPoints[0]],ee=V.points[O.matchedPoints[1]],O={xScale:O.xScale,scale01:O.scale01,scale10:O.scale10,yScale:O.yScale,dx:0,dy:0},ee=za([ee],O)[0];O.dx=X.x-ee.x,O.dy=X.y-ee.y,q=za(V.points,O)}C.points=C.points.concat(q)}}return uc(C.points)}(Ii.prototype=Di.prototype={searchTag:Ga,binSearch:sc,getTable:function(w){var C=this.font.tables[this.tableName];return C=!C&&w?this.font.tables[this.tableName]=this.createDefaultTable():C},getScriptNames:function(){var w=this.getTable();return w?w.scripts.map(function(C){return C.tag}):[]},getDefaultScriptName:function(){var w=this.getTable();if(w){for(var C=!1,T=0;T<w.scripts.length;T++){var O=w.scripts[T].tag;if(O==="DFLT")return O;O==="latn"&&(C=!0)}return C?"latn":void 0}},getScriptTable:function(w,C){var T,O=this.getTable(C);if(O)return T=O.scripts,0<=(O=Ga(O.scripts,w=w||"DFLT"))?T[O].script:C?(T.splice(-1-O,0,C={tag:w,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),C.script):void 0},getLangSysTable:function(V,C,T){var O,V=this.getScriptTable(V,T);if(V)return C&&C!=="dflt"&&C!=="DFLT"?0<=(O=Ga(V.langSysRecords,C))?V.langSysRecords[O].langSys:T?(V.langSysRecords.splice(-1-O,0,T={tag:C,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),T.langSys):void 0:V.defaultLangSys},getFeatureTable:function(w,C,T,O){if(w=this.getLangSysTable(w,C,O),w){for(var V,q=w.featureIndexes,X=this.font.tables[this.tableName].features,ee=0;ee<q.length;ee++)if((V=X[q[ee]]).tag===T)return V.feature;if(O)return C=X.length,R.assert(C===0||T>=X[C-1].tag,"Features must be added in alphabetical order."),X.push(V={tag:T,feature:{params:0,lookupListIndexes:[]}}),q.push(C),V.feature}},getLookupTables:function(q,C,T,O,V){var q=this.getFeatureTable(q,C,T,V),X=[];if(q){for(var ee,le=q.lookupListIndexes,ae=this.font.tables[this.tableName].lookups,be=0;be<le.length;be++)(ee=ae[le[be]]).lookupType===O&&X.push(ee);if(X.length===0&&V)return C=ae.length,ae.push(ee={lookupType:O,lookupFlag:0,subtables:[],markFilteringSet:void 0}),le.push(C),[ee]}return X},getGlyphClass:function(w,C){switch(w.format){case 1:return w.startGlyph<=C&&C<w.startGlyph+w.classes.length?w.classes[C-w.startGlyph]:0;case 2:var T=oc(w.ranges,C);return T?T.classId:0}},getCoverageIndex:function(w,C){switch(w.format){case 1:var T=sc(w.glyphs,C);return 0<=T?T:-1;case 2:return T=oc(w.ranges,C),T?T.index+C-T.start:-1}},expandCoverage:function(w){if(w.format===1)return w.glyphs;for(var C=[],T=w.ranges,O=0;O<T.length;O++)for(var V=T[O],q=V.start,X=V.end,ee=q;ee<=X;ee++)C.push(ee);return C}}).init=function(){var w=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(w)},Ii.prototype.getKerningValue=function(w,C,T){for(var O=0;O<w.length;O++)for(var V=w[O].subtables,q=0;q<V.length;q++){var X=V[q],ee=this.getCoverageIndex(X.coverage,C);if(!(ee<0))switch(X.posFormat){case 1:for(var le=X.pairSets[ee],ae=0;ae<le.length;ae++){var be=le[ae];if(be.secondGlyph===T)return be.value1&&be.value1.xAdvance||0}break;case 2:var we=this.getGlyphClass(X.classDef1,C),Se=this.getGlyphClass(X.classDef2,T),we=X.classRecords[we][Se];return we.value1&&we.value1.xAdvance||0}}return 0},Ii.prototype.getKerningTables=function(w,C){if(this.font.tables.gpos)return this.getLookupTables(w,C,"kern",2)},(wn.prototype=Di.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},wn.prototype.getSingle=function(w,C,T){for(var O=[],V=this.getLookupTables(C,T,w,1),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++){var le=X[ee],ae=this.expandCoverage(le.coverage),be=void 0;if(le.substFormat===1)for(var Se=le.deltaGlyphId,be=0;be<ae.length;be++){var we=ae[be];O.push({sub:we,by:we+Se})}else{var fe=le.substitute;for(be=0;be<ae.length;be++)O.push({sub:ae[be],by:fe[be]})}}return O},wn.prototype.getAlternates=function(w,C,T){for(var O=[],V=this.getLookupTables(C,T,w,3),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++)for(var le=X[ee],ae=this.expandCoverage(le.coverage),be=le.alternateSets,Se=0;Se<ae.length;Se++)O.push({sub:ae[Se],by:be[Se]});return O},wn.prototype.getLigatures=function(w,C,T){for(var O=[],V=this.getLookupTables(C,T,w,4),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++)for(var le=X[ee],ae=this.expandCoverage(le.coverage),be=le.ligatureSets,Se=0;Se<ae.length;Se++)for(var we=ae[Se],fe=be[Se],Re=0;Re<fe.length;Re++){var Me=fe[Re];O.push({sub:[we].concat(Me.components),by:Me.ligGlyph})}return O},wn.prototype.addSingle=function(w,C,T,O){T=ic(this.getLookupTables(T,O,w,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),R.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format),O=C.sub,w=this.binSearch(T.coverage.glyphs,O),w<0&&(T.coverage.glyphs.splice(w=-1-w,0,O),T.substitute.splice(w,0,0)),T.substitute[w]=C.by},wn.prototype.addAlternate=function(w,C,T,O){T=ic(this.getLookupTables(T,O,w,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),R.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format),O=C.sub,w=this.binSearch(T.coverage.glyphs,O),w<0&&(T.coverage.glyphs.splice(w=-1-w,0,O),T.alternateSets.splice(w,0,0)),T.alternateSets[w]=C.by},wn.prototype.addLigature=function(q,le,ee,V){var ee=this.getLookupTables(ee,V,q,4,!0)[0],V=ee.subtables[0],q=(V||(ee.subtables[0]=V={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),R.assert(V.coverage.format===1,"Ligature: unable to modify coverage table format "+V.coverage.format),le.sub[0]),X=le.sub.slice(1),ee={ligGlyph:le.by,components:X},le=this.binSearch(V.coverage.glyphs,q);if(0<=le){for(var ae=V.ligatureSets[le],be=0;be<ae.length;be++)if(function(Se,we){var fe=Se.length;if(fe===we.length){for(var Re=0;Re<fe;Re++)if(Se[Re]!==we[Re])return;return 1}}(ae[be].components,X))return;ae.push(ee)}else V.coverage.glyphs.splice(le=-1-le,0,q),V.ligatureSets.splice(le,0,[ee])},wn.prototype.getFeature=function(w,C,T){if(/ss\d\d/.test(w))return this.getSingle(w,C,T);switch(w){case"aalt":case"salt":return this.getSingle(w,C,T).concat(this.getAlternates(w,C,T));case"dlig":case"liga":case"rlig":return this.getLigatures(w,C,T)}},wn.prototype.add=function(w,C,T,O){if(/ss\d\d/.test(w))return this.addSingle(w,C,T,O);switch(w){case"aalt":case"salt":return typeof C.by=="number"?this.addSingle(w,C,T,O):this.addAlternate(w,C,T,O);case"dlig":case"liga":case"rlig":return this.addLigature(w,C,T,O)}};var cc={getPath:uc,parse:function(w,C,T,O){for(var V=new et.GlyphSet(O),q=0;q<T.length-1;q+=1){var X=T[q];X!==T[q+1]?V.push(q,et.ttfGlyphLoader(O,q,nm,w,C+X,sm)):V.push(q,et.glyphLoader(O,q))}return V}};function dc(w){this.font=w,this.getCommands=function(C){return cc.getPath(C).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function om(w){return w}function hc(w){return Math.sign(w)*Math.round(Math.abs(w))}function im(w){return Math.sign(w)*Math.round(Math.abs(2*w))/2}function am(w){return Math.sign(w)*(Math.round(Math.abs(w)+.5)-.5)}function lm(w){return Math.sign(w)*Math.ceil(Math.abs(w))}function um(w){return Math.sign(w)*Math.floor(Math.abs(w))}function pc(w){var C=this.srPeriod,T=this.srPhase,O=1;return w<0&&(w=-w,O=-1),w+=this.srThreshold-T,w=Math.trunc(w/C)*C,(w+=T)<0?T*O:w*O}var xn={x:1,y:0,axis:"x",distance:function(w,C,T,O){return(T?w.xo:w.x)-(O?C.xo:C.x)},interpolate:function(w,C,T,O){var V,q,X,ee,le,ae,be;if(!O||O===this)return V=w.xo-C.xo,q=w.xo-T.xo,le=C.x-C.xo,ae=T.x-T.xo,(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?void(w.x=w.xo+(le+ae)/2):void(w.x=w.xo+(le*ee+ae*X)/be);V=O.distance(w,C,!0,!0),q=O.distance(w,T,!0,!0),le=O.distance(C,C,!1,!0),ae=O.distance(T,T,!1,!0),(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?xn.setRelative(w,w,(le+ae)/2,O,!0):xn.setRelative(w,w,(le*ee+ae*X)/be,O,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(w,C,T,O,V){var q,X;O&&O!==this?(q=V?C.xo:C.x,X=V?C.yo:C.y,q+=T*O.x,X+=T*O.y,w.x=q+(w.y-X)/O.normalSlope):w.x=(V?C.xo:C.x)+T},slope:0,touch:function(w){w.xTouched=!0},touched:function(w){return w.xTouched},untouch:function(w){w.xTouched=!1}},kn={x:0,y:1,axis:"y",distance:function(w,C,T,O){return(T?w.yo:w.y)-(O?C.yo:C.y)},interpolate:function(w,C,T,O){var V,q,X,ee,le,ae,be;if(!O||O===this)return V=w.yo-C.yo,q=w.yo-T.yo,le=C.y-C.yo,ae=T.y-T.yo,(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?void(w.y=w.yo+(le+ae)/2):void(w.y=w.yo+(le*ee+ae*X)/be);V=O.distance(w,C,!0,!0),q=O.distance(w,T,!0,!0),le=O.distance(C,C,!1,!0),ae=O.distance(T,T,!1,!0),(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?kn.setRelative(w,w,(le+ae)/2,O,!0):kn.setRelative(w,w,(le*ee+ae*X)/be,O,!0)},normalSlope:0,setRelative:function(w,C,T,O,V){var q,X;O&&O!==this?(q=V?C.xo:C.x,X=V?C.yo:C.y,q+=T*O.x,X+=T*O.y,w.y=X+O.normalSlope*(w.x-q)):w.y=(V?C.yo:C.y)+T},slope:Number.POSITIVE_INFINITY,touch:function(w){w.yTouched=!0},touched:function(w){return w.yTouched},untouch:function(w){w.yTouched=!1}};function Ao(w,C){this.x=w,this.y=C,this.axis=void 0,this.slope=C/w,this.normalSlope=-w/C,Object.freeze(this)}function Oo(w,C){var T=Math.sqrt(w*w+C*C);return C/=T,(w/=T)===1&&C===0?xn:w===0&&C===1?kn:new Ao(w,C)}function Tn(w,C,T,O){this.x=this.xo=Math.round(64*w)/64,this.y=this.yo=Math.round(64*C)/64,this.lastPointOfContour=T,this.onCurve=O,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(xn),Object.freeze(kn),Ao.prototype.distance=function(w,C,T,O){return this.x*xn.distance(w,C,T,O)+this.y*kn.distance(w,C,T,O)},Ao.prototype.interpolate=function(w,V,q,O){var X=O.distance(w,V,!0,!0),ee=O.distance(w,q,!0,!0),V=O.distance(V,V,!1,!0),q=O.distance(q,q,!1,!0),X=Math.abs(X),ee=Math.abs(ee),le=X+ee;le===0?this.setRelative(w,w,(V+q)/2,O,!0):this.setRelative(w,w,(V*ee+q*X)/le,O,!0)},Ao.prototype.setRelative=function(w,q,le,ae,ee){var X=ee?q.xo:q.x,ee=ee?q.yo:q.y,q=X+le*(ae=ae||this).x,X=ee+le*ae.y,ee=ae.normalSlope,le=this.slope,ae=w.x,be=w.y;w.x=(le*ae-ee*q+X-be)/(le-ee),w.y=le*(w.x-ae)+be},Ao.prototype.touch=function(w){w.xTouched=!0,w.yTouched=!0},Tn.prototype.nextTouched=function(w){for(var C=this.nextPointOnContour;!w.touched(C)&&C!==this;)C=C.nextPointOnContour;return C},Tn.prototype.prevTouched=function(w){for(var C=this.prevPointOnContour;!w.touched(C)&&C!==this;)C=C.prevPointOnContour;return C};var Ro=Object.freeze(new Tn(0,0)),cm={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Gn(w,C){switch(this.env=w,this.stack=[],this.prog=C,w){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xn,this.round=hc}}function Fi(w){for(var C=w.tZone=new Array(w.gZone.length),T=0;T<C.length;T++)C[T]=new Tn(0,0)}function fc(w,C){var T,O=w.prog,V=w.ip,q=1;do if((T=O[++V])===88)q++;else if(T===89)q--;else if(T===64)V+=O[V+1]+1;else if(T===65)V+=2*O[V+1]+1;else if(176<=T&&T<=183)V+=T-176+1;else if(184<=T&&T<=191)V+=2*(T-184+1);else if(C&&q===1&&T===27)break;while(0<q);w.ip=V}function mc(w,C){l.DEBUG&&console.log(C.step,"SVTCA["+w.axis+"]"),C.fv=C.pv=C.dpv=w}function yc(w,C){l.DEBUG&&console.log(C.step,"SPVTCA["+w.axis+"]"),C.pv=C.dpv=w}function gc(w,C){l.DEBUG&&console.log(C.step,"SFVTCA["+w.axis+"]"),C.fv=w}function vc(w,C){var T,V=C.stack,O=V.pop(),V=V.pop(),q=C.z2[O],X=C.z1[V];l.DEBUG&&console.log("SPVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),C.pv=C.dpv=Oo(T,O)}function bc(w,C){var T,V=C.stack,O=V.pop(),V=V.pop(),q=C.z2[O],X=C.z1[V];l.DEBUG&&console.log("SFVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),C.fv=Oo(T,O)}function qa(w){l.DEBUG&&console.log(w.step,"POP[]"),w.stack.pop()}function _c(w,C){var T=C.stack.pop(),O=C.z0[T],V=C.fv,q=C.pv,X=(l.DEBUG&&console.log(C.step,"MDAP["+w+"]",T),q.distance(O,Ro));w&&(X=C.round(X)),V.setRelative(O,Ro,X,q),V.touch(O),C.rp0=C.rp1=T}function wc(w,C){var T,O,V,q=C.z2,X=q.length-2;l.DEBUG&&console.log(C.step,"IUP["+w.axis+"]");for(var ee=0;ee<X;ee++)T=q[ee],w.touched(T)||(O=T.prevTouched(w))!==T&&(O===(V=T.nextTouched(w))&&w.setRelative(T,T,w.distance(O,O,!1,!0),w,!0),w.interpolate(T,O,V,w))}function xc(w,C){for(var T=C.stack,O=w?C.rp1:C.rp2,V=(w?C.z0:C.z1)[O],q=C.fv,X=C.pv,ee=C.loop,le=C.z2;ee--;){var ae=T.pop(),be=le[ae],Se=X.distance(V,V,!1,!0);q.setRelative(be,be,Se,X),q.touch(be),l.DEBUG&&console.log(C.step,(1<C.loop?"loop "+(C.loop-ee)+": ":"")+"SHP["+(w?"rp1":"rp2")+"]",ae)}C.loop=1}function jc(w,C){for(var T=C.stack,X=w?C.rp1:C.rp2,O=(w?C.z0:C.z1)[X],V=C.fv,q=C.pv,X=T.pop(),ee=C.z2[C.contours[X]],le=ee,ae=(l.DEBUG&&console.log(C.step,"SHC["+w+"]",X),q.distance(O,O,!1,!0));le!==O&&V.setRelative(le,le,ae,q),(le=le.nextPointOnContour)!==ee;);}function Cc(w,C){var T,O,ee=C.stack,V=w?C.rp1:C.rp2,V=(w?C.z0:C.z1)[V],q=C.fv,X=C.pv,ee=ee.pop();switch(l.DEBUG&&console.log(C.step,"SHZ["+w+"]",ee),ee){case 0:T=C.tZone;break;case 1:T=C.gZone;break;default:throw new Error("Invalid zone")}for(var le=X.distance(V,V,!1,!0),ae=T.length-2,be=0;be<ae;be++)O=T[be],q.setRelative(O,O,le,X)}function Ec(w,C){var O=C.stack,T=O.pop()/64,O=O.pop(),V=C.z1[O],q=C.z0[C.rp0],X=C.fv,ee=C.pv;X.setRelative(V,q,T,ee),X.touch(V),l.DEBUG&&console.log(C.step,"MSIRP["+w+"]",T,O),C.rp1=C.rp0,C.rp2=O,w&&(C.rp0=O)}function Sc(w,C){var T=C.stack,ee=T.pop(),T=T.pop(),O=C.z0[T],V=C.fv,q=C.pv,X=C.cvt[ee],ee=(l.DEBUG&&console.log(C.step,"MIAP["+w+"]",ee,"(",X,")",T),q.distance(O,Ro));w&&(Math.abs(ee-X)<C.cvCutIn&&(ee=X),ee=C.round(ee)),V.setRelative(O,Ro,ee,q),C.zp0===0&&(O.xo=O.x,O.yo=O.y),V.touch(O),C.rp0=C.rp1=T}function Pc(w,C){var T=C.stack,O=T.pop(),V=C.z2[O];l.DEBUG&&console.log(C.step,"GC["+w+"]",O),T.push(64*C.dpv.distance(V,Ro,w,!1))}function kc(w,C){var O=C.stack,T=O.pop(),O=O.pop(),V=C.z1[T],q=C.z0[O],q=C.dpv.distance(q,V,w,w);l.DEBUG&&console.log(C.step,"MD["+w+"]",T,O,"->",q),C.stack.push(Math.round(64*q))}function Ha(w,C){var T=C.stack,O=T.pop(),V=C.fv,q=C.pv,X=C.ppem,ee=C.deltaBase+16*(w-1),le=C.deltaShift,ae=C.z0;l.DEBUG&&console.log(C.step,"DELTAP["+w+"]",O,T);for(var be=0;be<O;be++){var Se=T.pop(),we=T.pop();ee+((240&we)>>4)===X&&(0<=(we=(15&we)-8)&&we++,l.DEBUG&&console.log(C.step,"DELTAPFIX",Se,"by",we*le),Se=ae[Se],V.setRelative(Se,Se,we*le,q))}}function Ni(w,C){var T=C.stack,O=T.pop();l.DEBUG&&console.log(C.step,"ROUND[]"),T.push(64*C.round(O/64))}function Wa(w,C){var T=C.stack,O=T.pop(),V=C.ppem,q=C.deltaBase+16*(w-1),X=C.deltaShift;l.DEBUG&&console.log(C.step,"DELTAC["+w+"]",O,T);for(var ee=0;ee<O;ee++){var le=T.pop(),ae=T.pop();q+((240&ae)>>4)===V&&(0<=(ae=(15&ae)-8)&&ae++,ae=ae*X,l.DEBUG&&console.log(C.step,"DELTACFIX",le,"by",ae),C.cvt[le]+=ae)}}function Tc(w,C){var T,V=C.stack,O=V.pop(),V=V.pop(),q=C.z2[O],X=C.z1[V];l.DEBUG&&console.log(C.step,"SDPVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),C.dpv=Oo(T,O)}function zn(w,C){var T=C.stack,O=C.prog,V=C.ip;l.DEBUG&&console.log(C.step,"PUSHB["+w+"]");for(var q=0;q<w;q++)T.push(O[++V]);C.ip=V}function qn(w,C){var T=C.ip,O=C.prog,V=C.stack;l.DEBUG&&console.log(C.ip,"PUSHW["+w+"]");for(var q=0;q<w;q++){var X=O[++T]<<8|O[++T];32768&X&&(X=-(1+(65535^X))),V.push(X)}C.ip=T}function tt(w,C,T,O,V,q){var X,ee,ae=q.stack,le=w&&ae.pop(),ae=ae.pop(),be=q.rp0,be=q.z0[be],Se=q.z1[ae],we=q.minDis,fe=q.fv,Re=q.dpv,Me=X=Re.distance(Se,be,!0,!0),Oe=0<=Me?1:-1;Me=Math.abs(Me),w&&(ee=q.cvt[le],O&&Math.abs(Me-ee)<q.cvCutIn&&(Me=ee)),T&&Me<we&&(Me=we),O&&(Me=q.round(Me)),fe.setRelative(Se,be,Oe*Me,Re),fe.touch(Se),l.DEBUG&&console.log(q.step,(w?"MIRP[":"MDRP[")+(C?"M":"m")+(T?">":"_")+(O?"R":"_")+(V===0?"Gr":V===1?"Bl":V===2?"Wh":"")+"]",w?le+"("+q.cvt[le]+","+ee+")":"",ae,"(d =",X,"->",Oe*Me,")"),q.rp1=q.rp0,q.rp2=ae,C&&(q.rp0=ae)}dc.prototype.exec=function(w,C){if(typeof C!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var T=this.font,O=this._prepState;if(!O||O.ppem!==C){var V=this._fpgmState;if(!V){Gn.prototype=cm,(V=this._fpgmState=new Gn("fpgm",T.tables.fpgm)).funcs=[],V.font=T,l.DEBUG&&(console.log("---EXEC FPGM---"),V.step=-1);try{Gs(V)}catch(ae){return console.log("Hinting error in FPGM:"+ae),void(this._errorState=3)}}Gn.prototype=V,(O=this._prepState=new Gn("prep",T.tables.prep)).ppem=C;var q=T.tables.cvt;if(q)for(var X=O.cvt=new Array(q.length),ee=C/T.unitsPerEm,le=0;le<q.length;le++)X[le]=q[le]*ee;else O.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),O.step=-1);try{Gs(O)}catch(ae){this._errorState<2&&console.log("Hinting error in PREP:"+ae),this._errorState=2}}if(!(1<this._errorState))try{return dm(w,O)}catch(ae){this._errorState<1&&(console.log("Hinting error:"+ae),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var dm=function(w,C){var T=C.ppem/C.font.unitsPerEm,O=T,V=w.components;if(Gn.prototype=C,V){for(var q=C.font,X=[],ee=[],le=0;le<V.length;le++){var ae=V[le],be=q.glyphs.get(ae.glyphIndex),Se=new Gn("glyf",be.instructions);l.DEBUG&&(console.log("---EXEC COMP "+le+"---"),Se.step=-1),Mc(be,Se,T,O);for(var we=Math.round(ae.dx*T),fe=Math.round(ae.dy*O),Re=Se.gZone,Me=Se.contours,Oe=0;Oe<Re.length;Oe++){var Pe=Re[Oe];Pe.xTouched=Pe.yTouched=!1,Pe.xo=Pe.x=Pe.x+we,Pe.yo=Pe.y=Pe.y+fe}var ke=X.length;X.push.apply(X,Re);for(var rt=0;rt<Me.length;rt++)ee.push(Me[rt]+ke)}w.instructions&&!Se.inhibitGridFit&&((Se=new Gn("glyf",w.instructions)).gZone=Se.z0=Se.z1=Se.z2=X,Se.contours=ee,X.push(new Tn(0,0),new Tn(Math.round(w.advanceWidth*T),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),Se.step=-1),Gs(Se),X.length-=2)}else Se=new Gn("glyf",w.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),Se.step=-1),Mc(w,Se,T,O),X=Se.gZone;return X},Mc=function(w,C,T,O){for(var V,q,X,ee=w.points||[],le=ee.length,ae=C.gZone=C.z0=C.z1=C.z2=[],be=C.contours=[],Se=0;Se<le;Se++)V=ee[Se],ae[Se]=new Tn(V.x*T,V.y*O,V.lastPointOfContour,V.onCurve);for(var we=0;we<le;we++)V=ae[we],q||(q=V,be.push(we)),V.lastPointOfContour?((V.nextPointOnContour=q).prevPointOnContour=V,q=void 0):(X=ae[we+1],(V.nextPointOnContour=X).prevPointOnContour=V);if(!C.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",C.stack);for(var fe=0;fe<le;fe++)console.log(fe,ae[fe].x,ae[fe].y)}if(ae.push(new Tn(0,0),new Tn(Math.round(w.advanceWidth*T),0)),Gs(C),ae.length-=2,l.DEBUG){console.log("FINISHED GLYPH",C.stack);for(var Re=0;Re<le;Re++)console.log(Re,ae[Re].x,ae[Re].y)}}},Gs=function(w){var C=w.prog;if(C){var T,O=C.length;for(w.ip=0;w.ip<O;w.ip++){if(l.DEBUG&&w.step++,!(T=hm[C[w.ip]]))throw new Error("unknown instruction: 0x"+Number(C[w.ip]).toString(16));T(w)}}},hm=[mc.bind(void 0,kn),mc.bind(void 0,xn),yc.bind(void 0,kn),yc.bind(void 0,xn),gc.bind(void 0,kn),gc.bind(void 0,xn),vc.bind(void 0,0),vc.bind(void 0,1),bc.bind(void 0,0),bc.bind(void 0,1),function(w){var C=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"SPVFS[]",C,T),w.pv=w.dpv=Oo(T,C)},function(w){var C=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"SPVFS[]",C,T),w.fv=Oo(T,C)},function(w){var C=w.stack,T=w.pv;l.DEBUG&&console.log(w.step,"GPV[]"),C.push(16384*T.x),C.push(16384*T.y)},function(w){var C=w.stack,T=w.fv;l.DEBUG&&console.log(w.step,"GFV[]"),C.push(16384*T.x),C.push(16384*T.y)},function(w){w.fv=w.pv,l.DEBUG&&console.log(w.step,"SFVTPV[]")},function(C){var T=(X=C.stack).pop(),O=X.pop(),V=X.pop(),q=X.pop(),X=X.pop(),le=C.z0,be=C.z1,ee=le[T],le=le[O],ae=be[V],be=be[q],C=C.z2[X],T=(l.DEBUG&&console.log("ISECT[], ",T,O,V,q,X),ee.x),O=ee.y,V=le.x,q=le.y,X=ae.x,ee=ae.y,le=be.x,ae=be.y,be=(T-V)*(ee-ae)-(O-q)*(X-le),Se=T*q-O*V,we=X*ae-ee*le;C.x=(Se*(X-le)-we*(T-V))/be,C.y=(Se*(ee-ae)-we*(O-q))/be},function(w){w.rp0=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP0[]",w.rp0)},function(w){w.rp1=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP1[]",w.rp1)},function(w){w.rp2=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP2[]",w.rp2)},function(w){var C=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP0[]",C),w.zp0=C){case 0:w.tZone||Fi(w),w.z0=w.tZone;break;case 1:w.z0=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var C=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP1[]",C),w.zp1=C){case 0:w.tZone||Fi(w),w.z1=w.tZone;break;case 1:w.z1=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var C=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP2[]",C),w.zp2=C){case 0:w.tZone||Fi(w),w.z2=w.tZone;break;case 1:w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var C=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZPS[]",C),w.zp0=w.zp1=w.zp2=C){case 0:w.tZone||Fi(w),w.z0=w.z1=w.z2=w.tZone;break;case 1:w.z0=w.z1=w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){w.loop=w.stack.pop(),l.DEBUG&&console.log(w.step,"SLOOP[]",w.loop)},function(w){l.DEBUG&&console.log(w.step,"RTG[]"),w.round=hc},function(w){l.DEBUG&&console.log(w.step,"RTHG[]"),w.round=am},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SMD[]",C),w.minDis=C/64},function(w){l.DEBUG&&console.log(w.step,"ELSE[]"),fc(w,!1)},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"JMPR[]",C),w.ip+=C-1},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SCVTCI[]",C),w.cvCutIn=C/64},void 0,void 0,function(w){var C=w.stack;l.DEBUG&&console.log(w.step,"DUP[]"),C.push(C[C.length-1])},qa,function(w){l.DEBUG&&console.log(w.step,"CLEAR[]"),w.stack.length=0},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"SWAP[]"),C.push(T),C.push(O)},function(w){var C=w.stack;l.DEBUG&&console.log(w.step,"DEPTH[]"),C.push(C.length)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"CINDEX[]",T),C.push(C[C.length-T])},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"MINDEX[]",T),C.push(C.splice(C.length-T,1)[0])},void 0,void 0,void 0,function(w){var C=(O=w.stack).pop(),T=O.pop(),O=(l.DEBUG&&console.log(w.step,"LOOPCALL[]",C,T),w.ip),V=w.prog;w.prog=w.funcs[C];for(var q=0;q<T;q++)Gs(w),l.DEBUG&&console.log(++w.step,q+1<T?"next loopcall":"done loopcall",q);w.ip=O,w.prog=V},function(w){var C=w.stack.pop(),T=(l.DEBUG&&console.log(w.step,"CALL[]",C),w.ip),O=w.prog;w.prog=w.funcs[C],Gs(w),w.ip=T,w.prog=O,l.DEBUG&&console.log(++w.step,"returning from",C)},function(w){if(w.env!=="fpgm")throw new Error("FDEF not allowed here");var O=w.stack,C=w.prog,T=w.ip,O=O.pop(),V=T;for(l.DEBUG&&console.log(w.step,"FDEF[]",O);C[++T]!==45;);w.ip=T,w.funcs[O]=C.slice(V+1,T)},void 0,_c.bind(void 0,0),_c.bind(void 0,1),wc.bind(void 0,kn),wc.bind(void 0,xn),xc.bind(void 0,0),xc.bind(void 0,1),jc.bind(void 0,0),jc.bind(void 0,1),Cc.bind(void 0,0),Cc.bind(void 0,1),function(w){for(var C=w.stack,T=w.loop,O=w.fv,V=C.pop()/64,q=w.z2;T--;){var X=C.pop(),ee=q[X];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-T)+": ":"")+"SHPIX[]",X,V),O.setRelative(ee,ee,V),O.touch(ee)}w.loop=1},function(w){for(var C=w.stack,T=w.rp1,O=w.rp2,V=w.loop,q=w.z0[T],X=w.z1[O],ee=w.fv,le=w.dpv,ae=w.z2;V--;){var be=C.pop(),Se=ae[be];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-V)+": ":"")+"IP[]",be,T,"<->",O),ee.interpolate(Se,q,X,le),ee.touch(Se)}w.loop=1},Ec.bind(void 0,0),Ec.bind(void 0,1),function(w){for(var C=w.stack,T=w.rp0,O=w.z0[T],V=w.loop,q=w.fv,X=w.pv,ee=w.z1;V--;){var le=C.pop(),ae=ee[le];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-V)+": ":"")+"ALIGNRP[]",le),q.setRelative(ae,O,0,X),q.touch(ae)}w.loop=1},function(w){l.DEBUG&&console.log(w.step,"RTDG[]"),w.round=im},Sc.bind(void 0,0),Sc.bind(void 0,1),function(w){var C=w.prog,T=w.ip,O=w.stack,V=C[++T];l.DEBUG&&console.log(w.step,"NPUSHB[]",V);for(var q=0;q<V;q++)O.push(C[++T]);w.ip=T},function(w){var C=w.ip,T=w.prog,O=w.stack,V=T[++C];l.DEBUG&&console.log(w.step,"NPUSHW[]",V);for(var q=0;q<V;q++){var X=T[++C]<<8|T[++C];32768&X&&(X=-(1+(65535^X))),O.push(X)}w.ip=C},function(w){var O=w.stack,C=(C=w.store)||(w.store=[]),T=O.pop(),O=O.pop();l.DEBUG&&console.log(w.step,"WS",T,O),C[O]=T},function(V){var C=V.stack,T=V.store,O=C.pop(),V=(l.DEBUG&&console.log(V.step,"RS",O),T&&T[O]||0);C.push(V)},function(w){var C=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"WCVTP",C,T),w.cvt[T]=C/64},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"RCVT",T),C.push(64*w.cvt[T])},Pc.bind(void 0,0),Pc.bind(void 0,1),void 0,kc.bind(void 0,0),kc.bind(void 0,1),function(w){l.DEBUG&&console.log(w.step,"MPPEM[]"),w.stack.push(w.ppem)},void 0,function(w){l.DEBUG&&console.log(w.step,"FLIPON[]"),w.autoFlip=!0},void 0,void 0,function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"LT[]",T,O),C.push(O<T?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"LTEQ[]",T,O),C.push(O<=T?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"GT[]",T,O),C.push(T<O?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"GTEQ[]",T,O),C.push(T<=O?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"EQ[]",T,O),C.push(T===O?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"NEQ[]",T,O),C.push(T!==O?1:0)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"ODD[]",T),C.push(Math.trunc(T)%2?1:0)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"EVEN[]",T),C.push(Math.trunc(T)%2?0:1)},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"IF[]",C),C||(fc(w,!0),l.DEBUG&&console.log(w.step,"EIF[]"))},function(w){l.DEBUG&&console.log(w.step,"EIF[]")},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"AND[]",T,O),C.push(T&&O?1:0)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"OR[]",T,O),C.push(T||O?1:0)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"NOT[]",T),C.push(T?0:1)},Ha.bind(void 0,1),function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SDB[]",C),w.deltaBase=C},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SDS[]",C),w.deltaShift=Math.pow(.5,C)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"ADD[]",T,O),C.push(O+T)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"SUB[]",T,O),C.push(O-T)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"DIV[]",T,O),C.push(64*O/T)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"MUL[]",T,O),C.push(O*T/64)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"ABS[]",T),C.push(Math.abs(T))},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"NEG[]",T),C.push(-T)},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"FLOOR[]",T),C.push(64*Math.floor(T/64))},function(w){var C=w.stack,T=C.pop();l.DEBUG&&console.log(w.step,"CEILING[]",T),C.push(64*Math.ceil(T/64))},Ni.bind(void 0,0),Ni.bind(void 0,1),Ni.bind(void 0,2),Ni.bind(void 0,3),void 0,void 0,void 0,void 0,function(w){var C=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"WCVTF[]",C,T),w.cvt[T]=C*w.ppem/w.font.unitsPerEm},Ha.bind(void 0,2),Ha.bind(void 0,3),Wa.bind(void 0,1),Wa.bind(void 0,2),Wa.bind(void 0,3),function(w){var C,T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SROUND[]",T),w.round=pc,192&T){case 0:C=.5;break;case 64:C=1;break;case 128:C=2;break;default:throw new Error("invalid SROUND value")}switch(w.srPeriod=C,48&T){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*C;break;case 32:w.srPhase=.5*C;break;case 48:w.srPhase=.75*C;break;default:throw new Error("invalid SROUND value")}w.srThreshold=(T&=15)===0?0:(T/8-.5)*C},function(w){var C,T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"S45ROUND[]",T),w.round=pc,192&T){case 0:C=Math.sqrt(2)/2;break;case 64:C=Math.sqrt(2);break;case 128:C=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(w.srPeriod=C,48&T){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*C;break;case 32:w.srPhase=.5*C;break;case 48:w.srPhase=.75*C;break;default:throw new Error("invalid S45ROUND value")}w.srThreshold=(T&=15)===0?0:(T/8-.5)*C},void 0,void 0,function(w){l.DEBUG&&console.log(w.step,"ROFF[]"),w.round=om},void 0,function(w){l.DEBUG&&console.log(w.step,"RUTG[]"),w.round=lm},function(w){l.DEBUG&&console.log(w.step,"RDTG[]"),w.round=um},qa,qa,void 0,void 0,void 0,void 0,void 0,function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SCANCTRL[]",C)},Tc.bind(void 0,0),Tc.bind(void 0,1),function(w){var C=w.stack,T=C.pop(),O=0;l.DEBUG&&console.log(w.step,"GETINFO[]",T),1&T&&(O=35),32&T&&(O|=4096),C.push(O)},void 0,function(w){var C=w.stack,T=C.pop(),O=C.pop(),V=C.pop();l.DEBUG&&console.log(w.step,"ROLL[]"),C.push(O),C.push(T),C.push(V)},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"MAX[]",T,O),C.push(Math.max(O,T))},function(w){var C=w.stack,T=C.pop(),O=C.pop();l.DEBUG&&console.log(w.step,"MIN[]",T,O),C.push(Math.min(O,T))},function(w){var C=w.stack.pop();l.DEBUG&&console.log(w.step,"SCANTYPE[]",C)},function(w){var C=w.stack.pop(),T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"INSTCTRL[]",C,T),C){case 1:return void(w.inhibitGridFit=!!T);case 2:return void(w.ignoreCvt=!!T);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,zn.bind(void 0,1),zn.bind(void 0,2),zn.bind(void 0,3),zn.bind(void 0,4),zn.bind(void 0,5),zn.bind(void 0,6),zn.bind(void 0,7),zn.bind(void 0,8),qn.bind(void 0,1),qn.bind(void 0,2),qn.bind(void 0,3),qn.bind(void 0,4),qn.bind(void 0,5),qn.bind(void 0,6),qn.bind(void 0,7),qn.bind(void 0,8),tt.bind(void 0,0,0,0,0,0),tt.bind(void 0,0,0,0,0,1),tt.bind(void 0,0,0,0,0,2),tt.bind(void 0,0,0,0,0,3),tt.bind(void 0,0,0,0,1,0),tt.bind(void 0,0,0,0,1,1),tt.bind(void 0,0,0,0,1,2),tt.bind(void 0,0,0,0,1,3),tt.bind(void 0,0,0,1,0,0),tt.bind(void 0,0,0,1,0,1),tt.bind(void 0,0,0,1,0,2),tt.bind(void 0,0,0,1,0,3),tt.bind(void 0,0,0,1,1,0),tt.bind(void 0,0,0,1,1,1),tt.bind(void 0,0,0,1,1,2),tt.bind(void 0,0,0,1,1,3),tt.bind(void 0,0,1,0,0,0),tt.bind(void 0,0,1,0,0,1),tt.bind(void 0,0,1,0,0,2),tt.bind(void 0,0,1,0,0,3),tt.bind(void 0,0,1,0,1,0),tt.bind(void 0,0,1,0,1,1),tt.bind(void 0,0,1,0,1,2),tt.bind(void 0,0,1,0,1,3),tt.bind(void 0,0,1,1,0,0),tt.bind(void 0,0,1,1,0,1),tt.bind(void 0,0,1,1,0,2),tt.bind(void 0,0,1,1,0,3),tt.bind(void 0,0,1,1,1,0),tt.bind(void 0,0,1,1,1,1),tt.bind(void 0,0,1,1,1,2),tt.bind(void 0,0,1,1,1,3),tt.bind(void 0,1,0,0,0,0),tt.bind(void 0,1,0,0,0,1),tt.bind(void 0,1,0,0,0,2),tt.bind(void 0,1,0,0,0,3),tt.bind(void 0,1,0,0,1,0),tt.bind(void 0,1,0,0,1,1),tt.bind(void 0,1,0,0,1,2),tt.bind(void 0,1,0,0,1,3),tt.bind(void 0,1,0,1,0,0),tt.bind(void 0,1,0,1,0,1),tt.bind(void 0,1,0,1,0,2),tt.bind(void 0,1,0,1,0,3),tt.bind(void 0,1,0,1,1,0),tt.bind(void 0,1,0,1,1,1),tt.bind(void 0,1,0,1,1,2),tt.bind(void 0,1,0,1,1,3),tt.bind(void 0,1,1,0,0,0),tt.bind(void 0,1,1,0,0,1),tt.bind(void 0,1,1,0,0,2),tt.bind(void 0,1,1,0,0,3),tt.bind(void 0,1,1,0,1,0),tt.bind(void 0,1,1,0,1,1),tt.bind(void 0,1,1,0,1,2),tt.bind(void 0,1,1,0,1,3),tt.bind(void 0,1,1,1,0,0),tt.bind(void 0,1,1,1,0,1),tt.bind(void 0,1,1,1,0,2),tt.bind(void 0,1,1,1,0,3),tt.bind(void 0,1,1,1,1,0),tt.bind(void 0,1,1,1,1,1),tt.bind(void 0,1,1,1,1,2),tt.bind(void 0,1,1,1,1,3)],pm=Array.from||function(w){return w.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Bt(w){(w=w||{}).empty||(Us(w.familyName,"When creating a new Font object, familyName is required."),Us(w.styleName,"When creating a new Font object, styleName is required."),Us(w.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Us(w.ascender,"When creating a new Font object, ascender is required."),Us(w.descender,"When creating a new Font object, descender is required."),Us(w.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:w.familyName||" "},fontSubfamily:{en:w.styleName||" "},fullName:{en:w.fullName||w.familyName+" "+w.styleName},postScriptName:{en:w.postScriptName||(w.familyName+w.styleName).replace(/\s/g,"")},designer:{en:w.designer||" "},designerURL:{en:w.designerURL||" "},manufacturer:{en:w.manufacturer||" "},manufacturerURL:{en:w.manufacturerURL||" "},license:{en:w.license||" "},licenseURL:{en:w.licenseURL||" "},version:{en:w.version||"Version 0.1"},description:{en:w.description||" "},copyright:{en:w.copyright||" "},trademark:{en:w.trademark||" "}},this.unitsPerEm=w.unitsPerEm||1e3,this.ascender=w.ascender,this.descender=w.descender,this.createdTimestamp=w.createdTimestamp,this.tables={os2:{usWeightClass:w.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:w.widthClass||this.usWidthClasses.MEDIUM,fsSelection:w.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new et.GlyphSet(this,w.glyphs||[]),this.encoding=new je(this),this.position=new Ii(this),this.substitution=new wn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new dc(this):void 0)}})}function Lc(w,C){var T,O=JSON.stringify(w),V=256;for(T in C){var q=parseInt(T);if(q&&!(q<256)){if(JSON.stringify(C[T])===O)return q;V<=q&&(V=q+1)}}return C[V]=w,V}Bt.prototype.hasChar=function(w){return this.encoding.charToGlyphIndex(w)!==null},Bt.prototype.charToGlyphIndex=function(w){return this.encoding.charToGlyphIndex(w)},Bt.prototype.charToGlyph=function(w){return w=this.charToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Bt.prototype.stringToGlyphs=function(w,C){C=C||this.defaultRenderOptions;for(var T=pm(w),O=[],V=0;V<T.length;V+=1){var q=T[V];O.push(this.charToGlyphIndex(q))}var X=O.length;if(C.features){var w=C.script||this.substitution.getDefaultScriptName(),ee=[];C.features.liga&&(ee=ee.concat(this.substitution.getFeature("liga",w,C.language))),C.features.rlig&&(ee=ee.concat(this.substitution.getFeature("rlig",w,C.language)));for(var le=0;le<X;le+=1)for(var ae=0;ae<ee.length;ae++){for(var be=ee[ae],Se=be.sub,we=Se.length,fe=0;fe<we&&Se[fe]===O[le+fe];)fe++;fe===we&&(O.splice(le,we,be.by),X=X-we+1)}}for(var Re=new Array(X),Me=this.glyphs.get(0),Oe=0;Oe<X;Oe+=1)Re[Oe]=this.glyphs.get(O[Oe])||Me;return Re},Bt.prototype.nameToGlyphIndex=function(w){return this.glyphNames.nameToGlyphIndex(w)},Bt.prototype.nameToGlyph=function(w){return w=this.nameToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Bt.prototype.glyphIndexToName=function(w){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(w):""},Bt.prototype.getKerningValue=function(w,C){w=w.index||w,C=C.index||C;var T=this.position.defaultKerningTables;return T?this.position.getKerningValue(T,w,C):this.kerningPairs[w+","+C]||0},Bt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Bt.prototype.forEachGlyph=function(w,C,T,O,V,q){C=C!==void 0?C:0,T=T!==void 0?T:0,V=V||this.defaultRenderOptions;var X,ee=1/this.unitsPerEm*(O=O!==void 0?O:72),le=this.stringToGlyphs(w,V);V.kerning&&(w=V.script||this.position.getDefaultScriptName(),X=this.position.getKerningTables(w,V.language));for(var ae=0;ae<le.length;ae+=1){var be=le[ae];q.call(this,be,C,T,O,V),be.advanceWidth&&(C+=be.advanceWidth*ee),V.kerning&&ae<le.length-1&&(C+=(X?this.position.getKerningValue(X,be.index,le[ae+1].index):this.getKerningValue(be,le[ae+1]))*ee),V.letterSpacing?C+=V.letterSpacing*O:V.tracking&&(C+=V.tracking/1e3*O)}return C},Bt.prototype.getPath=function(w,C,T,O,V){var q=new $;return this.forEachGlyph(w,C,T,O,V,function(X,ee,le,ae){X=X.getPath(ee,le,ae,V,this),q.extend(X)}),q},Bt.prototype.getPaths=function(w,C,T,O,V){var q=[];return this.forEachGlyph(w,C,T,O,V,function(X,ee,le,ae){X=X.getPath(ee,le,ae,V,this),q.push(X)}),q},Bt.prototype.getAdvanceWidth=function(w,C,T){return this.forEachGlyph(w,0,0,C,T,function(){})},Bt.prototype.draw=function(w,C,T,O,V,q){this.getPath(C,T,O,V,q).draw(w)},Bt.prototype.drawPoints=function(w,C,T,O,V,q){this.forEachGlyph(C,T,O,V,q,function(X,ee,le,ae){X.drawPoints(w,ee,le,ae)})},Bt.prototype.drawMetrics=function(w,C,T,O,V,q){this.forEachGlyph(C,T,O,V,q,function(X,ee,le,ae){X.drawMetrics(w,ee,le,ae)})},Bt.prototype.getEnglishName=function(w){if(w=this.names[w],w)return w.en},Bt.prototype.validate=function(){var w=this;function C(T){T=w.getEnglishName(T),T&&T.trim().length}C("fontFamily"),C("weightName"),C("manufacturer"),C("copyright"),C("version"),this.unitsPerEm},Bt.prototype.toTables=function(){return rm.fontToTable(this)},Bt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Bt.prototype.toArrayBuffer=function(){for(var w=this.toTables().encode(),C=new ArrayBuffer(w.length),T=new Uint8Array(C),O=0;O<w.length;O++)T[O]=w[O];return C},Bt.prototype.download=function(w){var C=this.getEnglishName("fontFamily"),T=this.getEnglishName("fontSubfamily"),O=(w=w||C.replace(/\s/g,"")+"-"+T+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,O.byteLength,function(V){V.root.getFile(w,{create:!0},function(q){q.createWriter(function(X){var ee=new DataView(O),ee=new Blob([ee],{type:"font/opentype"});X.write(ee),X.addEventListener("writeend",function(){location.href=q.toURL()},!1)})})},function(V){throw new Error(V.name+": "+V.message)})):(C=r("fs"),T=function(V){for(var q=new o(V.byteLength),X=new Uint8Array(V),ee=0;ee<q.length;++ee)q[ee]=X[ee];return q}(O),C.writeFileSync(w,T))},Bt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Bt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Bt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fm={make:function(w,C){var T=new Te.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:w.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:w.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*w.axes.length}]);T.offsetToData=T.sizeOf();for(var O,V,q,X=0;X<w.axes.length;X++)T.fields=T.fields.concat((O=X,V=w.axes[X],q=C,q=Lc(V.name,C),[{name:"tag_"+O,type:"TAG",value:V.tag},{name:"minValue_"+O,type:"FIXED",value:V.minValue<<16},{name:"defaultValue_"+O,type:"FIXED",value:V.defaultValue<<16},{name:"maxValue_"+O,type:"FIXED",value:V.maxValue<<16},{name:"flags_"+O,type:"USHORT",value:0},{name:"nameID_"+O,type:"USHORT",value:q}]));for(var ee=0;ee<w.instances.length;ee++)T.fields=T.fields.concat(function(le,ae,be,Se){for(var we=[{name:"nameID_"+le,type:"USHORT",value:Lc(ae.name,Se)},{name:"flags_"+le,type:"USHORT",value:0}],fe=0;fe<be.length;++fe){var Re=be[fe].tag;we.push({name:"axis_"+le+" "+Re,type:"FIXED",value:ae.coordinates[Re]<<16})}return we}(ee,w.instances[ee],w.axes,C));return T},parse:function(w,C,T){for(var O,V,q,X,ee=new xe.Parser(w,C),le=ee.parseULong(),ae=(R.argument(le===65536,"Unsupported fvar table version."),ee.parseOffset16()),be=(ee.skip("uShort",1),ee.parseUShort()),Se=ee.parseUShort(),we=ee.parseUShort(),fe=ee.parseUShort(),Re=[],Me=0;Me<be;Me++)Re.push((O=w,V=C+ae+Me*Se,q=T,X={},O=new xe.Parser(O,V),X.tag=O.parseTag(),X.minValue=O.parseFixed(),X.defaultValue=O.parseFixed(),X.maxValue=O.parseFixed(),O.skip("uShort",1),X.name=q[O.parseUShort()]||{},X));for(var Oe=[],Pe=C+ae+be*Se,ke=0;ke<we;ke++)Oe.push(function(rt,yt,nt,st){var wt={},qt=new xe.Parser(rt,yt);wt.name=st[qt.parseUShort()]||{},qt.skip("uShort",1),wt.coordinates={};for(var sr=0;sr<nt.length;++sr)wt.coordinates[nt[sr].tag]=qt.parseFixed();return wt}(w,Pe+ke*fe,Re,T));return{axes:Re,instances:Oe}}},pn=new Array(10);pn[1]=function(){var w=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{posFormat:1,coverage:this.parsePointer(ce.coverage),value:this.parseValueRecord()}:C===2?{posFormat:2,coverage:this.parsePointer(ce.coverage),values:this.parseValueRecordList()}:void R.assert(!1,"0x"+w.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},pn[2]=function(){var w,C,T,O,q=this.offset+this.relativeOffset,V=this.parseUShort(),q=(R.assert(V===1||V===2,"0x"+q.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(ce.coverage)),X=this.parseUShort(),ee=this.parseUShort();return V===1?{posFormat:V,coverage:q,valueFormat1:X,valueFormat2:ee,pairSets:this.parseList(ce.pointer(ce.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(X),value2:this.parseValueRecord(ee)}})))}:V===2?(w=this.parsePointer(ce.classDef),C=this.parsePointer(ce.classDef),T=this.parseUShort(),O=this.parseUShort(),{posFormat:V,coverage:q,valueFormat1:X,valueFormat2:ee,classDef1:w,classDef2:C,class1Count:T,class2Count:O,classRecords:this.parseList(T,ce.list(O,function(){return{value1:this.parseValueRecord(X),value2:this.parseValueRecord(ee)}}))}):void 0},pn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},pn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},pn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},pn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},pn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},pn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},pn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var mm=new Array(10),ym={parse:function(w,C){return C=(w=new ce(w,C=C||0)).parseVersion(1),R.argument(C===1||C===1.1,"Unsupported GPOS table version "+C),C===1?{version:C,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(pn)}:{version:C,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(pn),variations:w.parseFeatureVariationsList()}},make:function(w){return new Te.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(w.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(w.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(w.lookups,mm)}])}},gm={parse:function(w,C){if(w=new xe.Parser(w,C),(C=w.parseUShort())===0){var T=w,O={},Se=(T.skip("uShort"),T.parseUShort()),V=(R.argument(Se===0,"Unsupported kern sub-table version."),T.skip("uShort",2),T.parseUShort());T.skip("uShort",3);for(var q=0;q<V;q+=1){var X=T.parseUShort(),ee=T.parseUShort(),le=T.parseShort();O[X+","+ee]=le}return O}if(C!==1)throw new Error("Unsupported kern table version ("+C+").");var ae=w,be={},Se=(ae.skip("uShort"),1<ae.parseULong()&&console.warn("Only the first kern subtable is supported."),ae.skip("uLong"),255&ae.parseUShort());if(ae.skip("uShort"),Se==0){var we=ae.parseUShort();ae.skip("uShort",3);for(var fe=0;fe<we;fe+=1){var Re=ae.parseUShort(),Me=ae.parseUShort(),Oe=ae.parseShort();be[Re+","+Me]=Oe}}return be}},vm={parse:function(w,C,T,O){for(var V=new xe.Parser(w,C),q=O?V.parseUShort:V.parseULong,X=[],ee=0;ee<T+1;ee+=1){var le=q.call(V);O&&(le*=2),X.push(le)}return X}};function bm(w,C){r("fs").readFile(w,function(T,O){if(T)return C(T.message);C(null,ac(O))})}function _m(w,C){var T=new XMLHttpRequest;T.open("get",w,!0),T.responseType="arraybuffer",T.onload=function(){return T.response?C(null,T.response):C("Font could not be loaded: "+T.statusText)},T.onerror=function(){C("Font could not be loaded")},T.send()}function Ac(w,C){for(var T=[],O=12,V=0;V<C;V+=1){var q=xe.getTag(w,O),X=xe.getULong(w,O+4),ee=xe.getULong(w,O+8),le=xe.getULong(w,O+12);T.push({tag:q,checksum:X,offset:ee,length:le,compression:!1}),O+=16}return T}function hr(T,C){if(C.compression!=="WOFF")return{data:T,offset:C.offset};var T=new Uint8Array(T.buffer,C.offset+2,C.compressedLength-2),O=new Uint8Array(C.length);if(G(T,O),O.byteLength!==C.length)throw new Error("Decompression error: "+C.tag+" decompressed length doesn't match recorded length");return{data:new DataView(O.buffer,0),offset:0}}function Xa(ke){var C,T,O,V,q,X,ee,le,ae,be,Se,we,fe,Re,Me=new Bt({empty:!0}),Oe=new DataView(ke,0),Pe=[],ke=xe.getTag(Oe,0);if(ke==="\0\0\0"||ke==="true"||ke==="typ1")Me.outlinesFormat="truetype",Pe=Ac(Oe,O=xe.getUShort(Oe,4));else if(ke==="OTTO")Me.outlinesFormat="cff",Pe=Ac(Oe,O=xe.getUShort(Oe,4));else{if(ke!=="wOFF")throw new Error("Unsupported OpenType signature "+ke);var rt=xe.getTag(Oe,4);if(rt==="\0\0\0")Me.outlinesFormat="truetype";else{if(rt!=="OTTO")throw new Error("Unsupported OpenType flavor "+ke);Me.outlinesFormat="cff"}Pe=function(Xt,Ft){for(var Lr=[],tr=44,Pr=0;Pr<Ft;Pr+=1){var Yt=xe.getTag(Xt,tr),Cr=xe.getULong(Xt,tr+4),Do=xe.getULong(Xt,tr+8),zs=xe.getULong(Xt,tr+12),Oc=void 0,Oc=Do<zs&&"WOFF";Lr.push({tag:Yt,offset:Cr,compression:Oc,compressedLength:Do,length:zs}),tr+=20}return Lr}(Oe,O=xe.getUShort(Oe,12))}for(var yt=0;yt<O;yt+=1){var nt=Pe[yt],st=void 0;switch(nt.tag){case"cmap":st=hr(Oe,nt),Me.tables.cmap=Q.parse(st.data,st.offset),Me.encoding=new Le(Me.tables.cmap);break;case"cvt ":st=hr(Oe,nt),Re=new xe.Parser(st.data,st.offset),Me.tables.cvt=Re.parseShortList(nt.length/2);break;case"fvar":q=nt;break;case"fpgm":st=hr(Oe,nt),Re=new xe.Parser(st.data,st.offset),Me.tables.fpgm=Re.parseByteList(nt.length);break;case"head":st=hr(Oe,nt),Me.tables.head=Lo.parse(st.data,st.offset),Me.unitsPerEm=Me.tables.head.unitsPerEm,C=Me.tables.head.indexToLocFormat;break;case"hhea":st=hr(Oe,nt),Me.tables.hhea=me.parse(st.data,st.offset),Me.ascender=Me.tables.hhea.ascender,Me.descender=Me.tables.hhea.descender,Me.numberOfHMetrics=Me.tables.hhea.numberOfHMetrics;break;case"hmtx":ae=nt;break;case"ltag":st=hr(Oe,nt),T=Ze.parse(st.data,st.offset);break;case"maxp":st=hr(Oe,nt),Me.tables.maxp=Fe.parse(st.data,st.offset),Me.numGlyphs=Me.tables.maxp.numGlyphs;break;case"name":we=nt;break;case"OS/2":st=hr(Oe,nt),Me.tables.os2=jr.parse(st.data,st.offset);break;case"post":st=hr(Oe,nt),Me.tables.post=Zu.parse(st.data,st.offset),Me.glyphNames=new Be(Me.tables.post);break;case"prep":st=hr(Oe,nt),Re=new xe.Parser(st.data,st.offset),Me.tables.prep=Re.parseByteList(nt.length);break;case"glyf":X=nt;break;case"loca":Se=nt;break;case"CFF ":V=nt;break;case"kern":be=nt;break;case"GPOS":ee=nt;break;case"GSUB":le=nt;break;case"meta":fe=nt}}if(rt=hr(Oe,we),Me.tables.name=Xr.parse(rt.data,rt.offset,T),Me.names=Me.tables.name,X&&Se)ke=C===0,rt=hr(Oe,Se),rt=vm.parse(rt.data,rt.offset,Me.numGlyphs,ke),ke=hr(Oe,X),Me.glyphs=cc.parse(ke.data,ke.offset,rt,Me);else{if(!V)throw new Error("Font doesn't contain TrueType or CFF outlines.");ke=hr(Oe,V),Mo.parse(ke.data,ke.offset,Me)}for(var rt=hr(Oe,ae),wt=(Ve.parse(rt.data,rt.offset,Me.numberOfHMetrics,Me.numGlyphs,Me.glyphs),Me),qt=wt.tables.cmap.glyphIndexMap,sr=Object.keys(qt),pr=0;pr<sr.length;pr+=1){var Tr,Mr=sr[pr],fn=qt[Mr];(Tr=wt.glyphs.get(fn)).addUnicode(parseInt(Mr))}for(var Ut=0;Ut<wt.glyphs.length;Ut+=1)Tr=wt.glyphs.get(Ut),wt.cffEncoding?wt.isCIDFont?Tr.name="gid"+Ut:Tr.name=wt.cffEncoding.charset[Ut]:wt.glyphNames.names&&(Tr.name=wt.glyphNames.glyphIndexToName(Ut));return be?(ke=hr(Oe,be),Me.kerningPairs=gm.parse(ke.data,ke.offset)):Me.kerningPairs={},ee&&(rt=hr(Oe,ee),Me.tables.gpos=ym.parse(rt.data,rt.offset),Me.position.init()),le&&(ke=hr(Oe,le),Me.tables.gsub=Qu.parse(ke.data,ke.offset)),q&&(rt=hr(Oe,q),Me.tables.fvar=fm.parse(rt.data,rt.offset,Me.names)),fe&&(ke=hr(Oe,fe),Me.tables.meta=Ju.parse(ke.data,ke.offset),Me.metas=Me.tables.meta),Me}l.Font=Bt,l.Glyph=Ke,l.Path=$,l.BoundingBox=Y,l._parse=xe,l.parse=Xa,l.load=function(w,C){(typeof window>"u"?bm:_m)(w,function(T,O){if(T)return C(T);var V;try{V=Xa(O)}catch(q){return C(q,null)}return C(null,V)})},l.loadSync=function(w){return Xa(ac(r("fs").readFileSync(w)))},Object.defineProperty(l,"__esModule",{value:!0})},a(typeof c=="object"&&i!==void 0?c:d.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],255:[function(r,i,c){(function(o){function d(b,y){for(var u=0,p=b.length-1;0<=p;p--){var h=b[p];h==="."?b.splice(p,1):h===".."?(b.splice(p,1),u++):u&&(b.splice(p,1),u--)}if(y)for(;u--;)b.unshift("..");return b}function a(b,y){if(b.filter)return b.filter(y);for(var u=[],p=0;p<b.length;p++)y(b[p],p,b)&&u.push(b[p]);return u}c.resolve=function(){for(var b="",y=!1,u=arguments.length-1;-1<=u&&!y;u--){var p=0<=u?arguments[u]:o.cwd();if(typeof p!="string")throw new TypeError("Arguments to path.resolve must be strings");p&&(b=p+"/"+b,y=p.charAt(0)==="/")}return(y?"/":"")+(b=d(a(b.split("/"),function(h){return!!h}),!y).join("/"))||"."},c.normalize=function(b){var y=c.isAbsolute(b),u=l(b,-1)==="/";return(b=(b=d(a(b.split("/"),function(p){return!!p}),!y).join("/"))||y?b:".")&&u&&(b+="/"),(y?"/":"")+b},c.isAbsolute=function(b){return b.charAt(0)==="/"},c.join=function(){var b=Array.prototype.slice.call(arguments,0);return c.normalize(a(b,function(y,u){if(typeof y!="string")throw new TypeError("Arguments to path.join must be strings");return y}).join("/"))},c.relative=function(b,y){function u(_){for(var x=0;x<_.length&&_[x]==="";x++);for(var j=_.length-1;0<=j&&_[j]==="";j--);return j<x?[]:_.slice(x,j-x+1)}b=c.resolve(b).substr(1),y=c.resolve(y).substr(1);for(var p=u(b.split("/")),h=u(y.split("/")),m=Math.min(p.length,h.length),g=m,f=0;f<m;f++)if(p[f]!==h[f]){g=f;break}for(var v=[],f=g;f<p.length;f++)v.push("..");return(v=v.concat(h.slice(g))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(b){if(typeof b!="string"&&(b+=""),b.length===0)return".";for(var y=b.charCodeAt(0)===47,u=-1,p=!0,h=b.length-1;1<=h;--h)if(b.charCodeAt(h)===47){if(!p){u=h;break}}else p=!1;return u===-1?y?"/":".":y&&u===1?"/":b.slice(0,u)},c.basename=function(b,y){return b=function(u){typeof u!="string"&&(u+="");for(var p=0,h=-1,m=!0,g=u.length-1;0<=g;--g)if(u.charCodeAt(g)===47){if(!m){p=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":u.slice(p,h)}(b),b=y&&b.substr(-1*y.length)===y?b.substr(0,b.length-y.length):b},c.extname=function(b){typeof b!="string"&&(b+="");for(var y=-1,u=0,p=-1,h=!0,m=0,g=b.length-1;0<=g;--g){var f=b.charCodeAt(g);if(f===47){if(h)continue;u=g+1;break}p===-1&&(h=!1,p=g+1),f===46?y===-1?y=g:m!==1&&(m=1):y!==-1&&(m=-1)}return y===-1||p===-1||m===0||m===1&&y===p-1&&y===u+1?"":b.slice(y,p)};var l="ab".substr(-1)==="b"?function(b,y,u){return b.substr(y,u)}:function(b,y,u){return y<0&&(y=b.length+y),b.substr(y,u)}}).call(this,r("_process"))},{_process:256}],256:[function(r,a,c){var o,d,a=a.exports={};function l(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:l}catch{o=l}try{d=typeof clearTimeout=="function"?clearTimeout:b}catch{d=b}function y(x){if(o===setTimeout)return setTimeout(x,0);if((o===l||!o)&&setTimeout)return(o=setTimeout)(x,0);try{return o(x,0)}catch{try{return o.call(null,x,0)}catch{return o.call(this,x,0)}}}var u,p=[],h=!1,m=-1;function g(){h&&u&&(h=!1,u.length?p=u.concat(p):m=-1,p.length&&f())}function f(){if(!h){for(var x=y(g),j=(h=!0,p.length);j;){for(u=p,p=[];++m<j;)u&&u[m].run();m=-1,j=p.length}u=null,h=!1,function(M){if(d===clearTimeout)return clearTimeout(M);if((d===b||!d)&&clearTimeout)return(d=clearTimeout)(M);try{d(M)}catch{try{return d.call(null,M)}catch{return d.call(this,M)}}}(x)}}function v(x,j){this.fun=x,this.array=j}function _(){}a.nextTick=function(x){var j=new Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)j[M-1]=arguments[M];p.push(new v(x,j)),p.length!==1||h||y(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(x){return[]},a.binding=function(x){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(x){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],257:[function(r,i,c){i=function(o){var d,a=Object.prototype,l=a.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},b=S.iterator||"@@iterator",y=S.asyncIterator||"@@asyncIterator",u=S.toStringTag||"@@toStringTag";function p(W,B,z,H){var $,ie,E,R,B=B&&B.prototype instanceof x?B:x,B=Object.create(B.prototype),H=new F(H||[]);return B._invoke=($=W,ie=z,E=H,R=m,function(Z,te){if(R===f)throw new Error("Generator is already running");if(R===v){if(Z==="throw")throw te;return U()}for(E.method=Z,E.arg=te;;){var se=E.delegate;if(se&&(se=function pe(oe,he){var de=oe.iterator[he.method];if(de===d){if(he.delegate=null,he.method==="throw"){if(oe.iterator.return&&(he.method="return",he.arg=d,pe(oe,he),he.method==="throw"))return _;he.method="throw",he.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}if(de=h(de,oe.iterator,he.arg),de.type==="throw")return he.method="throw",he.arg=de.arg,he.delegate=null,_;if(de=de.arg,!de)return he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,_;{if(!de.done)return de;he[oe.resultName]=de.value,he.next=oe.nextLoc,he.method!=="return"&&(he.method="next",he.arg=d)}return he.delegate=null,_}(se,E),se)){if(se===_)continue;return se}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(R===m)throw R=v,E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);if(R=f,se=h($,ie,E),se.type==="normal"){if(R=E.done?v:g,se.arg!==_)return{value:se.arg,done:E.done}}else se.type==="throw"&&(R=v,E.method="throw",E.arg=se.arg)}}),B}function h(W,G,z){try{return{type:"normal",arg:W.call(G,z)}}catch(Y){return{type:"throw",arg:Y}}}o.wrap=p;var m="suspendedStart",g="suspendedYield",f="executing",v="completed",_={};function x(){}function j(){}function M(){}var S={},P=(S[b]=function(){return this},Object.getPrototypeOf),P=P&&P(P(N([]))),L=(P&&P!==a&&l.call(P,b)&&(S=P),M.prototype=x.prototype=Object.create(S));function D(W){["next","throw","return"].forEach(function(G){W[G]=function(z){return this._invoke(G,z)}})}function k(W){var G;this._invoke=function(z,Y){function $(){return new Promise(function(ie,E){(function R(pe,H,Z,te){var se,pe=h(W[pe],W,H);if(pe.type!=="throw")return(H=(se=pe.arg).value)&&typeof H=="object"&&l.call(H,"__await")?Promise.resolve(H.__await).then(function(oe){R("next",oe,Z,te)},function(oe){R("throw",oe,Z,te)}):Promise.resolve(H).then(function(oe){se.value=oe,Z(se)},function(oe){return R("throw",oe,Z,te)});te(pe.arg)})(z,Y,ie,E)})}return G=G?G.then($,$):$()}}function I(W){var G={tryLoc:W[0]};1 in W&&(G.catchLoc=W[1]),2 in W&&(G.finallyLoc=W[2],G.afterLoc=W[3]),this.tryEntries.push(G)}function A(W){var G=W.completion||{};G.type="normal",delete G.arg,W.completion=G}function F(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(I,this),this.reset(!0)}function N(W){if(W){var G,z=W[b];if(z)return z.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length))return G=-1,(z=function Y(){for(;++G<W.length;)if(l.call(W,G))return Y.value=W[G],Y.done=!1,Y;return Y.value=d,Y.done=!0,Y}).next=z}return{next:U}}function U(){return{value:d,done:!0}}return(j.prototype=L.constructor=M).constructor=j,M[u]=j.displayName="GeneratorFunction",o.isGeneratorFunction=function(W){return W=typeof W=="function"&&W.constructor,!!W&&(W===j||(W.displayName||W.name)==="GeneratorFunction")},o.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,M):(W.__proto__=M,u in W||(W[u]="GeneratorFunction")),W.prototype=Object.create(L),W},o.awrap=function(W){return{__await:W}},D(k.prototype),k.prototype[y]=function(){return this},o.AsyncIterator=k,o.async=function(W,G,z,Y){var $=new k(p(W,G,z,Y));return o.isGeneratorFunction(G)?$:$.next().then(function(ie){return ie.done?ie.value:$.next()})},D(L),L[u]="Generator",L[b]=function(){return this},L.toString=function(){return"[object Generator]"},o.keys=function(W){var G,z=[];for(G in W)z.push(G);return z.reverse(),function Y(){for(;z.length;){var $=z.pop();if($ in W)return Y.value=$,Y.done=!1,Y}return Y.done=!0,Y}},o.values=N,F.prototype={constructor:F,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(A),!W)for(var G in this)G.charAt(0)==="t"&&l.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=d)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var G=this;function z(B,H){return ie.type="throw",ie.arg=W,G.next=B,H&&(G.method="next",G.arg=d),!!H}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var $=this.tryEntries[Y],ie=$.completion;if($.tryLoc==="root")return z("end");if($.tryLoc<=this.prev){var E=l.call($,"catchLoc"),R=l.call($,"finallyLoc");if(E&&R){if(this.prev<$.catchLoc)return z($.catchLoc,!0);if(this.prev<$.finallyLoc)return z($.finallyLoc)}else if(E){if(this.prev<$.catchLoc)return z($.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<$.finallyLoc)return z($.finallyLoc)}}}},abrupt:function(W,G){for(var z=this.tryEntries.length-1;0<=z;--z){var Y=this.tryEntries[z];if(Y.tryLoc<=this.prev&&l.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var $=Y;break}}var ie=($=$&&(W==="break"||W==="continue")&&$.tryLoc<=G&&G<=$.finallyLoc?null:$)?$.completion:{};return ie.type=W,ie.arg=G,$?(this.method="next",this.next=$.finallyLoc,_):this.complete(ie)},complete:function(W,G){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&G&&(this.next=G),_},finish:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var z=this.tryEntries[G];if(z.finallyLoc===W)return this.complete(z.completion,z.afterLoc),A(z),_}},catch:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var z,Y,$=this.tryEntries[G];if($.tryLoc===W)return(z=$.completion).type==="throw"&&(Y=z.arg,A($)),Y}throw new Error("illegal catch attempt")},delegateYield:function(W,G,z){return this.delegate={iterator:N(W),resultName:G,nextLoc:z},this.method==="next"&&(this.arg=d),_}},o}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(r,i,c){(function(o){var d,a,l,b,y,u,p,h,m,g;function f(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function v(A){return A=typeof A!="string"?String(A):A}function _(A){var F={next:function(){var N=A.shift();return{done:N===void 0,value:N}}};return a&&(F[Symbol.iterator]=function(){return F}),F}function x(A){this.map={},A instanceof x?A.forEach(function(F,N){this.append(N,F)},this):Array.isArray(A)?A.forEach(function(F){this.append(F[0],F[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(F){this.append(F,A[F])},this)}function j(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function M(A){return new Promise(function(F,N){A.onload=function(){F(A.result)},A.onerror=function(){N(A.error)}})}function S(A){var F=new FileReader,N=M(F);return F.readAsArrayBuffer(A),N}function P(A){var F;return A.slice?A.slice(0):((F=new Uint8Array(A.byteLength)).set(new Uint8Array(A)),F.buffer)}function L(){return this.bodyUsed=!1,this._initBody=function(A){if(this._bodyInit=A)if(typeof A=="string")this._bodyText=A;else if(l&&Blob.prototype.isPrototypeOf(A))this._bodyBlob=A;else if(b&&FormData.prototype.isPrototypeOf(A))this._bodyFormData=A;else if(d&&URLSearchParams.prototype.isPrototypeOf(A))this._bodyText=A.toString();else if(y&&l&&p(A))this._bodyArrayBuffer=P(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(A)&&!h(A))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=P(A)}else this._bodyText="";this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l&&(this.blob=function(){var A=j(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var A,F,N=j(this);if(N)return N;if(this._bodyBlob)return N=this._bodyBlob,A=new FileReader,F=M(A),A.readAsText(N),F;if(this._bodyArrayBuffer)return Promise.resolve(function(U){for(var W=new Uint8Array(U),G=new Array(W.length),z=0;z<W.length;z++)G[z]=String.fromCharCode(W[z]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function D(A,F){var N,U=(F=F||{}).body;if(A instanceof D){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,F.headers||(this.headers=new x(A.headers)),this.method=A.method,this.mode=A.mode,U||A._bodyInit==null||(U=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=F.credentials||this.credentials||"omit",!F.headers&&this.headers||(this.headers=new x(F.headers)),this.method=(A=F.method||this.method||"GET",N=A.toUpperCase(),-1<m.indexOf(N)?N:A),this.mode=F.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(U)}function k(A){var F=new FormData;return A.trim().split("&").forEach(function(N){var U;N&&(U=(N=N.split("=")).shift().replace(/\+/g," "),N=N.join("=").replace(/\+/g," "),F.append(decodeURIComponent(U),decodeURIComponent(N)))}),F}function I(A,F){F=F||{},this.type="default",this.status=F.status===void 0?200:F.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new x(F.headers),this.url=F.url||"",this._initBody(A)}o.fetch||(d="URLSearchParams"in o,a="Symbol"in o&&"iterator"in Symbol,l="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),b="FormData"in o,(y="ArrayBuffer"in o)&&(u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(A){return A&&DataView.prototype.isPrototypeOf(A)},h=ArrayBuffer.isView||function(A){return A&&-1<u.indexOf(Object.prototype.toString.call(A))}),x.prototype.append=function(A,F){A=f(A),F=v(F);var N=this.map[A];this.map[A]=N?N+","+F:F},x.prototype.delete=function(A){delete this.map[f(A)]},x.prototype.get=function(A){return A=f(A),this.has(A)?this.map[A]:null},x.prototype.has=function(A){return this.map.hasOwnProperty(f(A))},x.prototype.set=function(A,F){this.map[f(A)]=v(F)},x.prototype.forEach=function(A,F){for(var N in this.map)this.map.hasOwnProperty(N)&&A.call(F,this.map[N],N,this)},x.prototype.keys=function(){var A=[];return this.forEach(function(F,N){A.push(N)}),_(A)},x.prototype.values=function(){var A=[];return this.forEach(function(F){A.push(F)}),_(A)},x.prototype.entries=function(){var A=[];return this.forEach(function(F,N){A.push([N,F])}),_(A)},a&&(x.prototype[Symbol.iterator]=x.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],D.prototype.clone=function(){return new D(this,{body:this._bodyInit})},L.call(D.prototype),L.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},I.error=function(){var A=new I(null,{status:0,statusText:""});return A.type="error",A},g=[301,302,303,307,308],I.redirect=function(A,F){if(g.indexOf(F)===-1)throw new RangeError("Invalid status code");return new I(null,{status:F,headers:{location:A}})},o.Headers=x,o.Request=D,o.Response=I,o.fetch=function(A,F){return new Promise(function(N,U){var W=new D(A,F),G=new XMLHttpRequest;G.onload=function(){var z,Y={status:G.status,statusText:G.statusText,headers:(Y=G.getAllResponseHeaders()||"",z=new x,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(E){var E=E.split(":"),R=E.shift().trim();R&&(E=E.join(":").trim(),z.append(R,E))}),z)},$=(Y.url="responseURL"in G?G.responseURL:Y.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);N(new I($,Y))},G.onerror=function(){U(new TypeError("Network request failed"))},G.ontimeout=function(){U(new TypeError("Network request failed"))},G.open(W.method,W.url,!0),W.credentials==="include"?G.withCredentials=!0:W.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&l&&(G.responseType="blob"),W.headers.forEach(function(z,Y){G.setRequestHeader(Y,z)}),G.send(W._bodyInit===void 0?null:W._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(r,i,c){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,d=l(r("../core/main")),a=l(r("../color/color_conversion"));function l(u){return u&&u.__esModule?u:{default:u}}var b=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],y=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];d.default.prototype._rgbColorName=function(m){var p,h,m=a.default._rgbaToHSBA(m),g=[(o=m)[0],m[1],m[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(m=g[0].toString().split(""))[h=m.length-1]=parseInt(m[h]),m[h]<2.5?m[h]=0:2.5<=m[h]&&m[h]<7.5&&(m[h]=5),m.length===2?(m[0]=parseInt(m[0]),7.5<=m[h]&&(m[h]=0,m[0]=m[0]+1),g[0]=10*m[0]+m[1]):7.5<=m[h]?g[0]=10:g[0]=m[h]),g[2]=g[2]/255;for(var f=g.length-1;1<=f;f--)g[f]<=.25?g[f]=0:.25<g[f]&&g[f]<.75?g[f]=.5:g[f]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var v=2;0<=v;v--)o[v]=Math.round(1e4*o[v])/1e4;for(var _=0;_<b.length;_++){if(b[_].h===o[0]&&b[_].s===o[1]&&b[_].b===o[2]){p=b[_].name;break}p="white"}}else for(var x=0;x<y.length;x++)if(y[x].h===g[0]&&y[x].s===g[1]&&y[x].b===g[2]){p=y[x].name;break}return p},r=d.default,c.default=r},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r},d="_Description",a="_fallbackDesc",l="_fallbackTable",b="_Label",y="_labelDesc",u="_labelTable";function p(h){if(h==="label"||h==="fallback")throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}o.default.prototype.describe=function(h,m){var g;o.default._validateParameters("describe",arguments),typeof h=="string"&&(g=this.canvas.id,h=p(h),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},o.default.prototype.describeElement=function(h,m,g){var f,v;o.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof h=="string"&&(f=this.canvas.id,m=p(m),v=function(_){if(_==="label"||_==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return _.endsWith(".")||_.endsWith(";")||_.endsWith(",")?_=_.replace(/.$/,":"):_.endsWith(":")||(_+=":"),_}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==v&&(this.descriptions.fallbackElements[h].innerHTML=v):this._describeElementHTML("fallback",h,v),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==v&&(this.descriptions.labelElements[h].innerHTML=v):this._describeElementHTML("label",h,v)))},o.default.prototype._describeHTML=function(h,m){var g,f=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(f+d))?this.dummyDOM.querySelector("#"+f+l).insertAdjacentHTML("beforebegin",'<p id="'.concat(f+a,'"></p>')):(g='<div id="'.concat(f).concat(d,'" role="region" aria-label="Canvas Description"><p id="').concat(f).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(f,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(f,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(f)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(f).concat(a)),this.descriptions.fallback.innerHTML=m):h==="label"&&(this.dummyDOM.querySelector("#".concat(f+b))?this.dummyDOM.querySelector("#".concat(f+u))&&this.dummyDOM.querySelector("#".concat(f+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(f).concat(y,'"></p>')):(g='<div id="'.concat(f).concat(b,'" class="p5Label"><p id="').concat(f).concat(y,'"></p></div>'),this.dummyDOM.querySelector("#".concat(f,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(f,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+f).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+f+y),this.descriptions.label.innerHTML=m)},o.default.prototype._describeElementHTML=function(h,m,g){var f,v=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(v+d))?this.dummyDOM.querySelector("#"+v+l)||this.dummyDOM.querySelector("#"+v+a).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table>')):(f='<div id="'.concat(v).concat(d,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#"+v).innerHTML=f),(f=document.createElement("tr")).id=v+"_fte_"+m,this.dummyDOM.querySelector("#"+v+l).appendChild(f),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=g):h==="label"&&(this.dummyDOM.querySelector("#".concat(v+b))?this.dummyDOM.querySelector("#".concat(v+u))||this.dummyDOM.querySelector("#"+v+y).insertAdjacentHTML("afterend",'<table id="'.concat(v+u,'"></table>')):(f='<div id="'.concat(v).concat(b,'" class="p5Label"><table id="').concat(v).concat(u,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",f)),(h=document.createElement("tr")).id=v+"_lte_"+m,this.dummyDOM.querySelector("#"+v+u).appendChild(h),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=g)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(o){var d,a,l,b;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(d=this._accessibleOutputs[o],l=function(y,u,p,h){return u="".concat(u," canvas, ").concat(p," by ").concat(h," pixels, contains ").concat(y[0]),u=(y[0]===1?"".concat(u," shape: "):"".concat(u," shapes: ")).concat(y[1]),u}((a=function(y,u){var p,h="",m="",g=0;for(p in u){var f,v=0;for(f in u[p]){var _='<li id="'.concat(y,"shape").concat(g,'">').concat(u[p][f].color," ").concat(p,",");p==="line"?_+=" location = ".concat(u[p][f].pos,", length = ").concat(u[p][f].length," pixels"):(_+=" location = ".concat(u[p][f].pos),p!=="point"&&(_+=", area = ".concat(u[p][f].area," %")),_+="</li>"),h+=_,v++,g++}m=1<v?"".concat(m," ").concat(v," ").concat(p,"s"):"".concat(m," ").concat(v," ").concat(p)}return{numShapes:[g,m],details:h}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(y,u){var p,h,m=0,g="",f=Array.from(Array(10),function(){return Array(10)});for(p in u)for(var v in u[p]){var _=void 0;_=p!=="line"?'<a href="#'.concat(y,"shape").concat(m,'">').concat(u[p][v].color," ").concat(p,"</a>"):'<a href="#'.concat(y,"shape").concat(m,'">').concat(u[p][v].color," ").concat(p," midpoint</a>"),f[u[p][v].loc.locY][u[p][v].loc.locX]?f[u[p][v].loc.locY][u[p][v].loc.locX]=f[u[p][v].loc.locY][u[p][v].loc.locX]+"  "+_:f[u[p][v].loc.locY][u[p][v].loc.locX]=_,m++}for(h in f){var x,j="<tr>";for(x in f[h])j+="<td>",f[h][x]!==void 0&&(j+=f[h][x]),j+="</td>";g=g+j+"</tr>"}return g}(o,this.ingredients.shapes),l!==d.summary.innerHTML&&(d.summary.innerHTML=l),b!==d.map.innerHTML&&(d.map.innerHTML=b),a.details!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=a.details),this._accessibleOutputs[o]=d)},r=r.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(l){return function(b){if(Array.isArray(b)){for(var y=0,u=new Array(b.length);y<b.length;y++)u[y]=b[y];return u}}(l)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(l,b,y){return b=Math.floor(l[0]/b*10),l=Math.floor(l[1]/y*10),b===10&&(b-=1),l===10&&(l-=1),{locX:b,locY:l}}o.default.prototype.textOutput=function(l){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(l){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(l,b){var y,u,p,h=this.canvas.id,m=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");b==="Fallback"?(y=h+l,this.dummyDOM.querySelector("#".concat(u=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):b==="Label"&&(y=h+l+(m=b),this.dummyDOM.querySelector("#".concat(u=h+"accessibleOutput"+b))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>'))),this._accessibleOutputs[y]={},l==="textOutput"?(m="#".concat(h,"gridOutput").concat(m),p='<div id="'.concat(y,'">Text Output<div id="').concat(y,'Summary" aria-label="text output summary"><p id="').concat(y,'_summary"></p><ul id="').concat(y,'_list"></ul></div><table id="').concat(y,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(u)).innerHTML=p,this._accessibleOutputs[y].list=this.dummyDOM.querySelector("#".concat(y,"_list"))):l==="gridOutput"&&(m="#".concat(h,"textOutput").concat(m),p='<div id="'.concat(y,'">Grid Output<p id="').concat(y,'_summary" aria-label="grid output summary"><table id="').concat(y,'_map" summary="grid output content"></table><ul id="').concat(y,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",p):this.dummyDOM.querySelector("#".concat(u)).innerHTML=p,this._accessibleOutputs[y].map=this.dummyDOM.querySelector("#".concat(y,"_map"))),this._accessibleOutputs[y].shapeDetails=this.dummyDOM.querySelector("#".concat(y,"_shapeDetails")),this._accessibleOutputs[y].summary=this.dummyDOM.querySelector("#".concat(y,"_summary"))},o.default.prototype._updateAccsOutput=function(){var l=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(l+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(l+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(l+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(l+"gridOutputLabel"))},o.default.prototype._accsBackground=function(l){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==l&&(this.ingredients.colors.backgroundRGBA=l,this.ingredients.colors.background=this._rgbColorName(l))},o.default.prototype._accsCanvasColors=function(l,b){l==="fill"?this.ingredients.colors.fillRGBA!==b&&(this.ingredients.colors.fillRGBA=b,this.ingredients.colors.fill=this._rgbColorName(b)):l==="stroke"&&this.ingredients.colors.strokeRGBA!==b&&(this.ingredients.colors.strokeRGBA=b,this.ingredients.colors.stroke=this._rgbColorName(b))},o.default.prototype._accsOutput=function(l,b){l==="ellipse"&&b[2]===b[3]?l="circle":l==="rectangle"&&b[2]===b[3]&&(l="square");var y,u,p={},h=!0,m=function(f,v){var _;return f=f==="rectangle"||f==="ellipse"||f==="arc"||f==="circle"||f==="square"?(_=Math.round(v[0]+v[2]/2),Math.round(v[1]+v[3]/2)):f==="triangle"?(_=(v[0]+v[2]+v[4])/3,(v[1]+v[3]+v[5])/3):f==="quadrilateral"?(_=(v[0]+v[2]+v[4]+v[6])/4,(v[1]+v[3]+v[5]+v[7])/4):f==="line"?(_=(v[0]+v[2])/2,(v[1]+v[3])/2):(_=v[0],v[1]),[_,f]}(l,b);if(l==="line"?(p.color=this.ingredients.colors.stroke,p.length=Math.round(this.dist(b[0],b[1],b[2],b[3])),y=this._getPos(b[0],[1]),u=this._getPos(b[2],[3]),p.loc=a(m,this.width,this.height),p.pos=y===u?"at ".concat(y):"from ".concat(y," to ").concat(u)):(l==="point"?p.color=this.ingredients.colors.stroke:(p.color=this.ingredients.colors.fill,p.area=this._getArea(l,b)),p.pos=this._getPos.apply(this,d(m)),p.loc=a(m,this.width,this.height)),this.ingredients.shapes[l]){if(this.ingredients.shapes[l]!==[p]){for(var g in this.ingredients.shapes[l])JSON.stringify(this.ingredients.shapes[l][g])===JSON.stringify(p)&&(h=!1);h===!0&&this.ingredients.shapes[l].push(p)}}else this.ingredients.shapes[l]=[p]},o.default.prototype._getPos=function(u,y){var u=new DOMPointReadOnly(u,y),y=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),u=u.matrixTransform(y),y=u.x,u=u.y,p=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return y<.4*p?u<.4*h?"top left":.6*h<u?"bottom left":"mid left":.6*p<y?u<.4*h?"top right":.6*h<u?"bottom right":"mid right":u<.4*h?"top middle":.6*h<u?"bottom middle":"middle"},o.default.prototype._getArea=function(l,b){var y,u,p=0,h=(l==="arc"?(p=(y=((b[5]-b[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*b[2]*b[3]/8,b[6]!=="open"&&b[6]!=="chord"||(u=b[0],v=b[1],h=b[0]+b[2]/2*Math.cos(b[4]).toFixed(2),_=b[1]+b[3]/2*Math.sin(b[4]).toFixed(2),g=b[0]+b[2]/2*Math.cos(b[5]).toFixed(2),m=b[1]+b[3]/2*Math.sin(b[5]).toFixed(2),u=Math.abs(u*(_-m)+h*(m-v)+g*(v-_))/2,y>Math.PI?p+=u:p-=u)):l==="ellipse"||l==="circle"?p=3.14*b[2]/2*b[3]/2:l==="line"||l==="point"?p=0:l==="quadrilateral"?p=Math.abs((b[6]+b[0])*(b[7]-b[1])+(b[0]+b[2])*(b[1]-b[3])+(b[2]+b[4])*(b[3]-b[5])+(b[4]+b[6])*(b[5]-b[7]))/2:l==="rectangle"||l==="square"?p=b[2]*b[3]:l==="triangle"&&(p=Math.abs(b[0]*(b[3]-b[5])+b[2]*(b[5]-b[1])+b[4]*(b[1]-b[3]))/2),this.width*this._pixelDensity),m=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,m),new DOMPoint(0,m)],f=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),v=g.map(function(x){return x.matrixTransform(f)}),_=Math.abs((v[3].x+v[0].x)*(v[3].y-v[0].y)+(v[0].x+v[1].x)*(v[0].y-v[1].y)+(v[1].x+v[2].x)*(v[1].y-v[2].y)+(v[2].x+v[3].x)*(v[2].y-v[3].y))/2;return Math.round(100*p/_)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(o){var d,a,l,b;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(d=this._accessibleOutputs[o],l=function(y,u,p,h){return p="Your output is a, ".concat(p," by ").concat(h," pixels, ").concat(u," canvas containing the following"),p=y===1?"".concat(p," shape:"):"".concat(p," ").concat(y," shapes:"),p}((a=function(y,u){var p,h="",m=0;for(p in u)for(var g in u[p]){var f='<li><a href="#'.concat(y,"shape").concat(m,'">').concat(u[p][g].color," ").concat(p,"</a>");p==="line"?f+=", ".concat(u[p][g].pos,", ").concat(u[p][g].length," pixels long.</li>"):(f+=", at ".concat(u[p][g].pos),p!=="point"&&(f+=", covering ".concat(u[p][g].area,"% of the canvas")),f+=".</li>"),h+=f,m++}return{numShapes:m,listShapes:h}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(y,u){var p,h="",m=0;for(p in u)for(var g in u[p]){var f='<tr id="'.concat(y,"shape").concat(m,'"><th>').concat(u[p][g].color," ").concat(p,"</th>");p==="line"?f+="<td>location = ".concat(u[p][g].pos,"</td><td>length = ").concat(u[p][g].length," pixels</td></tr>"):(f+="<td>location = ".concat(u[p][g].pos,"</td>"),p!=="point"&&(f+="<td> area = ".concat(u[p][g].area,"%</td>")),f+="</tr>"),h+=f,m++}return h}(o,this.ingredients.shapes),l!==d.summary.innerHTML&&(d.summary.innerHTML=l),a.listShapes!==d.list.innerHTML&&(d.list.innerHTML=a.listShapes),b!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=b),this._accessibleOutputs[o]=d)},r=r.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(r,i,c){var o=(o=r("./core/main"))&&o.__esModule?o:{default:o};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.DataArray"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),i.exports=o.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={_hsbaToHSLA:function(o){var d=o[0],a=o[1],l=o[2],b=(2-a)*l/2;return b!=0&&(b==1?a=0:b<.5?a/=2-a:a=a*l/(2-2*b)),[d,a,b,o[3]]},_hsbaToRGBA:function(o){var d,a,l,b,y,u=6*o[0],p=o[1],h=o[2];return p===0?[h,h,h,o[3]]:(a=h*(1-p),l=h*(1-p*(u-(d=Math.floor(u)))),p=h*(1-p*(1+d-u)),u=d===1?(b=l,y=h,a):d===2?(b=a,y=h,p):d===3?(b=a,y=l,h):d===4?(b=p,y=a,h):d===5?(b=h,y=a,l):(b=h,y=p,a),[b,y,u,o[3]])},_hslaToHSBA:function(o){var d=o[0],a=o[1],l=o[2],b=l<.5?(1+a)*l:l+a-l*a;return[d,a=2*(b-l)/b,b,o[3]]},_hslaToRGBA:function(o){var d,a=6*o[0],l=o[1],b=o[2];return l===0?[b,b,b,o[3]]:[(d=function(y,u,p){return y<0?y+=6:6<=y&&(y-=6),y<1?u+(p-u)*y:y<3?p:y<4?u+(p-u)*(4-y):u})(2+a,l=2*b-(b=b<.5?(1+l)*b:b+l-b*l),b),d(a,l,b),d(a-2,l,b),o[3]]},_rgbaToHSBA:function(o){var d,a,l=o[0],b=o[1],y=o[2],u=Math.max(l,b,y),p=u-Math.min(l,b,y);return p==0?a=d=0:(a=p/u,l===u?d=(b-y)/p:b===u?d=2+(y-l)/p:y===u&&(d=4+(l-b)/p),d<0?d+=6:6<=d&&(d-=6)),[d/6,a,u,o[3]]},_rgbaToHSLA:function(o){var d,a,l=o[0],b=o[1],y=o[2],u=Math.max(l,b,y),h=Math.min(l,b,y),p=u+h,h=u-h;return h==0?a=d=0:(a=p<1?h/p:h/(2-p),l===u?d=(b-y)/h:b===u?d=2+(y-l)/h:y===u&&(d=4+(l-b)/h),d<0?d+=6:6<=d&&(d-=6)),[d/6,a,p/2,o[3]]}},r=r.default.ColorConversion,c.default=r},{"../core/main":280}],266:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../core/main"))&&y.__esModule?y:{default:y},l=function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(u){return a.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},a.default.prototype.blue=function(u){return a.default._validateParameters("blue",arguments),this.color(u)._getBlue()},a.default.prototype.brightness=function(u){return a.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},a.default.prototype.color=function(){for(var u,p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return a.default._validateParameters("color",h),h[0]instanceof a.default.Color?h[0]:(u=Array.isArray(h[0])?h[0]:h,new a.default.Color(this,u))},a.default.prototype.green=function(u){return a.default._validateParameters("green",arguments),this.color(u)._getGreen()},a.default.prototype.hue=function(u){return a.default._validateParameters("hue",arguments),this.color(u)._getHue()},a.default.prototype.lerpColor=function(u,p,h){a.default._validateParameters("lerpColor",arguments);var m,g,f,v=this._colorMode,_=this._colorMaxes;if(v===l.RGB)g=u.levels.map(function(x){return x/255}),f=p.levels.map(function(x){return x/255});else if(v===l.HSB)u._getBrightness(),p._getBrightness(),g=u.hsba,f=p.hsba;else{if(v!==l.HSL)throw new Error("".concat(v," cannot be used for interpolation."));u._getLightness(),p._getLightness(),g=u.hsla,f=p.hsla}return h=Math.max(Math.min(h,1),0),this.lerp===void 0&&(this.lerp=function(x,j,M){return M*(j-x)+x}),v===l.RGB?m=this.lerp(g[0],f[0],h):(.5<Math.abs(g[0]-f[0])&&(g[0]>f[0]?f[0]+=1:g[0]+=1),1<=(m=this.lerp(g[0],f[0],h))&&--m),u=this.lerp(g[1],f[1],h),p=this.lerp(g[2],f[2],h),g=this.lerp(g[3],f[3],h),m*=_[v][0],u*=_[v][1],p*=_[v][2],g*=_[v][3],this.color(m,u,p,g)},a.default.prototype.lightness=function(u){return a.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},a.default.prototype.red=function(u){return a.default._validateParameters("red",arguments),this.color(u)._getRed()},a.default.prototype.saturation=function(u){return a.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var y=a.default;c.default=y},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(m,i,c){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(x)}function d(x){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(j){return o(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":o(j)})(x)}m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.get-own-property-descriptor"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.string.trim"),m("core-js/modules/es.weak-map"),m("core-js/modules/web.dom-collections.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=u(m("../core/main")),l=function(x){if(x&&x.__esModule)return x;if(x===null||d(x)!=="object"&&typeof x!="function")return{default:x};var j=y();if(j&&j.has(x))return j.get(x);var M,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in x){var L;Object.prototype.hasOwnProperty.call(x,M)&&((L=P?Object.getOwnPropertyDescriptor(x,M):null)&&(L.get||L.set)?Object.defineProperty(S,M,L):S[M]=x[M])}return S.default=x,j&&j.set(x,S),S}(m("../core/constants")),b=u(m("./color_conversion"));function y(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,y=function(){return x},x)}function u(x){return x&&x.__esModule?x:{default:x}}function p(x,j){for(var M=0;M<j.length;M++){var S=j[M];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},m=/\s*/,_=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp("".concat(g.source,"%")),v={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",_.source,",",_.source,",",_.source,"\\)$"].join(m.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),RGBA:new RegExp(["^rgba\\(",_.source,",",_.source,",",_.source,",",g.source,"\\)$"].join(m.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",g.source,"\\)$"].join(m.source),"i"),HSL:new RegExp(["^hsl\\(",_.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),HSLA:new RegExp(["^hsla\\(",_.source,",",f.source,",",f.source,",",g.source,"\\)$"].join(m.source),"i"),HSB:new RegExp(["^hsb\\(",_.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),HSBA:new RegExp(["^hsba\\(",_.source,",",f.source,",",f.source,",",g.source,"\\)$"].join(m.source),"i")},_=(a.default.Color=function(){function x(P,L){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(P._colorMode,P._colorMaxes),![l.RGB,l.HSL,l.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=x._parseInputs.apply(this,L),this._calculateLevels()}var j,M,S;return j=x,S=[{key:"_parseInputs",value:function(P,L,D,k){var I,A=arguments.length,F=this.mode,N=this.maxes[F],U=[];if(3<=A){for(U[0]=P/N[0],U[1]=L/N[1],U[2]=D/N[2],U[3]=typeof k=="number"?k/N[3]:1,I=U.length-1;0<=I;--I){var W=U[I];W<0?U[I]=0:1<W&&(U[I]=1)}return F===l.HSL?b.default._hslaToRGBA(U):F===l.HSB?b.default._hsbaToRGBA(U):U}if(A===1&&typeof P=="string"){if(D=P.trim().toLowerCase(),h[D])return x._parseInputs.call(this,h[D]);if(v.HEX3.test(D))return(U=v.HEX3.exec(D).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,U;if(v.HEX6.test(D))return(U=v.HEX6.exec(D).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,U;if(v.HEX4.test(D))return U=v.HEX4.exec(D).slice(1).map(function(G){return parseInt(G+G,16)/255});if(v.HEX8.test(D))return U=v.HEX8.exec(D).slice(1).map(function(G){return parseInt(G,16)/255});if(v.RGB.test(D))return(U=v.RGB.exec(D).slice(1).map(function(G){return G/255}))[3]=1,U;if(v.RGB_PERCENT.test(D))return(U=v.RGB_PERCENT.exec(D).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,U;if(v.RGBA.test(D))return U=v.RGBA.exec(D).slice(1).map(function(G,z){return z===3?parseFloat(G):G/255});if(v.RGBA_PERCENT.test(D))return U=v.RGBA_PERCENT.exec(D).slice(1).map(function(G,z){return z===3?parseFloat(G):parseFloat(G)/100});if(v.HSL.test(D)?(U=v.HSL.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:v.HSLA.test(D)&&(U=v.HSLA.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:z===3?parseFloat(G):parseInt(G,10)/100})),(U=U.map(function(G){return Math.max(Math.min(G,1),0)})).length)return b.default._hslaToRGBA(U);if(v.HSB.test(D)?(U=v.HSB.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:v.HSBA.test(D)&&(U=v.HSBA.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:z===3?parseFloat(G):parseInt(G,10)/100})),U.length){for(I=U.length-1;0<=I;--I)U[I]=Math.max(Math.min(U[I],1),0);return b.default._hsbaToRGBA(U)}U=[1,1,1,1]}else{if(A!==1&&A!==2||typeof P!="number")throw new Error("".concat(arguments,"is not a valid color representation."));U[0]=P/N[2],U[1]=P/N[2],U[2]=P/N[2],U[3]=typeof L=="number"?L/N[3]:1,U=U.map(function(G){return Math.max(Math.min(G,1),0)})}return U}}],(M=[{key:"toString",value:function(P){var L=this.levels,D=this._array,k=D[3];switch(P){case"#rrggbb":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16));case"#rrggbbaa":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16),L[3]<16?"0".concat(L[3].toString(16)):L[3].toString(16));case"#rgb":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16),Math.round(15*D[3]).toString(16));case"rgb":return"rgb(".concat(L[0],", ",L[1],", ",L[2],")");case"rgb%":return"rgb(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%, ",(100*D[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(L[0],",",L[1],",",L[2],",",k,")")}}},{key:"setRed",value:function(P){this._array[0]=P/this.maxes[l.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(P){this._array[1]=P/this.maxes[l.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(P){this._array[2]=P/this.maxes[l.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(P){this._array[3]=P/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var P=this._array,L=this.levels=new Array(P.length),D=P.length-1;0<=D;--D)L[D]=Math.round(255*P[D]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(P,L){this.mode=P,this.maxes=L}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[l.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[l.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[l.RGB][1]}},{key:"_getHue",value:function(){return this.mode===l.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[l.HSB][0]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[l.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[l.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[l.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===l.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[l.HSB][1]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[l.HSL][1])}}])&&p(j.prototype,M),S&&p(j,S),x}(),a.default.Color);c.default=_},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../core/main"))&&y.__esModule?y:{default:y},l=function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}r("./p5.Color"),a.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},a.default.prototype.endClip=function(){this._renderer.endClip()},a.default.prototype.clip=function(u,p){this._renderer.beginClip(p),u(),this._renderer.endClip(p)},a.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},a.default.prototype.colorMode=function(u,p,h,m,g){return a.default._validateParameters("colorMode",arguments),u!==l.RGB&&u!==l.HSB&&u!==l.HSL||(this._colorMode=u,u=this._colorMaxes[u],arguments.length===2?(u[0]=p,u[1]=p,u[2]=p,u[3]=p):arguments.length===4?(u[0]=p,u[1]=h,u[2]=m):arguments.length===5&&(u[0]=p,u[1]=h,u[2]=m,u[3]=g)),this},a.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},a.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var y=a.default;c.default=y},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.QUADRATIC=c.LINEAR=c._CTX_MIDDLE=c._DEFAULT_LEADMULT=c._DEFAULT_TEXT_FILL=c.WORD=c.CHAR=c.BOLDITALIC=c.BOLD=c.ITALIC=c.NORMAL=c.BLUR=c.ERODE=c.DILATE=c.POSTERIZE=c.INVERT=c.OPAQUE=c.GRAY=c.THRESHOLD=c.BURN=c.DODGE=c.SOFT_LIGHT=c.HARD_LIGHT=c.OVERLAY=c.REPLACE=c.SCREEN=c.MULTIPLY=c.EXCLUSION=c.SUBTRACT=c.DIFFERENCE=c.LIGHTEST=c.DARKEST=c.ADD=c.REMOVE=c.BLEND=c.UP_ARROW=c.TAB=c.SHIFT=c.RIGHT_ARROW=c.RETURN=c.OPTION=c.LEFT_ARROW=c.ESCAPE=c.ENTER=c.DOWN_ARROW=c.DELETE=c.CONTROL=c.BACKSPACE=c.ALT=c.AUTO=c.HSL=c.HSB=c.RGB=c.MITER=c.BEVEL=c.ROUND=c.SQUARE=c.PROJECT=c.PIE=c.CHORD=c.OPEN=c.CLOSE=c.TESS=c.QUAD_STRIP=c.QUADS=c.TRIANGLE_STRIP=c.TRIANGLE_FAN=c.TRIANGLES=c.LINE_LOOP=c.LINE_STRIP=c.LINES=c.POINTS=c.BASELINE=c.BOTTOM=c.TOP=c.CENTER=c.LEFT=c.RIGHT=c.RADIUS=c.CORNERS=c.CORNER=c.RAD_TO_DEG=c.DEG_TO_RAD=c.RADIANS=c.DEGREES=c.TWO_PI=c.TAU=c.QUARTER_PI=c.PI=c.HALF_PI=c.WAIT=c.TEXT=c.MOVE=c.HAND=c.CROSS=c.ARROW=c.WEBGL2=c.WEBGL=c.P2D=c.VERSION=void 0,c.RGBA=c.HALF_FLOAT=c.FLOAT=c.UNSIGNED_INT=c.UNSIGNED_BYTE=c.COVER=c.CONTAIN=c.FALLBACK=c.LABEL=c.AXES=c.GRID=c._DEFAULT_FILL=c._DEFAULT_STROKE=c.PORTRAIT=c.LANDSCAPE=c.SMOOTH=c.FLAT=c.MIRROR=c.CLAMP=c.REPEAT=c.NEAREST=c.IMAGE=c.IMMEDIATE=c.TEXTURE=c.FILL=c.STROKE=c.CURVE=c.BEZIER=void 0;var o=Math.PI,d=(c.VERSION="1.9.4",c.P2D="p2d",c.WEBGL="webgl",c.WEBGL2="webgl2",c.ARROW="default",c.CROSS="crosshair",c.HAND="pointer",c.MOVE="move",c.TEXT="text",c.WAIT="wait",o/2),d=(c.HALF_PI=d,o),d=(c.PI=d,o/4),d=(c.QUARTER_PI=d,2*o),d=(c.TAU=d,2*o),d=(c.TWO_PI=d,c.DEGREES="degrees",c.RADIANS="radians",o/180),d=(c.DEG_TO_RAD=d,180/o);c.RAD_TO_DEG=d,c.CORNER="corner",c.CORNERS="corners",c.RADIUS="radius",c.RIGHT="right",c.LEFT="left",c.CENTER="center",c.TOP="top",c.BOTTOM="bottom",c.BASELINE="alphabetic",c.POINTS=0,c.LINES=1,c.LINE_STRIP=3,c.LINE_LOOP=2,c.TRIANGLES=4,c.TRIANGLE_FAN=6,c.TRIANGLE_STRIP=5,c.QUADS="quads",c.QUAD_STRIP="quad_strip",c.TESS="tess",c.CLOSE="close",c.OPEN="open",c.CHORD="chord",c.PIE="pie",c.PROJECT="square",c.SQUARE="butt",c.ROUND="round",c.BEVEL="bevel",c.MITER="miter",c.RGB="rgb",c.HSB="hsb",c.HSL="hsl",c.AUTO="auto",c.ALT=18,c.BACKSPACE=8,c.CONTROL=17,c.DELETE=46,c.DOWN_ARROW=40,c.ENTER=13,c.ESCAPE=27,c.LEFT_ARROW=37,c.OPTION=18,c.RETURN=13,c.RIGHT_ARROW=39,c.SHIFT=16,c.TAB=9,c.UP_ARROW=38,c.BLEND="source-over",c.REMOVE="destination-out",c.ADD="lighter",c.DARKEST="darken",c.LIGHTEST="lighten",c.DIFFERENCE="difference",c.SUBTRACT="subtract",c.EXCLUSION="exclusion",c.MULTIPLY="multiply",c.SCREEN="screen",c.REPLACE="copy",c.OVERLAY="overlay",c.HARD_LIGHT="hard-light",c.SOFT_LIGHT="soft-light",c.DODGE="color-dodge",c.BURN="color-burn",c.THRESHOLD="threshold",c.GRAY="gray",c.OPAQUE="opaque",c.INVERT="invert",c.POSTERIZE="posterize",c.DILATE="dilate",c.ERODE="erode",c.BLUR="blur",c.NORMAL="normal",c.ITALIC="italic",c.BOLD="bold",c.BOLDITALIC="bold italic",c.CHAR="CHAR",c.WORD="WORD",c._DEFAULT_TEXT_FILL="#000000",c._DEFAULT_LEADMULT=1.25,c._CTX_MIDDLE="middle",c.LINEAR="linear",c.QUADRATIC="quadratic",c.BEZIER="bezier",c.CURVE="curve",c.STROKE="stroke",c.FILL="fill",c.TEXTURE="texture",c.IMMEDIATE="immediate",c.IMAGE="image",c.NEAREST="nearest",c.REPEAT="repeat",c.CLAMP="clamp",c.MIRROR="mirror",c.FLAT="flat",c.SMOOTH="smooth",c.LANDSCAPE="landscape",c.PORTRAIT="portrait",c._DEFAULT_STROKE="#000000",c._DEFAULT_FILL="#FFFFFF",c.GRID="grid",c.AXES="axes",c.LABEL="label",c.FALLBACK="fallback",c.CONTAIN="contain",c.COVER="cover",c.UNSIGNED_BYTE="unsigned-byte",c.UNSIGNED_INT="unsigned-int",c.FLOAT="float",c.HALF_FLOAT="half-float",c.RGBA="rgba"},{}],270:[function(r,i,c){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(g)}function d(g){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(l=r("./main"))&&l.__esModule?l:{default:l},l=function(g){if(g&&g.__esModule)return g;if(g===null||d(g)!=="object"&&typeof g!="function")return{default:g};var f=b();if(f&&f.has(g))return f.get(g);var v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in g){var j;Object.prototype.hasOwnProperty.call(g,v)&&((j=x?Object.getOwnPropertyDescriptor(g,v):null)&&(j.get||j.set)?Object.defineProperty(_,v,j):_[v]=g[v])}return _.default=g,f&&f.set(g,_),_}(r("./constants"));function b(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,b=function(){return g},g)}var y=[l.ARROW,l.CROSS,l.HAND,l.MOVE,l.TEXT,l.WAIT],u=(a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60,window.print),p=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function m(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):p||(u(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(p=!0))},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(g,f,v){var _,x="auto",j=this._curElement.elt;y.includes(g)?x=g:typeof g=="string"&&(_="",f&&v&&typeof f=="number"&&typeof v=="number"&&(_="".concat(f," ").concat(v)),x=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(_,", auto"):g),j.style.cursor=x},a.default.prototype.frameRate=function(g){return a.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(g){return this.frameRate(g)},a.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.webglVersion=l.P2D,a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=h(),a.default.prototype.windowHeight=m(),a.default.prototype._onresize=function(g){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",m());var f=this._isGlobal?window:this;typeof f.windowResized!="function"||(f=f.windowResized(g))===void 0||f||g.preventDefault()},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(g){if(a.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(g){var f;return a.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(f=this).resizeCanvas(this.width,this.height,!0)):f=this._pixelDensity,f},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},a.default.prototype.getURLParams=function(){for(var g,f=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,v={};(g=f.exec(location.search))!=null;)g.index===f.lastIndex&&f.lastIndex++,v[g[1]]=g[2];return v},r=a.default,c.default=r},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(y=r("../main"))&&y.__esModule?y:{default:y};r("../internationalization");function d(u,p){p=p||console.log.bind(console),a||b(),a.some(function(h){var m;if(u.message&&u.message.match("\\W?".concat(h.name,"\\W"))!==null)return m=h.type==="function"?"".concat(h.name,"()"):h.name,p("Did you just try to use p5.js's ".concat(m," ").concat(h.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(l)),!0})}var a=null,b=null,l=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},a=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),b=function(){function u(h){return Object.getOwnPropertyNames(h).filter(function(m){return m[0]!=="_"&&!(m in p)&&(p[m]=!0)}).map(function(m){var g=typeof h[m]=="function"?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:g}})}var p={};(a=[].concat(u(o.default.prototype),u(r("../constants")))).sort(function(h,m){return m.name.length-h.name.length})},y=(o.default.prototype._helpForMisusedAtTopLevelCode=d,document.readyState!=="complete"&&(window.addEventListener("error",d,!1),window.addEventListener("load",function(){window.removeEventListener("error",d,!1)})),o.default);c.default=y},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(o=r("../main"))&&o.__esModule?o:{default:o};r("../internationalization"),o.default._friendlyFileLoadError=function(){},r=o.default,c.default=r},{"../internationalization":278,"../main":280}],273:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function d(p){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=y(r("../main"));r("../internationalization"),b(r("../constants"));function l(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,l=function(){return p},p)}function b(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var h=l();if(h&&h.has(p))return h.get(p);var m,g,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&((g=v?Object.getOwnPropertyDescriptor(p,m):null)&&(g.get||g.set)?Object.defineProperty(f,m,g):f[m]=p[m]);return f.default=p,h&&h.set(p,f),f}function y(p){return p&&p.__esModule?p:{default:p}}a.default._fesCodeReader=function(){};var u=a.default;c.default=u},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(r,i,c){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function o(){var d=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,l=/^(eval@)?(\[native code])?$/;return{parse:function(b){return b.stacktrace!==void 0||b["opera#sourceloc"]!==void 0?this.parseOpera(b):b.stack&&b.stack.match(a)?this.parseV8OrIE(b):b.stack?this.parseFFOrSafari(b):void 0},extractLocation:function(b){return b.indexOf(":")===-1?[b]:[(b=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(b.replace(/[()]/g,"")))[1],b[2]||void 0,b[3]||void 0]},parseV8OrIE:function(b){return b.stack.split(`
`).filter(function(y){return!!y.match(a)},this).map(function(y){var u=(y=-1<y.indexOf("(eval ")?y.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):y).replace(/^\s+/,"").replace(/\(eval code/g,"("),p=u.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=p?u.replace(p[0],""):u).split(/\s+/).slice(1),p=this.extractLocation(p?p[1]:u.pop());return{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(p[0])?void 0:p[0],lineNumber:p[1],columnNumber:p[2],source:y}},this)},parseFFOrSafari:function(b){return b.stack.split(`
`).filter(function(y){return!y.match(l)},this).map(function(y){var u,p;return(y=-1<y.indexOf(" > eval")?y.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):y).indexOf("@")===-1&&y.indexOf(":")===-1?{functionName:y}:{functionName:(p=y.match(u=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&p[1]?p[1]:void 0,fileName:(p=this.extractLocation(y.replace(u,"")))[0],lineNumber:p[1],columnNumber:p[2],source:y}},this)},parseOpera:function(b){return!b.stacktrace||-1<b.message.indexOf(`
`)&&b.message.split(`
`).length>b.stacktrace.split(`
`).length?this.parseOpera9(b):b.stack?this.parseOpera11(b):this.parseOpera10(b)},parseOpera9:function(b){for(var y=/Line (\d+).*script (?:in )?(\S+)/i,u=b.message.split(`
`),p=[],h=2,m=u.length;h<m;h+=2){var g=y.exec(u[h]);g&&p.push({fileName:g[2],lineNumber:g[1],source:u[h]})}return p},parseOpera10:function(b){for(var y=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=b.stacktrace.split(`
`),p=[],h=0,m=u.length;h<m;h+=2){var g=y.exec(u[h]);g&&p.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:u[h]})}return p},parseOpera11:function(b){return b.stack.split(`
`).filter(function(y){return!!y.match(d)&&!y.match(/^Error created at/)},this).map(function(y){var u,h=y.split("@"),p=this.extractLocation(h.pop()),h=h.shift()||"";return{functionName:h.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(u=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):u)===void 0||u==="[arguments not available]"?void 0:u.split(","),fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:y}},this)}}}r.default._getErrorStackParser=function(){return new o},r=r.default,c.default=r},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(r,i,c){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(d=r("../main"))&&d.__esModule?d:{default:d};(function(b){if(!(b&&b.__esModule)&&!(b===null||l(b)!=="object"&&typeof b!="function")){var y=a();if(y&&y.has(b))return y.get(b);var u,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in b){var m;Object.prototype.hasOwnProperty.call(b,u)&&((m=h?Object.getOwnPropertyDescriptor(b,u):null)&&(m.get||m.set)?Object.defineProperty(p,u,m):p[u]=b[u])}p.default=b,y&&y.set(b,p)}})(r("../constants")),r("../internationalization");function a(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,a=function(){return b},b)}function l(b){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(b)}d.default._validateParameters=d.default._clearValidateParamsCache=function(){},r=d.default,c.default=r},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(r,i,c){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function d(b){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=function(b){if(b&&b.__esModule)return b;if(b===null||d(b)!=="object"&&typeof b!="function")return{default:b};var y=l();if(y&&y.has(b))return y.get(b);var u,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in b){var m;Object.prototype.hasOwnProperty.call(b,u)&&((m=h?Object.getOwnPropertyDescriptor(b,u):null)&&(m.get||m.set)?Object.defineProperty(p,u,m):p[u]=b[u])}return p.default=b,y&&y.set(b,p),p}(r("./constants"));function l(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,l=function(){return b},b)}c.default={modeAdjust:function(b,y,u,p,h){return h===a.CORNER?{x:b,y,w:u,h:p}:h===a.CORNERS?{x:b,y,w:u-b,h:p-y}:h===a.RADIUS?{x:b-u,y:y-p,w:2*u,h:2*p}:h===a.CENTER?{x:b-.5*u,y:y-.5*p,w:u,h:p}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(r,i,c){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(d=r("../core/main"))&&d.__esModule?d:{default:d};r("./internationalization");var d=Promise.resolve();Promise.all([new Promise(function(a,l){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),d]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(r,i,c){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.setTranslatorLanguage=c.currentTranslatorLanguage=c.availableTranslatorLanguages=c.initialize=c.translator=void 0;var o,d,a=b(r("i18next")),l=b(r("i18next-browser-languagedetector"));function b(p){return p&&p.__esModule?p:{default:p}}function y(p,h){for(var m=0;m<h.length;m++){var g=h[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}var u=function(){function p(g,f){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.init(g,f)}var h,m;return h=p,(m=[{key:"fetchWithTimeout",value:function(g,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,f),new Promise(function(_,x){return setTimeout(function(){return x(new Error("timeout"))},v)})])}},{key:"init",value:function(g){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=f}},{key:"read",value:function(g,f,v){var _=this.options.loadPath;g===this.options.fallback?v(null,o[g][f]):d.includes(g)?(_=this.services.interpolator.interpolate(_,{lng:g,ns:f}),this.loadUrl(_,v)):v("Not found",!1)}},{key:"loadUrl",value:function(g,f){this.fetchWithTimeout(g).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(v){return f(null,v)}).catch(f)}}])&&y(h.prototype,m),p}();u.type="backend",c.translator=function(p,h){console.debug("p5.js translator called before translations were loaded"),a.default.t(p,h)},c.initialize=function(){return a.default.use(l.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(p){c.translator=p},function(p){return console.debug("Translations failed to load (".concat(p,")"))})},c.availableTranslatorLanguages=function(){return a.default.languages},c.currentTranslatorLanguage=function(p){return a.default.language},c.setTranslatorLanguage=function(p){return a.default.changeLanguage(p||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,c.default=r},{"./main":280}],280:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function d(p){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r("./shim");var a=function(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var h=l();if(h&&h.has(p))return h.get(p);var m,g={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var v;Object.prototype.hasOwnProperty.call(p,m)&&((v=f?Object.getOwnPropertyDescriptor(p,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(r("./constants"));function l(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,l=function(){return p},p)}function b(p,h){for(var m=0;m<h.length;m++){var g=h[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}var y,u=function(){function p(g,_){var v=this;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=_,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var _=Object.getOwnPropertyNames(p.prototype._registeredMethods),x=!0,j=!1,M=void 0;try{for(var S,P=_[Symbol.iterator]();!(x=(S=P.next()).done);x=!0){var L=S.value;this._registeredMethods[L]=p.prototype._registeredMethods[L].slice()}}catch(G){j=!0,M=G}finally{try{x||P.return==null||P.return()}finally{if(j)throw M}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),p.prototype.callRegisteredHooksFor=function(G){var z=this||p.prototype,Y=this._isGlobal?window:this;if(z._registeredMethods.hasOwnProperty(G)){var z=z._registeredMethods[G],$=!0,G=!1,ie=void 0;try{for(var E,R=z[Symbol.iterator]();!($=(E=R.next()).done);$=!0){var B=E.value;typeof B=="function"&&B.call(Y)}}catch(te){G=!0,ie=te}finally{try{$||R.return==null||R.return()}finally{if(G)throw ie}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var G=v._isGlobal?window:v;if(G.preload){v.callRegisteredHooksFor("beforePreload");var z,Y=document.getElementById(v._loadingScreenId),$=(Y||((Y=document.createElement("div")).innerHTML="Loading...",Y.style.position="absolute",Y.id=v._loadingScreenId,(v._userNode||document.body).appendChild(Y)),v._preloadMethods);for(z in $){$[z]=$[z]||p;var ie=$[z];ie!==p.prototype&&ie!==p||(v._isGlobal&&(window[z]=v._wrapPreload(v,z)),ie=v),v._registeredPreloadMethods[z]=ie[z],ie[z]=v._wrapPreload(ie,z)}G.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var G,z=this._isGlobal?window:this;z._preloadCount===0&&((G=document.getElementById(z._loadingScreenId))&&G.parentNode.removeChild(G),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),z._setup(),this._recording||z._draw()))},this._decrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||typeof G.preload!="function"||(G._setProperty("_preloadCount",G._preloadCount-1),G._runIfPreloadsAreDone())},this._wrapPreload=function(G,z){var Y=this;return function(){Y._incrementPreload();for(var $=arguments.length,ie=new Array($),E=0;E<$;E++)ie[E]=arguments[E];return Y._registeredPreloadMethods[z].apply(G,ie)}},this._incrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||G._setProperty("_preloadCount",G._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var G=v._isGlobal?window:v;if(typeof G.preload=="function")for(var z in v._preloadMethods)G[z]=v._preloadMethods[z][z],G[z]&&v&&(G[z]=G[z].bind(v));v._millisStart=window.performance.now(),G._preloadDone=!0,typeof G.setup=="function"&&G.setup();var Y=document.getElementsByTagName("canvas"),$=!0,ie=!1,E=void 0;try{for(var R,B=Y[Symbol.iterator]();!($=(R=B.next()).done);$=!0){var H=R.value;H.dataset.hidden==="true"&&(H.style.visibility="",delete H.dataset.hidden)}}catch(Z){ie=!0,E=Z}finally{try{$||B.return==null||B.return()}finally{if(ie)throw E}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var G=window.performance.now(),z=G-v._lastTargetFrameTime,Y=1e3/v._targetFrameRate;(!v._loop||Y-5<=z)&&(v.deltaTime=G-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+Y,G),v._lastRealFrameTime=G,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(G,z){v[G]=z,v._isGlobal&&(window[G]=z)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var G=document.getElementById(v._loadingScreenId);if(G&&(G.parentNode.removeChild(G),v._incrementPreload()),v._curElement){for(var z in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(z,v._events[z]);var Y=!0,G=!1,$=void 0;try{for(var ie,E=v._elements[Symbol.iterator]();!(Y=(ie=E.next()).done);Y=!0){var R,B=ie.value;for(R in B.elt&&B.elt.parentNode&&B.elt.parentNode.removeChild(B.elt),B._events)B.elt.removeEventListener(R,B._events[R])}}catch(pe){G=!0,$=pe}finally{try{Y||E.return==null||E.return()}finally{if(G)throw $}}var H=v;v._registeredMethods.remove.forEach(function(pe){pe!==void 0&&pe.call(H)})}if(v._isGlobal){for(var Z in p.prototype)try{delete window[Z]}catch{window[Z]=void 0}for(var te in v)if(v.hasOwnProperty(te))try{delete window[te]}catch{window[te]=void 0}p.instance=null}},this._registeredMethods.init.forEach(function(G){G!==void 0&&G.call(this)},this),this._setupPromisePreloads();var D,k,I=this._createFriendlyGlobalFunctionBinder();if(g)g(this),p._checkForUserDefinedFunctions(this);else{for(var A in this._isGlobal=!0,p.instance=this,p.prototype)typeof p.prototype[A]=="function"?(D=A.substring(2),this._events.hasOwnProperty(D)||(Math.hasOwnProperty(A)&&Math[A]===p.prototype[A]?I(A,p.prototype[A]):I(A,p.prototype[A].bind(this)))):I(A,p.prototype[A]);for(var F in this)this.hasOwnProperty(F)&&I(F,this[F])}for(k in this._events){var N=this["_on".concat(k)];N&&(N=N.bind(this),window.addEventListener(k,N,{passive:!1}),this._events[k]=N)}function U(){v._setProperty("focused",!0)}function W(){v._setProperty("focused",!1)}window.addEventListener("focus",U),window.addEventListener("blur",W),this.registerMethod("remove",function(){window.removeEventListener("focus",U),window.removeEventListener("blur",W)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,m;return h=p,(m=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,f){p.prototype._preloadMethods.hasOwnProperty(g)||(p.prototype._preloadMethods[g]=f)}},{key:"registerMethod",value:function(g,f){var v=this||p.prototype;v._registeredMethods.hasOwnProperty(g)||(v._registeredMethods[g]=[]),v._registeredMethods[g].push(f)}},{key:"unregisterMethod",value:function(g,f){var v=this||p.prototype;if(v._registeredMethods.hasOwnProperty(g)){for(var _=v._registeredMethods[g],x=[],j=0;j<_.length;j++)_[j]===f&&x.push(j);for(var M=x.length-1;0<=M;M--)_.splice(x[M],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},f=g.globalObject||window;return g.log||console.log.bind(console),function(v,_){p.disableFriendlyErrors,f[v]=_}}}])&&b(h.prototype,m),p}();for(y in u.instance=null,u.disableFriendlyErrors=!1,a)u.prototype[y]=a[y];u.VERSION=a.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},c.default=u},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};function d(a,l){for(var b=0;b<l.length;b++){var y=l[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(a,y.key,y)}}o.default.Element=function(){function a(u,p){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.elt=u,this._pInst=this._pixelsState=p,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var l,b,y;return l=a,y=[{key:"_adjustListener",value:function(u,p,h){return p===!1?o.default.Element._detachListener(u,h):o.default.Element._attachListener(u,p,h),this}},{key:"_attachListener",value:function(u,p,h){h._events[u]&&o.default.Element._detachListener(u,h),p=p.bind(h),h.elt.addEventListener(u,p,!1),h._events[u]=p}},{key:"_detachListener",value:function(u,p){var h=p._events[u];p.elt.removeEventListener(u,h,!1),p._events[u]=null}}],(b=[{key:"parent",value:function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)}},{key:"id",value:function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)}},{key:"mousePressed",value:function(u){return o.default.Element._adjustListener("mousedown",function(p){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(p),u.call(this,p)},this),this}},{key:"doubleClicked",value:function(u){return o.default.Element._adjustListener("dblclick",u,this),this}},{key:"mouseWheel",value:function(u){return o.default.Element._adjustListener("wheel",u,this),this}},{key:"mouseReleased",value:function(u){return o.default.Element._adjustListener("mouseup",u,this),this}},{key:"mouseClicked",value:function(u){return o.default.Element._adjustListener("click",u,this),this}},{key:"mouseMoved",value:function(u){return o.default.Element._adjustListener("mousemove",u,this),this}},{key:"mouseOver",value:function(u){return o.default.Element._adjustListener("mouseover",u,this),this}},{key:"mouseOut",value:function(u){return o.default.Element._adjustListener("mouseout",u,this),this}},{key:"touchStarted",value:function(u){return o.default.Element._adjustListener("touchstart",u,this),this}},{key:"touchMoved",value:function(u){return o.default.Element._adjustListener("touchmove",u,this),this}},{key:"touchEnded",value:function(u){return o.default.Element._adjustListener("touchend",u,this),this}},{key:"dragOver",value:function(u){return o.default.Element._adjustListener("dragover",u,this),this}},{key:"dragLeave",value:function(u){return o.default.Element._adjustListener("dragleave",u,this),this}},{key:"_setProperty",value:function(u,p){this[u]=p}}])&&d(l.prototype,b),y&&d(l,y),a}(),r=o.default.Element,c.default=r},{"./main":280}],282:[function(r,i,c){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function d(v){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(f=r("./main"))&&f.__esModule?f:{default:f},l=function(v){if(v&&v.__esModule)return v;if(v===null||d(v)!=="object"&&typeof v!="function")return{default:v};var _=b();if(_&&_.has(v))return _.get(v);var x,j={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(j,x,S):j[x]=v[x])}return j.default=v,_&&_.set(v,j),j}(r("./constants"));function b(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,b=function(){return v},v)}function y(v,_){for(var x=0;x<_.length;x++){var j=_[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(v,j.key,j)}}function u(v,_){return(u=Object.setPrototypeOf||function(x,j){return x.__proto__=j,x})(v,_)}function p(v){return function(){var _,x=g(v);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=g(this).constructor,Reflect.construct(x,arguments,_)):x.apply(this,arguments))}}function h(v,_){return!_||d(_)!=="object"&&typeof _!="function"?m(v):_}function m(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}a.default.Graphics=function(v){var _=j;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&u(_,v);var x=p(j);function j(M,S,F,L,D){var k;if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");A=D||document.createElement("canvas"),(k=x.call(this,A,L)).canvas=A;var I,A=F||l.P2D,F=L._userNode||document.body;for(I in D||F.appendChild(k.canvas),a.default.prototype)k[I]||(typeof a.default.prototype[I]=="function"?k[I]=a.default.prototype[I].bind(m(k)):k[I]=a.default.prototype[I]);return a.default.prototype._initializeInstanceVariables.apply(m(k)),k.width=M,k.height=S,k._pixelDensity=L._pixelDensity,A===l.WEBGL?(k._renderer=new a.default.RendererGL(k.canvas,m(k),!1),M=(D=k._renderer._adjustDimensions(M,S)).adjustedWidth,S=D.adjustedHeight):k._renderer=new a.default.Renderer2D(k.canvas,m(k),!1),L._elements.push(m(k)),Object.defineProperty(m(k),"deltaTime",{get:function(){return this._pInst.deltaTime}}),k._renderer.resize(M,S),k._renderer._applyDefaults(),h(k,m(k))}return _=j,(v=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var M,S=this._pInst._elements.indexOf(this);for(M in S!==-1&&this._pInst._elements.splice(S,1),this._events)this.elt.removeEventListener(M,this._events[M])}},{key:"createFramebuffer",value:function(M){return new a.default.Framebuffer(this,M)}}])&&y(_.prototype,v),j}(a.default.Element);var f=a.default.Graphics;c.default=f},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(r,i,c){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(g=r("./main"))&&g.__esModule?g:{default:g},a=function(v){if(v&&v.__esModule)return v;if(v===null||b(v)!=="object"&&typeof v!="function")return{default:v};var _=l();if(_&&_.has(v))return _.get(v);var x,j={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(j,x,S):j[x]=v[x])}return j.default=v,_&&_.set(v,j),j}(r("../core/constants"));function l(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,l=function(){return v},v)}function b(v){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}function y(v,_){for(var x=0;x<_.length;x++){var j=_[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(v,j.key,j)}}function u(v,_){return(u=Object.setPrototypeOf||function(x,j){return x.__proto__=j,x})(v,_)}function p(v){return function(){var _,x,j=m(v);return _=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=m(this).constructor,Reflect.construct(j,arguments,_)):j.apply(this,arguments),j=this,!(x=_)||b(x)!=="object"&&typeof x!="function"?h(j):x}}function h(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function m(v){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}var g=function(v){var _=j;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&u(_,v);var x=p(j);function j(M,S,P){var L;if(this instanceof j)return(L=x.call(this,M,S)).canvas=M,L._pixelsState=S,P?(L._isMainCanvas=!0,L._pInst._setProperty("_curElement",h(L)),L._pInst._setProperty("canvas",L.canvas),L._pInst._setProperty("width",L.width),L._pInst._setProperty("height",L.height)):(L.canvas.style.display="none",L._styles=[]),L._clipping=!1,L._clipInvert=!1,L._textSize=12,L._textLeading=15,L._textFont="sans-serif",L._textStyle=a.NORMAL,L._textAscent=null,L._textDescent=null,L._textAlign=a.LEFT,L._textBaseline=a.BASELINE,L._textWrap=a.WORD,L._rectMode=a.CORNER,L._ellipseMode=a.CENTER,L._curveTightness=0,L._imageMode=a.CORNER,L._tint=null,L._doStroke=!0,L._doFill=!0,L._strokeSet=!1,L._fillSet=!1,L._leadingSet=!1,L._pushPopDepth=0,L;throw new TypeError("Cannot call a class as a function")}return _=j,(v=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(M){this._pushPopDepth--,M.properties&&Object.assign(this,M.properties)}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=M.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(M,S){this.width=M,this.height=S,this.elt.width=M*this._pInst._pixelDensity,this.elt.height=S*this._pInst._pixelDensity,this.elt.style.width="".concat(M,"px"),this.elt.style.height="".concat(S,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(M,S,P,L){var D=this._pixelsState,k=D._pixelDensity,I=this.canvas;if(M===void 0&&S===void 0)M=S=0,P=D.width,L=D.height;else if(M*=k,S*=k,P===void 0&&L===void 0)return M<0||S<0||M>=I.width||S>=I.height?[0,0,0,0]:this._getPixel(M,S);return D=new d.default.Image(P*k,L*k),D.pixelDensity(k),D.canvas.getContext("2d").drawImage(I,M,S,P*k,L*k,0,0,P*k,L*k),D}},{key:"textLeading",value:function(M){return typeof M=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",M),this._pInst):this._textLeading}},{key:"textStyle",value:function(M){return M?(M!==a.NORMAL&&M!==a.ITALIC&&M!==a.BOLD&&M!==a.BOLDITALIC||this._setProperty("_textStyle",M),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(M,S){return M!==void 0?(this._setProperty("_textAlign",M),S!==void 0&&this._setProperty("_textBaseline",S),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(M){return this._setProperty("_textWrap",M),this._textWrap}},{key:"text",value:function(M,S,P,L,D){var k,I,A,F,N=this._pInst,U=this._textWrap,W=Number.MAX_VALUE,G=P;if((this._doFill||this._doStroke)&&M!==void 0){if(k=(M=(M=typeof M!="string"?M.toString():M).replace(/(\t)/g,"  ")).split(`
`),L!==void 0){switch(this._rectMode===a.CENTER&&(S-=L/2),this._textAlign){case a.CENTER:S+=L/2;break;case a.RIGHT:S+=L}if(D!==void 0){this._rectMode===a.CENTER&&(P-=D/2,G-=D/2);var M=P,z=N.textAscent();switch(this._textBaseline){case a.BOTTOM:F=P+D,P=Math.max(F,P),G+=z;break;case a.CENTER:F=P+D/2,P=Math.max(F,P),G+=z/2}W=P+D-z,this._textBaseline===a.CENTER&&(W=M+D-z/2)}else this._textBaseline!==a.BOTTOM&&this._textBaseline!==a.CENTER||(G=P-(M=N.textSize()*this._textLeading)/2,W=P+M/2);if(U===a.WORD){for(var Y=[],$=0;$<k.length;$++){for(var ie="",E=k[$].split(" "),R=0;R<E.length;R++)I="".concat(ie+E[R])+" ",ie=L<(A=this.textWidth(I))&&0<ie.length?(Y.push(ie),"".concat(E[R])+" "):I;Y.push(ie)}var B=0;this._textBaseline===a.CENTER?B=(Y.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(B=(Y.length-1)*N.textLeading());for(var H=0;H<k.length;H++){ie="",E=k[H].split(" ");for(var Z=0;Z<E.length;Z++)I="".concat(ie+E[Z])+" ",L<(A=this.textWidth(I))&&0<ie.length?(this._renderText(N,ie.trim(),S,P-B,W,G),ie="".concat(E[Z])+" ",P+=N.textLeading()):ie=I;this._renderText(N,ie.trim(),S,P-B,W,G),P+=N.textLeading()}}else{for(var te=[],se=0;se<k.length;se++)for(var pe=k[se].split(ie=""),oe=0;oe<pe.length;oe++)I="".concat(ie+pe[oe]),(A=this.textWidth(I))<=L?ie+=pe[oe]:L<A&&0<ie.length&&(te.push(ie),ie="".concat(pe[oe]));te.push(ie);var he=0;this._textBaseline===a.CENTER?he=(te.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(he=(te.length-1)*N.textLeading());for(var de=0;de<k.length;de++){pe=k[de].split(ie="");for(var J=0;J<pe.length;J++)I="".concat(ie+pe[J]),(A=this.textWidth(I))<=L?ie+=pe[J]:L<A&&0<ie.length&&(this._renderText(N,ie.trim(),S,P-he,W,G),P+=N.textLeading(),ie="".concat(pe[J]))}this._renderText(N,ie.trim(),S,P-he,W,G),P+=N.textLeading()}}else{var ue=0;this._textBaseline===a.CENTER?ue=(k.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(ue=(k.length-1)*N.textLeading());for(var ye=0;ye<k.length;ye++)this._renderText(N,k[ye],S,P-ue,W,G-ue),P+=N.textLeading()}return N}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return b(M)==="object"&&M.font&&M.font.supported}},{key:"_updateTextMetrics",value:function(){var M,S,P,L,D,k;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((M=document.createElement("span")).style.fontFamily=this._textFont,M.style.fontSize="".concat(this._textSize,"px"),M.innerHTML="ABCjgq|",(k=document.createElement("div")).style.display="inline-block",k.style.width="1px",k.style.height="0px",L=((S=document.createElement("div")).appendChild(M),S.appendChild(k),S.style.height="0px",S.style.overflow="hidden",document.body.appendChild(S),k.style.verticalAlign="baseline",f(k)),D=f(M),P=L[1]-D[1],L=(k.style.verticalAlign="bottom",f(k)),D=f(M),k=L[1]-D[1]-P,document.body.removeChild(S),this._setProperty("_textAscent",P),this._setProperty("_textDescent",k)),this}}])&&y(_.prototype,v),j}(d.default.Element);function f(v){var _=0,x=0;if(v.offsetParent)for(;_+=v.offsetLeft,x+=v.offsetTop,v=v.offsetParent;);else _+=v.offsetLeft,x+=v.offsetTop;return[_,x]}g.prototype.textSize=function(v){return typeof v=="number"?(this._setProperty("_textSize",v),this._leadingSet||this._setProperty("_textLeading",v*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},d.default.Renderer=g,r=d.default.Renderer,c.default=r},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(v,i,c){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function d(_){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}v("core-js/modules/es.symbol"),v("core-js/modules/es.symbol.description"),v("core-js/modules/es.symbol.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.for-each"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.number.to-fixed"),v("core-js/modules/es.object.get-own-property-descriptor"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.reflect.construct"),v("core-js/modules/es.reflect.get"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.iterator"),v("core-js/modules/es.weak-map"),v("core-js/modules/web.dom-collections.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.for-each"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.number.to-fixed"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(f=v("./main"))&&f.__esModule?f:{default:f},l=function(_){if(_&&_.__esModule)return _;if(_===null||d(_)!=="object"&&typeof _!="function")return{default:_};var x=b();if(x&&x.has(_))return x.get(_);var j,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in _){var P;Object.prototype.hasOwnProperty.call(_,j)&&((P=S?Object.getOwnPropertyDescriptor(_,j):null)&&(P.get||P.set)?Object.defineProperty(M,j,P):M[j]=_[j])}return M.default=_,x&&x.set(_,M),M}(v("./constants"));function b(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,b=function(){return _},_)}function y(_,x){for(var j=0;j<x.length;j++){var M=x[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function u(_,x,j){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,S,P){var L=function(D,k){for(;!Object.prototype.hasOwnProperty.call(D,k)&&(D=m(D))!==null;);return D}(L,S);if(L)return(L=Object.getOwnPropertyDescriptor(L,S)).get?L.get.call(P):L.value})(_,x,j||_)}function p(_,x){return(p=Object.setPrototypeOf||function(j,M){return j.__proto__=M,j})(_,x)}function h(_){return function(){var x,j=m(_),j=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=m(this).constructor,Reflect.construct(j,arguments,x)):j.apply(this,arguments),this);if(!x||d(x)!=="object"&&typeof x!="function"){if(j!==void 0)return j;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function m(_){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}v("./p5.Renderer");var g="rgba(0,0,0,0)",f=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&p(x,_);var j=h(M);function M(S,P,L){if(this instanceof M)return(S=j.call(this,S,P,L)).drawingContext=S.canvas.getContext("2d"),S._pInst._setProperty("drawingContext",S.drawingContext),S;throw new TypeError("Cannot call a class as a function")}return x=M,(_=[{key:"getFilterGraphicsLayer",value:function(){var S;return this.filterGraphicsLayer||(S=(this._pInst instanceof a.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new a.default.Graphics(this.width,this.height,l.WEBGL,S)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=l.BLEND,this._setFill(l._DEFAULT_FILL),this._setStroke(l._DEFAULT_STROKE),this.drawingContext.lineCap=l.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(S,P){u(m(M.prototype),"resize",this).call(this,S,P),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var S,P;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(S=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(S,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(S=this._getFill(),P=(P=this._pInst).color.apply(P,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(P.levels),P=P.toString(),this._setFill(P),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(S),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var S=(S=this._pInst).color.apply(S,arguments);this._setFill(S.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",S.levels)}},{key:"stroke",value:function(){var S=(S=this._pInst).color.apply(S,arguments);this._setStroke(S.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",S.levels)}},{key:"erase",value:function(S,P){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,S=this._pInst.color(255,S).toString(),this.drawingContext.fillStyle=S,this._cachedStrokeStyle=this.drawingContext.strokeStyle,S=this._pInst.color(255,P).toString(),this.drawingContext.strokeStyle=S,P=this._cachedBlendMode,this.blendMode(l.REMOVE),this._cachedBlendMode=P,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},S=(u(m(M.prototype),"beginClip",this).call(this,S),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),S=(this.drawingContext.fillStyle=S,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),S=(this.drawingContext.strokeStyle=S,this._cachedBlendMode);this.blendMode(l.BLEND),this._cachedBlendMode=S,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),u(m(M.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(S,P,L,D,k,I,A,F,N){S.gifProperties&&S._animateGif(this._pInst);try{a.default.MediaElement&&S instanceof a.default.MediaElement&&S._ensureCanvas();var U=(U=this._tint&&S.canvas?this._getTintedImageCanvas(S):U)||S.canvas||S.elt,W=1;S.width&&0<S.width&&(W=U.width/S.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(U,W*P,W*L,W*D,W*k,I,A,F,N),this._isErasing&&this._pInst.erase()}catch(G){if(G.name!=="NS_ERROR_NOT_AVAILABLE")throw G}}},{key:"_getTintedImageCanvas",value:function(S){if(!S.canvas)return S;S.tintCanvas||(S.tintCanvas=document.createElement("canvas")),S.tintCanvas.width!==S.canvas.width&&(S.tintCanvas.width=S.canvas.width),S.tintCanvas.height!==S.canvas.height&&(S.tintCanvas.height=S.canvas.height);var P=S.tintCanvas.getContext("2d");return P.save(),P.clearRect(0,0,S.canvas.width,S.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(P.drawImage(S.canvas,0,0),P.globalCompositeOperation="luminosity",P.drawImage(S.canvas,0,0),P.globalCompositeOperation="color",P.drawImage(S.canvas,0,0),P.globalCompositeOperation="multiply",P.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),P.fillRect(0,0,S.canvas.width,S.canvas.height),P.globalCompositeOperation="destination-in"),P.globalAlpha=this._tint[3]/255,P.drawImage(S.canvas,0,0),P.restore(),S.tintCanvas}},{key:"blendMode",value:function(S){if(S===l.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(S!==l.BLEND&&S!==l.REMOVE&&S!==l.DARKEST&&S!==l.LIGHTEST&&S!==l.DIFFERENCE&&S!==l.MULTIPLY&&S!==l.EXCLUSION&&S!==l.SCREEN&&S!==l.REPLACE&&S!==l.OVERLAY&&S!==l.HARD_LIGHT&&S!==l.SOFT_LIGHT&&S!==l.DODGE&&S!==l.BURN&&S!==l.ADD)throw new Error("Mode ".concat(S," not recognized."));this._cachedBlendMode=S,this.drawingContext.globalCompositeOperation=S}}},{key:"blend",value:function(){for(var S=this.drawingContext.globalCompositeOperation,P=arguments.length,L=new Array(P),D=0;D<P;D++)L[D]=arguments[D];var k=L[L.length-1],I=Array.prototype.slice.call(L,0,L.length-1);this.drawingContext.globalCompositeOperation=k,a.default.prototype.copy.apply(this,I),this.drawingContext.globalCompositeOperation=S}},{key:"_getPixel",value:function(S,P){return S=this.drawingContext.getImageData(S,P,1,1).data,[S[0],S[1],S[2],S[3]]}},{key:"loadPixels",value:function(){var S=this._pixelsState,P=S._pixelDensity,L=this.width*P,P=this.height*P,L=this.drawingContext.getImageData(0,0,L,P);S._setProperty("imageData",L),S._setProperty("pixels",L.data)}},{key:"set",value:function(S,P,L){S=Math.floor(S),P=Math.floor(P);var D=this._pixelsState;if(L instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(D._pixelDensity,D._pixelDensity),this.drawingContext.clearRect(S,P,L.width,L.height),this.drawingContext.drawImage(L.canvas,S,P),this.drawingContext.restore();else{var k=0,I=0,A=0,F=0,N=4*(P*D._pixelDensity*(this.width*D._pixelDensity)+S*D._pixelDensity);if(D.imageData||D.loadPixels(),typeof L=="number")N<D.pixels.length&&(A=I=k=L,F=255);else if(Array.isArray(L)){if(L.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");N<D.pixels.length&&(k=L[0],I=L[1],A=L[2],F=L[3])}else L instanceof a.default.Color&&N<D.pixels.length&&(k=L.levels[0],I=L.levels[1],A=L.levels[2],F=L.levels[3]);for(var U=0;U<D._pixelDensity;U++)for(var W=0;W<D._pixelDensity;W++)N=4*((P*D._pixelDensity+W)*this.width*D._pixelDensity+(S*D._pixelDensity+U)),D.pixels[N]=k,D.pixels[N+1]=I,D.pixels[N+2]=A,D.pixels[N+3]=F}}},{key:"updatePixels",value:function(S,P,L,D){var k=this._pixelsState,I=k._pixelDensity;S===void 0&&P===void 0&&L===void 0&&D===void 0&&(P=S=0,L=this.width,D=this.height),S*=I,P*=I,L*=I,D*=I,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=k.imageData),this.drawingContext.putImageData(k.imageData,S,P,0,0,L,D)}},{key:"_acuteArcToBezier",value:function(S,P){var I=P/2,L=Math.cos(I),F=Math.sin(I),D=1/Math.tan(I),I=S+I,k=Math.cos(I),I=Math.sin(I),A=(4-L)/3,F=F+(L-A)*D;return{ax:Math.cos(S).toFixed(7),ay:Math.sin(S).toFixed(7),bx:(A*k+F*I).toFixed(7),by:(A*I-F*k).toFixed(7),cx:(A*k-F*I).toFixed(7),cy:(A*I+F*k).toFixed(7),dx:Math.cos(S+P).toFixed(7),dy:Math.sin(S+P).toFixed(7)}}},{key:"arc",value:function(S,P,L,D,k,I,A){var F,N=this.drawingContext,U=L/2,W=D/2,G=[];for(S+=U,P+=W;1e-5<=I-k;)F=Math.min(I-k,l.HALF_PI),G.push(this._acuteArcToBezier(k,F)),k+=F;return this._doFill&&(this._clipping||N.beginPath(),G.forEach(function(z,Y){Y===0&&N.moveTo(S+z.ax*U,P+z.ay*W),N.bezierCurveTo(S+z.bx*U,P+z.by*W,S+z.cx*U,P+z.cy*W,S+z.dx*U,P+z.dy*W)}),A!==l.PIE&&A!=null||N.lineTo(S,P),N.closePath(),this._clipping||N.fill()),this._doStroke&&(this._clipping||N.beginPath(),G.forEach(function(z,Y){Y===0&&N.moveTo(S+z.ax*U,P+z.ay*W),N.bezierCurveTo(S+z.bx*U,P+z.by*W,S+z.cx*U,P+z.cy*W,S+z.dx*U,P+z.dy*W)}),A===l.PIE?(N.lineTo(S,P),N.closePath()):A===l.CHORD&&N.closePath(),this._clipping||N.stroke()),this}},{key:"ellipse",value:function(F){var P=this.drawingContext,L=this._doFill,D=this._doStroke,k=parseFloat(F[0]),I=parseFloat(F[1]),A=parseFloat(F[2]),F=parseFloat(F[3]);if(L&&!D){if(this._getFill()===g)return this}else if(!L&&D&&this._getStroke()===g)return this;k+=A/2,I+=F/2,A/=2,F/=2,this._clipping||P.beginPath(),P.ellipse(k,I,A,F,0,0,2*Math.PI),!this._clipping&&L&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"line",value:function(S,P,L,D){var k=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||k.beginPath(),k.moveTo(S,P),k.lineTo(L,D),k.stroke()),this}},{key:"point",value:function(S,P){var L,D,k=this.drawingContext;return!this._doStroke||this._getStroke()===g?this:(L=this._getStroke(),D=this._getFill(),this._clipping||this._setFill(L),this._clipping||k.beginPath(),k.arc(S,P,k.lineWidth/2,0,l.TWO_PI,!1),void(this._clipping||(k.fill(),this._setFill(D))))}},{key:"quad",value:function(S,P,L,D,k,I,A,F){var N=this.drawingContext,U=this._doFill,W=this._doStroke;if(U&&!W){if(this._getFill()===g)return this}else if(!U&&W&&this._getStroke()===g)return this;return this._clipping||N.beginPath(),N.moveTo(S,P),N.lineTo(L,D),N.lineTo(k,I),N.lineTo(A,F),N.closePath(),!this._clipping&&U&&N.fill(),!this._clipping&&W&&N.stroke(),this}},{key:"rect",value:function(W){var P,L,D=W[0],k=W[1],I=W[2],A=W[3],F=W[4],N=W[5],U=W[6],W=W[7],G=this.drawingContext,z=this._doFill,Y=this._doStroke;if(z&&!Y){if(this._getFill()===g)return this}else if(!z&&Y&&this._getStroke()===g)return this;return this._clipping||G.beginPath(),F===void 0?G.rect(D,k,I,A):(N===void 0&&(N=F),U===void 0&&(U=N),W===void 0&&(W=U),Y=(z=Math.abs(I))/2,L=(P=Math.abs(A))/2,P<2*(F=z<2*F?Y:F)&&(F=L),P<2*(N=z<2*N?Y:N)&&(N=L),P<2*(U=z<2*U?Y:U)&&(U=L),P<2*(W=z<2*W?Y:W)&&(W=L),this._clipping||G.beginPath(),G.moveTo(D+F,k),G.arcTo(D+I,k,D+I,k+A,N),G.arcTo(D+I,k+A,D,k+A,U),G.arcTo(D,k+A,D,k,W),G.arcTo(D,k,D+I,k,F),G.closePath()),!this._clipping&&this._doFill&&G.fill(),!this._clipping&&this._doStroke&&G.stroke(),this}},{key:"triangle",value:function(U){var P=this.drawingContext,L=this._doFill,D=this._doStroke,k=U[0],I=U[1],A=U[2],F=U[3],N=U[4],U=U[5];if(L&&!D){if(this._getFill()===g)return this}else if(!L&&D&&this._getStroke()===g)return this;this._clipping||P.beginPath(),P.moveTo(k,I),P.lineTo(A,F),P.lineTo(N,U),P.closePath(),!this._clipping&&L&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"endShape",value:function(S,P,L,D,k,I,A){if(P.length!==0&&(this._doStroke||this._doFill)){var F,N,U,W=S===l.CLOSE,G=(W&&!I&&P.push(P[0]),P.length);if(L&&A===null){if(3<G){var z=[],Y=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[1][0],P[1][1]),N=1;N+2<G;N++)F=P[N],z[0]=[F[0],F[1]],z[1]=[F[0]+(Y*P[N+1][0]-Y*P[N-1][0])/6,F[1]+(Y*P[N+1][1]-Y*P[N-1][1])/6],z[2]=[P[N+1][0]+(Y*P[N][0]-Y*P[N+2][0])/6,P[N+1][1]+(Y*P[N][1]-Y*P[N+2][1])/6],z[3]=[P[N+1][0],P[N+1][1]],this.drawingContext.bezierCurveTo(z[1][0],z[1][1],z[2][0],z[2][1],z[3][0],z[3][1]);W&&this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this._doFillStrokeClose(W)}}else if(D&&A===null){for(this._clipping||this.drawingContext.beginPath(),N=0;N<G;N++)P[N].isVert?P[N].moveTo?this.drawingContext.moveTo(P[N][0],P[N][1]):this.drawingContext.lineTo(P[N][0],P[N][1]):this.drawingContext.bezierCurveTo(P[N][0],P[N][1],P[N][2],P[N][3],P[N][4],P[N][5]);this._doFillStrokeClose(W)}else if(k&&A===null){for(this._clipping||this.drawingContext.beginPath(),N=0;N<G;N++)P[N].isVert?P[N].moveTo?this.drawingContext.moveTo(P[N][0],P[N][1]):this.drawingContext.lineTo(P[N][0],P[N][1]):this.drawingContext.quadraticCurveTo(P[N][0],P[N][1],P[N][2],P[N][3]);this._doFillStrokeClose(W)}else if(A===l.POINTS)for(N=0;N<G;N++)F=P[N],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(A===l.LINES)for(N=0;N+1<G;N+=2)F=P[N],this._doStroke&&this._pInst.stroke(P[N+1][6]),this._pInst.line(F[0],F[1],P[N+1][0],P[N+1][1]);else if(A===l.TRIANGLES)for(N=0;N+2<G;N+=3)F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(P[N+2][0],P[N+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(P[N+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[N+2][6]),this.drawingContext.stroke());else if(A===l.TRIANGLE_STRIP)for(N=0;N+1<G;N++)F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+1][5]),N+2<G&&(this.drawingContext.lineTo(P[N+2][0],P[N+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+2][5])),this._doFillStrokeClose(W);else if(A===l.TRIANGLE_FAN){if(2<G){for(this._clipping||this.drawingContext.beginPath(),N=2;N<G;N++)F=P[N],this.drawingContext.moveTo(P[0][0],P[0][1]),this.drawingContext.lineTo(P[N-1][0],P[N-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[0][0],P[0][1]),N<G-1&&(this._doFill&&F[5]!==P[N+1][5]||this._doStroke&&F[6]!==P[N+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(P[N+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(P[N+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(W)}}else if(A===l.QUADS)for(N=0;N+3<G;N+=4){for(F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),U=1;U<4;U++)this.drawingContext.lineTo(P[N+U][0],P[N+U][1]);this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+3][6]),this._doFillStrokeClose(W)}else if(A===l.QUAD_STRIP){if(3<G)for(N=0;N+1<G;N+=2)F=P[N],this._clipping||this.drawingContext.beginPath(),N+3<G?(this.drawingContext.moveTo(P[N+2][0],P[N+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(P[N+3][0],P[N+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1])),this._doFillStrokeClose(W)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0][0],P[0][1]),N=1;N<G;N++)(F=P[N]).isVert&&(F.moveTo?(W&&this.drawingContext.closePath(),this.drawingContext.moveTo(F[0],F[1])):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(W)}I=k=D=L=!1,W&&P.pop()}return this}},{key:"strokeCap",value:function(S){return S!==l.ROUND&&S!==l.SQUARE&&S!==l.PROJECT||(this.drawingContext.lineCap=S),this}},{key:"strokeJoin",value:function(S){return S!==l.ROUND&&S!==l.BEVEL&&S!==l.MITER||(this.drawingContext.lineJoin=S),this}},{key:"strokeWeight",value:function(S){return this.drawingContext.lineWidth=S===void 0||S===0?1e-4:S,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(S){S!==this._cachedFillStyle&&(this.drawingContext.fillStyle=S,this._cachedFillStyle=S)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(S){S!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=S,this._cachedStrokeStyle=S)}},{key:"bezier",value:function(S,P,L,D,k,I,A,F){return this._pInst.beginShape(),this._pInst.vertex(S,P),this._pInst.bezierVertex(L,D,k,I,A,F),this._pInst.endShape(),this}},{key:"curve",value:function(S,P,L,D,k,I,A,F){return this._pInst.beginShape(),this._pInst.curveVertex(S,P),this._pInst.curveVertex(L,D),this._pInst.curveVertex(k,I),this._pInst.curveVertex(A,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(S){S&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(S,P,L,D,k,I){this.drawingContext.transform(S,P,L,D,k,I)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(S){this.drawingContext.rotate(S)}},{key:"scale",value:function(S,P){return this.drawingContext.scale(S,P),this}},{key:"translate",value:function(S,P){return S instanceof a.default.Vector&&(P=S.y,S=S.x),this.drawingContext.translate(S,P),this}},{key:"_renderText",value:function(S,P,L,D,k,I){if(!(D<I||k<=D))return S.push(),this._isOpenType()?this._textFont._renderPath(P,L,D,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(P,L,D),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(l._DEFAULT_TEXT_FILL),this.drawingContext.fillText(P,L,D))),S.pop(),S}},{key:"textWidth",value:function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):this.drawingContext.measureText(S).width}},{key:"_applyTextProperties",value:function(){var S=this._pInst,P=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),P=this._textFont,this._isOpenType()&&(P=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),P||"sans-serif");return/\s/.exec(P)&&(P='"'.concat(P,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(P),this.drawingContext.textAlign=this._textAlign,this._textBaseline===l.CENTER?this.drawingContext.textBaseline=l._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,S}},{key:"push",value:function(){return this.drawingContext.save(),u(m(M.prototype),"push",this).call(this)}},{key:"pop",value:function(S){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,u(m(M.prototype),"pop",this).call(this,S)}}])&&y(x.prototype,_),M}(a.default.Renderer),v=(f.prototype.text=function(_,x,j,L,S){L!==void 0&&this.drawingContext.textBaseline===l.BASELINE&&(P=!0,this.drawingContext.textBaseline=l.TOP);var P,L=a.default.Renderer.prototype.text.apply(this,arguments);return P&&(this.drawingContext.textBaseline=l.BASELINE),L},a.default.Renderer2D=f,a.default.Renderer2D);c.default=v},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.prototype._promisePreloads=[];function d(){return{}}var a=!(o.default.prototype.registerPromisePreload=function(l){o.default.prototype._promisePreloads.push(l)});o.default.prototype._setupPromisePreloads=function(){var l=!0,b=!1,y=void 0;try{for(var u,p=this._promisePreloads[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var h=u.value,m=this,g=h.method,f=h.addCallbacks,v=h.legacyPreloadSetup,_=h.target||this,x=_[g].bind(_);if(_===o.default.prototype){if(a)continue;m=null,x=_[g]}_[g]=this._wrapPromisePreload(m,x,f),v&&(_[v.method]=this._legacyPreloadGenerator(m,v,_[g]))}}catch(j){b=!0,y=j}finally{try{l||p.return==null||p.return()}finally{if(b)throw y}}a=!0},o.default.prototype._wrapPromisePreload=function(l,b,y){var u=function(){for(var p=this,h=(this._incrementPreload(),null),m=null,g=arguments.length,f=new Array(g),v=0;v<g;v++)f[v]=arguments[v];if(y)for(var _=f.length-1;0<=_&&!m&&typeof f[_]=="function";_--)m=h,h=f.pop();var x=Promise.resolve(b.apply(this,f));return h&&x.then(h),m&&x.catch(m),x.then(function(){return p._decrementPreload()}),x};return u=l?u.bind(l):u},o.default.prototype._legacyPreloadGenerator=function(l,p,y){var u=p.createBaseObject||d,p=function(){var h=this;this._incrementPreload();for(var m=arguments.length,g=new Array(m),f=0;f<m;f++)g[f]=arguments[f];var v=u.apply(this,g);return y.apply(this,g).then(function(_){Object.assign(v,_),h._decrementPreload()}),v};return p=l?p.bind(l):p}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(u=r("./main"))&&u.__esModule?u:{default:u},a=function(p){if(p&&p.__esModule)return p;if(p===null||b(p)!=="object"&&typeof p!="function")return{default:p};var h=l();if(h&&h.has(p))return h.get(p);var m,g={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var v;Object.prototype.hasOwnProperty.call(p,m)&&((v=f?Object.getOwnPropertyDescriptor(p,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(r("./constants"));function l(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,l=function(){return p},p)}function b(p){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var y="defaultCanvas0",u=(d.default.prototype.createCanvas=function(p,h,m,g){var f,v,_;if(d.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(m=a.P2D,g=arguments[2]):f=m||a.P2D,g)(_=document.getElementById(y))&&_.parentNode.removeChild(_),_=g,this._defaultGraphicsCreated=!1;else{if(f===a.WEBGL)(_=document.getElementById(y))&&(_.parentNode.removeChild(_),v=this._renderer,this._elements=this._elements.filter(function(j){return j!==v})),(_=document.createElement("canvas")).id=y,_.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)_=this.canvas;else{_=g||document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;y="defaultCanvas".concat(x),_.id=y,_.classList.add("p5Canvas")}this._setupDone||(_.dataset.hidden=!0,_.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(m=document.createElement("main"),document.body.appendChild(m)),document.getElementsByTagName("main")[0])).appendChild(_)}return f===a.WEBGL?(this._setProperty("_renderer",new d.default.RendererGL(_,this,!0)),this._elements.push(this._renderer),p=(g=this._renderer._adjustDimensions(p,h)).adjustedWidth,h=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new d.default.Renderer2D(_,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(p,h),this._renderer._applyDefaults(),this._renderer},d.default.prototype.resizeCanvas=function(p,h,m){if(d.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,f,v,_={};for(g in this.drawingContext){var x=this.drawingContext[g];b(x)!=="object"&&typeof x!="function"&&(_[g]=x)}for(v in this._renderer instanceof d.default.RendererGL&&(p=(f=this._renderer._adjustDimensions(p,h)).adjustedWidth,h=f.adjustedHeight),this.width=p,this.height=h,this._renderer.resize(p,h),_)try{this.drawingContext[v]=_[v]}catch{}m||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},d.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},d.default.prototype.createGraphics=function(p,h){for(var m=arguments.length,g=new Array(2<m?m-2:0),f=2;f<m;f++)g[f-2]=arguments[f];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=a.P2D),d.default._validateParameters("createGraphics",arguments),new d.default.Graphics(p,h,g[0],this,g[1])},d.default.prototype.createFramebuffer=function(p){return new d.default.Framebuffer(this,p)},d.default.prototype.clearDepth=function(p){this._assert3d("clearDepth"),this._renderer.clearDepth(p)},d.default.prototype.blendMode=function(p){d.default._validateParameters("blendMode",arguments),p===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),p=a.BLEND),this._renderer.blendMode(p)},d.default);c.default=u},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function d(h){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=u(r("../main")),l=function(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=y();if(m&&m.has(h))return m.get(h);var g,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var _;Object.prototype.hasOwnProperty.call(h,g)&&((_=v?Object.getOwnPropertyDescriptor(h,g):null)&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=h[g])}return f.default=h,m&&m.set(h,f),f}(r("../constants")),b=u(r("../helpers"));function y(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,y=function(){return h},h)}function u(h){return h&&h.__esModule?h:{default:h}}function p(h){return function(m){if(Array.isArray(m)){for(var g=0,f=new Array(m.length);g<m.length;g++)f[g]=m[g];return f}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(h,m,g,f,v){var _;return h-=l.TWO_PI*Math.floor(h/l.TWO_PI),m-=l.TWO_PI*Math.floor(m/l.TWO_PI),_=Math.min(Math.abs(h-m),l.TWO_PI-Math.abs(h-m)),v&&(h=h<=l.HALF_PI?Math.atan(g/f*Math.tan(h)):h>l.HALF_PI&&h<=3*l.HALF_PI?Math.atan(g/f*Math.tan(h))+l.PI:Math.atan(g/f*Math.tan(h))+l.TWO_PI,m=m<=l.HALF_PI?Math.atan(g/f*Math.tan(m)):m>l.HALF_PI&&m<=3*l.HALF_PI?Math.atan(g/f*Math.tan(m))+l.PI:Math.atan(g/f*Math.tan(m))+l.TWO_PI),m<h&&(m+=l.TWO_PI),{start:h,stop:m,correspondToSamePoint:_<1e-5}},a.default.prototype.arc=function(h,m,g,f,v,_,x,j){return a.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&v!==_&&(v=this._toRadians(v),_=this._toRadians(_),g=Math.abs(g),f=Math.abs(f),h=b.default.modeAdjust(h,m,g,f,this._renderer._ellipseMode),(m=this._normalizeArcAngles(v,_,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,j]):(this._renderer.arc(h.x,h.y,h.w,h.h,m.start,m.stop,x,j),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,m.start,m.stop,x]))),this},a.default.prototype.ellipse=function(h,m,g,f,v){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("circle",m);var f=m.slice(0,2);return f.push(m[2],m[2]),this._renderEllipse.apply(this,p(f))},a.default.prototype._renderEllipse=function(h,m,g,f,v){return(this._renderer._doStroke||this._renderer._doFill)&&(g<0&&(g=Math.abs(g)),f===void 0?f=g:f<0&&(f=Math.abs(f)),h=b.default.modeAdjust(h,m,g,f,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,v]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},a.default.prototype.line=function(){for(var h,m=arguments.length,g=new Array(m),f=0;f<m;f++)g[f]=arguments[f];return a.default._validateParameters("line",g),this._renderer._doStroke&&(h=this._renderer).line.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},a.default.prototype.point=function(){for(var h,m=arguments.length,g=new Array(m),f=0;f<m;f++)g[f]=arguments[f];return a.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((h=this._renderer).point.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},a.default.prototype.quad=function(){for(var h,m=arguments.length,g=new Array(m),f=0;f<m;f++)g[f]=arguments[f];return a.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((h=this._renderer).quad.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},a.default.prototype.rect=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return a.default._validateParameters("rect",m),this._renderRect.apply(this,m)},a.default.prototype.square=function(h,m,g,f,v,_,x){return a.default._validateParameters("square",arguments),this._renderRect.call(this,h,m,g,g,f,v,_,x)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var h=b.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),m=[h.x,h.y,h.w,h.h],g=4;g<arguments.length;g++)m[g]=arguments[g];this._renderer.rect(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},a.default.prototype.triangle=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return a.default._validateParameters("triangle",m),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",m),this},r=a.default,c.default=r},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../main"))&&y.__esModule?y:{default:y},l=function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.prototype.ellipseMode=function(u){return a.default._validateParameters("ellipseMode",arguments),u!==l.CORNER&&u!==l.CORNERS&&u!==l.RADIUS&&u!==l.CENTER||(this._renderer._ellipseMode=u),this},a.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(u){return a.default._validateParameters("rectMode",arguments),u!==l.CORNER&&u!==l.CORNERS&&u!==l.RADIUS&&u!==l.CENTER||(this._renderer._rectMode=u),this},a.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(u){return a.default._validateParameters("strokeCap",arguments),u!==l.ROUND&&u!==l.SQUARE&&u!==l.PROJECT||this._renderer.strokeCap(u),this},a.default.prototype.strokeJoin=function(u){return a.default._validateParameters("strokeJoin",arguments),u!==l.ROUND&&u!==l.BEVEL&&u!==l.MITER||this._renderer.strokeJoin(u),this},a.default.prototype.strokeWeight=function(u){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var y=a.default;c.default=y},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(d=r("../main"))&&d.__esModule?d:{default:d};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var a,l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("bezier",b),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,b),this},o.default.prototype.bezierDetail=function(a){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},o.default.prototype.bezierPoint=function(a,l,b,y,u){o.default._validateParameters("bezierPoint",arguments);var p=1-u;return Math.pow(p,3)*a+3*Math.pow(p,2)*u*l+3*p*Math.pow(u,2)*b+Math.pow(u,3)*y},o.default.prototype.bezierTangent=function(a,l,b,y,u){o.default._validateParameters("bezierTangent",arguments);var p=1-u;return 3*y*Math.pow(u,2)-3*b*Math.pow(u,2)+6*b*p*u-6*l*p*u+3*l*Math.pow(p,2)-3*a*Math.pow(p,2)},o.default.prototype.curve=function(){for(var a,l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("curve",b),this._renderer._doStroke&&(a=this._renderer).curve.apply(a,b),this},o.default.prototype.curveDetail=function(a){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},o.default.prototype.curveTightness=function(a){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},o.default.prototype.curvePoint=function(a,l,b,y,u){o.default._validateParameters("curvePoint",arguments);var p=this._renderer._curveTightness,h=u*u*u,m=u*u;return a*((p-1)/2*h+(1-p)*m+(p-1)/2*u)+l*((p+3)/2*h+(-5-p)/2*m+1)+b*((-3-p)/2*h+(p+2)*m+(1-p)/2*u)+y*((1-p)/2*h+(p-1)/2*m)},o.default.prototype.curveTangent=function(a,l,b,y,m){o.default._validateParameters("curveTangent",arguments);var p=this._renderer._curveTightness,h=m*m*3,m=2*m;return a*((p-1)/2*h+(1-p)*m+(p-1)/2)+l*((p+3)/2*h+(-5-p)/2*m)+b*((-3-p)/2*h+(p+2)*m+(1-p)/2)+y*((1-p)/2*h+(p-1)/2*m)};var d=o.default;c.default=d},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(r,i,c){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(x)}function d(x){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(j){return o(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":o(j)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(_=r("../main"))&&_.__esModule?_:{default:_},l=function(x){if(x&&x.__esModule)return x;if(x===null||d(x)!=="object"&&typeof x!="function")return{default:x};var j=b();if(j&&j.has(x))return j.get(x);var M,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in x){var L;Object.prototype.hasOwnProperty.call(x,M)&&((L=P?Object.getOwnPropertyDescriptor(x,M):null)&&(L.get||L.set)?Object.defineProperty(S,M,L):S[M]=x[M])}return S.default=x,j&&j.set(x,S),S}(r("../constants"));function b(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,b=function(){return x},x)}var y=null,u=[],p=[],h=!1,m=!1,g=!1,f=!1,v=!0,_=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(p=[],f=!0),this},a.default.prototype.beginShape=function(x){var j;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(j=this._renderer).beginShape.apply(j,arguments):(y=x===l.POINTS||x===l.LINES||x===l.TRIANGLES||x===l.TRIANGLE_FAN||x===l.TRIANGLE_STRIP||x===l.QUADS||x===l.QUAD_STRIP?x:null,u=[],p=[]),this},a.default.prototype.bezierVertex=function(){for(var x,j=arguments.length,M=new Array(j),S=0;S<j;S++)M[S]=arguments[S];if(a.default._validateParameters("bezierVertex",M),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,M);else if(u.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var P=[],L=0;L<M.length;L++)P[L]=M[L];P.isVert=!1,(f?p:u).push(P)}return this},a.default.prototype.curveVertex=function(){for(var x,j=arguments.length,M=new Array(j),S=0;S<j;S++)M[S]=arguments[S];return a.default._validateParameters("curveVertex",M),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,M):(m=!0,this.vertex(M[0],M[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var x=p[0].slice();x.isVert=p[0].isVert,x.moveTo=!1,p.push(x),v&&(u.push(u[0]),v=!1);for(var j=0;j<p.length;j++)u.push(p[j])}return this},a.default.prototype.endShape=function(x){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),j<1&&(console.log(" p5.js says: You can not have less than one instance"),j=1),this._renderer.isP3D)this._renderer.endShape(x,m,h,g,f,y,j);else{if(j!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;j=x===l.CLOSE,j&&!f&&u.push(u[0]),this._renderer.endShape(x,u,m,h,g,f,y),v=!(f=g=h=m=!1),j&&u.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var x,j=arguments.length,M=new Array(j),S=0;S<j;S++)M[S]=arguments[S];if(a.default._validateParameters("quadraticVertex",M),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,M);else{if(this._contourInited)return(x={}).x=M[0],x.y=M[1],x.x3=M[2],x.y3=M[3],x.type=l.QUADRATIC,this._contourVertices.push(x),this;if(0<u.length){g=!0;for(var P=[],L=0;L<M.length;L++)P[L]=M[L];P.isVert=!1,(f?p:u).push(P)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(x,j,M,S,P){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=x,L[1]=j,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),M&&(L.moveTo=M),(f?(p.length===0&&(L.moveTo=!0),p):u).push(L)),this},a.default.prototype.normal=function(x,j,M){var S;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(S=this._renderer).normal.apply(S,arguments),this},a.default);c.default=_},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(r,i,c){},{}],292:[function(r,i,c){r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var d=parseInt(o),a=((isNaN(d)||d<1)&&(d=1),this._isGlobal?window:this);if(typeof a.draw=="function"){a.setup===void 0&&a.scale(a._pixelDensity,a._pixelDensity);for(var l=0;l<d;l++){a.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),a._renderer.isP3D&&a._renderer._update(),a._setProperty("frameCount",a.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{a.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},r=r.default,c.default=r},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};function d(a){return function(l){if(Array.isArray(l)){for(var b=0,y=new Array(l.length);b<l.length;b++)y[b]=l[b];return y}}(a)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var a=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||a?(a=this._renderer).applyMatrix.apply(a,d(arguments.length<=0?void 0:arguments[0])):(a=this._renderer).applyMatrix.apply(a,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(a,l){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(a),l),this},o.default.prototype.rotateX=function(a){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(a)),this},o.default.prototype.rotateY=function(a){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(a)),this},o.default.prototype.rotateZ=function(a){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(a)),this},o.default.prototype.scale=function(a,l,b){var y;return o.default._validateParameters("scale",arguments),a instanceof o.default.Vector?(a=(y=a).x,l=y.y,b=y.z):Array.isArray(a)&&(a=(y=a)[0],l=y[1],b=y[2]||1),isNaN(l)?l=b=a:isNaN(b)&&(b=1),this._renderer.scale(a,l,b),this},o.default.prototype.shearX=function(a){return o.default._validateParameters("shearX",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,0,Math.tan(a),1,0,0),this},o.default.prototype.shearY=function(a){return o.default._validateParameters("shearY",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,Math.tan(a),0,1,0,0),this},o.default.prototype.translate=function(a,l,b){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(a,l,b):this._renderer.translate(a,l),this},r=o.default,c.default=r},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(r,i,c){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator");var d=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(b){return function(y){if(Array.isArray(y)){for(var u=0,p=new Array(y.length);u<y.length;u++)p[u]=y[u];return p}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(b){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(b)}d.default.prototype.storeItem=function(b,y){typeof b!="string"&&console.log("The argument that you passed to storeItem() - ".concat(b," is not a string.")),b.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(b," must not end with 'p5TypeID'.")),y===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=l(y);switch(u){case"number":case"boolean":y=y.toString();break;case"object":y instanceof d.default.Color?u="p5.Color":y instanceof d.default.Vector&&(u="p5.Vector",y=[y.x,y.y,y.z]),y=JSON.stringify(y)}localStorage.setItem(b,y),b="".concat(b,"p5TypeID"),localStorage.setItem(b,u)},d.default.prototype.getItem=function(b){var y=localStorage.getItem(b),u=localStorage.getItem("".concat(b,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(b,"in local storage. Did you save the item with something other than setItem()?"));else if(y!==null)switch(u){case"number":y=parseFloat(y);break;case"boolean":y=y==="true";break;case"object":y=JSON.parse(y);break;case"p5.Color":y=JSON.parse(y),y=this.color.apply(this,a(y.levels));break;case"p5.Vector":y=JSON.parse(y),y=this.createVector.apply(this,a(y))}return y},d.default.prototype.clearStorage=function(){var b=this;Object.keys(localStorage).forEach(function(y){y.endsWith("p5TypeID")&&b.removeItem(y.replace("p5TypeID",""))})},d.default.prototype.removeItem=function(b){typeof b!="string"&&console.log("The argument that you passed to removeItem() - ".concat(b," is not a string.")),localStorage.removeItem(b),localStorage.removeItem("".concat(b,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(r,i,c){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(g)}function d(g){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(f&&f.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),f&&b(g,f)}function b(g,f){return(b=Object.setPrototypeOf||function(v,_){return v.__proto__=_,v})(g,f)}function y(g){return function(){var f,v=u(g),v=(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(f=u(this).constructor,Reflect.construct(v,arguments,f)):v.apply(this,arguments),this);if(!f||d(f)!=="object"&&typeof f!="function"){if(v!==void 0)return v;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return f}}function u(g){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(g)}function p(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")}function h(g,f){for(var v=0;v<f.length;v++){var _=f[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}function m(g,f,v){f&&h(g.prototype,f)}a.default.prototype.createStringDict=function(g,f){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(g,f)},a.default.prototype.createNumberDict=function(g,f){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(g,f)},a.default.TypedDict=function(){function g(f,v){return p(this,g),f instanceof Object?this.data=f:(this.data={},this.data[f]=v),this}return m(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(f){return this.data.hasOwnProperty(f)}},{key:"get",value:function(f){if(this.data.hasOwnProperty(f))return this.data[f];console.log("".concat(f," does not exist in this Dictionary"))}},{key:"set",value:function(f,v){this._validate(v)?this.data[f]=v:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(f){for(var v in f)this.set(v,f[v])}},{key:"create",value:function(f,v){f instanceof Object&&v===void 0?this._addObj(f):f!==void 0?this.set(f,v):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(f){if(!this.data.hasOwnProperty(f))throw new Error("".concat(f," does not exist in this Dictionary"));delete this.data[f]}},{key:"print",value:function(){for(var f in this.data)console.log("key:".concat(f," value:").concat(this.data[f]))}},{key:"saveTable",value:function(f){var v,_="";for(v in this.data)_+="".concat(v,",").concat(this.data[v],`
`);var x=new Blob([_],{type:"text/csv"});a.default.prototype.downloadFile(x,f||"mycsv","csv")}},{key:"saveJSON",value:function(f,v){a.default.prototype.saveJSON(this.data,f,v)}},{key:"_validate",value:function(f){return!0}}]),g}(),a.default.StringDict=function(){l(f,a.default.TypedDict);var g=y(f);function f(){p(this,f);for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];return g.call.apply(g,[this].concat(_))}return m(f,[{key:"_validate",value:function(v){return typeof v=="string"}}]),f}(),a.default.NumberDict=function(){l(f,a.default.TypedDict);var g=y(f);function f(){p(this,f);for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];return g.call.apply(g,[this].concat(_))}return m(f,[{key:"_validate",value:function(v){return typeof v=="number"}},{key:"add",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]+=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"sub",value:function(v,_){this.add(v,-_)}},{key:"mult",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]*=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"div",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]/=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"_valueTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var _,x=this.data[Object.keys(this.data)[0]];for(_ in this.data)this.data[_]*v<x*v&&(x=this.data[_]);return x}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var _=Object.keys(this.data)[0],x=1;x<Object.keys(this.data).length;x++)Object.keys(this.data)[x]*v<_*v&&(_=Object.keys(this.data)[x]);return _}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),f}(),r=a.default.TypedDict,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(r,i,c){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(_,x){for(var j=0;j<x.length;j++){var M=x[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function l(_,x,j){x&&a(_.prototype,x),j&&a(_,j)}function b(_,x){return(b=Object.setPrototypeOf||function(j,M){return j.__proto__=M,j})(_,x)}function y(_){return function(){var x,j,M=p(_);return x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=p(this).constructor,Reflect.construct(M,arguments,x)):M.apply(this,arguments),M=this,!(j=x)||m(j)!=="object"&&typeof j!="function"?u(M):j}}function u(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function p(_){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}function h(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function m(_){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}function g(_,x,j){return(x._userNode||document.body).appendChild(_),j=new(j?d.default.MediaElement:d.default.Element)(_,x),x._elements.push(j),j}function f(_,L,j,M){var S=document.createElement(L),P=(typeof(j=j||"")=="string"&&(j=[j]),!0),L=!1,D=void 0;try{for(var k,I=j[Symbol.iterator]();!(P=(k=I.next()).done);P=!0){var A=k.value,F=document.createElement("source");F.setAttribute("src",A),S.appendChild(F)}}catch(U){L=!0,D=U}finally{try{P||I.return==null||I.return()}finally{if(L)throw D}}typeof M=="function"&&S.addEventListener("canplaythrough",function U(){M(),S.removeEventListener("canplaythrough",U)});var N=g(S,_,!0);return N.loadedmetadata=!1,S.addEventListener("loadedmetadata",function(){N.width=S.videoWidth,N.height=S.videoHeight,N.elt.width===0&&(N.elt.width=S.videoWidth),N.elt.height===0&&(N.elt.height=S.videoHeight),N.presetPlaybackRate&&(N.elt.playbackRate=N.presetPlaybackRate,delete N.presetPlaybackRate),N.loadedmetadata=!0}),N}d.default.prototype.select=function(_,x){return d.default._validateParameters("select",arguments),x=this._getContainer(x).querySelector(_),x?this._wrapElement(x):null},d.default.prototype.selectAll=function(_,x){d.default._validateParameters("selectAll",arguments);var j=[],M=this._getContainer(x).querySelectorAll(_);if(M)for(var S=0;S<M.length;S++){var P=this._wrapElement(M[S]);j.push(P)}return j},d.default.prototype._getContainer=function(_){var x=document;return typeof _=="string"?x=document.querySelector(_)||document:_ instanceof d.default.Element?x=_.elt:_ instanceof HTMLElement&&(x=_),x},d.default.prototype._wrapElement=function(_){var x,j=Array.prototype.slice.call(_.children);return _.tagName==="INPUT"&&_.type==="checkbox"?((x=new d.default.Element(_,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},x):_.tagName==="VIDEO"||_.tagName==="AUDIO"?new d.default.MediaElement(_,this):_.tagName==="SELECT"?this.createSelect(new d.default.Element(_,this)):0<j.length&&j.every(function(M){return M.tagName==="INPUT"||M.tagName==="LABEL"})?this.createRadio(new d.default.Element(_,this)):new d.default.Element(_,this)},d.default.prototype.removeElements=function(_){d.default._validateParameters("removeElements",arguments),this._elements.filter(function(x){return!(x.elt instanceof HTMLCanvasElement)}).map(function(x){return x.remove()})},d.default.Element.prototype.changed=function(_){return d.default.Element._adjustListener("change",_,this),this},d.default.Element.prototype.input=function(_){return d.default.Element._adjustListener("input",_,this),this},d.default.prototype.createDiv=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("div");return x.innerHTML=_,g(x,this)},d.default.prototype.createP=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("p");return x.innerHTML=_,g(x,this)},d.default.prototype.createSpan=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("span");return x.innerHTML=_,g(x,this)},d.default.prototype.createImg=function(){d.default._validateParameters("createImg",arguments);var _,x=document.createElement("img"),j=arguments;return 1<j.length&&typeof j[1]=="string"&&(x.alt=j[1]),2<j.length&&typeof j[2]=="string"&&(x.crossOrigin=j[2]),x.src=j[0],_=g(x,this),x.addEventListener("load",function(){_.width=x.offsetWidth||x.width,_.height=x.offsetHeight||x.height;var M=j[j.length-1];typeof M=="function"&&M(_)}),_},d.default.prototype.createA=function(_,x,j){d.default._validateParameters("createA",arguments);var M=document.createElement("a");return M.href=_,M.innerHTML=x,j&&(M.target=j),g(M,this)},d.default.prototype.createSlider=function(_,x,j,M){d.default._validateParameters("createSlider",arguments);var S=document.createElement("input");return S.type="range",S.min=_,S.max=x,M===0?S.step=1e-18:M&&(S.step=M),typeof j=="number"&&(S.value=j),g(S,this)},d.default.prototype.createButton=function(_,x){d.default._validateParameters("createButton",arguments);var j=document.createElement("button");return j.innerHTML=_,x&&(j.value=x),g(j,this)},d.default.prototype.createCheckbox=function(){for(var _=arguments.length,x=new Array(_),j=0;j<_;j++)x[j]=arguments[j];d.default._validateParameters("createCheckbox",x);var M=document.createElement("div"),S=document.createElement("input"),P=(S.type="checkbox",document.createElement("label")),L=(P.appendChild(S),M.appendChild(P),g(M,this));return L.checked=function(){var D=L.elt.firstElementChild.getElementsByTagName("input")[0];if(D){if(arguments.length===0)return D.checked;D.checked=!(arguments.length<=0||!arguments[0])}return L},this.value=function(D){return L.value=D,this},x[0]&&(L.value(x[0]),(M=document.createElement("span")).innerHTML=x[0],P.appendChild(M)),x[1]&&(S.checked=!0),L},d.default.prototype.createSelect=function(){for(var _,x=arguments.length,j=new Array(x),M=0;M<x;M++)j[M]=arguments[M];d.default._validateParameters("createSelect",j);var S,P=j[0];return P instanceof d.default.Element&&P.elt instanceof HTMLSelectElement?this.elt=(_=P).elt:P instanceof HTMLSelectElement?(_=g(P,this),this.elt=P):(S=document.createElement("select"),P&&typeof P=="boolean"&&S.setAttribute("multiple","true"),_=g(S,this),this.elt=S),_.option=function(L,D){var k;if(L!==void 0){for(var I,A=0;A<this.elt.length;A+=1)if(this.elt[A].textContent===L){k=A;break}k!==void 0?D===!1?this.elt.remove(k):this.elt[k].value=D:((I=document.createElement("option")).textContent=L,I.value=D===void 0?L:D,this.elt.appendChild(I),this._pInst._elements.push(I))}},_.selected=function(L){if(L!==void 0){for(var D=0;D<this.elt.length;D+=1)this.elt[D].value.toString()===L.toString()&&(this.elt.selectedIndex=D);return this}if(this.elt.getAttribute("multiple")){var k=[],I=!0,A=!1,F=void 0;try{for(var N,U=this.elt.selectedOptions[Symbol.iterator]();!(I=(N=U.next()).done);I=!0){var W=N.value;k.push(W.value)}}catch(G){A=!0,F=G}finally{try{I||U.return==null||U.return()}finally{if(A)throw F}}return k}return this.elt.value},_.disable=function(L){if(typeof L=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===L&&(this.elt[D].disabled=!0,this.elt[D].selected=!1);else this.elt.disabled=!0;return this},_.enable=function(L){if(typeof L=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===L&&(this.elt[D].disabled=!1,this.elt[D].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},_},d.default.prototype.createRadio=function(){function _(L){return L instanceof HTMLInputElement&&L.type==="radio"}function x(L){return L instanceof HTMLLabelElement}var j,M,S,P=arguments.length<=0?void 0:arguments[0];return P instanceof d.default.Element&&(P.elt instanceof HTMLDivElement||P.elt instanceof HTMLSpanElement)?(j=P,this.elt=P.elt):P instanceof HTMLDivElement||P instanceof HTMLSpanElement?(j=g(P,this),M=this.elt=P,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(S=arguments.length<=1?void 0:arguments[1])):(typeof P=="string"&&(S=P),M=document.createElement("div"),j=g(M,this),this.elt=M),j._name=S||"radioOption",j._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(L){return _(L)||x(L)&&_(L.firstElementChild)}).map(function(L){return _(L)?L:L.firstElementChild})},j.option=function(L,D){var k,I,A,F=!0,N=!1,U=void 0;try{for(var W,G=j._getOptionsArray()[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var z=W.value;if(z.value===L){k=z;break}}}catch(Y){N=!0,U=Y}finally{try{F||G.return==null||G.return()}finally{if(N)throw U}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",L)),k.setAttribute("name",j._name),x(k.parentElement)?I=k.parentElement:(I=document.createElement("label")).insertAdjacentElement("afterbegin",k),I.lastElementChild instanceof HTMLSpanElement?A=I.lastElementChild:(A=document.createElement("span"),k.insertAdjacentElement("afterend",A)),A.innerHTML=D===void 0?L:D,this.elt.appendChild(I),k},j.remove=function(L){var D=!0,k=!1,I=void 0;try{for(var A,F=j._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0){var N=A.value;if(N.value===L)return void(x(N.parentElement)?N.parentElement:N).remove()}}catch(U){k=!0,I=U}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}},j.value=function(){var L="",D=!0,k=!1,I=void 0;try{for(var A,F=j._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0){var N=A.value;if(N.checked){L=N.value;break}}}catch(U){k=!0,I=U}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}return L},j.selected=function(L){var D=null;if(L===void 0){var k=!0,I=!1,A=void 0;try{for(var F,N=j._getOptionsArray()[Symbol.iterator]();!(k=(F=N.next()).done);k=!0){var U=F.value;if(U.checked){D=U;break}}}catch($){I=!0,A=$}finally{try{k||N.return==null||N.return()}finally{if(I)throw A}}}else{j._getOptionsArray().forEach(function(E){E.checked=!1,E.removeAttribute("checked")});var W=!0,I=!1,A=void 0;try{for(var G,z=j._getOptionsArray()[Symbol.iterator]();!(W=(G=z.next()).done);W=!0){var Y=G.value;Y.value===L&&(Y.setAttribute("checked",!0),Y.checked=!0,D=Y)}}catch(E){I=!0,A=E}finally{try{W||z.return==null||z.return()}finally{if(I)throw A}}}return D},j.disable=function(){var L=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],D=!0,k=!1,I=void 0;try{for(var A,F=j._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0)A.value.setAttribute("disabled",L)}catch(N){k=!0,I=N}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}},j},d.default.prototype.createColorPicker=function(_){d.default._validateParameters("createColorPicker",arguments);var x=document.createElement("input");return x.type="color",_?_ instanceof d.default.Color?x.value=_.toString("#rrggbb"):(d.default.prototype._colorMode="rgb",d.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},x.value=d.default.prototype.color(_).toString("#rrggbb")):x.value="#000000",(x=g(x,this)).color=function(){return _&&(_.mode&&(d.default.prototype._colorMode=_.mode),_.maxes&&(d.default.prototype._colorMaxes=_.maxes)),d.default.prototype.color(this.elt.value)},x},d.default.prototype.createInput=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",j=(d.default._validateParameters("createInput",arguments),document.createElement("input"));return j.setAttribute("value",_),j.setAttribute("type",x),g(j,this)},d.default.prototype.createFileInput=function(_){var x,j=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(d.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(x=document.createElement("input")).setAttribute("type","file"),j&&x.setAttribute("multiple",!0),x.addEventListener("change",function(M){var S=!0,P=!1,L=void 0;try{for(var D,k=M.target.files[Symbol.iterator]();!(S=(D=k.next()).done);S=!0){var I=D.value;d.default.File._load(I,_)}}catch(A){P=!0,L=A}finally{try{S||k.return==null||k.return()}finally{if(P)throw L}}},!1),g(x,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},d.default.prototype.createVideo=function(_,x){return d.default._validateParameters("createVideo",arguments),f(this,"video",_,x)},d.default.prototype.createAudio=function(_,x){return d.default._validateParameters("createAudio",arguments),f(this,"audio",_,x)},d.default.prototype.VIDEO="video",d.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(_){var x=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return x?new Promise(function(j,M){x.call(navigator,_,j,M)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),d.default.prototype.createCapture=function(){for(var _=arguments.length,x=new Array(_),j=0;j<_;j++)x[j]=arguments[j];if(d.default._validateParameters("createCapture",x),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var M,S=!0,P=!0,L=!1,D=0,k=x;D<k.length;D++){var I=k[D];I===d.default.prototype.VIDEO?P=!1:I===d.default.prototype.AUDIO?S=!1:m(I)==="object"?(I.flipped!==void 0&&(L=I.flipped,delete I.flipped),A=Object.assign({},A,I)):typeof I=="function"&&(M=I)}var A=Object.assign({},{video:S,audio:P},A),F=document.createElement("video"),N=(F.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(A).then(function(U){try{"srcObject"in F?F.srcObject=U:F.src=window.URL.createObjectURL(U)}catch{F.src=U}}).catch(function(U){U.name==="NotFoundError"&&d.default._friendlyError("No webcam found on this device","createCapture"),U.name==="NotAllowedError"&&d.default._friendlyError("Access to the camera was denied","createCapture"),console.error(U)}),g(F,this,!0));return N.loadedmetadata=!1,F.addEventListener("loadedmetadata",function(){F.play(),F.width?(N.width=F.width,N.height=F.height,L&&(N.elt.style.transform="scaleX(-1)")):(N.width=N.elt.width=F.videoWidth,N.height=N.elt.height=F.videoHeight),N.loadedmetadata=!0,M&&M(F.srcObject)}),N.flipped=L,N},d.default.prototype.createElement=function(_,x){return d.default._validateParameters("createElement",arguments),_=document.createElement(_),x!==void 0&&(_.innerHTML=x),g(_,this)},d.default.Element.prototype.addClass=function(_){return this.elt.className?this.hasClass(_)||(this.elt.className=this.elt.className+" "+_):this.elt.className=_,this},d.default.Element.prototype.removeClass=function(_){return this.elt.classList.remove(_),this},d.default.Element.prototype.hasClass=function(_){return this.elt.classList.contains(_)},d.default.Element.prototype.toggleClass=function(_){return this.elt.classList.contains(_)?this.elt.classList.remove(_):this.elt.classList.add(_),this},d.default.Element.prototype.child=function(_){return _===void 0?this.elt.childNodes:(typeof _=="string"?(_[0]==="#"&&(_=_.substring(1)),_=document.getElementById(_)):_ instanceof d.default.Element&&(_=_.elt),_ instanceof HTMLElement&&this.elt.appendChild(_),this)},d.default.Element.prototype.center=function(_){var x=this.elt.style.display,j=this.elt.style.display==="none",M=this.parent().style.display==="none",S={x:this.elt.offsetLeft,y:this.elt.offsetTop},P=(j&&this.show(),M&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),L=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return _==="both"||_===void 0?this.position(P/2+this.parent().offsetLeft,L/2+this.parent().offsetTop):_==="horizontal"?this.position(P/2+this.parent().offsetLeft,S.y):_==="vertical"&&this.position(S.x,L/2+this.parent().offsetTop),this.style("display",x),j&&this.hide(),M&&this.parent().hide(),this},d.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},d.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},d.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var _="";return this.elt.style.transform&&(_=(_=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=_,this},d.default.Element.prototype._rotate=function(){var _="";return this.elt.style.transform&&(_=(_=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=_,this},d.default.Element.prototype.style=function(_,x){if((x=x instanceof d.default.Color?"rgba("+x.levels[0]+","+x.levels[1]+","+x.levels[2]+","+x.levels[3]/255+")":x)===void 0){if(_.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(_);for(var j=_.split(";"),M=0;M<j.length;M++){var S=j[M].split(":");S[0]&&S[1]&&(this.elt.style[S[0].trim()]=S[1].trim())}}else this.elt.style[_]=x,_!=="width"&&_!=="height"&&_!=="left"&&_!=="top"||(x=window.getComputedStyle(this.elt).getPropertyValue(_).replace(/[^\d.]/g,""),this[_]=Math.round(parseFloat(x,10)));return this},d.default.Element.prototype.attribute=function(_,x){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return x===void 0?this.elt.getAttribute(_):(this.elt.setAttribute(_,x),this);if(x===void 0)return this.elt.firstChild.getAttribute(_);for(var j=0;j<this.elt.childNodes.length;j++)this.elt.childNodes[j].setAttribute(_,x)},d.default.Element.prototype.removeAttribute=function(_){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var x=0;x<this.elt.childNodes.length;x++)this.elt.childNodes[x].removeAttribute(_);return this.elt.removeAttribute(_),this},d.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},d.default.Element.prototype.show=function(){return this.elt.style.display="block",this},d.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},d.default.Element.prototype.size=function(_,x){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var j=_,M=x,S=d.default.prototype.AUTO;if(j!==S||M!==S){if(j===S?j=x*this.width/this.height:M===S&&(M=_*this.height/this.width),this.elt instanceof HTMLCanvasElement){var P,L={},D=this.elt.getContext("2d");for(P in D)L[P]=D[P];for(P in this.elt.setAttribute("width",j*this._pInst._pixelDensity),this.elt.setAttribute("height",M*this._pInst._pixelDensity),this.elt.style.width=j+"px",this.elt.style.height=M+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),L)this.elt.getContext("2d")[P]=L[P]}else this.elt.style.width=j+"px",this.elt.style.height=M+"px",this.elt.width=j,this.elt.height=M;this.width=j,this.height=M,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",j),this._pInst._setProperty("height",M))}return this},d.default.Element.prototype.remove=function(){this instanceof d.default.MediaElement&&(this.stop(),(x=this.elt.srcObject)!==null&&x.getTracks().forEach(function(j){j.stop()}));var _,x=this._pInst._elements.indexOf(this);for(_ in x!==-1&&this._pInst._elements.splice(x,1),this._events)this.elt.removeEventListener(_,this._events[_]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},d.default.Element.prototype.drop=function(_,x){var j;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",j=function(M){M.preventDefault()}),this.elt.addEventListener("dragleave",j)),d.default.Element._attachListener("drop",function(S){S.preventDefault(),typeof x=="function"&&x.call(this,S);var S=S.dataTransfer.files,P=!0,L=!1,D=void 0;try{for(var k,I=S[Symbol.iterator]();!(P=(k=I.next()).done);P=!0){var A=k.value;d.default.File._load(A,_)}}catch(F){L=!0,D=F}finally{try{P||I.return==null||I.return()}finally{if(L)throw D}}},this)):console.log("The File APIs are not fully supported in this browser."),this},d.default.Element.prototype.draggable=function(_){var x,j="ontouchstart"in window,M=0,S=0,P=0,L=0,D=j?"touchend":"mouseup",k=j?"touchmove":"mousemove";function I(F){var N;F=F||window.event,L=j?(N=F.changedTouches,M=P-parseInt(N[0].clientX),S=L-parseInt(N[0].clientY),P=parseInt(N[0].clientX),parseInt(N[0].clientY)):(M=P-parseInt(F.clientX),S=L-parseInt(F.clientY),P=parseInt(F.clientX),parseInt(F.clientY)),_.style.left=_.offsetLeft-M+"px",_.style.top=_.offsetTop-S+"px"}function A(){document.removeEventListener(D,A,!1),document.removeEventListener(k,I,!1)}return _===void 0?x=_=this.elt:_!==this.elt&&_.elt!==this.elt&&(_=_.elt,x=this.elt),x.addEventListener(j?"touchstart":"mousedown",function(F){{var N;F=F||window.event,L=j?(N=F.changedTouches,P=parseInt(N[0].clientX),parseInt(N[0].clientY)):(P=parseInt(F.clientX),parseInt(F.clientY))}return document.addEventListener(D,A,!1),document.addEventListener(k,I,!1),!1},!1),x.style.cursor="move",this};function v(_,x,j,M){h(this,v),this.callback=_,this.time=x,this.id=j,this.val=M}r=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&b(x,_);var j=y(M);function M(S,P){h(this,M);var L=u(P=j.call(this,S,P));return P.elt.crossOrigin="anonymous",P._prevTime=0,P._cueIDCounter=0,P._cues=[],P.pixels=[],P._pixelsState=u(P),P._pixelDensity=1,P._modified=!1,P._frameOnCanvas=-1,Object.defineProperty(L,"src",{get:function(){var D=L.elt.children[0].src,k=L.elt.src===window.location.href?"":L.elt.src;return D===window.location.href?k:D},set:function(D){for(var k=0;k<L.elt.children.length;k++)L.elt.removeChild(L.elt.children[k]);var I=document.createElement("source");I.src=D,S.appendChild(I),L.elt.src=D,L.modified=!0}}),L._onended=function(){},L.elt.onended=function(){L._onended(L)},P}return l(M,[{key:"play",value:function(){var S;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(S=this.elt.play())&&S.catch&&S.catch(function(P){P.name==="NotAllowedError"?console.error(P):console.error("Media play method encountered an unexpected error",P)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var S=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(S)},{passive:!0,once:!0})}},{key:"autoplay",value:function(S){var P=this,L=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",S),S&&!L&&(S=function(){return P._setupAutoplayFailDetection()},this.elt.readyState===4?S():this.elt.addEventListener("canplay",S,{passive:!0,once:!0})),this}},{key:"volume",value:function(S){if(S===void 0)return this.elt.volume;this.elt.volume=S}},{key:"speed",value:function(S){if(S===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=S:this.presetPlaybackRate=S}},{key:"time",value:function(S){return S===void 0?this.elt.currentTime:(this.elt.currentTime=S,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var S=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&S&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return d.default.Renderer2D.prototype.loadPixels.apply(this,P)}},{key:"updatePixels",value:function(S,P,L,D){return this.loadedmetadata&&(this._ensureCanvas(),d.default.Renderer2D.prototype.updatePixels.call(this,S,P,L,D)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return d.default.Renderer2D.prototype.get.apply(this,P)}},{key:"_getPixel",value:function(){this.loadPixels();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return d.default.Renderer2D.prototype._getPixel.apply(this,P)}},{key:"set",value:function(S,P,L){this.loadedmetadata&&(this._ensureCanvas(),d.default.Renderer2D.prototype.set.call(this,S,P,L),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];d.default.prototype.copy.apply(this,P)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];d.default.Image.prototype.mask.apply(this,P)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(S){this._modified=S}},{key:"onended",value:function(S){return this._onended=S,this}},{key:"connect",value:function(S){var P,L;if(typeof d.default.prototype.getAudioContext=="function")P=d.default.prototype.getAudioContext(),L=d.default.soundOut.input;else try{L=(P=S.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=P.createMediaElementSource(this.elt),this.audioSourceNode.connect(L)),S?S.input?this.audioSourceNode.connect(S.input):this.audioSourceNode.connect(S):this.audioSourceNode.connect(L)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(S,k,L){var D=this._cueIDCounter++,k=new v(k,S,D,L);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),D}},{key:"removeCue",value:function(S){for(var P=0;P<this._cues.length;P++)this._cues[P].id===S&&(console.log(S),this._cues.splice(P,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var S=this.time(),P=0;P<this._cues.length;P++){var L=this._cues[P].time,D=this._cues[P].val;this._prevTime<L&&L<=S&&this._cues[P].callback(D)}this._prevTime=S}}]),M}(d.default.Element),d.default.MediaElement=r,r=function(){function _(x,j){h(this,_),this.file=x,this._pInst=j,j=x.type.split("/"),this.type=j[0],this.subtype=j[1],this.name=x.name,this.size=x.size,this.data=void 0}return l(_,null,[{key:"_createLoader",value:function(x,j){var M=new FileReader;return M.onload=function(S){var P,L=new d.default.File(x);L.file.type==="application/json"?L.data=JSON.parse(S.target.result):L.file.type==="text/xml"?(P=new DOMParser().parseFromString(S.target.result,"text/xml"),L.data=new d.default.XML(P.documentElement)):L.data=S.target.result,j(L)},M}},{key:"_load",value:function(x,j){var M;/^text\//.test(x.type)||x.type==="application/json"?d.default.File._createLoader(x,j).readAsText(x):/^(video|audio)\//.test(x.type)?((M=new d.default.File(x)).data=URL.createObjectURL(x),j(M)):d.default.File._createLoader(x,j).readAsDataURL(x)}}]),_}(),d.default.File=r,r=d.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(m,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(m=m("../core/main"))&&m.__esModule?m:{default:m};o.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",o.default.prototype.accelerationX=0,o.default.prototype.accelerationY=0,o.default.prototype.accelerationZ=0,o.default.prototype.pAccelerationX=0,o.default.prototype.pAccelerationY=0,o.default.prototype.pAccelerationZ=0,o.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},o.default.prototype.rotationX=0,o.default.prototype.rotationY=0,o.default.prototype.rotationZ=0,o.default.prototype.pRotationX=0,o.default.prototype.pRotationY=0;var d=o.default.prototype.pRotationZ=0,a=0,l=0,b="clockwise",y="clockwise",u="clockwise",p=(o.default.prototype.pRotateDirectionX=void 0,o.default.prototype.pRotateDirectionY=void 0,o.default.prototype.pRotateDirectionZ=void 0,o.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},o.default.prototype.turnAxis=void 0,.5),h=30,m=(o.default.prototype.setMoveThreshold=function(g){o.default._validateParameters("setMoveThreshold",arguments),p=g},o.default.prototype.setShakeThreshold=function(g){o.default._validateParameters("setShakeThreshold",arguments),h=g},o.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},o.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},o.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var g,f,v,_,x,j=this._isGlobal?window:this;typeof j.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&j.deviceMoved(),typeof j.deviceTurned=="function"&&(f=this._toDegrees(this.rotationX)+180,v=this._toDegrees(this.pRotationX)+180,g=d+180,0<f-v&&f-v<270||f-v<-270?b="clockwise":(f-v<0||270<f-v)&&(b="counter-clockwise"),b!==this.pRotateDirectionX&&(g=f),90<Math.abs(f-g)&&Math.abs(f-g)<270&&(g=f,this._setProperty("turnAxis","X"),j.deviceTurned()),this.pRotateDirectionX=b,d=g-180,v=this._toDegrees(this.rotationY)+180,f=this._toDegrees(this.pRotationY)+180,g=a+180,0<v-f&&v-f<270||v-f<-270?y="clockwise":(v-f<0||270<v-this.pRotationY)&&(y="counter-clockwise"),y!==this.pRotateDirectionY&&(g=v),90<Math.abs(v-g)&&Math.abs(v-g)<270&&(g=v,this._setProperty("turnAxis","Y"),j.deviceTurned()),this.pRotateDirectionY=y,a=g-180,0<(f=this._toDegrees(this.rotationZ))-(v=this._toDegrees(this.pRotationZ))&&f-v<270||f-v<-270?u="clockwise":(f-v<0||270<f-v)&&(u="counter-clockwise"),u!==this.pRotateDirectionZ&&(l=f),90<Math.abs(f-l)&&Math.abs(f-l)<270&&(l=f,this._setProperty("turnAxis","Z"),j.deviceTurned()),this.pRotateDirectionZ=u,this._setProperty("turnAxis",void 0)),typeof j.deviceShaken=="function"&&(this.pAccelerationX!==null&&(_=Math.abs(this.accelerationX-this.pAccelerationX),x=Math.abs(this.accelerationY-this.pAccelerationY)),h<_+x&&j.deviceShaken())},o.default);c.default=m},{"../core/main":280}],298:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(d){var a;this._downKeys[d.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",d.which),this._downKeys[d.which]=!0,this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),typeof(a=this._isGlobal?window:this).keyPressed!="function"||d.charCode||a.keyPressed(d)===!1&&d.preventDefault())},o.default.prototype._onkeyup=function(d){this._downKeys[d.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),this._setProperty("keyCode",d.which);var a=this._isGlobal?window:this;typeof a.keyReleased=="function"&&a.keyReleased(d)===!1&&d.preventDefault()},o.default.prototype._onkeypress=function(d){var a;d.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",d.which),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),typeof(a=this._isGlobal?window:this).keyTyped=="function"&&a.keyTyped(d)===!1&&d.preventDefault())},o.default.prototype._onblur=function(d){this._downKeys={}},o.default.prototype.keyIsDown=function(d){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[d]||!1},o.default.prototype._areDownKeys=function(){for(var d in this._downKeys)if(this._downKeys.hasOwnProperty(d)&&this._downKeys[d]===!0)return!0;return!1},r=o.default,c.default=r},{"../core/main":280}],299:[function(r,i,c){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(y)}function d(y){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(a=r("../core/main"))&&a.__esModule?a:{default:a},l=function(y){if(y&&y.__esModule)return y;if(y===null||d(y)!=="object"&&typeof y!="function")return{default:y};var u=b();if(u&&u.has(y))return u.get(y);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in y){var g;Object.prototype.hasOwnProperty.call(y,p)&&((g=m?Object.getOwnPropertyDescriptor(y,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=y[p])}return h.default=y,u&&u.set(y,h),h}(r("../core/constants"));function b(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,b=function(){return y},y)}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(y){var u,p,h,m,g;this._curElement!==null&&(!y.touches||0<y.touches.length)&&(u=this._curElement.elt,p=this.width,h=this.height,(m=y)&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0])),g=u.getBoundingClientRect(),p=u.scrollWidth/p||1,u=u.scrollHeight/h||1,h={x:(m.clientX-g.left)/p,y:(m.clientY-g.top)/u,winX:m.clientX,winY:m.clientY,id:m.identifier},this._setProperty("movedX",y.movementX),this._setProperty("movedY",y.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(y){y.button===1?this._setProperty("mouseButton",l.CENTER):y.button===2?this._setProperty("mouseButton",l.RIGHT):this._setProperty("mouseButton",l.LEFT)},a.default.prototype._onmousemove=function(y){var u=this._isGlobal?window:this;this._updateNextMouseCoords(y),this.mouseIsPressed?typeof u.mouseDragged=="function"?u.mouseDragged(y)===!1&&y.preventDefault():typeof u.touchMoved=="function"&&u.touchMoved(y)===!1&&y.preventDefault():typeof u.mouseMoved=="function"&&u.mouseMoved(y)===!1&&y.preventDefault()},a.default.prototype._onmousedown=function(y){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(y),this._updateNextMouseCoords(y),this.touchstart||(typeof u.mousePressed=="function"?u.mousePressed(y)===!1&&y.preventDefault():typeof u.touchStarted=="function"&&u.touchStarted(y)===!1&&y.preventDefault(),this.touchstart=!1)},a.default.prototype._onmouseup=function(y){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof u.mouseReleased=="function"?u.mouseReleased(y)===!1&&y.preventDefault():typeof u.touchEnded=="function"&&u.touchEnded(y)===!1&&y.preventDefault(),this.touchend=!1)},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(y){var u=this._isGlobal?window:this;typeof u.mouseClicked=="function"&&u.mouseClicked(y)===!1&&y.preventDefault()},a.default.prototype._ondblclick=function(y){var u=this._isGlobal?window:this;typeof u.doubleClicked=="function"&&u.doubleClicked(y)===!1&&y.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(y){var u=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",y.deltaY),typeof u.mouseWheel=="function"&&(y.delta=y.deltaY,u.mouseWheel(y)===!1&&y.preventDefault())},a.default.prototype.requestPointerLock=function(){var y=this._curElement.elt;return y.requestPointerLock=y.requestPointerLock||y.mozRequestPointerLock,y.requestPointerLock?(y.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=a.default,c.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var d=[],a=0;a<o.touches.length;a++)d[a]=function(g,m,f,u){var p=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,h=g.getBoundingClientRect(),m=g.scrollWidth/m||1,g=g.scrollHeight/f||1,f=u.touches[p]||u.changedTouches[p];return{x:(f.clientX-h.left)/m,y:(f.clientY-h.top)/g,winX:f.clientX,winY:f.clientY,id:f.identifier}}(this._curElement.elt,this.width,this.height,o,a);this._setProperty("touches",d)}},r.default.prototype._ontouchstart=function(o){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof d.touchStarted=="function"&&(d.touchStarted(o)===!1&&o.preventDefault(),this.touchstart=!0)},r.default.prototype._ontouchmove=function(o){var d=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof d.touchMoved=="function"?d.touchMoved(o)===!1&&o.preventDefault():typeof d.mouseDragged=="function"&&d.mouseDragged(o)===!1&&o.preventDefault()},r.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var d=this._isGlobal?window:this;typeof d.touchEnded=="function"&&(d.touchEnded(o)===!1&&o.preventDefault(),this.touchend=!0)},r=r.default,c.default=r},{"../core/main":280}],301:[function(r,i,c){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,d,a,l,b={_toPixels:function(y){var u,p;return y instanceof ImageData?y.data:y.getContext("2d")?y.getContext("2d").getImageData(0,0,y.width,y.height).data:y.getContext("webgl")?(p=(u=y.getContext("webgl")).drawingBufferWidth*u.drawingBufferHeight*4,p=new Uint8Array(p),u.readPixels(0,0,y.width,y.height,u.RGBA,u.UNSIGNED_BYTE,p),p):void 0},_getARGB:function(y,u){return u*=4,y[3+u]<<24&4278190080|y[u]<<16&16711680|y[1+u]<<8&65280|255&y[2+u]},_setPixels:function(y,u){for(var p,h=0,m=y.length;h<m;h++)y[0+(p=4*h)]=(16711680&u[h])>>>16,y[1+p]=(65280&u[h])>>>8,y[2+p]=255&u[h],y[3+p]=(4278190080&u[h])>>>24},_toImageData:function(y){return y instanceof ImageData?y:y.getContext("2d").getImageData(0,0,y.width,y.height)},_createImageData:function(y,u){return b._tmpCanvas=document.createElement("canvas"),b._tmpCtx=b._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(y,u)},apply:function(y,g,p){var h=y.getContext("2d"),m=h.getImageData(0,0,y.width,y.height),g=g(m,p);g instanceof ImageData?h.putImageData(g,0,0,0,0,y.width,y.height):h.putImageData(m,0,0,0,0,y.width,y.height)},threshold:function(y){for(var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,p=b._toPixels(y),h=Math.floor(255*u),m=0;m<p.length;m+=4){var g=void 0,g=h<=.2126*p[m]+.7152*p[m+1]+.0722*p[m+2]?255:0;p[m]=p[m+1]=p[m+2]=g}},gray:function(y){for(var u=b._toPixels(y),p=0;p<u.length;p+=4){var h=u[p],m=u[p+1],g=u[p+2];u[p]=u[p+1]=u[p+2]=.2126*h+.7152*m+.0722*g}},opaque:function(y){for(var u=b._toPixels(y),p=0;p<u.length;p+=4)u[p+3]=255;return u},invert:function(y){for(var u=b._toPixels(y),p=0;p<u.length;p+=4)u[p]=255-u[p],u[p+1]=255-u[p+1],u[p+2]=255-u[p+2]},posterize:function(y){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,p=b._toPixels(y);if(u<2||255<u)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=u-1,m=0;m<p.length;m+=4){var g=p[m],f=p[m+1],v=p[m+2];p[m]=255*(g*u>>8)/h,p[m+1]=255*(f*u>>8)/h,p[m+2]=255*(v*u>>8)/h}},dilate:function(y){for(var u,p,h,m,g,f,v,_,x,j=b._toPixels(y),M=0,S=j.length?j.length/4:0,P=new Int32Array(S);M<S;)for(p=(u=M)+y.width;M<p;)m=h=b._getARGB(j,M),(x=M-1)<u&&(x=M),p<=(_=M+1)&&(_=M),(g=M-y.width)<0&&(g=0),S<=(f=M+y.width)&&(f=M),g=b._getARGB(j,g),x=b._getARGB(j,x),f=b._getARGB(j,f),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(v=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(h=x,m=v),m<(v=77*((x=b._getARGB(j,_))>>16&255)+151*(x>>8&255)+28*(255&x))&&(h=x,m=v),m<(_=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,m=_),m<(x=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(h=f,m=x),P[M++]=h;b._setPixels(j,P)},erode:function(y){for(var u,p,h,m,g,f,v,_,x,j=b._toPixels(y),M=0,S=j.length?j.length/4:0,P=new Int32Array(S);M<S;)for(p=(u=M)+y.width;M<p;)m=h=b._getARGB(j,M),(x=M-1)<u&&(x=M),p<=(_=M+1)&&(_=M),(g=M-y.width)<0&&(g=0),S<=(f=M+y.width)&&(f=M),g=b._getARGB(j,g),x=b._getARGB(j,x),f=b._getARGB(j,f),(v=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(h=x,m=v),(v=77*((x=b._getARGB(j,_))>>16&255)+151*(x>>8&255)+28*(255&x))<m&&(h=x,m=v),(_=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<m&&(h=g,m=_),(x=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<m&&(h=f,m=x),P[M++]=h;b._setPixels(j,P)},blur:function(y,u){for(var p,h,m,g,f,v,_,x,j,M,S=b._toPixels(y),P=y.width,L=y.height,D=P*L,k=new Int32Array(D),I=0;I<D;I++)k[I]=b._getARGB(S,I);var A,F,N,U,W,G,z,Y,$=new Int32Array(D),ie=new Int32Array(D),E=new Int32Array(D),R=new Int32Array(D),B=0,H=3.5*u|0;if(o!==(H=H<1?1:H<248?H:248)){d=1+(o=H)<<1,a=new Int32Array(d),l=new Array(d);for(var Z=0;Z<d;Z++)l[Z]=new Int32Array(256);for(var te=1,se=H-1;te<H;te++){a[H+te]=a[se]=G=se*se,z=l[H+te],Y=l[se--];for(var pe=0;pe<256;pe++)z[pe]=Y[pe]=G*pe}W=a[H]=H*H,z=l[H];for(var oe=0;oe<256;oe++)z[oe]=W*oe}for(F=0;F<L;F++){for(A=0;A<P;A++){if(g=m=h=f=p=0,(v=A-o)<0)M=-v,v=0;else{if(P<=v)break;M=0}for(N=M;N<d&&!(P<=v);N++){var he=k[v+B];U=l[N],f+=U[(-16777216&he)>>>24],h+=U[(16711680&he)>>16],m+=U[(65280&he)>>8],g+=U[255&he],p+=a[N],v++}$[_=B+A]=f/p,ie[_]=h/p,E[_]=m/p,R[_]=g/p}B+=P}for(j=(x=-o)*P,F=B=0;F<L;F++){for(A=0;A<P;A++){if(g=m=h=f=p=0,x<0)M=_=-x,v=A;else{if(L<=x)break;M=0,_=x,v=A+j}for(N=M;N<d&&!(L<=_);N++)U=l[N],f+=U[$[v]],h+=U[ie[v]],m+=U[E[v]],g+=U[R[v]],p+=a[N],_++,v+=P;k[A+B]=f/p<<24|h/p<<16|m/p<<8|g/p}B+=P,j+=P,x++}b._setPixels(S,k)}};c.default=b},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=a(r("../core/main")),d=a(r("omggif"));function a(b){return b&&b.__esModule?b:{default:b}}function l(b){return function(y){if(Array.isArray(y)){for(var u=0,p=new Array(y.length);u<y.length;u++)p[u]=y[u];return p}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(b,y){return o.default._validateParameters("createImage",arguments),new o.default.Image(b,y)},o.default.prototype.saveCanvas=function(){for(var b,y,u,p,h,m,g=arguments.length,f=new Array(g),v=0;v<g;v++)f[v]=arguments[v];switch(o.default._validateParameters("saveCanvas",f),f[0]instanceof HTMLCanvasElement?(b=f[0],f.shift()):f[0]instanceof o.default.Element?(b=f[0].elt,f.shift()):f[0]instanceof o.default.Framebuffer?(p=f[0],(h=this.createGraphics(p.width,p.height)).pixelDensity(pixelDensity()),p.loadPixels(),h.loadPixels(),h.pixels.set(p.pixels),h.updatePixels(),b=h.elt,f.shift()):b=this._curElement&&this._curElement.elt,1<=f.length&&(y=f[0]),u=(u=2<=f.length?f[1]:u)||o.default.prototype._checkFileExtension(y,u)[1]||"png"){default:m="image/png";break;case"jpeg":case"jpg":m="image/jpeg"}b.toBlob(function(_){o.default.prototype.downloadFile(_,y,u),h&&h.remove()},m)},o.default.prototype.encodeAndDownloadGif=function(b,y){for(var u=b.gifProperties,p=u.loopLimit,h=(p===1?p=null:p===null&&(p=0),new Uint8Array(b.width*b.height*u.numFrames)),m=[],g={},f=0;f<u.numFrames;f++){for(var v=new Set,_=u.frames[f].image.data,x=_.length,j=new Uint32Array(b.width*b.height),M=0,S=0;M<x;M+=4,S++){var P=_[M+0]<<16|_[M+1]<<8|_[M+2]<<0;v.add(P),j[S]=P}var L=l(v).sort().toString();g[L]===void 0?g[L]={freq:1,frames:[f]}:(g[L].freq+=1,g[L].frames.push(f)),m.push(j)}for(var I=[],D=Object.keys(g).sort(function(E,R){return g[R].freq-g[E].freq}),k=D[0].split(",").map(function(E){return parseInt(E)}),I=I.concat(g[k].frames),A=new Set(k),F=1;F<D.length;F++){var N=D[F].split(",").map(function(E){return parseInt(E)}).filter(function(E){return!A.has(E)});if(k.length+N.length<=256){for(var U=0;U<N.length;U++)k.push(N[U]),A.add(N[U]);I=I.concat(g[D[F]].frames)}}I=new Set(I);for(var W={},G=0;G<k.length;G++)W[k[G]]||(W[k[G]]=G);for(var z=1;z<k.length;)z<<=1;k.length=z;for(var p={loop:p,palette:new Uint32Array(k)},Y=new d.default.GifWriter(h,b.width,b.height,p),$={},ie=0;ie<u.numFrames;ie++)(function(R){var B=!I.has(R),H=B?[]:k,Z=new Uint8Array(b.width*b.height),te={},se=new Set,pe=(m[R].forEach(function(ue,ye){B?(te[ue]===void 0&&(te[ue]=H.length,H.push(ue)),Z[ye]=te[ue]):Z[ye]=W[ue],0<R&&m[R-1][ye]!==ue&&se.add(ue)}),{}),oe=H.filter(function(ue){return!se.has(ue)});if(0<oe.length){var oe=oe[0],he=(B?te:W)[oe];if(0<R){for(var de=0;de<m[R].length;de++)m[R-1][de]===m[R][de]&&(Z[de]=he);pe.transparent=he,$.frameOpts.disposal=1}}if(pe.delay=u.frames[R].delay/10,B){for(var J=1;J<H.length;)J<<=1;H.length=J,pe.palette=new Uint32Array(H)}0<R&&Y.addFrame(0,0,b.width,b.height,$.pixelPaletteIndex,$.frameOpts),$={pixelPaletteIndex:Z,frameOpts:pe}})(ie);$.frameOpts.disposal=1,Y.addFrame(0,0,b.width,b.height,$.pixelPaletteIndex,$.frameOpts),p=new Blob([h.slice(0,Y.end())],{type:"image/gif"}),o.default.prototype.downloadFile(p,y,"gif")},o.default.prototype.saveFrames=function(b,y,u,m,h){o.default._validateParameters("saveFrames",arguments),u=o.default.prototype.constrain(u=u||3,0,15),u*=1e3;var m=o.default.prototype.constrain(m||15,0,22),g=0,f=o.default.prototype._makeFrame,v=this._curElement.elt,_=[],x=setInterval(function(){_.push(f(b+g,y,v)),g++},1e3/m);setTimeout(function(){if(clearInterval(x),h)h(_);else for(var j=0,M=_;j<M.length;j++){var S=M[j];o.default.prototype.downloadFile(S.imageData,S.filename,S.ext)}_=[]},.01+u)},o.default.prototype._makeFrame=function(b,y,h){var p,h=this?this._curElement.elt:h;if(y)switch(y.toLowerCase()){case"png":p="image/png";break;case"jpeg":case"jpg":p="image/jpeg";break;default:p="image/png"}else y="png",p="image/png";var h=(h=h.toDataURL(p)).replace(p,"image/octet-stream"),m={};return m.imageData=h,m.filename=b,m.ext=y,m},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(r,i,c){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function d(v){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r("regenerator-runtime/runtime");var a=h(r("../core/main")),l=h(r("../core/helpers")),b=function(v){if(v&&v.__esModule)return v;if(v===null||d(v)!=="object"&&typeof v!="function")return{default:v};var _=p();if(_&&_.has(v))return _.get(v);var x,j={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(j,x,S):j[x]=v[x])}return j.default=v,_&&_.set(v,j),j}(r("../core/constants")),y=h(r("omggif")),u=r("gifenc");function p(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,p=function(){return v},v)}function h(v){return v&&v.__esModule?v:{default:v}}function m(v,_,x,j,M,S,P){try{var L=v[S](P),D=L.value}catch(k){return void x(k)}L.done?_(D):Promise.resolve(D).then(j,M)}function g(v,_,x,j,M,S,P,L,D,k,I){var A,F,N,U,W,G,z,Y,$;return v===b.COVER&&(A=_,N=x,z=S,Y=P,G=L,$=D,F=k,U=I,W=Math.max(z/F,Y/U),z/=W,Y/=W,W=G,G=$,A===b.CENTER?W+=(F-z)/2:A===b.RIGHT&&(W+=F-z),N===b.CENTER?G+=(U-Y)/2:N===b.BOTTOM&&(G+=U-Y),L=($={x:W,y:G,w:z,h:Y}).x,D=$.y,k=$.w,I=$.h),v===b.CONTAIN&&(A=_,F=x,N=j,U=M,W=S,G=P,z=k,Y=I,$=Math.max(z/W,Y/G),z/=$,Y/=$,$=N,N=U,A===b.CENTER?$+=(W-z)/2:A===b.RIGHT&&($+=W-z),F===b.CENTER?N+=(G-Y)/2:F===b.BOTTOM&&(N+=G-Y),j=(v={x:$,y:N,w:z,h:Y}).x,M=v.y,S=v.w,P=v.h),{sx:L,sy:D,sw:k,sh:I,dx:j,dy:M,dw:S,dh:P}}function f(v,_){return 0<v&&v<_?v:_}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(v,_,x){a.default._validateParameters("loadImage",arguments);var j=new a.default.Image(1,1,this),M=this,S=new Request(v,{method:"GET",mode:"cors"});return fetch(v,S).then(function(P){var L,D=P.headers.get("content-type");D===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),D&&D.includes("image/gif")?P.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),I=j,A=_,F=x,N=(function(B){M._decrementPreload()}).bind(M),U=new y.default.GifReader(k),W=(I.width=I.canvas.width=U.width,I.height=I.canvas.height=U.height,[]),G=U.numFrames(),z=new Uint8ClampedArray(I.width*I.height*4),Y=0;Y<G;Y++){var $=U.frameInfo(Y),ie=I.drawingContext.getImageData(0,0,I.width,I.height),E=(z=ie.data.slice(),function(B,H){try{H.decodeAndBlitFrameRGBA(B,z)}catch(Z){a.default._friendlyFileLoadError(8,I.src),typeof F=="function"?F(Z):console.error(Z)}}(Y,U),new ImageData(z,I.width,I.height)),E=(I.drawingContext.putImageData(E,0,0),$.delay);E===0&&(E=10),W.push({image:I.drawingContext.getImageData(0,0,I.width,I.height),delay:10*E}),$.disposal===2?I.drawingContext.clearRect($.x,$.y,$.width,$.height):$.disposal===3&&I.drawingContext.putImageData(ie,0,0,$.x,$.y,$.width,$.height)}(k=U.loopCount())===null?k=1:k===0&&(k=null),I.drawingContext.putImageData(W[0].image,0,0),1<W.length&&(I.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:W,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof A=="function"&&A(I),N()}},function(k){typeof x=="function"?(x(k),M._decrementPreload()):console.error(k)}):((L=new Image).onload=function(){j.width=j.canvas.width=L.width,j.height=j.canvas.height=L.height,j.drawingContext.drawImage(L,0,0),j.modified=!0,typeof _=="function"&&_(j),M._decrementPreload()},L.onerror=function(k){a.default._friendlyFileLoadError(0,L.src),typeof x=="function"?(x(k),M._decrementPreload()):console.error(k)},v.indexOf("data:image/")!==0&&(L.crossOrigin="Anonymous"),L.src=v),j.modified=!0}).catch(function(P){a.default._friendlyFileLoadError(0,v),typeof x=="function"?(x(P),M._decrementPreload()):console.error(P)}),j},a.default.prototype.saveGif=function(){v=regeneratorRuntime.mark(function x(j,M){var S,P,L,D,k,I,A,F,N,U,W,G,z,Y,$,ie,E,R,B,H,Z,te,se,pe,oe,he,de=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(S=2<de.length&&de[2]!==void 0?de[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof j!="string")throw TypeError("fileName parameter must be a string");J.next=3;break;case 3:if(typeof M!="number")throw TypeError("Duration parameter must be a number");J.next=5;break;case 5:if(P=S&&S.delay||0,L=S&&S.units||"seconds",D=S&&S.silent||!1,k=S&&S.notificationDuration||0,I=S&&S.notificationID||"progressBar",typeof P!="number")throw TypeError("Delay parameter must be a number");J.next=12;break;case 12:if(L!=="seconds"&&L!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');J.next=14;break;case 14:if(typeof D!="boolean")throw TypeError("Silent parameter must be a boolean");J.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");J.next=18;break;case 18:if(typeof I!="string")throw TypeError("Notification ID parameter must be a string");J.next=20;break;case 20:return this._recording=!0,U=this._targetFrameRate,A=(A=1/(U=U!==1/0&&U!==void 0&&U!==0?U:60)*1e3)<20?20:A,N=(F=L==="seconds"?M*U:M)+(U=L==="seconds"?P*U:P),U=U,this.frameCount=U,W=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(I)!==null&&document.getElementById(I).remove(),D||((z=this.createP("")).id(I),z.style("font-size","16px"),z.style("font-family","Montserrat"),z.style("background-color","#ffffffa0"),z.style("padding","8px"),z.style("border-radius","10px"),z.position(0,0)),this._renderer instanceof a.default.RendererGL&&($=this.drawingContext,Y=new Uint8Array($.drawingBufferWidth*$.drawingBufferHeight*4)),this.noLoop(),J.next=39,Promise.resolve();case 39:if(U<N)return this.redraw(),pe=void 0,pe=this._renderer instanceof a.default.RendererGL?(Y=new Uint8Array($.drawingBufferWidth*$.drawingBufferHeight*4),$.readPixels(0,0,$.drawingBufferWidth,$.drawingBufferHeight,$.RGBA,$.UNSIGNED_BYTE,Y),function(ue,ye,Ce){for(var ge=parseInt(Ce/2),_e=4*ye,Ee=new Uint8Array(4*ye),Ie=0;Ie<ge;++Ie){var Te=Ie*_e,Qe=(Ce-Ie-1)*_e;Ee.set(ue.subarray(Te,Te+_e)),ue.copyWithin(Te,Qe,Qe+_e),ue.set(Ee,Qe)}return ue}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(pe),U++,D||z.html("Saved frame <b>"+G.length.toString()+"</b> out of "+F.toString()),J.next=48,new Promise(function(ue){return setTimeout(ue,0)});J.next=50;break;case 48:J.next=39;break;case 50:D||z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(W),ie=(0,u.GIFEncoder)(),E=function(ue){for(var ye=new Uint8Array(ue.length*ue[0].length),Ce=0;Ce<ue.length;Ce++)ye.set(ue[Ce],Ce*ue[0].length);var ge=(0,u.quantize)(ye,256,{format:"rgba4444",oneBitAlpha:!0});return ge.length===256?ge[ge.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ge.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ge}(G),R={},B=function(ue){for(var ye=ue.length/4,Ce=new Uint8Array(ye),ge=0;ge<ye;ge++){var _e=ue[4*ge]<<24|ue[4*ge+1]<<16|ue[4*ge+2]<<8|ue[4*ge+3];R[_e]===void 0&&(R[_e]=(0,u.nearestColorIndex)(E,ue.slice(4*ge,4*(ge+1)))),Ce[ge]=R[_e]}return Ce},H=E.length-1,Z=[],te=0;case 60:if(!(te<G.length)){J.next=71;break}if(se=B(G[te]),pe=se.slice(),te===0)ie.writeFrame(se,this.width,this.height,{palette:E,delay:A,dispose:1});else{for(oe=0;oe<se.length;oe++)se[oe]===Z[oe]&&(se[oe]=H);ie.writeFrame(se,this.width,this.height,{delay:A,transparent:!0,transparentIndex:H,dispose:1})}return Z=pe,D||z.html("Rendered frame <b>"+te.toString()+"</b> out of "+F.toString()),J.next=68,new Promise(function(ue){return setTimeout(ue,0)});case 68:te++,J.next=60;break;case 71:ie.finish(),he=ie.bytesView(),he=new Blob([he],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),D||(z.html("Done. Downloading your gif!"),0<k&&setTimeout(function(){return z.remove()},1e3*k)),a.default.prototype.downloadFile(he,j,"gif");case 80:case"end":return J.stop()}},x,this)});var v,_=function(){var x=this,j=arguments;return new Promise(function(M,S){var P=v.apply(x,j);function L(k){m(P,M,S,L,D,"next",k)}function D(k){m(P,M,S,L,D,"throw",k)}L(void 0)})};return function(x,j){return _.apply(this,arguments)}}(),a.default.prototype.image=function(v,_,x,j,U,W,G,z,$,k,I,A){a.default._validateParameters("image",arguments);var Y=v.width,F=v.height,N=(A=A||b.CENTER,I=I||b.CENTER,v.elt&&(Y=Y!==void 0?Y:v.elt.width,F=F!==void 0?F:v.elt.height),v.elt&&v.elt.videoWidth&&!v.canvas&&(Y=Y!==void 0?Y:v.elt.videoWidth,F=F!==void 0?F:v.elt.videoHeight),j||Y),U=U||F,W=W||0,G=G||0,z=f(z!==void 0?z:Y,Y),Y=f($!==void 0?$:F,F),$=1;v.elt&&!v.canvas&&v.elt.style.width&&($=v.elt.videoWidth&&!j?v.elt.videoWidth:v.elt.width,$/=parseInt(v.elt.style.width,10)),W*=$,G*=$,Y*=$,z*=$,F=g(k,I,A,(F=l.default.modeAdjust(_,x,N,U,this._renderer._imageMode)).x,F.y,F.w,F.h,W,G,z,Y),this._renderer.image(v,F.sx,F.sy,F.sw,F.sh,F.dx,F.dy,F.dw,F.dh)},a.default.prototype.tint=function(){for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];a.default._validateParameters("tint",_);var j=this.color.apply(this,_);this._renderer._tint=j.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(v){a.default._validateParameters("imageMode",arguments),v!==b.CORNER&&v!==b.CORNERS&&v!==b.CENTER||(this._renderer._imageMode=v)},r=a.default,c.default=r},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=a(r("../core/main")),d=a(r("./filters"));function a(b){return b&&b.__esModule?b:{default:b}}function l(b,y){for(var u=0;u<y.length;u++){var p=y[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(b,p.key,p)}}o.default.Image=function(){function b(p,h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.width=p,this.height=h,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var y,u;return y=b,(u=[{key:"pixelDensity",value:function(p){return p!==void 0?(p<=0&&(o.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),p=1),this._pixelDensity=p,this.width/=p,this.height/=p,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var h,m=this.gifProperties,g=g._lastRealFrameTime||window.performance.now();m.lastChangeTime===0&&(m.lastChangeTime=g),m.playing&&(m.timeDisplayed=g-m.lastChangeTime,h=m.frames[m.displayIndex].delay,m.timeDisplayed>=h&&(h=Math.floor(m.timeDisplayed/h),m.timeDisplayed=0,m.lastChangeTime=g,m.displayIndex+=h,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(g=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[g].image,0,0),m.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(p,h){this[p]=h,this.setModified(!0)}},{key:"loadPixels",value:function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(p,h,m,g){o.default.Renderer2D.prototype.updatePixels.call(this,p,h,m,g),this.setModified(!0)}},{key:"get",value:function(p,h,m,g){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return o.default.Renderer2D.prototype._getPixel.apply(this,h)}},{key:"set",value:function(p,h,m){o.default.Renderer2D.prototype.set.call(this,p,h,m),this.setModified(!0)}},{key:"resize",value:function(p,h){p===0&&h===0?(p=this.canvas.width,h=this.canvas.height):p===0?p=this.canvas.width*h/this.canvas.height:h===0&&(h=this.canvas.height*p/this.canvas.width),p=Math.floor(p),h=Math.floor(h);var m=document.createElement("canvas");if(m.width=p,m.height=h,this.gifProperties)for(var g=this.gifProperties,f=0;f<g.numFrames;f++){for(var v=this.drawingContext.createImageData(p,h),_=(P=P=S=M=j=void 0,g.frames[f].image),x=v,j=0,M=0;M<x.height;M++)for(var S=0;S<x.width;S++){var P=Math.floor(S*_.width/x.width),P=4*(Math.floor(M*_.height/x.height)*_.width+P);x.data[j++]=_.data[P++],x.data[j++]=_.data[P++],x.data[j++]=_.data[P++],x.data[j++]=_.data[+P]}g.frames[f].image=v}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=p,this.canvas.height=this.height=h,this.drawingContext.drawImage(m,0,0,p,h,0,0,p,h),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];o.default.prototype.copy.apply(this,h)}},{key:"mask",value:function(p){var h=this.drawingContext.globalCompositeOperation,m=this._pixelDensity,g=1,f=[p=p===void 0?this:p,0,0,(g=p instanceof o.default.Renderer?p._pInst._pixelDensity:g)*p.width,g*p.height,0,0,m*this.width,m*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,f),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,m*this.width,m*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,f);this.drawingContext.globalCompositeOperation=h,this.setModified(!0)}},{key:"filter",value:function(p,h){d.default.apply(this.canvas,d.default[p],h),this.setModified(!0)}},{key:"blend",value:function(){for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,h),this.setModified(!0)}},{key:"setModified",value:function(p){this._modified=p}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(p,h){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,p):o.default.prototype.saveCanvas(this.canvas,p,h)}},{key:"reset",value:function(){var p;this.gifProperties&&((p=this.gifProperties).playing=!0,p.timeSinceStart=0,p.timeDisplayed=0,p.lastChangeTime=0,p.loopCount=0,p.displayIndex=0,this.drawingContext.putImageData(p.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var p;if(this.gifProperties)return(p=this.gifProperties).displayIndex%p.numFrames}},{key:"setFrame",value:function(p){var h;this.gifProperties&&(p<(h=this.gifProperties).numFrames&&0<=p?(h.timeDisplayed=0,h.lastChangeTime=0,h.displayIndex=p,this.drawingContext.putImageData(h.frames[p].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(p,h){if(this.gifProperties){var m=this.gifProperties;if(h<m.numFrames&&0<=h)m.frames[h].delay=p;else{var g=!0,h=!1,f=void 0;try{for(var v,_=m.frames[Symbol.iterator]();!(g=(v=_.next()).done);g=!0)v.value.delay=p}catch(j){h=!0,f=j}finally{try{g||_.return==null||_.return()}finally{if(h)throw f}}}}}}])&&l(y.prototype,u),b}(),r=o.default.Image,c.default=r},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(r,i,c){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=a(r("../core/main")),d=a(r("./filters"));function a(l){return l&&l.__esModule?l:{default:l}}r("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var l,b=arguments.length,y=new Array(b),u=0;u<b;u++)y[u]=arguments[u];o.default._validateParameters("blend",y),this._renderer?(l=this._renderer).blend.apply(l,y):o.default.Renderer2D.prototype.blend.apply(this,y)},o.default.prototype.copy=function(){for(var l,b,y,u,p,h,m,g,f,v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];if(o.default._validateParameters("copy",_),_.length===9)l=_[0],b=_[1],y=_[2],u=_[3],p=_[4],h=_[5],m=_[6],g=_[7],f=_[8];else{if(_.length!==8)throw new Error("Signature not supported");l=this,b=_[0],y=_[1],u=_[2],p=_[3],h=_[4],m=_[5],g=_[6],f=_[7]}o.default.prototype._copyHelper(this,l,b,y,u,p,h,m,g,f)},o.default.prototype._copyHelper=function(l,b,y,u,p,h,m,g,f,v){var _=b.canvas.width/b.width,x=0,j=0;b._renderer&&b._renderer.isP3D&&(x=b.width/2,j=b.height/2),l._renderer&&l._renderer.isP3D?(l.push(),l.resetMatrix(),l.noLights(),l.blendMode(l.BLEND),l.imageMode(l.CORNER),o.default.RendererGL.prototype.image.call(l._renderer,b,y+x,u+j,p,h,m,g,f,v),l.pop()):l.drawingContext.drawImage(b.canvas,_*(y+x),_*(u+j),_*p,_*h,m,g,f,v)},o.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},o.default.prototype.filter=function(){for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];o.default._validateParameters("filter",b);var m=(function(){var g,f={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof o.default.Shader?f.shader=arguments.length<=0?void 0:arguments[0]:(f.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(f.value=arguments.length<=1?void 0:arguments[1]),((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])===!1&&(f.useWebGL=!1)),f}).apply(void 0,b),u=m.shader,p=m.operation,h=m.value,m=m.useWebGL;this._renderer.isP3D&&u?o.default.RendererGL.prototype.filter.call(this._renderer,u):m||this._renderer.isP3D?(!m&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?o.default.RendererGL.prototype.filter.call(this._renderer,p,h):((u=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),u.filter.apply(u,b),this.copy(u._renderer,0,0,this.width,this.height,0,0,this.width,this.height),u.clear())):this.canvas!==void 0?d.default.apply(this.canvas,d.default[p],h):d.default.apply(this.elt,d.default[p],h)},o.default.prototype.get=function(l,b,y,u){var p;return o.default._validateParameters("get",arguments),(p=this._renderer).get.apply(p,arguments)},o.default.prototype.loadPixels=function(){for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];o.default._validateParameters("loadPixels",b),this._renderer.loadPixels()},o.default.prototype.set=function(l,b,y){this._renderer.set(l,b,y)},o.default.prototype.updatePixels=function(l,b,y,u){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(l,b,y,u)},r=o.default,c.default=r},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=b(r("../core/main")),a=(r("whatwg-fetch"),r("es6-promise/auto"),b(r("fetch-jsonp"))),l=b(r("file-saver"));function b(h){return h&&h.__esModule?h:{default:h}}function y(h){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}function u(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function p(h,m){m&&m!==!0&&m!=="true"||(m="");var g="";return(h=h||"untitled")&&h.includes(".")&&(g=h.split(".").pop()),m&&g!==m&&(g=m,h="".concat(h,".").concat(g)),[h,g]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),d.default.prototype.loadJSON=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];d.default._validateParameters("loadJSON",m);for(var f,v,_,x=m[0],j={},M="json",S=1;S<m.length;S++){var P=m[S];typeof P=="string"?P!=="jsonp"&&P!=="json"||(M=P):typeof P=="function"?f?v=P:f=P:y(P)==="object"&&(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))&&(M="jsonp",_=P)}var L=this;return this.httpDo(x,"GET",_,M,function(D){for(var k in D)j[k]=D[k];f!==void 0&&f(D),L._decrementPreload()},function(D){if(d.default._friendlyFileLoadError(5,x),!v)throw D;v(D)}),j},d.default.prototype.loadStrings=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];d.default._validateParameters("loadStrings",m);for(var f,v,_=[],x=1;x<m.length;x++){var j=m[x];typeof j=="function"&&(f===void 0?f=j:v===void 0&&(v=j))}var M=this;return d.default.prototype.httpDo.call(this,m[0],"GET","text",function(S){for(var P=S.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),L=0,D=P.length;L<D;L+=32768)Array.prototype.push.apply(_,P.slice(L,Math.min(L+32768,D)));f!==void 0&&f(_),M._decrementPreload()},function(S){if(d.default._friendlyFileLoadError(3,S),!v)throw S;v(S)}),_},d.default.prototype.loadTable=function(h){var m,g,f,v=!1,_=h.substring(h.lastIndexOf(".")+1,h.length);_==="csv"?f=",":_==="ssv"?f=";":_==="tsv"&&(f="	");for(var x=1;x<arguments.length;x++)typeof arguments[x]=="function"?m===void 0?m=arguments[x]:g===void 0&&(g=arguments[x]):typeof arguments[x]=="string"&&(arguments[x]==="header"&&(v=!0),arguments[x]==="csv"?f=",":arguments[x]==="ssv"?f=";":arguments[x]==="tsv"&&(f="	"));var j=new d.default.Table,M=this;return this.httpDo(h,"GET","table",function(S){for(var P,L,D={},k=0,I=[],A=0,F=null,N=function(){D.currentState=k,D.token=""},U=function(){F.push(D.token),N()},W=function(){D.currentState=4,I.push(F),F=null};;){if((P=S[A++])==null){if(D.escaped)throw new Error("Unclosed quote in file.");if(F){U(),W();break}}if(F===null&&(D.escaped=!1,F=[],N()),D.currentState===k){if(P==='"'){D.escaped=!0,D.currentState=1;continue}D.currentState=1}if(D.currentState===1&&D.escaped)if(P==='"')S[A]==='"'?(D.token+='"',A++):(D.escaped=!1,D.currentState=2);else{if(P==="\r")continue;D.token+=P}else P==="\r"?(S[A]===`
`&&A++,U(),W()):P===`
`?(U(),W()):P===f?U():D.currentState===1&&(D.token+=P)}if(v)j.columns=I.shift();else for(var G=0;G<I[0].length;G++)j.columns[G]="null";for(var z=0;z<I.length;z++)(I[z].length!==1||I[z][0]!=="undefined"&&I[z][0]!=="")&&((L=new d.default.TableRow).arr=I[z],L.obj=function(Y,$){if(($=$||[])===void 0)for(var ie=0;ie<Y.length;ie++)$[ie.toString()]=ie;return Object.fromEntries($.map(function(E,R){return[E,Y[R]]}))}(I[z],j.columns),j.addRow(L));typeof m=="function"&&m(j),M._decrementPreload()},function(S){d.default._friendlyFileLoadError(2,h),g?g(S):console.error(S)}),j},d.default.prototype.loadXML=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];for(var f,v,_=new d.default.XML,x=1;x<m.length;x++){var j=m[x];typeof j=="function"&&(f===void 0?f=j:v===void 0&&(v=j))}var M=this;return this.httpDo(m[0],"GET","xml",function(S){for(var P in S)_[P]=S[P];f!==void 0&&f(_),M._decrementPreload()},function(S){if(d.default._friendlyFileLoadError(1,S),!v)throw S;v(S)}),_},d.default.prototype.loadBytes=function(h,m,g){var f={},v=this;return this.httpDo(h,"GET","arrayBuffer",function(_){f.bytes=new Uint8Array(_),typeof m=="function"&&m(f),v._decrementPreload()},function(_){if(d.default._friendlyFileLoadError(6,h),!g)throw _;g(_)}),f},d.default.prototype.httpGet=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return d.default._validateParameters("httpGet",m),m.splice(1,0,"GET"),d.default.prototype.httpDo.apply(this,m)},d.default.prototype.httpPost=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return d.default._validateParameters("httpPost",m),m.splice(1,0,"POST"),d.default.prototype.httpDo.apply(this,m)},d.default.prototype.httpDo=function(){for(var h,m,g,f={},v=0,_="text/plain",x=arguments.length-1;0<x&&typeof(x<0||arguments.length<=x?void 0:arguments[x])=="function";x--)v++;var j=arguments.length-v,M=arguments.length<=0?void 0:arguments[0];if(j==2&&typeof M=="string"&&y(arguments.length<=1?void 0:arguments[1])==="object")I=new Request(M,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var S,P="GET",L=1;L<arguments.length;L++){var D=L<0||arguments.length<=L?void 0:arguments[L];if(typeof D=="string")D==="GET"||D==="POST"||D==="PUT"||D==="DELETE"?P=D:D==="json"||D==="jsonp"||D==="binary"||D==="arrayBuffer"||D==="xml"||D==="text"||D==="table"?h=D:S=D;else if(typeof D=="number")S=D.toString();else if(y(D)==="object")if(D.hasOwnProperty("jsonpCallback")||D.hasOwnProperty("jsonpCallbackFunction"))for(var k in D)f[k]=D[k];else _=D instanceof d.default.XML?(S=D.serialize(),"application/xml"):(S=JSON.stringify(D),"application/json");else typeof D=="function"&&(m?g=D:m=D)}var j=P==="GET"?new Headers:new Headers({"Content-Type":_}),I=new Request(M,{method:P,mode:"cors",body:S,headers:j})}return(j=(j=(h=h||(M.includes("json")?"json":M.includes("xml")?"xml":"text"))==="jsonp"?(0,a.default)(M,f):fetch(I)).then(function(A){if(!A.ok)throw(F=new Error(A.body)).status=A.status,F.ok=!1,F;var F=0;switch((F=h!=="jsonp"?A.headers.get("content-length"):F)&&64e6<F&&d.default._friendlyFileLoadError(7,M),h){case"json":case"jsonp":return A.json();case"binary":return A.blob();case"arrayBuffer":return A.arrayBuffer();case"xml":return A.text().then(function(N){return N=new DOMParser().parseFromString(N,"text/xml"),new d.default.XML(N.documentElement)});default:return A.text()}})).then(m||function(){}),j.catch(g||console.error),j},window.URL=window.URL||window.webkitURL,d.default.prototype._pWriters=[],d.default.prototype.createWriter=function(h,m){var g,f;for(f in d.default.prototype._pWriters)if(d.default.prototype._pWriters[f].name===h)return g=new d.default.PrintWriter(h+this.millis(),m),d.default.prototype._pWriters.push(g),g;return g=new d.default.PrintWriter(h,m),d.default.prototype._pWriters.push(g),g},d.default.PrintWriter=function(h,m){var g=this;this.name=h,this.content="",this.write=function(f){this.content+=f},this.print=function(f){this.content+="".concat(f,`
`)},this.clear=function(){this.content=""},this.close=function(){var f,v=[];for(f in v.push(this.content),d.default.prototype.writeFile(v,h,m),d.default.prototype._pWriters)d.default.prototype._pWriters[f].name===this.name&&d.default.prototype._pWriters.splice(f,1);g.clear(),g={}}},d.default.prototype.save=function(h,m,g){var f=arguments,v=(this._curElement||this).elt;if(f.length===0)d.default.prototype.saveCanvas(v);else if(f[0]instanceof d.default.Renderer||f[0]instanceof d.default.Graphics)d.default.prototype.saveCanvas(f[0].elt,f[1],f[2]);else if(f.length===1&&typeof f[0]=="string")d.default.prototype.saveCanvas(v,f[0]);else switch(p(f[1],f[2])[1]){case"json":return void d.default.prototype.saveJSON(f[0],f[1],f[2]);case"txt":return void d.default.prototype.saveStrings(f[0],f[1],f[2]);default:f[0]instanceof Array?d.default.prototype.saveStrings(f[0],f[1],f[2]):f[0]instanceof d.default.Table?d.default.prototype.saveTable(f[0],f[1],f[2]):f[0]instanceof d.default.Image?d.default.prototype.saveCanvas(f[0].canvas,f[1]):f[0]instanceof d.default.SoundFile&&d.default.prototype.saveSound(f[0],f[1],f[2],f[3])}},d.default.prototype.saveJSON=function(h,m,g){d.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(g.split(`
`),m,"json")},d.default.prototype.saveJSONObject=d.default.prototype.saveJSON,d.default.prototype.saveJSONArray=d.default.prototype.saveJSON,d.default.prototype.saveStrings=function(h,m,g,f){d.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(m,g||"txt"),_=0;_<h.length;_++)f?v.write(h[_]+`\r
`):v.write(h[_]+`
`);v.close(),v.clear()},d.default.prototype.saveTable=function(h,m,g){d.default._validateParameters("saveTable",arguments),f=g===void 0?m.substring(m.lastIndexOf(".")+1,m.length):g;var f,v=this.createWriter(m,f),_=h.columns,x=f==="tsv"?"	":",";if(f!=="html"){if(_[0]!=="0"){for(var j=0;j<_.length;j++)j<_.length-1?v.write(_[j]+x):v.write(_[j]);v.write(`
`)}for(var M=0;M<h.rows.length;M++){for(var S=void 0,S=0;S<h.rows[M].arr.length;S++)S<h.rows[M].arr.length-1?f==="csv"&&String(h.rows[M].arr[S]).includes(",")?v.write('"'+h.rows[M].arr[S]+'"'+x):v.write(h.rows[M].arr[S]+x):f==="csv"&&String(h.rows[M].arr[S]).includes(",")?v.write('"'+h.rows[M].arr[S]+'"'):v.write(h.rows[M].arr[S]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),_[0]!=="0"){v.print("    <tr>");for(var P=0;P<_.length;P++){var L=u(_[P]);v.print("      <td>".concat(L)),v.print("      </td>")}v.print("    </tr>")}for(var D=0;D<h.rows.length;D++){v.print("    <tr>");for(var k=0;k<h.columns.length;k++){var I=u(h.rows[D].getString(k));v.print("      <td>".concat(I)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},d.default.prototype.writeFile=function(v,m,g){var f="application/octet-stream",v=(d.default.prototype._isSafari()&&(f="text/plain"),new Blob(v,{type:f}));d.default.prototype.downloadFile(v,m,g)},d.default.prototype.downloadFile=function(h,v,_){var f,v=p(v,_),_=v[0];h instanceof Blob?l.default.saveAs(h,_):((f=document.createElement("a")).href=h,f.download=_,f.onclick=function(x){document.body.removeChild(x.target),x.stopPropagation()},f.style.display="none",document.body.appendChild(f),d.default.prototype._isSafari()&&(h=(h=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(v[1],'"'),alert(h)),f.click())},d.default.prototype._checkFileExtension=p,d.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},r=d.default,c.default=r},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(a,l){for(var b=0;b<l.length;b++){var y=l[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(a,y.key,y)}}o.default.Table=function(){function a(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],u=this,p=a;if(!(u instanceof p))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=y}var l,b;return l=a,(b=[{key:"addRow",value:function(y){if(y=y||new o.default.TableRow,y.arr===void 0||y.obj===void 0)throw new Error("invalid TableRow: ".concat(y));return(y.table=this).rows.push(y),y}},{key:"removeRow",value:function(y){this.rows[y].table=null,y=this.rows.splice(y+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(y)}},{key:"getRow",value:function(y){return this.rows[y]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(y,u){if(typeof u=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[u]===y)return this.rows[p]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[u]===y)return this.rows[h];return null}},{key:"findRows",value:function(y,u){var p=[];if(typeof u=="string")for(var h=0;h<this.rows.length;h++)this.rows[h].obj[u]===y&&p.push(this.rows[h]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[u]===y&&p.push(this.rows[m]);return p}},{key:"matchRow",value:function(y,u){if(typeof u=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[u].match(y))return this.rows[p]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[u].match(y))return this.rows[h];return null}},{key:"matchRows",value:function(y,u){var p=[];if(typeof u=="number")for(var h=0;h<this.rows.length;h++)this.rows[h].arr[u].match(y)&&p.push(this.rows[h]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[u].match(y)&&p.push(this.rows[m]);return p}},{key:"getColumn",value:function(y){var u=[];if(typeof y=="string")for(var p=0;p<this.rows.length;p++)u.push(this.rows[p].obj[y]);else for(var h=0;h<this.rows.length;h++)u.push(this.rows[h].arr[y]);return u}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(y){this.columns.push(y||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(y,u){for(var p=[],h=0;h<y.length;h++)p.push(y.charAt(h).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(p.join("|"),"g");if(u===void 0)for(var g=0;g<this.columns.length;g++)for(var f=0;f<this.rows.length;f++){var v=(v=this.rows[f].arr[g]).replace(m,"");this.rows[f].arr[g]=v,this.rows[f].obj[this.columns[g]]=v}else if(typeof u=="string")for(var _=0;_<this.rows.length;_++){var x=(x=this.rows[_].obj[u]).replace(m,""),j=(this.rows[_].obj[u]=x,this.columns.indexOf(u));this.rows[_].arr[j]=x}else for(var M=0;M<this.rows.length;M++){var S=(S=this.rows[M].arr[u]).replace(m,"");this.rows[M].arr[u]=S,this.rows[M].obj[this.columns[u]]=S}}},{key:"trim",value:function(y){var u=new RegExp(" ","g");if(y===void 0)for(var p=0;p<this.columns.length;p++)for(var h=0;h<this.rows.length;h++){var m=(m=this.rows[h].arr[p]).replace(u,"");this.rows[h].arr[p]=m,this.rows[h].obj[this.columns[p]]=m}else if(typeof y=="string")for(var g=0;g<this.rows.length;g++){var f=(f=this.rows[g].obj[y]).replace(u,""),v=(this.rows[g].obj[y]=f,this.columns.indexOf(y));this.rows[g].arr[v]=f}else for(var _=0;_<this.rows.length;_++){var x=(x=this.rows[_].arr[y]).replace(u,"");this.rows[_].arr[y]=x,this.rows[_].obj[this.columns[y]]=x}}},{key:"removeColumn",value:function(h){typeof h=="string"?p=this.columns.indexOf(u=h):u=this.columns[p=h];var u,p,h=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(h);for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr,f=g.splice(p+1,g.length);g.pop(),this.rows[m].arr=g.concat(f),delete this.rows[m].obj[u]}}},{key:"set",value:function(y,u,p){this.rows[y].set(u,p)}},{key:"setNum",value:function(y,u,p){this.rows[y].setNum(u,p)}},{key:"setString",value:function(y,u,p){this.rows[y].setString(u,p)}},{key:"get",value:function(y,u){return this.rows[y].get(u)}},{key:"getNum",value:function(y,u){return this.rows[y].getNum(u)}},{key:"getString",value:function(y,u){return this.rows[y].getString(u)}},{key:"getObject",value:function(y){for(var u,p={},h=0;h<this.rows.length;h++)if(u=this.rows[h].obj,typeof y=="string"){if(!(0<=this.columns.indexOf(y)))throw new Error('This table has no column named "'.concat(y,'"'));p[u[y]]=u}else p[h]=this.rows[h].obj;return p}},{key:"getArray",value:function(){for(var y=[],u=0;u<this.rows.length;u++)y.push(this.rows[u].arr);return y}}])&&d(l.prototype,b),a}(),r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(r,i,c){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function o(d,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}r.default.TableRow=function(){function d(b,y){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var u=[];b&&(u=b.split(y=y||",")),this.arr=u,this.obj=Object.fromEntries(u.entries()),this.table=null}var a,l;return a=d,(l=[{key:"set",value:function(b,y){if(typeof b=="string"){var u=this.table.columns.indexOf(b);if(!(0<=u))throw new Error('This table has no column named "'.concat(b,'"'));this.obj[b]=y,this.arr[u]=y}else{if(!(b<this.table.columns.length))throw new Error("Column #".concat(b," is out of the range of this table"));this.arr[b]=y,u=this.table.columns[b],this.obj[u]=y}}},{key:"setNum",value:function(b,y){y=parseFloat(y),this.set(b,y)}},{key:"setString",value:function(b,y){y=y.toString(),this.set(b,y)}},{key:"get",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b]}},{key:"getNum",value:function(b){var y=parseFloat(typeof b=="string"?this.obj[b]:this.arr[b]);if(y.toString()==="NaN")throw"Error: ".concat(this.obj[b]," is NaN (Not a Number)");return y}},{key:"getString",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b].toString()}}])&&o(a.prototype,l),d}(),r=r.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(l,b){for(var y=0;y<b.length;y++){var u=b[y];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function a(l){for(var b=[],y=0;y<l.length;y++)b.push(new o.default.XML(l[y]));return b}o.default.XML=function(){function l(u){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");u?this.DOM=u:(u=document.implementation.createDocument(null,"doc"),this.DOM=u.createElement("root"))}var b,y;return b=l,(y=[{key:"getParent",value:function(){return new o.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(u){var p=this.DOM.innerHTML,h=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(u);m.innerHTML=p;for(var g=0;g<h.length;g++)m.setAttribute(h[g].nodeName,h[g].nodeValue);this.DOM=m}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var u=[],p=0;p<this.DOM.childNodes.length;p++)u.push(this.DOM.childNodes[p].nodeName);return u}},{key:"getChildren",value:function(u){return a(u?this.DOM.getElementsByTagName(u):this.DOM.children)}},{key:"getChild",value:function(u){if(typeof u!="string")return new o.default.XML(this.DOM.children[u]);var p=!0,h=!1,m=void 0;try{for(var g,f=this.DOM.children[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var v=g.value;if(v.tagName===u)return new o.default.XML(v)}}catch(_){h=!0,m=_}finally{try{p||f.return==null||f.return()}finally{if(h)throw m}}}},{key:"addChild",value:function(u){u instanceof o.default.XML&&this.DOM.appendChild(u.DOM)}},{key:"removeChild",value:function(u){var p=-1;if(typeof u=="string"){for(var h=0;h<this.DOM.children.length;h++)if(this.DOM.children[h].tagName===u){p=h;break}}else p=u;p!==-1&&this.DOM.removeChild(this.DOM.children[p])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var u=[],p=!0,h=!1,m=void 0;try{for(var g,f=this.DOM.attributes[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var v=g.value;u.push(v.nodeName)}}catch(_){h=!0,m=_}finally{try{p||f.return==null||f.return()}finally{if(h)throw m}}return u}},{key:"hasAttribute",value:function(u){var p={},h=!0,m=!1,g=void 0;try{for(var f,v=this.DOM.attributes[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var _=f.value;p[_.nodeName]=_.nodeValue}}catch(x){m=!0,g=x}finally{try{h||v.return==null||v.return()}finally{if(m)throw g}}return!!p[u]}},{key:"getNum",value:function(u,p){var h={},m=!0,g=!1,f=void 0;try{for(var v,_=this.DOM.attributes[Symbol.iterator]();!(m=(v=_.next()).done);m=!0){var x=v.value;h[x.nodeName]=x.nodeValue}}catch(j){g=!0,f=j}finally{try{m||_.return==null||_.return()}finally{if(g)throw f}}return Number(h[u])||p||0}},{key:"getString",value:function(u,p){var h={},m=!0,g=!1,f=void 0;try{for(var v,_=this.DOM.attributes[Symbol.iterator]();!(m=(v=_.next()).done);m=!0){var x=v.value;h[x.nodeName]=x.nodeValue}}catch(j){g=!0,f=j}finally{try{m||_.return==null||_.return()}finally{if(g)throw f}}return h[u]?String(h[u]):p||null}},{key:"setAttribute",value:function(u,p){this.DOM.setAttribute(u,p)}},{key:"getContent",value:function(u){var p=this.DOM.textContent;return(p=p.replace(/\s\s+/g,","))||u||null}},{key:"setContent",value:function(u){this.DOM.children.length||(this.DOM.textContent=u)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&d(b.prototype,y),l}(),r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(a){return function(l){if(Array.isArray(l)){for(var b=0,y=new Array(l.length);b<l.length;b++)y[b]=l[b];return y}}(a)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(a,l,b){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(a,b),l)},o.default.prototype.dist=function(){for(var a=arguments.length,l=new Array(a),b=0;b<a;b++)l[b]=arguments[b];return o.default._validateParameters("dist",l),l.length===4?Math.hypot(l[2]-l[0],l[3]-l[1]):l.length===6?Math.hypot(l[3]-l[0],l[4]-l[1],l[5]-l[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(a,l,b){return o.default._validateParameters("lerp",arguments),b*(l-a)+a},o.default.prototype.log=Math.log,o.default.prototype.mag=function(a,l){return o.default._validateParameters("mag",arguments),Math.hypot(a,l)},o.default.prototype.map=function(a,l,b,y,u,p){return o.default._validateParameters("map",arguments),a=(a-l)/(b-l)*(u-y)+y,p?y<u?this.constrain(a,y,u):this.constrain(a,u,y):a},o.default.prototype.max=function(){for(var a=function(u){return Math.max.apply(Math,d(u))},l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return Array.isArray(b[0])?a(b[0]):a(b)},o.default.prototype.min=function(){for(var a=function(u){return Math.min.apply(Math,d(u))},l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return Array.isArray(b[0])?a(b[0]):a(b)},o.default.prototype.norm=function(a,l,b){return o.default._validateParameters("norm",arguments),this.map(a,l,b,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(a,l){return l?(l=Math.pow(10,l),Math.round(a*l)/l):Math.round(a)},o.default.prototype.sq=function(a){return a*a},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(y){o.default._validateParameters("fract",arguments);var l,b=0,y=Number(y);return isNaN(y)||Math.abs(y)===1/0?y:(y<0&&(y=-y,b=1),String(y).includes(".")&&!String(y).includes("e")?(l=String(y),l=+("0"+l.slice(l.indexOf("."))),Math.abs(b-l)):y<1?Math.abs(b-y):0)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(l,b,y){return(d=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(u,p,h){var m=[null];return m.push.apply(m,p),p=new(Function.bind.apply(u,m)),h&&a(p,h.prototype),p}).apply(null,arguments)}function a(l,b){return(a=Object.setPrototypeOf||function(y,u){return y.__proto__=u,y})(l,b)}o.default.prototype.createVector=function(l,b,y){return this instanceof o.default?d(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(l,b,y)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(y,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,y=(y=y("../core/main"))&&y.__esModule?y:{default:y};function o(u){return .5*(1-Math.cos(u*Math.PI))}var d,a=4095,l=4,b=.5,y=(y.default.prototype.noise=function(u){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(d==null){d=new Array(4096);for(var m=0;m<4096;m++)d[m]=Math.random()}u<0&&(u=-u),p<0&&(p=-p),h<0&&(h=-h);for(var g,f,v=Math.floor(u),_=Math.floor(p),x=Math.floor(h),j=u-v,M=p-_,S=h-x,P=0,L=.5,D=0;D<l;D++){var k=v+(_<<4)+(x<<8),I=o(j),A=o(M),F=d[k&a];F+=I*(d[k+1&a]-F),g=d[k+16&a],F+=A*((g+=I*(d[k+16+1&a]-g))-F),g=d[(k+=256)&a],g+=I*(d[k+1&a]-g),f=d[k+16&a],g+=A*((f+=I*(d[k+16+1&a]-f))-g),P+=(F+=o(S)*(g-F))*L,L*=b,v<<=1,_<<=1,x<<=1,1<=(j*=2)&&(v++,j--),1<=(M*=2)&&(_++,M--),1<=(S*=2)&&(x++,S--)}return P},y.default.prototype.noiseDetail=function(u,p){0<u&&(l=u),0<p&&(b=p)},y.default.prototype.noiseSeed=function(u){m=4294967296;var p,h,m,g={setSeed:function(v){h=p=(v??Math.random()*m)>>>0},getSeed:function(){return p},rand:function(){return(h=(1664525*h+1013904223)%m)/m}};g.setSeed(u),d=new Array(4096);for(var f=0;f<4096;f++)d[f]=g.rand()},y.default);c.default=y},{"../core/main":280}],313:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function d(p){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(u=r("../core/main"))&&u.__esModule?u:{default:u},l=function(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var h=b();if(h&&h.has(p))return h.get(p);var m,g={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var v;Object.prototype.hasOwnProperty.call(p,m)&&((v=f?Object.getOwnPropertyDescriptor(p,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(r("../core/constants"));function b(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,b=function(){return p},p)}function y(p,h){for(var m=0;m<h.length;m++){var g=h[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}a.default.Vector=function(){function p(){var x=this,f=p;if(!(x instanceof f))throw new TypeError("Cannot call a class as a function");var v,_,x=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],v=(arguments.length<=2?void 0:arguments[2])||0,_=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(v=(arguments.length<=0?void 0:arguments[0])||0,_=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=v,this.y=_,this.z=x}var h,m,g;return h=p,g=[{key:"fromAngle",value:function(f){var v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new a.default.Vector(v*Math.cos(f),v*Math.sin(f),0)}},{key:"fromAngles",value:function(S,j){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,x=Math.cos(j),j=Math.sin(j),M=Math.cos(S),S=Math.sin(S);return new a.default.Vector(_*S*j,-_*M,_*S*x)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*l.TWO_PI)}},{key:"random3D",value:function(){var f=Math.random()*l.TWO_PI,v=2*Math.random()-1,x=Math.sqrt(1-v*v),_=x*Math.cos(f),x=x*Math.sin(f);return new a.default.Vector(_,x,v)}},{key:"copy",value:function(f){return f.copy(f)}},{key:"add",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),M.add(j),M}},{key:"rem",value:function(f,v){if(f instanceof a.default.Vector&&v instanceof a.default.Vector)return(f=f.copy()).rem(v),f}},{key:"sub",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),M.sub(j),M}},{key:"mult",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),M.mult(j),M}},{key:"rotate",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return v.length===2?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),M.set(x)),M.rotate(j),M}},{key:"div",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),M.div(j),M}},{key:"dot",value:function(f,v){return f.dot(v)}},{key:"cross",value:function(f,v){return f.cross(v)}},{key:"dist",value:function(f,v){return f.dist(v)}},{key:"lerp",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2],S=v[3];return S?S.set(x):(S=x.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),S.lerp(j,M),S}},{key:"slerp",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2],S=v[3];return S?S.set(x):(S=x.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),S.slerp(j,M),S}},{key:"mag",value:function(f){return f.mag()}},{key:"magSq",value:function(f){return f.magSq()}},{key:"normalize",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1];return v.length<2?j=x.copy():(j instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),j.set(x)),j.normalize()}},{key:"limit",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),M.set(x)),M.limit(j)}},{key:"setMag",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),M.set(x)),M.setMag(j)}},{key:"heading",value:function(f){return f.heading()}},{key:"angleBetween",value:function(f,v){return f.angleBetween(v)}},{key:"reflect",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),M.set(x)),M.reflect(j)}},{key:"array",value:function(f){return f.array()}},{key:"equals",value:function(f,v){var _;return f instanceof a.default.Vector?_=f:Array.isArray(f)?_=new a.default.Vector().set(f):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),_.equals(v)}}],(m=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(f,v,_){return f instanceof a.default.Vector?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):Array.isArray(f)?(this.x=f[0]||0,this.y=f[1]||0,this.z=f[2]||0):(this.x=f||0,this.y=v||0,this.z=_||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(f,v,_){return f instanceof a.default.Vector?(this.x+=f.x||0,this.y+=f.y||0,this.z+=f.z||0):Array.isArray(f)?(this.x+=f[0]||0,this.y+=f[1]||0,this.z+=f[2]||0):(this.x+=f||0,this.y+=v||0,this.z+=_||0),this}},{key:"calculateRemainder2D",value:function(f,v){return f!==0&&(this.x=this.x%f),v!==0&&(this.y=this.y%v),this}},{key:"calculateRemainder3D",value:function(f,v,_){return f!==0&&(this.x=this.x%f),v!==0&&(this.y=this.y%v),_!==0&&(this.z=this.z%_),this}},{key:"rem",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x,j,M,S=v[0],P=v[1],L=v[2];if(S instanceof a.default.Vector){if([S.x,S.y,S.z].every(Number.isFinite))return x=parseFloat(S.x),j=parseFloat(S.y),M=parseFloat(S.z),this.calculateRemainder3D(x,j,M)}else if(Array.isArray(S)){if(S.every(Number.isFinite))return S.length===2?this.calculateRemainder2D(S[0],S[1]):S.length===3?this.calculateRemainder3D(S[0],S[1],S[2]):void 0}else if(v.length===1){if(Number.isFinite(S)&&S!==0)return this.x=this.x%S,this.y=this.y%S,this.z=this.z%S,this}else if(v.length===2){if(v.every(Number.isFinite))return this.calculateRemainder2D(S,P)}else if(v.length===3&&v.every(Number.isFinite))return this.calculateRemainder3D(S,P,L)}},{key:"sub",value:function(f,v,_){return f instanceof a.default.Vector?(this.x-=f.x||0,this.y-=f.y||0,this.z-=f.z||0):Array.isArray(f)?(this.x-=f[0]||0,this.y-=f[1]||0,this.z-=f[2]||0):(this.x-=f||0,this.y-=v||0,this.z-=_||0),this}},{key:"mult",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x,j=v[0],M=v[1],S=v[2];return j instanceof a.default.Vector?Number.isFinite(j.x)&&Number.isFinite(j.y)&&Number.isFinite(j.z)&&typeof j.x=="number"&&typeof j.y=="number"&&typeof j.z=="number"?(this.x*=j.x,this.y*=j.y,this.z*=j.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(j)?j.every(function(P){return Number.isFinite(P)})&&j.every(function(P){return typeof P=="number"})?j.length===1?(this.x*=j[0],this.y*=j[0],this.z*=j[0]):j.length===2?(this.x*=j[0],this.y*=j[1]):j.length===3&&(this.x*=j[0],this.y*=j[1],this.z*=j[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(x=v).every(function(P){return Number.isFinite(P)})&&x.every(function(P){return typeof P=="number"})?(v.length===1&&(this.x*=j,this.y*=j,this.z*=j),v.length===2&&(this.x*=j,this.y*=M),v.length===3&&(this.x*=j,this.y*=M,this.z*=S)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],j=v[1],M=v[2];if(x instanceof a.default.Vector)if(Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&typeof x.x=="number"&&typeof x.y=="number"&&typeof x.z=="number"){var S=x.z===0&&this.z===0;if(x.x===0||x.y===0||!S&&x.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=x.x,this.y/=x.y,S||(this.z/=x.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(x))if(x.every(Number.isFinite)&&x.every(function(P){return typeof P=="number"})){if(x.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1?(this.x/=x[0],this.y/=x[0],this.z/=x[0]):x.length===2?(this.x/=x[0],this.y/=x[1]):x.length===3&&(this.x/=x[0],this.y/=x[1],this.z/=x[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(v.every(Number.isFinite)&&v.every(function(P){return typeof P=="number"})){if(v.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;v.length===1&&(this.x/=x,this.y/=x,this.z/=x),v.length===2&&(this.x/=x,this.y/=j),v.length===3&&(this.x/=x,this.y/=j,this.z/=M)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var f=this.x,v=this.y,_=this.z;return f*f+v*v+_*_}},{key:"dot",value:function(f,v,_){return f instanceof a.default.Vector?this.dot(f.x,f.y,f.z):this.x*(f||0)+this.y*(v||0)+this.z*(_||0)}},{key:"cross",value:function(x){var v=this.y*x.z-this.z*x.y,_=this.z*x.x-this.x*x.z,x=this.x*x.y-this.y*x.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,v,_,x):new a.default.Vector(v,_,x)}},{key:"dist",value:function(f){return f.copy().sub(this).mag()}},{key:"normalize",value:function(){var f=this.mag();return f!==0&&this.mult(1/f),this}},{key:"limit",value:function(f){var v=this.magSq();return f*f<v&&this.div(Math.sqrt(v)).mult(f),this}},{key:"setMag",value:function(f){return this.normalize().mult(f)}},{key:"heading",value:function(){var f=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(f):f}},{key:"setHeading",value:function(f){this.isPInst&&(f=this._toRadians(f));var v=this.mag();return this.x=v*Math.cos(f),this.y=v*Math.sin(f),this}},{key:"rotate",value:function(v){var v=this.heading()+v,_=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*_,this.y=Math.sin(v)*_,this}},{key:"angleBetween",value:function(f){var v;return this.magSq()*f.magSq()==0?NaN:(v=this.cross(f),f=Math.atan2(v.mag(),this.dot(f))*Math.sign(v.z||1),this.isPInst?this._fromRadians(f):f)}},{key:"lerp",value:function(f,v,_,x){return f instanceof a.default.Vector?this.lerp(f.x,f.y,f.z,v):(this.x+=(f-this.x)*x||0,this.y+=(v-this.y)*x||0,this.z+=(_-this.z)*x||0,this)}},{key:"slerp",value:function(f,v){if(v!==0){if(v===1)return this.set(f);var _=this.mag(),x=f.mag();if(_*x==0)this.mult(1-v).add(f.x*v,f.y*v,f.z*v);else{var j=this.cross(f),M=j.mag(),S=Math.atan2(M,this.dot(f));if(0<M)j.x/=M,j.y/=M,j.z/=M;else{if(S<.5*Math.PI)return this.mult(1-v).add(f.x*v,f.y*v,f.z*v),this;this.z===0&&f.z===0?j.set(0,0,1):this.x!==0?j.set(this.y,-this.x,0).normalize():j.set(1,0,0)}M=j.cross(this),f=1-v+v*x/_,j=f*Math.cos(v*S),x=f*Math.sin(v*S),this.x=this.x*j+M.x*x,this.y=this.y*j+M.y*x,this.z=this.z*j+M.z*x}}return this}},{key:"reflect",value:function(f){return f.normalize(),this.sub(f.mult(2*this.dot(f)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(M,v,_){var x,j,M=M instanceof a.default.Vector?(x=M.x||0,j=M.y||0,M.z||0):Array.isArray(M)?(x=M[0]||0,j=M[1]||0,M[2]||0):(x=M||0,j=v||0,_||0);return this.x===x&&this.y===j&&this.z===M}}])&&y(h.prototype,m),g&&y(h,g),p}();var u=a.default.Vector;c.default=u},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(b,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(b=b("../core/main"))&&b.__esModule?b:{default:b},d="_lcg_random_state",a=4294967296,l=0,b=(o.default.prototype._lcg=function(y){return this[y]=(1664525*this[y]+1013904223)%a,this[y]/a},o.default.prototype._lcgSetSeed=function(y,u){this[y]=(u??Math.random()*a)>>>0},o.default.prototype.randomSeed=function(y){this._lcgSetSeed(d,y),this._gaussian_previous=!1},o.default.prototype.random=function(y,u){var p,h;return o.default._validateParameters("random",arguments),p=this[d]!=null?this._lcg(d):Math.random(),y===void 0?p:u===void 0?Array.isArray(y)?y[Math.floor(p*y.length)]:p*y:(u<y&&(h=y,y=u,u=h),p*(u-y)+y)},o.default.prototype.randomGaussian=function(y){var u,p,h,m,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)u=l,this._gaussian_previous=!1;else{for(;1<=(m=(p=this.random(2)-1)*p+(h=this.random(2)-1)*h););u=p*(m=Math.sqrt(-2*Math.log(m)/m)),l=h*m,this._gaussian_previous=!0}return u*g+(y||0)},o.default);c.default=b},{"../core/main":280}],315:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../core/main"))&&y.__esModule?y:{default:y},l=function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.prototype._angleMode=l.RADIANS,a.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},a.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},a.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},a.default.prototype.atan2=function(u,p){return this._fromRadians(Math.atan2(u,p))},a.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},a.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},a.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},a.default.prototype.degrees=function(u){return u*l.RAD_TO_DEG},a.default.prototype.radians=function(u){return u*l.DEG_TO_RAD},a.default.prototype.angleMode=function(u){if(a.default._validateParameters("angleMode",arguments),u===void 0)return this._angleMode;u!==l.DEGREES&&u!==l.RADIANS||u!==this._angleMode&&(u===l.RADIANS?(this._setProperty("pRotationX",this.pRotationX*l.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*l.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*l.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*l.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*l.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*l.RAD_TO_DEG)),this._angleMode=u)},a.default.prototype._toRadians=function(u){return this._angleMode===l.DEGREES?u*l.DEG_TO_RAD:u},a.default.prototype._toDegrees=function(u){return this._angleMode===l.RADIANS?u*l.RAD_TO_DEG:u},a.default.prototype._fromRadians=function(u){return this._angleMode===l.DEGREES?u*l.RAD_TO_DEG:u},a.default.prototype._fromDegrees=function(u){return this._angleMode===l.RADIANS?u*l.DEG_TO_RAD:u};var y=a.default;c.default=y},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(r,i,c){r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.textAlign=function(d,a){var l;return o.default._validateParameters("textAlign",arguments),(l=this._renderer).textAlign.apply(l,arguments)},o.default.prototype.textLeading=function(d){var a;return o.default._validateParameters("textLeading",arguments),(a=this._renderer).textLeading.apply(a,arguments)},o.default.prototype.textSize=function(d){var a;return o.default._validateParameters("textSize",arguments),(a=this._renderer).textSize.apply(a,arguments)},o.default.prototype.textStyle=function(d){var a;return o.default._validateParameters("textStyle",arguments),(a=this._renderer).textStyle.apply(a,arguments)},o.default.prototype.textWidth=function(){for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];if(a[0]+="",o.default._validateParameters("textWidth",a),a[0].length===0)return 0;for(var b=a[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),y=[],u=0;u<b.length;u++)y.push(this._renderer.textWidth(b[u]));return Math.max.apply(Math,y)},o.default.prototype.textAscent=function(){for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];return o.default._validateParameters("textAscent",a),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];return o.default._validateParameters("textDescent",a),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(d){return o.default._validateParameters("textWrap",[d]),this._renderer.textWrap(d)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function d(h){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=u(r("../core/constants")),b=u(r("opentype.js"));function y(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,y=function(){return h},h)}function u(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=y();if(m&&m.has(h))return m.get(h);var g,f,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&((f=_?Object.getOwnPropertyDescriptor(h,g):null)&&(f.get||f.set)?Object.defineProperty(v,g,f):v[g]=h[g]);return v.default=h,m&&m.set(h,v),v}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(h,m,g){a.default._validateParameters("loadFont",arguments);var f=new a.default.Font(this),v=this;return b.load(h,function(j,M){if(j)return a.default._friendlyFileLoadError(4,h),g!==void 0?g(j):void console.error(j,h);f.font=M,m!==void 0&&m(f),v._decrementPreload();var j=h.split("\\").pop().split("/").pop(),M=j.lastIndexOf("."),S=M<1?null:j.slice(M+1);["ttf","otf","woff","woff2"].includes(S)&&(S=j.slice(0,M!==-1?M:0),(j=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(h,`);
}
`))),document.head.appendChild(j))}),f},a.default.prototype.text=function(h,m,g,f,v){var _;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(_=this._renderer).text.apply(_,arguments):this},a.default.prototype.textFont=function(h,m){if(a.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*l._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var p=a.default;c.default=p},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(r,i,c){function o(P){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(P)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(d=r("../core/main"))&&d.__esModule?d:{default:d},a=function(P){if(P&&P.__esModule)return P;if(P===null||b(P)!=="object"&&typeof P!="function")return{default:P};var L=l();if(L&&L.has(P))return L.get(P);var D,k={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in P){var A;Object.prototype.hasOwnProperty.call(P,D)&&((A=I?Object.getOwnPropertyDescriptor(P,D):null)&&(A.get||A.set)?Object.defineProperty(k,D,A):k[D]=P[D])}return k.default=P,L&&L.set(P,k),k}(r("../core/constants"));function l(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,l=function(){return P},P)}function b(P){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(L){return o(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":o(L)})(P)}function y(P,L){for(var D=0;D<L.length;D++){var k=L[D];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}function u(P,L){var D=P.length;return P[L<0?L%D+D:L%D]}function p(P,L,D,k){var I,A,F;return k?(p.tmpPoint1===void 0&&(p.tmpPoint1=[],p.tmpPoint2=[]),A=p.tmpPoint1,F=p.tmpPoint2,A.x=L.x-P.x,A.y=L.y-P.y,F.x=D.x-L.x,F.y=D.y-L.y,I=A.x*F.x+A.y*F.y,A=Math.sqrt(A.x*A.x+A.y*A.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(I/(A*F))<k):(L[0]-P[0])*(D[1]-P[1])-(D[0]-P[0])*(L[1]-P[1])==0}function h(R,H,B,Z,te,A,F,N,U){var W=1-U,z=Math.pow(W,3),Y=Math.pow(W,2),E=U*U,$=E*U,G=z*R+3*Y*U*B+3*W*U*U*te+$*F,z=z*H+3*Y*U*Z+3*W*U*U*A+$*N,Y=R+2*U*(B-R)+E*(te-2*B+R),$=H+2*U*(Z-H)+E*(A-2*Z+H),ie=B+2*U*(te-B)+E*(F-2*te+B),E=Z+2*U*(A-Z)+E*(N-2*A+Z),R=W*R+U*B,B=W*H+U*Z,H=W*te+U*F,Z=W*A+U*N,te=90-180*Math.atan2(Y-ie,$-E)/Math.PI;return(ie<Y||$<E)&&(te+=180),{x:G,y:z,m:{x:Y,y:$},n:{x:ie,y:E},start:{x:R,y:B},end:{x:H,y:Z},alpha:te}}function m(P,L,D,k,I,A,F,N,U){return U==null?M(P,L,D,k,I,A,F,N):h(P,L,D,k,I,A,F,N,function(W,G,z,Y,$,ie,E,R,B){if(!(B<0||M(W,G,z,Y,$,ie,E,R)<B)){var H,Z=.5,te=1-Z;for(H=M(W,G,z,Y,$,ie,E,R,te);.01<Math.abs(H-B);)H=M(W,G,z,Y,$,ie,E,R,te+=(H<B?1:-1)*(Z/=2));return te}}(P,L,D,k,I,A,F,N,U))}function g(P,L,D){for(var k,I,A,F,N,U=0,W=0,G=(P=function(z,Y){function $(ge,_e,Ee){var Ie,Te;if(!ge)return["C",_e.x,_e.y,_e.x,_e.y,_e.x,_e.y];switch(ge[0]in{T:1,Q:1}||(_e.qx=_e.qy=null),ge[0]){case"M":_e.X=ge[1],_e.Y=ge[2];break;case"A":ge=["C"].concat(v.apply(0,[_e.x,_e.y].concat(ge.slice(1))));break;case"S":Te=Ee==="C"||Ee==="S"?(Ie=2*_e.x-_e.bx,2*_e.y-_e.by):(Ie=_e.x,_e.y),ge=["C",Ie,Te].concat(ge.slice(1));break;case"T":Ee==="Q"||Ee==="T"?(_e.qx=2*_e.x-_e.qx,_e.qy=2*_e.y-_e.qy):(_e.qx=_e.x,_e.qy=_e.y),ge=["C"].concat(j(_e.x,_e.y,_e.qx,_e.qy,ge[1],ge[2]));break;case"Q":_e.qx=ge[1],_e.qy=ge[2],ge=["C"].concat(j(_e.x,_e.y,ge[1],ge[2],ge[3],ge[4]));break;case"L":ge=["C"].concat(x(_e.x,_e.y,ge[1],ge[2]));break;case"H":ge=["C"].concat(x(_e.x,_e.y,ge[1],_e.y));break;case"V":ge=["C"].concat(x(_e.x,_e.y,_e.x,ge[1]));break;case"Z":ge=["C"].concat(x(_e.x,_e.y,_e.X,_e.Y))}return ge}function ie(ge,_e){if(7<ge[_e].length){ge[_e].shift();for(var Ee=ge[_e];Ee.length;)se[_e]="A",H&&(pe[_e]="A"),ge.splice(_e++,0,["C"].concat(Ee.splice(0,6)));ge.splice(_e,1),R=Math.max(B.length,H&&H.length||0)}}function E(ge,_e,Ee,Ie,Te){ge&&_e&&ge[Te][0]==="M"&&_e[Te][0]!=="M"&&(_e.splice(Te,0,["M",Ie.x,Ie.y]),Ee.bx=0,Ee.by=0,Ee.x=ge[Te][1],Ee.y=ge[Te][2],R=Math.max(B.length,H&&H.length||0))}var R,B=f(z),H=Y&&f(Y),Z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},se=[],pe=[],oe="",he="";R=Math.max(B.length,H&&H.length||0);for(var de=0;de<R;de++){(oe=B[de]?B[de][0]:oe)!=="C"&&(se[de]=oe,de&&(he=se[de-1])),B[de]=$(B[de],Z,he),se[de]!=="A"&&oe==="C"&&(se[de]="C"),ie(B,de),H&&((oe=H[de]?H[de][0]:oe)!=="C"&&(pe[de]=oe,de&&(he=pe[de-1])),H[de]=$(H[de],te,he),pe[de]!=="A"&&oe==="C"&&(pe[de]="C"),ie(H,de)),E(B,H,Z,te,de),E(H,B,te,Z,de);var J=B[de],ue=H&&H[de],ye=J.length,Ce=H&&ue.length;Z.x=J[ye-2],Z.y=J[ye-1],Z.bx=parseFloat(J[ye-4])||Z.x,Z.by=parseFloat(J[ye-3])||Z.y,te.bx=H&&(parseFloat(ue[Ce-4])||te.x),te.by=H&&(parseFloat(ue[Ce-3])||te.y),te.x=H&&ue[Ce-2],te.y=H&&ue[Ce-1]}return H?[B,H]:B}(P)).length;W<G;W++){if((A=P[W])[0]==="M")k=+A[1],I=+A[2];else{if(L<U+(F=m(k,I,A[1],A[2],A[3],A[4],A[5],A[6]))&&!D)return{x:(N=m(k,I,A[1],A[2],A[3],A[4],A[5],A[6],L-U)).x,y:N.y,alpha:N.alpha};U+=F,k=+A[5],I=+A[6]}A.shift()}return N=(N=D?U:h(k,I,A[0],A[1],A[2],A[3],A[4],A[5],1)).alpha?{x:N.x,y:N.y,alpha:N.alpha}:N}function f(P){var L=[],D=0,k=0,I=0,A=0,F=0;if(P){P[0][0]==="M"&&(I=D=+P[0][1],A=k=+P[0][2],F++,L[0]=["M",D,k]);for(var N,U,W=P.length===3&&P[0][0]==="M"&&P[1][0].toUpperCase()==="R"&&P[2][0].toUpperCase()==="Z",G=F,z=P.length;G<z;G++){if(L.push(N=[]),(U=P[G])[0]!==U[0].toUpperCase())switch(N[0]=U[0].toUpperCase(),N[0]){case"A":N[1]=U[1],N[2]=U[2],N[3]=U[3],N[4]=U[4],N[5]=U[5],N[6]=+(U[6]+D),N[7]=+(U[7]+k);break;case"V":N[1]=+U[1]+k;break;case"H":N[1]=+U[1]+D;break;case"R":for(var Y,$=2,ie=(Y=[D,k].concat(U.slice(1))).length;$<ie;$++)Y[$]=+Y[$]+D,Y[++$]=+Y[$]+k;L.pop(),L=L.concat(_(Y,W));break;case"M":I=+U[1]+D,A=+U[2]+k;break;default:for(var E=1,R=U.length;E<R;E++)N[E]=+U[E]+(E%2?D:k)}else if(U[0]==="R")Y=[D,k].concat(U.slice(1)),L.pop(),L=L.concat(_(Y,W)),N=["R"].concat(U.slice(-2));else for(var B=0,H=U.length;B<H;B++)N[B]=U[B];switch(N[0]){case"Z":D=I,k=A;break;case"H":D=N[1];break;case"V":k=N[1];break;case"M":I=N[N.length-2],A=N[N.length-1];break;default:D=N[N.length-2],k=N[N.length-1]}}}return L}function v(P,L,D,k,H,se,Z,N,U,W){function G(Ce,ge,_e){return{x:Ce*Math.cos(_e)-ge*Math.sin(_e),y:Ce*Math.sin(_e)+ge*Math.cos(_e)}}var z,R=Math.PI,B=120*R/180,Y=R/180*(+H||0),$=[],ie=(W?(de=W[0],z=W[1],oe=W[2],he=W[3]):(P=(te=G(P,L,-Y)).x,L=te.y,1<(ie=(E=(P-(N=(te=G(N,U,-Y)).x))/2)*E/(D*D)+(te=(L-(U=te.y))/2)*te/(k*k))&&(D*=ie=Math.sqrt(ie),k*=ie),ie=D*D,pe=k*k,oe=(se=(se===Z?-1:1)*Math.sqrt(Math.abs((ie*pe-ie*te*te-pe*E*E)/(ie*te*te+pe*E*E))))*D*te/k+(P+N)/2,he=se*-k*E/D+(L+U)/2,de=Math.asin(((L-he)/k).toFixed(9)),z=Math.asin(((U-he)/k).toFixed(9)),(de=P<oe?R-de:de)<0&&(de=2*R+de),(z=N<oe?R-z:z)<0&&(z=2*R+z),Z&&z<de&&(de-=2*R),!Z&&de<z&&(z-=2*R)),z-de),E=(Math.abs(ie)>B&&(pe=z,te=N,se=U,z=de+B*(Z&&de<z?1:-1),$=v(N=oe+D*Math.cos(z),U=he+k*Math.sin(z),D,k,H,0,Z,te,se,[z,pe,oe,he])),ie=z-de,Math.cos(de)),R=Math.sin(de),B=Math.cos(z),H=Math.sin(z),Z=Math.tan(ie/4),te=4/3*D*Z,se=4/3*k*Z,pe=[P,L],oe=[P+te*R,L-se*E],he=[N+te*H,U-se*B],de=[N,U];if(oe[0]=2*pe[0]-oe[0],oe[1]=2*pe[1]-oe[1],W)return[oe,he,de].concat($);for(var J=[],ue=0,ye=($=[oe,he,de].concat($).join().split(",")).length;ue<ye;ue++)J[ue]=ue%2?G($[ue-1],$[ue],Y).y:G($[ue],$[ue+1],Y).x;return J}function _(P,L){for(var D=[],k=0,I=P.length;k<I-2*!L;k+=2){var A=[{x:+P[k-2],y:+P[k-1]},{x:+P[k],y:+P[k+1]},{x:+P[k+2],y:+P[k+3]},{x:+P[k+4],y:+P[k+5]}];L?k?I-4===k?A[3]={x:+P[0],y:+P[1]}:I-2===k&&(A[2]={x:+P[0],y:+P[1]},A[3]={x:+P[2],y:+P[3]}):A[0]={x:+P[I-2],y:+P[I-1]}:I-4===k?A[3]=A[2]:k||(A[0]={x:+P[k],y:+P[k+1]}),D.push(["C",(-A[0].x+6*A[1].x+A[2].x)/6,(-A[0].y+6*A[1].y+A[2].y)/6,(A[1].x+6*A[2].x-A[3].x)/6,(A[1].y+6*A[2].y-A[3].y)/6,A[2].x,A[2].y])}return D}function x(P,L,D,k){return[P,L,D,k,D,k]}function j(P,L,D,k,I,A){return[1/3*P+2/3*D,1/3*L+2/3*k,1/3*I+2/3*D,1/3*A+2/3*k,I,A]}function M(P,L,D,k,I,A,F,N,U){for(var W=(U=1<(U=U??1)?1:U<0?0:U)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],z=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],$=0;$<12;$++){var E=W*G[$]+W,ie=S(E,P,D,I,F),E=S(E,L,k,A,N);z+=Y[$]*Math.sqrt(ie*ie+E*E)}return W*z}function S(P,L,D,k,I){return P*(P*(-3*L+9*D-9*k+3*I)+6*L-12*D+6*k)-3*L+3*D}d.default.Font=function(){function P(k){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");this.parent=k,this.cache={},this.font=void 0}var L,D;return L=P,(D=[{key:"textBounds",value:function(k){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,W=3<arguments.length?arguments[3]:void 0,F=4<arguments.length?arguments[4]:void 0,N=F&&F.renderer&&F.renderer._pInst||this.parent,U=N._renderer.drawingContext,W=(U.textAlign||a.LEFT,U.textBaseline||a.BASELINE,W||N._renderer._textSize);if(!te){for(var G=[],z=[],Y=[],$=(Y[0]=[],[]),ie=this._scale(W),E=N._renderer.textLeading(),R=0,B=(this.font.forEachGlyph(k,I,A,W,F,function(oe,he,de,J){var ue=oe.getMetrics();oe.index===0?Y[R+=1]=[]:(Y[R].push(he+ue.xMin*ie),Y[R].push(he+ue.xMax*ie),$.push(de+R*E+-ue.yMin*ie),$.push(de+R*E+-ue.yMax*ie))}),0<Y[R].length&&(G[R]=Math.min.apply(null,Y[R]),z[R]=Math.max.apply(null,Y[R])),0),H=0;H<=R;H++){G[H]=Math.min.apply(null,Y[H]),z[H]=Math.max.apply(null,Y[H]);var Z=z[H]-G[H];B<Z&&(B=Z)}var U=Math.min.apply(null,G),te={x:U,y:A=Math.min.apply(null,$),h:Math.max.apply(null,$)-A,w:B,advance:U-I},W=this._handleAlignment(N._renderer,k,te.x,te.y,te.w+te.advance);te.x=W.x,te.y=W.y}return te}},{key:"textToPoints",value:function(k,I,A,F,N){var U=I,W=[],G=k.split(/\r?\n|\r|\n/g);F=F||this.parent._renderer._textSize;for(var z,Y,$,ie=0;ie<G.length;ie++){var E=0;I=U;for(var R=(R=G[ie]).replace("	","  "),B=this._getGlyphs(R),H=0;H<B.length;H++){if(Y=R,!(($=B)[z=H].name&&$[z].name==="space"||Y.length===$.length&&Y[z]===" "))for(var Z=function(oe){for(var he,de=[],J=0;J<oe.length;J++)oe[J].type==="M"&&(he&&de.push(he),he=[]),he.push(function(ue){var ye=[ue.type];return ue.type==="M"||ue.type==="L"?ye.push(ue.x,ue.y):ue.type==="C"?ye.push(ue.x1,ue.y1,ue.x2,ue.y2,ue.x,ue.y):ue.type==="Q"&&ye.push(ue.x1,ue.y1,ue.x,ue.y),ye}(oe[J]));return de.push(he),de}(B[H].getPath(I,A,F).commands),te=0;te<Z.length;te++)for(var se=function(oe,he){for(var he=function(ge,_e){if(b(ge)!=="object")ge=_e;else for(var Ee in _e)ge[Ee]===void 0&&(ge[Ee]=_e[Ee]);return ge}(he,{sampleFactor:.1,simplifyThreshold:0}),de=g(oe,0,1),J=de/(de*he.sampleFactor),ue=[],ye=0;ye<de;ye+=J)ue.push(g(oe,ye));return he.simplifyThreshold&&function(Ce){for(var ge=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,_e=0,Ee=Ce.length-1;3<Ce.length&&0<=Ee;--Ee)p(u(Ce,Ee-1),u(Ce,Ee),u(Ce,Ee+1),ge)&&(Ce.splice(Ee%Ce.length,1),_e++)}(ue,he.simplifyThreshold),ue}(Z[te],N),pe=0;pe<se.length;pe++)se[pe].x+=E,W.push(se[pe]);E+=B[H].advanceWidth*this._scale(F)}A+=this.parent._renderer._textLeading}return W}},{key:"_getGlyphs",value:function(k){return this.font.stringToGlyphs(k)}},{key:"_getPath",value:function(k,U,A,F){var N=(F&&F.renderer&&F.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(N,k,U,A);return this.font.getPath(k,U.x,U.y,N._textSize,F)}},{key:"_getPathData",value:function(k,I,A,F){var N=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,I,A,F):b(I)==="object"&&(F=I),F&&typeof F.decimals=="number"&&(N=F.decimals),k.toPathData(N)}},{key:"_getSVG",value:function(k,I,A,F){var N=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,I,A,F):b(I)==="object"&&(F=I),F&&(typeof F.decimals=="number"&&(N=F.decimals),typeof F.strokeWidth=="number"&&(k.strokeWidth=F.strokeWidth),F.fill!==void 0&&(k.fill=F.fill),F.stroke!==void 0&&(k.stroke=F.stroke)),k.toSVG(N)}},{key:"_renderPath",value:function(W,z,Y,F){var N=F&&F.renderer||this.parent._renderer,U=N.drawingContext,W=(b(W)==="object"&&W.commands?W:this._getPath(W,z,Y,F)).commands,G=(U.beginPath(),!0),z=!1,Y=void 0;try{for(var $,ie=W[Symbol.iterator]();!(G=($=ie.next()).done);G=!0){var E=$.value;E.type==="M"?U.moveTo(E.x,E.y):E.type==="L"?U.lineTo(E.x,E.y):E.type==="C"?U.bezierCurveTo(E.x1,E.y1,E.x2,E.y2,E.x,E.y):E.type==="Q"?U.quadraticCurveTo(E.x1,E.y1,E.x,E.y):E.type==="Z"&&U.closePath()}}catch(R){z=!0,Y=R}finally{try{G||ie.return==null||ie.return()}finally{if(z)throw Y}}return N._doStroke&&N._strokeSet&&!N._clipping&&U.stroke(),N._doFill&&!N._clipping&&(N._fillSet||N._setFill(a._DEFAULT_TEXT_FILL),U.fill()),this}},{key:"_textWidth",value:function(k,I){return this.font.getAdvanceWidth(k,I)}},{key:"_textAscent",value:function(k){return this.font.ascender*this._scale(k)}},{key:"_textDescent",value:function(k){return-this.font.descender*this._scale(k)}},{key:"_scale",value:function(k){return 1/this.font.unitsPerEm*(k||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(k,I,A,F,N){var U=k._textSize;switch(N===void 0&&(N=this._textWidth(I,U)),k._textAlign){case a.CENTER:A-=N/2;break;case a.RIGHT:A-=N}switch(k._textBaseline){case a.TOP:F+=this._textAscent(U);break;case a.CENTER:F+=this._textAscent(U)/2;break;case a.BOTTOM:F-=this._textDescent(U)}return{x:A,y:F}}}])&&y(L.prototype,D),P}(),r=d.default,c.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(r,i,c){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(o,d){return o.push(d),o},r.default.prototype.arrayCopy=function(o,d,a,l,b){var y,u;o=b!==void 0?(u=Math.min(b,o.length),y=l,o.slice(d,u+d)):(u=a!==void 0?(u=a,Math.min(u,o.length)):o.length,a=d,o.slice(y=0,u)),Array.prototype.splice.apply(a,[y,u].concat(o))},r.default.prototype.concat=function(o,d){return o.concat(d)},r.default.prototype.reverse=function(o){return o.reverse()},r.default.prototype.shorten=function(o){return o.pop(),o},r.default.prototype.shuffle=function(o,d){for(var a,l,b=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),y=(o=d||b?o:o.slice()).length;1<y;)a=this.random(0,1)*y|0,l=o[--y],o[y]=o[a],o[a]=l;return o},r.default.prototype.sort=function(o,l){var a=l?o.slice(0,Math.min(l,o.length)):o,l=l?o.slice(Math.min(l,o.length)):[];return(a=typeof a[0]=="string"?a.sort():a.sort(function(b,y){return b-y})).concat(l)},r.default.prototype.splice=function(o,d,a){return Array.prototype.splice.apply(o,[a,0].concat(d)),o},r.default.prototype.subset=function(o,d,a){return a!==void 0?o.slice(d,d+a):o.slice(d,o.length)},r=r.default,c.default=r},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(r,i,c){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.float=function(d){return d instanceof Array?d.map(parseFloat):parseFloat(d)},o.default.prototype.int=function(d){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return d===1/0||d==="Infinity"?1/0:d===-1/0||d==="-Infinity"?-1/0:typeof d=="string"?parseInt(d,a):typeof d=="number"?0|d:typeof d=="boolean"?d?1:0:d instanceof Array?d.map(function(l){return o.default.prototype.int(l,a)}):void 0},o.default.prototype.str=function(d){return d instanceof Array?d.map(o.default.prototype.str):String(d)},o.default.prototype.boolean=function(d){return typeof d=="number"?d!==0:typeof d=="string"?d.toLowerCase()==="true":typeof d=="boolean"?d:d instanceof Array?d.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(d){return d=o.default.prototype.int(d,10),typeof d=="number"?(d+128)%256-128:d instanceof Array?d.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(d){return typeof d!="number"||isNaN(d)?d instanceof Array?d.map(o.default.prototype.char):typeof d=="string"?o.default.prototype.char(parseInt(d,10)):void 0:String.fromCharCode(d)},o.default.prototype.unchar=function(d){return typeof d=="string"&&d.length===1?d.charCodeAt(0):d instanceof Array?d.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(d,a){if(a=a??8,d instanceof Array)return d.map(function(b){return o.default.prototype.hex(b,a)});if(d===1/0||d===-1/0)return(d===1/0?"F":"0").repeat(a);if(typeof d=="number"){d<0&&(d=4294967295+d+1);for(var l=Number(d).toString(16).toUpperCase();l.length<a;)l="0".concat(l);return l=l.length>=a?l.substring(l.length-a,l.length):l}},o.default.prototype.unhex=function(d){return d instanceof Array?d.map(o.default.prototype.unhex):parseInt("0x".concat(d),16)},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(u=r("../core/main"))&&u.__esModule?u:{default:u};function d(p,h){return function(m){if(Array.isArray(m))return m}(p)||function(m,g){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]"){var f=[],v=!0,_=!1,x=void 0;try{for(var j,M=m[Symbol.iterator]();!(v=(j=M.next()).done)&&(f.push(j.value),!g||f.length!==g);v=!0);}catch(S){_=!0,x=S}finally{try{v||M.return==null||M.return()}finally{if(_)throw x}}return f}}(p,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(p,h,m){var f=d(p.toString().split("."),2),g=f[0],f=f[1];return m===void 0?(g=g.padStart(h,"0"),f?g+"."+f:g):(g=(p=d(p.toFixed(m).toString().split("."),2))[0],f=p[1],g=g.padStart(h,"0"),f===void 0?g:g+"."+f)}function l(f,h){var m=(f=f.toString()).indexOf("."),g=m!==-1?f.substring(m):"",f=(f=m!==-1?f.substring(0,m):f).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(h===0)g="";else if(h!==void 0)if(h>g.length)for(var v=h-(g+=m===-1?".":"").length+1,_=0;_<v;_++)g+="0";else g=g.substring(0,h+1);return f+g}function b(p){return 0<parseFloat(p)?"+".concat(p.toString()):p.toString()}function y(p){return 0<=parseFloat(p)?" ".concat(p.toString()):p.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.join=function(p,h){return o.default._validateParameters("join",arguments),p.join(h)},o.default.prototype.match=function(p,h){return o.default._validateParameters("match",arguments),p.match(h)},o.default.prototype.matchAll=function(p,h){o.default._validateParameters("matchAll",arguments);for(var m=new RegExp(h,"g"),g=m.exec(p),f=[];g!==null;)f.push(g),g=m.exec(p);return f},o.default.prototype.nf=function(p,h,m){return o.default._validateParameters("nf",arguments),p instanceof Array?p.map(function(g){return a(g,h,m)}):Object.prototype.toString.call(p)==="[object Arguments]"?p.length===3?this.nf(p[0],p[1],p[2]):p.length===2?this.nf(p[0],p[1]):this.nf(p[0]):a(p,h,m)},o.default.prototype.nfc=function(p,h){return o.default._validateParameters("nfc",arguments),p instanceof Array?p.map(function(m){return l(m,h)}):l(p,h)},o.default.prototype.nfp=function(){for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];o.default._validateParameters("nfp",h);var g=o.default.prototype.nf.apply(this,h);return g instanceof Array?g.map(b):b(g)},o.default.prototype.nfs=function(){for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];o.default._validateParameters("nfs",h);var g=o.default.prototype.nf.apply(this,h);return g instanceof Array?g.map(y):y(g)},o.default.prototype.split=function(p,h){return o.default._validateParameters("split",arguments),p.split(h)},o.default.prototype.splitTokens=function(p,h){var m,g;return o.default._validateParameters("splitTokens",arguments),g=h!==void 0?(g=/\]/g.exec(h=h),(m=/\[/g.exec(h))&&g?(h=h.slice(0,g.index)+h.slice(g.index+1),m=/\[/g.exec(h),h=h.slice(0,m.index)+h.slice(m.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):g?(h=h.slice(0,g.index)+h.slice(g.index+1),new RegExp("[".concat(h,"\\]]"),"g")):m?(h=h.slice(0,m.index)+h.slice(m.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,p.split(g).filter(function(f){return f})},o.default.prototype.trim=function(p){return o.default._validateParameters("trim",arguments),p instanceof Array?p.map(this.trim):p.trim()};var u=o.default;c.default=u},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(r,i,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,c.default=r},{"../core/main":280}],323:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function d(p){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(u=r("../core/main"))&&u.__esModule?u:{default:u},l=(r("./p5.Geometry"),function(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var h=b();if(h&&h.has(p))return h.get(p);var m,g={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var v;Object.prototype.hasOwnProperty.call(p,m)&&((v=f?Object.getOwnPropertyDescriptor(p,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(r("../core/constants")));function b(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,b=function(){return p},p)}a.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},a.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},a.default.prototype.buildGeometry=function(p){return this._renderer.buildGeometry(p)},a.default.prototype.freeGeometry=function(p){this._renderer._freeBuffers(p.gid)},a.default.prototype.plane=function(){var p,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=(this._assert3d("plane"),a.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(f));return this._renderer.geometryInHash(v)||((p=new a.default.Geometry(g,f,function(){for(var _,x,j=0;j<=this.detailY;j++)for(var M=j/this.detailY,S=0;S<=this.detailX;S++)_=S/this.detailX,x=new a.default.Vector(_-.5,M-.5,0),this.vertices.push(x),this.uvs.push(_,M)})).computeFaces().computeNormals(),g<=1&&f<=1?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(v,p)),this._renderer.drawBuffersScaled(v,h,m,1),this},a.default.prototype.box=function(p,h,m,g,f){this._assert3d("box"),a.default._validateParameters("box",arguments),p===void 0&&(p=50),h===void 0&&(h=p),m===void 0&&(m=h);var v,_=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,_=(f===void 0&&(f=_?1:4),"box|".concat(g=g===void 0?_?1:4:g,"|").concat(f));return this._renderer.geometryInHash(_)||((v=new a.default.Geometry(g,f,function(){var x=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(j,M){for(var M=4*M,S=0;S<4;S++){var P=j[S],P=new a.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2);x.vertices.push(P),x.uvs.push(1&S,(2&S)/2)}x.faces.push([M,1+M,2+M]),x.faces.push([2+M,1+M,3+M])})})).computeNormals(),g<=4&&f<=4?v._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(_,v)),this._renderer.drawBuffersScaled(_,p,h,m),this},a.default.prototype.sphere=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),this.ellipsoid(p,p,p,h,m),this};function y(p,h,m,g,f,v,_){p=p<=0?1:p,h=h<0?0:h,m=m<=0?p:m,g=g<3?3:g;for(var x,j,M=(v=v===void 0||v)?-2:0,S=(f=f<1?1:f)+((_=_===void 0?h!==0:_)?2:0),P=Math.atan2(p-h,m),L=Math.sin(P),D=Math.cos(P),k=M;k<=S;++k){var I=k/f,A=m*I,F=void 0,F=k<0?(I=A=0,p):f<k?(A=m,I=1,h):p+(h-p)*I;for(k!==-2&&k!==f+2||(F=0),A-=m/2,x=0;x<g;++x){var N=x/(g-1),W=2*Math.PI*N,U=Math.sin(W),W=Math.cos(W),G=(this.vertices.push(new a.default.Vector(U*F,A,W*F)),void 0),G=k<0?new a.default.Vector(0,-1,0):f<k&&h?new a.default.Vector(0,1,0):new a.default.Vector(U*D,L,W*D);this.vertexNormals.push(G),this.uvs.push(N,I)}}var z=0;if(v){for(j=0;j<g;++j)this.faces.push([z+j,z+g+(j+1)%g,z+g+j]);z+=2*g}for(k=0;k<f;++k){for(x=0;x<g;++x){var Y=(x+1)%g;this.faces.push([z+x,z+Y,z+g+Y]),this.faces.push([z+x,z+g+Y,z+g+x])}z+=g}if(_)for(z+=g,x=0;x<g;++x)this.faces.push([z+x,z+(x+1)%g,z+g])}a.default.prototype.cylinder=function(){var p,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],_=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],x=(this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(f,"|").concat(v,"|").concat(_));return this._renderer.geometryInHash(x)||(p=new a.default.Geometry(g,f),y.call(p,1,1,1,g,f,v,_),g<=24&&f<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,p)),this._renderer.drawBuffersScaled(x,h,m,h),this},a.default.prototype.cone=function(){var p,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],_=(this._assert3d("cone"),a.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(f,"|").concat(v));return this._renderer.geometryInHash(_)||(p=new a.default.Geometry(g,f),y.call(p,1,0,1,g,f,v,!1),g<=24&&f<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,p)),this._renderer.drawBuffersScaled(_,h,m,h),this},a.default.prototype.ellipsoid=function(){var p,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:h,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,v=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,_=(this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(f,"|").concat(v));return this._renderer.geometryInHash(_)||((p=new a.default.Geometry(f,v,function(){for(var x=0;x<=this.detailY;x++)for(var j=x/this.detailY,M=Math.PI*j-Math.PI/2,S=Math.cos(M),P=Math.sin(M),L=0;L<=this.detailX;L++){var D=L/this.detailX,I=2*Math.PI*D,k=Math.cos(I),I=Math.sin(I),I=new a.default.Vector(S*I,P,S*k);this.vertices.push(I),this.vertexNormals.push(I),this.uvs.push(D,j)}})).computeFaces(),f<=24&&v<=24?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(_,p)),this._renderer.drawBuffersScaled(_,h,m,g),this},a.default.prototype.torus=function(p,_,m,g){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),p===void 0)p=50;else if(!p)return;if(_===void 0)_=10;else if(!_)return;m===void 0&&(m=24),g===void 0&&(g=16);var f,v=(_/p).toPrecision(4),_="torus|".concat(v,"|").concat(m,"|").concat(g);return this._renderer.geometryInHash(_)||((f=new a.default.Geometry(m,g,function(){for(var x=0;x<=this.detailY;x++)for(var j=x/this.detailY,M=2*Math.PI*j,S=Math.cos(M),P=Math.sin(M),L=1+v*S,D=0;D<=this.detailX;D++){var k=D/this.detailX,I=2*Math.PI*k,F=Math.cos(I),I=Math.sin(I),A=new a.default.Vector(L*F,L*I,v*P),F=new a.default.Vector(S*F,S*I,P);this.vertices.push(A),this.vertexNormals.push(F),this.uvs.push(k,j)}})).computeFaces(),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,f)),this._renderer.drawBuffersScaled(_,p,p,p),this},a.default.RendererGL.prototype.point=function(p,h){var m=[];return m.push(new a.default.Vector(p,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(m,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(_){var h=_[0],m=_[1],g=_[2],f=_[3],v=_[4],_=_[5],x=(this.geometryInHash("tri")||((x=new a.default.Geometry(1,1,function(){var S=[];S.push(new a.default.Vector(0,0,0)),S.push(new a.default.Vector(1,0,0)),S.push(new a.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=S,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)),this.uMVMatrix.copy());try{var j=Math.sign(h*f-g*m+g*_-v*f+v*m-h*_),M=new a.default.Matrix([g-h,f-m,0,0,v-h,_-m,0,0,0,0,j,0,h,m,0,1]).mult(this.uMVMatrix);this.uMVMatrix=M,this.drawBuffers("tri")}finally{this.uMVMatrix=x}return this},a.default.RendererGL.prototype.ellipse=function(p){this.arc(p[0],p[1],p[2],p[3],0,l.TWO_PI,l.OPEN,p[4])},a.default.RendererGL.prototype.arc=function(){var p,h=arguments.length<=0?void 0:arguments[0],m=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],f=arguments.length<=3?void 0:arguments[3],v=arguments.length<=4?void 0:arguments[4],_=arguments.length<=5?void 0:arguments[5],x=arguments.length<=6?void 0:arguments[6],j=(arguments.length<=7?void 0:arguments[7])||25,M=(Math.abs(_-v)>=l.TWO_PI?"".concat(S="ellipse","|"):"".concat(S="arc","|").concat(v,"|").concat(_,"|").concat(x,"|")).concat(j,"|"),S=(this.geometryInHash(M)||((p=new a.default.Geometry(j,1,function(){if(v.toFixed(10)!==_.toFixed(10)){x!==l.PIE&&x!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var P=0;P<=j;P++){var D=(_-v)*(P/j)+v,L=.5+Math.cos(D)/2,D=.5+Math.sin(D)/2;this.vertices.push(new a.default.Vector(L,D,0)),this.uvs.push([L,D]),P<j-1&&(this.faces.push([0,P+1,P+2]),this.edges.push([P+1,P+2]))}switch(x){case l.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case l.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case l.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),j<=50?p._edgesToVertices(p):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(S," with more than 50 detail")),this.createBuffers(M,p)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([h,m,0]),this.uMVMatrix.scale(g,f,1),this.drawBuffers(M)}finally{this.uMVMatrix=S}return this},a.default.RendererGL.prototype.rect=function(p){var h=p[0],m=p[1],g=p[2],f=p[3];if(p[4]===void 0){var x=this._pInst._glAttributes.perPixelLighting,v=p[4]||(x?1:24),_=p[5]||(x?1:16),x="rect|".concat(v,"|").concat(_),j=(this.geometryInHash(x)||((j=new a.default.Geometry(v,_,function(){for(var G=0;G<=this.detailY;G++)for(var z=G/this.detailY,Y=0;Y<=this.detailX;Y++){var $=Y/this.detailX,ie=new a.default.Vector($,z,0);this.vertices.push(ie),this.uvs.push($,z)}0<v&&0<_&&(this.edges=[[0,v],[v,(v+1)*(_+1)-1],[(v+1)*(_+1)-1,(v+1)*_],[(v+1)*_,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(x,j)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([h,m,0]),this.uMVMatrix.scale(g,f,1),this.drawBuffers(x)}finally{this.uMVMatrix=j}}else{var x=p[4],j=p[5]===void 0?x:p[5],M=p[6]===void 0?j:p[6],p=p[7]===void 0?M:p[7],I=g,S=f,D=((I+=h)<h&&(D=h,h=I,I=D),(S+=m)<m&&(D=m,m=S,S=D),Math.min((I-h)/2,(S-m)/2)),P=(D<x&&(x=D),D<j&&(j=D),D<M&&(M=D),D<p&&(p=D),h),L=m,D=I,h=S,k=(this.beginShape(),j!==0?(this.vertex(D-j,L),this.quadraticVertex(D,L,D,L+j)):this.vertex(D,L),M!==0?(this.vertex(D,h-M),this.quadraticVertex(D,h,D-M,h)):this.vertex(D,h),p!==0?(this.vertex(P+p,h),this.quadraticVertex(P,h,P,h-p)):this.vertex(P,h),x!==0?(this.vertex(P,L+x),this.quadraticVertex(P,L,P+x,L)):this.vertex(P,L),!(this.immediateMode.geometry.uvs.length=0)),m=!1,I=void 0;try{for(var A,F=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(A=F.next()).done);k=!0){var N=A.value,U=(N.x-P)/g,W=(N.y-L)/f;this.immediateMode.geometry.uvs.push(U,W)}}catch(E){m=!0,I=E}finally{try{k||F.return==null||F.return()}finally{if(m)throw I}}this.endShape(l.CLOSE)}return this},a.default.RendererGL.prototype.quad=function(p,h,m,g,f,v,_,x,j,M,S,P){var L=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,D=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(p,"|").concat(h,"|").concat(m,"|").concat(g,"|").concat(f,"|").concat(v,"|").concat(_,"|").concat(x,"|").concat(j,"|").concat(M,"|").concat(S,"|").concat(P,"|").concat(L,"|").concat(D);if(!this.geometryInHash(k)){var I=new a.default.Geometry(L,D,function(){for(var Y=1/(this.detailX-1),$=1/(this.detailY-1),ie=0;ie<this.detailY;ie++)for(var E=0;E<this.detailX;E++){var R=E*Y,B=ie*$;this.vertices.push(new a.default.Vector((1-R)*((1-B)*p+B*M)+R*((1-B)*g+B*_),(1-R)*((1-B)*h+B*S)+R*((1-B)*f+B*x),(1-R)*((1-B)*m+B*P)+R*((1-B)*v+B*j))),this.uvs.push([R,B])}});I.faces=[];for(var A=0;A<D-1;A++)for(var F=0;F<L-1;F++){var N=F+A*L,U=F+1+(A+1)*L,W=F+(A+1)*L;I.faces.push([N,F+1+A*L,U]),I.faces.push([N,U,W])}I.computeNormals();for(var G=[I.edges.length=0,2,3,1],z=0;z<G.length;z++)I.edges.push([G[z],G[(z+1)%G.length]]);I._edgesToVertices(),this.createBuffers(k,I)}return this.drawBuffers(k),this},a.default.RendererGL.prototype.bezier=function(p,h,m,g,f,v,_,x,j,M,S,P){arguments.length===8&&(S=x,M=_,x=v,_=f,f=g,g=m,m=v=j=P=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var D=0;D<=L;D++){var k=Math.pow(1-D/L,3),I=D/L*3*Math.pow(1-D/L,2),A=3*Math.pow(D/L,2)*(1-D/L),F=Math.pow(D/L,3);this.vertex(p*k+g*I+_*A+M*F,h*k+f*I+x*A+S*F,m*k+v*I+j*A+P*F)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(p,h,m,g,f,v,_,x,j,M,S,P){arguments.length===8&&(M=_,S=x,_=f,x=g,f=g=m,m=v=j=P=0);var L=this._pInst._curveDetail;this.beginShape();for(var D=0;D<=L;D++){var k=.5*Math.pow(D/L,3),I=.5*Math.pow(D/L,2),A=D/L*.5;this.vertex(k*(3*g-p-3*_+M)+I*(2*p-5*g+4*_-M)+A*(-p+_)+2*g*.5,k*(3*f-h-3*x+S)+I*(2*h-5*f+4*x-S)+A*(-h+x)+2*f*.5,k*(3*v-m-3*j+P)+I*(2*m-5*v+4*j-P)+A*(-m+j)+2*v*.5)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var p,h,m,g,f,v,_=[],x=[],j=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(v);break}S+=M,P-=M,++L}}for(var D=this._lookUpTableBezier.length,k=[],I=0;I<4;I++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var A=[];for(I=0;I<4;I++)A.push([]);if(A[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),A[3]=this.curStrokeColor.slice(),j===6){this.isBezier=!0;var _=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(_[0]-_[1],x[0]-x[1]),U=Math.hypot(_[1]-_[2],x[1]-x[2]),N=Math.hypot(_[2]-_[3],x[2]-x[3]),U=F+U+N;for(F/=U,N/=U,f=0;f<4;f++)k[1].push(k[0][f]*(1-F)+k[3][f]*F),k[2].push(k[0][f]*N+k[3][f]*(1-N)),A[1].push(A[0][f]*(1-F)+A[3][f]*F),A[2].push(A[0][f]*N+A[3][f]*(1-N));for(g=0;g<D;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=p=h=0;I<4;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableBezier[g][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableBezier[g][I]*A[I][f];p+=_[I]*this._lookUpTableBezier[g][I],h+=x[I]*this._lookUpTableBezier[g][I]}this.vertex(p,h)}this.curFillColor=k[3],this.curStrokeColor=A[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(j===9){this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var W=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(_[0]-_[1],x[0]-x[1],W[0]-W[1]),U=Math.hypot(_[1]-_[2],x[1]-x[2],W[1]-W[2]),z=Math.hypot(_[2]-_[3],x[2]-x[3],W[2]-W[3]),j=G+U+z;for(G/=j,z/=j,f=0;f<4;f++)k[1].push(k[0][f]*(1-G)+k[3][f]*G),k[2].push(k[0][f]*z+k[3][f]*(1-z)),A[1].push(A[0][f]*(1-G)+A[3][f]*G),A[2].push(A[0][f]*z+A[3][f]*(1-z));for(g=0;g<D;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=p=h=m=0;I<4;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableBezier[g][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableBezier[g][I]*A[I][f];p+=_[I]*this._lookUpTableBezier[g][I],h+=x[I]*this._lookUpTableBezier[g][I],m+=W[I]*this._lookUpTableBezier[g][I]}this.vertex(p,h,m)}this.curFillColor=k[3],this.curStrokeColor=A[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var p,h,m,g,f,v,_=[],x=[],j=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var M=1/this._lutQuadraticDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(v);break}S+=M,P-=M,++L}}for(var D=this._lookUpTableQuadratic.length,k=[],I=0;I<3;I++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var A=[];for(I=0;I<3;I++)A.push([]);if(A[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),A[2]=this.curStrokeColor.slice(),j===4){this.isQuadratic=!0;var _=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],F=Math.hypot(_[0]-_[1],x[0]-x[1]);for(F/=F+Math.hypot(_[1]-_[2],x[1]-x[2]),f=0;f<4;f++)k[1].push(k[0][f]*(1-F)+k[2][f]*F),A[1].push(A[0][f]*(1-F)+A[2][f]*F);for(g=0;g<D;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=p=h=0;I<3;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableQuadratic[g][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableQuadratic[g][I]*A[I][f];p+=_[I]*this._lookUpTableQuadratic[g][I],h+=x[I]*this._lookUpTableQuadratic[g][I]}this.vertex(p,h)}this.curFillColor=k[2],this.curStrokeColor=A[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(j===6){this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var N=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],U=Math.hypot(_[0]-_[1],x[0]-x[1],N[0]-N[1]);for(U/=U+Math.hypot(_[1]-_[2],x[1]-x[2],N[1]-N[2]),f=0;f<4;f++)k[1].push(k[0][f]*(1-U)+k[2][f]*U),A[1].push(A[0][f]*(1-U)+A[2][f]*U);for(g=0;g<D;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=p=h=m=0;I<3;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableQuadratic[g][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableQuadratic[g][I]*A[I][f];p+=_[I]*this._lookUpTableQuadratic[g][I],h+=x[I]*this._lookUpTableQuadratic[g][I],m+=N[I]*this._lookUpTableQuadratic[g][I]}this.vertex(p,h,m)}this.curFillColor=k[2],this.curStrokeColor=A[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var p,h,m,g,f,v,_=[],x=[],j=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(v);break}S+=M,P-=M,++L}}var D=this._lookUpTableBezier.length;if(j===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),f=0;f<D;f++)h=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],m=x[0]*this._lookUpTableBezier[f][0]+x[1]*this._lookUpTableBezier[f][1]+x[2]*this._lookUpTableBezier[f][2]+x[3]*this._lookUpTableBezier[f][3],this.vertex(h,m);for(f=0;f<j;f++)this.immediateMode._curveVertex.shift()}}else if(j===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),p=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),f=0;f<D;f++)h=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],m=x[0]*this._lookUpTableBezier[f][0]+x[1]*this._lookUpTableBezier[f][1]+x[2]*this._lookUpTableBezier[f][2]+x[3]*this._lookUpTableBezier[f][3],g=p[0]*this._lookUpTableBezier[f][0]+p[1]*this._lookUpTableBezier[f][1]+p[2]*this._lookUpTableBezier[f][2]+p[3]*this._lookUpTableBezier[f][3],this.vertex(h,m,g);for(f=0;f<j;f++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(p,P,m,L,f,v,_,x,j){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(p),this._pInst.textureMode(l.NORMAL);var M=0,S=(P<=p.width&&(M=P/p.width),1),P=(P+L<=p.width&&(S=(P+L)/p.width),0),L=(m<=p.height&&(P=m/p.height),1);m+f<=p.height&&(L=(m+f)/p.height),this.beginShape(),this.vertex(v,_,0,M,P),this.vertex(v+x,_,0,S,P),this.vertex(v+x,_+j,0,S,L),this.vertex(v,_+j,0,M,L),this.endShape(l.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(l.REMOVE)};var u=a.default;c.default=u},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function d(h){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=function(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=b();if(m&&m.has(h))return m.get(h);var g,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var _;Object.prototype.hasOwnProperty.call(h,g)&&((_=v?Object.getOwnPropertyDescriptor(h,g):null)&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=h[g])}return f.default=h,m&&m.set(h,f),f}(r("../core/constants"));function b(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,b=function(){return h},h)}function y(h){return function(m){if(Array.isArray(m)){for(var g=0,f=new Array(m.length);g<m.length;g++)f[g]=m[g];return f}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(h,m){for(var g=0;g<m.length;g++){var f=m[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}var p=function(){function h(f){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=f)._pInst.push(),this.identityMatrix=new a.default.Matrix,f.uMVMatrix=new a.default.Matrix,this.geometry=new a.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var m,g;return m=h,(g=[{key:"transformVertices",value:function(f){var v=this;return this.hasTransform?f.map(function(_){return v.renderer.uMVMatrix.multiplyPoint(_)}):f}},{key:"transformNormals",value:function(f){var v=this;return this.hasTransform?f.map(function(_){return v.renderer.uNMatrix.multiplyVec3(_)}):f}},{key:"addGeometry",value:function(f){for(var v,_=this,x=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(M,S){return M===_.identityMatrix.mat4[S]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),j=((v=this.geometry.vertices).push.apply(v,y(this.transformVertices(f.vertices))),(v=this.geometry.vertexNormals).push.apply(v,y(this.transformNormals(f.vertexNormals))),(v=this.geometry.uvs).push.apply(v,y(f.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,y(f.faces.map(function(M){return M.map(function(S){return S+x})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,y(f.edges.map(function(M){return M.map(function(S){return S+x})}))),y(f.vertexColors));j.length<4*f.vertices.length;)j.push.apply(j,y(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,y(j))}},{key:"addImmediate",value:function(){var f=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,_=[];if(this.renderer._doFill)if(v===l.TRIANGLE_STRIP||v===l.QUAD_STRIP)for(var x=2;x<f.vertices.length;x++)x%2==0?_.push([x,x-1,x-2]):_.push([x,x-2,x-1]);else if(v===l.TRIANGLE_FAN)for(var j=2;j<f.vertices.length;j++)_.push([0,j-1,j]);else for(var M=0;M<f.vertices.length;M+=3)_.push([M,M+1,M+2]);this.addGeometry(Object.assign({},f,{faces:_}))}},{key:"addRetained",value:function(f){this.addGeometry(f.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&u(m.prototype,g),h}();p.nextGeometryId=0,c.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=(y=r("../core/main"))&&y.__esModule?y:{default:y},a=function(u){if(u&&u.__esModule)return u;if(u===null||b(u)!=="object"&&typeof u!="function")return{default:u};var p=l();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants"));function l(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,l=function(){return u},u)}function b(u){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}d.default.prototype.orbitControl=function(u,p,h,j){var g=this,f=(this._assert3d("orbitControl"),d.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);u===void 0&&(u=1),p===void 0&&(p=u),h===void 0&&(h=1),b(j)!=="object"&&(j={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var S=j.disableTouchActions;this.touchActionsDisabled===!0||S!==void 0&&!S||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var v,_,x,S=j.freeRotation,j=S!==void 0&&S,M=[],S=(this.touches.forEach(function(F){g._renderer.prevTouches.forEach(function(N){F.id===N.id&&(N={x:F.x,y:F.y,px:N.x,py:N.y},M.push(N))})}),this._renderer.prevTouches=this.touches,0),P=0,L=0,D=0,k=0,I=this.height<this.width?this.height:this.width,A=!1;return 0<M.length?(A=0<M[0].x&&M[0].x<this.width&&0<M[0].y&&M[0].y<this.height,M.length===1?(P=-u*((v=M[0]).x-v.px)/I,L=p*(v.y-v.py)/I):(v=M[0],_=M[1],S=-(Math.hypot(v.x-_.x,v.y-_.y)-Math.hypot(v.px-_.px,v.py-_.py))*h*4e-4,D=.5*(v.x+_.x)-.5*(v.px+_.px),k=.5*(v.y+_.y)-.5*(v.py+_.py)),0<this.touches.length?A&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(A=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(S=Math.sign(this._mouseWheelDeltaY)*h,S*=.01,this._mouseWheelDeltaY=0,A&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(P=-u*this.movedX/I,L=p*this.movedY/I):this.mouseButton===this.RIGHT&&(D=this.movedX,k=this.movedY*f.yScale),A&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),S!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=S),.001<Math.abs(this._renderer.zoomVelocity)?(j?f._orbitFree(0,0,this._renderer.zoomVelocity):f._orbit(0,0,this._renderer.zoomVelocity),f.projMatrix.mat4[15]!==0&&(f.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),f.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=f.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=f.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,P===0&&L===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*P,.6*L),1e-6<this._renderer.rotateVelocity.magSq()?(j?f._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):f._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),D===0&&k===0||!this._renderer.executeRotateAndMove||(v=2*D/this.width,_=2*-k/this.height,this._renderer.moveVelocity.add(.15*v,.15*_)),1e-6<this._renderer.moveVelocity.magSq()?(h=f._getLocalAxes(),u=f.eyeX-f.centerX,p=f.eyeY-f.centerY,I=f.eyeZ-f.centerZ,A=Math.sqrt(u*u+p*p+I*I),S=new d.default.Vector(f.centerX,f.centerY,f.centerZ),S=f.cameraMatrix.multiplyPoint(S),(S=this._renderer.uPMatrix.multiplyAndNormalizePoint(S)).x-=this._renderer.moveVelocity.x,S.y-=this._renderer.moveVelocity.y,L=(P=this._renderer.uPMatrix.mat4)[15]===0?(x=(P[8]+S.x)/P[0]*A,(P[9]+S.y)/P[5]*A):(x=(S.x-P[12])/P[0],(S.y-P[13])/P[5]),f.setPosition(f.eyeX+x*h.x[0]+L*h.y[0],f.eyeY+x*h.x[1]+L*h.y[1],f.eyeZ+x*h.x[2]+L*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},d.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];d.default._validateParameters("debugMode",p);for(var m=this._registeredMethods.post.length-1;0<=m;m--)this._registeredMethods.post[m].toString()!==this._grid().toString()&&this._registeredMethods.post[m].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(m,1);p[0]===a.GRID?this.registerMethod("post",this._grid(p[1],p[2],p[3],p[4],p[5])):p[0]===a.AXES?this.registerMethod("post",this._axesIcon(p[1],p[2],p[3],p[4])):(this.registerMethod("post",this._grid(p[0],p[1],p[2],p[3],p[4])),this.registerMethod("post",this._axesIcon(p[5],p[6],p[7],p[8])))},d.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},d.default.prototype._grid=function(u,p,h,m,g){u===void 0&&(u=this.width/2),p===void 0&&(p=Math.round(u/30)<4?4:Math.round(u/30)),h===void 0&&(h=0),m===void 0&&(m=0),g===void 0&&(g=0);var f=u/p,v=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var _=0;_<=p;_++)this.beginShape(this.LINES),this.vertex(-v+h,m,_*f-v+g),this.vertex(v+h,m,_*f-v+g),this.endShape();for(var x=0;x<=p;x++)this.beginShape(this.LINES),this.vertex(x*f-v+h,m,-v+g),this.vertex(x*f-v+h,m,v+g),this.endShape();this.pop()}},d.default.prototype._axesIcon=function(u,p,h,m){return u===void 0&&(u=40<this.width/20?this.width/20:40),p===void 0&&(p=-this.width/4),h===void 0&&(h=p),m===void 0&&(m=p),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(p,h,m),this.vertex(p+u,h,m),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(p,h,m),this.vertex(p,h+u,m),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(p,h,m),this.vertex(p,h,m+u),this.endShape(),this.pop()}};var y=d.default;c.default=y},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(r,i,c){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.ambientLight=function(d,a,l,b){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var y=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(y._array[0],y._array[1],y._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(d,a,l){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var b=this.color.apply(this,arguments);return this._renderer.specularColors=[b._array[0],b._array[1],b._array[2]],this},o.default.prototype.directionalLight=function(d,g,m,b,y,u){this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),d=d instanceof o.default.Color?d:this.color(d,g,m);var p,h,g=arguments[arguments.length-1],m=typeof g=="number"?(p=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(p=g.x,h=g.y,g.z),g=Math.sqrt(p*p+h*h+m*m);return this._renderer.directionalLightDirections.push(p/g,h/g,m/g),this._renderer.directionalLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(d,m,g,b,y,u){this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),d=d instanceof o.default.Color?d:this.color(d,m,g);var p,h,m=arguments[arguments.length-1],g=typeof m=="number"?(p=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(p=m.x,h=m.y,m.z);return this._renderer.pointLightPositions.push(p,h,g),this._renderer.pointLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.imageLight=function(d){this._renderer.activeImageLight=d,this._renderer._enableLighting=!0},o.default.prototype.panorama=function(d){this.filter(this._renderer._getSphereMapping(d))},o.default.prototype.lights=function(){this._assert3d("lights");var d=this.color("rgb(128,128,128)");return this.ambientLight(d),this.directionalLight(d,0,0,-1),this},o.default.prototype.lightFalloff=function(d,a,l){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),d<0&&(d=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),d===0&&a===0&&l===0&&(d=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=d,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=l,this},o.default.prototype.spotLight=function(d,a,l,b,y,u,p,h,m,g,f){this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var v,_,x,j=arguments.length;switch(j){case 11:case 10:v=this.color(d,a,l),_=new o.default.Vector(b,y,u),x=new o.default.Vector(p,h,m);break;case 9:d instanceof o.default.Color?(v=d,_=new o.default.Vector(a,l,b),x=new o.default.Vector(y,u,p),g=h,f=m):b instanceof o.default.Vector?(v=this.color(d,a,l),_=b,x=new o.default.Vector(y,u,p),g=h,f=m):p instanceof o.default.Vector?(v=this.color(d,a,l),_=new o.default.Vector(b,y,u),x=p,g=h,f=m):(v=this.color(d,a,l),_=new o.default.Vector(b,y,u),x=new o.default.Vector(p,h,m));break;case 8:g=(x=d instanceof o.default.Color?(v=d,_=new o.default.Vector(a,l,b),new o.default.Vector(y,u,p)):b instanceof o.default.Vector?(v=this.color(d,a,l),_=b,new o.default.Vector(y,u,p)):(v=this.color(d,a,l),_=new o.default.Vector(b,y,u),p),h);break;case 7:d instanceof o.default.Color&&a instanceof o.default.Vector?(v=d,_=a,x=new o.default.Vector(l,b,y),g=u,f=p):d instanceof o.default.Color&&y instanceof o.default.Vector?(v=d,_=new o.default.Vector(a,l,b),x=y,g=u,f=p):b instanceof o.default.Vector&&y instanceof o.default.Vector?(v=this.color(d,a,l),_=b,x=y,g=u,f=p):x=d instanceof o.default.Color?(v=d,_=new o.default.Vector(a,l,b),new o.default.Vector(y,u,p)):b instanceof o.default.Vector?(v=this.color(d,a,l),_=b,new o.default.Vector(y,u,p)):(v=this.color(d,a,l),_=new o.default.Vector(b,y,u),p);break;case 6:b instanceof o.default.Vector&&y instanceof o.default.Vector?(v=this.color(d,a,l),_=b,x=y,g=u):d instanceof o.default.Color&&y instanceof o.default.Vector?(v=d,_=new o.default.Vector(a,l,b),x=y,g=u):d instanceof o.default.Color&&a instanceof o.default.Vector&&(v=d,_=a,x=new o.default.Vector(l,b,y),g=u);break;case 5:d instanceof o.default.Color&&a instanceof o.default.Vector&&l instanceof o.default.Vector?(v=d,_=a,x=l,g=b,f=y):b instanceof o.default.Vector&&y instanceof o.default.Vector?(v=this.color(d,a,l),_=b,x=y):d instanceof o.default.Color&&y instanceof o.default.Vector?(v=d,_=new o.default.Vector(a,l,b),x=y):d instanceof o.default.Color&&a instanceof o.default.Vector&&(v=d,_=a,x=new o.default.Vector(l,b,y));break;case 4:v=d,_=a,x=l,g=b;break;case 3:v=d,_=a,x=l;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(j<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(_.x,_.y,_.z),x.normalize(),this._renderer.spotLightDirections.push(x.x,x.y,x.z),g===void 0&&(g=Math.PI/3),f!==void 0&&f<1?(f=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):f===void 0&&(f=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(f),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){this._assert3d("noLights");for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];return o.default._validateParameters("noLights",a),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},r=o.default,c.default=r},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(r,i,c){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r("regenerator-runtime/runtime");var d=(u=r("../core/main"))&&u.__esModule?u:{default:u};function a(p){return function(h){if(Array.isArray(h)){for(var m=0,g=new Array(h.length);m<h.length;m++)g[m]=h[m];return g}}(p)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(p,h,m,g,f,v,_){try{var x=p[v](_),j=x.value}catch(M){return void m(M)}x.done?h(j):Promise.resolve(j).then(g,f)}function b(p){return function(){var h=this,m=arguments;return new Promise(function(g,f){var v=p.apply(h,m);function _(j){l(v,g,f,_,x,"next",j)}function x(j){l(v,g,f,_,x,"throw",j)}_(void 0)})}}function y(p){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(p)}r("./p5.Geometry"),d.default.prototype.loadModel=function(p,h){d.default._validateParameters("loadModel",arguments);var m,g,f=!1,v=!1,_=!1,x=p.slice(-4),j=(h&&y(h)==="object"?(f=h.normalize||!1,m=h.successCallback,g=h.failureCallback,x=h.fileType||x,v=h.flipU||!1,_=h.flipV||!1):typeof h=="boolean"?(f=h,m=arguments[2],g=arguments[3],arguments[4]!==void 0&&(x=arguments[4])):(m=typeof h=="function"?h:void 0,g=arguments[2],arguments[3]!==void 0&&(x=arguments[3])),new d.default.Geometry),M=(j.gid="".concat(p,"|").concat(f),this);function S(){return(S=b(regeneratorRuntime.mark(function L(D){var k,I,A,F;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:for(k=[],I=0;I<D.length;I++)(A=D[I].match(/^mtllib (.+)/))&&function(){var U="",W=A[1],G=p.split("/");U=1<G.length?(G.pop(),G.join("/")+"/"+W):W,k.push(function(){return P.apply(this,arguments)}(U).then(function(z){return z?(Y=M,$=U,new Promise(function(ie,E){var R=null,B={};Y.loadStrings($,function(H){for(var Z=0;Z<H.length;++Z){var te,se=H[Z].trim().split(/\s+/);se[0]==="newmtl"?(te=se[1],B[R=te]={}):se[0]==="Kd"?B[R].diffuseColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="Ka"?B[R].ambientColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="Ks"?B[R].specularColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="map_Kd"&&(B[R].texturePath=se[1])}ie(B)},E)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(U)),{});var Y,$}).catch(function(z){return console.warn("Error loading MTL file: ".concat(U),z),{}}))}();return N.prev=2,N.next=5,Promise.all(k);case 5:return F=N.sent,F=Object.assign.apply(Object,[{}].concat(a(F))),N.abrupt("return",F);case 10:return N.prev=10,N.t0=N.catch(2),N.abrupt("return",{});case 13:case"end":return N.stop()}},L,null,[[2,10]])}))).apply(this,arguments)}function P(){return(P=b(regeneratorRuntime.mark(function L(D){var k;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,fetch(D,{method:"HEAD"});case 3:return k=I.sent,I.abrupt("return",k.ok);case 7:return I.prev=7,I.t0=I.catch(0),I.abrupt("return",!1);case 10:case"end":return I.stop()}},L,null,[[0,7]])}))).apply(this,arguments)}return x.match(/\.stl$/i)?this.httpDo(p,"GET","arrayBuffer",function(L){(function(D,k){if(function(I){for(var A=new DataView(I),F=[115,111,108,105,100],N=0;N<5;N++)if(function(U,W,G){for(var z=0,Y=U.length;z<Y;z++)if(U[z]!==W.getUint8(G+z,!1))return;return 1}(F,A,N))return;return 1}(k))(function(I,A){for(var F,N,U,W,G,z,Y,$=new DataView(A),ie=$.getUint32(80,!0),E=!1,R=0;R<70;R++)$.getUint32(R,!1)===1129270351&&$.getUint8(R+4)===82&&$.getUint8(R+5)===61&&(E=!0,W=[],G=$.getUint8(R+6)/255,z=$.getUint8(R+7)/255,Y=$.getUint8(R+8)/255);for(var B=0;B<ie;B++){for(var H,Z=84+50*B,te=$.getFloat32(Z,!0),se=$.getFloat32(4+Z,!0),pe=$.getFloat32(8+Z,!0),oe=(E&&(H=$.getUint16(48+Z,!0),U=32768&H?(F=G,N=z,Y):(F=(31&H)/31,N=(H>>5&31)/31,(H>>10&31)/31)),new d.default.Vector(te,se,pe)),he=1;he<=3;he++){var de=Z+12*he,de=new d.default.Vector($.getFloat32(de,!0),$.getFloat32(4+de,!0),$.getFloat32(8+de,!0));I.vertices.push(de),I.vertexNormals.push(oe),E&&W.push(F,N,U)}I.faces.push([3*B,3*B+1,3*B+2]),I.uvs.push([0,0],[0,0],[0,0])}})(D,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(I,A){for(var F,N,U="",W=[],G=0;G<A.length;++G){for(var z=A[G].trim(),Y=z.split(" "),$=0;$<Y.length;++$)Y[$]===""&&Y.splice($,1);if(Y.length!==0)switch(U){case"":if(Y[0]!=="solid")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));U="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));F=new d.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),I.vertexNormals.push(F,F,F),U="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));U="vertex";break;case"vertex":if(Y[0]==="vertex")N=new d.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),I.vertices.push(N),I.uvs.push([0,0]),W.push(I.vertices.indexOf(N));else{if(Y[0]!=="endloop")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));I.faces.push(W),W=[],U="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));U="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));F=new d.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),I.vertexNormals.push(F,F,F),U="facet normal"}break;default:console.error('Invalid state "'.concat(U,'"'))}}}(D,k)}})(j,L),f&&j.normalize(),v&&j.flipU(),_&&j.flipV(),M._decrementPreload(),typeof m=="function"&&m(j)},g):x.match(/\.obj$/i)?this.loadStrings(p,function(){var L=b(regeneratorRuntime.mark(function D(k){var I;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,function(){return S.apply(this,arguments)}(k);case 3:I=A.sent,function(F,N){for(var U=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},W={v:[],vt:[],vn:[]},G={},z=null,Y=new Set,$=!1,ie=!1,E=0;E<N.length;++E){var R=N[E].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="usemtl")z=R[1];else if(R[0]==="v"||R[0]==="vn"){var B=new d.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));W[R[0]].push(B)}else if(R[0]==="vt")B=[parseFloat(R[1]),1-parseFloat(R[2])],W[R[0]].push(B);else if(R[0]==="f")for(var H=3;H<R.length;++H){for(var Z=[],te=[1,H-1,H],se=0;se<te.length;++se){for(var pe,oe=R[te[se]],he=oe.split("/"),de=0;de<he.length;de++)he[de]=parseInt(he[de])-1;G[oe]||(G[oe]={}),G[oe][z]===void 0?(pe=F.vertices.length,F.vertices.push(W.v[he[0]].copy()),F.uvs.push(W.vt[he[1]]?W.vt[he[1]].slice():[0,0]),F.vertexNormals.push(W.vn[he[2]]?W.vn[he[2]].copy():new d.default.Vector),G[oe][z]=pe,Z.push(pe),z&&U[z]&&U[z].diffuseColor&&Y.add(W.v[he[0]])):Z.push(G[oe][z])}if(Z[0]!==Z[1]&&Z[0]!==Z[2]&&Z[1]!==Z[2])if(F.faces.push(Z),z&&U[z]&&U[z].diffuseColor){$=$=!0;for(var J=U[z].diffuseColor,ue=0;ue<Z.length;ue++)F.vertexColors.push(J[0]),F.vertexColors.push(J[1]),F.vertexColors.push(J[2])}else ie=!0}}}if(F.vertexNormals.length===0&&F.computeNormals(),$===ie)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(j,k,I),A.next=11;break;case 7:return A.prev=7,A.t0=A.catch(0),g?g(A.t0):d.default._friendlyError("Error during parsing: "+A.t0.message),A.abrupt("return");case 11:return A.prev=11,f&&j.normalize(),v&&j.flipU(),_&&j.flipV(),M._decrementPreload(),typeof m=="function"&&m(j),A.finish(11);case 18:case"end":return A.stop()}},D,null,[[0,7,11,18]])}));return function(D){return L.apply(this,arguments)}}(),g):(d.default._friendlyFileLoadError(3,p),g?g():d.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),j},d.default.prototype.model=function(p){this._assert3d("model"),d.default._validateParameters("model",arguments),0<p.vertices.length&&(this._renderer.geometryInHash(p.gid)||(p.edges.length===0&&p._makeTriangleEdges(),p._edgesToVertices(),this._renderer.createBuffers(p.gid,p)),this._renderer.drawBuffers(p.gid))};var u=d.default;c.default=u},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../core/main"))&&y.__esModule?y:{default:y},l=function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}r("./p5.Texture"),a.default.prototype.loadShader=function(u,p,h,m){a.default._validateParameters("loadShader",arguments),m=m||console.error;function g(){v._decrementPreload(),h&&h(f)}var f=new a.default.Shader,v=this,_=!1,x=!1;return this.loadStrings(u,function(j){f._vertSrc=j.join(`
`),x=!0,_&&g()},m),this.loadStrings(p,function(j){f._fragSrc=j.join(`
`),_=!0,x&&g()},m),f},a.default.prototype.createShader=function(u,p){return a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,u,p)},a.default.prototype.createFilterShader=function(u){a.default._validateParameters("createFilterShader",arguments);var p=u.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,p=new a.default.Shader(this._renderer,p,u);return this._renderer.GL?p.ensureCompiledOnContext(this):p.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),p},a.default.prototype.shader=function(u){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),u.ensureCompiledOnContext(this),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(u){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=l.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(u){u!==l.IMAGE&&u!==l.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},a.default.prototype.textureWrap=function(u){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,h=(this._renderer.textureWrapX=u,this._renderer.textureWrapY=p,!0),m=!1,g=void 0;try{for(var f,v=this._renderer.textures.values()[Symbol.iterator]();!(h=(f=v.next()).done);h=!0)f.value.setWrapMode(u,p)}catch(_){m=!0,g=_}finally{try{h||v.return==null||v.return()}finally{if(m)throw g}}},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return a.default._validateParameters("normalMaterial",p),this._renderer.drawMode=l.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(u,p,h){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var m=a.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=m._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.emissiveMaterial=function(u,p,h,m){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.specularMaterial=function(u,p,h,m){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.shininess=function(u){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),this._renderer._useShininess=u=u<1?1:u,this},a.default.prototype.metalness=function(u){return this._assert3d("metalness"),u=1-Math.exp(-u/100),this._renderer._useMetalness=u,this},a.default.RendererGL.prototype._applyColorBlend=function(u,g){var h=this.GL,m=this.drawMode===l.TEXTURE,g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||m||this.curBlendMode!==l.BLEND||u[u.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==l.BLEND&&this.curBlendMode!==l.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=g),this._applyBlendMode(),u},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case l.BLEND:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case l.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE);break;case l.REMOVE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ZERO,u.ONE_MINUS_SRC_ALPHA);break;case l.MULTIPLY:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA);break;case l.SCREEN:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_COLOR);break;case l.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case l.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case l.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case l.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case l.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var y=a.default;c.default=y},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(r,i,c){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(a,l){for(var b=0;b<l.length;b++){var y=l[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(a,y.key,y)}}o.default.prototype.camera=function(){var a;this._assert3d("camera");for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("camera",b),(a=this._renderer._curCamera).camera.apply(a,b),this},o.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("perspective",b),(a=this._renderer._curCamera).perspective.apply(a,b),this},o.default.prototype.linePerspective=function(a){if(o.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof o.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(a===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=a},o.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("ortho",b),(a=this._renderer._curCamera).ortho.apply(a,b),this},o.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var l=arguments.length,b=new Array(l),y=0;y<l;y++)b[y]=arguments[y];return o.default._validateParameters("frustum",b),(a=this._renderer._curCamera).frustum.apply(a,b),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new o.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},o.default.Camera=function(){function a(y){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=y,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix,this.yScale=1}var l,b;return l=a,(b=[{key:"perspective",value:function(m,u,p,h){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),u===void 0&&(u=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),h===void 0&&(h=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),h<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=u,this.cameraNear=p,this.cameraFar=h,this.projMatrix=o.default.Matrix.identity();var m=1/Math.tan(this.cameraFOV/2),g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/u,0,0,0,0,-m*this.yScale,0,0,0,0,(h+p)*g,-1,0,0,2*h*p*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(S,M,p,h,m,g){S===void 0&&(S=-this._renderer.width/2),M===void 0&&(M=+this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),h===void 0&&(h=+this._renderer.height/2),m===void 0&&(m=0),g===void 0&&(g=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=m;var P=M-S,f=h-p,v=(this.cameraFar=g)-m,_=2/P,x=2/f*this.yScale,j=-2/v,M=-(M+S)/P,S=-(h+p)/f,P=-(g+m)/v;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,-x,0,0,0,0,j,0,M,S,P,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(S,M,p,h,m,g){S===void 0&&(S=.05*-this._renderer.width),M===void 0&&(M=.05*+this._renderer.width),p===void 0&&(p=.05*+this._renderer.height),h===void 0&&(h=.05*-this._renderer.height),m===void 0&&(m=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=m;var P=M-S,f=h-p,v=(this.cameraFar=g)-m,_=2*m/P,x=2*m/f*this.yScale,j=-2*g*m/v,M=(M+S)/P,S=(h+p)/f,P=-(g+m)/v;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,-x,0,0,M,S,P,-1,0,0,j,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(_,u,p,h){var m=this.centerX,g=this.centerY,f=this.centerZ,v=(m-=this.eyeX,g-=this.eyeY,f-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),_=(v.rotate(this._renderer._pInst._toRadians(_),u,p,h),[m*v.mat4[0]+g*v.mat4[4]+f*v.mat4[8],m*v.mat4[1]+g*v.mat4[5]+f*v.mat4[9],m*v.mat4[2]+g*v.mat4[6]+f*v.mat4[10]]);_[0]+=this.eyeX,_[1]+=this.eyeY,_[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,_[0],_[1],_[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(y){var u=this._getLocalAxes();this._rotateView(y,u.y[0],u.y[1],u.y[2])}},{key:"tilt",value:function(y){var u=this._getLocalAxes();this._rotateView(y,u.x[0],u.x[1],u.x[2])}},{key:"lookAt",value:function(y,u,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,y,u,p,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(y,u,p,h,m,g,f,v,_){return y===void 0&&(y=this.defaultEyeX,u=this.defaultEyeY,p=this.defaultEyeZ,h=y,m=u,v=1,_=f=g=0),this.eyeX=y,this.eyeY=u,this.eyeZ=p,h!==void 0&&(this.centerX=h,this.centerY=m,this.centerZ=g),f!==void 0&&(this.upX=f,this.upY=v,this.upZ=_),h=this._getLocalAxes(),this.cameraMatrix.set(h.x[0],h.y[0],h.z[0],0,h.x[1],h.y[1],h.z[1],0,h.x[2],h.y[2],h.z[2],0,0,0,0,1),m=-y,this.cameraMatrix.translate([m,-u,-p]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(h,m,p){var g=this._getLocalAxes(),h=[g.x[0]*h,g.x[1]*h,g.x[2]*h],m=[g.y[0]*m,g.y[1]*m,g.y[2]*m],g=[g.z[0]*p,g.z[1]*p,g.z[2]*p];this.camera(this.eyeX+h[0]+m[0]+g[0],this.eyeY+h[1]+m[1]+g[1],this.eyeZ+h[2]+m[2]+g[2],this.centerX+h[0]+m[0]+g[0],this.centerY+h[1]+m[1]+g[1],this.centerZ+h[2]+m[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(y,u,p){var h=y-this.eyeX,m=u-this.eyeY,g=p-this.eyeZ;this.camera(y,u,p,this.centerX+h,this.centerY+m,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(y){for(var u=0,p=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];u<p.length;u++){var h=p[u];this[h]=y[h]}this.cameraMatrix=y.cameraMatrix.copy(),this.projMatrix=y.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(y,u,p){var h,m,g,f,v,_,x,j,M,S,P,L,D,k,I,A,F,N;p===0?this.set(y):p===1?this.set(u):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=y.projMatrix.mat4[0]*Math.pow(u.projMatrix.mat4[0]/y.projMatrix.mat4[0],p),this.projMatrix.mat4[5]=y.projMatrix.mat4[5]*Math.pow(u.projMatrix.mat4[5]/y.projMatrix.mat4[5],p),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),f=new o.default.Vector(y.eyeX,y.eyeY,y.eyeZ),v=new o.default.Vector(u.eyeX,u.eyeY,u.eyeZ),A=new o.default.Vector(y.centerX,y.centerY,y.centerZ),N=new o.default.Vector(u.centerX,u.centerY,u.centerZ),g=o.default.Vector.dist(f,A),h=o.default.Vector.dist(v,N),h=g*Math.pow(h/g,p),g=o.default.Vector.sub(f,v),m=1,1e-6<(F=(k=f.copy().sub(v).sub(A).add(N)).magSq())&&(m=o.default.Vector.dot(g,k)/F,m=Math.max(0,Math.min(m,1))),g=o.default.Vector.lerp(o.default.Vector.lerp(f,A,m),o.default.Vector.lerp(v,N,m),p),k=y.cameraMatrix.createSubMatrix3x3(),F=u.cameraMatrix.createSubMatrix3x3(),f=k.row(2),A=F.row(2),v=k.row(1),N=F.row(1),y=new o.default.Vector,u=new o.default.Vector,_=new o.default.Vector,x=new o.default.Vector,1-(j=.5*((k=(F=F.mult3x3(k.copy().transpose3x3())).diagonal())[0]+k[1]+k[2]-1))<1e-7?(y.set(o.default.Vector.lerp(f,A,p)).normalize(),_.set(y).mult(m*h).add(g),x.set(y).mult((m-1)*h).add(g),u.set(o.default.Vector.lerp(v,N,p)).normalize()):(A=1/(1-j),N=Math.max(k[0],k[1],k[2]),L=F.mat3[1]+F.mat3[3],D=F.mat3[2]+F.mat3[6],I=F.mat3[5]+F.mat3[7],N=N===k[0]?(S=.5*L*(A/=M=Math.sqrt((k[0]-j)*A)),P=.5*D*A,.5*(F.mat3[7]-F.mat3[5])/M):N===k[1]?(P=.5*I*(A/=S=Math.sqrt((k[1]-j)*A)),M=.5*L*A,.5*(F.mat3[2]-F.mat3[6])/S):(M=.5*D*(A/=P=Math.sqrt((k[2]-j)*A)),S=.5*I*A,.5*(F.mat3[3]-F.mat3[1])/P),L=p*Math.atan2(N,j),D=Math.cos(L),k=Math.sin(L),(N=new o.default.Matrix("mat3",[D+(I=1-D)*M*M,I*(A=M*S)+k*P,I*(F=P*M)-k*S,I*A-k*P,D+I*S*S,I*(p=S*P)+k*M,I*F+k*S,I*p-k*M,D+I*P*P])).multiplyVec3(f,y),_.set(y).mult(m*h).add(g),x.set(y).mult((m-1)*h).add(g),N.multiplyVec3(v,u)),this.camera(_.x,_.y,_.z,x.x,x.y,x.z,u.x,u.y,u.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var y=new o.default.Camera(this._renderer);return y.cameraFOV=this.cameraFOV,y.aspectRatio=this.aspectRatio,y.eyeX=this.eyeX,y.eyeY=this.eyeY,y.eyeZ=this.eyeZ,y.centerX=this.centerX,y.centerY=this.centerY,y.centerZ=this.centerZ,y.upX=this.upX,y.upY=this.upY,y.upZ=this.upZ,y.cameraNear=this.cameraNear,y.cameraFar=this.cameraFar,y.cameraType=this.cameraType,y.cameraMatrix=this.cameraMatrix.copy(),y.projMatrix=this.projMatrix.copy(),y.yScale=this.yScale,y}},{key:"_getLocalAxes",value:function(){var y=this.eyeX-this.centerX,u=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,f=Math.sqrt(y*y+u*u+p*p),f=(f!==0&&(y/=f,u/=f,p/=f),this.upX),h=(v=this.upY)*p-(_=this.upZ)*u,m=-f*p+_*y,g=f*u-v*y,f=u*g-p*m,v=-y*g+p*h,_=y*m-u*h,x=Math.sqrt(h*h+m*m+g*g),x=(x!==0&&(h/=x,m/=x,g/=x),Math.sqrt(f*f+v*v+_*_));return x!==0&&(f/=x,v/=x,_/=x),{x:[h,m,g],y:[f,v,_],z:[y,u,p]}}},{key:"_orbit",value:function(y,x,_){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,f=this.eyeZ-this.centerZ,h=Math.hypot(m,g,f),m=new o.default.Vector(m,g,f).normalize(),g=new o.default.Vector(this.upX,this.upY,this.upZ).normalize(),f=o.default.Vector.cross(g,m).normalize(),v=o.default.Vector.cross(f,g),_=((h=(h*=Math.pow(10,_))<this.cameraNear?this.cameraNear:h)>this.cameraFar&&(h=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,o.default.Vector.dot(m,g))))+x),x=y;(_<=0||_>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(_)),v.mult(Math.cos(x)*Math.sin(_)),f.mult(Math.sin(x)*Math.sin(_)),m.set(g).add(v).add(f),this.eyeX=h*m.x+this.centerX,this.eyeY=h*m.y+this.centerY,this.eyeZ=h*m.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(_,x,M){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,f=this.eyeZ-this.centerZ,h=Math.hypot(m,g,f),m=new o.default.Vector(m,g,f).normalize(),g=new o.default.Vector(this.upX,this.upY,this.upZ),f=o.default.Vector.cross(g,m).normalize(),v=o.default.Vector.cross(m,f),S=Math.atan2(x,_),S=(v.mult(Math.sin(S)),f.mult(Math.cos(S)).add(v),Math.sqrt(_*_+x*x)),v=o.default.Vector.cross(m,f),_=((h=(h*=Math.pow(10,M))<this.cameraNear?this.cameraNear:h)>this.cameraFar&&(h=this.cameraFar),Math.cos(S)),x=Math.sin(S),M=g.dot(m),S=g.dot(f),j=M*_+S*x,M=-M*x+S*_,S=g.dot(v);g.x=j*m.x+M*f.x+S*v.x,g.y=j*m.y+M*f.y+S*v.y,g.z=j*m.z+M*f.z+S*v.z,f.mult(-x),m.mult(_).add(f).mult(h),this.camera(m.x+this.centerX,m.y+this.centerY,m.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&d(l.prototype,b),a}(),o.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix)},r=o.default.Camera,c.default=r},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(r,i,c){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function o(d,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}r.default.DataArray=function(){function d(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,y=this,u=d;if(!(y instanceof u))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(b),this.initialLength=b}var a,l;return a=d,(l=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var b;this.length<this.data.length/2&&(b=1<<Math.ceil(Math.log2(this.length)),(b=new Float32Array(b)).set(this.data.subarray(0,this.length),0),this.data=b)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var b=arguments.length,y=new Array(b),u=0;u<b;u++)y[u]=arguments[u];this.ensureLength(this.length+y.length),this.data.set(y,this.length),this.length+=y.length}},{key:"slice",value:function(b,y){return this.data.slice(b,Math.min(y,this.length))}},{key:"subArray",value:function(b,y){return this.data.subarray(b,Math.min(y,this.length))}},{key:"ensureLength",value:function(b){for(;this.data.length<b;){var y=new Float32Array(2*this.data.length);y.set(this.data,0),this.data=y}}}])&&o(a.prototype,l),d}(),r=r.default.DataArray,c.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(L,i,c){function o(D){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(D)}function d(D){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(D)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(P=L("../core/main"))&&P.__esModule?P:{default:P},l=function(D){if(D&&D.__esModule)return D;if(D===null||d(D)!=="object"&&typeof D!="function")return{default:D};var k=u();if(k&&k.has(D))return k.get(D);var I,A={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(I in D){var N;Object.prototype.hasOwnProperty.call(D,I)&&((N=F?Object.getOwnPropertyDescriptor(D,I):null)&&(N.get||N.set)?Object.defineProperty(A,I,N):A[I]=D[I])}return A.default=D,k&&k.set(D,A),A}(L("../core/constants")),b=L("./p5.Texture"),y=L("./p5.RendererGL");function u(){var D;return typeof WeakMap!="function"?null:(D=new WeakMap,u=function(){return D},D)}function p(D,k){return function(I){if(Array.isArray(I))return I}(D)||function(I,A){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var F=[],N=!0,U=!1,W=void 0;try{for(var G,z=I[Symbol.iterator]();!(N=(G=z.next()).done)&&(F.push(G.value),!A||F.length!==A);N=!0);}catch(Y){U=!0,W=Y}finally{try{N||z.return==null||z.return()}finally{if(U)throw W}}return F}}(D,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(D,k,I){return k in D?Object.defineProperty(D,k,{value:I,enumerable:!0,configurable:!0,writable:!0}):D[k]=I,D}function m(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")}function g(D,k){for(var I=0;I<k.length;I++){var A=k[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(D,A.key,A)}}function f(D,k,I){k&&g(D.prototype,k)}function v(D,k,I){return(v=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(U,F,N){var U=function(W,G){for(;!Object.prototype.hasOwnProperty.call(W,G)&&(W=j(W))!==null;);return W}(U,F);if(U)return(U=Object.getOwnPropertyDescriptor(U,F)).get?U.get.call(N):U.value})(D,k,I||D)}function _(D,k){return(_=Object.setPrototypeOf||function(I,A){return I.__proto__=A,I})(D,k)}function x(D){return function(){var k,I=j(D),I=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=j(this).constructor,Reflect.construct(I,arguments,k)):I.apply(this,arguments),this);if(!k||d(k)!=="object"&&typeof k!="function"){if(I!==void 0)return I;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function j(D){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(D)}var M=function(D){var k=A;if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),D&&_(k,D);var I=x(A);function A(F){var N;return m(this,A),(N=I.call(this,F.target._renderer)).fbo=F,N.yScale=-1,N}return f(A,[{key:"_computeCameraDefaultSettings",value:function(){v(j(A.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),A}(a.default.Camera),S=(a.default.FramebufferCamera=M,function(){function D(k,I){m(this,D),this.framebuffer=k,this.property=I}return f(D,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),D}()),P=(a.default.FramebufferTexture=S,function(){function D(k){var I=this,A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},F=(m(this,D),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=A.format||l.UNSIGNED_BYTE,this.channels=A.channels||(k._renderer._pInst._glAttributes.alpha?l.RGBA:l.RGB),this.useDepth=A.depth===void 0||A.depth,this.depthFormat=A.depthFormat||l.FLOAT,this.textureFiltering=A.textureFiltering||l.LINEAR,A.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof A.antialias=="number"?this.antialiasSamples=A.antialias:this.antialiasSamples=A.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==l.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=A.density||k.pixelDensity(),k._renderer.GL);if(this.gl=F,A.width&&A.height?(N=k._renderer._adjustDimensions(A.width,A.height),this.width=N.adjustedWidth,this.height=N.adjustedHeight,this._autoSized=!1):(A.width===void 0!=(A.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),A.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(A.stencil===void 0||A.stencil),this.framebuffer=F.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=F.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var N=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=N,this.draw(function(){return I.target.clear()})}return f(D,[{key:"resize",value:function(k,I){this._autoSized=!1;var A=this.target._renderer._adjustDimensions(k,I);k=A.adjustedWidth,I=A.adjustedHeight,this.width=k,this.height=I,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===l.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===l.WEBGL&&this.depthFormat===l.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=l.UNSIGNED_INT),[l.UNSIGNED_BYTE,l.FLOAT,l.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.useDepth&&![l.UNSIGNED_INT,l.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=l.FLOAT),(0,b.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==l.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===l.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=l.UNSIGNED_INT),k.halfFloat||this.format!==l.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.channels===l.RGB&&[l.FLOAT,l.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=l.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,I=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),A=k.getParameter(k.FRAMEBUFFER_BINDING),F=k.createTexture();if(!F)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,F);var N=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,N.internalFormat,this.width*this.density,this.height*this.density,0,N.format,N.type,null),this.colorTexture=F,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,F,0),this.useDepth){var F=k.createTexture();if(!F)throw new Error("Unable to create depth texture");var U=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,F),k.texImage2D(k.TEXTURE_2D,0,U.internalFormat,this.width*this.density,this.height*this.density,0,U.format,U.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),N.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(U=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),U.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new S(this,"depthTexture"),F=k.NEAREST,this.depthP5Texture=new a.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new S(this,"colorTexture"),N=this.textureFiltering===l.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new a.default.Texture(this.target._renderer,this.color,{minFilter:N,magFilter:N}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,I),k.bindFramebuffer(k.FRAMEBUFFER,A)}},{key:"_glColorFormat",value:function(){var k,I,A=this.gl,F=this.format===l.FLOAT?A.FLOAT:this.format===l.HALF_FLOAT?this.target.webglVersion===l.WEBGL2?A.HALF_FLOAT:A.getExtension("OES_texture_half_float").HALF_FLOAT_OES:A.UNSIGNED_BYTE,N=this.channels===l.RGBA?A.RGBA:A.RGB;return{internalFormat:this.target.webglVersion===l.WEBGL2?(h(I={},A.FLOAT,h({},A.RGBA,A.RGBA32F)),h(I,A.HALF_FLOAT,h({},A.RGBA,A.RGBA16F)),h(I,A.UNSIGNED_BYTE,(h(k={},A.RGBA,A.RGBA8),h(k,A.RGB,A.RGB8),k)),I[F][N]):this.format===l.HALF_FLOAT?A.RGBA:N,format:N,type:F}}},{key:"_glDepthFormat",value:function(){var A=this.gl,k=this.useStencil?this.depthFormat===l.FLOAT?A.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===l.WEBGL2?A.UNSIGNED_INT_24_8:A.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===l.FLOAT?A.FLOAT:A.UNSIGNED_INT,I=this.useStencil?A.DEPTH_STENCIL:A.DEPTH_COMPONENT,A=this.useStencil?this.depthFormat===l.FLOAT?A.DEPTH32F_STENCIL8:this.target.webglVersion===l.WEBGL2?A.DEPTH24_STENCIL8:A.DEPTH_STENCIL:this.target.webglVersion===l.WEBGL2?this.depthFormat===l.FLOAT?A.DEPTH_COMPONENT32F:A.DEPTH_COMPONENT24:A.DEPTH_COMPONENT;return{internalFormat:A,format:I,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.color,k=this.depth,I=this.colorRenderbuffer,A=this.depthRenderbuffer,F=(this._deleteTexture(F),k&&this._deleteTexture(k),this.gl);I&&F.deleteRenderbuffer(I),A&&F.deleteRenderbuffer(A),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new M(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,I=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&I.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var A=0,F=I;A<F.length;A++){var U=p(F[A],2),N=U[0],U=U[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,N,U)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,I=this.target._renderer.activeFramebuffer(),A=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,y.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,A.format,A.type),I?k.bindFramebuffer(k.FRAMEBUFFER,I._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,I,A,F){a.default._validateParameters("p5.Framebuffer.get",arguments);var N=this._glColorFormat();if(k===void 0&&I===void 0)I=k=0,A=this.width,F=this.height;else if(A===void 0&&F===void 0)return(k<0||I<0||k>=this.width||I>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),I=this.target.constrain(I,0,this.height-1)),(0,y.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,I*this.density,N.format,N.type);k=this.target.constrain(k,0,this.width-1),I=this.target.constrain(I,0,this.height-1),A=this.target.constrain(A,1,this.width-k),F=this.target.constrain(F,1,this.height-I);for(var U=(0,y.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,I*this.density,A*this.density,F*this.density,N.format,N.type),W=new Uint8ClampedArray(A*F*this.density*this.density*4),G=(W.fill(255),N.type===this.gl.RGB?3:4),z=0;z<F*this.density;z++)for(var Y=0;Y<A*this.density;Y++)for(var $=0;$<4;$++){var ie,E=4*(z*A*this.density+Y)+$;$<G&&(ie=G==4?E:(z*A*this.density+Y)*G+$,W[E]=U[ie])}return k=new a.default.Image(A*this.density,F*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(W),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(A,F),k}},{key:"updatePixels",value:function(){var k=this.gl,I=(this.colorP5Texture.bindTexture(),this._glColorFormat()),A=I.format===k.RGBA?4:3,A=this.width*this.height*this.density*this.density*A,F=I.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof F)||this.pixels.length!==A)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,I.internalFormat,this.width*this.density,this.height*this.density,0,I.format,I.type,this.pixels),this.colorP5Texture.unbindTexture(),F=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),D}()),L=a.default.Framebuffer=P;c.default=L},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function d(h){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=function(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=b();if(m&&m.has(h))return m.get(h);var g,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var _;Object.prototype.hasOwnProperty.call(h,g)&&((_=v?Object.getOwnPropertyDescriptor(h,g):null)&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=h[g])}return f.default=h,m&&m.set(h,f),f}(r("../core/constants"));function b(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,b=function(){return h},h)}function y(h){return function(m){if(Array.isArray(m)){for(var g=0,f=new Array(m.length);g<m.length;g++)f[g]=m[g];return f}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(h,m){for(var g=0;g<m.length;g++){var f=m[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}a.default.Geometry=function(){function h(f,v,_){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new a.default.DataArray,this.lineTangentsIn=new a.default.DataArray,this.lineTangentsOut=new a.default.DataArray,this.lineSides=new a.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new a.default.DataArray,this.detailX=f!==void 0?f:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,_ instanceof Function&&_.call(this)}var m,g;return m=h,(g=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var f=new a.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new a.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),_=0;_<this.vertices.length;_++){var x=this.vertices[_];f.x=Math.min(f.x,x.x),f.y=Math.min(f.y,x.y),f.z=Math.min(f.z,x.z),v.x=Math.max(v.x,x.x),v.y=Math.max(v.y,x.y),v.z=Math.max(v.z,x.z)}var j=new a.default.Vector(v.x-f.x,v.y-f.y,v.z-f.z),M=new a.default.Vector((f.x+v.x)/2,(f.y+v.y)/2,(f.z+v.z)/2);this.boundingBoxCache={min:f,max:v,size:j,offset:M}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var f=0;f<this.vertexColors.length;f+=4)if(this.vertexColors[f+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var f=0;f<this.lineVertexColors.length;f+=4)if(this.lineVertexColors[f+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(f,v){return v%2==0?1-f:f})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(f,v){return v%2==0?f:1-f})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var f,v,_,x=this.detailX+1,j=0;j<this.detailY;j++)for(var M=0;M<this.detailX;M++)v=(j+1)*x+M+1,this.faces.push([j*x+M,f=j*x+M+1,_=(j+1)*x+M]),this.faces.push([_,f,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],_=this.vertices[v[0]],j=this.vertices[v[1]],v=this.vertices[v[2]],j=a.default.Vector.sub(j,_),v=a.default.Vector.sub(v,_),_=a.default.Vector.cross(j,v),x=a.default.Vector.mag(_),j=x/(a.default.Vector.mag(j)*a.default.Vector.mag(v));return j===0||isNaN(j)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),_):(1<j&&(j=1),_.mult(Math.asin(j)/x))}},{key:"computeNormals",value:function(){var f,v=this,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:l.FLAT,x=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,j=this.vertexNormals,M=this.vertices,S=this.faces;if(_===l.SMOOTH){for(var P={},L=[],D=Math.pow(10,x===void 0?3:x),k=function(U){return Math.round(U*D)/D},I=function(U){return"".concat(k(U.x),",").concat(k(U.y),",").concat(k(U.z))},A=0;A<M.length;A++){var F=M[A],N=I(F);P[N]===void 0&&(P[N]=L.length,L.push(F))}S.forEach(function(U){for(var W=0;W<3;++W){var G=U[W],G=M[G],G=I(G);U[W]=P[G]}}),this.edges.forEach(function(U){for(var W=0;W<2;++W){var G=U[W],G=M[G],G=I(G);U[W]=P[G]}}),this.vertices=M=L}for(f=j.length=0;f<M.length;++f)j.push(new a.default.Vector);for(S.forEach(function(U,W){for(var G=v._getFaceNormal(W),z=0;z<3;++z){var Y=U[z];j[Y].add(G)}}),f=0;f<M.length;++f)j[f].normalize();return this}},{key:"averageNormals",value:function(){for(var f=0;f<=this.detailY;f++){var v=this.detailX+1,_=a.default.Vector.add(this.vertexNormals[f*v],this.vertexNormals[f*v+this.detailX]),_=a.default.Vector.div(_,2);this.vertexNormals[f*v]=_,this.vertexNormals[f*v+this.detailX]=_}return this}},{key:"averagePoleNormals",value:function(){for(var f=new a.default.Vector(0,0,0),v=0;v<this.detailX;v++)f.add(this.vertexNormals[v]);for(var f=a.default.Vector.div(f,this.detailX),_=0;_<this.detailX;_++)this.vertexNormals[_]=f;f=new a.default.Vector(0,0,0);for(var x=this.vertices.length-1;x>this.vertices.length-1-this.detailX;x--)f.add(this.vertexNormals[x]);f=a.default.Vector.div(f,this.detailX);for(var j=this.vertices.length-1;j>this.vertices.length-1-this.detailX;j--)this.vertexNormals[j]=f;return this}},{key:"_makeTriangleEdges",value:function(){for(var f=this.edges.length=0;f<this.faces.length;f++)this.edges.push([this.faces[f][0],this.faces[f][1]]),this.edges.push([this.faces[f][1],this.faces[f][2]]),this.edges.push([this.faces[f][2],this.faces[f][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var f,v=new Map,_=new Set,x=0;x<this.edges.length;x++){var j,M=this.edges[x-1],S=this.edges[x],P=this.vertices[S[0]],L=this.vertices[S[1]],D=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[0],4*(S[0]+1)):[0,0,0,0],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[1],4*(S[1]+1)):[0,0,0,0],I=L.copy().sub(P).normalize(),A=0<I.magSq();A&&this._addSegment(P,L,D,k,I),0<x&&M[1]===S[0]?_.has(S[0])||(_.add(S[0]),v.delete(S[0]),f&&A&&I.dot(f)<1-1e-8&&this._addJoin(P,f,I,D)):(A&&!_.has(S[0])&&((j=v.get(S[0]))?(this._addJoin(P,j.dir,I,D),v.delete(S[0]),_.add(S[0])):v.set(S[0],{point:P,dir:I.copy().mult(-1),color:D})),f&&!_.has(M[1])&&((j=v.get(M[1]))?(this._addJoin(this.vertices[M[1]],f,j.dir.copy().mult(-1),D),v.delete(M[1]),_.add(M[1])):v.set(M[1],{point:this.vertices[M[1]],dir:f,color:D}),f=void 0)),x!==this.edges.length-1||_.has(S[1])||((P=v.get(S[1]))?(this._addJoin(L,I,P.dir.copy().mult(-1),k),v.delete(S[1]),_.add(S[1])):v.set(S[1],{point:L,dir:I,color:k})),A&&(f=I)}var F=!0,N=!1,U=void 0;try{for(var W,G=v.values()[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var z=W.value,Y=z.point,$=z.dir,ie=z.color;this._addCap(Y,$,ie)}}catch(E){N=!0,U=E}finally{try{F||G.return==null||G.return()}finally{if(N)throw U}}return this}},{key:"_addSegment",value:function(M,S,_,x,j){var M=M.array(),S=S.array(),P=j.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var L=0,D=[this.lineTangentsIn,this.lineTangentsOut];L<D.length;L++)for(var k=D[L],I=0;I<6;I++)k.push.apply(k,y(P));return(j=this.lineVertices).push.apply(j,y(M).concat(y(S),y(M),y(S),y(S),y(M))),(j=this.lineVertexColors).push.apply(j,y(_).concat(y(x),y(_),y(x),y(x),y(_))),this}},{key:"_addCap",value:function(f,v,_){for(var x,j=f.array(),M=v.array(),S=[0,0,0],P=0;P<6;P++)(x=this.lineVertices).push.apply(x,y(j)),(x=this.lineTangentsIn).push.apply(x,y(M)),(x=this.lineTangentsOut).push.apply(x,S),(x=this.lineVertexColors).push.apply(x,y(_));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(f,v,_,x){for(var j,M=f.array(),S=v.array(),P=_.array(),L=0;L<12;L++)(j=this.lineVertices).push.apply(j,y(M)),(j=this.lineTangentsIn).push.apply(j,y(S)),(j=this.lineTangentsOut).push.apply(j,y(P)),(j=this.lineVertexColors).push.apply(j,y(x));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var f=this.vertices[0].copy(),v=this.vertices[0].copy(),_=0;_<this.vertices.length;_++)f.x=Math.max(f.x,this.vertices[_].x),v.x=Math.min(v.x,this.vertices[_].x),f.y=Math.max(f.y,this.vertices[_].y),v.y=Math.min(v.y,this.vertices[_].y),f.z=Math.max(f.z,this.vertices[_].z),v.z=Math.min(v.z,this.vertices[_].z);for(var x=a.default.Vector.lerp(f,v,.5),j=a.default.Vector.sub(f,v),M=200/Math.max(Math.max(j.x,j.y),j.z),S=0;S<this.vertices.length;S++)this.vertices[S].sub(x),this.vertices[S].mult(M)}return this}}])&&u(m.prototype,g),h}();var p=a.default.Geometry;c.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(b,i,c){b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(b=b("../core/main"))&&b.__esModule?b:{default:b};function d(y,u){for(var p=0;p<u.length;p++){var h=u[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,h.key,h)}}var a=Array,l=function(y){return Array.isArray(y)},b=(typeof Float32Array<"u"&&(a=Float32Array,l=function(y){return Array.isArray(y)||y instanceof Float32Array}),o.default.Matrix=function(){function y(){var m=this,g=y;if(m instanceof g)return arguments.length&&((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])instanceof o.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var u,p,h;return u=y,h=[{key:"identity",value:function(m){return new o.default.Matrix(m)}}],(p=[{key:"set",value:function(m){var g=arguments;if(m instanceof o.default.Matrix?g=m.mat4:l(m)&&(g=m),g.length!==16)o.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var f=0;f<16;f++)this.mat4[f]=g[f];return this}},{key:"get",value:function(){return new o.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var m;return this.mat3!==void 0?((m=new o.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],m.mat3[1]=this.mat3[1],m.mat3[2]=this.mat3[2],m.mat3[3]=this.mat3[3],m.mat3[4]=this.mat3[4],m.mat3[5]=this.mat3[5],m.mat3[6]=this.mat3[6],m.mat3[7]=this.mat3[7],m.mat3[8]=this.mat3[8]):((m=new o.default.Matrix(this.p5)).mat4[0]=this.mat4[0],m.mat4[1]=this.mat4[1],m.mat4[2]=this.mat4[2],m.mat4[3]=this.mat4[3],m.mat4[4]=this.mat4[4],m.mat4[5]=this.mat4[5],m.mat4[6]=this.mat4[6],m.mat4[7]=this.mat4[7],m.mat4[8]=this.mat4[8],m.mat4[9]=this.mat4[9],m.mat4[10]=this.mat4[10],m.mat4[11]=this.mat4[11],m.mat4[12]=this.mat4[12],m.mat4[13]=this.mat4[13],m.mat4[14]=this.mat4[14],m.mat4[15]=this.mat4[15]),m}},{key:"transpose",value:function(m){var g,f,v,_,x,j;return m instanceof o.default.Matrix?(g=m.mat4[1],f=m.mat4[2],v=m.mat4[3],_=m.mat4[6],x=m.mat4[7],j=m.mat4[11],this.mat4[0]=m.mat4[0],this.mat4[1]=m.mat4[4],this.mat4[2]=m.mat4[8],this.mat4[3]=m.mat4[12],this.mat4[4]=g,this.mat4[5]=m.mat4[5],this.mat4[6]=m.mat4[9],this.mat4[7]=m.mat4[13],this.mat4[8]=f,this.mat4[9]=_,this.mat4[10]=m.mat4[10],this.mat4[11]=m.mat4[14],this.mat4[12]=v,this.mat4[13]=x,this.mat4[14]=j,this.mat4[15]=m.mat4[15]):l(m)&&(g=m[1],f=m[2],v=m[3],_=m[6],x=m[7],j=m[11],this.mat4[0]=m[0],this.mat4[1]=m[4],this.mat4[2]=m[8],this.mat4[3]=m[12],this.mat4[4]=g,this.mat4[5]=m[5],this.mat4[6]=m[9],this.mat4[7]=m[13],this.mat4[8]=f,this.mat4[9]=_,this.mat4[10]=m[10],this.mat4[11]=m[14],this.mat4[12]=v,this.mat4[13]=x,this.mat4[14]=j,this.mat4[15]=m[15]),this}},{key:"invert",value:function(U){U instanceof o.default.Matrix?(g=U.mat4[0],f=U.mat4[1],v=U.mat4[2],_=U.mat4[3],x=U.mat4[4],j=U.mat4[5],M=U.mat4[6],S=U.mat4[7],P=U.mat4[8],L=U.mat4[9],D=U.mat4[10],k=U.mat4[11],I=U.mat4[12],A=U.mat4[13],F=U.mat4[14],N=U.mat4[15]):l(U)&&(g=U[0],f=U[1],v=U[2],_=U[3],x=U[4],j=U[5],M=U[6],S=U[7],P=U[8],L=U[9],D=U[10],k=U[11],I=U[12],A=U[13],F=U[14],N=U[15]);var g,f,v,_,x,j,M,S,P,L,D,k,I,A,F,N,U=g*j-f*x,W=g*M-v*x,G=g*S-_*x,z=f*M-v*j,Y=f*S-_*j,$=v*S-_*M,ie=P*A-L*I,E=P*F-D*I,R=P*N-k*I,B=L*F-D*A,H=L*N-k*A,Z=D*N-k*F,te=U*Z-W*H+G*B+z*R-Y*E+$*ie;return te?(this.mat4[0]=(j*Z-M*H+S*B)*(te=1/te),this.mat4[1]=(v*H-f*Z-_*B)*te,this.mat4[2]=(A*$-F*Y+N*z)*te,this.mat4[3]=(D*Y-L*$-k*z)*te,this.mat4[4]=(M*R-x*Z-S*E)*te,this.mat4[5]=(g*Z-v*R+_*E)*te,this.mat4[6]=(F*G-I*$-N*W)*te,this.mat4[7]=(P*$-D*G+k*W)*te,this.mat4[8]=(x*H-j*R+S*ie)*te,this.mat4[9]=(f*R-g*H-_*ie)*te,this.mat4[10]=(I*Y-A*G+N*U)*te,this.mat4[11]=(L*G-P*Y-k*U)*te,this.mat4[12]=(j*E-x*B-M*ie)*te,this.mat4[13]=(g*B-f*E+v*ie)*te,this.mat4[14]=(A*W-I*z-F*U)*te,this.mat4[15]=(P*z-L*W+D*U)*te,this):null}},{key:"invert3x3",value:function(){var m=this.mat3[0],g=this.mat3[1],f=this.mat3[2],v=this.mat3[3],_=this.mat3[4],x=this.mat3[5],j=this.mat3[6],M=this.mat3[7],S=this.mat3[8],P=S*_-x*M,L=-S*v+x*j,D=M*v-_*j,k=m*P+g*L+f*D;return k?(this.mat3[0]=P*(k=1/k),this.mat3[1]=(-S*g+f*M)*k,this.mat3[2]=(x*g-f*_)*k,this.mat3[3]=L*k,this.mat3[4]=(S*m-f*j)*k,this.mat3[5]=(-x*m+f*v)*k,this.mat3[6]=D*k,this.mat3[7]=(-M*m+g*j)*k,this.mat3[8]=(_*m-g*v)*k,this):null}},{key:"transpose3x3",value:function(m){var g=(m=m===void 0?this.mat3:m)[1],f=m[2],v=m[5];return this.mat3[0]=m[0],this.mat3[1]=m[3],this.mat3[2]=m[6],this.mat3[3]=g,this.mat3[4]=m[4],this.mat3[5]=m[7],this.mat3[6]=f,this.mat3[7]=v,this.mat3[8]=m[8],this}},{key:"inverseTranspose",value:function(m){if(m=m.mat4,this.mat3===void 0?o.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=m[0],this.mat3[1]=m[1],this.mat3[2]=m[2],this.mat3[3]=m[4],this.mat3[4]=m[5],this.mat3[5]=m[6],this.mat3[6]=m[8],this.mat3[7]=m[9],this.mat3[8]=m[10]),m=this.invert3x3(),m)m.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){var m=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],g=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],f=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],v=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],_=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],x=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],j=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],M=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],S=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],P=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],L=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return m*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-g*L+f*P+v*S-_*M+x*j}},{key:"mult",value:function(f){var g;if(f===this||f===this.mat4)g=this.copy().mat4;else if(f instanceof o.default.Matrix)g=f.mat4;else if(l(f))g=f;else{if(arguments.length!==16)return;g=arguments}var f=this.mat4[0],v=this.mat4[1],_=this.mat4[2],x=this.mat4[3];return this.mat4[0]=f*g[0]+v*g[4]+_*g[8]+x*g[12],this.mat4[1]=f*g[1]+v*g[5]+_*g[9]+x*g[13],this.mat4[2]=f*g[2]+v*g[6]+_*g[10]+x*g[14],this.mat4[3]=f*g[3]+v*g[7]+_*g[11]+x*g[15],f=this.mat4[4],v=this.mat4[5],_=this.mat4[6],x=this.mat4[7],this.mat4[4]=f*g[0]+v*g[4]+_*g[8]+x*g[12],this.mat4[5]=f*g[1]+v*g[5]+_*g[9]+x*g[13],this.mat4[6]=f*g[2]+v*g[6]+_*g[10]+x*g[14],this.mat4[7]=f*g[3]+v*g[7]+_*g[11]+x*g[15],f=this.mat4[8],v=this.mat4[9],_=this.mat4[10],x=this.mat4[11],this.mat4[8]=f*g[0]+v*g[4]+_*g[8]+x*g[12],this.mat4[9]=f*g[1]+v*g[5]+_*g[9]+x*g[13],this.mat4[10]=f*g[2]+v*g[6]+_*g[10]+x*g[14],this.mat4[11]=f*g[3]+v*g[7]+_*g[11]+x*g[15],f=this.mat4[12],v=this.mat4[13],_=this.mat4[14],x=this.mat4[15],this.mat4[12]=f*g[0]+v*g[4]+_*g[8]+x*g[12],this.mat4[13]=f*g[1]+v*g[5]+_*g[9]+x*g[13],this.mat4[14]=f*g[2]+v*g[6]+_*g[10]+x*g[14],this.mat4[15]=f*g[3]+v*g[7]+_*g[11]+x*g[15],this}},{key:"apply",value:function(f){var g;if(f===this||f===this.mat4)g=this.copy().mat4;else if(f instanceof o.default.Matrix)g=f.mat4;else if(l(f))g=f;else{if(arguments.length!==16)return;g=arguments}var f=this.mat4,v=f[0],_=f[4],x=f[8],j=f[12],v=(f[0]=g[0]*v+g[1]*_+g[2]*x+g[3]*j,f[4]=g[4]*v+g[5]*_+g[6]*x+g[7]*j,f[8]=g[8]*v+g[9]*_+g[10]*x+g[11]*j,f[12]=g[12]*v+g[13]*_+g[14]*x+g[15]*j,f[1]),_=f[5],x=f[9],j=f[13],v=(f[1]=g[0]*v+g[1]*_+g[2]*x+g[3]*j,f[5]=g[4]*v+g[5]*_+g[6]*x+g[7]*j,f[9]=g[8]*v+g[9]*_+g[10]*x+g[11]*j,f[13]=g[12]*v+g[13]*_+g[14]*x+g[15]*j,f[2]),_=f[6],x=f[10],j=f[14],v=(f[2]=g[0]*v+g[1]*_+g[2]*x+g[3]*j,f[6]=g[4]*v+g[5]*_+g[6]*x+g[7]*j,f[10]=g[8]*v+g[9]*_+g[10]*x+g[11]*j,f[14]=g[12]*v+g[13]*_+g[14]*x+g[15]*j,f[3]),_=f[7],x=f[11],j=f[15];return f[3]=g[0]*v+g[1]*_+g[2]*x+g[3]*j,f[7]=g[4]*v+g[5]*_+g[6]*x+g[7]*j,f[11]=g[8]*v+g[9]*_+g[10]*x+g[11]*j,f[15]=g[12]*v+g[13]*_+g[14]*x+g[15]*j,this}},{key:"scale",value:function(m,g,f){return m instanceof o.default.Vector?(g=m.y,f=m.z,m=m.x):m instanceof Array&&(g=m[1],f=m[2],m=m[0]),this.mat4[0]*=m,this.mat4[1]*=m,this.mat4[2]*=m,this.mat4[3]*=m,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=f,this.mat4[9]*=f,this.mat4[10]*=f,this.mat4[11]*=f,this}},{key:"rotate",value:function(U,H,B,v){H instanceof o.default.Vector?(B=H.y,v=H.z,H=H.x):H instanceof Array&&(B=H[1],v=H[2],H=H[0]);var _=Math.sqrt(H*H+B*B+v*v),_=(H*=1/_,B*=1/_,v*=1/_,this.mat4[0]),x=this.mat4[1],j=this.mat4[2],M=this.mat4[3],S=this.mat4[4],P=this.mat4[5],L=this.mat4[6],D=this.mat4[7],k=this.mat4[8],I=this.mat4[9],A=this.mat4[10],F=this.mat4[11],N=Math.sin(U),U=Math.cos(U),W=1-U,G=H*H*W+U,z=B*H*W+v*N,Y=v*H*W-B*N,$=H*B*W-v*N,ie=B*B*W+U,E=v*B*W+H*N,R=H*v*W+B*N,B=B*v*W-H*N,H=v*v*W+U;return this.mat4[0]=_*G+S*z+k*Y,this.mat4[1]=x*G+P*z+I*Y,this.mat4[2]=j*G+L*z+A*Y,this.mat4[3]=M*G+D*z+F*Y,this.mat4[4]=_*$+S*ie+k*E,this.mat4[5]=x*$+P*ie+I*E,this.mat4[6]=j*$+L*ie+A*E,this.mat4[7]=M*$+D*ie+F*E,this.mat4[8]=_*R+S*B+k*H,this.mat4[9]=x*R+P*B+I*H,this.mat4[10]=j*R+L*B+A*H,this.mat4[11]=M*R+D*B+F*H,this}},{key:"translate",value:function(v){var g=v[0],f=v[1],v=v[2]||0;this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*f+this.mat4[8]*v,this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*f+this.mat4[9]*v,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*f+this.mat4[10]*v,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*f+this.mat4[11]*v}},{key:"rotateX",value:function(m){this.rotate(m,1,0,0)}},{key:"rotateY",value:function(m){this.rotate(m,0,1,0)}},{key:"rotateZ",value:function(m){this.rotate(m,0,0,1)}},{key:"perspective",value:function(_,g,f,v){var _=1/Math.tan(_/2),x=1/(f-v);return this.mat4[0]=_/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=_,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(v+f)*x,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*v*f*x,this.mat4[15]=0,this}},{key:"ortho",value:function(m,g,f,v,_,x){var j=1/(m-g),M=1/(f-v),S=1/(_-x);return this.mat4[0]=-2*j,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*M,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*S,this.mat4[11]=0,this.mat4[12]=(m+g)*j,this.mat4[13]=(v+f)*M,this.mat4[14]=(x+_)*S,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(m,g,f,v){var _=new Array(4),x=this.mat4;return _[0]=x[0]*m+x[4]*g+x[8]*f+x[12]*v,_[1]=x[1]*m+x[5]*g+x[9]*f+x[13]*v,_[2]=x[2]*m+x[6]*g+x[10]*f+x[14]*v,_[3]=x[3]*m+x[7]*g+x[11]*f+x[15]*v,_}},{key:"multiplyPoint",value:function(f){var v=f.x,g=f.y,f=f.z,v=this.multiplyVec4(v,g,f,1);return new o.default.Vector(v[0],v[1],v[2])}},{key:"multiplyAndNormalizePoint",value:function(f){var v=f.x,g=f.y,f=f.z,v=this.multiplyVec4(v,g,f,1);return v[0]/=v[3],v[1]/=v[3],v[2]/=v[3],new o.default.Vector(v[0],v[1],v[2])}},{key:"multiplyDirection",value:function(f){var v=f.x,g=f.y,f=f.z,v=this.multiplyVec4(v,g,f,0);return new o.default.Vector(v[0],v[1],v[2])}},{key:"mult3x3",value:function(f){var g;if(f===this||f===this.mat3)g=this.copy().mat3;else if(f instanceof o.default.Matrix)g=f.mat3;else if(l(f))g=f;else{if(arguments.length!==9)return;g=arguments}var f=this.mat3[0],v=this.mat3[1],_=this.mat3[2];return this.mat3[0]=f*g[0]+v*g[3]+_*g[6],this.mat3[1]=f*g[1]+v*g[4]+_*g[7],this.mat3[2]=f*g[2]+v*g[5]+_*g[8],f=this.mat3[3],v=this.mat3[4],_=this.mat3[5],this.mat3[3]=f*g[0]+v*g[3]+_*g[6],this.mat3[4]=f*g[1]+v*g[4]+_*g[7],this.mat3[5]=f*g[2]+v*g[5]+_*g[8],f=this.mat3[6],v=this.mat3[7],_=this.mat3[8],this.mat3[6]=f*g[0]+v*g[3]+_*g[6],this.mat3[7]=f*g[1]+v*g[4]+_*g[7],this.mat3[8]=f*g[2]+v*g[5]+_*g[8],this}},{key:"column",value:function(m){return new o.default.Vector(this.mat3[3*m],this.mat3[3*m+1],this.mat3[3*m+2])}},{key:"row",value:function(m){return new o.default.Vector(this.mat3[m],this.mat3[m+3],this.mat3[m+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(m,g){return(g=g===void 0?m.copy():g).x=this.row(0).dot(m),g.y=this.row(1).dot(m),g.z=this.row(2).dot(m),g}},{key:"createSubMatrix3x3",value:function(){var m=new o.default.Matrix("mat3");return m.mat3[0]=this.mat4[0],m.mat3[1]=this.mat4[1],m.mat3[2]=this.mat4[2],m.mat3[3]=this.mat4[4],m.mat3[4]=this.mat4[5],m.mat3[5]=this.mat4[6],m.mat3[6]=this.mat4[8],m.mat3[7]=this.mat4[9],m.mat3[8]=this.mat4[10],m}}])&&d(u.prototype,p),h&&d(u,h),y}(),o.default.Matrix);c.default=b},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(r,i,c){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function o(d,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}r.default.RenderBuffer=function(){function d(b,y,u,p,h,m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.size=b,this.src=y,this.dst=u,this.attr=p,this._renderer=h,this.map=m}var a,l;return a=d,(l=[{key:"_prepareBuffer",value:function(b,y){var u,p,h,f=y.attributes,m=this._renderer.GL,g=b.model||b,f=f[this.attr];f&&(u=b[this.dst],0<(p=g[this.src]).length?((h=!u)&&(b[this.dst]=u=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,u),!h&&g.dirtyFlags[this.src]===!1||(h=(b=this.map)?b(p):p,this._renderer._bindBuffer(u,m.ARRAY_BUFFER,h),g.dirtyFlags[this.src]=!1),y.enableAttrib(f,this.size)):(b=f.location)!==-1&&this._renderer.registerEnabled.has(b)&&(m.disableVertexAttribArray(b),this._renderer.registerEnabled.delete(b)))}}])&&o(a.prototype,l),d}(),r=r.default.RenderBuffer,c.default=r},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(r,i,c){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function d(h){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=function(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=b();if(m&&m.has(h))return m.get(h);var g,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var _;Object.prototype.hasOwnProperty.call(h,g)&&((_=v?Object.getOwnPropertyDescriptor(h,g):null)&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=h[g])}return f.default=h,m&&m.set(h,f),f}(r("../core/constants"));function b(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,b=function(){return h},h)}function y(h){return function(m){if(Array.isArray(m)){for(var g=0,f=new Array(m.length);g<m.length;g++)f[g]=m[g];return f}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=h!==void 0?h:l.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var u={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},p=(a.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==l.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},a.default.RendererGL.prototype.vertex=function(h,m){if(this.immediateMode.shapeMode===l.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in u){var f=u[g],g=this.immediateMode.geometry[g];g.push.apply(g,y(g.slice(g.length-3*f,g.length-2*f)).concat(y(g.slice(g.length-f,g.length))))}var v,_,x=v=_=0,j=(arguments.length===3?x=arguments[2]:arguments.length===4?(v=arguments[2],_=arguments[3]):arguments.length===5&&(x=arguments[2],v=arguments[3],_=arguments[4]),new a.default.Vector(h,m,x)),j=(this.immediateMode.geometry.vertices.push(j),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),j=(this.immediateMode.geometry.vertexColors.push(j[0],j[1],j[2],j[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(j[0],j[1],j[2],j[3]),this.textureMode!==l.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(v/=this._tex.width,_/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(v,_),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=m,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=m,this.immediateMode._quadraticVertex[2]=x,this},a.default.RendererGL.prototype.normal=function(h,m,g){return h instanceof a.default.Vector?this._currentNormal=h:this._currentNormal=new a.default.Vector(h,m,g),this},a.default.RendererGL.prototype.endShape=function(h,m,g,f,v,_){var x,j=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===l.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===l.TESS&&(this.immediateMode.shapeMode,l.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),x=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==l.LINE_STRIP&&this.immediateMode.shapeMode!==l.LINES||(this.immediateMode.shapeMode=l.TRIANGLE_FAN,x=!0),this.immediateMode.shapeMode===l.QUADS?this.immediateMode.shapeMode=l.TRIANGLES:this.immediateMode.shapeMode===l.QUAD_STRIP&&(this.immediateMode.shapeMode=l.TRIANGLE_STRIP),this._doFill&&!x&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(j),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(h){var m;this.immediateMode.geometry.vertices.length!==0&&(m=this._doStroke,h=h===l.CLOSE,m&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),m=this.immediateMode.shapeMode===l.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||m||h)&&this.immediateMode.shapeMode!==l.LINES&&this._tesselateShape())},a.default.RendererGL.prototype._calculateEdges=function(h,m,g){var f=[],v=0,_=this.immediateMode.contourIndices.slice(),x=0;switch(h){case l.TRIANGLE_STRIP:for(v=0;v<m.length-2;v++)f.push([v,v+1]),f.push([v,v+2]);f.push([v,v+1]);break;case l.TRIANGLE_FAN:for(v=1;v<m.length-1;v++)f.push([0,v]),f.push([v,v+1]);f.push([0,m.length-1]);break;case l.TRIANGLES:for(v=0;v<m.length-2;v+=3)f.push([v,v+1]),f.push([v+1,v+2]),f.push([v+2,v]);break;case l.LINES:for(v=0;v<m.length-1;v+=2)f.push([v,v+1]);break;case l.QUADS:for(v=0;v<m.length-5;v+=6)f.push([v,v+1]),f.push([v+1,v+2]),f.push([v+3,v+5]),f.push([v+4,v+5]);break;case l.QUAD_STRIP:for(v=0;v<m.length-2;v+=2)f.push([v,v+1]),f.push([v,v+2]),f.push([v+1,v+3]);f.push([v,v+1]);break;default:for(v=0;v<m.length;v++)v+1<m.length&&v+1!==_[0]?f.push([v,v+1]):((g||x)&&f.push([v,x]),0<_.length&&(x=_.shift()))}return h!==l.TESS&&g&&f.push([m.length-1,0]),f},a.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,m=(this.immediateMode.shapeMode=l.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),m.push([])),m[m.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var f,v=this._triangulate(m),_=this.immediateMode.geometry.vertices,x=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),j=0,M=v.length;j<M;j+=a.default.RendererGL.prototype.tessyVertexSize)x.push.apply(x,y(v.slice(j+5,j+9))),this.normal.apply(this,y(v.slice(j+9,j+12))),this.vertex.apply(this,y(v.slice(j,j+5)));this.geometryBuilder&&(f=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(S){return S.map(function(P){if(!f.has(P)){var L=_[P],D=h.immediateMode.geometry.vertices.findIndex(function(W){return L.x===W.x&&L.y===W.y&&L.z===W.z});if(D===-1){for(var k=1/0,I=0,A=0;A<h.immediateMode.geometry.vertices.length;A++){var N=h.immediateMode.geometry.vertices[A],U=L.x-N.x,F=L.y-N.y,N=L.z-N.z,U=U*U+F*F+N*N;U<k&&(k=U,I=A)}D=I}f.set(P,D)}return f.get(P)})})),this.immediateMode.geometry.vertexColors=x},a.default.RendererGL.prototype._drawImmediateFill=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,g=this.GL,f=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),v=!1,_=void 0;try{for(var x,j=this.immediateMode.buffers.fill[Symbol.iterator]();!(f=(x=j.next()).done);f=!0)x.value._prepareBuffer(this.immediateMode.geometry,h)}catch(M){v=!0,_=M}finally{try{f||j.return==null||j.return()}finally{if(v)throw _}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),m===1)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,m)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,m=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(m),!0),f=!1,v=void 0;try{for(var _,x=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(_=x.next()).done);g=!0)_.value._prepareBuffer(this.immediateMode.geometry,m)}catch(j){f=!0,v=j}finally{try{g||x.return==null||x.return()}finally{if(f)throw v}}m.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),m.unbindShader()},a.default.RendererGL);c.default=p},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(r,i,c){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function d(u){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(y=r("../core/main"))&&y.__esModule?y:{default:y},l=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(u){if(u&&u.__esModule)return u;if(u===null||d(u)!=="object"&&typeof u!="function")return{default:u};var p=b();if(p&&p.has(u))return p.get(u);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var f;Object.prototype.hasOwnProperty.call(u,h)&&((f=g?Object.getOwnPropertyDescriptor(u,h):null)&&(f.get||f.set)?Object.defineProperty(m,h,f):m[h]=u[h])}return m.default=u,p&&p.set(u,m),m}(r("../core/constants")));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.RendererGL.prototype.freeGeometry=function(u){u.gid?this._freeBuffers(u.gid):console.warn("The model you passed to freeGeometry does not have an id!")},a.default.RendererGL.prototype._initBufferDefaults=function(u){var p;return this._freeBuffers(u),1e3<Object.keys(this.retainedMode.geometry).length&&(p=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(p)),this.retainedMode.geometry[u]={}},a.default.RendererGL.prototype._freeBuffers=function(u){var p,h=this.retainedMode.geometry[u];function m(g){var f=!0,v=!1,_=void 0;try{for(var x,j=g[Symbol.iterator]();!(f=(x=j.next()).done);f=!0){var M=x.value;h[M.dst]&&(p.deleteBuffer(h[M.dst]),h[M.dst]=null)}}catch(S){v=!0,_=S}finally{try{f||j.return==null||j.return()}finally{if(v)throw _}}}h&&(delete this.retainedMode.geometry[u],p=this.GL,h.indexBuffer&&p.deleteBuffer(h.indexBuffer),m(this.retainedMode.buffers.stroke),m(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(v,p){var h,m,g,f=this.GL,v=this._initBufferDefaults(v),_=(v.model=p,v.indexBuffer);return p.faces.length?(_=_||(v.indexBuffer=f.createBuffer()),g=(m=(h=a.default.RendererGL.prototype._flatten(p.faces)).some(function(x){return 65535<x}))?Uint32Array:Uint16Array,this._bindBuffer(_,f.ELEMENT_ARRAY_BUFFER,h,g),v.indexBufferType=m?f.UNSIGNED_INT:f.UNSIGNED_SHORT,v.vertexCount=3*p.faces.length):(_&&(f.deleteBuffer(_),v.indexBuffer=null),v.vertexCount=p.vertices?p.vertices.length:0),v.lineVertexCount=p.lineVertices?p.lineVertices.length/3:0,v},a.default.RendererGL.prototype.drawBuffers=function(u){var p=this.GL,h=this.retainedMode.geometry[u];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[u].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var m=this._getRetainedFillShader(),g=(this._setFillUniforms(m),!0),f=!1,v=void 0;try{for(var _,x=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(_=x.next()).done);g=!0)_.value._prepareBuffer(h,m)}catch(L){f=!0,v=L}finally{try{g||x.return==null||x.return()}finally{if(f)throw v}}m.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(p.TRIANGLES,u),m.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var j=this._getRetainedStrokeShader(),M=(this._setStrokeUniforms(j),!0),f=!1,v=void 0;try{for(var S,P=this.retainedMode.buffers.stroke[Symbol.iterator]();!(M=(S=P.next()).done);M=!0)S.value._prepareBuffer(h,j)}catch(k){f=!0,v=k}finally{try{M||P.return==null||P.return()}finally{if(f)throw v}}j.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(p.TRIANGLES,u),j.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},a.default.RendererGL.prototype.drawBuffersScaled=function(u,p,h,m){var g=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,h,m),this.drawBuffers(u)}finally{this.uMVMatrix=g}},a.default.RendererGL.prototype._drawArrays=function(u,p){return this.GL.drawArrays(u,0,this.retainedMode.geometry[p].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(u,h){var h=this.retainedMode.geometry[h],m=this.GL;if(h.indexBuffer){if(this._pInst.webglVersion!==l.WEBGL2&&h.indexBufferType===m.UNSIGNED_INT&&!m.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");m.drawElements(m.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else m.drawArrays(u||m.TRIANGLES,0,h.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(u,p){var h=this.GL,m=this._getImmediatePointShader();this._setPointUniforms(m),this._bindBuffer(p,h.ARRAY_BUFFER,this._vToNArray(u),Float32Array,h.STATIC_DRAW),m.enableAttrib(m.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,u.length),m.unbindShader()};var y=a.default.RendererGL;c.default=y},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(A,i,c){function o(z){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(z)}function d(z){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(Y){return o(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":o(Y)})(z)}A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.concat"),A("core-js/modules/es.array.copy-within"),A("core-js/modules/es.array.every"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.flat"),A("core-js/modules/es.array.flat-map"),A("core-js/modules/es.array.from"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.array.map"),A("core-js/modules/es.array.slice"),A("core-js/modules/es.array.some"),A("core-js/modules/es.array.unscopables.flat"),A("core-js/modules/es.array.unscopables.flat-map"),A("core-js/modules/es.map"),A("core-js/modules/es.object.assign"),A("core-js/modules/es.object.get-own-property-descriptor"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.reflect.construct"),A("core-js/modules/es.reflect.get"),A("core-js/modules/es.regexp.to-string"),A("core-js/modules/es.set"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.float64-array"),A("core-js/modules/es.typed-array.int16-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint16-array"),A("core-js/modules/es.typed-array.uint32-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/es.weak-map"),A("core-js/modules/web.dom-collections.iterator"),A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.concat"),A("core-js/modules/es.array.copy-within"),A("core-js/modules/es.array.every"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.flat"),A("core-js/modules/es.array.flat-map"),A("core-js/modules/es.array.from"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.array.map"),A("core-js/modules/es.array.slice"),A("core-js/modules/es.array.some"),A("core-js/modules/es.array.unscopables.flat"),A("core-js/modules/es.array.unscopables.flat-map"),A("core-js/modules/es.map"),A("core-js/modules/es.object.assign"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.set"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.float64-array"),A("core-js/modules/es.typed-array.int16-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint16-array"),A("core-js/modules/es.typed-array.uint32-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.readPixelsWebGL=W,c.readPixelWebGL=G,c.default=void 0;var a=h(A("../core/main")),l=function(z){if(z&&z.__esModule)return z;if(z===null||d(z)!=="object"&&typeof z!="function")return{default:z};var Y=p();if(Y&&Y.has(z))return Y.get(z);var $,ie={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for($ in z){var R;Object.prototype.hasOwnProperty.call(z,$)&&((R=E?Object.getOwnPropertyDescriptor(z,$):null)&&(R.get||R.set)?Object.defineProperty(ie,$,R):ie[$]=z[$])}return ie.default=z,Y&&Y.set(z,ie),ie}(A("../core/constants")),b=h(A("./GeometryBuilder")),y=h(A("libtess")),u=(A("./p5.Shader"),A("./p5.Camera"),A("../core/p5.Renderer"),A("./p5.Matrix"),A("./p5.Framebuffer"),A("path"),A("./p5.Texture"));function p(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,p=function(){return z},z)}function h(z){return z&&z.__esModule?z:{default:z}}function m(z){return function(Y){if(Array.isArray(Y)){for(var $=0,ie=new Array(Y.length);$<Y.length;$++)ie[$]=Y[$];return ie}}(z)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(z,Y){for(var $=0;$<Y.length;$++){var ie=Y[$];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(z,ie.key,ie)}}function f(z,Y,$){return(f=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(B,E,R){var B=function(H,Z){for(;!Object.prototype.hasOwnProperty.call(H,Z)&&(H=j(H))!==null;);return H}(B,E);if(B)return(B=Object.getOwnPropertyDescriptor(B,E)).get?B.get.call(R):B.value})(z,Y,$||z)}function v(z,Y){return(v=Object.setPrototypeOf||function($,ie){return $.__proto__=ie,$})(z,Y)}function _(z){return function(){var Y,$,ie=j(z);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=j(this).constructor,Reflect.construct(ie,arguments,Y)):ie.apply(this,arguments),ie=this,!($=Y)||d($)!=="object"&&typeof $!="function"?x(ie):$}}function x(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function j(z){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(z)}function M(z,Y,$){Y in z?Object.defineProperty(z,Y,{value:$,enumerable:!0,configurable:!0,writable:!0}):z[Y]=$}function S(z,Y){I+="#define STROKE_CAP_".concat(z," ").concat(Y,`
`),D[l[z]]=Y}function P(z,Y){I+="#define STROKE_JOIN_".concat(z," ").concat(Y,`
`),k[l[z]]=Y}var L,D={},k={},I="",A=(S("ROUND",0),S("PROJECT",1),S("SQUARE",2),P("ROUND",0),P("MITER",1),P("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),F={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:A+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:A+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:I+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:I+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},N=F.sphereMappingFrag;for(L in F)F[L]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+F[L];M(A={},l.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),M(A,l.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),M(A,l.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),M(A,l.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),M(A,l.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),M(A,l.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),M(A,l.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),M(A,l.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var U=A;function W(z,Y,pe,ie,E,R,B,H,Z,te){var se=Y.getParameter(Y.FRAMEBUFFER_BINDING),pe=(Y.bindFramebuffer(Y.FRAMEBUFFER,pe),H===Y.RGBA?4:3),oe=R*B*pe,he=Z===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(z instanceof he&&z.length===oe||(z=new he(oe)),Y.readPixels(ie,te?te-E-B:E,R,B,H,Z,z),Y.bindFramebuffer(Y.FRAMEBUFFER,se),te)for(var de=Math.floor(B/2),J=new he(R*pe),ue=0;ue<de;ue++){var ye=ue*R*4,Ce=(B-ue-1)*R*4;J.set(z.subarray(ye,ye+4*R)),z.copyWithin(ye,Ce,Ce+4*R),z.set(J,Ce)}return z}function G(z,Z,$,ie,E,R,B){var H=z.getParameter(z.FRAMEBUFFER_BINDING),Z=(z.bindFramebuffer(z.FRAMEBUFFER,Z),E===z.RGBA?4:3),Z=new(R===z.UNSIGNED_BYTE?Uint8Array:Float32Array)(Z);return z.readPixels($,B?B-ie-1:ie,1,1,E,R,Z),z.bindFramebuffer(z.FRAMEBUFFER,H),Array.from(Z)}a.default.prototype.setAttributes=function(z,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var $=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[z]!==Y&&(this._glAttributes[z]=Y,$=!1)):z instanceof Object&&this._glAttributes!==z&&(this._glAttributes=z,$=!1),this._renderer.isP3D&&!$){if(!this._setupDone){for(var ie in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(ie))return void a.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},a.default.RendererGL=function(z){var Y=ie;if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(z&&z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),z&&v(Y,z);var $=_(ie);function ie(E,R,B,H){if(this instanceof ie)return(E=$.call(this,E,R,B))._setAttributeDefaults(R),E._initContext(),E.isP3D=!0,E.geometryBuilder=void 0,E.GL=E.drawingContext,E._pInst._setProperty("drawingContext",E.drawingContext),E._isErasing=!1,E._clipDepths=[],E._isClipApplied=!1,E._stencilTestOn=!1,E._enableLighting=!1,E.ambientLightColors=[],E.mixedAmbientLight=[],E.mixedSpecularColor=[],E.specularColors=[1,1,1],E.directionalLightDirections=[],E.directionalLightDiffuseColors=[],E.directionalLightSpecularColors=[],E.pointLightPositions=[],E.pointLightDiffuseColors=[],E.pointLightSpecularColors=[],E.spotLightPositions=[],E.spotLightDirections=[],E.spotLightDiffuseColors=[],E.spotLightSpecularColors=[],E.spotLightAngle=[],E.spotLightConc=[],E.activeImageLight=null,E.diffusedTextures=new Map,E.specularTextures=new Map,E.drawMode=l.FILL,E.curFillColor=E._cachedFillStyle=[1,1,1,1],E.curAmbientColor=E._cachedFillStyle=[1,1,1,1],E.curSpecularColor=E._cachedFillStyle=[0,0,0,0],E.curEmissiveColor=E._cachedFillStyle=[0,0,0,0],E.curStrokeColor=E._cachedStrokeStyle=[0,0,0,1],E.curBlendMode=l.BLEND,E.preEraseBlend=void 0,E._cachedBlendMode=void 0,E.webglVersion===l.WEBGL2?E.blendExt=E.GL:E.blendExt=E.GL.getExtension("EXT_blend_minmax"),E._isBlending=!1,E._hasSetAmbient=!1,E._useSpecularMaterial=!1,E._useEmissiveMaterial=!1,E._useNormalMaterial=!1,E._useShininess=1,E._useMetalness=0,E._useLineColor=!1,E._useVertexColor=!1,E.registerEnabled=new Set,E._tint=[255,255,255,255],E.constantAttenuation=1,E.linearAttenuation=0,E.quadraticAttenuation=0,E.uMVMatrix=new a.default.Matrix,E.uPMatrix=new a.default.Matrix,E.uNMatrix=new a.default.Matrix("mat3"),E.curMatrix=new a.default.Matrix("mat3"),E._currentNormal=new a.default.Vector(0,0,1),E._curCamera=new a.default.Camera(x(E)),E._curCamera._computeCameraDefaultSettings(),E._curCamera._setDefaultCamera(),E.filterCamera=new a.default.Camera(x(E)),E.filterCamera._computeCameraDefaultSettings(),E.filterCamera._setDefaultCamera(),E.prevTouches=[],E.zoomVelocity=0,E.rotateVelocity=new a.default.Vector(0,0),E.moveVelocity=new a.default.Vector(0,0),E.executeZoom=!1,E.executeRotateAndMove=!1,E.specularShader=void 0,E.sphereMapping=void 0,E.diffusedShader=void 0,E._defaultLightShader=void 0,E._defaultImmediateModeShader=void 0,E._defaultNormalShader=void 0,E._defaultColorShader=void 0,E._defaultPointShader=void 0,E.userFillShader=void 0,E.userStrokeShader=void 0,E.userPointShader=void 0,E.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(E)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(E)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(E)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(E))],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(E),E._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(E)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)]}},E.immediateMode={geometry:new a.default.Geometry,shapeMode:l.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(E),E._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(E)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)],stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(E)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(E)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(E)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(E))],point:E.GL.createBuffer()}},E.pointSize=5,E.curStrokeWeight=1,E.curStrokeCap=l.ROUND,E.curStrokeJoin=l.ROUND,E.textures=new Map,E.framebuffers=new Set,E.activeFramebuffers=[],E.filterShader=void 0,E.filterLayer=void 0,E.filterLayerTemp=void 0,E.defaultFilterShaders={},E.textureMode=l.IMAGE,E.textureWrapX=l.CLAMP,E.textureWrapY=l.CLAMP,E._tex=null,E._curveTightness=6,E._lookUpTableBezier=[],E._lookUpTableQuadratic=[],E._lutBezierDetail=0,E._lutQuadraticDetail=0,E.isProcessingVertices=!1,E._tessy=E._initTessy(),E.fontInfos={},E._curShader=void 0,E;throw new TypeError("Cannot call a class as a function")}return Y=ie,(z=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new b.default(this)}},{key:"endGeometry",value:function(){var E;if(this.geometryBuilder)return E=this.geometryBuilder.finish(),this.geometryBuilder=void 0,E;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(E){return this.beginGeometry(),E(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(E){var R={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};E._glAttributes===null?E._glAttributes=R:E._glAttributes=Object.assign(R,E._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?l.WEBGL2:l.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var E=this.drawingContext;E.enable(E.DEPTH_TEST),E.depthFunc(E.LEQUAL),E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var E=this.drawingContext;return E.getParameter(E.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(E,R){this._maxTextureSize||(this._maxTextureSize=this._getParam());var H=this._maxTextureSize,H=(a.default.prototype._maxAllowedPixelDimensions,Math.floor(H/this.pixelDensity())),B=Math.min(E,H),H=Math.min(R,H);return B===E&&H===R||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(B,", height: ").concat(H,".")),{adjustedWidth:B,adjustedHeight:H}}},{key:"_resetContext",value:function(E,R){var B,H=this.width,Z=this.height,se=this.canvas.id,te=this._pInst instanceof a.default.Graphics,se=(te?((B=this._pInst).canvas.parentNode.removeChild(B.canvas),B.canvas=document.createElement("canvas"),(B._pInst._userNode||document.body).appendChild(B.canvas),a.default.Element.call(B,B.canvas,B._pInst),B.width=H,B.height=Z):((B=this.canvas)&&B.parentNode.removeChild(B),(B=document.createElement("canvas")).id=se,(this._pInst._userNode||document.body).appendChild(B),this._pInst.canvas=B,this.canvas=B),new a.default.RendererGL(this._pInst.canvas,this._pInst,!te));this._pInst._setProperty("_renderer",se),se.resize(H,Z),se._applyDefaults(),te||this._pInst._elements.push(se),typeof R=="function"&&setTimeout(function(){R.apply(window._renderer,E)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var H=(H=this._pInst).color.apply(H,arguments),E=H.levels[0]/255,R=H.levels[1]/255,B=H.levels[2]/255,H=H.levels[3]/255;this.clear(E,R,B,H)}},{key:"fill",value:function(E,R,B,H){var Z=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Z._array,this.drawMode=l.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(E,R,B,H){var Z=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Z._array}},{key:"strokeCap",value:function(E){this.curStrokeCap=E}},{key:"strokeJoin",value:function(E){this.curStrokeJoin=E}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(E,R){E.width===R.width&&E.height===R.height||E.resize(R.width,R.height),E.pixelDensity()!==R.pixelDensity()&&E.pixelDensity(R.pixelDensity())}},{key:"filter",value:function(){var E,R,B=this,H=this.getFilterLayer(),Z=void 0,te=void 0,se=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(te=arguments.length<=0?void 0:arguments[0],M(E={},l.BLUR,3),M(E,l.POSTERIZE,4),M(E,l.THRESHOLD,.5),Z=te in(E=E)&&(arguments.length<=1?void 0:arguments[1])===void 0?E[te]:arguments.length<=1?void 0:arguments[1],te in this.defaultFilterShaders||(this.defaultFilterShaders[te]=new a.default.Shader(H._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,U[te])),this.filterShader=this.defaultFilterShaders[te]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),pe=(this.matchSize(H,se),H.draw(function(){return B._pInst.clear()}),[1/(se.width*se.pixelDensity()),1/(se.height*se.pixelDensity())]);te===l.BLUR?(R=this.getFilterLayerTemp(),this.matchSize(R,se),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(l.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",pe),this.filterShader.setUniform("canvasSize",[se.width,se.height]),this.filterShader.setUniform("radius",Math.max(1,Z)),R.draw(function(){B.filterShader.setUniform("direction",[1,0]),B.filterShader.setUniform("tex0",se),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),H.draw(function(){B.filterShader.setUniform("direction",[0,1]),B.filterShader.setUniform("tex0",R),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),this._pInst.pop()):H.draw(function(){B._pInst.noStroke(),B._pInst.blendMode(l.BLEND),B._pInst.shader(B.filterShader),B.filterShader.setUniform("tex0",se),B.filterShader.setUniform("texelSize",pe),B.filterShader.setUniform("canvasSize",[se.width,se.height]),B.filterShader.setUniform("filterParameter",Z),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(l.CORNER),this._pInst.blendMode(l.BLEND),se.filterCamera._resize(),this._pInst.setCamera(se.filterCamera),this._pInst.resetMatrix(),this._pInst.image(H,-se.width/2,-se.height/2,se.width,se.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(E){return E?this._pInst.pixelDensity(E):this._pInst.pixelDensity()}},{key:"blendMode",value:function(E){E===l.DARKEST||E===l.LIGHTEST||E===l.ADD||E===l.BLEND||E===l.SUBTRACT||E===l.SCREEN||E===l.EXCLUSION||E===l.REPLACE||E===l.MULTIPLY||E===l.REMOVE?this.curBlendMode=E:E!==l.BURN&&E!==l.OVERLAY&&E!==l.HARD_LIGHT&&E!==l.SOFT_LIGHT&&E!==l.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(E,R){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(l.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,E/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,R/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(f(j(ie.prototype),"beginClip",this).call(this,E),this.drawTarget()._isClipApplied=!0,this.GL);E.clearStencil(0),E.clear(E.STENCIL_BUFFER_BIT),E.enable(E.STENCIL_TEST),this._stencilTestOn=!0,E.stencilFunc(E.ALWAYS,1,255),E.stencilOp(E.KEEP,E.KEEP,E.REPLACE),E.disable(E.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var E=this.GL;E.stencilOp(E.KEEP,E.KEEP,E.KEEP),E.stencilFunc(this._clipInvert?E.EQUAL:E.NOTEQUAL,0,255),E.enable(E.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),f(j(ie.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(E){this.curStrokeWeight!==E&&(this.pointSize=E,this.curStrokeWeight=E)}},{key:"_getPixel",value:function(E,R){var B=this.GL;return G(B,null,E,R,B.RGBA,B.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var E,R,B=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(E=this._pInst._pixelDensity,R=this.GL,B._setProperty("pixels",W(B.pixels,R,null,0,0,this.width*E,this.height*E,R.RGBA,R.UNSIGNED_BYTE,this.height*E)))}},{key:"updatePixels",value:function(){var E=this._getTempFramebuffer();E.pixels=this._pixelsState.pixels,E.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(l.CENTER),this._pInst.image(E,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:l.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:l.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(E){return this.retainedMode.geometry[E]!==void 0}},{key:"viewport",value:function(E,R){this._viewport=[0,0,E,R],this.GL.viewport(0,0,E,R)}},{key:"resize",value:function(Z,H){a.default.Renderer.prototype.resize.call(this,Z,H),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Z=this._pixelsState,B=(Z.pixels!==void 0&&Z._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),H=!1,Z=void 0;try{for(var te,se=this.framebuffers[Symbol.iterator]();!(B=(te=se.next()).done);B=!0)te.value._canvasSizeChanged()}catch(pe){H=!0,Z=pe}finally{try{B||se.return==null||se.return()}finally{if(H)throw Z}}}},{key:"clear",value:function(){var E=(arguments.length<=0?void 0:arguments[0])||0,R=(arguments.length<=1?void 0:arguments[1])||0,B=(arguments.length<=2?void 0:arguments[2])||0,H=(arguments.length<=3?void 0:arguments[3])||0,Z=this.activeFramebuffer();Z&&Z.format===l.UNSIGNED_BYTE&&!Z.antialias&&H===0&&(H=1e-10),this.GL.clearColor(E*H,R*H,B*H,H),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(E,R,B,H,Z,te){arguments.length===16?a.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([E,R,0,0,B,H,0,0,0,0,1,0,Z,te,0,1])}},{key:"translate",value:function(E,R,B){return E instanceof a.default.Vector&&(B=E.z,R=E.y,E=E.x),this.uMVMatrix.translate([E,R,B]),this}},{key:"scale",value:function(E,R,B){return this.uMVMatrix.scale(E,R,B),this}},{key:"rotate",value:function(E,R){return R===void 0?this.rotateZ(E):(a.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(E){return this.rotate(E,1,0,0),this}},{key:"rotateY",value:function(E){return this.rotate(E,0,1,0),this}},{key:"rotateZ",value:function(E){return this.rotate(E,0,0,1),this}},{key:"push",value:function(){var E=a.default.Renderer.prototype.push.apply(this),R=E.properties;return R.uMVMatrix=this.uMVMatrix.copy(),R.uPMatrix=this.uPMatrix.copy(),R._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),R.ambientLightColors=this.ambientLightColors.slice(),R.specularColors=this.specularColors.slice(),R.directionalLightDirections=this.directionalLightDirections.slice(),R.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),R.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),R.pointLightPositions=this.pointLightPositions.slice(),R.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),R.pointLightSpecularColors=this.pointLightSpecularColors.slice(),R.spotLightPositions=this.spotLightPositions.slice(),R.spotLightDirections=this.spotLightDirections.slice(),R.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),R.spotLightSpecularColors=this.spotLightSpecularColors.slice(),R.spotLightAngle=this.spotLightAngle.slice(),R.spotLightConc=this.spotLightConc.slice(),R.userFillShader=this.userFillShader,R.userStrokeShader=this.userStrokeShader,R.userPointShader=this.userPointShader,R.pointSize=this.pointSize,R.curStrokeWeight=this.curStrokeWeight,R.curStrokeColor=this.curStrokeColor,R.curFillColor=this.curFillColor,R.curAmbientColor=this.curAmbientColor,R.curSpecularColor=this.curSpecularColor,R.curEmissiveColor=this.curEmissiveColor,R._hasSetAmbient=this._hasSetAmbient,R._useSpecularMaterial=this._useSpecularMaterial,R._useEmissiveMaterial=this._useEmissiveMaterial,R._useShininess=this._useShininess,R._useMetalness=this._useMetalness,R.constantAttenuation=this.constantAttenuation,R.linearAttenuation=this.linearAttenuation,R.quadraticAttenuation=this.quadraticAttenuation,R._enableLighting=this._enableLighting,R._useNormalMaterial=this._useNormalMaterial,R._tex=this._tex,R.drawMode=this.drawMode,R._currentNormal=this._currentNormal,R.curBlendMode=this.curBlendMode,R.activeImageLight=this.activeImageLight,E}},{key:"pop",value:function(){var E;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var R=arguments.length,B=new Array(R),H=0;H<R;H++)B[H]=arguments[H];(E=f(j(ie.prototype),"pop",this)).call.apply(E,[this].concat(B)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var E=this.drawTarget();E._isClipApplied!==this._stencilTestOn&&(E._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var E=this.userStrokeShader;return E&&E.isStrokeShader()?E:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(E){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(N)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",E),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var E=this.userFillShader;if(this._useNormalMaterial&&(!E||!E.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!E||!E.isLightShader())return this._getLightShader()}else if(this._tex){if(!E||!E.isTextureShader())return this._getLightShader()}else if(!E)return this._getImmediateModeShader();return E}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var E=this.userFillShader;if(this._enableLighting){if(!E||!E.isLightShader())return this._getLightShader()}else if(this._tex){if(!E||!E.isTextureShader())return this._getLightShader()}else if(!E)return this._getColorShader();return E}},{key:"_getImmediatePointShader",value:function(){var E=this.userPointShader;return E&&E.isPointShader()?E:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+F.phongFrag):this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+F.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===l.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(E,R){var B="";return this.webglVersion===l.WEBGL2&&(B+=`#version 300 es
#define WEBGL2
`),E==="vert"?B+=`#define VERTEX_SHADER
`:E==="frag"&&(B+=`#define FRAGMENT_SHADER
`),R&&(B+="precision ".concat(R,` float;
`)),B}},{key:"_getEmptyTexture",value:function(){var E;return this._emptyTexture||((E=new a.default.Image(1,1)).set(0,0,255),this._emptyTexture=new a.default.Texture(this,E)),this._emptyTexture}},{key:"getTexture",value:function(E){E instanceof a.default.Framebuffer&&(E=E.color);var R=this.textures.get(E);return R||(R=new a.default.Texture(this,E),this.textures.set(E,R),R)}},{key:"getDiffusedTexture",value:function(E){var R,B,H=this;return this.diffusedTextures.get(E)!=null?this.diffusedTextures.get(E):(R=Math.floor(E.height/E.width*200),B=this._pInst.createFramebuffer({width:200,height:R,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(F.imageLightVert,F.imageLightDiffusedFrag)),B.draw(function(){H._pInst.shader(H.diffusedShader),H.diffusedShader.setUniform("environmentMap",E),H._pInst.noStroke(),H._pInst.rectMode(l.CENTER),H._pInst.noLights(),H._pInst.rect(0,0,200,R)}),this.diffusedTextures.set(E,B),B)}},{key:"getSpecularTexture",value:function(E){var R=this;if(this.specularTextures.get(E)!=null)return this.specularTextures.get(E);for(var B,H=[],Z=this._pInst.createFramebuffer({width:512,height:512,density:1}),te=Math.log(512)/Math.log(2),se=(this.specularShader||(this.specularShader=this._pInst.createShader(F.imageLightVert,F.imageLightSpecularFrag)),512);1<=se;se/=2)(function(pe){Z.resize(pe,pe);var oe=1-Math.log(pe)/Math.log(2)/te;Z.draw(function(){R._pInst.shader(R.specularShader),R._pInst.clear(),R.specularShader.setUniform("environmentMap",E),R.specularShader.setUniform("roughness",oe),R._pInst.noStroke(),R._pInst.noLights(),R._pInst.plane(pe,pe)}),H.push(Z.get().drawingContext.getImageData(0,0,pe,pe))})(se);return Z.remove(),B=new u.MipmapTexture(this,H,{}),this.specularTextures.set(E,B),B}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(E){return new a.default.Framebuffer(this,E)}},{key:"_setStrokeUniforms",value:function(E){E.bindShader(),E.setUniform("uUseLineColor",this._useLineColor),E.setUniform("uMaterialColor",this.curStrokeColor),E.setUniform("uStrokeWeight",this.curStrokeWeight),E.setUniform("uStrokeCap",D[this.curStrokeCap]),E.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(E){var R=this,B=(E.bindShader(),this.mixedSpecularColor=m(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(H,Z){return R.curFillColor[Z]*R._useMetalness+H*(1-R._useMetalness)})),E.setUniform("uUseVertexColor",this._useVertexColor),E.setUniform("uMaterialColor",this.curFillColor),E.setUniform("isTexture",!!this._tex),this._tex&&E.setUniform("uSampler",this._tex),E.setUniform("uTint",this._tint),E.setUniform("uHasSetAmbient",this._hasSetAmbient),E.setUniform("uAmbientMatColor",this.curAmbientColor),E.setUniform("uSpecularMatColor",this.mixedSpecularColor),E.setUniform("uEmissiveMatColor",this.curEmissiveColor),E.setUniform("uSpecular",this._useSpecularMaterial),E.setUniform("uEmissive",this._useEmissiveMaterial),E.setUniform("uShininess",this._useShininess),E.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(E),E.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),B=(E.setUniform("uPointLightCount",B),E.setUniform("uPointLightLocation",this.pointLightPositions),E.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),E.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),B=(E.setUniform("uDirectionalLightCount",B),E.setUniform("uLightingDirection",this.directionalLightDirections),E.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),E.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),B=(this.mixedAmbientLight=m(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(H){return H-=R._useMetalness,Math.max(0,H)})),E.setUniform("uAmbientLightCount",B),E.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);E.setUniform("uSpotLightCount",B),E.setUniform("uSpotLightAngle",this.spotLightAngle),E.setUniform("uSpotLightConc",this.spotLightConc),E.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),E.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),E.setUniform("uSpotLightLocation",this.spotLightPositions),E.setUniform("uSpotLightDirection",this.spotLightDirections),E.setUniform("uConstantAttenuation",this.constantAttenuation),E.setUniform("uLinearAttenuation",this.linearAttenuation),E.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),E.bindTextures()}},{key:"_setImageLightUniforms",value:function(E){var R,B;E.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(R=this.getDiffusedTexture(this.activeImageLight),E.setUniform("environmentMapDiffused",R),R=this.getSpecularTexture(this.activeImageLight),B=20/this._useShininess,E.setUniform("levelOfDetail",8*B),E.setUniform("environmentMapSpecular",R))}},{key:"_setPointUniforms",value:function(E){E.bindShader(),E.setUniform("uMaterialColor",this.curStrokeColor),E.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(E,R,B,H,Z){R=R||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(R,E),B!==void 0&&((E=B)instanceof a.default.DataArray?E=B.dataArray():E instanceof(H||Float32Array)||(E=new(H||Float32Array)(E)),this.GL.bufferData(R,E,Z||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(E,R){return E.length===R.length&&E.every(function(B,H){return B===R[H]})}},{key:"_isTypedArray",value:function(E){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(R){return E instanceof R})}},{key:"_flatten",value:function(E){return E.flat()}},{key:"_vToNArray",value:function(E){return E.flatMap(function(R){return[R.x,R.y,R.z]})}},{key:"_bezierCoefficients",value:function(E){var R=E*E,B=1-E,H=B*B;return[H*B,3*H*E,3*B*R,R*E]}},{key:"_quadraticCoefficients",value:function(E){var R=1-E;return[R*R,2*R*E,E*E]}},{key:"_bezierToCatmull",value:function(E){return[E[1],E[1]+(E[2]-E[0])/this._curveTightness,E[2]-(E[3]-E[1])/this._curveTightness,E[2]]}},{key:"_initTessy",value:function(){var E=new y.default.GluTesselator;return E.gluTessCallback(y.default.gluEnum.GLU_TESS_VERTEX_DATA,function(R,B){var H=!0,Z=!1,te=void 0;try{for(var se,pe=R[Symbol.iterator]();!(H=(se=pe.next()).done);H=!0){var oe=se.value;B.push(oe)}}catch(he){Z=!0,te=he}finally{try{H||pe.return==null||pe.return()}finally{if(Z)throw te}}}),E.gluTessCallback(y.default.gluEnum.GLU_TESS_BEGIN,function(R){R!==y.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(R))}),E.gluTessCallback(y.default.gluEnum.GLU_TESS_ERROR,function(R){console.log("error callback"),console.log("error number: ".concat(R))}),E.gluTessCallback(y.default.gluEnum.GLU_TESS_COMBINE,function(R,B,H){for(var Z=new Array(a.default.RendererGL.prototype.tessyVertexSize).fill(0),te=0;te<H.length;te++)for(var se=0;se<Z.length;se++)H[te]!==0&&B[te]&&(Z[se]+=B[te][se]*H[te]);return Z}),E.gluTessCallback(y.default.gluEnum.GLU_TESS_EDGE_FLAG,function(R){}),E.gluTessProperty(y.default.gluEnum.GLU_TESS_WINDING_RULE,y.default.windingRule.GLU_TESS_WINDING_NONZERO),E}},{key:"_triangulate",value:function(E){var R=E[0]?E[0][2]:void 0,B=!0,H=!0,oe=!1,de=void 0;try{for(var Z,te=E[Symbol.iterator]();!(H=(Z=te.next()).done);H=!0)for(var se=Z.value,pe=0;pe<se.length;pe+=a.default.RendererGL.prototype.tessyVertexSize)if(se[pe+2]!==R){B=!1;break}}catch(Ee){oe=!0,de=Ee}finally{try{H||te.return==null||te.return()}finally{if(oe)throw de}}B?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var oe=[],he=(this._tessy.gluTessBeginPolygon(oe),!0),de=!1,J=void 0;try{for(var ue,ye=E[Symbol.iterator]();!(he=(ue=ye.next()).done);he=!0){var Ce=ue.value;this._tessy.gluTessBeginContour();for(var ge=0;ge<Ce.length;ge+=a.default.RendererGL.prototype.tessyVertexSize){var _e=Ce.slice(ge,ge+a.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(_e,_e)}this._tessy.gluTessEndContour()}}catch(Ee){de=!0,J=Ee}finally{try{he||ye.return==null||ye.return()}finally{if(de)throw J}}return this._tessy.gluTessEndPolygon(),oe}}])&&g(Y.prototype,z),ie}(a.default.Renderer),a.default.prototype._assert3d=function(z){if(!this._renderer.isP3D)throw new Error("".concat(z,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype.tessyVertexSize=12,A=a.default.RendererGL,c.default=A},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(r,i,c){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(a,l){for(var b=0;b<l.length;b++){var y=l[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(a,y.key,y)}}o.default.Shader=function(){function a(y,u,p){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=y,this._vertSrc=u,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var l,b;return l=a,(b=[{key:"init",value:function(){if(this._glProgram===0){var y=this._renderer.GL;if(this._vertShader=y.createShader(y.VERTEX_SHADER),y.shaderSource(this._vertShader,this._vertSrc),y.compileShader(this._vertShader),!y.getShaderParameter(this._vertShader,y.COMPILE_STATUS))return o.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(y.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=y.createShader(y.FRAGMENT_SHADER),y.shaderSource(this._fragShader,this._fragSrc),y.compileShader(this._fragShader),!y.getShaderParameter(this._fragShader,y.COMPILE_STATUS))return o.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(y.getShaderInfoLog(this._fragShader))),null;this._glProgram=y.createProgram(),y.attachShader(this._glProgram,this._vertShader),y.attachShader(this._glProgram,this._fragShader),y.linkProgram(this._glProgram),y.getProgramParameter(this._glProgram,y.LINK_STATUS)||o.default._friendlyError("Snap! Error linking shader program: ".concat(y.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(y){var u=new o.default.Shader(y._renderer,this._vertSrc,this._fragSrc);return u.ensureCompiledOnContext(y),u}},{key:"ensureCompiledOnContext",value:function(y){if(this._glProgram!==0&&this._renderer!==y._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=y._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var y=this._renderer.GL,u=y.getProgramParameter(this._glProgram,y.ACTIVE_ATTRIBUTES),p=0;p<u;++p){var h=y.getActiveAttrib(this._glProgram,p),m=h.name,g=y.getAttribLocation(this._glProgram,m),f={};f.name=m,f.location=g,f.index=p,f.type=h.type,f.size=h.size,this.attributes[m]=f}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var y=this._renderer.GL,u=y.getProgramParameter(this._glProgram,y.ACTIVE_UNIFORMS),p=0,h=0;h<u;++h){var m=y.getActiveUniform(this._glProgram,h),g={},f=(g.location=y.getUniformLocation(this._glProgram,m.name),g.size=m.size,m.name);1<m.size&&(f=f.substring(0,f.indexOf("[0]"))),g.name=f,g.type=m.type,g._cachedData=void 0,g.type===y.SAMPLER_2D&&(g.samplerIndex=p,p++,this.samplers.push(g)),g.isArray=1<m.size||g.type===y.FLOAT_MAT3||g.type===y.FLOAT_MAT4||g.type===y.FLOAT_VEC2||g.type===y.FLOAT_VEC3||g.type===y.FLOAT_VEC4||g.type===y.INT_VEC2||g.type===y.INT_VEC4||g.type===y.INT_VEC3,this.uniforms[f]=g}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var y=this._renderer.GL,u=!0,p=!1,h=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(u=(m=g.next()).done);u=!0){var f=m.value,v=f.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),y.activeTexture(y.TEXTURE0+f.samplerIndex),v.bindTexture(),v.update(),y.uniform1i(f.location,f.samplerIndex)}}catch(_){p=!0,h=_}finally{try{u||g.return==null||g.return()}finally{if(p)throw h}}}},{key:"updateTextures",value:function(){var y=!0,u=!1,p=void 0;try{for(var h,m=this.samplers[Symbol.iterator]();!(y=(h=m.next()).done);y=!0){var g=h.value.texture;g&&g.update()}}catch(f){u=!0,p=f}finally{try{y||m.return==null||m.return()}finally{if(u)throw p}}}},{key:"unbindTextures",value:function(){var y=!0,u=!1,p=void 0;try{for(var h,m=this.samplers[Symbol.iterator]();!(y=(h=m.next()).done);y=!0){var g=h.value;this.setUniform(g.name,this._renderer._getEmptyTexture())}}catch(f){u=!0,p=f}finally{try{y||m.return==null||m.return()}finally{if(u)throw p}}}},{key:"_setMatrixUniforms",value:function(){var y=this._renderer._curCamera.cameraMatrix,u=this._renderer.uPMatrix,p=this._renderer.uMVMatrix,h=p.copy();h.mult(u),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",y.mat4),this.setUniform("uProjectionMatrix",u.mat4),this.setUniform("uModelViewMatrix",p.mat4),this.setUniform("uModelViewProjectionMatrix",h.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var y=this._renderer.GL;return this._renderer._curShader!==this&&(y.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(y,u){var p=this.uniforms[y];if(p){var h=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,u))return;p._cachedData=u.slice(0)}else{if(p._cachedData&&p._cachedData===u)return;Array.isArray(u)?p._cachedData=u.slice(0):p._cachedData=u}var m=p.location;switch(this.useProgram(),p.type){case h.BOOL:u===!0?h.uniform1i(m,1):h.uniform1i(m,0);break;case h.INT:1<p.size?u.length&&h.uniform1iv(m,u):h.uniform1i(m,u);break;case h.FLOAT:1<p.size?u.length&&h.uniform1fv(m,u):h.uniform1f(m,u);break;case h.FLOAT_MAT3:h.uniformMatrix3fv(m,!1,u);break;case h.FLOAT_MAT4:h.uniformMatrix4fv(m,!1,u);break;case h.FLOAT_VEC2:1<p.size?u.length&&h.uniform2fv(m,u):h.uniform2f(m,u[0],u[1]);break;case h.FLOAT_VEC3:1<p.size?u.length&&h.uniform3fv(m,u):h.uniform3f(m,u[0],u[1],u[2]);break;case h.FLOAT_VEC4:1<p.size?u.length&&h.uniform4fv(m,u):h.uniform4f(m,u[0],u[1],u[2],u[3]);break;case h.INT_VEC2:1<p.size?u.length&&h.uniform2iv(m,u):h.uniform2i(m,u[0],u[1]);break;case h.INT_VEC3:1<p.size?u.length&&h.uniform3iv(m,u):h.uniform3i(m,u[0],u[1],u[2]);break;case h.INT_VEC4:1<p.size?u.length&&h.uniform4iv(m,u):h.uniform4i(m,u[0],u[1],u[2],u[3]);break;case h.SAMPLER_2D:h.activeTexture(h.TEXTURE0+p.samplerIndex),p.texture=u instanceof o.default.Texture?u:this._renderer.getTexture(u),h.uniform1i(m,p.samplerIndex),p.texture.src.gifProperties&&p.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(y){return y!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(y,u,p,h,m,g){var f;return y&&(y=y.location)!==-1&&(f=this._renderer.GL,this._renderer.registerEnabled.has(y)||(f.enableVertexAttribArray(y),this._renderer.registerEnabled.add(y)),this._renderer.GL.vertexAttribPointer(y,u,p||f.FLOAT,h||!1,m||0,g||0)),this}},{key:"disableRemainingAttributes",value:function(){var y=this,u=!0,p=!1,h=void 0;try{for(var m,g=this._renderer.registerEnabled.values()[Symbol.iterator]();!(u=(m=g.next()).done);u=!0)(function(){var f=m.value;Object.keys(y.attributes).some(function(v){return y.attributes[v].location===f})||(y._renderer.GL.disableVertexAttribArray(f),y._renderer.registerEnabled.delete(f))})()}catch(f){p=!0,h=f}finally{try{u||g.return==null||g.return()}finally{if(p)throw h}}}}])&&d(l.prototype,b),a}(),r=o.default.Shader,c.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(r,i,c){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function d(_){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.checkWebGLCapabilities=v,c.default=c.MipmapTexture=void 0;var a=(f=r("../core/main"))&&f.__esModule?f:{default:f},l=function(_){if(_&&_.__esModule)return _;if(_===null||d(_)!=="object"&&typeof _!="function")return{default:_};var x=b();if(x&&x.has(_))return x.get(_);var j,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in _){var P;Object.prototype.hasOwnProperty.call(_,j)&&((P=S?Object.getOwnPropertyDescriptor(_,j):null)&&(P.get||P.set)?Object.defineProperty(M,j,P):M[j]=_[j])}return M.default=_,x&&x.set(_,M),M}(r("../core/constants"));function b(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,b=function(){return _},_)}function y(_,x){return(y=Object.setPrototypeOf||function(j,M){return j.__proto__=M,j})(_,x)}function u(_){return function(){var x,j=p(_),j=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=p(this).constructor,Reflect.construct(j,arguments,x)):j.apply(this,arguments),this);if(!x||d(x)!=="object"&&typeof x!="function"){if(j!==void 0)return j;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function p(_){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}function h(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function m(_,x){for(var j=0;j<x.length;j++){var M=x[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function g(_,x,j){x&&m(_.prototype,x)}a.default.Texture=function(){function _(L,j,P){h(this,_),this._renderer=L;var S=this._renderer.GL,P=(P=P||{},this.src=j,this.glTex=void 0,this.glTarget=S.TEXTURE_2D,this.glFormat=P.format||S.RGBA,this.mipmaps=!1,this.glMinFilter=P.minFilter||S.LINEAR,this.glMagFilter=P.magFilter||S.LINEAR,this.glWrapS=P.wrapS||S.CLAMP_TO_EDGE,this.glWrapT=P.wrapT||S.CLAMP_TO_EDGE,this.glDataType=P.dataType||S.UNSIGNED_BYTE,v(L)),L=(this.glFormat!==S.HALF_FLOAT||P.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=S.FLOAT),this.glFormat!==S.HALF_FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||P.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.glFormat!==S.FLOAT||P.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=S.UNSIGNED_BYTE),this.glFormat!==S.FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||P.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.isSrcMediaElement=a.default.MediaElement!==void 0&&j instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&j instanceof a.default.Element&&!(j instanceof a.default.Graphics)&&!(j instanceof a.default.Renderer),this.isSrcP5Image=j instanceof a.default.Image,this.isSrcP5Graphics=j instanceof a.default.Graphics,this.isSrcP5Renderer=j instanceof a.default.Renderer,this.isImageData=typeof ImageData<"u"&&j instanceof ImageData,this.isFramebufferTexture=j instanceof a.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=L.width,this.height=L.height,this.init(L),this}return g(_,[{key:"_getTextureDataFromSource",value:function(){var x;return this.isFramebufferTexture?x=this.src.rawTexture():this.isSrcP5Image?x=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?x=this.src.elt:this.isImageData&&(x=this.src),x}},{key:"init",value:function(x){var j,M=this._renderer.GL;this.isFramebufferTexture||(this.glTex=M.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,this.glMagFilter),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(j=new Uint8Array([1,1,1,1]),M.texImage2D(this.glTarget,0,M.RGBA,1,1,0,this.glFormat,this.glDataType,j)):M.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x))}},{key:"update",value:function(){var x,j,M,S=this.src;return S.width!==0&&S.height!==0&&!this.isFramebufferTexture&&(x=this._getTextureDataFromSource(),j=!1,M=this._renderer.GL,x.width!==this.width||x.height!==this.height?(j=!0,this.width=x.width||S.width,this.height=x.height||S.height,this.isSrcP5Image?S.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&S.setModified(!0)):this.isSrcP5Image?S.isModified()&&S.setModified(!(j=!0)):this.isSrcMediaElement?S.isModified()?S.setModified(!(j=!0)):S.loadedmetadata&&this._videoPrevUpdateTime!==S.time()&&(this._videoPrevUpdateTime=S.time(),j=!0):this.isImageData?S._dirty&&(j=!(S._dirty=!1)):j=!0,j&&(this.bindTexture(),M.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x)),j)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(x,j){var M=this._renderer.GL;this.glMinFilter=this.glFilter(x),this.glMagFilter=this.glFilter(j),this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,this.glMinFilter),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(x){var j=this._renderer.GL;return x===l.NEAREST?j.NEAREST:j.LINEAR}},{key:"setWrapMode",value:function(x,j){function M(D){return(D&D-1)==0}var S=this._renderer.GL,L=this._getTextureDataFromSource(),L=L.naturalWidth&&L.naturalHeight?(P=L.naturalWidth,L.naturalHeight):(P=this.width,this.height),P=M(P),L=M(L);x===l.REPEAT?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapS=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):x===l.MIRROR?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapS=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):this.glWrapS=S.CLAMP_TO_EDGE,j===l.REPEAT?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapT=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):j===l.MIRROR?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapT=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):this.glWrapT=S.CLAMP_TO_EDGE,this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.glWrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),_}();var f=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&y(x,_);var j=u(M);function M(S,P,L){return h(this,M),P=(S=j.call(this,S,P,L))._renderer.GL,S.glMinFilter===P.LINEAR&&(S.glMinFilter=P.LINEAR_MIPMAP_LINEAR),S}return g(M,[{key:"glFilter",value:function(S){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(S){var P=this._renderer.GL;this.glTex=P.createTexture(),this.bindTexture();for(var L=0;L<S.length;L++)P.texImage2D(this.glTarget,L,this.glFormat,this.glFormat,this.glDataType,S[L]);this.glMinFilter=P.LINEAR_MIPMAP_LINEAR,P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),M}(a.default.Texture);function v(S){var x=S.GL,S=S.webglVersion,j=S===l.WEBGL2?x.getExtension("EXT_color_buffer_float")&&x.getExtension("EXT_float_blend"):x.getExtension("OES_texture_float"),M=j&&x.getExtension("OES_texture_float_linear"),S=S===l.WEBGL2?x.getExtension("EXT_color_buffer_float"):x.getExtension("OES_texture_half_float");return{float:j,floatLinear:M,halfFloat:S,halfFloatLinear:S&&x.getExtension("OES_texture_half_float_linear")}}c.MipmapTexture=f,r=a.default.Texture,c.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(r,i,c){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function d(_){return(d=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var a,l=(a=r("../core/main"))&&a.__esModule?a:{default:a},b=function(_){if(_&&_.__esModule)return _;if(_===null||d(_)!=="object"&&typeof _!="function")return{default:_};var x=y();if(x&&x.has(_))return x.get(_);var j,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in _){var P;Object.prototype.hasOwnProperty.call(_,j)&&((P=S?Object.getOwnPropertyDescriptor(_,j):null)&&(P.get||P.set)?Object.defineProperty(M,j,P):M[j]=_[j])}return M.default=_,x&&x.set(_,M),M}(r("../core/constants"));function y(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,y=function(){return _},_)}function u(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function p(_,x){for(var j=0;j<x.length;j++){var M=x[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function h(_,x,j){x&&p(_.prototype,x)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),l.default.RendererGL.prototype._applyTextProperties=function(){},l.default.RendererGL.prototype.textWidth=function(_){return this._isOpenType()?this._textFont._textWidth(_,this._textSize):0};var m=function(){function _(x,j){u(this,_),this.width=x,this.height=j,this.infos=[]}return h(_,[{key:"findImage",value:function(x){var j,M,S=this.width*this.height;if(S<x)throw new Error("font is too complex to render in 3D");for(var P=this.infos.length-1;0<=P;--P){var L=this.infos[P];if(L.index+x<S){M=(j=L).imageData;break}}if(!j){try{M=new ImageData(this.width,this.height)}catch{var D=document.getElementsByTagName("canvas")[0],k=!D,I=(D||((D=document.createElement("canvas")).style.display="none",document.body.appendChild(D)),D.getContext("2d"));I&&(M=I.createImageData(this.width,this.height)),k&&document.body.removeChild(D)}this.infos.push(j={index:0,imageData:M})}return I=j.index,j.index+=x,M._dirty=!0,{imageData:M,index:I}}}]),_}();function g(L,x,j,M,S){var P=L.imageData.data,L=4*L.index++;P[L++]=x,P[L++]=j,P[L++]=M,P[+L]=S}var f=Math.sqrt(3),v=function(){function _(x){u(this,_),this.font=x,this.strokeImageInfos=new m(64,64),this.colDimImageInfos=new m(64,64),this.rowDimImageInfos=new m(64,64),this.colCellImageInfos=new m(64,64),this.rowCellImageInfos=new m(64,64),this.glyphInfos={}}return h(_,[{key:"getGlyphInfo",value:function(x){var j=this.glyphInfos[x.index];if(!j){var M=x.getBoundingBox(),S=M.x1,P=M.y1,L=M.x2-S,D=M.y2-P,k=x.path.commands;if(L==0||D==0||!k.length)return this.glyphInfos[x.index]={};for(var I=[],A=[],F=[],N=8;0<=N;--N)F.push([]);for(N=8;0<=N;--N)A.push([]);var U,W,G,z,Y=function(){function ze(qe,Xe,We,ce){u(this,ze),this.p0=qe,this.c0=Xe,this.c1=We,this.p1=ce}return h(ze,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return l.default.Vector.sub(l.default.Vector.sub(this.p1,this.p0),l.default.Vector.mult(l.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ae){var Xe=l.default.Vector.lerp(this.p0,this.c0,Ae),ce=l.default.Vector.lerp(this.c0,this.c1,Ae),We=l.default.Vector.lerp(Xe,ce,Ae),ce=(this.c1=l.default.Vector.lerp(this.c1,this.p1,Ae),this.c0=l.default.Vector.lerp(ce,this.c1,Ae),l.default.Vector.lerp(We,this.c0,Ae)),Ae=new ze(this.p0,Xe,We,ce);return this.p0=ce,Ae}},{key:"splitInflections",value:function(){var qe=l.default.Vector.sub(this.c0,this.p0),Xe=l.default.Vector.sub(l.default.Vector.sub(this.c1,this.c0),qe),We=l.default.Vector.sub(l.default.Vector.sub(l.default.Vector.sub(this.p1,this.c1),qe),l.default.Vector.mult(Xe,2)),ce=[],Ae=Xe.x*We.y-Xe.y*We.x;return Ae!==0&&0<=(qe=(We=qe.x*We.y-qe.y*We.x)*We-4*Ae*(qe.x*Xe.y-qe.y*Xe.x))&&(Ae<0&&(Ae=-Ae,We=-We),qe=(-We+(Xe=Math.sqrt(qe)))/(2*Ae),0<(We=(-We-Xe)/(2*Ae))&&We<1&&(ce.push(this.split(We)),qe=1-(1-qe)/(1-We)),0<qe&&qe<1&&ce.push(this.split(qe))),ce.push(this),ce}}]),ze}(),$=!0,ie=!1,E=void 0;try{for(var R,B=k[Symbol.iterator]();!($=(R=B.next()).done);$=!0){var H=R.value,Z=(H.x-S)/L,te=(H.y-P)/D;if(!Te(U,W,Z,te)){switch(H.type){case"M":G=Z,z=te;break;case"L":Ie(U,W,Z,te);break;case"Q":var se=(H.x1-S)/L,pe=(H.y1-P)/D;_e([U,Z,se],[W,te,pe],{x:U,y:W,cx:se,cy:pe});break;case"Z":Te(U,W,G,z)?I.push({x:U,y:W}):(Ie(U,W,G,z),I.push({x:G,y:z}));break;case"C":for(var oe=function(re,je,Le,We,ce,Ae,xe,Q){var re=new Y(new l.default.Vector(re,je),new l.default.Vector(Le,We),new l.default.Vector(ce,Ae),new l.default.Vector(xe,Q)).splitInflections(),K=[],ne=30/f,ve=!0,je=!1,Le=void 0;try{for(var Ne,Be=re[Symbol.iterator]();!(ve=(Ne=Be.next()).done);ve=!0){for(var Ge=Ne.value,Ke=[],mt=void 0;!(.125<=(mt=ne/Ge.quadError()));){var lt=Math.pow(mt,.3333333333333333),et=Ge.split(lt),pt=Ge.split(1-lt/(1-lt));K.push(et),Ke.push(Ge),Ge=pt}mt<1&&K.push(Ge.split(.5)),K.push(Ge),Array.prototype.push.apply(K,Ke.reverse())}}catch(at){je=!0,Le=at}finally{try{ve||Be.return==null||Be.return()}finally{if(je)throw Le}}return K}(U,W,(H.x1-S)/L,(H.y1-P)/D,(H.x2-S)/L,(H.y2-P)/D,Z,te),he=0;he<oe.length;he++){var de=oe[he].toQuadratic();_e([de.x,de.x1,de.cx],[de.y,de.y1,de.cy],de)}break;default:throw new Error("unknown command type: ".concat(H.type))}U=Z,W=te}}}catch(ze){ie=!0,E=ze}finally{try{$||B.return==null||B.return()}finally{if(ie)throw E}}for(var J=I.length,ue=this.strokeImageInfos.findImage(J),ye=ue.index,Ce=0;Ce<J;++Ce){var ge=I[Ce];g(ue,Ee(ge.x),Ee(ge.y),Ee(ge.cx),Ee(ge.cy))}(j=this.glyphInfos[x.index]={glyph:x,uGlyphRect:[M.x1,-M.y1,M.x2,-M.y2],strokeImageInfo:ue,strokes:I,colInfo:Qe(F,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Qe(A,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[j.colInfo.dimOffset,j.rowInfo.dimOffset]}return j;function _e(ze,qe,Xe){var We=I.length;function ce(K,ne,ve){for(var je=K.length;0<je--;){var Le=K[je];Le<ne&&(ne=Le),ve<Le&&(ve=Le)}return{min:ne,max:ve}}I.push(Xe);for(var Xe=ce(ze,1,0),ze=Math.max(Math.floor(9*Xe.min-.5),0),Ae=Math.min(Math.ceil(9*Xe.max+.5),9),xe=ze;xe<Ae;++xe)F[xe].push(We);for(var Xe=ce(qe,1,0),ze=Math.max(Math.floor(9*Xe.min-.5),0),Q=Math.min(Math.ceil(9*Xe.max+.5),9),re=ze;re<Q;++re)A[re].push(We)}function Ee(ze){return(ze=(Xe=255)*ze)<(qe=0)?qe:Xe<ze?Xe:ze;var qe,Xe}function Ie(ze,qe,Xe,We){_e([ze,Xe],[qe,We],{x:ze,y:qe,cx:(ze+Xe)/2,cy:(qe+We)/2})}function Te(ze,qe,Xe,We){return Math.abs(Xe-ze)<1e-5&&Math.abs(We-qe)<1e-5}function Qe(ze,qe,Xe){for(var We=ze.length,ce=qe.findImage(We),qe=ce.index,Ae=0,xe=0;xe<We;++xe)Ae+=ze[xe].length;for(var Q=Xe.findImage(Ae),re=0;re<We;++re){var K=ze[re],ne=K.length,ve=Q.index;g(ce,ve>>7,127&ve,ne>>7,127&ne);for(var je=0;je<ne;++je){var Le=K[je]+ye;g(Q,Le>>7,127&Le,0,0)}}return{cellImageInfo:Q,dimOffset:qe,dimImageInfo:ce}}}}]),_}();l.default.RendererGL.prototype._renderText=function(_,x,j,M,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=M)&&this._doFill){if(this._isOpenType()){_.push();var S=this._doStroke,P=this.drawMode,L=(this._doStroke=!1,this.drawMode=b.TEXTURE,this._textFont.font),D=(D=this._textFont._fontInfo)||(this._textFont._fontInfo=new v(L)),j=this._textFont._handleAlignment(this,x,j,M),M=this._textSize/L.unitsPerEm,k=(this.translate(j.x,j.y,0),this.scale(M,M,1),this.GL),j=!this._defaultFontShader,I=this._getFontShader(),A=(I.init(),I.bindShader(),j&&(I.setUniform("uGridImageSize",[64,64]),I.setUniform("uCellsImageSize",[64,64]),I.setUniform("uStrokeImageSize",[64,64]),I.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),F=(A||((M=this._textGeom=new l.default.Geometry(1,1,function(){for(var he=0;he<=1;he++)for(var de=0;de<=1;de++)this.vertices.push(new l.default.Vector(de,he,0)),this.uvs.push(de,he)})).computeFaces().computeNormals(),A=this.createBuffers("glyph",M)),!0),j=!1,M=void 0;try{for(var N,U=this.retainedMode.buffers.text[Symbol.iterator]();!(F=(N=U.next()).done);F=!0)N.value._prepareBuffer(A,I)}catch(he){j=!0,M=he}finally{try{F||U.return==null||U.return()}finally{if(j)throw M}}this._bindBuffer(A.indexBuffer,k.ELEMENT_ARRAY_BUFFER),I.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var W=0,G=null,z=L.stringToGlyphs(x),Y=!0,$=!1,ie=void 0;try{for(var E,R=z[Symbol.iterator]();!(Y=(E=R.next()).done);Y=!0){var B,H,Z=E.value,te=(G&&(W+=L.getKerningValue(G,Z)),D.getGlyphInfo(Z));te.uGlyphRect&&(B=te.rowInfo,H=te.colInfo,I.setUniform("uSamplerStrokes",te.strokeImageInfo.imageData),I.setUniform("uSamplerRowStrokes",B.cellImageInfo.imageData),I.setUniform("uSamplerRows",B.dimImageInfo.imageData),I.setUniform("uSamplerColStrokes",H.cellImageInfo.imageData),I.setUniform("uSamplerCols",H.dimImageInfo.imageData),I.setUniform("uGridOffset",te.uGridOffset),I.setUniform("uGlyphRect",te.uGlyphRect),I.setUniform("uGlyphOffset",W),I.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),W+=Z.advanceWidth,G=Z}}catch(he){$=!0,ie=he}finally{try{Y||R.return==null||R.return()}finally{if($)throw ie}}}finally{I.unbindShader(),this._doStroke=S,this.drawMode=P,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),_.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return _}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})})(Dh);var Bm=Dh.exports;const Um=Vm(Bm);var Ur,ci;class Gm{constructor(t,n,r,i,c){qs(this,Ur,[]);qs(this,ci,0);this.count=t||9,this.radius=n||100,this.smoothness=r||2,this.scale=i||{x:1,y:1},this.fancy=c||.1,Io(this,ci,2*Math.PI/this.count);for(let o=0;o<2*Math.PI;o+=Or(this,ci)){let d=this.radius+(Math.random()*2-1)*this.radius*this.fancy,a=d*Math.cos(o)*this.scale.x,l=d*Math.sin(o)*this.scale.y;Io(this,Ur,[...Or(this,Ur),{x:a,y:l}])}}print(t){t.push(),t.strokeWeight(this.smoothness),t.fill(255,120),t.beginShape();for(let n=0;n<Or(this,Ur).length;n++)t.vertex(Or(this,Ur)[n].x,Or(this,Ur)[n].y);t.endShape(t.CLOSE),t.erase(),t.beginShape();for(let n=0;n<Or(this,Ur).length;n++){let r=n+1;r>Or(this,Ur).length-1&&(r=0),t.bezier(Or(this,Ur)[n].x,Or(this,Ur)[n].y,0,0,0,0,Or(this,Ur)[r].x,Or(this,Ur)[r].y)}t.endShape(t.CLOSE),t.noErase(),t.pop()}}Ur=new WeakMap,ci=new WeakMap;var di,hi;class zm{constructor(t,n){qs(this,di,0);qs(this,hi,0);this.size=t||{x:400,y:300},this.bricksSize=n||{x:60,y:30},Io(this,di,this.size.x/this.bricksSize.x),Io(this,hi,this.size.y/this.bricksSize.y)}print(t){t.push(),t.noFill(),t.stroke(0),t.strokeWeight(2);for(let n=0;n<Or(this,di);n++)for(let r=0;r<Or(this,hi);r++)r%2?t.rect(n*this.bricksSize.x+this.bricksSize.x/2,r*this.bricksSize.y,this.bricksSize.x,this.bricksSize.y):t.rect(n*this.bricksSize.x,r*this.bricksSize.y,this.bricksSize.x,this.bricksSize.y);t.pop()}}di=new WeakMap,hi=new WeakMap;const Fc={"#":()=>{},square:(s,t,n,r,i)=>{s.rect(t,n,r,i)},point:{center:(s,t,n,r,i)=>{s.point(t+r*.5,n+i*.5)},side:(s,t,n,r,i)=>{s.point(t,n+i*.5)},corner:(s,t,n,r,i)=>{s.point(t,n)}},line:{side:(s,t,n,r,i)=>{s.line(t,n,t,n+i)},center:(s,t,n,r,i)=>{s.line(t+r*.5,n,t+r*.5,n+i)}},arc:(s,t,n,r,i)=>{s.arc(t+r,n+i,r*2,i*2,s.PI*1,s.PI*1.5)},arcInv:(s,t,n,r,i)=>{s.beginClip({invert:!0}),s.circle(t+r,n+i,r*2),s.endClip(),s.rect(t,n,r,i)}},Nc={" ":{outline:[[[["#"]]],[[["#"]]],[[["#"]]],[[["#"]]]],fill:[[[["#"]]],[[["#"]]],[[["#"]]],[[["#"]]]]},a:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["point-corner",1]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},b:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-side",2]],[["arc",1]]],[[["line-side"]],[["point-side",2]],[["arc",.5]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["arc",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},c:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["line-side"],["line-side",1.5]],[["arc",1]]],[[["line-side"]],[["line-side"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},d:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["arc",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},e:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["arc",1.5]],[["arc",.5]],[["arc",1]]],[[["arc"]],[["arc",2]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},f:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["arc",1.5]],[["arc",1]]],[[["line-side"]],[],[["line-side",1],["line-side",.5],["line-side",1.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]],[["#"]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["#"]]]]},g:{outline:[[[["arc"]],[["arc",.5]],[["#"]]],[[["line-side"]],[["line-side"],["line-side",.5]],[["line-side",1],["line-side",.5]]],[[["line-side"]],[["line-side"],["arc"]],[["line-side",1]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},h:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["#"]],[["#"]]],[[["line-side"]],[["line-side"],["arc"]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["#"]],[["#"]]],[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},H:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},i:{outline:[[[["arc"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]]],[[["arc"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]]],[[["arc"]],[["arc",.5]]],[[["square"]],[["square"]]]]},j:{outline:[[[["#"]],[["arc"]],[["arc",.5]]],[[["arc"]],[["arc",.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["#"]],[["arc"]],[["arc",.5]]],[[["arc"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]]]},k:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["line-side"],["line-side",.5]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["arc",1]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["line-side",1.5]],[["line-side",1],["line-side",1.5]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},l:{outline:[[[["arc"]],[["arc",.5]],[["line-side",1.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]]]},m:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-center"]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["line-side"]],[["line-side"],["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side"]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},n:{outline:[[[["line-side"],["line-side",.5]],[["arc"],["line-side"]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["line-side"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side"]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},o:{outline:[[[["arc"]],[["line-side",.5]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["point-corner",.5]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["arc"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},p:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["arc",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1],["line-side",1.5]],[["#"]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["#"]]]]},q:{outline:[[[["arc"]],[["arc",.5]],[["#"]]],[[["line-side"]],[["line-side",1]],[["#"]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1],["line-side",1.5]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["#"]]],[[["square"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},r:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["arc",1]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side"],["line-side",1.5]],[["line-side",1],["line-side",1.5]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},s:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["arc"]],[["line-side",1],["arc",.5]]],[[["line-side"],["arc",1.5]],[["arc",1]],[["line-side",1]]],[[["line-side"],["line-side",1],["line-side",1.5]],[["arc",1.5]],[["arc",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},t:{outline:[[[["arc",1]],[["line-side",.5]],[["line-side"],["arc",1],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc"],["line-side",.5]],[["arc"]],[["line-side",.5],["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1],["line-side",1.5]]]],fill:[[[["arcInv",1]],[["square"]],[["arcInv",1]]],[[["square"]],[["square"]],[["square"]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},u:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"],["line-side",1]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},v:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-side",1]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["line-side",1]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]]]},w:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-side"],["line-side",1]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5],["line-center"]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},x:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-center"]],[["line-side",.5],["line-side",1]]],[[["arc",1.5]],[["#"]],[["arc",1]]],[[["arc"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-center"]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},y:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side"],["line-side",1]]],[[["arc",1.5]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",.5],["line-side",1.5]],[["line-side",1.5],["line-side",.5]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]]]},z:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side",.5],["line-side",1]]],[[["line-side"],["arc"]],[["arc",.5]],[["line-side",1]]],[[["line-side"]],[["arc",1.5]],[["arc",1],["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]}};var ma;class qm{constructor(t,n){qs(this,ma,{fill:{fill:"#FFFF00",stroke:"#000000",strokeWeight:0},outline:{fill:"#00000000",stroke:"#000000",strokeWeight:4},shadow:{enabled:!0,position:{x:30,y:30},style:{fill:"#000000FF",stroke:"#00000000",strokeWeight:2}}});this.id=t,this.cellSize=n||30,this.fillCells=[],this.outlineCells=[],this.width=0,this.height=0,this.transform={translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},this.init()}init(){this.fillCells=this.createLayer(Nc[this.id].fill),this.outlineCells=this.createLayer(Nc[this.id].outline),this.width=this.outlineCells[0].length*this.cellSize,this.height=this.outlineCells.length*this.cellSize}createShape(t,n){let r=t.split("-"),i=r[0],c=r[1]||null;return{print:(a,l,b,y,u)=>{c?Fc[i][c](a,l,b,y,u):Fc[i](a,l,b,y,u)},rotation:n||0}}createCell(t){let n=[];if(t.length>0)for(let r of t){let i=this.createShape(r[0],r[1]||0);n.push(i)}return n}createLayer(t){let n=t,r=[];for(let i of n){let c=[];for(let o of i){let d=this.createCell(o);c=[...c,d]}r=[...r,c]}return r}print(t,n){let r=n||Or(this,ma);r.shadow.enabled&&(t.push(),t.translate(r.shadow.position.x,r.shadow.position.y),this.printLayer(t,this.fillCells,r.shadow.style),t.pop()),this.printLayer(t,this.fillCells,r.fill),this.printLayer(t,this.outlineCells,r.outline)}printLayer(t,n,r){let i={x:0,y:0};t.push();for(let c=0;c<n.length;c++){let o=n[c];for(let d=0;d<o.length;d++){let a=o[d];for(let l of a)t.push(),t.fill(r.fill),t.stroke(r.stroke),t.strokeWeight(r.strokeWeight),this.applyTransform(t),t.translate(-this.width/2,-this.height/2),t.translate(i.x,i.y),t.translate(this.cellSize*.5,this.cellSize*.5),t.rotate(3.1416*Number(l.rotation)),t.translate(-this.cellSize*.5,-this.cellSize*.5),l.print(t,0,0,this.cellSize,this.cellSize),t.pop();i.x+=this.cellSize,d==o.length-1&&(i.x=0,i.y+=this.cellSize)}}t.pop()}applyTransform(t){t.translate(this.transform.translate.x,this.transform.translate.y),t.shearX(this.transform.shear.x),t.shearY(this.transform.shear.y),t.rotate(this.transform.rotation),t.scale(this.transform.scale.x,this.transform.scale.y)}updateTransform(t){this.transform=t}}ma=new WeakMap;class Hm{constructor(t){this.string=t,this.width=0,this.gap=0,this.transform={translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},this.init()}init(t){this.characters=[];let r=(t||this.string).split("");for(let i=0;i<r.length;i++){let c=new qm(r[i]);this.characters=[...this.characters,c]}this.updateWidth()}updateWidth(){this.width=0;for(let t of this.characters)this.width+=t.width+this.gap}print(t,n){let r={x:0,y:0};t.push(),this.applyTransform(t),t.translate(this.width/2-this.characters[this.characters.length-1].width*.5,0);for(let i=0;i<this.characters.length;i++){t.translate(-this.gap,0),t.push(),t.translate(r.x-this.gap,r.y);let c=this.characters.length-1-i;if(this.characters[c].print(t,n),this.characters[c-1]){let o=(this.characters[c].width+this.characters[c-1].width)/2;r.x-=o}t.pop()}t.pop()}applyTransform(t){t.translate(this.transform.translate.x,this.transform.translate.y),t.shearX(this.transform.shear.x),t.shearY(this.transform.shear.y),t.rotate(this.transform.rotation),t.scale(this.transform.scale.x,this.transform.scale.y)}updateTransform(t,n){this.transform=t;for(let r of this.characters)r.updateTransform(n)}updateGap(t){this.gap=t,this.updateWidth()}}const Ws=[];function ga(s,t=Kt){let n;const r=new Set;function i(d){if(ar(s,d)&&(s=d,n)){const a=!Ws.length;for(const l of r)l[1](),Ws.push(l,s);if(a){for(let l=0;l<Ws.length;l+=2)Ws[l][0](Ws[l+1]);Ws.length=0}}}function c(d){i(d(s))}function o(d,a=Kt){const l=[d,a];return r.add(l),r.size===1&&(n=t(i,c)||Kt),d(s),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:c,subscribe:o}}const An=ga({size:{x:540,y:540},text:"asca",gap:0,tupTransform:{translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},charTransform:{translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},style:{fill:{fill:"#FFFF00FF",stroke:"#00000000",strokeWeight:0},outline:{fill:"#00000000",stroke:"#000000FF",strokeWeight:2},shadow:{enabled:!0,position:{x:-10,y:10},style:{fill:"#000000FF",stroke:"#00000000",strokeWeight:2}}},background:{color:"#4f4f4fff",type:"wall"}}),Wm=s=>{let t=Cm(An),n,r,i,c,o;s.setup=()=>{s.pixelDensity(4),s.createCanvas(t.size.x,t.size.y),r=s.createGraphics(t.size.x,t.size.y),i=s.createGraphics(t.size.x,t.size.y),s.noSmooth(),r.noSmooth(),r.translate(t.size.x/2,t.size.y/2),n=new Hm(t.text),c=new zm(t.size,{x:40,y:20}),o=new Gm(9,t.size.x,0,{x:1,y:1},0)},s.draw=()=>{s.clear(),i.clear(),r.clear(),s.background(t.background.color),t.background.type==="bang"?(i.push(),i.translate(t.size.x/2,t.size.y/2),o.print(i),i.pop()):t.background.type==="wall"&&c.print(i),n.updateTransform(t.tupTransform,t.charTransform),n.updateGap(t.gap),n.print(r,t.style),s.image(i,0,0),s.image(r,0,0)},s.resize=()=>{s.resizeCanvas(t.size.x,t.size.y)},s.resetTup=()=>{n.init(t.text)}};function Gt(s){return s==null}function va(s){return s!==null&&typeof s=="object"}function Sl(s){return s!==null&&typeof s=="object"}function Xm(s,t){if(s.length!==t.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==t[n])return!1;return!0}function Ss(s,t){return Array.from(new Set([...Object.keys(s),...Object.keys(t)])).reduce((r,i)=>{const c=s[i],o=t[i];return Sl(c)&&Sl(o)?Object.assign(Object.assign({},r),{[i]:Ss(c,o)}):Object.assign(Object.assign({},r),{[i]:i in t?o:c})},{})}function Ym(s){return va(s)?"target"in s:!1}const Km={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:s=>`Not compatible with  plugin '${s.id}'`,propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let yn=class so{static alreadyDisposed(){return new so({type:"alreadydisposed"})}static notBindable(){return new so({type:"notbindable"})}static notCompatible(t,n){return new so({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new so({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new so({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=Km[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}},Vc=class Ih{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){const r=this.read();if(!Ih.isBindable(r))throw yn.notBindable();if(!(t in r))throw yn.propertyNotFound(t);r[t]=n}},Ar=class{constructor(){this.observers_={}}on(t,n,r){var i;let c=this.observers_[t];return c||(c=this.observers_[t]=[]),c.push({handler:n,key:(i=r==null?void 0:r.key)!==null&&i!==void 0?i:n}),this}off(t,n){const r=this.observers_[t];return r&&(this.observers_[t]=r.filter(i=>i.key!==n)),this}emit(t,n){const r=this.observers_[t];r&&r.forEach(i=>{i.handler(n)})}},$m=class{constructor(t,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,c)=>i===c,this.emitter=new Ar,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,c=this.rawValue_;this.equals_(c,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:c,rawValue:i,sender:this}))}},Zm=class{constructor(t){this.emitter=new Ar,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===t&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}},Qm=class{constructor(t){this.emitter=new Ar,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}};function Jt(s,t){const n=t==null?void 0:t.constraint,r=t==null?void 0:t.equals;return!n&&!r?new Zm(s):new $m(s,t)}function Jm(s){return[new Qm(s),(t,n)=>{s.setRawValue(t,n)}]}let vt=class Fh{constructor(t){this.emitter=new Ar,this.valMap_=t;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((r,i)=>Object.assign(r,{[i]:Jt(t[i])}),{})}static fromObject(t){const n=this.createCore(t);return new Fh(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}},pi=class{constructor(t){this.values=vt.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(t,r),n)}},ba=class{constructor(t){this.values=vt.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");let i=t;return Gt(r)||(i=Math.max(i,r)),Gt(n)||(i=Math.min(i,n)),i}},Nh=class{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){const n=this.origin%this.step,r=Math.round((t-n)/this.step);return n+r*this.step}},ey=class{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}};const ty={"**":(s,t)=>Math.pow(s,t),"*":(s,t)=>s*t,"/":(s,t)=>s/t,"%":(s,t)=>s%t,"+":(s,t)=>s+t,"-":(s,t)=>s-t,"<<":(s,t)=>s<<t,">>":(s,t)=>s>>t,">>>":(s,t)=>s>>>t,"&":(s,t)=>s&t,"^":(s,t)=>s^t,"|":(s,t)=>s|t};let ry=class{constructor(t,n,r){this.left=n,this.operator=t,this.right=r}evaluate(){const t=ty[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const ny={"+":s=>s,"-":s=>-s,"~":s=>~s};let sy=class{constructor(t,n){this.operator=t,this.expression=n}evaluate(){const t=ny[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Xl(s){return(t,n)=>{for(let r=0;r<s.length;r++){const i=s[r](t,n);if(i!=="")return i}return""}}function Qo(s,t){var n;const r=s.substr(t).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function oy(s,t){const n=s.substr(t,1);return n.match(/^[1-9]$/)?n:""}function Jo(s,t){var n;const r=s.substr(t).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function iy(s,t){const n=Jo(s,t);if(n!=="")return n;const r=s.substr(t,1);if(t+=1,r!=="-"&&r!=="+")return"";const i=Jo(s,t);return i===""?"":r+i}function Yl(s,t){const n=s.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";const r=iy(s,t);return r===""?"":n+r}function Vh(s,t){const n=s.substr(t,1);if(n==="0")return n;const r=oy(s,t);return t+=r.length,r===""?"":r+Jo(s,t)}function ay(s,t){const n=Vh(s,t);if(t+=n.length,n==="")return"";const r=s.substr(t,1);if(t+=r.length,r!==".")return"";const i=Jo(s,t);return t+=i.length,n+r+i+Yl(s,t)}function ly(s,t){const n=s.substr(t,1);if(t+=n.length,n!==".")return"";const r=Jo(s,t);return t+=r.length,r===""?"":n+r+Yl(s,t)}function uy(s,t){const n=Vh(s,t);return t+=n.length,n===""?"":n+Yl(s,t)}const cy=Xl([ay,ly,uy]);function dy(s,t){var n;const r=s.substr(t).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function hy(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";const r=dy(s,t);return r===""?"":n+r}function py(s,t){var n;const r=s.substr(t).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function fy(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";const r=py(s,t);return r===""?"":n+r}function my(s,t){var n;const r=s.substr(t).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function yy(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";const r=my(s,t);return r===""?"":n+r}const gy=Xl([hy,fy,yy]),vy=Xl([gy,cy]);function by(s,t){const n=vy(s,t);return t+=n.length,n===""?null:{evaluable:new ey(n),cursor:t}}function _y(s,t){const n=s.substr(t,1);if(t+=n.length,n!=="(")return null;const r=Uh(s,t);if(!r)return null;t=r.cursor,t+=Qo(s,t).length;const i=s.substr(t,1);return t+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:t}}function wy(s,t){var n;return(n=by(s,t))!==null&&n!==void 0?n:_y(s,t)}function Bh(s,t){const n=wy(s,t);if(n)return n;const r=s.substr(t,1);if(t+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=Bh(s,t);return i?(t=i.cursor,{cursor:t,evaluable:new sy(r,i.evaluable)}):null}function xy(s,t,n){n+=Qo(t,n).length;const r=s.filter(i=>t.startsWith(i,n))[0];return r?(n+=r.length,n+=Qo(t,n).length,{cursor:n,operator:r}):null}function jy(s,t){return(n,r)=>{const i=s(n,r);if(!i)return null;r=i.cursor;let c=i.evaluable;for(;;){const o=xy(t,n,r);if(!o)break;r=o.cursor;const d=s(n,r);if(!d)return null;r=d.cursor,c=new ry(o.operator,c,d.evaluable)}return c?{cursor:r,evaluable:c}:null}}const Cy=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,t)=>jy(s,t),Bh);function Uh(s,t){return t+=Qo(s,t).length,Cy(s,t)}function Ey(s){const t=Uh(s,0);return!t||t.cursor+Qo(s,t.cursor).length!==s.length?null:t.evaluable}function Vr(s){var t;const n=Ey(s);return(t=n==null?void 0:n.evaluate())!==null&&t!==void 0?t:null}function fi(s){if(typeof s=="number")return s;if(typeof s=="string"){const t=Vr(s);if(!Gt(t))return t}return 0}function yr(s){return t=>t.toFixed(Math.max(Math.min(s,20),0))}function bt(s,t,n,r,i){const c=(s-t)/(n-t);return r+c*(i-r)}function Pl(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Zt(s,t,n){return Math.min(Math.max(s,t),n)}function Gh(s,t){return(s%t+t)%t}function Sy(s,t){return Gt(s.step)?Math.max(Pl(t),2):Pl(s.step)}function zh(s){var t;return(t=s.step)!==null&&t!==void 0?t:1}function Py(s,t){var n;const r=Math.abs((n=s.step)!==null&&n!==void 0?n:t);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function _a(s,t){return Gt(s.step)?null:new Nh(s.step,t)}function wa(s){return!Gt(s.max)&&!Gt(s.min)?new pi({max:s.max,min:s.min}):!Gt(s.max)||!Gt(s.min)?new ba({max:s.max,min:s.min}):null}function mi(s,t){var n,r,i;return{formatter:(n=s.format)!==null&&n!==void 0?n:yr(Sy(s,t)),keyScale:(r=s.keyScale)!==null&&r!==void 0?r:zh(s),pointerScale:(i=s.pointerScale)!==null&&i!==void 0?i:Py(s,t)}}function yi(s){return{format:s.optional.function,keyScale:s.optional.number,max:s.optional.number,min:s.optional.number,pointerScale:s.optional.number,step:s.optional.number}}function Kl(s){return{constraint:s.constraint,textProps:vt.fromObject(mi(s.params,s.initialValue))}}let us=class{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}},Is=class{constructor(t){this.target=t}},xa=class extends Is{constructor(t,n,r){super(t),this.value=n,this.last=r??!0}},ky=class extends Is{constructor(t,n){super(t),this.expanded=n}},Ty=class extends Is{constructor(t,n){super(t),this.index=n}},My=class extends Is{constructor(t,n){super(t),this.native=n}},$l=class extends us{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ar,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const n=this.controller.value;this.emitter_.emit("change",new xa(this,n.binding.target.read(),t.options.last))}};function Ly(s,t){const r=Object.keys(t).reduce((i,c)=>{if(i===void 0)return;const o=t[c],d=o(s[c]);return d.succeeded?Object.assign(Object.assign({},i),{[c]:d.value}):void 0},{});return r}function Ay(s,t){return s.reduce((n,r)=>{if(n===void 0)return;const i=t(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function Oy(s){return s===null?!1:typeof s=="object"}function Mn(s){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};const r=s(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Bc(s){return{custom:t=>Mn(t)(s),boolean:Mn(t=>typeof t=="boolean"?t:void 0)(s),number:Mn(t=>typeof t=="number"?t:void 0)(s),string:Mn(t=>typeof t=="string"?t:void 0)(s),function:Mn(t=>typeof t=="function"?t:void 0)(s),constant:t=>Mn(n=>n===t?t:void 0)(s),raw:Mn(t=>t)(s),object:t=>Mn(n=>{if(Oy(n))return Ly(n,t)})(s),array:t=>Mn(n=>{if(Array.isArray(n))return Ay(n,t)})(s)}}const kl={optional:Bc(!0),required:Bc(!1)};function It(s,t){const n=t(kl),r=kl.required.object(n)(s);return r.succeeded?r.value:void 0}function gn(s,t,n,r){if(t&&!t(s))return!1;const i=It(s,n);return i?r(i):!1}function vn(s,t){var n;return Ss((n=s==null?void 0:s())!==null&&n!==void 0?n:{},t)}function Qi(s){return"value"in s}function Ry(s){if(!va(s)||!("binding"in s))return!1;const t=s.binding;return Ym(t)}const At="http://www.w3.org/2000/svg";function oa(s){s.offsetHeight}function Dy(s,t){const n=s.style.transition;s.style.transition="none",t(),s.style.transition=n}function gi(s){return s.ontouchstart!==void 0}function Iy(){return globalThis}function Fy(){return Iy().document}function Ny(s){const t=s.ownerDocument.defaultView;return t&&"document"in t?s.getContext("2d",{willReadFrequently:!0}):null}const Vy={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ja(s,t){const n=s.createElementNS(At,"svg");return n.innerHTML=Vy[t],n}function qh(s,t,n){s.insertBefore(t,s.children[n])}function ei(s){s.parentElement&&s.parentElement.removeChild(s)}function Hh(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function By(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function Ca(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}function un(s,t){s.emitter.on("change",n=>{t(n.rawValue)}),t(s.rawValue)}function Kr(s,t,n){un(s.value(t),n)}const Uy="tp";function ht(s){return(n,r)=>[Uy,"-",s,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Fo=ht("lbl");function Gy(s,t){const n=s.createDocumentFragment();return t.split(`
`).map(i=>s.createTextNode(i)).forEach((i,c)=>{c>0&&n.appendChild(s.createElement("br")),n.appendChild(i)}),n}let Wh=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Fo()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Fo("l")),Kr(n.props,"label",c=>{Gt(c)?this.element.classList.add(Fo(void 0,"nol")):(this.element.classList.remove(Fo(void 0,"nol")),By(r),r.appendChild(Gy(t,c)))}),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("div");i.classList.add(Fo("v")),this.element.appendChild(i),this.valueElement=i}},vi=class{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Wh(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return gn(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return vn(null,{label:this.props.get("label")})}};function zy(){return["veryfirst","first","last","verylast"]}const Uc=ht(""),Gc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let vo=class{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{zy().forEach(r=>{n.classList.remove(Uc(void 0,Gc[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Uc(void 0,Gc[r]))})}),this.viewProps.handleDispose(()=>{ei(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return gn(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return vn(null,Object.assign({},this.viewProps.exportState()))}},ia=class extends vo{constructor(t,n){if(n.value!==n.valueController.value)throw yn.shouldNeverHappen();const r=n.valueController.viewProps,i=new vi(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Wh(t,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return gn(t,n=>{var r,i,c;return super.importState(n)&&this.labelController.importProps(n)&&((c=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,t))!==null&&c!==void 0?c:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,r;return vn(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:{}))}};function Xh(s,t){for(;s.length<t;)s.push(void 0)}function qy(s){const t=[];return Xh(t,s),t}function Hy(s){const t=s.indexOf(void 0);return t<0?s:s.slice(0,t)}function Wy(s,t){const n=[...Hy(s),t];return n.length>s.length?n.splice(0,n.length-s.length):Xh(n,s.length),n}let Xy=class extends us{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(t,c=>{r(new My(this,c.nativeEvent))}),this}off(t,n){return this.controller.buttonController.emitter.off(t,n),this}};function Yy(s,t,n){n?s.classList.add(t):s.classList.remove(t)}function Bn(s,t){return n=>{Yy(s,t,n)}}function Zl(s,t){un(s,n=>{t.textContent=n??""})}const $a=ht("btn");let Ky=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add($a()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add($a("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add($a("t")),Zl(n.props.value("title"),i),this.buttonElement.appendChild(i)}},Yh=class{constructor(t,n){this.emitter=new Ar,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Ky(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return gn(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return vn(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}},zc=class extends vo{constructor(t,n){const r=new Yh(t,{props:n.buttonProps,viewProps:n.viewProps}),i=new vi(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(t){return gn(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return vn(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},$y=class{constructor(t){const[n,r]=t.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}};const Zy=new $y("2.0.3");function Nt(s){return Object.assign({core:Zy},s)}Nt({id:"button",type:"blade",accept(s){const t=It(s,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(s){return new zc(s.document,{blade:s.blade,buttonProps:vt.fromObject({title:s.params.title}),labelProps:vt.fromObject({label:s.params.label}),viewProps:s.viewProps})},api(s){return s.controller instanceof zc?new Xy(s.controller):null}});function Qy(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Jy(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function eg(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function tg(s){return va(s)?"refresh"in s&&typeof s.refresh=="function":!1}function rg(s,t){if(!Vc.isBindable(s))throw yn.notBindable();return new Vc(s,t)}let ng=class{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new Ar,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,r){const i=r??{},c=this.controller_.element.ownerDocument,o=this.pool_.createBinding(c,rg(t,n),i),d=this.pool_.createBindingApi(o);return this.add(d,i.index)}addFolder(t){return Jy(this,t)}addButton(t){return Qy(this,t)}addTab(t){return eg(this,t)}add(t,n){const r=t.controller;return this.controller_.rack.add(r,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,t),i=this.pool_.createApi(r);return this.add(i,t.index)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.children.forEach(t=>{tg(t)&&t.refresh()})}onRackValueChange_(t){const n=t.bladeController,r=this.pool_.createApi(n),i=Ry(n.value)?n.value.binding:null;this.emitter_.emit("change",new xa(r,i?i.target.read():n.value.rawValue,t.options.last))}},Ql=class extends us{constructor(t,n){super(t),this.rackApi_=new ng(t.rackController,n)}refresh(){this.rackApi_.refresh()}},Jl=class extends vo{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return gn(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return vn(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}};function Tl(s){return"rackController"in s}let sg=class{constructor(t){this.emitter=new Ar,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw yn.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(c=>{this.cache_.add(c)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}remove(t){const n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);const r=this.extract_(t);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}};function og(s,t){for(let n=0;n<s.length;n++){const r=s[n];if(Qi(r)&&r.value===t)return r}return null}function ig(s){return Tl(s)?s.rackController.rack.bcSet_:null}let ag=class{constructor(t){var n,r;this.emitter=new Ar,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new sg(ig),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var r;(r=t.parent)===null||r===void 0||r.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;const r=t.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Qi(r))r.value.emitter.on("change",this.onChildValueChange_);else if(Tl(r)){const i=r.rackController.rack;if(i){const c=i.emitter;c.on("layout",this.onRackLayout_),c.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;const r=t.item;if(Qi(r))r.value.emitter.off("change",this.onChildValueChange_);else if(Tl(r)){const i=r.rackController.rack;if(i){const c=i.emitter;c.off("layout",this.onRackLayout_),c.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach(i=>{const c=[];i===n&&(c.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&c.push("veryfirst")),i===r&&(c.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&c.push("verylast")),i.blade.set("positions",c)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){const n=og(this.find(Qi),t.sender);if(!n)throw yn.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},eu=class{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const n=new ag({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&qh(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&ei(t.bladeController.view.element)}};function Kh(){return new vt({positions:Jt([],{equals:Xm})})}let bi=class $h extends vt{constructor(t){super(t)}static create(t){const n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=vt.createCore(n);return new $h(r)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Gt(t)?`${t}px`:"auto"}bindExpandedClass(t,n){const r=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};Kr(this,"expanded",r),Kr(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function lg(s,t){let n=0;return Dy(t,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),oa(t),n=t.clientHeight,s.set("temporaryExpanded",null),oa(t)}),n}function qc(s,t){t.style.height=s.styleHeight}function _i(s,t){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),Gt(s.get("expandedHeight"))){const n=lg(s,t);n>0&&s.set("expandedHeight",n)}s.set("shouldFixHeight",!0),oa(t)}),s.emitter.on("change",()=>{qc(s,t)}),qc(s,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&s.cleanUpTransition()})}let ug=class extends Ql{constructor(t,n){super(t,n),this.emitter_=new Ar,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new ky(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}};const Zh=ht("cnt");let cg=class{constructor(t,n){var r;this.className_=ht((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Zh()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Kr(this.foldable_,"completed",Bn(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),Kr(n.props,"title",l=>{Gt(l)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const c=t.createElement("div");c.classList.add(this.className_("i")),this.element.appendChild(c);const o=t.createElement("div");o.classList.add(this.className_("t")),Zl(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const d=t.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const a=t.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}},Hc=class extends Jl{constructor(t,n){var r;const i=bi.create((r=n.expanded)!==null&&r!==void 0?r:!0),c=new cg(t,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new eu({blade:n.blade,element:c.containerElement,root:n.root,viewProps:n.viewProps}),view:c})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,_i(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return gn(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return vn(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};Nt({id:"folder",type:"blade",accept(s){const t=It(s,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(s){return new Hc(s.document,{blade:s.blade,expanded:s.params.expanded,props:vt.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof Hc?new ug(s.controller,s.pool):null}});const dg=ht("");function Wc(s,t){return Bn(s,dg(void 0,t))}let Ps=class Qh extends vt{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Jm(Jt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,r,i;const c=t??{};return new Qh(vt.createCore({disabled:(n=c.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=c.hidden)!==null&&r!==void 0?r:!1,parent:(i=c.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){un(this.globalDisabled_,Wc(t,"disabled")),Kr(this,"hidden",Wc(t,"hidden"))}bindDisabled(t){un(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){un(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;const r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Xc=ht("tbp");let hg=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Xc()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Xc("c")),this.element.appendChild(r),this.containerElement=r}};const No=ht("tbi");let pg=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(No()),n.viewProps.bindClassModifiers(this.element),Kr(n.props,"selected",c=>{c?this.element.classList.add(No(void 0,"sel")):this.element.classList.remove(No(void 0,"sel"))});const r=t.createElement("button");r.classList.add(No("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(No("t")),Zl(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},fg=class{constructor(t,n){this.emitter=new Ar,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new pg(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},Ml=class extends Jl{constructor(t,n){const r=new hg(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new eu({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new fg(t,{props:n.itemProps,viewProps:Ps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Kr(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(t){return gn(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return vn(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},mg=class extends Ql{constructor(t,n){super(t,n),this.emitter_=new Ar,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const n=this.controller.view.element.ownerDocument,r=new Ml(n,{blade:Kh(),itemProps:vt.fromObject({selected:!1,title:t.title}),props:vt.fromObject({selected:!1}),viewProps:Ps.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}onSelect_(t){this.emitter_.emit("select",new Ty(this,t.rawValue))}},yg=class extends Ql{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addBlade(t){return this.rackApi_.addBlade(t)}};const Yc=-1;let gg=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Jt(!0),this.selectedIndex=Jt(Yc),this.items_=[]}add(t,n){const r=n??this.items_.length;this.items_.splice(r,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Yc,this.empty.rawValue=!0;return}const t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const n=this.items_.findIndex(r=>r===t.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const Vo=ht("tab");let vg=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Vo(),Zh()),n.viewProps.bindClassModifiers(this.element),un(n.empty,Bn(this.element,Vo(void 0,"nop")));const r=t.createElement("div");r.classList.add(Vo("t")),this.element.appendChild(r),this.itemsElement=r;const i=t.createElement("div");i.classList.add(Vo("i")),this.element.appendChild(i);const c=t.createElement("div");c.classList.add(Vo("c")),this.element.appendChild(c),this.contentsElement=c}},Kc=class extends Jl{constructor(t,n){const r=new gg,i=new vg(t,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new eu({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const c=this.rackController.rack;c.emitter.on("add",this.onRackAdd_),c.emitter.on("remove",this.onRackRemove_),this.tab=r}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const n=t.bladeController;qh(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const n=t.bladeController;ei(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};Nt({id:"tab",type:"blade",accept(s){const t=It(s,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(s){const t=new Kc(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(n=>{const r=new Ml(s.document,{blade:Kh(),itemProps:vt.fromObject({selected:!1,title:n.title}),props:vt.fromObject({selected:!1}),viewProps:Ps.create()});t.add(r)}),t},api(s){return s.controller instanceof Kc?new mg(s.controller,s.pool):s.controller instanceof Ml?new yg(s.controller,s.pool):null}});let tu=class extends $l{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}},Jh=class{constructor(){this.disabled=!1,this.emitter=new Ar}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},ep=class{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new Ar,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},cs=class{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,r)=>r.constrain(n),t)}};function ti(s,t){if(s instanceof t)return s;if(s instanceof cs){const n=s.constraints.reduce((r,i)=>r||(i instanceof t?i:null),null);if(n)return n}return null}let Ea=class{constructor(t){this.values=vt.fromObject({options:t})}constrain(t){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===t).length>0?t:n[0].value}};function Sa(s){var t;const n=kl;if(Array.isArray(s))return(t=It({items:s},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof s=="object")return n.required.raw(s).value}function tp(s){if(Array.isArray(s))return s;const t=[];return Object.keys(s).forEach(n=>{t.push({text:n,value:s[n]})}),t}function ru(s){return Gt(s)?null:new Ea(tp(s))}const Za=ht("lst");let bg=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(Za()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("select");r.classList.add(Za("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=t.createElement("div");i.classList.add(Za("m")),i.appendChild(ja(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Kr(this.props_,"options",c=>{Hh(this.selectElement),c.forEach(o=>{const d=t.createElement("option");d.textContent=o.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},co=class{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new bg(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return gn(t,null,n=>({options:n.required.custom(Sa)}),n=>(this.props.set("options",tp(n.options)),!0))}exportProps(){return vn(null,{options:this.props.get("options")})}};const $c=ht("pop");let _g=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add($c()),n.viewProps.bindClassModifiers(this.element),un(n.shows,Bn(this.element,$c(void 0,"v")))}},Pa=class{constructor(t,n){this.shows=Jt(!1),this.viewProps=n.viewProps,this.view=new _g(t,{shows:this.shows,viewProps:this.viewProps})}};const Zc=ht("txt");let wg=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Zc()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=t.createElement("input");r.classList.add(Zc("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}},ka=class{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new wg(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);Gt(i)||(this.value.rawValue=i),this.view.refresh()}};function xg(s){return String(s)}function nu(s){return s==="false"?!1:!!s}function Qc(s){return xg(s)}function jg(s){return t=>s.reduce((n,r)=>n!==null?n:r(t),null)}const Cg=yr(0);function aa(s){return Cg(s)+"%"}function su(s){return String(s)}function Ll(s){return s}function ds({primary:s,secondary:t,forward:n,backward:r}){let i=!1;function c(o){i||(i=!0,o(),i=!1)}s.emitter.on("change",o=>{c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{c(()=>{s.setRawValue(r(s.rawValue,t.rawValue),o.options)}),c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),o.options)})}),c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function fr(s,t){const n=s*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function ss(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function dn(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function Eg(s){return s==="ArrowUp"||s==="ArrowDown"}function ri(s){return Eg(s)||s==="ArrowLeft"||s==="ArrowRight"}function Qa(s,t){var n,r;const i=t.ownerDocument.defaultView,c=t.getBoundingClientRect();return{x:s.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+c.left),y:s.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+c.top)}}let br=class{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new Ar,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Qa(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Qa(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Qa(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;const r=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}};const rn=ht("txt");let Sg=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(rn(),rn(void 0,"num")),n.arrayPosition&&this.element.classList.add(rn(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(rn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(rn()),this.inputElement.classList.add(rn("i"));const i=t.createElement("div");i.classList.add(rn("k")),this.element.appendChild(i),this.knobElement=i;const c=t.createElementNS(At,"svg");c.classList.add(rn("g")),this.knobElement.appendChild(c);const o=t.createElementNS(At,"path");o.classList.add(rn("gb")),c.appendChild(o),this.guideBodyElem_=o;const d=t.createElementNS(At,"path");d.classList.add(rn("gh")),c.appendChild(d),this.guideHeadElem_=d;const a=t.createElement("div");a.classList.add(ht("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(rn(void 0,"drg"));return}this.element.classList.add(rn(void 0,"drg"));const n=t.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Zt(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const c=this.props_.get("formatter");this.tooltipElem_.textContent=c(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}},bo=class{constructor(t,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Jt(null),this.view=new Sg(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new br(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),c=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let o=t;return i!==void 0&&(o=Math.max(o,i)),c!==void 0&&(o=Math.min(o,c)),o}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);Gt(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const n=fr(this.props.get("keyScale"),ss(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){fr(this.props.get("keyScale"),ss(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const Ja=ht("sld");let Pg=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ja()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Ja("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(Ja("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const t=Zt(bt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}},kg=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Pg(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(bt(Zt(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=fr(this.props.get("keyScale"),dn(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){fr(this.props.get("keyScale"),dn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const el=ht("sldtxt");let Tg=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(el());const r=t.createElement("div");r.classList.add(el("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(el("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},Jc=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new kg(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new bo(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Tg(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return gn(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const t=this.sliderC_.props;return vn(null,{max:t.get("max"),min:t.get("min")})}};function Mg(s){return{sliderProps:new vt({keyScale:s.keyScale,max:s.max,min:s.min}),textProps:new vt({formatter:Jt(s.formatter),keyScale:s.keyScale,pointerScale:Jt(s.pointerScale)})}}const Lg={containerUnitSize:"cnt-usz"};function rp(s){return`--${Lg[s]}`}class np{constructor(t,n){const r=ht(n.viewName);this.element=t.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function ni(s){return yi(s)}function Dr(s){if(Sl(s))return It(s,ni)}function On(s,t){if(!s)return;const n=[],r=_a(s,t);r&&n.push(r);const i=wa(s);return i&&n.push(i),new cs(n)}function Ta(s){if(s==="inline"||s==="popup")return s}function Pn(s,t){s.write(t)}const zi=ht("ckb");let Ag=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(zi()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(zi("l")),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("input");i.classList.add(zi("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const c=t.createElement("div");c.classList.add(zi("w")),this.labelElement.appendChild(c);const o=ja(t,"check");c.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},Og=class{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Ag(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const n=t.currentTarget;this.value.rawValue=n.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}};function Rg(s){const t=[],n=ru(s.options);return n&&t.push(n),new cs(t)}Nt({id:"input-bool",type:"input",accept:(s,t)=>{if(typeof s!="boolean")return null;const n=It(t,r=>({options:r.optional.custom(Sa),readonly:r.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>nu,constraint:s=>Rg(s.params),writer:s=>Pn},controller:s=>{const t=s.document,n=s.value,r=s.constraint,i=r&&ti(r,Ea);return i?new co(t,{props:new vt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new Og(t,{value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="boolean"?null:s.controller.valueController instanceof co?new tu(s.controller):null}});const fs=ht("col");let Dg=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(fs()),n.foldable.bindExpandedClass(this.element,fs(void 0,"expanded")),Kr(n.foldable,"completed",Bn(this.element,fs(void 0,"cpl")));const r=t.createElement("div");r.classList.add(fs("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(fs("s")),r.appendChild(i),this.swatchElement=i;const c=t.createElement("div");if(c.classList.add(fs("t")),r.appendChild(c),this.textElement=c,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(fs("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function Ig(s,t,n){const r=Zt(s/255,0,1),i=Zt(t/255,0,1),c=Zt(n/255,0,1),o=Math.max(r,i,c),d=Math.min(r,i,c),a=o-d;let l=0,b=0;const y=(d+o)/2;return a!==0&&(b=a/(1-Math.abs(o+d-1)),r===o?l=(i-c)/a:i===o?l=2+(c-r)/a:l=4+(r-i)/a,l=l/6+(l<0?1:0)),[l*360,b*100,y*100]}function Fg(s,t,n){const r=(s%360+360)%360,i=Zt(t/100,0,1),c=Zt(n/100,0,1),o=(1-Math.abs(2*c-1))*i,d=o*(1-Math.abs(r/60%2-1)),a=c-o/2;let l,b,y;return r>=0&&r<60?[l,b,y]=[o,d,0]:r>=60&&r<120?[l,b,y]=[d,o,0]:r>=120&&r<180?[l,b,y]=[0,o,d]:r>=180&&r<240?[l,b,y]=[0,d,o]:r>=240&&r<300?[l,b,y]=[d,0,o]:[l,b,y]=[o,0,d],[(l+a)*255,(b+a)*255,(y+a)*255]}function Ng(s,t,n){const r=Zt(s/255,0,1),i=Zt(t/255,0,1),c=Zt(n/255,0,1),o=Math.max(r,i,c),d=Math.min(r,i,c),a=o-d;let l;a===0?l=0:o===r?l=60*(((i-c)/a%6+6)%6):o===i?l=60*((c-r)/a+2):l=60*((r-i)/a+4);const b=o===0?0:a/o,y=o;return[l,b*100,y*100]}function sp(s,t,n){const r=Gh(s,360),i=Zt(t/100,0,1),c=Zt(n/100,0,1),o=c*i,d=o*(1-Math.abs(r/60%2-1)),a=c-o;let l,b,y;return r>=0&&r<60?[l,b,y]=[o,d,0]:r>=60&&r<120?[l,b,y]=[d,o,0]:r>=120&&r<180?[l,b,y]=[0,o,d]:r>=180&&r<240?[l,b,y]=[0,d,o]:r>=240&&r<300?[l,b,y]=[d,0,o]:[l,b,y]=[o,0,d],[(l+a)*255,(b+a)*255,(y+a)*255]}function Vg(s,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[s,r!==0?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/(2*100)]}function Bg(s,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[s,r!==0?t*n/r:0,n*(200-t)/(2*100)]}function Cn(s){return[s[0],s[1],s[2]]}function Ma(s,t){return[s[0],s[1],s[2],t]}const Ug={hsl:{hsl:(s,t,n)=>[s,t,n],hsv:Vg,rgb:Fg},hsv:{hsl:Bg,hsv:(s,t,n)=>[s,t,n],rgb:sp},rgb:{hsl:Ig,hsv:Ng,rgb:(s,t,n)=>[s,t,n]}};function ho(s,t){return[t==="float"?1:s==="rgb"?255:360,t==="float"?1:s==="rgb"?255:100,t==="float"?1:s==="rgb"?255:100]}function Gg(s,t){return s===t?t:Gh(s,t)}function op(s,t,n){var r;const i=ho(t,n);return[t==="rgb"?Zt(s[0],0,i[0]):Gg(s[0],i[0]),Zt(s[1],0,i[1]),Zt(s[2],0,i[2]),Zt((r=s[3])!==null&&r!==void 0?r:1,0,1)]}function ed(s,t,n,r){const i=ho(t,n),c=ho(t,r);return s.map((o,d)=>o/i[d]*c[d])}function ip(s,t,n){const r=ed(s,t.mode,t.type,"int"),i=Ug[t.mode][n.mode](...r);return ed(i,n.mode,"int",n.type)}let Dt=class ap{static black(){return new ap([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=op(t,n,this.type)}getComponents(t){return Ma(ip(Cn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}};const Hn=ht("colp");let zg=class{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Hn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Hn("hsv"));const i=t.createElement("div");i.classList.add(Hn("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const c=t.createElement("div");c.classList.add(Hn("h")),this.hPaletteView_=n.hPaletteView,c.appendChild(this.hPaletteView_.element),r.appendChild(c),this.element.appendChild(r);const o=t.createElement("div");if(o.classList.add(Hn("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=t.createElement("div");d.classList.add(Hn("a"));const a=t.createElement("div");a.classList.add(Hn("ap")),a.appendChild(this.alphaViews_.palette.element),d.appendChild(a);const l=t.createElement("div");l.classList.add(Hn("at")),l.appendChild(this.alphaViews_.text.element),d.appendChild(l),this.element.appendChild(d)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}};function qg(s){return s==="int"?"int":s==="float"?"float":void 0}function ou(s){return It(s,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(qg)}),expanded:t.optional.boolean,picker:t.optional.custom(Ta),readonly:t.optional.constant(!1)}))}function ks(s){return s?.1:1}function lp(s){var t;return(t=s.color)===null||t===void 0?void 0:t.type}let iu=class{constructor(t,n){this.type="float",this.mode=n,this.comps_=op(t,n,this.type)}getComponents(t){return Ma(ip(Cn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}};const Hg={int:(s,t)=>new Dt(s,t),float:(s,t)=>new iu(s,t)};function au(s,t,n){return Hg[n](s,t)}function Wg(s){return s.type==="float"}function Xg(s){return s.type==="int"}function Yg(s){const t=s.getComponents(),n=ho(s.mode,"int");return new Dt([Math.round(bt(t[0],0,1,0,n[0])),Math.round(bt(t[1],0,1,0,n[1])),Math.round(bt(t[2],0,1,0,n[2])),t[3]],s.mode)}function Kg(s){const t=s.getComponents(),n=ho(s.mode,"int");return new iu([bt(t[0],0,n[0],0,1),bt(t[1],0,n[1],0,1),bt(t[2],0,n[2],0,1),t[3]],s.mode)}function Ir(s,t){if(s.type===t)return s;if(Xg(s)&&t==="float")return Kg(s);if(Wg(s)&&t==="int")return Yg(s);throw yn.shouldNeverHappen()}function $g(s,t){return s.alpha===t.alpha&&s.mode===t.mode&&s.notation===t.notation&&s.type===t.type}function on(s,t){const n=s.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(s),t)}const Zg={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function up(s){const t=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(s);const n=parseFloat(t[1]),r=t[2];return Zg[r](n)}function cp(s){const t=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[on(t[1],255),on(t[2],255),on(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Qg(s){const t=cp(s);return t?new Dt(t,"rgb"):null}function dp(s){const t=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[on(t[1],255),on(t[2],255),on(t[3],255),on(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Jg(s){const t=dp(s);return t?new Dt(t,"rgb"):null}function hp(s){const t=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[up(t[1]),on(t[2],100),on(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ev(s){const t=hp(s);return t?new Dt(t,"hsl"):null}function pp(s){const t=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[up(t[1]),on(t[2],100),on(t[3],100),on(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function tv(s){const t=pp(s);return t?new Dt(t,"hsl"):null}function fp(s){const t=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function rv(s){const t=fp(s);return t?new Dt(t,"rgb"):null}function mp(s){const t=s.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),bt(parseInt(t[4]+t[4],16),0,255,0,1)];const n=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),bt(parseInt(n[4],16),0,255,0,1)]:null}function nv(s){const t=mp(s);return t?new Dt(t,"rgb"):null}function yp(s){const t=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function sv(s){return t=>{const n=yp(t);return n?au(n,"rgb",s):null}}function gp(s){const t=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function ov(s){return t=>{const n=gp(t);return n?au(n,"rgb",s):null}}const iv=[{parser:fp,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:mp,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:cp,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:dp,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:hp,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:pp,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:yp,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:gp,result:{alpha:!0,mode:"rgb",notation:"object"}}];function av(s){return iv.reduce((t,{parser:n,result:r})=>t||(n(s)?r:null),null)}function lv(s,t="int"){const n=av(s);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function wi(s){const t=[rv,nv,Qg,Jg,ev,tv];t.push(sv("int"),ov("int"));const n=jg(t);return r=>{const i=n(r);return i?Ir(i,s):null}}function uv(s){const t=wi("int");if(typeof s!="string")return Dt.black();const n=t(s);return n??Dt.black()}function vp(s){const t=Zt(Math.floor(s),0,255).toString(16);return t.length===1?`0${t}`:t}function lu(s,t="#"){const n=Cn(s.getComponents("rgb")).map(vp).join("");return`${t}${n}`}function uu(s,t="#"){const n=s.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(vp).join("");return`${t}${r}`}function bp(s){const t=yr(0),n=Ir(s,"int");return`rgb(${Cn(n.getComponents("rgb")).map(i=>t(i)).join(", ")})`}function Ji(s){const t=yr(2),n=yr(0);return`rgba(${Ir(s,"int").getComponents("rgb").map((c,o)=>(o===3?t:n)(c)).join(", ")})`}function cv(s){const t=[yr(0),aa,aa],n=Ir(s,"int");return`hsl(${Cn(n.getComponents("hsl")).map((i,c)=>t[c](i)).join(", ")})`}function dv(s){const t=[yr(0),aa,aa,yr(2)];return`hsla(${Ir(s,"int").getComponents("hsl").map((i,c)=>t[c](i)).join(", ")})`}function _p(s,t){const n=yr(t==="float"?2:0),r=["r","g","b"],i=Ir(s,t);return`{${Cn(i.getComponents("rgb")).map((o,d)=>`${r[d]}: ${n(o)}`).join(", ")}}`}function hv(s){return t=>_p(t,s)}function wp(s,t){const n=yr(2),r=yr(t==="float"?2:0),i=["r","g","b","a"];return`{${Ir(s,t).getComponents("rgb").map((d,a)=>{const l=a===3?n:r;return`${i[a]}: ${l(d)}`}).join(", ")}}`}function pv(s){return t=>wp(t,s)}const fv=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:lu},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:uu},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:bp},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Ji},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:cv},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:dv},...["int","float"].reduce((s,t)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:hv(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:pv(t)}],[])];function xp(s){return fv.reduce((t,n)=>t||($g(n.format,s)?n.stringifier:null),null)}const Bo=ht("apl");let mv=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Bo()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Bo("b")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Bo("c")),r.appendChild(i),this.colorElem_=i;const c=t.createElement("div");c.classList.add(Bo("m")),this.element.appendChild(c),this.markerElem_=c;const o=t.createElement("div");o.classList.add(Bo("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,n=t.getComponents("rgb"),r=new Dt([n[0],n[1],n[2],0],"rgb"),i=new Dt([n[0],n[1],n[2],255],"rgb"),c=["to right",Ji(r),Ji(i)];this.colorElem_.style.background=`linear-gradient(${c.join(",")})`,this.previewElem_.style.backgroundColor=Ji(t);const o=bt(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},yv=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new mv(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=t.point.x/t.bounds.width,i=this.value.rawValue,[c,o,d]=i.getComponents("hsv");this.value.setRawValue(new Dt([c,o,d,r],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=fr(ks(!0),dn(t));if(n===0)return;const r=this.value.rawValue,[i,c,o,d]=r.getComponents("hsv");this.value.setRawValue(new Dt([i,c,o,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){fr(ks(!0),dn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Xs=ht("coltxt");function gv(s){const t=s.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((r,i)=>{const c=s.createElement("option");return c.textContent=i.text,c.value=i.value,r.appendChild(c),r},s.createDocumentFragment())),t}let vv=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Xs()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Xs("m")),this.modeElem_=gv(t),this.modeElem_.classList.add(Xs("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(Xs("mm")),i.appendChild(ja(t,"dropdown")),r.appendChild(i),this.element.appendChild(r);const c=t.createElement("div");c.classList.add(Xs("w")),this.element.appendChild(c),this.inputsElem_=c,this.inputViews_=n.inputViews,this.applyInputViews_(),un(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){Hh(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=t.createElement("div");r.classList.add(Xs("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function bv(s){return yr(s==="float"?2:0)}function _v(s,t,n){const r=ho(s,t)[n];return new pi({min:0,max:r})}function wv(s,t,n){return new bo(s,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:t.parser,props:vt.fromObject({formatter:bv(t.colorType),keyScale:ks(!1),pointerScale:t.colorType==="float"?.01:1}),value:Jt(0,{constraint:_v(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function xv(s,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:Vr,viewProps:t.viewProps};return[0,1,2].map(r=>{const i=wv(s,n,r);return ds({primary:t.value,secondary:i.value,forward(c){return Ir(c,t.colorType).getComponents(t.colorMode)[r]},backward(c,o){const d=t.colorMode,l=Ir(c,t.colorType).getComponents(d);l[r]=o;const b=au(Ma(Cn(l),l[3]),d,t.colorType);return Ir(b,"int")}}),i})}function jv(s,t){const n=new ka(s,{parser:wi("int"),props:vt.fromObject({formatter:lu}),value:Jt(Dt.black()),viewProps:t.viewProps});return ds({primary:t.value,secondary:n.value,forward:r=>new Dt(Cn(r.getComponents()),r.mode),backward:(r,i)=>new Dt(Ma(Cn(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function Cv(s){return s!=="hex"}let Ev=class{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Jt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new vv(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const n=this.colorMode.rawValue;return Cv(n)?xv(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):jv(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const tl=ht("hpl");let Sv=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(tl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(tl("c")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(tl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=bp(new Dt([n,100,100],"hsv"));const r=bt(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},Pv=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Sv(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=bt(Zt(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,c,o,d]=i.getComponents("hsv");this.value.setRawValue(new Dt([r,c,o,d],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=fr(ks(!1),dn(t));if(n===0)return;const r=this.value.rawValue,[i,c,o,d]=r.getComponents("hsv");this.value.setRawValue(new Dt([i+n,c,o,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){fr(ks(!1),dn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const rl=ht("svp"),td=64;let kv=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("canvas");r.height=td,r.width=td,r.classList.add(rl("c")),this.element.appendChild(r),this.canvasElement=r;const i=t.createElement("div");i.classList.add(rl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=Ny(this.canvasElement);if(!t)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,c=this.canvasElement.height,o=t.getImageData(0,0,i,c),d=o.data;for(let b=0;b<c;b++)for(let y=0;y<i;y++){const u=bt(y,0,i,0,100),p=bt(b,0,c,100,0),h=sp(r[0],u,p),m=(b*i+y)*4;d[m]=h[0],d[m+1]=h[1],d[m+2]=h[2],d[m+3]=255}t.putImageData(o,0,0);const a=bt(r[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const l=bt(r[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}},Tv=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new kv(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=bt(t.point.x,0,t.bounds.width,0,100),i=bt(t.point.y,0,t.bounds.height,100,0),[c,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Dt([c,r,i,o],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){ri(t.key)&&t.preventDefault();const[n,r,i,c]=this.value.rawValue.getComponents("hsv"),o=ks(!1),d=fr(o,dn(t)),a=fr(o,ss(t));d===0&&a===0||this.value.setRawValue(new Dt([n,r+d,i+a,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const n=ks(!1),r=fr(n,dn(t)),i=fr(n,ss(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Mv=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new Pv(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Tv(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new yv(t,{value:this.value,viewProps:this.viewProps}),text:new bo(t,{parser:Vr,props:vt.fromObject({pointerScale:.01,keyScale:.1,formatter:yr(2)}),value:Jt(0,{constraint:new pi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ds({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const c=r.getComponents();return c[3]=i,new Dt(c,r.mode)}}),this.textsC_=new Ev(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new zg(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const nl=ht("colsw");let Lv=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(nl()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(nl("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=t.createElement("button");i.classList.add(nl("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=uu(t)}onValueChange_(){this.update_()}},Av=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Lv(t,{value:this.value,viewProps:this.viewProps})}},cu=class{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=bi.create(n.expanded),this.swatchC_=new Av(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new ka(t,{parser:n.parser,props:vt.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Dg(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Pa(t,{viewProps:this.viewProps}):null;const i=new Mv(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(c=>{c.addEventListener("blur",this.onPopupChildBlur_),c.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ds({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:c=>c,backward:(c,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_i(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Ca(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!gi(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function Ov(s){return Cn(s.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function Rv(s){return s.getComponents("rgb").reduce((t,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return t<<8|i},0)>>>0}function Dv(s){return new Dt([s>>16&255,s>>8&255,s&255],"rgb")}function Iv(s){return new Dt([s>>24&255,s>>16&255,s>>8&255,bt(s&255,0,255,0,1)],"rgb")}function Fv(s){return typeof s!="number"?Dt.black():Dv(s)}function Nv(s){return typeof s!="number"?Dt.black():Iv(s)}function ea(s,t){return typeof s!="object"||Gt(s)?!1:t in s&&typeof s[t]=="number"}function La(s){return ea(s,"r")&&ea(s,"g")&&ea(s,"b")}function Aa(s){return La(s)&&ea(s,"a")}function Oa(s){return La(s)}function du(s,t){if(s.mode!==t.mode||s.type!==t.type)return!1;const n=s.getComponents(),r=t.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function rd(s){return"a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b]}function Vv(s){const t=xp(s);return t?(n,r)=>{Pn(n,t(r))}:null}function Bv(s){const t=s?Rv:Ov;return(n,r)=>{Pn(n,t(r))}}function Uv(s,t,n){const i=Ir(t,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b),s.writeProperty("a",i.a)}function Gv(s,t,n){const i=Ir(t,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b)}function zv(s,t){return(n,r)=>{s?Uv(n,r,t):Gv(n,r,t)}}function qv(s){var t;return!!(!((t=s==null?void 0:s.color)===null||t===void 0)&&t.alpha)}function Hv(s){return s?t=>uu(t,"0x"):t=>lu(t,"0x")}function Wv(s){return"color"in s||s.view==="color"}Nt({id:"input-color-number",type:"input",accept:(s,t)=>{if(typeof s!="number"||!Wv(t))return null;const n=ou(t);return n?{initialValue:s,params:Object.assign(Object.assign({},n),{supportsAlpha:qv(t)})}:null},binding:{reader:s=>s.params.supportsAlpha?Nv:Fv,equals:du,writer:s=>Bv(s.params.supportsAlpha)},controller:s=>{var t,n;return new cu(s.document,{colorType:"int",expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:Hv(s.params.supportsAlpha),parser:wi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.supportsAlpha,value:s.value,viewProps:s.viewProps})}});function Xv(s,t){if(!Oa(s))return Ir(Dt.black(),t);if(t==="int"){const n=rd(s);return new Dt(n,"rgb")}if(t==="float"){const n=rd(s);return new iu(n,"rgb")}return Ir(Dt.black(),"int")}function Yv(s){return Aa(s)}function Kv(s){return t=>{const n=Xv(t,s);return Ir(n,"int")}}function $v(s,t){return n=>s?wp(n,t):_p(n,t)}Nt({id:"input-color-object",type:"input",accept:(s,t)=>{var n;if(!Oa(s))return null;const r=ou(t);return r?{initialValue:s,params:Object.assign(Object.assign({},r),{colorType:(n=lp(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:s=>Kv(s.params.colorType),equals:du,writer:s=>zv(Yv(s.initialValue),s.params.colorType)},controller:s=>{var t,n;const r=Aa(s.initialValue);return new cu(s.document,{colorType:s.params.colorType,expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:$v(r,s.params.colorType),parser:wi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:s.value,viewProps:s.viewProps})}});Nt({id:"input-color-string",type:"input",accept:(s,t)=>{if(typeof s!="string"||t.view==="text")return null;const n=lv(s,lp(t));if(!n)return null;const r=xp(n);if(!r)return null;const i=ou(t);return i?{initialValue:s,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>uv,equals:du,writer:s=>{const t=Vv(s.params.format);if(!t)throw yn.notBindable();return t}},controller:s=>{var t,n;return new cu(s.document,{colorType:s.params.format.type,expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:s.params.stringifier,parser:wi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.format.alpha,value:s.value,viewProps:s.viewProps})}});let os=class{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const n=this.asm_.toComponents(t).map((r,i)=>{var c,o;return(o=(c=this.components[i])===null||c===void 0?void 0:c.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)}};const nd=ht("pndtxt");let Zv=class{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(nd()),this.textViews.forEach(r=>{const i=t.createElement("div");i.classList.add(nd("a")),i.appendChild(r.element),this.element.appendChild(i)})}};function Qv(s,t,n){return new bo(s,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:Jt(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}let Fs=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>Qv(t,n,i)),this.acs_.forEach((r,i)=>{ds({primary:this.value,secondary:r.value,forward:c=>n.assembly.toComponents(c)[i],backward:(c,o)=>{const d=n.assembly.toComponents(c);return d[i]=o,n.assembly.fromComponents(d)}})}),this.view=new Zv(t,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},Jv=class extends $l{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}};function e0(s,t){const n=[],r=_a(s,t);r&&n.push(r);const i=wa(s);i&&n.push(i);const c=ru(s.options);return c&&n.push(c),new cs(n)}Nt({id:"input-number",type:"input",accept:(s,t)=>{if(typeof s!="number")return null;const n=It(t,r=>Object.assign(Object.assign({},yi(r)),{options:r.optional.custom(Sa),readonly:r.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>fi,constraint:s=>e0(s.params,s.initialValue),writer:s=>Pn},controller:s=>{const t=s.value,n=s.constraint,r=n&&ti(n,Ea);if(r)return new co(s.document,{props:new vt({options:r.values.value("options")}),value:t,viewProps:s.viewProps});const i=mi(s.params,t.rawValue),c=n&&ti(n,pi);return c?new Jc(s.document,Object.assign(Object.assign({},Mg(Object.assign(Object.assign({},i),{keyScale:Jt(i.keyScale),max:c.values.value("max"),min:c.values.value("min")}))),{parser:Vr,value:t,viewProps:s.viewProps})):new bo(s.document,{parser:Vr,props:vt.fromObject(i),value:t,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="number"?null:s.controller.valueController instanceof Jc?new Jv(s.controller):s.controller.valueController instanceof co?new tu(s.controller):null}});let Dn=class{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(Gt(t))return!1;const n=t.x,r=t.y;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}};const jp={toComponents:s=>s.getComponents(),fromComponents:s=>new Dn(...s)},Ys=ht("p2d");let t0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ys()),n.viewProps.bindClassModifiers(this.element),un(n.expanded,Bn(this.element,Ys(void 0,"expanded")));const r=t.createElement("div");r.classList.add(Ys("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add(Ys("b")),i.appendChild(ja(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const c=t.createElement("div");if(c.classList.add(Ys("t")),r.appendChild(c),this.textElement=c,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(Ys("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const Wn=ht("p2dp");let r0=class{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Wn()),n.layout==="popup"&&this.element.classList.add(Wn(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Wn("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(At,"svg");i.classList.add(Wn("g")),this.padElement.appendChild(i),this.svgElem_=i;const c=t.createElementNS(At,"line");c.classList.add(Wn("ax")),c.setAttributeNS(null,"x1","0"),c.setAttributeNS(null,"y1","50%"),c.setAttributeNS(null,"x2","100%"),c.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(c);const o=t.createElementNS(At,"line");o.classList.add(Wn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const d=t.createElementNS(At,"line");d.classList.add(Wn("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const a=t.createElement("div");a.classList.add(Wn("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=bt(t,-r,+r,0,100),c=bt(n,-r,+r,0,100),o=this.props_.get("invertsY")?100-c:c;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function sd(s,t,n){return[fr(t[0],dn(s)),fr(t[1],ss(s))*(n?1:-1)]}let n0=class{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new r0(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=this.props.get("max"),i=bt(t.point.x,0,t.bounds.width,-r,+r),c=bt(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-r,+r);this.value.setRawValue(new Dn(i,c),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){ri(t.key)&&t.preventDefault();const[n,r]=sd(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Dn(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[n,r]=sd(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},s0=class{constructor(t,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=bi.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Pa(t,{viewProps:this.viewProps}):null;const c=new n0(t,{layout:n.pickerLayout,props:new vt({invertsY:Jt(n.invertsY),max:Jt(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});c.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=c,this.textC_=new Fs(t,{assembly:jp,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new t0(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ds({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_i(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Ca(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!gi(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}};function o0(s){return Dn.isObject(s)?new Dn(s.x,s.y):new Dn}function i0(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y)}function a0(s,t){return new os({assembly:jp,components:[On(Object.assign(Object.assign({},s),s.x),t.x),On(Object.assign(Object.assign({},s),s.y),t.y)]})}function od(s,t){var n,r;if(!Gt(s.min)||!Gt(s.max))return Math.max(Math.abs((n=s.min)!==null&&n!==void 0?n:0),Math.abs((r=s.max)!==null&&r!==void 0?r:0));const i=zh(s);return Math.max(Math.abs(i)*10,Math.abs(t)*10)}function l0(s,t){var n,r;const i=od(Ss(s,(n=s.x)!==null&&n!==void 0?n:{}),t.x),c=od(Ss(s,(r=s.y)!==null&&r!==void 0?r:{}),t.y);return Math.max(i,c)}function u0(s){if(!("y"in s))return!1;const t=s.y;return t&&"inverted"in t?!!t.inverted:!1}Nt({id:"input-point2d",type:"input",accept:(s,t)=>{if(!Dn.isObject(s))return null;const n=It(t,r=>Object.assign(Object.assign({},ni(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Ta),readonly:r.optional.constant(!1),x:r.optional.custom(Dr),y:r.optional.object(Object.assign(Object.assign({},ni(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:s,params:n}:null},binding:{reader:()=>o0,constraint:s=>a0(s.params,s.initialValue),equals:Dn.equals,writer:()=>i0},controller:s=>{var t,n;const r=s.document,i=s.value,c=s.constraint,o=[s.params.x,s.params.y];return new s0(r,{axes:i.rawValue.getComponents().map((d,a)=>{var l;return Kl({constraint:c.components[a],initialValue:d,params:Ss(s.params,(l=o[a])!==null&&l!==void 0?l:{})})}),expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,invertsY:u0(s.params),max:l0(s.params,i.rawValue),parser:Vr,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps})}});let js=class{constructor(t=0,n=0,r=0){this.x=t,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(Gt(t))return!1;const n=t.x,r=t.y,i=t.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const Cp={toComponents:s=>s.getComponents(),fromComponents:s=>new js(...s)};function c0(s){return js.isObject(s)?new js(s.x,s.y,s.z):new js}function d0(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y),s.writeProperty("z",t.z)}function h0(s,t){return new os({assembly:Cp,components:[On(Object.assign(Object.assign({},s),s.x),t.x),On(Object.assign(Object.assign({},s),s.y),t.y),On(Object.assign(Object.assign({},s),s.z),t.z)]})}Nt({id:"input-point3d",type:"input",accept:(s,t)=>{if(!js.isObject(s))return null;const n=It(t,r=>Object.assign(Object.assign({},ni(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Dr),y:r.optional.custom(Dr),z:r.optional.custom(Dr)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>c0,constraint:s=>h0(s.params,s.initialValue),equals:js.equals,writer:s=>d0},controller:s=>{const t=s.value,n=s.constraint,r=[s.params.x,s.params.y,s.params.z];return new Fs(s.document,{assembly:Cp,axes:t.rawValue.getComponents().map((i,c)=>{var o;return Kl({constraint:n.components[c],initialValue:i,params:Ss(s.params,(o=r[c])!==null&&o!==void 0?o:{})})}),parser:Vr,value:t,viewProps:s.viewProps})}});let Cs=class{constructor(t=0,n=0,r=0,i=0){this.x=t,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(Gt(t))return!1;const n=t.x,r=t.y,i=t.z,c=t.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof c!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const Ep={toComponents:s=>s.getComponents(),fromComponents:s=>new Cs(...s)};function p0(s){return Cs.isObject(s)?new Cs(s.x,s.y,s.z,s.w):new Cs}function f0(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y),s.writeProperty("z",t.z),s.writeProperty("w",t.w)}function m0(s,t){return new os({assembly:Ep,components:[On(Object.assign(Object.assign({},s),s.x),t.x),On(Object.assign(Object.assign({},s),s.y),t.y),On(Object.assign(Object.assign({},s),s.z),t.z),On(Object.assign(Object.assign({},s),s.w),t.w)]})}Nt({id:"input-point4d",type:"input",accept:(s,t)=>{if(!Cs.isObject(s))return null;const n=It(t,r=>Object.assign(Object.assign({},ni(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Dr),x:r.optional.custom(Dr),y:r.optional.custom(Dr),z:r.optional.custom(Dr)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>p0,constraint:s=>m0(s.params,s.initialValue),equals:Cs.equals,writer:s=>f0},controller:s=>{const t=s.value,n=s.constraint,r=[s.params.x,s.params.y,s.params.z,s.params.w];return new Fs(s.document,{assembly:Ep,axes:t.rawValue.getComponents().map((i,c)=>{var o;return Kl({constraint:n.components[c],initialValue:i,params:Ss(s.params,(o=r[c])!==null&&o!==void 0?o:{})})}),parser:Vr,value:t,viewProps:s.viewProps})}});function y0(s){const t=[],n=ru(s.options);return n&&t.push(n),new cs(t)}Nt({id:"input-string",type:"input",accept:(s,t)=>{if(typeof s!="string")return null;const n=It(t,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(Sa)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>su,constraint:s=>y0(s.params),writer:s=>Pn},controller:s=>{const t=s.document,n=s.value,r=s.constraint,i=r&&ti(r,Ea);return i?new co(t,{props:new vt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new ka(t,{parser:c=>c,props:vt.fromObject({formatter:Ll}),value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="string"?null:s.controller.valueController instanceof co?new tu(s.controller):null}});const _o={monitor:{defaultInterval:200,defaultRows:3}},id=ht("mll");let g0=class{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(id()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.classList.add(id("i")),r.style.height=`calc(var(${rp("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}},hu=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new g0(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const ad=ht("sgl");let v0=class{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(ad()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(ad("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},pu=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new v0(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};Nt({id:"monitor-bool",type:"monitor",accept:(s,t)=>{if(typeof s!="boolean")return null;const n=It(t,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>nu},controller:s=>{var t;return s.value.rawValue.length===1?new pu(s.document,{formatter:Qc,value:s.value,viewProps:s.viewProps}):new hu(s.document,{formatter:Qc,rows:(t=s.params.rows)!==null&&t!==void 0?t:_o.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}});let b0=class extends $l{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}};const Xn=ht("grl");let _0=class{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Xn()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=t.createElementNS(At,"svg");r.classList.add(Xn("g")),r.style.height=`calc(var(${rp("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(At,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const c=t.createElement("div");c.classList.add(Xn("t"),ht("tt")()),this.element.appendChild(c),this.tooltipElem_=c,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),c=this.props_.get("max"),o=[];this.value.rawValue.forEach((y,u)=>{if(y===void 0)return;const p=bt(u,0,r,0,t),h=bt(y,i,c,n,0);o.push([p,h].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const d=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){d.classList.remove(Xn("t","a"));return}const l=bt(this.cursor_.rawValue,0,r,0,t),b=bt(a,i,c,n,0);d.style.left=`${l}px`,d.style.top=`${b}px`,d.textContent=`${this.formatter_(a)}`,d.classList.contains(Xn("t","a"))||(d.classList.add(Xn("t","a"),Xn("t","in")),oa(d),d.classList.remove(Xn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},fu=class{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Jt(-1),this.view=new _0(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!gi(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new br(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return gn(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return vn(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(bt(t.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(bt(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function Al(s){return Gt(s.format)?yr(2):s.format}function w0(s){var t;return s.value.rawValue.length===1?new pu(s.document,{formatter:Al(s.params),value:s.value,viewProps:s.viewProps}):new hu(s.document,{formatter:Al(s.params),rows:(t=s.params.rows)!==null&&t!==void 0?t:_o.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}function x0(s){var t,n,r;return new fu(s.document,{formatter:Al(s.params),rows:(t=s.params.rows)!==null&&t!==void 0?t:_o.monitor.defaultRows,props:vt.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:100,min:(r=s.params.min)!==null&&r!==void 0?r:0}),value:s.value,viewProps:s.viewProps})}function ld(s){return s.view==="graph"}Nt({id:"monitor-number",type:"monitor",accept:(s,t)=>{if(typeof s!="number")return null;const n=It(t,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>ld(s)?64:1,reader:s=>fi},controller:s=>ld(s.params)?x0(s):w0(s),api:s=>s.controller.valueController instanceof fu?new b0(s.controller):null});Nt({id:"monitor-string",type:"monitor",accept:(s,t)=>{if(typeof s!="string")return null;const n=It(t,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>su},controller:s=>{var t;const n=s.value;return n.rawValue.length>1||s.params.multiline?new hu(s.document,{formatter:Ll,rows:(t=s.params.rows)!==null&&t!==void 0?t:_o.monitor.defaultRows,value:n,viewProps:s.viewProps}):new pu(s.document,{formatter:Ll,value:n,viewProps:s.viewProps})}});const la={baseBackgroundColor:"hsl(230, 7%, 17%)",baseBorderRadius:"6px",baseFontFamily:"Roboto Mono, Source Code Pro, Menlo, Courier, monospace",baseShadowColor:"rgba(0, 0, 0, 0.2)",bladeBorderRadius:"2px",bladeHorizontalPadding:"4px",bladeValueWidth:"160px",buttonBackgroundColor:"hsl(230, 7%, 70%)",buttonBackgroundColorActive:"#d6d7db",buttonBackgroundColorFocus:"#c8cad0",buttonBackgroundColorHover:"#bbbcc4",buttonForegroundColor:"hsl(230, 7%, 17%)",containerBackgroundColor:"rgba(187, 188, 196, 0.1)",containerBackgroundColorActive:"rgba(187, 188, 196, 0.25)",containerBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",containerBackgroundColorHover:"rgba(187, 188, 196, 0.15)",containerForegroundColor:"hsl(230, 7%, 75%)",containerHorizontalPadding:"4px",containerUnitSize:"20px",containerUnitSpacing:"4px",containerVerticalPadding:"4px",grooveForegroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColorActive:"rgba(187, 188, 196, 0.25)",inputBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",inputBackgroundColorHover:"rgba(187, 188, 196, 0.15)",inputForegroundColor:"hsl(230, 7%, 75%)",labelForegroundColor:"rgba(187, 188, 196, 0.7)",monitorBackgroundColor:"rgba(0, 0, 0, 0.2)",monitorForegroundColor:"rgba(187, 188, 196, 0.7)",pluginImageDraggingColor:"hsla(230, 100%, 66%, 1)"};Object.keys(la).reduce((s,t)=>(s[t]=t,s),{});const j0=new Map([["baseBackgroundColor","--tp-base-background-color"],["baseBorderRadius","--tp-base-border-radius"],["baseFontFamily","--tp-base-font-family"],["baseShadowColor","--tp-base-shadow-color"],["bladeBorderRadius","--tp-blade-border-radius"],["bladeHorizontalPadding","--tp-blade-horizontal-padding"],["bladeValueWidth","--tp-blade-value-width"],["buttonBackgroundColor","--tp-button-background-color"],["buttonBackgroundColorActive","--tp-button-background-color-active"],["buttonBackgroundColorFocus","--tp-button-background-color-focus"],["buttonBackgroundColorHover","--tp-button-background-color-hover"],["buttonForegroundColor","--tp-button-foreground-color"],["containerBackgroundColor","--tp-container-background-color"],["containerBackgroundColorActive","--tp-container-background-color-active"],["containerBackgroundColorFocus","--tp-container-background-color-focus"],["containerBackgroundColorHover","--tp-container-background-color-hover"],["containerForegroundColor","--tp-container-foreground-color"],["containerHorizontalPadding","--tp-container-horizontal-padding"],["containerUnitSize","--tp-container-unit-size"],["containerUnitSpacing","--tp-container-unit-spacing"],["containerVerticalPadding","--tp-container-vertical-padding"],["grooveForegroundColor","--tp-groove-foreground-color"],["inputBackgroundColor","--tp-input-background-color"],["inputBackgroundColorActive","--tp-input-background-color-active"],["inputBackgroundColorFocus","--tp-input-background-color-focus"],["inputBackgroundColorHover","--tp-input-background-color-hover"],["inputForegroundColor","--tp-input-foreground-color"],["labelForegroundColor","--tp-label-foreground-color"],["monitorBackgroundColor","--tp-monitor-background-color"],["monitorForegroundColor","--tp-monitor-foreground-color"],["pluginImageDraggingColor","--tp-plugin-image-dragging-color"]]);function Ol(s){if(s!==void 0){if(typeof s=="string")return s;if(Aa(s))return`rgba(${s.r}, ${s.g}, ${s.b}, ${s.a})`;if(La(s))return`rgb(${s.r}, ${s.g}, ${s.b})`}}function ud(s){if(s.startsWith("--tp-"))return s;const t=j0.get(s);if(t)return t;throw new Error(`Unknown Tweakpane CSS theme map variable key: "${s}"`)}function cd(s,t){return(s==null?void 0:s[t])===void 0?Ol(la[t]):Ol(s[t])}function C0(s,t){const n=Fy().documentElement;if(t===void 0)for(const r of Object.keys(la)){const i=ud(r);s.style.getPropertyValue(i).length>0&&s.style.removeProperty(i)}else for(const[r,i]of Object.entries(t)){const c=ud(r),o=Ol(i),d=la[r]||void 0,a=n.style.getPropertyValue(c)||void 0;t!==void 0&&o!==void 0&&(((a&&o!==a)??!1)||!a&&((d&&o!==d)??!1))?s.style.setProperty(c,o):s.style.getPropertyValue(c).length>0&&s.style.removeProperty(c)}}const Sp=!0;function dd(s){let t,n=`${s[0]}px`;return{c(){t=Yr("div"),or(t,"background",null),or(t,"height",n)},m(r,i){_t(r,t,i)},p(r,i){i&1&&n!==(n=`${r[0]}px`)&&or(t,"height",n)},d(r){r&&gt(t)}}}function E0(s){let t,n=s[0]>0&&dd(s);return{c(){n&&n.c(),t=mr()},m(r,i){n&&n.m(r,i),_t(r,t,i)},p(r,[i]){r[0]>0?n?n.p(r,i):(n=dd(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:Kt,o:Kt,d(r){r&&gt(t),n&&n.d(r)}}}function hd(s){return Number.parseFloat(s.replace("px",""))}function S0(s,t,n){let r,{theme:i=void 0}=t,{keysAdd:c=[]}=t,{keysSubtract:o=[]}=t,{extra:d=void 0}=t;function a(l,b,y=0){return l.reduce((u,p)=>u+=hd(cd(i,p)),0)-b.reduce((u,p)=>u+=hd(cd(i,p)),0)+y}return s.$$set=l=>{"theme"in l&&n(1,i=l.theme),"keysAdd"in l&&n(2,c=l.keysAdd),"keysSubtract"in l&&n(3,o=l.keysSubtract),"extra"in l&&n(4,d=l.extra)},s.$$.update=()=>{s.$$.dirty&28&&n(0,r=a(c,o,d))},[r,i,c,o,d]}class hs extends cr{constructor(t){super(),ur(this,t,S0,E0,ar,{theme:1,keysAdd:2,keysSubtract:3,extra:4})}}function Ra(s){return s.constructor.name==="Pane"}function sl(s,t,n){return Math.min(Math.max(s,t),n)}function Da(s){let t=0,n=s;for(;(n=n.previousElementSibling)!==null;)t++;return t}function is(s,...t){for(const n of t)n in s&&delete s[n];return s}function pd(s){s.isTrusted&&s.stopPropagation()}function mu(s,t,n,r){if(t){const i=t.querySelector(`.${n}`);if(i){const c=r?t.querySelector(`.${r}`):void 0;s?(i.removeEventListener("click",pd,{capture:!0}),i.style.cursor="pointer",c&&(c.style.display="block")):(i.addEventListener("click",pd,{capture:!0}),i.style.cursor="default",c&&(c.style.display="none"))}}else console.warn(`Title bar element not found with class "${n}"`)}function fd(s,t){const n={};for(const[r,i]of t.entries())n[i]=s[r];return n}function md(s,t){return t.map(n=>s[n])}function P0(s){var t,n,r,i;return(i=(r=(n=(t=s.controller.valueController)==null?void 0:t.foldable_)==null?void 0:n.valMap_)==null?void 0:r.expanded)==null?void 0:i.value_}function k0(s){var n,r,i,c,o,d,a;return((c=(i=(r=(n=s.controller)==null?void 0:n.valueController)==null?void 0:r.view)==null?void 0:i.swatchElement)==null?void 0:c.querySelector("button"))??((a=(d=(o=s.controller)==null?void 0:o.valueController)==null?void 0:d.view)==null?void 0:a.buttonElement)}/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Ht(s){return s==null}function yu(s){return s!==null&&typeof s=="object"}function Rl(s){return s!==null&&typeof s=="object"}function T0(s,t){if(s.length!==t.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==t[n])return!1;return!0}function Ts(s,t){return Array.from(new Set([...Object.keys(s),...Object.keys(t)])).reduce((r,i)=>{const c=s[i],o=t[i];return Rl(c)&&Rl(o)?Object.assign(Object.assign({},r),{[i]:Ts(c,o)}):Object.assign(Object.assign({},r),{[i]:i in t?o:c})},{})}function gu(s){return yu(s)?"target"in s:!1}const M0={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:s=>`Not compatible with  plugin '${s.id}'`,propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class ir{static alreadyDisposed(){return new ir({type:"alreadydisposed"})}static notBindable(){return new ir({type:"notbindable"})}static notCompatible(t,n){return new ir({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new ir({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new ir({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=M0[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class ua{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){const r=this.read();if(!ua.isBindable(r))throw ir.notBindable();if(!(t in r))throw ir.propertyNotFound(t);r[t]=n}}class gr{constructor(){this.observers_={}}on(t,n,r){var i;let c=this.observers_[t];return c||(c=this.observers_[t]=[]),c.push({handler:n,key:(i=r==null?void 0:r.key)!==null&&i!==void 0?i:n}),this}off(t,n){const r=this.observers_[t];return r&&(this.observers_[t]=r.filter(i=>i.key!==n)),this}emit(t,n){const r=this.observers_[t];r&&r.forEach(i=>{i.handler(n)})}}class L0{constructor(t,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,c)=>i===c,this.emitter=new gr,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,c=this.rawValue_;this.equals_(c,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:c,rawValue:i,sender:this}))}}class A0{constructor(t){this.emitter=new gr,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===t&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class O0{constructor(t){this.emitter=new gr,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function er(s,t){const n=t==null?void 0:t.constraint,r=t==null?void 0:t.equals;return!n&&!r?new A0(s):new L0(s,t)}function R0(s){return[new O0(s),(t,n)=>{s.setRawValue(t,n)}]}class jt{constructor(t){this.emitter=new gr,this.valMap_=t;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((r,i)=>Object.assign(r,{[i]:er(t[i])}),{})}static fromObject(t){const n=this.createCore(t);return new jt(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}}class xi{constructor(t){this.values=jt.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(t,r),n)}}class D0{constructor(t){this.values=jt.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");let i=t;return Ht(r)||(i=Math.max(i,r)),Ht(n)||(i=Math.min(i,n)),i}}class I0{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){const n=this.origin%this.step,r=Math.round((t-n)/this.step);return n+r*this.step}}class F0{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const N0={"**":(s,t)=>Math.pow(s,t),"*":(s,t)=>s*t,"/":(s,t)=>s/t,"%":(s,t)=>s%t,"+":(s,t)=>s+t,"-":(s,t)=>s-t,"<<":(s,t)=>s<<t,">>":(s,t)=>s>>t,">>>":(s,t)=>s>>>t,"&":(s,t)=>s&t,"^":(s,t)=>s^t,"|":(s,t)=>s|t};class V0{constructor(t,n,r){this.left=n,this.operator=t,this.right=r}evaluate(){const t=N0[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const B0={"+":s=>s,"-":s=>-s,"~":s=>~s};class U0{constructor(t,n){this.operator=t,this.expression=n}evaluate(){const t=B0[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function vu(s){return(t,n)=>{for(let r=0;r<s.length;r++){const i=s[r](t,n);if(i!=="")return i}return""}}function si(s,t){var n;const r=s.substr(t).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function G0(s,t){const n=s.substr(t,1);return n.match(/^[1-9]$/)?n:""}function oi(s,t){var n;const r=s.substr(t).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function z0(s,t){const n=oi(s,t);if(n!=="")return n;const r=s.substr(t,1);if(t+=1,r!=="-"&&r!=="+")return"";const i=oi(s,t);return i===""?"":r+i}function bu(s,t){const n=s.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";const r=z0(s,t);return r===""?"":n+r}function Pp(s,t){const n=s.substr(t,1);if(n==="0")return n;const r=G0(s,t);return t+=r.length,r===""?"":r+oi(s,t)}function q0(s,t){const n=Pp(s,t);if(t+=n.length,n==="")return"";const r=s.substr(t,1);if(t+=r.length,r!==".")return"";const i=oi(s,t);return t+=i.length,n+r+i+bu(s,t)}function H0(s,t){const n=s.substr(t,1);if(t+=n.length,n!==".")return"";const r=oi(s,t);return t+=r.length,r===""?"":n+r+bu(s,t)}function W0(s,t){const n=Pp(s,t);return t+=n.length,n===""?"":n+bu(s,t)}const X0=vu([q0,H0,W0]);function Y0(s,t){var n;const r=s.substr(t).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K0(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";const r=Y0(s,t);return r===""?"":n+r}function $0(s,t){var n;const r=s.substr(t).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Z0(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";const r=$0(s,t);return r===""?"":n+r}function Q0(s,t){var n;const r=s.substr(t).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function J0(s,t){const n=s.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";const r=Q0(s,t);return r===""?"":n+r}const eb=vu([K0,Z0,J0]),tb=vu([eb,X0]);function rb(s,t){const n=tb(s,t);return t+=n.length,n===""?null:{evaluable:new F0(n),cursor:t}}function nb(s,t){const n=s.substr(t,1);if(t+=n.length,n!=="(")return null;const r=Tp(s,t);if(!r)return null;t=r.cursor,t+=si(s,t).length;const i=s.substr(t,1);return t+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:t}}function sb(s,t){var n;return(n=rb(s,t))!==null&&n!==void 0?n:nb(s,t)}function kp(s,t){const n=sb(s,t);if(n)return n;const r=s.substr(t,1);if(t+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=kp(s,t);return i?(t=i.cursor,{cursor:t,evaluable:new U0(r,i.evaluable)}):null}function ob(s,t,n){n+=si(t,n).length;const r=s.filter(i=>t.startsWith(i,n))[0];return r?(n+=r.length,n+=si(t,n).length,{cursor:n,operator:r}):null}function ib(s,t){return(n,r)=>{const i=s(n,r);if(!i)return null;r=i.cursor;let c=i.evaluable;for(;;){const o=ob(t,n,r);if(!o)break;r=o.cursor;const d=s(n,r);if(!d)return null;r=d.cursor,c=new V0(o.operator,c,d.evaluable)}return c?{cursor:r,evaluable:c}:null}}const ab=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,t)=>ib(s,t),kp);function Tp(s,t){return t+=si(s,t).length,ab(s,t)}function lb(s){const t=Tp(s,0);return!t||t.cursor+si(s,t.cursor).length!==s.length?null:t.evaluable}function Fn(s){var t;const n=lb(s);return(t=n==null?void 0:n.evaluate())!==null&&t!==void 0?t:null}function Mp(s){if(typeof s=="number")return s;if(typeof s=="string"){const t=Fn(s);if(!Ht(t))return t}return 0}function ub(s){return String(s)}function qr(s){return t=>t.toFixed(Math.max(Math.min(s,20),0))}function Rt(s,t,n,r,i){const c=(s-t)/(n-t);return r+c*(i-r)}function yd(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function _r(s,t,n){return Math.min(Math.max(s,t),n)}function Lp(s,t){return(s%t+t)%t}function cb(s,t){return Ht(s.step)?Math.max(yd(t),2):yd(s.step)}function Ap(s){var t;return(t=s.step)!==null&&t!==void 0?t:1}function Op(s,t){var n;const r=Math.abs((n=s.step)!==null&&n!==void 0?n:t);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function Rp(s,t){return Ht(s.step)?null:new I0(s.step,t)}function Dp(s){return!Ht(s.max)&&!Ht(s.min)?new xi({max:s.max,min:s.min}):!Ht(s.max)||!Ht(s.min)?new D0({max:s.max,min:s.min}):null}function Ip(s,t){var n,r,i;return{formatter:(n=s.format)!==null&&n!==void 0?n:qr(cb(s,t)),keyScale:(r=s.keyScale)!==null&&r!==void 0?r:Ap(s),pointerScale:(i=s.pointerScale)!==null&&i!==void 0?i:Op(s,t)}}function Fp(s){return{format:s.optional.function,keyScale:s.optional.number,max:s.optional.number,min:s.optional.number,pointerScale:s.optional.number,step:s.optional.number}}function _u(s){return{constraint:s.constraint,textProps:jt.fromObject(Ip(s.params,s.initialValue))}}class Ns{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class Ia{constructor(t){this.target=t}}class ji extends Ia{constructor(t,n,r){super(t),this.value=n,this.last=r??!0}}class db extends Ia{constructor(t,n){super(t),this.expanded=n}}class hb extends Ia{constructor(t,n){super(t),this.index=n}}class pb extends Ia{constructor(t,n){super(t),this.native=n}}class ii extends Ns{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new gr,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const n=this.controller.value;this.emitter_.emit("change",new ji(this,n.binding.target.read(),t.options.last))}}class fb{constructor(t,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new gr}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function mb(s){if(!("binding"in s))return!1;const t=s.binding;return gu(t)&&"read"in t&&"write"in t}function yb(s,t){const r=Object.keys(t).reduce((i,c)=>{if(i===void 0)return;const o=t[c],d=o(s[c]);return d.succeeded?Object.assign(Object.assign({},i),{[c]:d.value}):void 0},{});return r}function gb(s,t){return s.reduce((n,r)=>{if(n===void 0)return;const i=t(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function vb(s){return s===null?!1:typeof s=="object"}function Ln(s){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};const r=s(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function gd(s){return{custom:t=>Ln(t)(s),boolean:Ln(t=>typeof t=="boolean"?t:void 0)(s),number:Ln(t=>typeof t=="number"?t:void 0)(s),string:Ln(t=>typeof t=="string"?t:void 0)(s),function:Ln(t=>typeof t=="function"?t:void 0)(s),constant:t=>Ln(n=>n===t?t:void 0)(s),raw:Ln(t=>t)(s),object:t=>Ln(n=>{if(vb(n))return yb(n,t)})(s),array:t=>Ln(n=>{if(Array.isArray(n))return gb(n,t)})(s)}}const Dl={optional:gd(!0),required:gd(!1)};function rr(s,t){const n=t(Dl),r=Dl.required.object(n)(s);return r.succeeded?r.value:void 0}function en(s,t,n,r){if(t&&!t(s))return!1;const i=rr(s,n);return i?r(i):!1}function tn(s,t){var n;return Ts((n=s==null?void 0:s())!==null&&n!==void 0?n:{},t)}function Es(s){return"value"in s}function Np(s){if(!yu(s)||!("binding"in s))return!1;const t=s.binding;return gu(t)}const jn="http://www.w3.org/2000/svg";function ca(s){s.offsetHeight}function bb(s,t){const n=s.style.transition;s.style.transition="none",t(),s.style.transition=n}function wu(s){return s.ontouchstart!==void 0}function _b(){return globalThis}function wb(){return _b().document}function xb(s){const t=s.ownerDocument.defaultView;return t&&"document"in t?s.getContext("2d",{willReadFrequently:!0}):null}const jb={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Fa(s,t){const n=s.createElementNS(jn,"svg");return n.innerHTML=jb[t],n}function Vp(s,t,n){s.insertBefore(t,s.children[n])}function xu(s){s.parentElement&&s.parentElement.removeChild(s)}function Bp(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function Cb(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function Up(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}function In(s,t){s.emitter.on("change",n=>{t(n.rawValue)}),t(s.rawValue)}function En(s,t,n){In(s.value(t),n)}const Eb="tp";function kt(s){return(n,r)=>[Eb,"-",s,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Uo=kt("lbl");function Sb(s,t){const n=s.createDocumentFragment();return t.split(`
`).map(i=>s.createTextNode(i)).forEach((i,c)=>{c>0&&n.appendChild(s.createElement("br")),n.appendChild(i)}),n}class Gp{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Uo()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Uo("l")),En(n.props,"label",c=>{Ht(c)?this.element.classList.add(Uo(void 0,"nol")):(this.element.classList.remove(Uo(void 0,"nol")),Cb(r),r.appendChild(Sb(t,c)))}),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("div");i.classList.add(Uo("v")),this.element.appendChild(i),this.valueElement=i}}class zp{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Gp(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return en(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return tn(null,{label:this.props.get("label")})}}function Pb(){return["veryfirst","first","last","verylast"]}const vd=kt(""),bd={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Na{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Pb().forEach(r=>{n.classList.remove(vd(void 0,bd[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(vd(void 0,bd[r]))})}),this.viewProps.handleDispose(()=>{xu(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return en(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return tn(null,Object.assign({},this.viewProps.exportState()))}}class Ms extends Na{constructor(t,n){if(n.value!==n.valueController.value)throw ir.shouldNeverHappen();const r=n.valueController.viewProps,i=new zp(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Gp(t,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return en(t,n=>{var r,i,c;return super.importState(n)&&this.labelController.importProps(n)&&((c=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,t))!==null&&c!==void 0?c:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,r;return tn(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:{}))}}function _d(s){const t=Object.assign({},s);return delete t.value,t}class qp extends Ms{constructor(t,n){super(t,n),this.tag=n.tag}importState(t){return en(t,n=>super.importState(_d(t)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return tn(()=>_d(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function kb(s){return Es(s)&&Np(s.value)}class Tb extends qp{importState(t){return en(t,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function Mb(s){return Es(s)&&mb(s.value)}function Hp(s,t){for(;s.length<t;)s.push(void 0)}function Lb(s){const t=[];return Hp(t,s),t}function Ab(s){const t=s.indexOf(void 0);return t<0?s:s.slice(0,t)}function Ob(s,t){const n=[...Ab(s),t];return n.length>s.length?n.splice(0,n.length-s.length):Hp(n,s.length),n}class Rb{constructor(t){this.emitter=new gr,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=er(Lb(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=Ob(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Db(s){if(!("binding"in s))return!1;const t=s.binding;return gu(t)&&"read"in t&&!("write"in t)}class Ib extends qp{exportState(){return tn(()=>super.exportState(),{binding:{readonly:!0}})}}function Fb(s){return Es(s)&&Db(s.value)}class Nb extends Ns{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(t,c=>{r(new pb(this,c.nativeEvent))}),this}off(t,n){return this.controller.buttonController.emitter.off(t,n),this}}function Vb(s,t,n){n?s.classList.add(t):s.classList.remove(t)}function wo(s,t){return n=>{Vb(s,t,n)}}function ju(s,t){In(s,n=>{t.textContent=n??""})}const ol=kt("btn");class Bb{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ol()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add(ol("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(ol("t")),ju(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class Ub{constructor(t,n){this.emitter=new gr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Bb(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return en(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return tn(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class wd extends Na{constructor(t,n){const r=new Ub(t,{props:n.buttonProps,viewProps:n.viewProps}),i=new zp(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(t){return en(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return tn(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Wp{constructor(t){const[n,r]=t.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const xo=new Wp("2.0.3");function Br(s){return Object.assign({core:xo},s)}const Gb=Br({id:"button",type:"blade",accept(s){const t=rr(s,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(s){return new wd(s.document,{blade:s.blade,buttonProps:jt.fromObject({title:s.params.title}),labelProps:jt.fromObject({label:s.params.label}),viewProps:s.viewProps})},api(s){return s.controller instanceof wd?new Nb(s.controller):null}});function zb(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function qb(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function Hb(s,t){return s.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function Wb(s){return yu(s)?"refresh"in s&&typeof s.refresh=="function":!1}function Xb(s,t){if(!ua.isBindable(s))throw ir.notBindable();return new ua(s,t)}class Yb{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new gr,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,r){const i=r??{},c=this.controller_.element.ownerDocument,o=this.pool_.createBinding(c,Xb(t,n),i),d=this.pool_.createBindingApi(o);return this.add(d,i.index)}addFolder(t){return qb(this,t)}addButton(t){return zb(this,t)}addTab(t){return Hb(this,t)}add(t,n){const r=t.controller;return this.controller_.rack.add(r,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,t),i=this.pool_.createApi(r);return this.add(i,t.index)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.children.forEach(t=>{Wb(t)&&t.refresh()})}onRackValueChange_(t){const n=t.bladeController,r=this.pool_.createApi(n),i=Np(n.value)?n.value.binding:null;this.emitter_.emit("change",new ji(r,i?i.target.read():n.value.rawValue,t.options.last))}}class Cu extends Ns{constructor(t,n){super(t),this.rackApi_=new Yb(t.rackController,n)}refresh(){this.rackApi_.refresh()}}class Eu extends Na{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return en(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return tn(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function Il(s){return"rackController"in s}class Kb{constructor(t){this.emitter=new gr,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw ir.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(c=>{this.cache_.add(c)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}remove(t){const n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);const r=this.extract_(t);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function $b(s,t){for(let n=0;n<s.length;n++){const r=s[n];if(Es(r)&&r.value===t)return r}return null}function Zb(s){return Il(s)?s.rackController.rack.bcSet_:null}class Qb{constructor(t){var n,r;this.emitter=new gr,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new Kb(Zb),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var r;(r=t.parent)===null||r===void 0||r.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;const r=t.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Es(r))r.value.emitter.on("change",this.onChildValueChange_);else if(Il(r)){const i=r.rackController.rack;if(i){const c=i.emitter;c.on("layout",this.onRackLayout_),c.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;const r=t.item;if(Es(r))r.value.emitter.off("change",this.onChildValueChange_);else if(Il(r)){const i=r.rackController.rack;if(i){const c=i.emitter;c.off("layout",this.onRackLayout_),c.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach(i=>{const c=[];i===n&&(c.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&c.push("veryfirst")),i===r&&(c.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&c.push("verylast")),i.blade.set("positions",c)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){const n=$b(this.find(Es),t.sender);if(!n)throw ir.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Su{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const n=new Qb({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&Vp(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&xu(t.bladeController.view.element)}}function jo(){return new jt({positions:er([],{equals:T0})})}class Ci extends jt{constructor(t){super(t)}static create(t){const n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=jt.createCore(n);return new Ci(r)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ht(t)?`${t}px`:"auto"}bindExpandedClass(t,n){const r=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};En(this,"expanded",r),En(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Jb(s,t){let n=0;return bb(t,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),ca(t),n=t.clientHeight,s.set("temporaryExpanded",null),ca(t)}),n}function xd(s,t){t.style.height=s.styleHeight}function Pu(s,t){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),Ht(s.get("expandedHeight"))){const n=Jb(s,t);n>0&&s.set("expandedHeight",n)}s.set("shouldFixHeight",!0),ca(t)}),s.emitter.on("change",()=>{xd(s,t)}),xd(s,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&s.cleanUpTransition()})}class Xp extends Cu{constructor(t,n){super(t,n),this.emitter_=new gr,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new db(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const Yp=kt("cnt");class e_{constructor(t,n){var r;this.className_=kt((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Yp()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),En(this.foldable_,"completed",wo(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),En(n.props,"title",l=>{Ht(l)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const c=t.createElement("div");c.classList.add(this.className_("i")),this.element.appendChild(c);const o=t.createElement("div");o.classList.add(this.className_("t")),ju(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const d=t.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const a=t.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class Fl extends Eu{constructor(t,n){var r;const i=Ci.create((r=n.expanded)!==null&&r!==void 0?r:!0),c=new e_(t,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Su({blade:n.blade,element:c.containerElement,root:n.root,viewProps:n.viewProps}),view:c})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,Pu(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return en(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return tn(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const t_=Br({id:"folder",type:"blade",accept(s){const t=rr(s,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(s){return new Fl(s.document,{blade:s.blade,expanded:s.params.expanded,props:jt.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof Fl?new Xp(s.controller,s.pool):null}}),r_=kt("");function jd(s,t){return wo(s,r_(void 0,t))}class Un extends jt{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=R0(er(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,r,i;const c=t??{};return new Un(jt.createCore({disabled:(n=c.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=c.hidden)!==null&&r!==void 0?r:!1,parent:(i=c.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){In(this.globalDisabled_,jd(t,"disabled")),En(this,"hidden",jd(t,"hidden"))}bindDisabled(t){In(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){In(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;const r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Cd=kt("tbp");class n_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Cd()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Cd("c")),this.element.appendChild(r),this.containerElement=r}}const Go=kt("tbi");class s_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Go()),n.viewProps.bindClassModifiers(this.element),En(n.props,"selected",c=>{c?this.element.classList.add(Go(void 0,"sel")):this.element.classList.remove(Go(void 0,"sel"))});const r=t.createElement("button");r.classList.add(Go("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(Go("t")),ju(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class o_{constructor(t,n){this.emitter=new gr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new s_(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Nl extends Eu{constructor(t,n){const r=new n_(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Su({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new o_(t,{props:n.itemProps,viewProps:Un.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,En(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(t){return en(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return tn(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class i_ extends Cu{constructor(t,n){super(t,n),this.emitter_=new gr,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const n=this.controller.view.element.ownerDocument,r=new Nl(n,{blade:jo(),itemProps:jt.fromObject({selected:!1,title:t.title}),props:jt.fromObject({selected:!1}),viewProps:Un.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}onSelect_(t){this.emitter_.emit("select",new hb(this,t.rawValue))}}class a_ extends Cu{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addBlade(t){return this.rackApi_.addBlade(t)}}const Ed=-1;class l_{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=er(!0),this.selectedIndex=er(Ed),this.items_=[]}add(t,n){const r=n??this.items_.length;this.items_.splice(r,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ed,this.empty.rawValue=!0;return}const t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const n=this.items_.findIndex(r=>r===t.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const zo=kt("tab");class u_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(zo(),Yp()),n.viewProps.bindClassModifiers(this.element),In(n.empty,wo(this.element,zo(void 0,"nop")));const r=t.createElement("div");r.classList.add(zo("t")),this.element.appendChild(r),this.itemsElement=r;const i=t.createElement("div");i.classList.add(zo("i")),this.element.appendChild(i);const c=t.createElement("div");c.classList.add(zo("c")),this.element.appendChild(c),this.contentsElement=c}}class Sd extends Eu{constructor(t,n){const r=new l_,i=new u_(t,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Su({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const c=this.rackController.rack;c.emitter.on("add",this.onRackAdd_),c.emitter.on("remove",this.onRackRemove_),this.tab=r}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const n=t.bladeController;Vp(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const n=t.bladeController;xu(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}const Kp=Br({id:"tab",type:"blade",accept(s){const t=rr(s,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(s){const t=new Sd(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(n=>{const r=new Nl(s.document,{blade:jo(),itemProps:jt.fromObject({selected:!1,title:n.title}),props:jt.fromObject({selected:!1}),viewProps:Un.create()});t.add(r)}),t},api(s){return s.controller instanceof Sd?new i_(s.controller,s.pool):s.controller instanceof Nl?new a_(s.controller,s.pool):null}});function c_(s,t){const n=s.accept(t.params);if(!n)return null;const r=rr(t.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return s.controller({blade:jo(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:Un.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}class ku extends ii{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class d_{constructor(){this.disabled=!1,this.emitter=new gr}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class h_{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new gr,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ei{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,r)=>r.constrain(n),t)}}function da(s,t){if(s instanceof t)return s;if(s instanceof Ei){const n=s.constraints.reduce((r,i)=>r||(i instanceof t?i:null),null);if(n)return n}return null}class Si{constructor(t){this.values=jt.fromObject({options:t})}constrain(t){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===t).length>0?t:n[0].value}}function Pi(s){var t;const n=Dl;if(Array.isArray(s))return(t=rr({items:s},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof s=="object")return n.required.raw(s).value}function Tu(s){if(Array.isArray(s))return s;const t=[];return Object.keys(s).forEach(n=>{t.push({text:n,value:s[n]})}),t}function Mu(s){return Ht(s)?null:new Si(Tu(s))}const il=kt("lst");class p_{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(il()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("select");r.classList.add(il("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=t.createElement("div");i.classList.add(il("m")),i.appendChild(Fa(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,En(this.props_,"options",c=>{Bp(this.selectElement),c.forEach(o=>{const d=t.createElement("option");d.textContent=o.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class as{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new p_(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return en(t,null,n=>({options:n.required.custom(Pi)}),n=>(this.props.set("options",Tu(n.options)),!0))}exportProps(){return tn(null,{options:this.props.get("options")})}}const Pd=kt("pop");class f_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Pd()),n.viewProps.bindClassModifiers(this.element),In(n.shows,wo(this.element,Pd(void 0,"v")))}}class $p{constructor(t,n){this.shows=er(!1),this.viewProps=n.viewProps,this.view=new f_(t,{shows:this.shows,viewProps:this.viewProps})}}const kd=kt("txt");class m_{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(kd()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=t.createElement("input");r.classList.add(kd("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ai{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new m_(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);Ht(i)||(this.value.rawValue=i),this.view.refresh()}}function y_(s){return String(s)}function Zp(s){return s==="false"?!1:!!s}function Td(s){return y_(s)}function g_(s){return t=>s.reduce((n,r)=>n!==null?n:r(t),null)}const v_=qr(0);function ha(s){return v_(s)+"%"}function Qp(s){return String(s)}function Vl(s){return s}function Co({primary:s,secondary:t,forward:n,backward:r}){let i=!1;function c(o){i||(i=!0,o(),i=!1)}s.emitter.on("change",o=>{c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{c(()=>{s.setRawValue(r(s.rawValue,t.rawValue),o.options)}),c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),o.options)})}),c(()=>{t.setRawValue(n(s.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function zr(s,t){const n=s*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function li(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function Nn(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function b_(s){return s==="ArrowUp"||s==="ArrowDown"}function Jp(s){return b_(s)||s==="ArrowLeft"||s==="ArrowRight"}function al(s,t){var n,r;const i=t.ownerDocument.defaultView,c=t.getBoundingClientRect();return{x:s.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+c.left),y:s.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+c.top)}}class Vs{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new gr,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(al(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(al(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(al(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;const r=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const nn=kt("txt");class __{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(nn(),nn(void 0,"num")),n.arrayPosition&&this.element.classList.add(nn(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(nn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(nn()),this.inputElement.classList.add(nn("i"));const i=t.createElement("div");i.classList.add(nn("k")),this.element.appendChild(i),this.knobElement=i;const c=t.createElementNS(jn,"svg");c.classList.add(nn("g")),this.knobElement.appendChild(c);const o=t.createElementNS(jn,"path");o.classList.add(nn("gb")),c.appendChild(o),this.guideBodyElem_=o;const d=t.createElementNS(jn,"path");d.classList.add(nn("gh")),c.appendChild(d),this.guideHeadElem_=d;const a=t.createElement("div");a.classList.add(kt("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(nn(void 0,"drg"));return}this.element.classList.add(nn(void 0,"drg"));const n=t.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=_r(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const c=this.props_.get("formatter");this.tooltipElem_.textContent=c(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class ki{constructor(t,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=er(null),this.view=new __(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Vs(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),c=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let o=t;return i!==void 0&&(o=Math.max(o,i)),c!==void 0&&(o=Math.min(o,c)),o}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);Ht(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const n=zr(this.props.get("keyScale"),li(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){zr(this.props.get("keyScale"),li(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ll=kt("sld");class w_{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(ll()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(ll("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(ll("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const t=_r(Rt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class x_{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new w_(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vs(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(Rt(_r(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=zr(this.props.get("keyScale"),Nn(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){zr(this.props.get("keyScale"),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ul=kt("sldtxt");class j_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ul());const r=t.createElement("div");r.classList.add(ul("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(ul("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class pa{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new x_(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new ki(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new j_(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return en(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const t=this.sliderC_.props;return tn(null,{max:t.get("max"),min:t.get("min")})}}function ef(s){return{sliderProps:new jt({keyScale:s.keyScale,max:s.max,min:s.min}),textProps:new jt({formatter:er(s.formatter),keyScale:s.keyScale,pointerScale:er(s.pointerScale)})}}const C_={containerUnitSize:"cnt-usz"};function tf(s){return`--${C_[s]}`}function ui(s){return Fp(s)}function es(s){if(Rl(s))return rr(s,ui)}function Rn(s,t){if(!s)return;const n=[],r=Rp(s,t);r&&n.push(r);const i=Dp(s);return i&&n.push(i),new Ei(n)}function E_(s){return s?s.major===xo.major:!1}function rf(s){if(s==="inline"||s==="popup")return s}function Ti(s,t){s.write(t)}const qi=kt("ckb");class S_{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(qi()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(qi("l")),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("input");i.classList.add(qi("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const c=t.createElement("div");c.classList.add(qi("w")),this.labelElement.appendChild(c);const o=Fa(t,"check");c.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class P_{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new S_(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const n=t.currentTarget;this.value.rawValue=n.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function k_(s){const t=[],n=Mu(s.options);return n&&t.push(n),new Ei(t)}const T_=Br({id:"input-bool",type:"input",accept:(s,t)=>{if(typeof s!="boolean")return null;const n=rr(t,r=>({options:r.optional.custom(Pi),readonly:r.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Zp,constraint:s=>k_(s.params),writer:s=>Ti},controller:s=>{const t=s.document,n=s.value,r=s.constraint,i=r&&da(r,Si);return i?new as(t,{props:new jt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new P_(t,{value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="boolean"?null:s.controller.valueController instanceof as?new ku(s.controller):null}}),ms=kt("col");class M_{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ms()),n.foldable.bindExpandedClass(this.element,ms(void 0,"expanded")),En(n.foldable,"completed",wo(this.element,ms(void 0,"cpl")));const r=t.createElement("div");r.classList.add(ms("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(ms("s")),r.appendChild(i),this.swatchElement=i;const c=t.createElement("div");if(c.classList.add(ms("t")),r.appendChild(c),this.textElement=c,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(ms("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function L_(s,t,n){const r=_r(s/255,0,1),i=_r(t/255,0,1),c=_r(n/255,0,1),o=Math.max(r,i,c),d=Math.min(r,i,c),a=o-d;let l=0,b=0;const y=(d+o)/2;return a!==0&&(b=a/(1-Math.abs(o+d-1)),r===o?l=(i-c)/a:i===o?l=2+(c-r)/a:l=4+(r-i)/a,l=l/6+(l<0?1:0)),[l*360,b*100,y*100]}function A_(s,t,n){const r=(s%360+360)%360,i=_r(t/100,0,1),c=_r(n/100,0,1),o=(1-Math.abs(2*c-1))*i,d=o*(1-Math.abs(r/60%2-1)),a=c-o/2;let l,b,y;return r>=0&&r<60?[l,b,y]=[o,d,0]:r>=60&&r<120?[l,b,y]=[d,o,0]:r>=120&&r<180?[l,b,y]=[0,o,d]:r>=180&&r<240?[l,b,y]=[0,d,o]:r>=240&&r<300?[l,b,y]=[d,0,o]:[l,b,y]=[o,0,d],[(l+a)*255,(b+a)*255,(y+a)*255]}function O_(s,t,n){const r=_r(s/255,0,1),i=_r(t/255,0,1),c=_r(n/255,0,1),o=Math.max(r,i,c),d=Math.min(r,i,c),a=o-d;let l;a===0?l=0:o===r?l=60*(((i-c)/a%6+6)%6):o===i?l=60*((c-r)/a+2):l=60*((r-i)/a+4);const b=o===0?0:a/o,y=o;return[l,b*100,y*100]}function nf(s,t,n){const r=Lp(s,360),i=_r(t/100,0,1),c=_r(n/100,0,1),o=c*i,d=o*(1-Math.abs(r/60%2-1)),a=c-o;let l,b,y;return r>=0&&r<60?[l,b,y]=[o,d,0]:r>=60&&r<120?[l,b,y]=[d,o,0]:r>=120&&r<180?[l,b,y]=[0,o,d]:r>=180&&r<240?[l,b,y]=[0,d,o]:r>=240&&r<300?[l,b,y]=[d,0,o]:[l,b,y]=[o,0,d],[(l+a)*255,(b+a)*255,(y+a)*255]}function R_(s,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[s,r!==0?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/(2*100)]}function D_(s,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[s,r!==0?t*n/r:0,n*(200-t)/(2*100)]}function Sn(s){return[s[0],s[1],s[2]]}function Va(s,t){return[s[0],s[1],s[2],t]}const I_={hsl:{hsl:(s,t,n)=>[s,t,n],hsv:R_,rgb:A_},hsv:{hsl:D_,hsv:(s,t,n)=>[s,t,n],rgb:nf},rgb:{hsl:L_,hsv:O_,rgb:(s,t,n)=>[s,t,n]}};function po(s,t){return[t==="float"?1:s==="rgb"?255:360,t==="float"?1:s==="rgb"?255:100,t==="float"?1:s==="rgb"?255:100]}function F_(s,t){return s===t?t:Lp(s,t)}function sf(s,t,n){var r;const i=po(t,n);return[t==="rgb"?_r(s[0],0,i[0]):F_(s[0],i[0]),_r(s[1],0,i[1]),_r(s[2],0,i[2]),_r((r=s[3])!==null&&r!==void 0?r:1,0,1)]}function Md(s,t,n,r){const i=po(t,n),c=po(t,r);return s.map((o,d)=>o/i[d]*c[d])}function of(s,t,n){const r=Md(s,t.mode,t.type,"int"),i=I_[t.mode][n.mode](...r);return Md(i,n.mode,"int",n.type)}class Lt{static black(){return new Lt([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=sf(t,n,this.type)}getComponents(t){return Va(of(Sn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Yn=kt("colp");class N_{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Yn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Yn("hsv"));const i=t.createElement("div");i.classList.add(Yn("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const c=t.createElement("div");c.classList.add(Yn("h")),this.hPaletteView_=n.hPaletteView,c.appendChild(this.hPaletteView_.element),r.appendChild(c),this.element.appendChild(r);const o=t.createElement("div");if(o.classList.add(Yn("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=t.createElement("div");d.classList.add(Yn("a"));const a=t.createElement("div");a.classList.add(Yn("ap")),a.appendChild(this.alphaViews_.palette.element),d.appendChild(a);const l=t.createElement("div");l.classList.add(Yn("at")),l.appendChild(this.alphaViews_.text.element),d.appendChild(l),this.element.appendChild(d)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function V_(s){return s==="int"?"int":s==="float"?"float":void 0}function Lu(s){return rr(s,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(V_)}),expanded:t.optional.boolean,picker:t.optional.custom(rf),readonly:t.optional.constant(!1)}))}function Ls(s){return s?.1:1}function af(s){var t;return(t=s.color)===null||t===void 0?void 0:t.type}class Au{constructor(t,n){this.type="float",this.mode=n,this.comps_=sf(t,n,this.type)}getComponents(t){return Va(of(Sn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const B_={int:(s,t)=>new Lt(s,t),float:(s,t)=>new Au(s,t)};function Ou(s,t,n){return B_[n](s,t)}function U_(s){return s.type==="float"}function G_(s){return s.type==="int"}function z_(s){const t=s.getComponents(),n=po(s.mode,"int");return new Lt([Math.round(Rt(t[0],0,1,0,n[0])),Math.round(Rt(t[1],0,1,0,n[1])),Math.round(Rt(t[2],0,1,0,n[2])),t[3]],s.mode)}function q_(s){const t=s.getComponents(),n=po(s.mode,"int");return new Au([Rt(t[0],0,n[0],0,1),Rt(t[1],0,n[1],0,1),Rt(t[2],0,n[2],0,1),t[3]],s.mode)}function Fr(s,t){if(s.type===t)return s;if(G_(s)&&t==="float")return q_(s);if(U_(s)&&t==="int")return z_(s);throw ir.shouldNeverHappen()}function H_(s,t){return s.alpha===t.alpha&&s.mode===t.mode&&s.notation===t.notation&&s.type===t.type}function an(s,t){const n=s.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(s),t)}const W_={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function lf(s){const t=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(s);const n=parseFloat(t[1]),r=t[2];return W_[r](n)}function uf(s){const t=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[an(t[1],255),an(t[2],255),an(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function X_(s){const t=uf(s);return t?new Lt(t,"rgb"):null}function cf(s){const t=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[an(t[1],255),an(t[2],255),an(t[3],255),an(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Y_(s){const t=cf(s);return t?new Lt(t,"rgb"):null}function df(s){const t=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[lf(t[1]),an(t[2],100),an(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function K_(s){const t=df(s);return t?new Lt(t,"hsl"):null}function hf(s){const t=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[lf(t[1]),an(t[2],100),an(t[3],100),an(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function $_(s){const t=hf(s);return t?new Lt(t,"hsl"):null}function pf(s){const t=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Z_(s){const t=pf(s);return t?new Lt(t,"rgb"):null}function ff(s){const t=s.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Rt(parseInt(t[4]+t[4],16),0,255,0,1)];const n=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Rt(parseInt(n[4],16),0,255,0,1)]:null}function Q_(s){const t=ff(s);return t?new Lt(t,"rgb"):null}function mf(s){const t=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function J_(s){return t=>{const n=mf(t);return n?Ou(n,"rgb",s):null}}function yf(s){const t=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function e1(s){return t=>{const n=yf(t);return n?Ou(n,"rgb",s):null}}const t1=[{parser:pf,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ff,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:uf,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:cf,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:df,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:hf,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:mf,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:yf,result:{alpha:!0,mode:"rgb",notation:"object"}}];function r1(s){return t1.reduce((t,{parser:n,result:r})=>t||(n(s)?r:null),null)}function n1(s,t="int"){const n=r1(s);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function Mi(s){const t=[Z_,Q_,X_,Y_,K_,$_];t.push(J_("int"),e1("int"));const n=g_(t);return r=>{const i=n(r);return i?Fr(i,s):null}}function s1(s){const t=Mi("int");if(typeof s!="string")return Lt.black();const n=t(s);return n??Lt.black()}function gf(s){const t=_r(Math.floor(s),0,255).toString(16);return t.length===1?`0${t}`:t}function Ru(s,t="#"){const n=Sn(s.getComponents("rgb")).map(gf).join("");return`${t}${n}`}function Du(s,t="#"){const n=s.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(gf).join("");return`${t}${r}`}function vf(s){const t=qr(0),n=Fr(s,"int");return`rgb(${Sn(n.getComponents("rgb")).map(i=>t(i)).join(", ")})`}function ta(s){const t=qr(2),n=qr(0);return`rgba(${Fr(s,"int").getComponents("rgb").map((c,o)=>(o===3?t:n)(c)).join(", ")})`}function o1(s){const t=[qr(0),ha,ha],n=Fr(s,"int");return`hsl(${Sn(n.getComponents("hsl")).map((i,c)=>t[c](i)).join(", ")})`}function i1(s){const t=[qr(0),ha,ha,qr(2)];return`hsla(${Fr(s,"int").getComponents("hsl").map((i,c)=>t[c](i)).join(", ")})`}function bf(s,t){const n=qr(t==="float"?2:0),r=["r","g","b"],i=Fr(s,t);return`{${Sn(i.getComponents("rgb")).map((o,d)=>`${r[d]}: ${n(o)}`).join(", ")}}`}function a1(s){return t=>bf(t,s)}function _f(s,t){const n=qr(2),r=qr(t==="float"?2:0),i=["r","g","b","a"];return`{${Fr(s,t).getComponents("rgb").map((d,a)=>{const l=a===3?n:r;return`${i[a]}: ${l(d)}`}).join(", ")}}`}function l1(s){return t=>_f(t,s)}const u1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Ru},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Du},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:vf},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ta},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:o1},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:i1},...["int","float"].reduce((s,t)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:a1(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:l1(t)}],[])];function wf(s){return u1.reduce((t,n)=>t||(H_(n.format,s)?n.stringifier:null),null)}const qo=kt("apl");class c1{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(qo()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(qo("b")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(qo("c")),r.appendChild(i),this.colorElem_=i;const c=t.createElement("div");c.classList.add(qo("m")),this.element.appendChild(c),this.markerElem_=c;const o=t.createElement("div");o.classList.add(qo("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,n=t.getComponents("rgb"),r=new Lt([n[0],n[1],n[2],0],"rgb"),i=new Lt([n[0],n[1],n[2],255],"rgb"),c=["to right",ta(r),ta(i)];this.colorElem_.style.background=`linear-gradient(${c.join(",")})`,this.previewElem_.style.backgroundColor=ta(t);const o=Rt(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class d1{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new c1(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vs(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=t.point.x/t.bounds.width,i=this.value.rawValue,[c,o,d]=i.getComponents("hsv");this.value.setRawValue(new Lt([c,o,d,r],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=zr(Ls(!0),Nn(t));if(n===0)return;const r=this.value.rawValue,[i,c,o,d]=r.getComponents("hsv");this.value.setRawValue(new Lt([i,c,o,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){zr(Ls(!0),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ks=kt("coltxt");function h1(s){const t=s.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((r,i)=>{const c=s.createElement("option");return c.textContent=i.text,c.value=i.value,r.appendChild(c),r},s.createDocumentFragment())),t}class p1{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ks()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Ks("m")),this.modeElem_=h1(t),this.modeElem_.classList.add(Ks("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(Ks("mm")),i.appendChild(Fa(t,"dropdown")),r.appendChild(i),this.element.appendChild(r);const c=t.createElement("div");c.classList.add(Ks("w")),this.element.appendChild(c),this.inputsElem_=c,this.inputViews_=n.inputViews,this.applyInputViews_(),In(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){Bp(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=t.createElement("div");r.classList.add(Ks("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function f1(s){return qr(s==="float"?2:0)}function m1(s,t,n){const r=po(s,t)[n];return new xi({min:0,max:r})}function y1(s,t,n){return new ki(s,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:t.parser,props:jt.fromObject({formatter:f1(t.colorType),keyScale:Ls(!1),pointerScale:t.colorType==="float"?.01:1}),value:er(0,{constraint:m1(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function g1(s,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:Fn,viewProps:t.viewProps};return[0,1,2].map(r=>{const i=y1(s,n,r);return Co({primary:t.value,secondary:i.value,forward(c){return Fr(c,t.colorType).getComponents(t.colorMode)[r]},backward(c,o){const d=t.colorMode,l=Fr(c,t.colorType).getComponents(d);l[r]=o;const b=Ou(Va(Sn(l),l[3]),d,t.colorType);return Fr(b,"int")}}),i})}function v1(s,t){const n=new ai(s,{parser:Mi("int"),props:jt.fromObject({formatter:Ru}),value:er(Lt.black()),viewProps:t.viewProps});return Co({primary:t.value,secondary:n.value,forward:r=>new Lt(Sn(r.getComponents()),r.mode),backward:(r,i)=>new Lt(Va(Sn(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function b1(s){return s!=="hex"}class _1{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=er(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new p1(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const n=this.colorMode.rawValue;return b1(n)?g1(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):v1(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const cl=kt("hpl");class w1{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(cl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(cl("c")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(cl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=vf(new Lt([n,100,100],"hsv"));const r=Rt(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class x1{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new w1(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vs(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=Rt(_r(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,c,o,d]=i.getComponents("hsv");this.value.setRawValue(new Lt([r,c,o,d],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=zr(Ls(!1),Nn(t));if(n===0)return;const r=this.value.rawValue,[i,c,o,d]=r.getComponents("hsv");this.value.setRawValue(new Lt([i+n,c,o,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){zr(Ls(!1),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const dl=kt("svp"),Ld=64;class j1{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(dl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("canvas");r.height=Ld,r.width=Ld,r.classList.add(dl("c")),this.element.appendChild(r),this.canvasElement=r;const i=t.createElement("div");i.classList.add(dl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=xb(this.canvasElement);if(!t)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,c=this.canvasElement.height,o=t.getImageData(0,0,i,c),d=o.data;for(let b=0;b<c;b++)for(let y=0;y<i;y++){const u=Rt(y,0,i,0,100),p=Rt(b,0,c,100,0),h=nf(r[0],u,p),m=(b*i+y)*4;d[m]=h[0],d[m+1]=h[1],d[m+2]=h[2],d[m+3]=255}t.putImageData(o,0,0);const a=Rt(r[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const l=Rt(r[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class C1{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new j1(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vs(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=Rt(t.point.x,0,t.bounds.width,0,100),i=Rt(t.point.y,0,t.bounds.height,100,0),[c,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Lt([c,r,i,o],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Jp(t.key)&&t.preventDefault();const[n,r,i,c]=this.value.rawValue.getComponents("hsv"),o=Ls(!1),d=zr(o,Nn(t)),a=zr(o,li(t));d===0&&a===0||this.value.setRawValue(new Lt([n,r+d,i+a,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const n=Ls(!1),r=zr(n,Nn(t)),i=zr(n,li(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class E1{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new x1(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new C1(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new d1(t,{value:this.value,viewProps:this.viewProps}),text:new ki(t,{parser:Fn,props:jt.fromObject({pointerScale:.01,keyScale:.1,formatter:qr(2)}),value:er(0,{constraint:new xi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Co({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const c=r.getComponents();return c[3]=i,new Lt(c,r.mode)}}),this.textsC_=new _1(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new N_(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const hl=kt("colsw");class S1{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(hl()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(hl("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=t.createElement("button");i.classList.add(hl("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Du(t)}onValueChange_(){this.update_()}}class P1{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new S1(t,{value:this.value,viewProps:this.viewProps})}}class Iu{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ci.create(n.expanded),this.swatchC_=new P1(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new ai(t,{parser:n.parser,props:jt.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new M_(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new $p(t,{viewProps:this.viewProps}):null;const i=new E1(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(c=>{c.addEventListener("blur",this.onPopupChildBlur_),c.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Co({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:c=>c,backward:(c,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pu(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Up(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!wu(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function k1(s){return Sn(s.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function T1(s){return s.getComponents("rgb").reduce((t,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return t<<8|i},0)>>>0}function M1(s){return new Lt([s>>16&255,s>>8&255,s&255],"rgb")}function L1(s){return new Lt([s>>24&255,s>>16&255,s>>8&255,Rt(s&255,0,255,0,1)],"rgb")}function A1(s){return typeof s!="number"?Lt.black():M1(s)}function O1(s){return typeof s!="number"?Lt.black():L1(s)}function ra(s,t){return typeof s!="object"||Ht(s)?!1:t in s&&typeof s[t]=="number"}function xf(s){return ra(s,"r")&&ra(s,"g")&&ra(s,"b")}function jf(s){return xf(s)&&ra(s,"a")}function Cf(s){return xf(s)}function Fu(s,t){if(s.mode!==t.mode||s.type!==t.type)return!1;const n=s.getComponents(),r=t.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Ad(s){return"a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b]}function R1(s){const t=wf(s);return t?(n,r)=>{Ti(n,t(r))}:null}function D1(s){const t=s?T1:k1;return(n,r)=>{Ti(n,t(r))}}function I1(s,t,n){const i=Fr(t,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b),s.writeProperty("a",i.a)}function F1(s,t,n){const i=Fr(t,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b)}function N1(s,t){return(n,r)=>{s?I1(n,r,t):F1(n,r,t)}}function V1(s){var t;return!!(!((t=s==null?void 0:s.color)===null||t===void 0)&&t.alpha)}function B1(s){return s?t=>Du(t,"0x"):t=>Ru(t,"0x")}function U1(s){return"color"in s||s.view==="color"}const G1=Br({id:"input-color-number",type:"input",accept:(s,t)=>{if(typeof s!="number"||!U1(t))return null;const n=Lu(t);return n?{initialValue:s,params:Object.assign(Object.assign({},n),{supportsAlpha:V1(t)})}:null},binding:{reader:s=>s.params.supportsAlpha?O1:A1,equals:Fu,writer:s=>D1(s.params.supportsAlpha)},controller:s=>{var t,n;return new Iu(s.document,{colorType:"int",expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:B1(s.params.supportsAlpha),parser:Mi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.supportsAlpha,value:s.value,viewProps:s.viewProps})}});function z1(s,t){if(!Cf(s))return Fr(Lt.black(),t);if(t==="int"){const n=Ad(s);return new Lt(n,"rgb")}if(t==="float"){const n=Ad(s);return new Au(n,"rgb")}return Fr(Lt.black(),"int")}function q1(s){return jf(s)}function H1(s){return t=>{const n=z1(t,s);return Fr(n,"int")}}function W1(s,t){return n=>s?_f(n,t):bf(n,t)}const X1=Br({id:"input-color-object",type:"input",accept:(s,t)=>{var n;if(!Cf(s))return null;const r=Lu(t);return r?{initialValue:s,params:Object.assign(Object.assign({},r),{colorType:(n=af(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:s=>H1(s.params.colorType),equals:Fu,writer:s=>N1(q1(s.initialValue),s.params.colorType)},controller:s=>{var t,n;const r=jf(s.initialValue);return new Iu(s.document,{colorType:s.params.colorType,expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:W1(r,s.params.colorType),parser:Mi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:s.value,viewProps:s.viewProps})}}),Y1=Br({id:"input-color-string",type:"input",accept:(s,t)=>{if(typeof s!="string"||t.view==="text")return null;const n=n1(s,af(t));if(!n)return null;const r=wf(n);if(!r)return null;const i=Lu(t);return i?{initialValue:s,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>s1,equals:Fu,writer:s=>{const t=R1(s.params.format);if(!t)throw ir.notBindable();return t}},controller:s=>{var t,n;return new Iu(s.document,{colorType:s.params.format.type,expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,formatter:s.params.stringifier,parser:Mi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.format.alpha,value:s.value,viewProps:s.viewProps})}});class Nu{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const n=this.asm_.toComponents(t).map((r,i)=>{var c,o;return(o=(c=this.components[i])===null||c===void 0?void 0:c.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)}}const Od=kt("pndtxt");class K1{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(Od()),this.textViews.forEach(r=>{const i=t.createElement("div");i.classList.add(Od("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function $1(s,t,n){return new ki(s,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:er(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}class Vu{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>$1(t,n,i)),this.acs_.forEach((r,i)=>{Co({primary:this.value,secondary:r.value,forward:c=>n.assembly.toComponents(c)[i],backward:(c,o)=>{const d=n.assembly.toComponents(c);return d[i]=o,n.assembly.fromComponents(d)}})}),this.view=new K1(t,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class Z1 extends ii{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function Q1(s,t){const n=[],r=Rp(s,t);r&&n.push(r);const i=Dp(s);i&&n.push(i);const c=Mu(s.options);return c&&n.push(c),new Ei(n)}const J1=Br({id:"input-number",type:"input",accept:(s,t)=>{if(typeof s!="number")return null;const n=rr(t,r=>Object.assign(Object.assign({},Fp(r)),{options:r.optional.custom(Pi),readonly:r.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Mp,constraint:s=>Q1(s.params,s.initialValue),writer:s=>Ti},controller:s=>{const t=s.value,n=s.constraint,r=n&&da(n,Si);if(r)return new as(s.document,{props:new jt({options:r.values.value("options")}),value:t,viewProps:s.viewProps});const i=Ip(s.params,t.rawValue),c=n&&da(n,xi);return c?new pa(s.document,Object.assign(Object.assign({},ef(Object.assign(Object.assign({},i),{keyScale:er(i.keyScale),max:c.values.value("max"),min:c.values.value("min")}))),{parser:Fn,value:t,viewProps:s.viewProps})):new ki(s.document,{parser:Fn,props:jt.fromObject(i),value:t,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="number"?null:s.controller.valueController instanceof pa?new Z1(s.controller):s.controller.valueController instanceof as?new ku(s.controller):null}});class ts{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(Ht(t))return!1;const n=t.x,r=t.y;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}}const Ef={toComponents:s=>s.getComponents(),fromComponents:s=>new ts(...s)},$s=kt("p2d");class ew{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add($s()),n.viewProps.bindClassModifiers(this.element),In(n.expanded,wo(this.element,$s(void 0,"expanded")));const r=t.createElement("div");r.classList.add($s("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add($s("b")),i.appendChild(Fa(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const c=t.createElement("div");if(c.classList.add($s("t")),r.appendChild(c),this.textElement=c,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add($s("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Kn=kt("p2dp");class tw{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Kn()),n.layout==="popup"&&this.element.classList.add(Kn(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Kn("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(jn,"svg");i.classList.add(Kn("g")),this.padElement.appendChild(i),this.svgElem_=i;const c=t.createElementNS(jn,"line");c.classList.add(Kn("ax")),c.setAttributeNS(null,"x1","0"),c.setAttributeNS(null,"y1","50%"),c.setAttributeNS(null,"x2","100%"),c.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(c);const o=t.createElementNS(jn,"line");o.classList.add(Kn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const d=t.createElementNS(jn,"line");d.classList.add(Kn("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const a=t.createElement("div");a.classList.add(Kn("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=Rt(t,-r,+r,0,100),c=Rt(n,-r,+r,0,100),o=this.props_.get("invertsY")?100-c:c;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Rd(s,t,n){return[zr(t[0],Nn(s)),zr(t[1],li(s))*(n?1:-1)]}class rw{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new tw(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vs(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=this.props.get("max"),i=Rt(t.point.x,0,t.bounds.width,-r,+r),c=Rt(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-r,+r);this.value.setRawValue(new ts(i,c),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Jp(t.key)&&t.preventDefault();const[n,r]=Rd(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new ts(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[n,r]=Rd(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class nw{constructor(t,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ci.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new $p(t,{viewProps:this.viewProps}):null;const c=new rw(t,{layout:n.pickerLayout,props:new jt({invertsY:er(n.invertsY),max:er(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});c.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=c,this.textC_=new Vu(t,{assembly:Ef,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new ew(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Co({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pu(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Up(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!wu(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function sw(s){return ts.isObject(s)?new ts(s.x,s.y):new ts}function ow(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y)}function iw(s,t){return new Nu({assembly:Ef,components:[Rn(Object.assign(Object.assign({},s),s.x),t.x),Rn(Object.assign(Object.assign({},s),s.y),t.y)]})}function Dd(s,t){var n,r;if(!Ht(s.min)||!Ht(s.max))return Math.max(Math.abs((n=s.min)!==null&&n!==void 0?n:0),Math.abs((r=s.max)!==null&&r!==void 0?r:0));const i=Ap(s);return Math.max(Math.abs(i)*10,Math.abs(t)*10)}function aw(s,t){var n,r;const i=Dd(Ts(s,(n=s.x)!==null&&n!==void 0?n:{}),t.x),c=Dd(Ts(s,(r=s.y)!==null&&r!==void 0?r:{}),t.y);return Math.max(i,c)}function lw(s){if(!("y"in s))return!1;const t=s.y;return t&&"inverted"in t?!!t.inverted:!1}const uw=Br({id:"input-point2d",type:"input",accept:(s,t)=>{if(!ts.isObject(s))return null;const n=rr(t,r=>Object.assign(Object.assign({},ui(r)),{expanded:r.optional.boolean,picker:r.optional.custom(rf),readonly:r.optional.constant(!1),x:r.optional.custom(es),y:r.optional.object(Object.assign(Object.assign({},ui(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:s,params:n}:null},binding:{reader:()=>sw,constraint:s=>iw(s.params,s.initialValue),equals:ts.equals,writer:()=>ow},controller:s=>{var t,n;const r=s.document,i=s.value,c=s.constraint,o=[s.params.x,s.params.y];return new nw(r,{axes:i.rawValue.getComponents().map((d,a)=>{var l;return _u({constraint:c.components[a],initialValue:d,params:Ts(s.params,(l=o[a])!==null&&l!==void 0?l:{})})}),expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,invertsY:lw(s.params),max:aw(s.params,i.rawValue),parser:Fn,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps})}});class ao{constructor(t=0,n=0,r=0){this.x=t,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(Ht(t))return!1;const n=t.x,r=t.y,i=t.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Sf={toComponents:s=>s.getComponents(),fromComponents:s=>new ao(...s)};function cw(s){return ao.isObject(s)?new ao(s.x,s.y,s.z):new ao}function dw(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y),s.writeProperty("z",t.z)}function hw(s,t){return new Nu({assembly:Sf,components:[Rn(Object.assign(Object.assign({},s),s.x),t.x),Rn(Object.assign(Object.assign({},s),s.y),t.y),Rn(Object.assign(Object.assign({},s),s.z),t.z)]})}const pw=Br({id:"input-point3d",type:"input",accept:(s,t)=>{if(!ao.isObject(s))return null;const n=rr(t,r=>Object.assign(Object.assign({},ui(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(es),y:r.optional.custom(es),z:r.optional.custom(es)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>cw,constraint:s=>hw(s.params,s.initialValue),equals:ao.equals,writer:s=>dw},controller:s=>{const t=s.value,n=s.constraint,r=[s.params.x,s.params.y,s.params.z];return new Vu(s.document,{assembly:Sf,axes:t.rawValue.getComponents().map((i,c)=>{var o;return _u({constraint:n.components[c],initialValue:i,params:Ts(s.params,(o=r[c])!==null&&o!==void 0?o:{})})}),parser:Fn,value:t,viewProps:s.viewProps})}});class lo{constructor(t=0,n=0,r=0,i=0){this.x=t,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(Ht(t))return!1;const n=t.x,r=t.y,i=t.z,c=t.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof c!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Pf={toComponents:s=>s.getComponents(),fromComponents:s=>new lo(...s)};function fw(s){return lo.isObject(s)?new lo(s.x,s.y,s.z,s.w):new lo}function mw(s,t){s.writeProperty("x",t.x),s.writeProperty("y",t.y),s.writeProperty("z",t.z),s.writeProperty("w",t.w)}function yw(s,t){return new Nu({assembly:Pf,components:[Rn(Object.assign(Object.assign({},s),s.x),t.x),Rn(Object.assign(Object.assign({},s),s.y),t.y),Rn(Object.assign(Object.assign({},s),s.z),t.z),Rn(Object.assign(Object.assign({},s),s.w),t.w)]})}const gw=Br({id:"input-point4d",type:"input",accept:(s,t)=>{if(!lo.isObject(s))return null;const n=rr(t,r=>Object.assign(Object.assign({},ui(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(es),x:r.optional.custom(es),y:r.optional.custom(es),z:r.optional.custom(es)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>fw,constraint:s=>yw(s.params,s.initialValue),equals:lo.equals,writer:s=>mw},controller:s=>{const t=s.value,n=s.constraint,r=[s.params.x,s.params.y,s.params.z,s.params.w];return new Vu(s.document,{assembly:Pf,axes:t.rawValue.getComponents().map((i,c)=>{var o;return _u({constraint:n.components[c],initialValue:i,params:Ts(s.params,(o=r[c])!==null&&o!==void 0?o:{})})}),parser:Fn,value:t,viewProps:s.viewProps})}});function vw(s){const t=[],n=Mu(s.options);return n&&t.push(n),new Ei(t)}const bw=Br({id:"input-string",type:"input",accept:(s,t)=>{if(typeof s!="string")return null;const n=rr(t,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(Pi)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Qp,constraint:s=>vw(s.params),writer:s=>Ti},controller:s=>{const t=s.document,n=s.value,r=s.constraint,i=r&&da(r,Si);return i?new as(t,{props:new jt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new ai(t,{parser:c=>c,props:jt.fromObject({formatter:Vl}),value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="string"?null:s.controller.valueController instanceof as?new ku(s.controller):null}}),Li={monitor:{defaultInterval:200,defaultRows:3}},Id=kt("mll");class _w{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Id()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.classList.add(Id("i")),r.style.height=`calc(var(${tf("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Bu{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new _w(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Fd=kt("sgl");class ww{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Fd()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(Fd("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class Uu{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new ww(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}const xw=Br({id:"monitor-bool",type:"monitor",accept:(s,t)=>{if(typeof s!="boolean")return null;const n=rr(t,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Zp},controller:s=>{var t;return s.value.rawValue.length===1?new Uu(s.document,{formatter:Td,value:s.value,viewProps:s.viewProps}):new Bu(s.document,{formatter:Td,rows:(t=s.params.rows)!==null&&t!==void 0?t:Li.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}});class jw extends ii{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const $n=kt("grl");class Cw{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add($n()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=t.createElementNS(jn,"svg");r.classList.add($n("g")),r.style.height=`calc(var(${tf("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(jn,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const c=t.createElement("div");c.classList.add($n("t"),kt("tt")()),this.element.appendChild(c),this.tooltipElem_=c,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),c=this.props_.get("max"),o=[];this.value.rawValue.forEach((y,u)=>{if(y===void 0)return;const p=Rt(u,0,r,0,t),h=Rt(y,i,c,n,0);o.push([p,h].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const d=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){d.classList.remove($n("t","a"));return}const l=Rt(this.cursor_.rawValue,0,r,0,t),b=Rt(a,i,c,n,0);d.style.left=`${l}px`,d.style.top=`${b}px`,d.textContent=`${this.formatter_(a)}`,d.classList.contains($n("t","a"))||(d.classList.add($n("t","a"),$n("t","in")),ca(d),d.classList.remove($n("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class kf{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=er(-1),this.view=new Cw(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!wu(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Vs(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return en(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return tn(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(Rt(t.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Rt(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Bl(s){return Ht(s.format)?qr(2):s.format}function Ew(s){var t;return s.value.rawValue.length===1?new Uu(s.document,{formatter:Bl(s.params),value:s.value,viewProps:s.viewProps}):new Bu(s.document,{formatter:Bl(s.params),rows:(t=s.params.rows)!==null&&t!==void 0?t:Li.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}function Sw(s){var t,n,r;return new kf(s.document,{formatter:Bl(s.params),rows:(t=s.params.rows)!==null&&t!==void 0?t:Li.monitor.defaultRows,props:jt.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:100,min:(r=s.params.min)!==null&&r!==void 0?r:0}),value:s.value,viewProps:s.viewProps})}function Nd(s){return s.view==="graph"}const Pw=Br({id:"monitor-number",type:"monitor",accept:(s,t)=>{if(typeof s!="number")return null;const n=rr(t,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>Nd(s)?64:1,reader:s=>Mp},controller:s=>Nd(s.params)?Sw(s):Ew(s),api:s=>s.controller.valueController instanceof kf?new jw(s.controller):null}),kw=Br({id:"monitor-string",type:"monitor",accept:(s,t)=>{if(typeof s!="string")return null;const n=rr(t,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Qp},controller:s=>{var t;const n=s.value;return n.rawValue.length>1||s.params.multiline?new Bu(s.document,{formatter:Vl,rows:(t=s.params.rows)!==null&&t!==void 0?t:Li.monitor.defaultRows,value:n,viewProps:s.viewProps}):new Uu(s.document,{formatter:Vl,value:n,viewProps:s.viewProps})}});class Tw{constructor(){this.map_=new Map}get(t){var n;return(n=this.map_.get(t))!==null&&n!==void 0?n:null}has(t){return this.map_.has(t)}add(t,n){return this.map_.set(t,n),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),n}}class Mw{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function Lw(s,t){var n;const r=s.accept(t.target.read(),t.params);if(Ht(r))return null;const i={target:t.target,initialValue:r.initialValue,params:r.params},c=rr(t.params,y=>({disabled:y.optional.boolean,hidden:y.optional.boolean,label:y.optional.string,tag:y.optional.string})),o=s.binding.reader(i),d=s.binding.constraint?s.binding.constraint(i):void 0,a=new Mw({reader:o,target:t.target,writer:s.binding.writer(i)}),l=new fb(er(o(r.initialValue),{constraint:d,equals:s.binding.equals}),a),b=s.controller({constraint:d,document:t.document,initialValue:r.initialValue,params:r.params,value:l,viewProps:Un.create({disabled:c==null?void 0:c.disabled,hidden:c==null?void 0:c.hidden})});return new Tb(t.document,{blade:jo(),props:jt.fromObject({label:"label"in t.params?(n=c==null?void 0:c.label)!==null&&n!==void 0?n:null:t.target.key}),tag:c==null?void 0:c.tag,value:l,valueController:b})}class Aw{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function Ow(s,t){return t===0?new d_:new h_(s,t??Li.monitor.defaultInterval)}function Rw(s,t){var n,r,i;const c=s.accept(t.target.read(),t.params);if(Ht(c))return null;const o={target:t.target,initialValue:c.initialValue,params:c.params},d=rr(t.params,u=>({bufferSize:u.optional.number,disabled:u.optional.boolean,hidden:u.optional.boolean,interval:u.optional.number,label:u.optional.string})),a=s.binding.reader(o),l=(r=(n=d==null?void 0:d.bufferSize)!==null&&n!==void 0?n:s.binding.defaultBufferSize&&s.binding.defaultBufferSize(c.params))!==null&&r!==void 0?r:1,b=new Rb({binding:new Aw({reader:a,target:t.target}),bufferSize:l,ticker:Ow(t.document,d==null?void 0:d.interval)}),y=s.controller({document:t.document,params:c.params,value:b,viewProps:Un.create({disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden})});return y.viewProps.bindDisabled(b.ticker),y.viewProps.handleDispose(()=>{b.ticker.dispose()}),new Ib(t.document,{blade:jo(),props:jt.fromObject({label:"label"in t.params?(i=d==null?void 0:d.label)!==null&&i!==void 0?i:null:t.target.key}),value:b,valueController:y})}class Dw{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,n){if(!E_(n.core))throw ir.notCompatible(t,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(t,n,r){return this.pluginsMap_.inputs.reduce((i,c)=>i??Lw(c,{document:t,target:n,params:r}),null)}createMonitor_(t,n,r){return this.pluginsMap_.monitors.reduce((i,c)=>i??Rw(c,{document:t,params:r,target:n}),null)}createBinding(t,n,r){const i=n.read();if(Ht(i))throw new ir({context:{key:n.key},type:"nomatchingcontroller"});const c=this.createInput_(t,n,r);if(c)return c;const o=this.createMonitor_(t,n,r);if(o)return o;throw new ir({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(t,n){const r=this.pluginsMap_.blades.reduce((i,c)=>i??c_(c,{document:t,params:n}),null);if(!r)throw new ir({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(t){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var c,o;return r||((o=(c=i.api)===null||c===void 0?void 0:c.call(i,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,n??new ii(t))}createMonitorBindingApi_(t){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var c,o;return r||((o=(c=i.api)===null||c===void 0?void 0:c.call(i,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,n??new ii(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Mb(t))return this.createInputBindingApi_(t);if(Fb(t))return this.createMonitorBindingApi_(t);throw ir.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(kb(t))return this.createBindingApi(t);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:t,pool:this}),null);if(!n)throw ir.shouldNeverHappen();return this.apiCache_.add(t,n)}}const Iw=new Tw;function Fw(){const s=new Dw(Iw);return[uw,pw,gw,bw,J1,Y1,X1,G1,T_,xw,kw,Pw,Gb,t_,Kp].forEach(t=>{s.register("core",t)}),s}class Nw extends Ns{constructor(t){super(t),this.emitter_=new gr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ji(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class Vw extends Ns{}class Bw extends Ns{constructor(t){super(t),this.emitter_=new gr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ji(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class Uw extends Ns{constructor(t){super(t),this.emitter_=new gr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ji(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const Gw=function(){return{id:"list",type:"blade",core:xo,accept(s){const t=rr(s,n=>({options:n.required.custom(Pi),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return t?{params:t}:null},controller(s){const t=new Si(Tu(s.params.options)),n=er(s.params.value,{constraint:t}),r=new as(s.document,{props:new jt({options:t.values.value("options")}),value:n,viewProps:s.viewProps});return new Ms(s.document,{blade:s.blade,props:jt.fromObject({label:s.params.label}),value:n,valueController:r})},api(s){return!(s.controller instanceof Ms)||!(s.controller.valueController instanceof as)?null:new Nw(s.controller)}}}();class zw extends Xp{constructor(t,n){super(t,n)}get element(){return this.controller.view.element}}class qw extends Fl{constructor(t,n){super(t,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Vd=kt("spr");class Hw{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Vd()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("hr");r.classList.add(Vd("r")),this.element.appendChild(r)}}class Bd extends Na{constructor(t,n){super(Object.assign(Object.assign({},n),{view:new Hw(t,{viewProps:n.viewProps})}))}}const Ww={id:"separator",type:"blade",core:xo,accept(s){const t=rr(s,n=>({view:n.required.constant("separator")}));return t?{params:t}:null},controller(s){return new Bd(s.document,{blade:s.blade,viewProps:s.viewProps})},api(s){return s.controller instanceof Bd?new Vw(s.controller):null}},Xw={id:"slider",type:"blade",core:xo,accept(s){const t=rr(s,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return t?{params:t}:null},controller(s){var t,n;const r=(t=s.params.value)!==null&&t!==void 0?t:0,i=new xi({max:s.params.max,min:s.params.min}),c=er(r,{constraint:i}),o=new pa(s.document,Object.assign(Object.assign({},ef({formatter:(n=s.params.format)!==null&&n!==void 0?n:ub,keyScale:er(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:Op(s.params,r)})),{parser:Fn,value:c,viewProps:s.viewProps}));return new Ms(s.document,{blade:s.blade,props:jt.fromObject({label:s.params.label}),value:c,valueController:o})},api(s){return!(s.controller instanceof Ms)||!(s.controller.valueController instanceof pa)?null:new Bw(s.controller)}},Yw=function(){return{id:"text",type:"blade",core:xo,accept(s){const t=rr(s,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return t?{params:t}:null},controller(s){var t;const n=er(s.params.value),r=new ai(s.document,{parser:s.params.parse,props:jt.fromObject({formatter:(t=s.params.format)!==null&&t!==void 0?t:i=>String(i)}),value:n,viewProps:s.viewProps});return new Ms(s.document,{blade:s.blade,props:jt.fromObject({label:s.params.label}),value:n,valueController:r})},api(s){return!(s.controller instanceof Ms)||!(s.controller.valueController instanceof ai)?null:new Uw(s.controller)}}}();function Kw(s){const t=s.createElement("div");return t.classList.add(kt("dfw")()),s.body&&s.body.appendChild(t),t}function $w(s,t,n){if(s.querySelector(`style[data-tp-style=${t}]`))return;const r=s.createElement("style");r.dataset.tpStyle=t,r.textContent=n,s.head.appendChild(r)}let Zw=class extends zw{constructor(t){var n,r;const i=t??{},c=(n=i.document)!==null&&n!==void 0?n:wb(),o=Fw(),d=new qw(c,{expanded:i.expanded,blade:jo(),props:jt.fromObject({title:i.title}),viewProps:Un.create()});super(d,o),this.pool_=o,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:Kw(c),this.containerElem_.appendChild(this.element),this.doc_=c,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw ir.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw ir.alreadyDisposed();if(this.usesDefaultWrapper_){const n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&$w(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(r=>{this.pool_.register(t.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Gw,Ww,Xw,Kp,Yw]})}};new Wp("4.0.3");function Qw(s){let t,n;return t=new hs({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:s[2]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&4&&(c.theme=r[2]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function Jw(s){return{c:Kt,m:Kt,p:Kt,i:Kt,o:Kt,d:Kt}}function ex(s){let t,n,r,i;const c=[nx,rx],o=[];function d(b,y){return b[1]===void 0?0:1}t=d(s),n=o[t]=c[t](s);const a=s[11].default,l=$r(a,s,s[10],null);return{c(){n.c(),r=Gr(),l&&l.c()},m(b,y){o[t].m(b,y),_t(b,r,y),l&&l.m(b,y),i=!0},p(b,y){let u=t;t=d(b),t===u?o[t].p(b,y):(yo(),He(o[u],1,1,()=>{o[u]=null}),go(),n=o[t],n?n.p(b,y):(n=o[t]=c[t](b),n.c()),Ue(n,1),n.m(r.parentNode,r)),l&&l.p&&(!i||y&1024)&&Qr(l,a,b,b[10],i?Zr(a,b[10],y,null):Jr(b[10]),null)},i(b){i||(Ue(n),Ue(l,b),i=!0)},o(b){He(n),He(l,b),i=!1},d(b){b&&gt(r),o[t].d(b),l&&l.d(b)}}}function tx(s){let t;const n=s[11].default,r=$r(n,s,s[10],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&1024)&&Qr(r,n,i,i[10],t?Zr(n,i[10],c,null):Jr(i[10]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function rx(s){let t,n;return t=new hs({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding","containerVerticalPadding","containerUnitSize"],theme:s[2]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&4&&(c.theme=r[2]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function nx(s){let t,n;return t=new hs({props:{keysAdd:["containerVerticalPadding"],theme:s[2]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&4&&(c.theme=r[2]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function sx(s){let t,n,r,i;const c=[tx,ex,Jw,Qw],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){let b=t;t=d(),t===b?o[t].p(a,l):(yo(),He(o[b],1,1,()=>{o[b]=null}),go(),n=o[t],n?n.p(a,l):(n=o[t]=c[t](a),n.c()),Ue(n,1),n.m(r.parentNode,r))},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function ox(s,t,n){let r,i,{$$slots:c={},$$scope:o}=t,{title:d=void 0}=t,{userExpandable:a=!0}=t,{expanded:l=!0}=t,{theme:b=void 0}=t,{scale:y=1}=t,{userCreatedPane:u=!0}=t,{tpPane:p=void 0}=t;const h=ga();ns(s,h,j=>n(12,r=j));const m=ln("parentStore");ns(s,m,j=>n(13,i=j));let g=[];$i("registerPlugin",j=>{p===void 0?console.warn(`tpPane is undefined, failed to register plugin "${j.id}"`):g.includes(j.id)||(p==null||p.registerPlugin(j),g.push(j.id))}),$i("userCreatedPane",u),i!==void 0&&console.warn("<Panes> must not be nested");let v=l;Lh(h,r=new Zw({expanded:l,title:d}),r),r.on("fold",()=>{n(9,v=r.expanded)}),p=r,$i("parentStore",h),Ds(()=>{r.dispose()});function _(j){if(p)if(j===1)p.element.style.removeProperty("transform-origin"),p.element.style.removeProperty("transform"),p.element.style.removeProperty("width");else{const M=Math.max(0,j);n(5,p.element.style.transformOrigin="0 0",p),n(5,p.element.style.transform=`scale(${M})`,p),n(5,p.element.style.width=`${100/M}%`,p)}}function x(){p&&p.expanded!==v&&n(5,p.expanded=v,p),n(0,l=v)}return s.$$set=j=>{"title"in j&&n(1,d=j.title),"userExpandable"in j&&n(6,a=j.userExpandable),"expanded"in j&&n(0,l=j.expanded),"theme"in j&&n(2,b=j.theme),"scale"in j&&n(7,y=j.scale),"userCreatedPane"in j&&n(8,u=j.userCreatedPane),"tpPane"in j&&n(5,p=j.tpPane),"$$scope"in j&&n(10,o=j.$$scope)},s.$$.update=()=>{s.$$.dirty&34&&p&&d&&n(5,p.title=d,p),s.$$.dirty&32&&p!=null&&p.element&&(p==null||p.element.classList.add("svelte-tweakpane-ui")),s.$$.dirty&160&&p&&_(y),s.$$.dirty&96&&p&&mu(a,p.element,"tp-rotv_b","tp-rotv_m"),s.$$.dirty&36&&p&&C0(p.element,b),s.$$.dirty&33&&p&&n(9,v=l),s.$$.dirty&545&&p&&l!==void 0&&x()},[l,d,b,h,m,p,a,y,u,v,o,c]}class Gu extends cr{constructor(t){super(),ur(this,t,ox,sx,ar,{title:1,userExpandable:6,expanded:0,theme:2,scale:7,userCreatedPane:8,tpPane:5})}}function ix(s){let t;const n=s[6].default,r=$r(n,s,s[10],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&1024)&&Qr(r,n,i,i[10],t?Zr(n,i[10],c,null):Jr(i[10]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function ax(s){let t,n,r,i,c;const o=[{theme:s[3]},is(s[5],"position")];function d(b){s[7](b)}function a(b){s[8](b)}let l={$$slots:{default:[ix]},$$scope:{ctx:s}};for(let b=0;b<o.length;b+=1)l=xt(l,o[b]);return s[0]!==void 0&&(l.expanded=s[0]),s[1]!==void 0&&(l.tpPane=s[1]),n=new Gu({props:l}),Je.push(()=>it(n,"expanded",d)),Je.push(()=>it(n,"tpPane",a)),{c(){t=Yr("div"),dt(n.$$.fragment),or(t,"width",s[2]===void 0?null:`${s[2]}px`)},m(b,y){_t(b,t,y),ut(n,t,null),s[9](t),c=!0},p(b,[y]){const u=y&40?Hr(o,[y&8&&{theme:b[3]},y&32&&Wr(is(b[5],"position"))]):{};y&1024&&(u.$$scope={dirty:y,ctx:b}),!r&&y&1&&(r=!0,u.expanded=b[0],ot(()=>r=!1)),!i&&y&2&&(i=!0,u.tpPane=b[1],ot(()=>i=!1)),n.$set(u),y&4&&or(t,"width",b[2]===void 0?null:`${b[2]}px`)},i(b){c||(Ue(n.$$.fragment,b),c=!0)},o(b){He(n.$$.fragment,b),c=!1},d(b){b&&gt(t),ct(n),s[9](null)}}}function lx(s,t,n){const r=["expanded","width","tpPane","theme"];let i=Qt(t,r),{$$slots:c={},$$scope:o}=t,{expanded:d=void 0}=t,{width:a=void 0}=t,{tpPane:l=void 0}=t,{theme:b={baseBorderRadius:"0px",baseShadowColor:"hsla(0, 0%, 0%, 0)"}}=t,y;Rs(()=>{if(l){const m=l.element.parentElement;y.append(l.element),m==null||m.remove()}else console.warn("tpPane is undefined")});function u(m){d=m,n(0,d)}function p(m){l=m,n(1,l)}function h(m){Je[m?"unshift":"push"](()=>{y=m,n(4,y)})}return s.$$set=m=>{t=xt(xt({},t),Nr(m)),n(5,i=Qt(t,r)),"expanded"in m&&n(0,d=m.expanded),"width"in m&&n(2,a=m.width),"tpPane"in m&&n(1,l=m.tpPane),"theme"in m&&n(3,b=m.theme),"$$scope"in m&&n(10,o=m.$$scope)},[d,l,a,b,y,i,c,u,p,h,o]}class Eo extends cr{constructor(t){super(),ur(this,t,lx,ax,ar,{expanded:0,width:2,tpPane:1,theme:3})}}function ux(s){let t,n;return t=new Eo({props:{theme:s[3],userCreatedPane:!1,$$slots:{default:[dx]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&8&&(c.theme=r[3]),i&16391&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function cx(s){let t,n,r,i;const c=[px,hx],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function dx(s){let t,n;return t=new Tf({props:{disabled:s[2],label:s[1],title:s[0]}}),t.$on("click",s[10]),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&4&&(c.disabled=r[2]),i&2&&(c.label=r[1]),i&1&&(c.title=r[0]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function hx(s){let t,n;return t=new hs({props:{keysAdd:["containerUnitSize","containerVerticalPadding"],theme:s[3]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&8&&(c.theme=r[3]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function px(s){let t;return{c(){t=Yr("div"),or(t,"display","none")},m(n,r){_t(n,t,r),s[9](t)},p:Kt,i:Kt,o:Kt,d(n){n&&gt(t),s[9](null)}}}function fx(s){let t,n,r,i;const c=[cx,ux],o=[];function d(a,l){return a[5]?0:1}return t=d(s),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function mx(s,t,n){let r,{title:i="Button"}=t,{label:c=void 0}=t,{disabled:o=!1}=t,{theme:d=void 0}=t;const a=ln("parentStore");ns(s,a,f=>n(8,r=f));const l=ln("userCreatedPane"),b=ya();let y,u,p;function h(){u&&u.dispose(),n(6,u=r.addButton({disabled:o,index:p,label:c,title:i})),u.on("click",()=>{b("click")})}Rs(()=>{n(7,p=y?Da(y):0)}),Ds(()=>{u==null||u.dispose()});function m(f){Je[f?"unshift":"push"](()=>{y=f,n(4,y)})}function g(f){Vn.call(this,s,f)}return s.$$set=f=>{"title"in f&&n(0,i=f.title),"label"in f&&n(1,c=f.label),"disabled"in f&&n(2,o=f.disabled),"theme"in f&&n(3,d=f.theme)},s.$$.update=()=>{s.$$.dirty&65&&u&&n(6,u.title=i,u),s.$$.dirty&66&&u&&n(6,u.label=c,u),s.$$.dirty&68&&u&&n(6,u.disabled=o,u),s.$$.dirty&448&&p!==void 0&&r&&!u&&h(),s.$$.dirty&264&&d&&r&&(l||!Ra(r))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Button> components for a theme prop.)")},[i,c,o,d,y,a,u,p,r,m,g]}class Tf extends cr{constructor(t){super(),ur(this,t,mx,fx,ar,{title:0,label:1,disabled:2,theme:3})}}class yx{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return(t=this.controller_.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller_.emitter.on(t,()=>{r(new Is(this))}),this}}class gx extends Is{constructor(t,n,r){super(t),this.cell=n,this.index=r}}class vx extends us{constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new Ar;const n=this.controller.valueController;n.cellControllers.forEach((r,i)=>{const c=new yx(r);this.cellToApiMap_.set(r,c),r.emitter.on("click",()=>{const o=i%n.size[0],d=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new gx(this,c,[o,d])})})})}cell(t,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+t];return this.cellToApiMap_.get(i)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i.event)}),this}}class bx{constructor(t,n){this.size=n.size;const[r,i]=this.size,c=[];for(let o=0;o<i;o++)for(let d=0;d<r;d++){const a=new Yh(t,{props:vt.fromObject(Object.assign({},n.cellConfig(d,o))),viewProps:Ps.create()});c.push(a)}this.cellCs_=c,this.viewProps=Ps.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new np(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}class Ud extends vo{constructor(t,n){const r=n.valueController,i=new vi(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}Nt({id:"buttongrid",type:"blade",accept(s){const t=It(s,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return t?{params:t}:null},controller(s){return new Ud(s.document,{blade:s.blade,labelProps:vt.fromObject({label:s.params.label}),valueController:new bx(s.document,{cellConfig:s.params.cells,size:s.params.size})})},api(s){return s.controller instanceof Ud?new vx(s.controller):null}});class _x extends us{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get value(){return this.controller.valueController.value.rawValue}set value(t){this.controller.valueController.value.rawValue=t}on(t,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(t,i=>{r(new xa(this,i.rawValue,i.options.last))}),this}}function sn(s,t,n){return s*(1-n)+t*n}const wx=20,xx=.001,pl=100;function jx(s,t){let n=.25,r=.5,i=-1;for(let c=0;c<wx;c++){const[o,d]=s.curve(r);if(r+=n*(o<t?1:-1),i=d,n*=.5,Math.abs(t-o)<xx)break}return i}class As{constructor(t=0,n=0,r=1,i=1){this.cache_=[],this.comps_=[t,n,r,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return Gt(t)||!Array.isArray(t)?!1:typeof t[0]=="number"&&typeof t[1]=="number"&&typeof t[2]=="number"&&typeof t[3]=="number"}static equals(t,n){return t.x1===n.x1&&t.y1===n.y1&&t.x2===n.x2&&t.y2===n.y2}curve(t){const n=sn(0,this.x1,t),r=sn(0,this.y1,t),i=sn(this.x1,this.x2,t),c=sn(this.y1,this.y2,t),o=sn(this.x2,1,t),d=sn(this.y2,1,t),a=sn(n,i,t),l=sn(r,c,t),b=sn(i,o,t),y=sn(c,d,t);return[sn(a,b,t),sn(l,y,t)]}y(t){if(this.cache_.length===0){const n=[];for(let r=0;r<pl;r++)n.push(jx(this,bt(r,0,pl-1,0,1)));this.cache_=n}return this.cache_[Math.round(bt(Zt(t,0,1),0,1,0,pl-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const Mf={toComponents:s=>s.toObject(),fromComponents:s=>new As(...s)};function Cx(s){const t=yr(2);return`cubic-bezier(${s.toObject().map(r=>t(r)).join(", ")})`}const Gd=[0,.5,.5,1];function Ex(s){const t=s.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!t)return new As(...Gd);const n=[t[1],t[2],t[3],t[4]].reduce((r,i)=>{if(!r)return null;const c=Number(i);return isNaN(c)?null:[...r,c]},[]);return new As(...n??Gd)}const ys=ht("cbz");class Sx{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ys()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,ys(void 0,"expanded")),Kr(n.foldable,"completed",Bn(this.element,ys(void 0,"cpl")));const r=t.createElement("div");r.classList.add(ys("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add(ys("b")),n.viewProps.bindDisabled(i);const c=t.createElementNS(At,"svg");c.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(c),r.appendChild(i),this.buttonElement=i;const o=t.createElement("div");if(o.classList.add(ys("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const d=t.createElement("div");d.classList.add(ys("p")),this.element.appendChild(d),this.pickerElement=d}else this.pickerElement=null}}const fl=ht("cbzp");class Px{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(fl()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(fl("g")),this.element.appendChild(r),this.graphElement=r;const i=t.createElement("div");i.classList.add(fl("t")),this.element.appendChild(i),this.textElement=i}}function Lf(s,t){const n=new MutationObserver(i=>{for(const c of i)c.type==="childList"&&c.addedNodes.forEach(o=>{o.contains(o)&&(t(),n.disconnect())})}),r=s.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const Zn=ht("cbzg");function kx(s,t){return n=>t(s(n))}class Tx{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Zn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Zn("p")),this.element.appendChild(r),this.previewElement=r;const i=t.createElementNS(At,"svg");i.classList.add(Zn("g")),this.element.appendChild(i),this.svgElem_=i;const c=t.createElementNS(At,"path");c.classList.add(Zn("u")),this.svgElem_.appendChild(c),this.guideElem_=c;const o=t.createElementNS(At,"polyline");o.classList.add(Zn("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach(d=>{d.classList.add(Zn("h")),this.element.appendChild(d)}),this.vectorElems_=[t.createElementNS(At,"line"),t.createElementNS(At,"line")],this.vectorElems_.forEach(d=>{d.classList.add(Zn("v")),this.svgElem_.appendChild(d)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((d,a)=>{un(this.sel_,kx(l=>l===a,Bn(d,Zn("h","sel"))))}),Lf(this.element,()=>{this.refresh()})}getVertMargin_(t){return t*.25}valueToPosition(t,n){const{clientWidth:r,clientHeight:i}=this.element,c=this.getVertMargin_(i);return{x:bt(t,0,1,0,r),y:bt(n,0,1,i-c,c)}}positionToValue(t,n){const r=this.element.getBoundingClientRect(),i=r.width,c=r.height,o=this.getVertMargin_(c);return{x:Zt(bt(t,0,i,0,1),0,1),y:bt(n,c-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(c=>{const o=this.valueToPosition(0,c),d=this.valueToPosition(1,c);return[`M ${o.x},${o.y}`,`L ${d.x},${d.y}`].join(" ")}).join(" "));const t=this.value_.rawValue,n=[];let r=0;for(;;){const c=this.valueToPosition(...t.curve(r));if(n.push([c.x,c.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=t.toObject();[0,1].forEach(c=>{const o=this.valueToPosition(c,c),d=this.valueToPosition(i[c*2],i[c*2+1]),a=this.vectorElems_[c];a.setAttributeNS(null,"x1",String(o.x)),a.setAttributeNS(null,"y1",String(o.y)),a.setAttributeNS(null,"x2",String(d.x)),a.setAttributeNS(null,"y2",String(d.y));const l=this.handleElems_[c];l.style.left=`${d.x}px`,l.style.top=`${d.y}px`})}onValueChange_(){this.refresh()}}const zd=24,qd=400,Hd=1e3,Zs=ht("cbzprv");class Mx{constructor(t,n){this.stopped_=!0,this.startTime_=-1,this.requestId_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Zs()),n.viewProps.bindClassModifiers(this.element);const r=t.createElementNS(At,"svg");r.classList.add(Zs("g")),this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(At,"path");i.classList.add(Zs("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const c=t.createElement("div");c.classList.add(Zs("m")),this.element.appendChild(c),this.markerElem_=c,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),Lf(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Zs("m","a")),this.startTime_=new Date().getTime()+qd,this.stopped_=!1,this.requestId_=requestAnimationFrame(this.onTimer_)}stop(){cancelAnimationFrame(this.requestId_),this.stopped_=!0,this.markerElem_.classList.remove(Zs("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const n=this.value_.rawValue.y(Zt(t,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const{clientWidth:t,clientHeight:n}=this.svgElem_,r=[],i=this.value_.rawValue;for(let c=0;c<zd;c++){const o=bt(c,0,zd-1,0,1),d=bt(i.y(o),0,1,0,t);r.push(`M ${d},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",r.join(" "))}onTimer_(){if(this.startTime_===null)return;const t=new Date().getTime()-this.startTime_,n=t/Hd;this.updateMarker_(n),t>Hd+qd&&this.stop(),this.stopped_||(this.requestId_=requestAnimationFrame(this.onTimer_))}onValueChange_(){this.refresh(),this.play()}}function Ul(s,t,n,r){const i=n-s,c=r-t;return Math.sqrt(i*i+c*c)}function Lx(s,t,n,r){const i=Ul(s,t,n,r),c=Math.atan2(r-t,n-s),o=Math.round(c/(Math.PI/4))*Math.PI/4;return{x:s+Math.cos(o)*i,y:t+Math.sin(o)*i}}class Ax{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=Jt(0),this.viewProps=n.viewProps,this.view=new Tx(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Mx(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new br(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,n,r){const i=this.sel_.rawValue,c=this.value.rawValue.toObject(),o=this.view.positionToValue(t.x,t.y),d=n?Lx(i,i,o.x,o.y):o;c[i*2]=d.x,c[i*2+1]=d.y,this.value.setRawValue(new As(...c),r)}onPointerDown_(t){const n=t.data;if(!n.point)return;const r=this.value.rawValue,i=this.view.valueToPosition(r.x1,r.y1),c=Ul(n.point.x,n.point.y,i.x,i.y),o=this.view.valueToPosition(r.x2,r.y2),d=Ul(n.point.x,n.point.y,o.x,o.y);this.sel_.rawValue=c<=d?0:1,this.updateValue_(n.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const n=t.data;n.point&&this.updateValue_(n.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const n=t.data;n.point&&this.updateValue_(n.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){ri(t.key)&&t.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;r[n*2]+=fr(i,dn(t)),r[n*2+1]+=fr(i,ss(t)),this.value.setRawValue(new As(...r),{forceEmit:!1,last:!1})}onKeyUp_(t){ri(t.key)&&t.preventDefault();const n=this.keyScale_.rawValue,r=fr(n,dn(t)),i=fr(n,ss(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ox{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Px(t,{viewProps:this.viewProps}),this.gc_=new Ax(t,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new ba({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new Fs(t,{assembly:Mf,axes:[r,i,r,i],parser:Vr,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(t=>t.inputElement)]}refresh(){this.gc_.refresh()}}class Wd{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=bi.create(n.expanded),this.view=new Sx(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new ka(t,{parser:Ex,props:vt.fromObject({formatter:Cx}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new Pa(t,{viewProps:this.viewProps}):null;const r=new Ox(t,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),un(this.popC_.shows,i=>{i&&r.refresh()}),ds({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,c)=>c})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_i(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const n=t.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Ca(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!gi(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&t.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Rx(){return new os({assembly:Mf,components:[0,1,2,3].map(s=>s%2===0?new ba({min:0,max:1}):void 0)})}Nt({id:"cubicbezier",type:"blade",accept(s){const t=It(s,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return t?{params:t}:null},controller(s){var t,n;const r=new As(...s.params.value),i=Jt(r,{constraint:Rx(),equals:As.equals}),c=new Wd(s.document,{axis:{textProps:vt.fromObject({keyScale:.1,pointerScale:.01,formatter:yr(2)})},expanded:(t=s.params.expanded)!==null&&t!==void 0?t:!1,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps});return new ia(s.document,{blade:s.blade,props:vt.fromObject({label:s.params.label}),value:i,valueController:c})},api(s){return!(s.controller instanceof ia)||!(s.controller.valueController instanceof Wd)?null:new _x(s.controller)}});class Dx extends us{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(t,n){const r=n.bind(this);return this.controller.valueController.ticker.emitter.on(t,()=>{r(new Is(this))}),this}}const Xd=20;class Ix{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(t-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Xd)return;const t=this.timestamps_.length-Xd;this.timestamps_.splice(0,t);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(t){if(this.start_===null)return;const n=t.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const Ho=ht("fps");class Fx{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ho()),n.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(Ho("g")),this.element.appendChild(this.graphElement);const r=t.createElement("div");r.classList.add(Ho("l")),this.element.appendChild(r);const i=t.createElement("span");i.classList.add(Ho("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;const c=t.createElement("span");c.classList.add(Ho("u")),c.textContent="FPS",r.appendChild(c)}}class Nx{constructor(t,n){this.stopwatch_=new Ix,this.onTick_=this.onTick_.bind(this),this.ticker=n.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=n.props,this.value_=n.value,this.viewProps=n.viewProps,this.view=new Fx(t,{viewProps:this.viewProps}),this.graphC_=new fu(t,{formatter:yr(0),props:this.props,rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()})}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.fps;if(t!==null){const n=this.value_.rawValue;this.value_.rawValue=Wy(n,t),this.view.valueElement.textContent=t.toFixed(0)}}}class Yd extends vo{constructor(t,n){const r=n.valueController,i=new vi(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}function Vx(s,t){return t===0?new Jh:new ep(s,t??_o.monitor.defaultInterval)}Nt({id:"fpsgraph",type:"blade",accept(s){const t=It(s,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return t?{params:t}:null},controller(s){var t,n,r,i;const c=(t=s.params.interval)!==null&&t!==void 0?t:500;return new Yd(s.document,{blade:s.blade,labelProps:vt.fromObject({label:s.params.label}),valueController:new Nx(s.document,{props:vt.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:90,min:(r=s.params.min)!==null&&r!==void 0?r:0}),rows:(i=s.params.rows)!==null&&i!==void 0?i:2,ticker:Vx(s.document,c),value:Jt(qy(80)),viewProps:s.viewProps})})},api(s){return s.controller instanceof Yd?new Dx(s.controller):null}});class cn{constructor(t,n){this.min=t,this.max=n}static isObject(t){if(typeof t!="object"||t===null)return!1;const n=t.min,r=t.max;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.min===n.min&&t.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Af={fromComponents:s=>new cn(s[0],s[1]),toComponents:s=>[s.min,s.max]};class Of{constructor(t){this.edge=t}constrain(t){var n,r,i,c,o,d,a,l;if(t.min<=t.max)return new cn((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(t.min))!==null&&r!==void 0?r:t.min,(c=(i=this.edge)===null||i===void 0?void 0:i.constrain(t.max))!==null&&c!==void 0?c:t.max);const b=(t.min+t.max)/2;return new cn((d=(o=this.edge)===null||o===void 0?void 0:o.constrain(b))!==null&&d!==void 0?d:b,(l=(a=this.edge)===null||a===void 0?void 0:a.constrain(b))!==null&&l!==void 0?l:b)}}const ml=ht("rsltxt");class Bx{constructor(t,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=t.createElement("div"),this.element.classList.add(ml());const r=t.createElement("div");r.classList.add(ml("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(ml("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const gs=ht("rsl");class Ux{constructor(t,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=t.createElement("div"),this.element.classList.add(gs()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=t.createElement("div");r.classList.add(gs("t")),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(gs("b")),r.appendChild(i),this.barElement=i;const c=["min","max"].map(o=>{const d=t.createElement("div");return d.classList.add(gs("k"),gs("k",o)),r.appendChild(d),d});this.knobElements=[c[0],c[1]],this.update_()}valueToX_(t){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Zt(bt(t,n,r,0,1),0,1)*100}update_(){const t=this.value_.rawValue;t.length===0?this.element.classList.add(gs(void 0,"zero")):this.element.classList.remove(gs(void 0,"zero"));const n=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,i)=>{r.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Gx{constructor(t,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new Ux(t,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new br(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){if(!t.point)return null;const n=(t.point.x+this.ofs_())/t.bounds.width,r=this.sliderProps.get("min"),i=this.sliderProps.get("max");return bt(n,0,1,r,i)}onPointerDown_(t){if(!t.data.point)return;const n=t.data.point.x/t.data.bounds.width,r=this.value.rawValue,i=this.sliderProps.get("min"),c=this.sliderProps.get("max"),o=bt(r.min,i,c,0,1),d=bt(r.max,i,c,0,1);Math.abs(d-n)<=.025?this.grabbing_="max":Math.abs(o-n)<=.025?this.grabbing_="min":n>=o&&n<=d?(this.grabbing_="length",this.grabOffset_=bt(n-o,0,1,0,c-i)):n<o?(this.grabbing_="min",this.onPointerMove_(t)):n>d&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,n){const r=this.valueFromData_(t);if(r===null)return;const i=this.sliderProps.get("min"),c=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new cn(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new cn(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let d=r-this.grabOffset_,a=d+o;d<i?(d=i,a=i+o):a>c&&(d=c-o,a=c),this.value.setRawValue(new cn(d,a),n)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class zx{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new Gx(t,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new Fs(t,{assembly:Af,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new Bx(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function qx(s){return cn.isObject(s)?new cn(s.min,s.max):new cn(0,0)}function Hx(s,t){s.writeProperty("max",t.max),s.writeProperty("min",t.min)}function Wx(s){const t=[],n=wa(s);n&&t.push(n);const r=_a(s);return r&&t.push(r),new Of(new cs(t))}Nt({id:"input-interval",type:"input",accept:(s,t)=>{if(!cn.isObject(s))return null;const n=It(t,r=>Object.assign(Object.assign({},yi(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new cn(s.min,s.max),params:n}:null},binding:{reader:s=>qx,constraint:s=>Wx(s.params),equals:cn.equals,writer:s=>Hx},controller(s){const t=s.value,n=s.constraint;if(!(n instanceof Of))throw yn.shouldNeverHappen();const r=(t.rawValue.min+t.rawValue.max)/2,i=vt.fromObject(mi(s.params,r)),c=n.edge&&ti(n.edge,pi);if(c)return new zx(s.document,{constraint:n.edge,parser:Vr,sliderProps:new vt({keyScale:i.value("keyScale"),max:c.values.value("max"),min:c.values.value("min")}),textProps:i,value:t,viewProps:s.viewProps});const o={constraint:n.edge,textProps:i};return new Fs(s.document,{assembly:Af,axes:[o,o],parser:Vr,value:t,viewProps:s.viewProps})}});class Xx{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return(t=this.controller_.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.props.set("title",t)}}class Yx extends xa{constructor(t,n,r,i,c){super(t,i,c),this.cell=n,this.index=r}}class Kx extends us{constructor(t){super(t),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const i=new Xx(r);this.cellToApiMap_.set(r,i)})}get value(){return this.controller.value}cell(t,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+t];return this.cellToApiMap_.get(i)}on(t,n){const r=n.bind(this);this.controller.value.emitter.on(t,i=>{const c=this.controller.valueController,o=c.findCellByValue(i.rawValue);if(!o)return;const d=this.cellToApiMap_.get(o);if(!d)return;const a=c.cellControllers.indexOf(o);r(new Yx(this,d,[a%c.size[0],Math.floor(a/c.size[0])],i.rawValue))})}}const Wo=ht("rad");class $x{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Wo()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(Wo("l")),this.element.appendChild(r);const i=t.createElement("input");i.classList.add(Wo("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;const c=t.createElement("div");c.classList.add(Wo("b")),r.appendChild(c);const o=t.createElement("div");o.classList.add(Wo("t")),c.appendChild(o),Kr(n.props,"title",d=>{o.textContent=d})}}class Zx{constructor(t,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new $x(t,{name:n.name,props:this.props,viewProps:this.viewProps})}}class Gl{constructor(t,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,i]=this.size;for(let c=0;c<i;c++)for(let o=0;o<r;o++){const d=new Zx(t,{name:n.groupName,props:vt.fromObject(Object.assign({},n.cellConfig(o,c))),viewProps:Ps.create()});this.cellCs_.push(d),this.cellValues_.push(n.cellConfig(o,c).value)}this.value=n.value,un(this.value,c=>{const o=this.findCellByValue(c);o&&(o.view.inputElement.checked=!0)}),this.viewProps=Ps.create(),this.view=new np(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(c=>{c.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(c.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(t){const n=this.cellValues_.findIndex(r=>r===t);return n<0?null:this.cellCs_[n]}onCellInputChange_(t){const n=t.currentTarget,r=this.cellCs_.findIndex(i=>i.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}(function(){return Nt({id:"radiogrid",type:"blade",accept(s){const t=It(s,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return t?{params:t}:null},controller(s){const t=Jt(s.params.value);return new ia(s.document,{blade:s.blade,props:vt.fromObject({label:s.params.label}),value:t,valueController:new Gl(s.document,{groupName:s.params.groupName,cellConfig:s.params.cells,size:s.params.size,value:t})})},api(s){return!(s.controller instanceof ia)||!(s.controller.valueController instanceof Gl)?null:new Kx(s.controller)}})})();function zu(s){return Nt({id:"input-radiogrid",type:"input",accept(t,n){if(!s.isType(t))return null;const r=It(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return r?{initialValue:t,params:r}:null},binding:s.binding,controller:t=>new Gl(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})})}zu({isType:s=>typeof s=="number",binding:{reader:s=>fi,writer:s=>Pn}});zu({isType:s=>typeof s=="string",binding:{reader:s=>su,writer:s=>Pn}});zu({isType:s=>typeof s=="boolean",binding:{reader:s=>nu,writer:s=>Pn}});function Qx(s){let t,n;return t=new Eo({props:{theme:s[4],userCreatedPane:!1,$$slots:{default:[e2]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&16&&(c.theme=r[4]),i&262159&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function Jx(s){let t,n,r,i;const c=[r2,t2],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function e2(s){let t,n,r,i,c,o;function d(u){s[11](u)}function a(u){s[12](u)}function l(u){s[13](u)}function b(u){s[14](u)}let y={};return s[1]!==void 0&&(y.disabled=s[1]),s[0]!==void 0&&(y.options=s[0]),s[3]!==void 0&&(y.plugin=s[3]),s[2]!==void 0&&(y.ref=s[2]),t=new Rf({props:y}),Je.push(()=>it(t,"disabled",d)),Je.push(()=>it(t,"options",a)),Je.push(()=>it(t,"plugin",l)),Je.push(()=>it(t,"ref",b)),{c(){dt(t.$$.fragment)},m(u,p){ut(t,u,p),o=!0},p(u,p){const h={};!n&&p&2&&(n=!0,h.disabled=u[1],ot(()=>n=!1)),!r&&p&1&&(r=!0,h.options=u[0],ot(()=>r=!1)),!i&&p&8&&(i=!0,h.plugin=u[3],ot(()=>i=!1)),!c&&p&4&&(c=!0,h.ref=u[2],ot(()=>c=!1)),t.$set(h)},i(u){o||(Ue(t.$$.fragment,u),o=!0)},o(u){He(t.$$.fragment,u),o=!1},d(u){ct(t,u)}}}function t2(s){let t,n;return t=new hs({props:{keysAdd:["containerVerticalPadding"],theme:s[4]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&16&&(c.theme=r[4]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function r2(s){let t;return{c(){t=Yr("div"),or(t,"display","none")},m(n,r){_t(n,t,r),s[10](t)},p:Kt,i:Kt,o:Kt,d(n){n&&gt(t),s[10](null)}}}function n2(s){let t,n,r,i;const c=[Jx,Qx],o=[];function d(a,l){return a[6]?0:1}return t=d(s),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function s2(s,t,n){let r,{options:i}=t,{disabled:c=!1}=t,{theme:o=void 0}=t,{ref:d=void 0}=t,{plugin:a=void 0}=t;const l=ln("registerPlugin"),b=ln("parentStore");ns(s,b,j=>n(9,r=j));const y=ln("userCreatedPane");let u,p,h;function m(){h&&h.dispose(),a!==void 0&&l(a),n(8,h=r.addBlade({index:p,...i,disabled:c})),n(2,d=h)}Rs(()=>{n(7,p=u?Da(u):0)}),Ds(()=>{h==null||h.dispose()});function g(j){Je[j?"unshift":"push"](()=>{u=j,n(5,u)})}function f(j){c=j,n(1,c)}function v(j){i=j,n(0,i)}function _(j){a=j,n(3,a)}function x(j){d=j,n(2,d)}return s.$$set=j=>{"options"in j&&n(0,i=j.options),"disabled"in j&&n(1,c=j.disabled),"theme"in j&&n(4,o=j.theme),"ref"in j&&n(2,d=j.ref),"plugin"in j&&n(3,a=j.plugin)},s.$$.update=()=>{s.$$.dirty&258&&h&&n(8,h.disabled=c,h),s.$$.dirty&260,s.$$.dirty&641&&i&&r&&p!==void 0&&m(),s.$$.dirty&528&&o&&r&&(y||!Ra(r))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Blade> components for a theme prop.)")},[i,c,d,a,o,u,b,p,h,r,g,f,v,_,x]}class Rf extends cr{constructor(t){super(),ur(this,t,s2,n2,ar,{options:0,disabled:1,theme:4,ref:2,plugin:3})}}var o2=Function.prototype.toString,yl=Object.create,i2=Object.prototype.toString,a2=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(t){return!!~this._keys.indexOf(t)},s.prototype.get=function(t){return this._values[this._keys.indexOf(t)]},s.prototype.set=function(t,n){this._keys.push(t),this._values.push(n)},s}();function l2(){return new a2}function u2(){return new WeakMap}var c2=typeof WeakMap<"u"?u2:l2;function qu(s){if(!s)return yl(null);var t=s.constructor;if(t===Object)return s===Object.prototype?{}:yl(s);if(~o2.call(t).indexOf("[native code]"))try{return new t}catch{}return yl(s)}function d2(s){var t="";return s.global&&(t+="g"),s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),s.sticky&&(t+="y"),t}function h2(s){return s.flags}var p2=/test/g.flags==="g"?h2:d2;function Df(s){var t=i2.call(s);return t.substring(8,t.length-1)}function f2(s){return s[Symbol.toStringTag]||Df(s)}var m2=typeof Symbol<"u"?f2:Df,y2=Object.defineProperty,g2=Object.getOwnPropertyDescriptor,If=Object.getOwnPropertyNames,Hu=Object.getOwnPropertySymbols,Ff=Object.prototype,Nf=Ff.hasOwnProperty,v2=Ff.propertyIsEnumerable,Vf=typeof Hu=="function";function b2(s){return If(s).concat(Hu(s))}var _2=Vf?b2:If;function Ba(s,t,n){for(var r=_2(s),i=0,c=r.length,o=void 0,d=void 0;i<c;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(d=g2(s,o),!d){t[o]=n.copier(s[o],n);continue}!d.get&&!d.set&&(d.value=n.copier(d.value,n));try{y2(t,o,d)}catch{t[o]=d.value}}return t}function w2(s,t){var n=new t.Constructor;t.cache.set(s,n);for(var r=0,i=s.length;r<i;++r)n[r]=t.copier(s[r],t);return n}function x2(s,t){var n=new t.Constructor;return t.cache.set(s,n),Ba(s,n,t)}function Bf(s,t){return s.slice(0)}function j2(s,t){return s.slice(0,s.size,s.type)}function C2(s,t){return new t.Constructor(Bf(s.buffer))}function E2(s,t){return new t.Constructor(s.getTime())}function Uf(s,t){var n=new t.Constructor;return t.cache.set(s,n),s.forEach(function(r,i){n.set(i,t.copier(r,t))}),n}function S2(s,t){return Ba(s,Uf(s,t),t)}function P2(s,t){var n=qu(t.prototype);t.cache.set(s,n);for(var r in s)Nf.call(s,r)&&(n[r]=t.copier(s[r],t));return n}function k2(s,t){var n=qu(t.prototype);t.cache.set(s,n);for(var r in s)Nf.call(s,r)&&(n[r]=t.copier(s[r],t));for(var i=Hu(s),c=0,o=i.length,d=void 0;c<o;++c)d=i[c],v2.call(s,d)&&(n[d]=t.copier(s[d],t));return n}var T2=Vf?k2:P2;function M2(s,t){var n=qu(t.prototype);return t.cache.set(s,n),Ba(s,n,t)}function gl(s,t){return new t.Constructor(s.valueOf())}function L2(s,t){var n=new t.Constructor(s.source,p2(s));return n.lastIndex=s.lastIndex,n}function na(s,t){return s}function Gf(s,t){var n=new t.Constructor;return t.cache.set(s,n),s.forEach(function(r){n.add(t.copier(r,t))}),n}function A2(s,t){return Ba(s,Gf(s,t),t)}var O2=Array.isArray,Wu=Object.assign,R2=Object.getPrototypeOf||function(s){return s.__proto__},zf={array:w2,arrayBuffer:Bf,blob:j2,dataView:C2,date:E2,error:na,map:Uf,object:T2,regExp:L2,set:Gf},D2=Wu({},zf,{array:x2,map:S2,object:M2,set:A2});function I2(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:gl,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:gl,Object:s.object,Promise:na,RegExp:s.regExp,Set:s.set,String:gl,WeakMap:na,WeakSet:na,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function qf(s){var t=Wu({},zf,s),n=I2(t),r=n.Array,i=n.Object;function c(o,d){if(d.prototype=d.Constructor=void 0,!o||typeof o!="object")return o;if(d.cache.has(o))return d.cache.get(o);if(d.prototype=R2(o),d.Constructor=d.prototype&&d.prototype.constructor,!d.Constructor||d.Constructor===Object)return i(o,d);if(O2(o))return r(o,d);var a=n[m2(o)];return a?a(o,d):typeof o.then=="function"?o:i(o,d)}return function(d){return c(d,{Constructor:void 0,cache:c2(),copier:c,prototype:void 0})}}function F2(s){return qf(Wu({},D2,s))}F2({});var uo=qf({}),N2=Object.getOwnPropertyNames,V2=Object.getOwnPropertySymbols,B2=Object.prototype.hasOwnProperty;function Kd(s,t){return function(r,i,c){return s(r,i,c)&&t(r,i,c)}}function Hi(s){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return s(n,r,i);var c=i.cache,o=c.get(n),d=c.get(r);if(o&&d)return o===r&&d===n;c.set(n,r),c.set(r,n);var a=s(n,r,i);return c.delete(n),c.delete(r),a}}function $d(s){return N2(s).concat(V2(s))}var Hf=Object.hasOwn||function(s,t){return B2.call(s,t)};function So(s,t){return s||t?s===t:s===t||s!==s&&t!==t}var Wf="_owner",Zd=Object.getOwnPropertyDescriptor,Qd=Object.keys;function U2(s,t,n){var r=s.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(s[r],t[r],r,r,s,t,n))return!1;return!0}function G2(s,t){return So(s.getTime(),t.getTime())}function Jd(s,t,n){if(s.size!==t.size)return!1;for(var r={},i=s.entries(),c=0,o,d;(o=i.next())&&!o.done;){for(var a=t.entries(),l=!1,b=0;(d=a.next())&&!d.done;){var y=o.value,u=y[0],p=y[1],h=d.value,m=h[0],g=h[1];!l&&!r[b]&&(l=n.equals(u,m,c,b,s,t,n)&&n.equals(p,g,u,m,s,t,n))&&(r[b]=!0),b++}if(!l)return!1;c++}return!0}function z2(s,t,n){var r=Qd(s),i=r.length;if(Qd(t).length!==i)return!1;for(var c;i-- >0;)if(c=r[i],c===Wf&&(s.$$typeof||t.$$typeof)&&s.$$typeof!==t.$$typeof||!Hf(t,c)||!n.equals(s[c],t[c],c,c,s,t,n))return!1;return!0}function Xo(s,t,n){var r=$d(s),i=r.length;if($d(t).length!==i)return!1;for(var c,o,d;i-- >0;)if(c=r[i],c===Wf&&(s.$$typeof||t.$$typeof)&&s.$$typeof!==t.$$typeof||!Hf(t,c)||!n.equals(s[c],t[c],c,c,s,t,n)||(o=Zd(s,c),d=Zd(t,c),(o||d)&&(!o||!d||o.configurable!==d.configurable||o.enumerable!==d.enumerable||o.writable!==d.writable)))return!1;return!0}function q2(s,t){return So(s.valueOf(),t.valueOf())}function H2(s,t){return s.source===t.source&&s.flags===t.flags}function eh(s,t,n){if(s.size!==t.size)return!1;for(var r={},i=s.values(),c,o;(c=i.next())&&!c.done;){for(var d=t.values(),a=!1,l=0;(o=d.next())&&!o.done;)!a&&!r[l]&&(a=n.equals(c.value,o.value,c.value,o.value,s,t,n))&&(r[l]=!0),l++;if(!a)return!1}return!0}function W2(s,t){var n=s.length;if(t.length!==n)return!1;for(;n-- >0;)if(s[n]!==t[n])return!1;return!0}var X2="[object Arguments]",Y2="[object Boolean]",K2="[object Date]",$2="[object Map]",Z2="[object Number]",Q2="[object Object]",J2="[object RegExp]",ej="[object Set]",tj="[object String]",rj=Array.isArray,th=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rh=Object.assign,nj=Object.prototype.toString.call.bind(Object.prototype.toString);function sj(s){var t=s.areArraysEqual,n=s.areDatesEqual,r=s.areMapsEqual,i=s.areObjectsEqual,c=s.arePrimitiveWrappersEqual,o=s.areRegExpsEqual,d=s.areSetsEqual,a=s.areTypedArraysEqual;return function(b,y,u){if(b===y)return!0;if(b==null||y==null||typeof b!="object"||typeof y!="object")return b!==b&&y!==y;var p=b.constructor;if(p!==y.constructor)return!1;if(p===Object)return i(b,y,u);if(rj(b))return t(b,y,u);if(th!=null&&th(b))return a(b,y,u);if(p===Date)return n(b,y,u);if(p===RegExp)return o(b,y,u);if(p===Map)return r(b,y,u);if(p===Set)return d(b,y,u);var h=nj(b);return h===K2?n(b,y,u):h===J2?o(b,y,u):h===$2?r(b,y,u):h===ej?d(b,y,u):h===Q2?typeof b.then!="function"&&typeof y.then!="function"&&i(b,y,u):h===X2?i(b,y,u):h===Y2||h===Z2||h===tj?c(b,y,u):!1}}function oj(s){var t=s.circular,n=s.createCustomConfig,r=s.strict,i={areArraysEqual:r?Xo:U2,areDatesEqual:G2,areMapsEqual:r?Kd(Jd,Xo):Jd,areObjectsEqual:r?Xo:z2,arePrimitiveWrappersEqual:q2,areRegExpsEqual:H2,areSetsEqual:r?Kd(eh,Xo):eh,areTypedArraysEqual:r?Xo:W2};if(n&&(i=rh({},i,n(i))),t){var c=Hi(i.areArraysEqual),o=Hi(i.areMapsEqual),d=Hi(i.areObjectsEqual),a=Hi(i.areSetsEqual);i=rh({},i,{areArraysEqual:c,areMapsEqual:o,areObjectsEqual:d,areSetsEqual:a})}return i}function ij(s){return function(t,n,r,i,c,o,d){return s(t,n,d)}}function aj(s){var t=s.circular,n=s.comparator,r=s.createState,i=s.equals,c=s.strict;if(r)return function(a,l){var b=r(),y=b.cache,u=y===void 0?t?new WeakMap:void 0:y,p=b.meta;return n(a,l,{cache:u,equals:i,meta:p,strict:c})};if(t)return function(a,l){return n(a,l,{cache:new WeakMap,equals:i,meta:void 0,strict:c})};var o={cache:void 0,equals:i,meta:void 0,strict:c};return function(a,l){return n(a,l,o)}}ps();ps({strict:!0});ps({circular:!0});ps({circular:!0,strict:!0});var zl=ps({createInternalComparator:function(){return So}});ps({strict:!0,createInternalComparator:function(){return So}});ps({circular:!0,createInternalComparator:function(){return So}});ps({circular:!0,createInternalComparator:function(){return So},strict:!0});function ps(s){s===void 0&&(s={});var t=s.circular,n=t===void 0?!1:t,r=s.createInternalComparator,i=s.createState,c=s.strict,o=c===void 0?!1:c,d=oj(s),a=sj(d),l=r?r(a):ij(a);return aj({circular:n,comparator:a,createState:i,equals:l,strict:o})}function lj(s){let t,n;return t=new Eo({props:{theme:s[7],userCreatedPane:!1,$$slots:{default:[cj]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i[0]&128&&(c.theme=r[7]),i[0]&127|i[1]&1&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function uj(s){let t,n,r,i;const c=[hj,dj],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function cj(s){let t,n,r,i,c,o,d,a,l;function b(v){s[14](v)}function y(v){s[15](v)}function u(v){s[16](v)}function p(v){s[17](v)}function h(v){s[18](v)}function m(v){s[19](v)}function g(v){s[20](v)}let f={};return s[1]!==void 0&&(f.disabled=s[1]),s[5]!==void 0&&(f.key=s[5]),s[2]!==void 0&&(f.label=s[2]),s[0]!==void 0&&(f.object=s[0]),s[3]!==void 0&&(f.options=s[3]),s[6]!==void 0&&(f.plugin=s[6]),s[4]!==void 0&&(f.ref=s[4]),t=new Xu({props:f}),Je.push(()=>it(t,"disabled",b)),Je.push(()=>it(t,"key",y)),Je.push(()=>it(t,"label",u)),Je.push(()=>it(t,"object",p)),Je.push(()=>it(t,"options",h)),Je.push(()=>it(t,"plugin",m)),Je.push(()=>it(t,"ref",g)),t.$on("change",s[21]),{c(){dt(t.$$.fragment)},m(v,_){ut(t,v,_),l=!0},p(v,_){const x={};!n&&_[0]&2&&(n=!0,x.disabled=v[1],ot(()=>n=!1)),!r&&_[0]&32&&(r=!0,x.key=v[5],ot(()=>r=!1)),!i&&_[0]&4&&(i=!0,x.label=v[2],ot(()=>i=!1)),!c&&_[0]&1&&(c=!0,x.object=v[0],ot(()=>c=!1)),!o&&_[0]&8&&(o=!0,x.options=v[3],ot(()=>o=!1)),!d&&_[0]&64&&(d=!0,x.plugin=v[6],ot(()=>d=!1)),!a&&_[0]&16&&(a=!0,x.ref=v[4],ot(()=>a=!1)),t.$set(x)},i(v){l||(Ue(t.$$.fragment,v),l=!0)},o(v){He(t.$$.fragment,v),l=!1},d(v){ct(t,v)}}}function dj(s){let t,n;return t=new hs({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:s[7]}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i[0]&128&&(c.theme=r[7]),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function hj(s){let t;return{c(){t=Yr("div"),or(t,"display","none")},m(n,r){_t(n,t,r),s[13](t)},p:Kt,i:Kt,o:Kt,d(n){n&&gt(t),s[13](null)}}}function pj(s){let t,n,r,i;const c=[uj,lj],o=[];function d(a,l){return a[9]?0:1}return t=d(s),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function fj(s,t,n){let r,{object:i}=t,{key:c}=t,{disabled:o=!1}=t,{label:d=void 0}=t,{options:a=void 0}=t,{theme:l=void 0}=t,{ref:b=void 0}=t,{plugin:y=void 0}=t;const u=ln("registerPlugin"),p=ln("parentStore");ns(s,p,G=>n(12,r=G));const h=ln("userCreatedPane");let m,g,f;function v(){m&&m.dispose(),y!==void 0&&u(y),n(10,m=r.addBinding(i,c,{index:f,label:d,...a,disabled:o})),n(4,b=m),m.on("change",P)}Rs(()=>{n(11,f=g?Da(g):0)}),Ds(()=>{m==null||m.dispose()});const _=ya();let x=i,j=uo(i[c]),M=!1;function S(G){x!==G&&(M=!1),zl(G[c],j)||(j=uo(G[c]),_("change",{value:uo(G[c]),origin:M?"internal":"external"}),!M&&m&&(m.off("change",P),m.refresh(),m.on("change",P))),M=!1,x!==G&&(x=G,v())}function P(){M=!0,n(0,i)}function L(G){Je[G?"unshift":"push"](()=>{g=G,n(8,g)})}function D(G){o=G,n(1,o)}function k(G){c=G,n(5,c)}function I(G){d=G,n(2,d)}function A(G){i=G,n(0,i)}function F(G){a=G,n(3,a)}function N(G){y=G,n(6,y)}function U(G){b=G,n(4,b)}function W(G){Vn.call(this,s,G)}return s.$$set=G=>{"object"in G&&n(0,i=G.object),"key"in G&&n(5,c=G.key),"disabled"in G&&n(1,o=G.disabled),"label"in G&&n(2,d=G.label),"options"in G&&n(3,a=G.options),"theme"in G&&n(7,l=G.theme),"ref"in G&&n(4,b=G.ref),"plugin"in G&&n(6,y=G.plugin)},s.$$.update=()=>{s.$$.dirty[0]&1026&&m!==void 0&&n(10,m.disabled=o,m),s.$$.dirty[0]&1028&&m!==void 0&&n(10,m.label=d,m),s.$$.dirty[0]&1040,s.$$.dirty[0]&6152&&r!==void 0&&f!==void 0&&v(),s.$$.dirty[0]&4097&&r!==void 0&&S(i),s.$$.dirty[0]&4224&&l&&r!==void 0&&(h||!Ra(r))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)")},[i,o,d,a,b,c,y,l,g,p,m,f,r,L,D,k,I,A,F,N,U,W]}class Xu extends cr{constructor(t){super(),ur(this,t,fj,pj,ar,{object:0,key:5,disabled:1,label:2,options:3,theme:7,ref:4,plugin:6},null,[-1,-1])}}function mj(s){let t,n,r,i;const c=[{key:s[3]},{options:s[1]},s[4]];function o(l){s[6](l)}function d(l){s[7](l)}let a={};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[2]!==void 0&&(a.object=s[2]),s[0]!==void 0&&(a.ref=s[0]),t=new Xu({props:a}),Je.push(()=>it(t,"object",o)),Je.push(()=>it(t,"ref",d)),t.$on("change",s[8]),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,[b]){const y=b&26?Hr(c,[b&8&&{key:l[3]},b&2&&{options:l[1]},b&16&&Wr(l[4])]):{};!n&&b&4&&(n=!0,y.object=l[2],ot(()=>n=!1)),!r&&b&1&&(r=!0,y.ref=l[0],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function yj(s,t,n){let r;const i=["value","ref","options"];let c=Qt(t,i),{value:o}=t,{ref:d=void 0}=t,{options:a=void 0}=t;const l=Symbol("key");function b(){return o}function y(){n(2,r[l]=o,r)}function u(m){r=m,n(2,r)}function p(m){d=m,n(0,d)}function h(m){Vn.call(this,s,m)}return s.$$set=m=>{t=xt(xt({},t),Nr(m)),n(4,c=Qt(t,i)),"value"in m&&n(5,o=m.value),"ref"in m&&n(0,d=m.ref),"options"in m&&n(1,a=m.options)},s.$$.update=()=>{s.$$.dirty&4&&n(5,o=r[l]),s.$$.dirty&32&&y()},n(2,r={[l]:b()}),[d,a,r,l,c,o,u,p,h]}class gj extends cr{constructor(t){super(),ur(this,t,yj,mj,ar,{value:5,ref:0,options:1})}}function vj(s){let t,n,r,i;const c=[{options:s[2]},s[3]];function o(l){s[5](l)}function d(l){s[6](l)}let a={};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[1]!==void 0&&(a.value=s[1]),s[0]!==void 0&&(a.ref=s[0]),t=new gj({props:a}),Je.push(()=>it(t,"value",o)),Je.push(()=>it(t,"ref",d)),t.$on("change",s[7]),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,[b]){const y=b&12?Hr(c,[b&4&&{options:l[2]},b&8&&Wr(l[3])]):{};!n&&b&2&&(n=!0,y.value=l[1],ot(()=>n=!1)),!r&&b&1&&(r=!0,y.ref=l[0],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function bj(s,t,n){const r=["options","ref","value"];let i=Qt(t,r),{options:c=void 0}=t,{ref:o=void 0}=t,{value:d}=t,a;function l(u){d=u,n(1,d)}function b(u){o=u,n(0,o)}function y(u){Vn.call(this,s,u)}return s.$$set=u=>{t=xt(xt({},t),Nr(u)),n(3,i=Qt(t,r)),"options"in u&&n(4,c=u.options),"ref"in u&&n(0,o=u.ref),"value"in u&&n(1,d=u.value)},s.$$.update=()=>{s.$$.dirty&16&&n(2,a={...c,readonly:!1})},[o,d,a,i,c,l,b,y]}class Yu extends cr{constructor(t){super(),ur(this,t,bj,vj,ar,{options:4,ref:0,value:1})}}function _j(s){let t,n,r,i;const c=[{options:s[2]},s[3]];function o(l){s[11](l)}function d(l){s[12](l)}let a={};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[1]!==void 0&&(a.value=s[1]),s[0]!==void 0&&(a.ref=s[0]),t=new Yu({props:a}),Je.push(()=>it(t,"value",o)),Je.push(()=>it(t,"ref",d)),t.$on("change",s[13]),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,[b]){const y=b&12?Hr(c,[b&4&&{options:l[2]},b&8&&Wr(l[3])]):{};!n&&b&2&&(n=!0,y.value=l[1],ot(()=>n=!1)),!r&&b&1&&(r=!0,y.ref=l[0],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function wj(s,t,n){const r=["value","ref","options","userExpandable","expanded","buttonClass","picker"];let i=Qt(t,r),{value:c}=t,{ref:o=void 0}=t,{options:d=void 0}=t,{userExpandable:a=!0}=t,{expanded:l=!1}=t,{buttonClass:b=""}=t,{picker:y=void 0}=t,u,p=!1;const h=l;let m=h;function g(_){c=_,n(1,c)}function f(_){o=_,n(0,o)}function v(_){Vn.call(this,s,_)}return s.$$set=_=>{t=xt(xt({},t),Nr(_)),n(3,i=Qt(t,r)),"value"in _&&n(1,c=_.value),"ref"in _&&n(0,o=_.ref),"options"in _&&n(5,d=_.options),"userExpandable"in _&&n(6,a=_.userExpandable),"expanded"in _&&n(4,l=_.expanded),"buttonClass"in _&&n(7,b=_.buttonClass),"picker"in _&&n(8,y=_.picker)},s.$$.update=()=>{var _,x,j,M;s.$$.dirty&1537&&!p&&o&&(n(9,p=!0),(j=(x=(_=o.controller)==null?void 0:_.valueController)==null?void 0:x.foldable_)==null||j.value("expanded").emitter.on("change",S=>{n(10,m=S.rawValue),n(4,l=m)})),s.$$.dirty&288&&n(2,u={...d,expanded:h,picker:y}),s.$$.dirty&193&&o&&b&&mu(a??!0,o.element,b),s.$$.dirty&1169&&o&&b&&l!==m&&o.element.querySelectorAll(`.${b}`).length>0&&((M=o.element.querySelector(`.${b}`))==null||M.click())},[o,c,u,i,l,d,a,b,y,p,m,g,f,v]}class xj extends cr{constructor(t){super(),ur(this,t,wj,_j,ar,{value:1,ref:0,options:5,userExpandable:6,expanded:4,buttonClass:7,picker:8})}}function jj(s){let t,n,r,i,c,o,d;const a=[{buttonClass:nh},{options:s[3]},s[4]];function l(h){s[8](h)}function b(h){s[9](h)}function y(h){s[10](h)}let u={};for(let h=0;h<a.length;h+=1)u=xt(u,a[h]);s[1]!==void 0&&(u.value=s[1]),s[0]!==void 0&&(u.expanded=s[0]),s[2]!==void 0&&(u.ref=s[2]),t=new xj({props:u}),Je.push(()=>it(t,"value",l)),Je.push(()=>it(t,"expanded",b)),Je.push(()=>it(t,"ref",y)),t.$on("change",s[11]);let p=!Sp;return{c(){dt(t.$$.fragment),c=Gr(),o=mr()},m(h,m){ut(t,h,m),_t(h,c,m),_t(h,o,m),d=!0},p(h,[m]){const g=m&24?Hr(a,[m&0&&{buttonClass:nh},m&8&&{options:h[3]},m&16&&Wr(h[4])]):{};!n&&m&2&&(n=!0,g.value=h[1],ot(()=>n=!1)),!r&&m&1&&(r=!0,g.expanded=h[0],ot(()=>r=!1)),!i&&m&4&&(i=!0,g.ref=h[2],ot(()=>i=!1)),t.$set(g)},i(h){d||(Ue(t.$$.fragment,h),Ue(p),d=!0)},o(h){He(t.$$.fragment,h),He(p),d=!1},d(h){h&&(gt(c),gt(o)),ct(t,h)}}}const nh="tp-colswv_b";function Cj(s,t,n){const r=["value","expanded","type"];let i=Qt(t,r),{value:c}=t,{expanded:o=void 0}=t,{type:d=void 0}=t,a,l,b;function y(){Array.isArray(c)?c.length===4?n(1,a=fd(c,["r","g","b","a"])):c.length===3?n(1,a=fd(c,["r","g","b"])):console.error("Unreachable"):n(1,a=c)}function u(){Array.isArray(c)&&Oa(a)?Aa(a)?n(6,c=md(a,["r","g","b","a"])):La(a)?n(6,c=md(a,["r","g","b"])):console.error("Unreachable"):typeof c=="string"||va(c)?n(6,c=a):console.error("Unreachable")}function p(){b.on("change",()=>{b.refresh()})}function h(v){a=v,n(1,a)}function m(v){o=v,n(0,o)}function g(v){b=v,n(2,b)}function f(v){Vn.call(this,s,v)}return s.$$set=v=>{n(5,t=xt(xt({},t),Nr(v))),n(4,i=Qt(t,r)),"value"in v&&n(6,c=v.value),"expanded"in v&&n(0,o=v.expanded),"type"in v&&n(7,d=v.type)},s.$$.update=()=>{s.$$.dirty&64&&y(),s.$$.dirty&2&&u(),s.$$.dirty&4&&b!==void 0&&p(),s.$$.dirty&128&&n(3,l={color:{type:d},view:"color"})},t=Nr(t),[o,a,b,l,i,t,c,d,h,m,g,f]}class Ej extends cr{constructor(t){super(),ur(this,t,Cj,jj,ar,{value:6,expanded:0,type:7})}}function Sj(){const s=`
	<svg width="320" height="50" xmlns="http://www.w3.org/2000/svg">
  <style>
    text {
      font-family: "Menlo", monospace;
      font-size: 12px;
			fill: gray;
    }
  </style>
  <text x="50%" y="55%" text-anchor="middle">
    No Image
  </text>
</svg>`,t=new Blob([s],{type:"image/svg+xml"}),n=new Image;return n.src=URL.createObjectURL(t),n}function sh(s){const t=new Image;return t.crossOrigin="anonymous",t.src=s,t}const vs=ht("img");class Pj{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(vs()),n.viewProps.bindClassModifiers(this.element),this.input=t.createElement("input"),this.input.classList.add(vs("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",n.extensions.join(",")),this.image_=t.createElement("img"),this.image_.id="tpimg_"+Math.random().toString(36).slice(2),this.image_.classList.add(vs("image")),this.image_.classList.add(vs(`image_${n.imageFit}`)),this.image_.crossOrigin="anonymous",this.image_.onclick=r=>{n.clickCallback?n.clickCallback(r,this.input):this.input.click()},this.element.classList.add(vs("area_root")),this.element.appendChild(this.image_),this.element.appendChild(this.input)}changeImage(t){this.image_.src=t}changeDraggingState(t){const n=this.element;t?n==null||n.classList.add(vs("area_dragging")):n==null||n.classList.remove(vs("area_dragging"))}}let vl=null;class kj{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Pj(t,{viewProps:this.viewProps,extensions:n.extensions,imageFit:n.imageFit,clickCallback:n.clickCallback}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragstart",this.onDragStart),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragstart",this.onDragStart),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave)}),this.value.emitter.on("change",()=>this.handleValueChange()),this.handleValueChange()}onFile(t){const n=(t==null?void 0:t.target).files;if(!n||!n.length)return;const r=n[0];this.setValue(r)}onDrop(t){t.preventDefault();try{const{dataTransfer:n}=t,r=n==null?void 0:n.files[0];if(r)this.setValue(r);else{const i=n==null?void 0:n.getData("img-id");if(i){const c=document.getElementById(i);this.setValue(c)}else{const c=n==null?void 0:n.getData("url");if(!c)throw new Error("No url");this.setValue(c)}}}catch(n){console.error("Could not parse the dropped image",n)}finally{this.view.changeDraggingState(!1)}}onDragStart(t){var n,r;(n=t.dataTransfer)===null||n===void 0||n.setData("img-id",this.view.image_.id),(r=t.dataTransfer)===null||r===void 0||r.setDragImage(this.view.image_,0,0)}onDragOver(t){t.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(t){t instanceof HTMLImageElement?this.updateImage(t.src):typeof t=="string"||!t?((t==="placeholder"||!t)&&(t=this.handlePlaceholderImage().src),this.updateImage(t)):this.setValue(t)}updateImage(t){this.view.changeImage(t)}setValue(t){if(t instanceof HTMLImageElement)this.value.setRawValue(t);else if(t instanceof File){const n=URL.createObjectURL(t)+"#"+t.name;t.src=n;const r=sh(n);this.value.setRawValue(r||t)}else t?this.value.setRawValue(sh(t)):this.value.setRawValue(this.handlePlaceholderImage())}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return vl||(vl=Sj()),vl}}const Tj=[".jpg",".png",".gif"];Nt({id:"input-image",type:"input",accept(s,t){if(!(s instanceof HTMLImageElement||typeof s=="string"))return null;const n=It(t,r=>({view:r.required.constant("input-image"),acceptUrl:r.optional.boolean,clickCallback:r.optional.function,imageFit:r.optional.custom(i=>i==="contain"||i==="cover"?i:void 0),extensions:r.optional.array(r.required.string)}));return n?{initialValue:s,params:n}:null},binding:{reader(s){return t=>t.src!==void 0?t.src===""?"placeholder":t.src:t},writer(s){return(t,n)=>{t.write(n)}}},controller(s){var t,n;return new kj(s.document,{value:s.value,imageFit:(t=s.params.imageFit)!==null&&t!==void 0?t:"cover",clickCallback:s.params.clickCallback,viewProps:s.viewProps,extensions:(n=s.params.extensions)!==null&&n!==void 0?n:Tj})}});function Mj(s){let t,n,r,i;const c=[{options:s[2]},s[3]];function o(l){s[12](l)}function d(l){s[13](l)}let a={};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[0]!==void 0&&(a.value=s[0]),s[1]!==void 0&&(a.ref=s[1]),t=new Yu({props:a}),Je.push(()=>it(t,"value",o)),Je.push(()=>it(t,"ref",d)),t.$on("change",s[14]),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,[b]){const y=b&12?Hr(c,[b&4&&{options:l[2]},b&8&&Wr(l[3])]):{};!n&&b&1&&(n=!0,y.value=l[0],ot(()=>n=!1)),!r&&b&2&&(r=!0,y.ref=l[1],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function Lj(s,t,n){const r=["value","options","min","max","step","pointerScale","keyScale","format","ref"];let i=Qt(t,r),{value:c}=t,{options:o=void 0}=t,{min:d=void 0}=t,{max:a=void 0}=t,{step:l=void 0}=t,{pointerScale:b=void 0}=t,{keyScale:y=void 0}=t,{format:u=void 0}=t,{ref:p=void 0}=t,h=u,m;function g(_){c=_,n(0,c)}function f(_){p=_,n(1,p)}function v(_){Vn.call(this,s,_)}return s.$$set=_=>{t=xt(xt({},t),Nr(_)),n(3,i=Qt(t,r)),"value"in _&&n(0,c=_.value),"options"in _&&n(4,o=_.options),"min"in _&&n(5,d=_.min),"max"in _&&n(6,a=_.max),"step"in _&&n(7,l=_.step),"pointerScale"in _&&n(8,b=_.pointerScale),"keyScale"in _&&n(9,y=_.keyScale),"format"in _&&n(10,u=_.format),"ref"in _&&n(1,p=_.ref)},s.$$.update=()=>{s.$$.dirty&3072&&h!==u&&n(11,h=u),s.$$.dirty&3056&&n(2,m={min:d,max:a,format:h,keyScale:y,pointerScale:b,step:l,...o})},[c,p,m,i,o,d,a,l,b,y,u,h,g,f,v]}class Aj extends cr{constructor(t){super(),ur(this,t,Lj,Mj,ar,{value:0,options:4,min:5,max:6,step:7,pointerScale:8,keyScale:9,format:10,ref:1})}}function Oj(s){let t,n,r,i,c;const o=[{options:s[1]},s[2]];function d(b){s[7](b)}let a={};for(let b=0;b<o.length;b+=1)a=xt(a,o[b]);s[0]!==void 0&&(a.ref=s[0]),t=new Rf({props:a}),Je.push(()=>it(t,"ref",d));let l=!Sp;return{c(){dt(t.$$.fragment),r=Gr(),i=mr()},m(b,y){ut(t,b,y),_t(b,r,y),_t(b,i,y),c=!0},p(b,[y]){const u=y&6?Hr(o,[y&2&&{options:b[1]},y&4&&Wr(b[2])]):{};!n&&y&1&&(n=!0,u.ref=b[0],ot(()=>n=!1)),t.$set(u)},i(b){c||(Ue(t.$$.fragment,b),Ue(l),c=!0)},o(b){He(t.$$.fragment,b),He(l),c=!1},d(b){b&&(gt(r),gt(i)),ct(t,b)}}}function Rj(s){return Array.isArray(s)&&s.every(t=>typeof t=="object"&&t!==null&&"text"in t&&"value"in t)}function Dj(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function oh(s){return Rj(s)||Dj(s)?s:s.map(t=>({value:t,text:typeof t=="object"?JSON.stringify(t):String(t)}))}function Ij(s,t,n){const r=["value","options","label"];let i=Qt(t,r),{value:c}=t,{options:o}=t,{label:d=void 0}=t;const a=ya();let l,b;function y(){l.on("change",m=>{zl(m.value,c)||(n(4,c=m.value),a("change",{value:uo(c),origin:"internal"}))})}function u(){if(c===void 0){const m=oh(o);return Array.isArray(m)?(n(4,c=m[0].value),c):(n(4,c=m[Object.keys(m)[0]]),c)}return c}function p(){zl(l.value,c)||(n(0,l.value=c,l),a("change",{value:uo(c),origin:"external"}))}function h(m){l=m,n(0,l)}return s.$$set=m=>{n(3,t=xt(xt({},t),Nr(m))),n(2,i=Qt(t,r)),"value"in m&&n(4,c=m.value),"options"in m&&n(5,o=m.options),"label"in m&&n(6,d=m.label)},s.$$.update=()=>{s.$$.dirty&96&&n(1,b={value:u(),label:d,options:oh(o),view:"list"}),s.$$.dirty&1&&l&&y(),s.$$.dirty&17&&l&&p()},t=Nr(t),[l,b,i,t,c,o,d,h]}class Fj extends cr{constructor(t){super(),ur(this,t,Ij,Oj,ar,{value:4,options:5,label:6})}}const mn=ht("ckr");class Nj{constructor(t,n){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=n.formatters,this.unit_=n.unit,this.element=t.createElement("div"),this.element.classList.add(mn(),mn(void 0,`m${n.seriesId}`)),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const r=t.createElement("div");r.classList.add(mn("w")),this.element.appendChild(r),this.offsetElem_=t.createElement("div"),this.offsetElem_.classList.add(mn("o")),r.appendChild(this.offsetElem_),this.svgElem_=t.createElementNS(At,"svg"),this.svgElem_.classList.add(mn("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=t.createElement("div"),this.tooltipElem_.classList.add(ht("tt")(),mn("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const t=new IntersectionObserver(n=>{n.forEach(r=>{r.target!==this.element||r.intersectionRatio===0||(this.update(),t.disconnect())})},{root:null});t.observe(this.element)}rebuildScaleIfNeeded_(t){if(this.boundsWidth_===t)return;this.boundsWidth_=t,this.tickElems_.forEach(l=>{ei(l)}),this.tickElems_=[],this.labelElems_.forEach(l=>{ei(l)}),this.labelElems_=[];const n=this.element.ownerDocument,r=this.unit_.ticks,i=this.unit_.pixels,d=((Math.ceil(t/2/i)+1)*2+1)*r,a=i/r;for(let l=0;l<d;l++){const b=l*a;if(l%r===0){const y=n.createElementNS(At,"line");y.classList.add(mn("mjt")),y.setAttributeNS(null,"x1",String(b)),y.setAttributeNS(null,"y1","0"),y.setAttributeNS(null,"x2",String(b)),y.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(y),this.tickElems_.push(y);const u=n.createElement("div");u.classList.add(mn("l")),u.style.left=`${b}px`,this.offsetElem_.appendChild(u),this.labelElems_.push(u)}else{const y=n.createElementNS(At,"line");y.classList.add(mn("mnt")),y.setAttributeNS(null,"x1",String(b)),y.setAttributeNS(null,"y1","0"),y.setAttributeNS(null,"x2",String(b)),y.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(y),this.tickElems_.push(y)}}}updateScale_(t){const n=this.unit_.value,r=this.unit_.pixels,i=this.value_.rawValue,c=Math.ceil(t/2/r)+1,o=i-i%n-n*c,d=l=>1-Math.pow(Zt(Math.abs(i-l)/(t/2*(n/r)),0,1),10);this.labelElems_.forEach((l,b)=>{const y=o+b*n;l.textContent=this.formatters_.ring(y),l.style.opacity=String(d(y))});const a=this.unit_.ticks;this.tickElems_.forEach((l,b)=>{const y=o+b/a*n;l.style.opacity=String(d(y))})}update(){const t=this.element.getBoundingClientRect().width,n=this.unit_.value,r=this.unit_.pixels,i=this.value_.rawValue,c=Math.ceil(t/2/r)+1,o=(i%n+n*c)*(r/n),d=t/2-o;this.offsetElem_.style.transform=`translateX(${d}px)`,this.tooltipElem_.textContent=this.formatters_.text(i),this.rebuildScaleIfNeeded_(t),this.updateScale_(t)}onValueChange_(){this.update()}onShowsTooltipChange_(t){t.rawValue?this.element.classList.add(mn(void 0,"tt")):this.element.classList.remove(mn(void 0,"tt"))}}class Ku{constructor(t,n){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.tooltipEnabled_=n.tooltipEnabled,this.unit_=n.unit,this.showsTooltip_=Jt(!1),this.view=new Nj(t,{formatters:n.formatters,seriesId:n.seriesId,showsTooltip:this.showsTooltip_,unit:n.unit,value:this.value,viewProps:this.viewProps});const r=new br(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}onPointerDown_(t){const n=t.data;n.point&&(this.ox_=n.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(t){const n=t.data;if(!n.point)return;const r=n.point.x-this.ox_,i=this.unit_.pixels,c=this.unit_.value;this.value.setRawValue(this.ov_-r/i*c,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const bl=ht("ckrtxt");class Vj{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(bl());const r=t.createElement("div");r.classList.add(bl("r")),r.appendChild(n.ringView.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(bl("t")),i.appendChild(n.textView.element),this.element.appendChild(i)}}class Xf{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.rc_=new Ku(t,{formatters:{ring:n.ringFormatter,text:n.textProps.get("formatter")},seriesId:n.seriesId,tooltipEnabled:!1,unit:n.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new bo(t,{parser:n.parser,props:n.textProps,value:this.value,viewProps:this.viewProps}),this.view=new Vj(t,{ringView:this.rc_.view,textView:this.tc_.view})}}function Yf(s){const t=[],n=wa(s);n&&t.push(n);const r=_a(s);return r&&t.push(r),new cs(t)}function Bj(s){return s===0||s===1||s===2?s:void 0}function ih(s){return s!==void 0?String(s):"0"}function Uj(s){const t=yr(Pl(s.value));return n=>{const r=t(n),i=r.substr(0,1);return r+(i==="-"||i==="+"?" ":"")}}const Gj=Nt({id:"input-ring",type:"input",accept(s,t){if(typeof s!="number")return null;const n=It(t,r=>Object.assign(Object.assign({},yi(r)),{series:r.optional.custom(Bj),unit:r.optional.object({pixels:r.required.number,ticks:r.required.number,value:r.required.number}),view:r.required.constant("cameraring"),wide:r.optional.boolean}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>fi,constraint:s=>Yf(s.params),writer:s=>Pn},controller(s){var t,n,r;const i=(t=s.params.unit)!==null&&t!==void 0?t:{ticks:5,pixels:40,value:10},c=Uj(i),o=mi(s.params,s.initialValue);if(s.params.wide)return new Ku(s.document,{formatters:{ring:c,text:o.formatter},seriesId:(n=ih(s.params.series))!==null&&n!==void 0?n:"0",tooltipEnabled:!0,unit:i,value:s.value,viewProps:s.viewProps});const d=vt.fromObject(o);return new Xf(s.document,{parser:Vr,ringFormatter:c,ringUnit:i,seriesId:(r=ih(s.params.series))!==null&&r!==void 0?r:"0",textProps:d,value:s.value,viewProps:s.viewProps})}}),zj=Nt({id:"input-wheel",type:"input",accept(s,t){if(typeof s!="number")return null;const n=It(t,r=>Object.assign(Object.assign({},yi(r)),{amount:r.optional.number,view:r.required.constant("camerawheel"),wide:r.optional.boolean}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>fi,constraint:s=>Yf(s.params),writer:s=>Pn},controller(s){var t,n;const r=yr(0),i=mi(s.params,s.initialValue);return s.params.wide?new Ku(s.document,{formatters:{ring:r,text:i.formatter},seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:((t=s.params.amount)!==null&&t!==void 0?t:i.pointerScale)*40},value:s.value,viewProps:s.viewProps}):new Xf(s.document,{parser:Vr,ringFormatter:r,ringUnit:{ticks:10,pixels:40,value:((n=s.params.amount)!==null&&n!==void 0?n:i.pointerScale)*40},seriesId:"w",textProps:vt.fromObject(i),value:s.value,viewProps:s.viewProps})}}),qj="camerakit",Hj='.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:"";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:"";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--cnt-usz));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}',Wj=[Gj,zj],Xj=Object.freeze(Object.defineProperty({__proto__:null,css:Hj,id:qj,plugins:Wj},Symbol.toStringTag,{value:"Module"}));class Kf{multiply(t){return this.format(this.quat.multiply(t.quat))}premultiply(t){return this.format(t.multiply(this))}slerp(t,n){return this.format(this.quat.slerp(t.quat,n))}}function $f(s,t,n){return Math.min(Math.max(s,t),n)}function Yj(s,t){return Math.floor(s/t)*t}function Kj(s,t){return s-Yj(s,t)}function $o(s){return Kj(s+Math.PI,Math.PI*2)-Math.PI}class rs extends Kf{static fromQuaternion(t,n,r){const i=t.toMat3(),[c,o,d,a]=n==="XYZ"?[0,1,2,1]:n==="XZY"?[0,2,1,-1]:n==="YXZ"?[1,0,2,-1]:n==="YZX"?[1,2,0,1]:n==="ZXY"?[2,0,1,1]:[2,1,0,-1],l=[0,0,0],b=i[d+c*3];return l[o]=-a*Math.asin($f(b,-1,1)),Math.abs(b)<.999999?(l[c]=a*Math.atan2(i[d+o*3],i[d*4]),l[d]=a*Math.atan2(i[o+c*3],i[c*4])):l[c]=a*Math.atan2(-i[o+d*3],i[o*4]),Math.abs(l[c])+Math.abs(l[d])>Math.PI&&(l[c]=$o(l[c]+Math.PI),l[o]=$o(Math.PI-l[o]),l[d]=$o(l[d]+Math.PI)),new rs(...l,n).reunit(r)}constructor(t,n,r,i,c){super(),this.x=t??0,this.y=n??0,this.z=r??0,this.order=i??"XYZ",this.unit=c??"rad"}get quat(){return Tt.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(t,n){return this.reorder(t).reunit(n)}format(t){return t instanceof rs?t.reorder(this.order):t.toEuler(this.order,this.unit)}reorder(t){return t===this.order?this:this.quat.toEuler(t,this.unit)}reunit(t){const n={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit],r={deg:180/Math.PI,rad:1,turn:.5/Math.PI}[t],i=n*r;return new rs(i*this.x,i*this.y,i*this.z,this.order,t)}}class Tt extends Kf{static fromAxisAngle(t,n){const r=n/2,i=Math.sin(r);return new Tt(t.x*i,t.y*i,t.z*i,Math.cos(r))}static fromEuler(t){const n=t.reunit("rad"),[r,i,c,o]=n.order==="XYZ"?[0,1,2,1]:n.order==="XZY"?[0,2,1,-1]:n.order==="YXZ"?[1,0,2,-1]:n.order==="YZX"?[1,2,0,1]:n.order==="ZXY"?[2,0,1,1]:[2,1,0,-1],d=n.getComponents(),a=.5*d[r],l=.5*o*d[i],b=.5*d[c],y=Math.cos(a),u=Math.cos(l),p=Math.cos(b),h=Math.sin(a),m=Math.sin(l),g=Math.sin(b),f=[0,0,0,p*u*y+g*m*h];return f[r]=p*u*h-g*m*y,f[i]=o*(p*m*y+g*u*h),f[c]=g*u*y-p*m*h,new Tt(...f)}static lookRotation(t,n){const{normal:r,tangent:i,binormal:c}=t.orthoNormalize(n),o=c.x,d=i.x,a=r.x,l=c.y,b=i.y,y=r.y,u=c.z,p=i.z,h=r.z,m=o+b+h;if(m>0){const g=.5/Math.sqrt(m+1);return new Tt((p-y)*g,(a-u)*g,(l-d)*g,.25/g)}else if(o>b&&o>h){const g=2*Math.sqrt(1+o-b-h);return new Tt(.25*g,(d+l)/g,(a+u)/g,(p-y)/g)}else if(b>h){const g=2*Math.sqrt(1+b-o-h);return new Tt((d+l)/g,.25*g,(y+p)/g,(a-u)/g)}else{const g=2*Math.sqrt(1+h-o-b);return new Tt((a+u)/g,(y+p)/g,.25*g,(l-d)/g)}}constructor(t,n,r,i){super(),this.x=t??0,this.y=n??0,this.z=r??0,this.w=i??1}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(t,n){return rs.fromQuaternion(this,t,n)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const t=this.length;return t===0?new Tt:new Tt(this.x/t,this.y/t,this.z/t,this.w/t)}get negated(){return new Tt(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(t){const n=t.quat;return new Tt(this.w*n.x+this.x*n.w+this.y*n.z-this.z*n.y,this.w*n.y-this.x*n.z+this.y*n.w+this.z*n.x,this.w*n.z+this.x*n.y-this.y*n.x+this.z*n.w,this.w*n.w-this.x*n.x-this.y*n.y-this.z*n.z)}format(t){return t.quat}slerp(t,n){let r=t.quat;if(n===0)return this;if(n===1)return r;const i=this.ban360s;r=r.ban360s;let c=i.w*r.w+i.x*r.x+i.y*r.y+i.z*r.z;if(c<0&&(r=r.negated,c=-c),c>=1)return i;const o=1-c*c;if(o<=Number.EPSILON){const y=1-n;return new Tt(y*i.x+n*r.x,y*i.y+n*r.y,y*i.z+n*r.z,y*i.w+n*r.w).normalized}const d=Math.sqrt(o),a=Math.atan2(d,c),l=Math.sin((1-n)*a)/d,b=Math.sin(n*a)/d;return new Tt(i.x*l+r.x*b,i.y*l+r.y*b,i.z*l+r.z*b,i.w*l+r.w*b)}toMat3(){const{x:t,y:n,z:r,w:i}=this;return[1-2*n*n-2*r*r,2*t*n+2*r*i,2*t*r-2*n*i,2*t*n-2*r*i,1-2*t*t-2*r*r,2*n*r+2*t*i,2*t*r+2*n*i,2*n*r-2*t*i,1-2*t*t-2*n*n]}}class Zf{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(t){const n=(this.viewport[0]+this.viewport[2])*.5,r=(this.viewport[1]+this.viewport[3])*.5,i=this.viewport[2]-this.viewport[0],c=this.viewport[3]-this.viewport[1],o=1/Math.tan(this.fov*Math.PI/360),d=-(t.z+this.offset[2]),a=n+(t.x+this.offset[0])/d*o*i*.5/this.aspect,l=r-(t.y+this.offset[1])/d*o*c*.5;return[a,l]}}class $t{constructor(t,n,r){this.element=t.createElementNS(At,"path"),this.vertices=n,this.projector=r}setRotation(t){let n="";return this.vertices.forEach((r,i)=>{const c=r.applyQuaternion(t),[o,d]=this.projector.project(c);n+=`${i===0?"M":"L"}${o} ${d}`}),this.element.setAttributeNS(null,"d",n),this}}class Mt{constructor(t,n,r){this.x=t??0,this.y=n??0,this.z=r??0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const t=this.length;return t===0?new Mt:new Mt(this.x/t,this.y/t,this.z/t)}get negated(){return new Mt(-this.x,-this.y,-this.z)}add(t){return new Mt(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new Mt(this.x-t.x,this.y-t.y,this.z-t.z)}scale(t){return new Mt(this.x*t,this.y*t,this.z*t)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new Mt(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}orthoNormalize(t){const n=this.normalized;t=t.normalized;let r=n.dot(t);r===1&&(Math.abs(n.y)>Math.abs(n.z)?t=new Mt(0,0,1):t=new Mt(0,1,0),r=n.dot(t)),t=t.sub(n.scale(r)).normalized;const i=t.cross(n);return{normal:n,tangent:t,binormal:i}}applyQuaternion(t){const n=t.w*this.x+t.y*this.z-t.z*this.y,r=t.w*this.y+t.z*this.x-t.x*this.z,i=t.w*this.z+t.x*this.y-t.y*this.x,c=-t.x*this.x-t.y*this.y-t.z*this.z;return new Mt(n*t.w+c*-t.x+r*-t.z-i*-t.y,r*t.w+c*-t.y+i*-t.x-n*-t.z,i*t.w+c*-t.z+n*-t.y-r*-t.x)}}function Rr(s,t){const n=t.z>0?new Tt(0,0,0,1):new Tt(0,0,1,0);return Math.abs(s.z)>.9999?n:Tt.lookRotation(s,t)}function fa(s,t,n,r,i,c=1){const o=[];for(let d=0;d<n;d++){const a=s+t*d/(n-1),l=new Mt;l[r]=c*Math.cos(a),l[i]=c*Math.sin(a),o.push(l)}return o}const ft=ht("rotationgizmo"),Qs=new Mt(0,0,0),$j=new Mt(1,0,0),Zj=new Mt(0,1,0),bs=new Mt(0,0,1),Js=new Mt(0,0,-1),ah=new Mt(.7,0,0),lh=new Mt(0,.7,0),uh=new Mt(0,0,.7),ch=new Mt(-.7,0,0),dh=new Mt(0,-.7,0),hh=new Mt(0,0,-.7),ph=new Tt(0,0,0,1);function eo(s,t,n){const r=s.createElementNS(At,"g"),i=s.createElementNS(At,"circle");i.classList.add(ft(t)),i.setAttributeNS(null,"cx","0"),i.setAttributeNS(null,"cy","0"),i.setAttributeNS(null,"r","8"),r.appendChild(i);const c=s.createElementNS(At,"text");return c.classList.add(ft("labeltext")),c.setAttributeNS(null,"y","4"),c.setAttributeNS(null,"text-anchor","middle"),c.setAttributeNS(null,"font-size","10"),c.textContent=n,r.appendChild(c),r}class Qj{get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ft()),n.pickerLayout==="popup"&&this.element.classList.add(ft(void 0,"p"));const r=t.createElement("div");r.classList.add(ft("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(At,"svg");i.classList.add(ft("g")),this.padElement.appendChild(i),this.svgElem_=i,this.projector_=new Zf,this.projector_.viewport=[0,0,136,136];const c=fa(0,Math.PI,33,"x","y"),o=fa(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new $t(t,c,this.projector_),this.xArcB_.element.classList.add(ft("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new $t(t,c,this.projector_),this.yArcB_.element.classList.add(ft("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new $t(t,c,this.projector_),this.zArcB_.element.classList.add(ft("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new $t(t,c,this.projector_),this.xArcBC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new $t(t,c,this.projector_),this.yArcBC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new $t(t,c,this.projector_),this.zArcBC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const d=t.createElementNS(At,"g");i.classList.add(ft("axes")),this.svgElem_.appendChild(d),this.axesElem_=d,this.xAxis_=new $t(t,[Qs,ah],this.projector_),this.xAxis_.element.classList.add(ft("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new $t(t,[Qs,lh],this.projector_),this.yAxis_.element.classList.add(ft("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new $t(t,[Qs,uh],this.projector_),this.zAxis_.element.classList.add(ft("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new $t(t,[Qs,ch],this.projector_),this.xnAxis_.element.classList.add(ft("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new $t(t,[Qs,dh],this.projector_),this.ynAxis_.element.classList.add(ft("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new $t(t,[Qs,hh],this.projector_),this.znAxis_.element.classList.add(ft("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new $t(t,c,this.projector_),this.xArcF_.element.classList.add(ft("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new $t(t,c,this.projector_),this.yArcF_.element.classList.add(ft("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new $t(t,c,this.projector_),this.zArcF_.element.classList.add(ft("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new $t(t,c,this.projector_),this.xArcFC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new $t(t,c,this.projector_),this.yArcFC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new $t(t,c,this.projector_),this.zArcFC_.element.classList.add(ft("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new $t(t,o,this.projector_),this.rArc_.element.classList.add(ft("arcr")),this.rArc_.setRotation(ph),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new $t(t,o,this.projector_),this.rArcC_.element.classList.add(ft("arcc")),this.rArcC_.setRotation(ph),this.svgElem_.appendChild(this.rArcC_.element);const a=t.createElementNS(At,"g");i.classList.add(ft("labels")),this.svgElem_.appendChild(a),this.labelsElem_=a,this.xLabel=eo(t,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=eo(t,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=eo(t,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=eo(t,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=eo(t,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=eo(t,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const l=()=>{this.xArcB_.element.classList.add(ft("arcx_hover")),this.xArcF_.element.classList.add(ft("arcx_hover"))},b=()=>{this.xArcB_.element.classList.remove(ft("arcx_hover")),this.xArcF_.element.classList.remove(ft("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",l),this.xArcBC_.element.addEventListener("mouseleave",b),this.xArcFC_.element.addEventListener("mouseenter",l),this.xArcFC_.element.addEventListener("mouseleave",b);const y=()=>{this.yArcB_.element.classList.add(ft("arcy_hover")),this.yArcF_.element.classList.add(ft("arcy_hover"))},u=()=>{this.yArcB_.element.classList.remove(ft("arcy_hover")),this.yArcF_.element.classList.remove(ft("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",y),this.yArcBC_.element.addEventListener("mouseleave",u),this.yArcFC_.element.addEventListener("mouseenter",y),this.yArcFC_.element.addEventListener("mouseleave",u);const p=()=>{this.zArcB_.element.classList.add(ft("arcz_hover")),this.zArcF_.element.classList.add(ft("arcz_hover"))},h=()=>{this.zArcB_.element.classList.remove(ft("arcz_hover")),this.zArcF_.element.classList.remove(ft("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",p),this.zArcBC_.element.addEventListener("mouseleave",h),this.zArcFC_.element.addEventListener("mouseenter",p),this.zArcFC_.element.addEventListener("mouseleave",h);const m=()=>{this.rArc_.element.classList.add(ft("arcr_hover"))},g=()=>{this.rArc_.element.classList.remove(ft("arcr_hover"))};this.rArcC_.element.addEventListener("mouseenter",m),this.rArcC_.element.addEventListener("mouseleave",g),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,n.mode.emitter.on("change",this.onModeChange_),this.mode_=n.mode,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const t=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(t),this.yAxis_.setRotation(t),this.zAxis_.setRotation(t),this.xnAxis_.setRotation(t),this.ynAxis_.setRotation(t),this.znAxis_.setRotation(t);const n=$j.applyQuaternion(t),r=Zj.applyQuaternion(t),i=bs.applyQuaternion(t),c=n.negated,o=r.negated,d=i.negated;[{el:this.xAxis_.element,v:n},{el:this.yAxis_.element,v:r},{el:this.zAxis_.element,v:i},{el:this.xnAxis_.element,v:c},{el:this.ynAxis_.element,v:o},{el:this.znAxis_.element,v:d}].map(({el:a,v:l})=>(this.axesElem_.removeChild(a),{el:a,v:l})).sort((a,l)=>a.v.z-l.v.z).forEach(({el:a})=>{this.axesElem_.appendChild(a)}),this.xArcB_.setRotation(Rr(n,Js)),this.yArcB_.setRotation(Rr(r,Js)),this.zArcB_.setRotation(Rr(i,Js)),this.xArcBC_.setRotation(Rr(n,Js)),this.yArcBC_.setRotation(Rr(r,Js)),this.zArcBC_.setRotation(Rr(i,Js)),this.xArcF_.setRotation(Rr(n,bs)),this.yArcF_.setRotation(Rr(r,bs)),this.zArcF_.setRotation(Rr(i,bs)),this.xArcFC_.setRotation(Rr(n,bs)),this.yArcFC_.setRotation(Rr(r,bs)),this.zArcFC_.setRotation(Rr(i,bs)),[{el:this.xLabel,v:ah},{el:this.yLabel,v:lh},{el:this.zLabel,v:uh},{el:this.xnLabel,v:ch},{el:this.ynLabel,v:dh},{el:this.znLabel,v:hh}].forEach(({el:a,v:l})=>{const[b,y]=this.projector_.project(l.applyQuaternion(t));a.setAttributeNS(null,"transform",`translate( ${b}, ${y} )`)}),[{el:this.xLabel,v:n},{el:this.yLabel,v:r},{el:this.zLabel,v:i},{el:this.xnLabel,v:c},{el:this.ynLabel,v:o},{el:this.znLabel,v:d}].map(({el:a,v:l})=>(this.labelsElem_.removeChild(a),{el:a,v:l})).sort((a,l)=>a.v.z-l.v.z).forEach(({el:a})=>{this.labelsElem_.appendChild(a)})}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const t=this.mode_.rawValue,n=t==="angle-x"?"add":"remove",r=t==="angle-y"?"add":"remove",i=t==="angle-z"?"add":"remove",c=t==="angle-r"?"add":"remove";this.xArcB_.element.classList[n](ft("arcx_active")),this.yArcB_.element.classList[r](ft("arcy_active")),this.zArcB_.element.classList[i](ft("arcz_active")),this.xArcF_.element.classList[n](ft("arcx_active")),this.yArcF_.element.classList[r](ft("arcy_active")),this.zArcF_.element.classList[i](ft("arcz_active")),this.rArc_.element.classList[c](ft("arcr_active"))}}function Qf(s){return $f(s,0,1)}function Jj(s){if(s<=0)return 0;if(s>=1)return 1;const t=1-s,n=t*(t*(t*(t*(t*(t*(t*-6+7))))));return Qf(1-n)}function eC(s,t,n){return Qf((n-s)/(t-s))}const ls=1/Math.sqrt(2),tC=new Mt(1,0,0),rC=new Mt(0,1,0),nC=new Mt(0,0,1),sC=new Tt(0,0,0,1),oC=new Tt(ls,0,0,ls),iC=new Tt(0,-ls,0,ls),aC=new Tt(-ls,0,0,ls),lC=new Tt(0,ls,0,ls),uC=new Tt(0,1,0,0);class cC{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.mode_=Jt("free"),this.view=new Qj(t,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:n.pickerLayout}),this.ptHandler_=new br(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const r=new br(this.view.xArcBElement);r.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),r.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const i=new br(this.view.xArcFElement);i.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),i.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const c=new br(this.view.yArcBElement);c.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),c.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const o=new br(this.view.yArcFElement);o.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),o.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const d=new br(this.view.zArcBElement);d.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),d.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const a=new br(this.view.zArcFElement);a.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),a.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const l=new br(this.view.rArcElement);l.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-r")),l.emitter.on("up",()=>this.changeModeIfNotAuto_("free")),[{el:this.view.xLabel,q:iC},{el:this.view.yLabel,q:oC},{el:this.view.zLabel,q:sC},{el:this.view.xnLabel,q:lC},{el:this.view.ynLabel,q:aC},{el:this.view.znLabel,q:uC}].forEach(({el:b,q:y})=>{new br(b).emitter.on("down",()=>this.autoRotate_(y))}),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(t){if(!t.point)return;const n=this.mode_.rawValue,r=t.point.x,i=t.point.y;if(n!=="auto")if(n==="free"){if(this.px_!=null&&this.py_!=null){const c=r-this.px_,o=i-this.py_,d=Math.sqrt(c*c+o*o);if(d===0)return;const a=new Mt(o/d,c/d,0),l=Tt.fromAxisAngle(a,d/68);this.value.rawValue=this.value.rawValue.premultiply(l)}this.px_=r,this.py_=i}else if(n==="angle-r"){const c=t.bounds.width/2,o=t.bounds.height/2,d=Math.atan2(i-o,r-c);if(this.angleState_==null){const a=new Mt(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:d,axis:a,reverseAngle:!0}}else{const{initialRotation:a,initialAngle:l,axis:b}=this.angleState_,y=-$o(d-l),u=Tt.fromAxisAngle(b,y);this.value.rawValue=a.premultiply(u)}}else{const c=t.bounds.width/2,o=t.bounds.height/2,d=Math.atan2(i-o,r-c);if(this.angleState_==null){const a=n==="angle-x"?tC:n==="angle-y"?rC:nC,l=a.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:d,axis:a,reverseAngle:l}}else{const{initialRotation:a,initialAngle:l,axis:b,reverseAngle:y}=this.angleState_;let u=$o(d-l);u=y?-u:u;const p=Tt.fromAxisAngle(b,u);this.value.rawValue=a.multiply(p)}}}onPointerDown_(t){this.handlePointerEvent_(t.data)}onPointerMove_(t){this.handlePointerEvent_(t.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(t){ri(t.key)&&t.preventDefault();const n=fr(1,dn(t)),r=fr(1,ss(t));if(n!==0||r!==0){const i=new Mt(-r,n,0),c=Tt.fromAxisAngle(i,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(c)}}changeModeIfNotAuto_(t){this.mode_.rawValue!=="auto"&&(this.mode_.rawValue=t)}autoRotate_(t){this.mode_.rawValue="auto";const n=this.value.rawValue,r=Date.now(),i=()=>{const c=Date.now(),o=Jj(eC(0,300,c-r));if(this.value.rawValue=n.slerp(t,o),o===1){this.mode_.rawValue="free";return}requestAnimationFrame(i)};requestAnimationFrame(i)}}const _s=ht("rotationswatch"),dC=new Mt(1,0,0),hC=new Mt(0,1,0),Wi=new Mt(0,0,1),pC=new Tt(0,0,0,1);class fC{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(_s()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add(_s("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElementNS(At,"svg");i.classList.add(_s("g")),r.appendChild(i),this.svgElem_=i,this.projector_=new Zf,this.projector_.viewport=[0,0,20,20];const c=fa(0,Math.PI,33,"x","y"),o=fa(0,2*Math.PI,65,"x","y");this.rArc_=new $t(t,o,this.projector_),this.rArc_.element.classList.add(_s("arcr")),i.appendChild(this.rArc_.element),this.rArc_.setRotation(pC),this.xArc_=new $t(t,c,this.projector_),this.xArc_.element.classList.add(_s("arc")),i.appendChild(this.xArc_.element),this.yArc_=new $t(t,c,this.projector_),this.yArc_.element.classList.add(_s("arc")),i.appendChild(this.yArc_.element),this.zArc_=new $t(t,c,this.projector_),this.zArc_.element.classList.add(_s("arc")),i.appendChild(this.zArc_.element),this.update_()}update_(){const t=this.value.rawValue.quat.normalized,n=dC.applyQuaternion(t),r=hC.applyQuaternion(t),i=Wi.applyQuaternion(t);this.xArc_.setRotation(Rr(n,Wi)),this.yArc_.setRotation(Rr(r,Wi)),this.zArc_.setRotation(Rr(i,Wi))}onValueChange_(){this.update_()}}class mC{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new fC(t,{value:this.value,viewProps:this.viewProps})}}const Qn=ht("rotation");class yC{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Qn()),n.foldable.bindExpandedClass(this.element,Qn(void 0,"expanded")),Kr(n.foldable,"completed",Bn(this.element,Qn(void 0,"cpl"))),n.rotationMode==="quaternion"&&this.element.classList.add(Qn("quat"));const r=t.createElement("div");r.classList.add(Qn("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Qn("s")),r.appendChild(i),this.swatchElement=i;const c=t.createElement("div");if(c.classList.add(Qn("t")),r.appendChild(c),this.textElement=c,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(Qn("g")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}class Jf{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=bi.create(n.expanded),this.swatchC_=new mC(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new Fs(t,{assembly:n.assembly,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new yC(t,{rotationMode:n.rotationMode,foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Pa(t,{viewProps:this.viewProps}):null;const i=new cC(t,{value:this.value,viewProps:this.viewProps,pickerLayout:n.pickerLayout});i.view.allFocusableElements.forEach(c=>{c.addEventListener("blur",this.onPopupChildBlur_),c.addEventListener("keydown",this.onPopupChildKeydown_)}),this.gizmoC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ds({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:c=>c,backward:(c,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),_i(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=Ca(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!gi(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function _l(s,t){const n=Math.pow(.1,s);return{baseStep:n,constraint:t,textProps:vt.fromObject({formatter:yr(s),keyScale:n,pointerScale:n})}}function xs(s){if(!s)return;const t=[];return Gt(s.step)||t.push(new Nh(s.step)),(!Gt(s.max)||!Gt(s.min))&&t.push(new ba({max:s.max,min:s.min})),new cs(t)}function fh(s,t){return{toComponents:n=>n.getComponents(),fromComponents:n=>new rs(n[0],n[1],n[2],s,t)}}function mh(s,t,n){return typeof(s==null?void 0:s.x)=="number"&&typeof(s==null?void 0:s.y)=="number"&&typeof(s==null?void 0:s.z)=="number"?new rs(s.x,s.y,s.z,t,n):new rs(0,0,0,t,n)}function gC(s){switch(s){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return s;default:return}}function vC(s){switch(s){case"rad":case"deg":case"turn":return s;default:return}}Nt({id:"rotation",type:"input",accept(s,t){var n,r;const i=It(t,c=>({view:c.required.constant("rotation"),label:c.optional.string,picker:c.optional.custom(Ta),expanded:c.optional.boolean,rotationMode:c.required.constant("euler"),x:c.optional.custom(Dr),y:c.optional.custom(Dr),z:c.optional.custom(Dr),order:c.optional.custom(gC),unit:c.optional.custom(vC)}));return i?{initialValue:mh(s,(n=i.order)!==null&&n!==void 0?n:"XYZ",(r=i.unit)!==null&&r!==void 0?r:"rad"),params:i}:null},binding:{reader({params:s}){return t=>{var n,r;return mh(t,(n=s.order)!==null&&n!==void 0?n:"XYZ",(r=s.unit)!==null&&r!==void 0?r:"rad")}},constraint({params:s}){var t,n;return new os({assembly:fh((t=s.order)!==null&&t!==void 0?t:"XYZ",(n=s.unit)!==null&&n!==void 0?n:"rad"),components:[xs("x"in s?s.x:void 0),xs("y"in s?s.y:void 0),xs("z"in s?s.z:void 0)]})},writer(s){return(t,n)=>{t.writeProperty("x",n.x),t.writeProperty("y",n.y),t.writeProperty("z",n.z)}}},controller({document:s,value:t,constraint:n,params:r,viewProps:i}){var c,o;if(!(n instanceof os))throw yn.shouldNeverHappen();const d="expanded"in r?r.expanded:void 0,a="picker"in r?r.picker:void 0,l=(c=r.unit)!==null&&c!==void 0?c:"rad",b={rad:2,deg:0,turn:2}[l];return new Jf(s,{axes:[_l(b,n.components[0]),_l(b,n.components[1]),_l(b,n.components[2])],assembly:fh((o=r.order)!==null&&o!==void 0?o:"XYZ",l),rotationMode:"euler",expanded:d??!1,parser:Vr,pickerLayout:a??"popup",value:t,viewProps:i})}});const yh={toComponents:s=>[s.x,s.y,s.z,s.w],fromComponents:s=>new Tt(s[0],s[1],s[2],s[3])};function Xi(s){return{baseStep:.01,constraint:s,textProps:vt.fromObject({formatter:t=>Math.abs(t)<.995?t.toFixed(2).replace("0.","."):t.toFixed(1),keyScale:.01,pointerScale:.01})}}function gh(s){return typeof(s==null?void 0:s.x)=="number"&&typeof(s==null?void 0:s.y)=="number"&&typeof(s==null?void 0:s.z)=="number"&&typeof(s==null?void 0:s.w)=="number"?new Tt(s.x,s.y,s.z,s.w):new Tt(0,0,0,1)}Nt({id:"rotation",type:"input",accept(s,t){const n=It(t,r=>({view:r.required.constant("rotation"),label:r.optional.string,picker:r.optional.custom(Ta),expanded:r.optional.boolean,rotationMode:r.optional.constant("quaternion"),x:r.optional.custom(Dr),y:r.optional.custom(Dr),z:r.optional.custom(Dr),w:r.optional.custom(Dr)}));return n?{initialValue:gh(s),params:n}:null},binding:{reader(s){return t=>gh(t)},constraint({params:s}){return new os({assembly:yh,components:[xs("x"in s?s.x:void 0),xs("y"in s?s.y:void 0),xs("z"in s?s.z:void 0),xs("w"in s?s.w:void 0)]})},writer(s){return(t,n)=>{t.writeProperty("x",n.x),t.writeProperty("y",n.y),t.writeProperty("z",n.z),t.writeProperty("w",n.w)}}},controller({document:s,value:t,constraint:n,params:r,viewProps:i}){if(!(n instanceof os))throw yn.shouldNeverHappen();const c="expanded"in r?r.expanded:void 0,o="picker"in r?r.picker:void 0;return new Jf(s,{axes:[Xi(n.components[0]),Xi(n.components[1]),Xi(n.components[2]),Xi(n.components[3])],assembly:yh,rotationMode:"quaternion",expanded:c??!1,parser:Vr,pickerLayout:o??"popup",value:t,viewProps:i})}});function bC(s){let t,n,r,i;const c=[s[2]];function o(l){s[4](l)}function d(l){s[5](l)}let a={};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[0]!==void 0&&(a.value=s[0]),s[1]!==void 0&&(a.ref=s[1]),t=new Yu({props:a}),Je.push(()=>it(t,"value",o)),Je.push(()=>it(t,"ref",d)),t.$on("change",s[6]),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,[b]){const y=b&4?Hr(c,[Wr(l[2])]):{};!n&&b&1&&(n=!0,y.value=l[0],ot(()=>n=!1)),!r&&b&2&&(r=!0,y.ref=l[1],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function vh(s){var t;(t=s.target)==null||t.dispatchEvent(new Event("change"))}function _C(s,t,n){const r=["value","live"];let i=Qt(t,r),{value:c}=t,{live:o=!0}=t,d;Ds(()=>{a(o??!0,!0)});function a(u,p=!1){const h=d==null?void 0:d.controller.valueController.view.element.querySelector("input");h==null||h.removeEventListener("input",vh),!p&&u&&(h==null||h.addEventListener("input",vh))}function l(u){c=u,n(0,c)}function b(u){d=u,n(1,d)}function y(u){Vn.call(this,s,u)}return s.$$set=u=>{t=xt(xt({},t),Nr(u)),n(2,i=Qt(t,r)),"value"in u&&n(0,c=u.value),"live"in u&&n(3,o=u.live)},s.$$.update=()=>{s.$$.dirty&10&&d&&o!==void 0&&a(o)},[c,d,i,o,l,b,y]}class em extends cr{constructor(t){super(),ur(this,t,_C,bC,ar,{value:0,live:3})}}const bh=ht("txtr");class wC{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(bh()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.rows=n.rows,r.cols=22,r.placeholder=n.placeholder,r.classList.add(bh("i")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class xC{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.rows=n.rows,this.placeholder=n.placeholder,this.view=new wC(t,{value:this.value,viewProps:this.viewProps,rows:this.rows,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value;this.value.rawValue=r,this.view.refresh()}}Nt({id:"input-template",type:"input",accept(s,t){if(typeof s!="string")return null;const n=It(t,r=>({view:r.required.constant("textarea"),rows:r.optional.number,placeholder:r.optional.string}));return n?{initialValue:s,params:n}:null},binding:{reader(s){return t=>typeof t=="string"?t:""},writer(s){return(t,n)=>{t.write(n)}}},controller(s){var t,n;return new xC(s.document,{value:s.value,rows:(t=s.params.rows)!==null&&t!==void 0?t:3,placeholder:(n=s.params.placeholder)!==null&&n!==void 0?n:"Enter text here",viewProps:s.viewProps})}});function jC(s){let t,n,r;const i=[{options:s[1]},{plugin:Xj},s[2]];function c(d){s[5](d)}let o={};for(let d=0;d<i.length;d+=1)o=xt(o,i[d]);return s[0]!==void 0&&(o.value=s[0]),t=new Aj({props:o}),Je.push(()=>it(t,"value",c)),t.$on("change",s[6]),{c(){dt(t.$$.fragment)},m(d,a){ut(t,d,a),r=!0},p(d,[a]){const l=a&6?Hr(i,[a&2&&{options:d[1]},i[1],a&4&&Wr(d[2])]):{};!n&&a&1&&(n=!0,l.value=d[0],ot(()=>n=!1)),t.$set(l)},i(d){r||(Ue(t.$$.fragment,d),r=!0)},o(d){He(t.$$.fragment,d),r=!1},d(d){ct(t,d)}}}function CC(s,t,n){const r=["value","amount","wide"];let i=Qt(t,r),{value:c}=t,{amount:o=void 0}=t,{wide:d=void 0}=t,a;function l(y){c=y,n(0,c)}function b(y){Vn.call(this,s,y)}return s.$$set=y=>{t=xt(xt({},t),Nr(y)),n(2,i=Qt(t,r)),"value"in y&&n(0,c=y.value),"amount"in y&&n(3,o=y.amount),"wide"in y&&n(4,d=y.wide)},s.$$.update=()=>{s.$$.dirty&24&&n(1,a={amount:o,view:"camerawheel",wide:d})},[c,a,i,o,d,l,b]}class EC extends cr{constructor(t){super(),ur(this,t,CC,jC,ar,{value:0,amount:3,wide:4})}}function SC(s){let t,n;return t=new Eo({props:{theme:s[4],userCreatedPane:!1,$$slots:{default:[TC]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&16&&(c.theme=r[4]),i&16399&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function PC(s){let t,n,r,i;const c=[LC,MC],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function kC(s){let t;const n=s[11].default,r=$r(n,s,s[14],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&16384)&&Qr(r,n,i,i[14],t?Zr(n,i[14],c,null):Jr(i[14]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function TC(s){let t,n,r;function i(o){s[13](o)}let c={disabled:s[2],title:s[1],userExpandable:s[3],$$slots:{default:[kC]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.expanded=s[0]),t=new oo({props:c}),Je.push(()=>it(t,"expanded",i)),{c(){dt(t.$$.fragment)},m(o,d){ut(t,o,d),r=!0},p(o,d){const a={};d&4&&(a.disabled=o[2]),d&2&&(a.title=o[1]),d&8&&(a.userExpandable=o[3]),d&16384&&(a.$$scope={dirty:d,ctx:o}),!n&&d&1&&(n=!0,a.expanded=o[0],ot(()=>n=!1)),t.$set(a)},i(o){r||(Ue(t.$$.fragment,o),r=!0)},o(o){He(t.$$.fragment,o),r=!1},d(o){ct(t,o)}}}function MC(s){let t,n,r,i;t=new hs({props:{keysAdd:["containerUnitSize"],theme:s[4]}});let c=s[0]&&_h(s);return{c(){dt(t.$$.fragment),n=Gr(),c&&c.c(),r=mr()},m(o,d){ut(t,o,d),_t(o,n,d),c&&c.m(o,d),_t(o,r,d),i=!0},p(o,d){const a={};d&16&&(a.theme=o[4]),t.$set(a),o[0]?c?(c.p(o,d),d&1&&Ue(c,1)):(c=_h(o),c.c(),Ue(c,1),c.m(r.parentNode,r)):c&&(yo(),He(c,1,1,()=>{c=null}),go())},i(o){i||(Ue(t.$$.fragment,o),Ue(c),i=!0)},o(o){He(t.$$.fragment,o),He(c),i=!1},d(o){o&&(gt(n),gt(r)),ct(t,o),c&&c.d(o)}}}function LC(s){let t,n;const r=s[11].default,i=$r(r,s,s[14],null);return{c(){t=Yr("div"),i&&i.c(),or(t,"display","none")},m(c,o){_t(c,t,o),i&&i.m(t,null),s[12](t),n=!0},p(c,o){i&&i.p&&(!n||o&16384)&&Qr(i,r,c,c[14],n?Zr(r,c[14],o,null):Jr(c[14]),null)},i(c){n||(Ue(i,c),n=!0)},o(c){He(i,c),n=!1},d(c){c&&gt(t),i&&i.d(c),s[12](null)}}}function _h(s){let t,n,r;t=new hs({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding"],theme:s[4]}});const i=s[11].default,c=$r(i,s,s[14],null);return{c(){dt(t.$$.fragment),n=Gr(),c&&c.c()},m(o,d){ut(t,o,d),_t(o,n,d),c&&c.m(o,d),r=!0},p(o,d){const a={};d&16&&(a.theme=o[4]),t.$set(a),c&&c.p&&(!r||d&16384)&&Qr(c,i,o,o[14],r?Zr(i,o[14],d,null):Jr(o[14]),null)},i(o){r||(Ue(t.$$.fragment,o),Ue(c,o),r=!0)},o(o){He(t.$$.fragment,o),He(c,o),r=!1},d(o){o&&gt(n),ct(t,o),c&&c.d(o)}}}function AC(s){let t,n,r,i;const c=[PC,SC],o=[];function d(a,l){return a[6]?0:1}return t=d(s),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function OC(s,t,n){let r,i,{$$slots:c={},$$scope:o}=t,{title:d="Folder"}=t,{disabled:a=!1}=t,{expanded:l=!0}=t,{userExpandable:b=!0}=t,{theme:y=void 0}=t;const u=ln("parentStore");ns(s,u,j=>n(10,r=j));const p=ga();ns(s,p,j=>n(15,i=j));const h=ln("userCreatedPane");let m,g,f;$i("parentStore",p);function v(){Lh(p,i=r.addFolder({disabled:a,expanded:l,index:g,title:d}),i),i.on("fold",()=>{n(0,l=i.expanded)}),n(9,f=i)}Rs(()=>{n(8,g=m?Da(m):0)}),Ds(()=>{i==null||i.dispose()});function _(j){Je[j?"unshift":"push"](()=>{m=j,n(5,m)})}function x(j){l=j,n(0,l)}return s.$$set=j=>{"title"in j&&n(1,d=j.title),"disabled"in j&&n(2,a=j.disabled),"expanded"in j&&n(0,l=j.expanded),"userExpandable"in j&&n(3,b=j.userExpandable),"theme"in j&&n(4,y=j.theme),"$$scope"in j&&n(14,o=j.$$scope)},s.$$.update=()=>{s.$$.dirty&514&&f&&n(9,f.title=d,f),s.$$.dirty&516&&f&&n(9,f.disabled=a,f),s.$$.dirty&513&&f&&l!==void 0&&n(9,f.expanded=l,f),s.$$.dirty&1792&&r&&!f&&g!==void 0&&v(),s.$$.dirty&520&&f&&mu(b,f.element,"tp-fldv_b","tp-fldv_m"),s.$$.dirty&1040&&y&&r&&(h||!Ra(r))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Folder> components for a theme prop.)")},[l,d,a,b,y,m,u,p,g,f,r,c,_,x,o]}class oo extends cr{constructor(t){super(),ur(this,t,OC,AC,ar,{title:1,disabled:2,expanded:0,userExpandable:3,theme:4})}}var wl={local:{},session:{}};function RC(s){return s==="local"?localStorage:sessionStorage}function wh(s,t,n){var r,i;const c=(r=void 0)!=null?r:JSON,o=(i=void 0)!=null?i:"local",d=typeof window<"u"&&typeof document<"u",a=d?RC(o):null;function l(b,y){a==null||a.setItem(b,c.stringify(y))}if(!wl[o][s]){const b=ga(t,p=>{const h=a==null?void 0:a.getItem(s);if(h&&p(c.parse(h)),d&&o=="local"){const m=g=>{g.key===s&&p(g.newValue?c.parse(g.newValue):null)};return window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)}}),{subscribe:y,set:u}=b;wl[o][s]={set(p){l(s,p),u(p)},update(p){return b.update(h=>{const m=p(h);return l(s,m),m})},subscribe:y}}return wl[o][s]}const{window:DC}=Em;function IC(s){let t;const n=s[25].default,r=$r(n,s,s[32],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c[1]&2)&&Qr(r,n,i,i[32],t?Zr(n,i[32],c,null):Jr(i[32]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function FC(s){let t,n,r,i,c,o=`${s[2]}px`,d=`${s[3]}px`,a=`${s[4]}px`,l,b,y;const u=[{scale:s[8]},{title:s[7]},is(s[16],"position")];function p(g){s[26](g)}function h(g){s[27](g)}let m={$$slots:{default:[IC]},$$scope:{ctx:s}};for(let g=0;g<u.length;g+=1)m=xt(m,u[g]);return s[1]!==void 0&&(m.expanded=s[1]),s[0]!==void 0&&(m.tpPane=s[0]),n=new Gu({props:m}),Je.push(()=>it(n,"expanded",p)),Je.push(()=>it(n,"tpPane",h)),{c(){t=Yr("div"),dt(n.$$.fragment),Oh(t,"class","draggable-container svelte-ex9mcb"),sa(()=>s[28].call(t)),Bi(t,"not-collapsable",!s[6]),Bi(t,"not-resizable",!s[5]),or(t,"left",o),or(t,"padding",s[9]),or(t,"top",d),or(t,"width",a),or(t,"z-index",s[14])},m(g,f){_t(g,t,f),ut(n,t,null),c=km(t,s[28].bind(t)),s[29](t),l=!0,b||(y=[Yo(DC,"resize",s[15]),Yo(t,"focus",s[30],!0),Yo(t,"pointerdown",s[31],!0)],b=!0)},p(g,f){const v=f[0]&65920?Hr(u,[f[0]&256&&{scale:g[8]},f[0]&128&&{title:g[7]},f[0]&65536&&Wr(is(g[16],"position"))]):{};f[1]&2&&(v.$$scope={dirty:f,ctx:g}),!r&&f[0]&2&&(r=!0,v.expanded=g[1],ot(()=>r=!1)),!i&&f[0]&1&&(i=!0,v.tpPane=g[0],ot(()=>i=!1)),n.$set(v),(!l||f[0]&64)&&Bi(t,"not-collapsable",!g[6]),(!l||f[0]&32)&&Bi(t,"not-resizable",!g[5]),f[0]&4&&o!==(o=`${g[2]}px`)&&or(t,"left",o),f[0]&512&&or(t,"padding",g[9]),f[0]&8&&d!==(d=`${g[3]}px`)&&or(t,"top",d),f[0]&16&&a!==(a=`${g[4]}px`)&&or(t,"width",a),f[0]&16384&&or(t,"z-index",g[14])},i(g){l||(Ue(n.$$.fragment,g),l=!0)},o(g){He(n.$$.fragment,g),l=!1},d(g){g&&gt(t),ct(n),c(),s[29](null),b=!1,Os(y)}}}const Yi="svelte-tweakpane-ui-draggable-position-",NC="1",to=[];let xl=1e3;const VC=!0,BC=3;function UC(s,t,n){let r;const i=["storePositionLocally","localStoreId","tpPane","expanded","collapseChildrenToFit","x","y","width","resizable","userExpandable","minWidth","maxWidth","title","scale","padding"];let c=Qt(t,i),o,d=Kt,a=()=>(d(),d=Wl(m,ce=>n(41,o=ce)),m);s.$$.on_destroy.push(()=>d());let{$$slots:l={},$$scope:b}=t,y,{storePositionLocally:u=!0}=t,{localStoreId:p=NC}=t,{tpPane:h=void 0}=t,m;u&&a(m=wh(`${Yi}${p}`,{x:0,y:0,expanded:!0,width:350}));let{expanded:g=(o==null?void 0:o.expanded)??!0}=t,{collapseChildrenToFit:f=!1}=t,{x:v=(o==null?void 0:o.x)??0}=t,{y:_=(o==null?void 0:o.y)??0}=t,{width:x=(o==null?void 0:o.width)??256}=t,{resizable:j=!0}=t,{userExpandable:M=!0}=t,{minWidth:S=200}=t,{maxWidth:P=600}=t,{title:L="Tweakpane"}=t,{scale:D=1}=t,{padding:k="0"}=t,I,A,F,N,U,W,G,z,Y=xl;function $(){p!==void 0&&(to.includes(p)&&console.warn('Multiple instances of <Pane> with `mode="draggable"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.'),to.push(p))}function ie(){p&&(to.splice(to.indexOf(p),1),localStorage.removeItem(`${Yi}${p}`))}function E(ce){ce!==void 0&&m!==void 0&&g!==void 0&&x!==void 0&&v!==void 0&&_!==void 0&&a(n(10,m=wh(`${Yi}${p}`,{x:v,y:_,expanded:g,width:x})))}function R(){if(v!==void 0&&_!==void 0&&x!==void 0){const ce=G,Ae=z;n(23,G=document.documentElement.clientWidth),n(24,z=document.documentElement.clientHeight);const xe=G-ce,Q=z-Ae,re=(v+x/2)/G,K=(_+U/2)/z;!Number.isNaN(xe)&&re>=.5&&n(2,v+=xe),!Number.isNaN(Q)&&K>=.5&&n(3,_+=Q)}}const B=ce=>{ce.stopPropagation()};let H=0,Z=0,te=0,se=0;const pe=ce=>{ce.stopPropagation(),ce.target&&x!==void 0&&ce.target===F&&n(4,x=x<r?r:S)},oe=ce=>{v!==void 0&&_!==void 0&&ce.button===0&&ce.target instanceof HTMLElement&&(se=0,y=ce,ye(),Ce(),ce.target===A&&(A.style.cursor="grabbing"),n(11,I.style.transition="width 0s ease",I),ce.target.setPointerCapture(ce.pointerId),H=x??0,Z=v-ce.pageX,te=_-ce.pageY)},he=ce=>{ce.target instanceof HTMLElement&&x!==void 0&&S!==void 0&&v!==void 0&&_!==void 0&&(ce.target===A?(se+=Math.hypot(ce.movementX,ce.movementY),n(2,v=ce.pageX+Z),n(3,_=ce.pageY+te)):ce.target===F&&n(4,x=sl(ce.pageX+Z+H-v,S,r)))},de=()=>{if((y==null?void 0:y.target)instanceof HTMLElement){const{target:ce}=y,Ae=ce.getBoundingClientRect(),xe=new PointerEvent("pointercancel",{bubbles:!0,clientX:Ae.left+Ae.width/2,clientY:Ae.top+Ae.height/2,composed:!0,pointerId:y.pointerId,pointerType:y.pointerType});ce.dispatchEvent(xe)}},J=ce=>{ce.stopImmediatePropagation(),ce.target instanceof HTMLElement&&(ce.target.hasPointerCapture(ce.pointerId)&&ce.target.releasePointerCapture(ce.pointerId),ce.target===A&&A.style.removeProperty("cursor"),I.style.removeProperty("transition"),ce.type==="pointerup"&&VC&&ce.target===A&&se<BC&&M&&h&&n(0,h.expanded=!h.expanded,h),y=void 0,ge(),ue())},ue=()=>{A.addEventListener("pointerdown",oe),F==null||F.addEventListener("pointerdown",oe)},ye=()=>{A.removeEventListener("pointerdown",oe),F==null||F.removeEventListener("pointerdown",oe)},Ce=()=>{window.addEventListener("blur",de),A.addEventListener("pointermove",he),A.addEventListener("pointerup",J),A.addEventListener("pointercancel",J),F==null||F.addEventListener("pointermove",he),F==null||F.addEventListener("pointerup",J),F==null||F.addEventListener("pointercancel",J)},ge=()=>{window.removeEventListener("blur",de),A.removeEventListener("pointermove",he),A.removeEventListener("pointerup",J),A.removeEventListener("pointercancel",J),F==null||F.removeEventListener("pointermove",he),F==null||F.removeEventListener("pointerup",J),F==null||F.removeEventListener("pointercancel",J)},_e=ce=>{ce.preventDefault()};Rs(()=>{var Ae;R(),h?I.append(h.element):console.warn("no tpPane in draggable"),I.addEventListener("touchmove",_e,{passive:!1});const ce=I.querySelector(".tp-rotv_t");ce&&(A=ce,A.addEventListener("click",B),A.addEventListener("dblclick",pe),F=(Ae=A.parentElement)==null?void 0:Ae.appendChild(document.createElement("div")),F&&(F.className="tp-custom-width-handle",F.textContent="",F.addEventListener("click",B),F.addEventListener("dblclick",pe)),ue())}),Ds(()=>{ye(),ge(),A.removeEventListener("click",B),A.removeEventListener("dblclick",pe),F==null||F.removeEventListener("click",B),F==null||F.removeEventListener("dblclick",pe),I==null||I.removeEventListener("touchmove",_e),p!==void 0&&to.splice(to.indexOf(p),1)});function Ee(ce){F&&(F.style.display=ce?"block":"none")}function Ie(ce,Ae=Number.MAX_SAFE_INTEGER){if(Ae>0)for(const xe of ce)if("expanded"in xe)xe.expanded&&(Ae--,xe.expanded=!1),"children"in xe&&Ie(xe.children,Ae);else{const Q=k0(xe);Q&&P0(xe)&&(Ae--,Q.click())}}function Te(ce){g=ce,n(1,g)}function Qe(ce){h=ce,n(0,h)}function ze(){N=this.clientHeight,W=this.clientWidth,n(12,N),n(13,W)}function qe(ce){Je[ce?"unshift":"push"](()=>{I=ce,n(11,I)})}const Xe=()=>{n(14,Y=++xl)},We=()=>{n(14,Y=++xl)};return s.$$set=ce=>{t=xt(xt({},t),Nr(ce)),n(16,c=Qt(t,i)),"storePositionLocally"in ce&&n(17,u=ce.storePositionLocally),"localStoreId"in ce&&n(18,p=ce.localStoreId),"tpPane"in ce&&n(0,h=ce.tpPane),"expanded"in ce&&n(1,g=ce.expanded),"collapseChildrenToFit"in ce&&n(19,f=ce.collapseChildrenToFit),"x"in ce&&n(2,v=ce.x),"y"in ce&&n(3,_=ce.y),"width"in ce&&n(4,x=ce.width),"resizable"in ce&&n(5,j=ce.resizable),"userExpandable"in ce&&n(6,M=ce.userExpandable),"minWidth"in ce&&n(20,S=ce.minWidth),"maxWidth"in ce&&n(21,P=ce.maxWidth),"title"in ce&&n(7,L=ce.title),"scale"in ce&&n(8,D=ce.scale),"padding"in ce&&n(9,k=ce.padding),"$$scope"in ce&&n(32,b=ce.$$scope)},s.$$.update=()=>{if(s.$$.dirty[0]&33&&h&&j&&Ee(j),s.$$.dirty[0]&6400&&I)if(D===void 0||D===1)n(22,U=N);else{const ce=window.getComputedStyle(I),Ae=Number.parseFloat(ce.paddingTop)+Number.parseFloat(ce.paddingBottom);n(22,U=(N-Ae)*D+Ae)}s.$$.dirty[0]&33038365&&U!==void 0&&G!==void 0&&z!==void 0&&v!==void 0&&_!==void 0&&x!==void 0&&S!==void 0&&P!==void 0&&(f&&U>z&&h&&Ie(h.children),n(2,v=sl(v,0,Math.max(0,G-W))),n(3,_=sl(_,0,Math.max(0,z-U))),G<W&&n(4,x=Math.max(S,Math.min(P,G)))),s.$$.dirty[0]&10485764&&(r=Math.min(P??600,G-(v??0))),s.$$.dirty[0]&393216&&u&&$(),s.$$.dirty[0]&393216&&!u&&ie(),s.$$.dirty[0]&262144&&p!==`${Yi}${p}`&&E(p),s.$$.dirty[0]&394270&&u&&p!==void 0&&v!==void 0&&_!==void 0&&x!==void 0&&g!==void 0&&(m==null||m.set({x:v,y:_,expanded:g,width:x}))},[h,g,v,_,x,j,M,L,D,k,m,I,N,W,Y,R,c,u,p,f,S,P,U,G,z,l,Te,Qe,ze,qe,Xe,We,b]}class GC extends cr{constructor(t){super(),ur(this,t,UC,FC,ar,{storePositionLocally:17,localStoreId:18,tpPane:0,expanded:1,collapseChildrenToFit:19,x:2,y:3,width:4,resizable:5,userExpandable:6,minWidth:20,maxWidth:21,title:7,scale:8,padding:9},null,[-1,-1])}}function zC(s){let t;const n=s[8].default,r=$r(n,s,s[11],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&2048)&&Qr(r,n,i,i[11],t?Zr(n,i[11],c,null):Jr(i[11]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function qC(s){let t,n,r,i,c;const o=[{title:s[2]},is(s[3],"position")];function d(b){s[9](b)}function a(b){s[10](b)}let l={$$slots:{default:[zC]},$$scope:{ctx:s}};for(let b=0;b<o.length;b+=1)l=xt(l,o[b]);return s[1]!==void 0&&(l.expanded=s[1]),s[0]!==void 0&&(l.tpPane=s[0]),n=new Gu({props:l}),Je.push(()=>it(n,"expanded",d)),Je.push(()=>it(n,"tpPane",a)),{c(){t=Yr("div"),dt(n.$$.fragment),or(t,"display","none")},m(b,y){_t(b,t,y),ut(n,t,null),c=!0},p(b,[y]){const u=y&12?Hr(o,[y&4&&{title:b[2]},y&8&&Wr(is(b[3],"position"))]):{};y&2048&&(u.$$scope={dirty:y,ctx:b}),!r&&y&2&&(r=!0,u.expanded=b[1],ot(()=>r=!1)),!i&&y&1&&(i=!0,u.tpPane=b[0],ot(()=>i=!1)),n.$set(u)},i(b){c||(Ue(n.$$.fragment,b),c=!0)},o(b){He(n.$$.fragment,b),c=!1},d(b){b&&gt(t),ct(n)}}}function HC(s,t,n){const r=["expanded","x","y","width","title","tpPane"];let i=Qt(t,r),{$$slots:c={},$$scope:o}=t,{expanded:d=void 0}=t,{x:a=void 0}=t,{y:l=void 0}=t,{width:b=void 0}=t,{title:y="Tweakpane"}=t,{tpPane:u=void 0}=t,p;function h(g){d=g,n(1,d)}function m(g){u=g,n(0,u)}return s.$$set=g=>{t=xt(xt({},t),Nr(g)),n(3,i=Qt(t,r)),"expanded"in g&&n(1,d=g.expanded),"x"in g&&n(4,a=g.x),"y"in g&&n(5,l=g.y),"width"in g&&n(6,b=g.width),"title"in g&&n(2,y=g.title),"tpPane"in g&&n(0,u=g.tpPane),"$$scope"in g&&n(11,o=g.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&u!=null&&u.element.parentElement&&n(7,p=u.element.parentElement),s.$$.dirty&144&&p!==void 0&&a!==void 0&&(p.style.setProperty("right","unset"),p.style.setProperty("left",`${a}px`)),s.$$.dirty&160&&p!==void 0&&l!==void 0&&p.style.setProperty("top",`${l}px`),s.$$.dirty&192&&p!==void 0&&b!==void 0&&p.style.setProperty("width",`${b}px`)},[u,d,y,i,a,l,b,p,c,h,m,o]}class WC extends cr{constructor(t){super(),ur(this,t,HC,qC,ar,{expanded:1,x:4,y:5,width:6,title:2,tpPane:0})}}function XC(s){let t,n,r,i;const c=[ZC,$C],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function YC(s){let t,n,r,i;const c=[{width:s[1]},is(s[6],"storePositionLocally")];function o(l){s[13](l)}function d(l){s[14](l)}let a={$$slots:{default:[JC]},$$scope:{ctx:s}};for(let l=0;l<c.length;l+=1)a=xt(a,c[l]);return s[0]!==void 0&&(a.expanded=s[0]),s[2]!==void 0&&(a.tpPane=s[2]),t=new Eo({props:a}),Je.push(()=>it(t,"expanded",o)),Je.push(()=>it(t,"tpPane",d)),{c(){dt(t.$$.fragment)},m(l,b){ut(t,l,b),i=!0},p(l,b){const y=b&66?Hr(c,[b&2&&{width:l[1]},b&64&&Wr(is(l[6],"storePositionLocally"))]):{};b&524288&&(y.$$scope={dirty:b,ctx:l}),!n&&b&1&&(n=!0,y.expanded=l[0],ot(()=>n=!1)),!r&&b&4&&(r=!0,y.tpPane=l[2],ot(()=>r=!1)),t.$set(y)},i(l){i||(Ue(t.$$.fragment,l),i=!0)},o(l){He(t.$$.fragment,l),i=!1},d(l){ct(t,l)}}}function KC(s){let t,n,r,i;const c=[tE,eE],o=[];function d(a,l){return 0}return t=d(),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function $C(s){let t,n;const r=s[7].default,i=$r(r,s,s[19],null);return{c(){t=Yr("div"),i&&i.c(),or(t,"display","none")},m(c,o){_t(c,t,o),i&&i.m(t,null),n=!0},p(c,o){i&&i.p&&(!n||o&524288)&&Qr(i,r,c,c[19],n?Zr(r,c[19],o,null):Jr(c[19]),null)},i(c){n||(Ue(i,c),n=!0)},o(c){He(i,c),n=!1},d(c){c&&gt(t),i&&i.d(c)}}}function ZC(s){let t,n,r,i,c,o;const d=[{width:s[1]},s[6]];function a(p){s[15](p)}function l(p){s[16](p)}function b(p){s[17](p)}function y(p){s[18](p)}let u={$$slots:{default:[QC]},$$scope:{ctx:s}};for(let p=0;p<d.length;p+=1)u=xt(u,d[p]);return s[0]!==void 0&&(u.expanded=s[0]),s[2]!==void 0&&(u.tpPane=s[2]),s[3]!==void 0&&(u.x=s[3]),s[4]!==void 0&&(u.y=s[4]),t=new WC({props:u}),Je.push(()=>it(t,"expanded",a)),Je.push(()=>it(t,"tpPane",l)),Je.push(()=>it(t,"x",b)),Je.push(()=>it(t,"y",y)),{c(){dt(t.$$.fragment)},m(p,h){ut(t,p,h),o=!0},p(p,h){const m=h&66?Hr(d,[h&2&&{width:p[1]},h&64&&Wr(p[6])]):{};h&524288&&(m.$$scope={dirty:h,ctx:p}),!n&&h&1&&(n=!0,m.expanded=p[0],ot(()=>n=!1)),!r&&h&4&&(r=!0,m.tpPane=p[2],ot(()=>r=!1)),!i&&h&8&&(i=!0,m.x=p[3],ot(()=>i=!1)),!c&&h&16&&(c=!0,m.y=p[4],ot(()=>c=!1)),t.$set(m)},i(p){o||(Ue(t.$$.fragment,p),o=!0)},o(p){He(t.$$.fragment,p),o=!1},d(p){ct(t,p)}}}function QC(s){let t;const n=s[7].default,r=$r(n,s,s[19],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&524288)&&Qr(r,n,i,i[19],t?Zr(n,i[19],c,null):Jr(i[19]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function JC(s){let t;const n=s[7].default,r=$r(n,s,s[19],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&524288)&&Qr(r,n,i,i[19],t?Zr(n,i[19],c,null):Jr(i[19]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function eE(s){let t,n;const r=s[7].default,i=$r(r,s,s[19],null);return{c(){t=Yr("div"),i&&i.c(),or(t,"display","none")},m(c,o){_t(c,t,o),i&&i.m(t,null),n=!0},p(c,o){i&&i.p&&(!n||o&524288)&&Qr(i,r,c,c[19],n?Zr(r,c[19],o,null):Jr(c[19]),null)},i(c){n||(Ue(i,c),n=!0)},o(c){He(i,c),n=!1},d(c){c&&gt(t),i&&i.d(c)}}}function tE(s){let t,n,r,i,c,o,d;const a=[s[6]];function l(m){s[8](m)}function b(m){s[9](m)}function y(m){s[10](m)}function u(m){s[11](m)}function p(m){s[12](m)}let h={$$slots:{default:[rE]},$$scope:{ctx:s}};for(let m=0;m<a.length;m+=1)h=xt(h,a[m]);return s[0]!==void 0&&(h.expanded=s[0]),s[2]!==void 0&&(h.tpPane=s[2]),s[1]!==void 0&&(h.width=s[1]),s[3]!==void 0&&(h.x=s[3]),s[4]!==void 0&&(h.y=s[4]),t=new GC({props:h}),Je.push(()=>it(t,"expanded",l)),Je.push(()=>it(t,"tpPane",b)),Je.push(()=>it(t,"width",y)),Je.push(()=>it(t,"x",u)),Je.push(()=>it(t,"y",p)),{c(){dt(t.$$.fragment)},m(m,g){ut(t,m,g),d=!0},p(m,g){const f=g&64?Hr(a,[Wr(m[6])]):{};g&524288&&(f.$$scope={dirty:g,ctx:m}),!n&&g&1&&(n=!0,f.expanded=m[0],ot(()=>n=!1)),!r&&g&4&&(r=!0,f.tpPane=m[2],ot(()=>r=!1)),!i&&g&2&&(i=!0,f.width=m[1],ot(()=>i=!1)),!c&&g&8&&(c=!0,f.x=m[3],ot(()=>c=!1)),!o&&g&16&&(o=!0,f.y=m[4],ot(()=>o=!1)),t.$set(f)},i(m){d||(Ue(t.$$.fragment,m),d=!0)},o(m){He(t.$$.fragment,m),d=!1},d(m){ct(t,m)}}}function rE(s){let t;const n=s[7].default,r=$r(n,s,s[19],null);return{c(){r&&r.c()},m(i,c){r&&r.m(i,c),t=!0},p(i,c){r&&r.p&&(!t||c&524288)&&Qr(r,n,i,i[19],t?Zr(n,i[19],c,null):Jr(i[19]),null)},i(i){t||(Ue(r,i),t=!0)},o(i){He(r,i),t=!1},d(i){r&&r.d(i)}}}function nE(s){let t,n,r,i;const c=[KC,YC,XC],o=[];function d(a,l){return a[5]===void 0||a[5]==="draggable"?0:a[5]==="inline"?1:a[5]==="fixed"?2:-1}return~(t=d(s))&&(n=o[t]=c[t](s)),{c(){n&&n.c(),r=mr()},m(a,l){~t&&o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){let b=t;t=d(a),t===b?~t&&o[t].p(a,l):(n&&(yo(),He(o[b],1,1,()=>{o[b]=null}),go()),~t?(n=o[t],n?n.p(a,l):(n=o[t]=c[t](a),n.c()),Ue(n,1),n.m(r.parentNode,r)):n=null)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),~t&&o[t].d(a)}}}function sE(s,t,n){const r=["expanded","position","width","tpPane","x","y"];let i=Qt(t,r),{$$slots:c={},$$scope:o}=t,{expanded:d=void 0}=t,{position:a=void 0}=t,{width:l=void 0}=t,{tpPane:b=void 0}=t,{x:y=void 0}=t,{y:u=void 0}=t;Mm(()=>{(t.position==="inline"||t.position==="fixed")&&(n(3,y=t.x),n(4,u=t.y),n(1,l=t.width),n(0,d=t.expanded))});function p(P){d=P,n(0,d)}function h(P){b=P,n(2,b)}function m(P){l=P,n(1,l)}function g(P){y=P,n(3,y)}function f(P){u=P,n(4,u)}function v(P){d=P,n(0,d)}function _(P){b=P,n(2,b)}function x(P){d=P,n(0,d)}function j(P){b=P,n(2,b)}function M(P){y=P,n(3,y)}function S(P){u=P,n(4,u)}return s.$$set=P=>{n(20,t=xt(xt({},t),Nr(P))),n(6,i=Qt(t,r)),"expanded"in P&&n(0,d=P.expanded),"position"in P&&n(5,a=P.position),"width"in P&&n(1,l=P.width),"tpPane"in P&&n(2,b=P.tpPane),"x"in P&&n(3,y=P.x),"y"in P&&n(4,u=P.y),"$$scope"in P&&n(19,o=P.$$scope)},t=Nr(t),[d,l,b,y,u,a,i,c,p,h,m,g,f,v,_,x,j,M,S,o]}class oE extends cr{constructor(t){super(),ur(this,t,sE,nE,ar,{expanded:0,position:5,width:1,tpPane:2,x:3,y:4})}}function xh(s,t,n){const r=s.slice();return r[13]=t[n],r[14]=t,r[15]=n,r}function iE(s){let t,n;return t=new Eo({props:{theme:s[2],userCreatedPane:!1,$$slots:{default:[lE]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&4&&(c.theme=r[2]),i&65539&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function aE(s){let t=[],n=new Map,r,i,c=Ic(Object.keys(s[1]));const o=d=>d[13];for(let d=0;d<c.length;d+=1){let a=xh(s,c,d),l=o(a);n.set(l,t[d]=jh(l,a))}return{c(){for(let d=0;d<t.length;d+=1)t[d].c();r=mr()},m(d,a){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(d,a);_t(d,r,a),i=!0},p(d,a){a&51&&(c=Ic(Object.keys(d[1])),yo(),t=Im(t,a,o,1,d,c,n,r.parentNode,Dm,jh,r,xh),go())},i(d){if(!i){for(let a=0;a<c.length;a+=1)Ue(t[a]);i=!0}},o(d){for(let a=0;a<t.length;a+=1)He(t[a]);i=!1},d(d){d&&gt(r);for(let a=0;a<t.length;a+=1)t[a].d(d)}}}function lE(s){let t,n,r,i;function c(a){s[10](a)}function o(a){s[11](a)}let d={};return s[1]!==void 0&&(d.object=s[1]),s[0]!==void 0&&(d.prettyLabels=s[0]),t=new Ai({props:d}),Je.push(()=>it(t,"object",c)),Je.push(()=>it(t,"prettyLabels",o)),t.$on("change",s[5]),{c(){dt(t.$$.fragment)},m(a,l){ut(t,a,l),i=!0},p(a,l){const b={};!n&&l&2&&(n=!0,b.object=a[1],ot(()=>n=!1)),!r&&l&1&&(r=!0,b.prettyLabels=a[0],ot(()=>r=!1)),t.$set(b)},i(a){i||(Ue(t.$$.fragment,a),i=!0)},o(a){He(t.$$.fragment,a),i=!1},d(a){ct(t,a)}}}function uE(s){let t,n,r;function i(o){s[9](o)}let c={key:s[13],label:fo(s[13],s[0])};return s[1]!==void 0&&(c.object=s[1]),t=new Xu({props:c}),Je.push(()=>it(t,"object",i)),t.$on("change",s[5]),{c(){dt(t.$$.fragment)},m(o,d){ut(t,o,d),r=!0},p(o,d){const a={};d&2&&(a.key=o[13]),d&3&&(a.label=fo(o[13],o[0])),!n&&d&2&&(n=!0,a.object=o[1],ot(()=>n=!1)),t.$set(a)},i(o){r||(Ue(t.$$.fragment,o),r=!0)},o(o){He(t.$$.fragment,o),r=!1},d(o){ct(t,o)}}}function cE(s){let t,n,r;function i(o){s[8](o,s[13])}let c={label:fo(s[13],s[0])};return s[1][s[13]]!==void 0&&(c.value=s[1][s[13]]),t=new em({props:c}),Je.push(()=>it(t,"value",i)),t.$on("change",s[5]),{c(){dt(t.$$.fragment)},m(o,d){ut(t,o,d),r=!0},p(o,d){s=o;const a={};d&3&&(a.label=fo(s[13],s[0])),!n&&d&2&&(n=!0,a.value=s[1][s[13]],ot(()=>n=!1)),t.$set(a)},i(o){r||(Ue(t.$$.fragment,o),r=!0)},o(o){He(t.$$.fragment,o),r=!1},d(o){ct(t,o)}}}function dE(s){let t,n;return t=new oo({props:{title:fo(s[13],s[0]),$$slots:{default:[hE]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,i){const c={};i&3&&(c.title=fo(r[13],r[0])),i&65539&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function hE(s){let t,n,r,i,c;function o(l){s[6](l,s[13])}function d(l){s[7](l)}let a={};return s[1][s[13]]!==void 0&&(a.object=s[1][s[13]]),s[0]!==void 0&&(a.prettyLabels=s[0]),t=new Ai({props:a}),Je.push(()=>it(t,"object",o)),Je.push(()=>it(t,"prettyLabels",d)),t.$on("change",s[5]),{c(){dt(t.$$.fragment),i=Gr()},m(l,b){ut(t,l,b),_t(l,i,b),c=!0},p(l,b){s=l;const y={};!n&&b&2&&(n=!0,y.object=s[1][s[13]],ot(()=>n=!1)),!r&&b&1&&(r=!0,y.prettyLabels=s[0],ot(()=>r=!1)),t.$set(y)},i(l){c||(Ue(t.$$.fragment,l),c=!0)},o(l){He(t.$$.fragment,l),c=!1},d(l){l&&gt(i),ct(t,l)}}}function jh(s,t){let n,r,i,c,o,d;const a=[dE,cE,uE],l=[];function b(y,u){return u&2&&(r=null),r==null&&(r=y[1][y[13]].constructor===Object&&!Oa(y[1][y[13]])&&!y[4](y[1][y[13]])),r?0:typeof y[1][y[13]]=="string"?1:2}return i=b(t,-1),c=l[i]=a[i](t),{key:s,first:null,c(){n=mr(),c.c(),o=mr(),this.first=n},m(y,u){_t(y,n,u),l[i].m(y,u),_t(y,o,u),d=!0},p(y,u){t=y;let p=i;i=b(t,u),i===p?l[i].p(t,u):(yo(),He(l[p],1,1,()=>{l[p]=null}),go(),c=l[i],c?c.p(t,u):(c=l[i]=a[i](t),c.c()),Ue(c,1),c.m(o.parentNode,o))},i(y){d||(Ue(c),d=!0)},o(y){He(c),d=!1},d(y){y&&(gt(n),gt(o)),l[i].d(y)}}}function pE(s){let t,n,r,i;const c=[aE,iE],o=[];function d(a,l){return a[3]?0:1}return t=d(s),n=o[t]=c[t](s),{c(){n.c(),r=mr()},m(a,l){o[t].m(a,l),_t(a,r,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ue(n),i=!0)},o(a){He(n),i=!1},d(a){a&&gt(r),o[t].d(a)}}}function fo(s,t=!0){return t?s.replaceAll(/([\da-z])([A-Z])/g,"$1 $2").replaceAll(/[_-]+/g," ").toLowerCase().replaceAll(/\b[a-z]/g,n=>n.toUpperCase()):s}function fE(s,t,n){let{theme:r=void 0}=t,{prettyLabels:i=!0}=t,{object:c}=t;const o=ya(),d=ln("parentStore");function a(g){return Dn.isObject(g)||js.isObject(g)||Cs.isObject(g)}function l(g){o("change",{value:uo(c),origin:g.detail.origin})}function b(g,f){s.$$.not_equal(c[f],g)&&(c[f]=g,n(1,c))}function y(g){i=g,n(0,i)}function u(g,f){s.$$.not_equal(c[f],g)&&(c[f]=g,n(1,c))}function p(g){c=g,n(1,c)}function h(g){c=g,n(1,c)}function m(g){i=g,n(0,i)}return s.$$set=g=>{"theme"in g&&n(2,r=g.theme),"prettyLabels"in g&&n(0,i=g.prettyLabels),"object"in g&&n(1,c=g.object)},[i,c,r,d,a,l,b,y,u,p,h,m]}class Ai extends cr{constructor(t){super(),ur(this,t,fE,pE,ar,{theme:2,prettyLabels:0,object:1})}}class mE extends us{measureStart(t){this.controller.valueController.measureStart(t)}measureEnd(){return this.controller.valueController.measureEnd()}measure(t,n){this.controller.valueController.measure(t,n)}measureAsync(t,n){return this.controller.valueController.measureAsync(t,n)}get measureHandler(){return this.controller.valueController.measureHandler}set measureHandler(t){this.controller.valueController.measureHandler=t}}class Ch extends vo{constructor(t,n){const r=n.valueController,i=new vi(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}class yE{measureStart(){const t=performance.now();return()=>performance.now()-t}}function Eh(s,t,n,r){function i(c){return c instanceof n?c:new n(function(o){o(c)})}return new(n||(n=Promise))(function(c,o){function d(b){try{l(r.next(b))}catch(y){o(y)}}function a(b){try{l(r.throw(b))}catch(y){o(y)}}function l(b){b.done?c(b.value):i(b.value).then(d,a)}l((r=r.apply(s,[])).next())})}class tm{constructor(){this.map=new Map,this.keySet=new Set}get(t){return this.map.get(t)}getOrCreate(t,n){this.keySet.has(t)||this.keySet.add(t);let r=this.map.get(t);return r==null&&(r=n(),this.map.set(t,r)),r}set(t,n){this.keySet.has(t)||this.keySet.add(t),this.map.set(t,n)}resetUsedSet(){this.keySet.clear()}vaporize(t){for(const[n,r]of this.map.entries())this.keySet.has(n)||(this.map.delete(n),t==null||t([n,r]))}}function gE(s){s.splice(0,s.length)}function Ki(s){let t=0;return s.forEach(n=>t+=n),t}class vE{constructor(t){this.__recalcForEach=0,this.__countUntilRecalc=0,this.__history=[],this.__index=0,this.__count=0,this.__cache=0,this.__length=t,this.__recalcForEach=t;for(let n=0;n<t;n++)this.__history[n]=0}get mean(){const t=Math.min(this.__count,this.__length);return t===0?0:this.__cache/t}get recalcForEach(){return this.__recalcForEach}set recalcForEach(t){const n=t-this.__recalcForEach;this.__recalcForEach=t,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+n)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let t=0;t<this.__length;t++)this.__history[t]=0}push(t){const n=this.__history[this.__index];this.__history[this.__index]=t,this.__count++,this.__index=(this.__index+1)%this.__length,this.__countUntilRecalc===0?this.recalc():(this.__countUntilRecalc--,this.__cache-=n,this.__cache+=t)}recalc(){this.__countUntilRecalc=this.__recalcForEach;const t=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((n,r)=>n+r,0);this.__cache=t}}function ql(s,t){if(typeof t!="function")return ql(s,c=>c<t);const n=t;let r=0,i=s.length;for(;r<i;){const c=r+i>>1,o=s[c];n(o)?r=c+1:i=c}return r}class bE{constructor(t){this.__history=[],this.__sorted=[],this.__index=0,this.__length=t}get median(){return this.percentile(50)}percentile(t){return this.__history.length===0?0:this.__sorted[Math.round(t*.01*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(t){const n=this.__history[this.__index];if(this.__history[this.__index]=t,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){const i=ql(this.__sorted,n);this.__sorted.splice(i,1)}const r=ql(this.__sorted,t);this.__sorted.splice(r,0,t)}}function ro(s,t){let n=0;for(let r=0;r<s.length;r++)n+=s[r]*t[r];return n}function $u(s){return Math.min(Math.max(s,0),1)}function _E(s){return`rgb( ${s.map(n=>$u(n)*256).join(", ")} )`}function wE(s){const t=[.13572138,4.6153926,-42.66032258,132.13108234],n=[.09140261,2.19418839,4.84296658,-14.18503333],r=[.1066733,12.64194608,-60.58204836,110.36276771],i=[-152.94239396,59.28637943],c=[4.27729857,2.82956604],o=[-89.90310912,27.34824973];s=$u(s);const d=[1,s,s*s,s*s*s],a=[d[2],d[3]].map(b=>b*d[2]),l=[ro(d,t)+ro(a,i),ro(d,n)+ro(a,c),ro(d,r)+ro(a,o)];return _E(l)}const Jn=ht("profiler");class xE{constructor(t,n){this.targetDelta=n.targetDelta,this.deltaUnit=n.deltaUnit,this.fractionDigits=n.fractionDigits,this.calcMode=n.calcMode,this.element=t.createElement("div"),this.element.classList.add(Jn()),n.viewProps.bindClassModifiers(this.element),this.svgRootElement_=t.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgRootElement_.classList.add(Jn("root")),this.element.appendChild(this.svgRootElement_),this.entryContainerElement_=t.createElementNS("http://www.w3.org/2000/svg","g"),this.entryContainerElement_.classList.add(Jn("container")),this.entryContainerElement_.setAttribute("transform","translate( 1, 1 )"),this.svgRootElement_.appendChild(this.entryContainerElement_),this.tooltipElement_=t.createElement("div"),this.tooltipElement_.classList.add(Jn("tooltip")),this.tooltipElement_.style.display="none",this.element.appendChild(this.tooltipElement_),this.tooltipInsideElement_=t.createElement("div"),this.tooltipInsideElement_.classList.add(Jn("tooltipinside")),this.tooltipElement_.appendChild(this.tooltipInsideElement_),this.labelElement_=t.createElement("div"),this.labelElement_.classList.add(Jn("label")),this.labelElement_.textContent=this.deltaToDisplayDelta_(0),this.element.appendChild(this.labelElement_),this.entryElementCacheMap_=new tm,this.hoveringEntry_=null}update(t){const n=this.entryToDelta_(t);this.labelElement_.textContent=this.deltaToDisplayDelta_(n),this.entryElementCacheMap_.resetUsedSet();const r=160/Math.max(this.targetDelta,n);let i=0;for(const c of t.children)this.addEntry_(c,"",this.entryContainerElement_,r).setAttribute("transform",`translate( ${i}, 0 )`),i+=this.entryToDelta_(c)*r;this.entryElementCacheMap_.vaporize(([c,o])=>{o.remove(),this.hoveringEntry_===c&&(this.hoveringEntry_=null)}),this.updateTooltip_()}updateTooltip_(){const t=this.hoveringEntry_;if(t){const n=this.entryElementCacheMap_.get(t),r=n==null?void 0:n.getAttribute("data-delta"),i=this.deltaToDisplayDelta_(parseFloat(r??"0.0")),c=`${t}
${i}`;this.tooltipElement_.style.display="block",this.tooltipInsideElement_.textContent=c}else this.tooltipElement_.style.display="none"}addEntry_(t,n,r,i){const c=`${n}/${t.name}`,o=this.entryElementCacheMap_.getOrCreate(c,()=>{const b=document.createElementNS("http://www.w3.org/2000/svg","g");b.classList.add(Jn("entry")),r.appendChild(b),this.entryElementCacheMap_.set(c,b);const y=document.createElementNS("http://www.w3.org/2000/svg","rect");return y.classList.add(Jn("entryrect")),b.appendChild(y),y.addEventListener("mouseenter",()=>{this.hoveringEntry_=c,this.updateTooltip_()}),y.addEventListener("mouseleave",()=>{this.hoveringEntry_=null,this.updateTooltip_()}),b}),d=this.entryToDelta_(t);o.setAttribute("data-delta",`${d}`);const a=o.childNodes[0];a.setAttribute("width",`${Math.max(.01,d*i-1)}px`),a.setAttribute("height","9px");const l=.15+.7*$u(d/this.targetDelta);if(a.setAttribute("fill",wE(l)),t.children.length>0){let b=0;t.children.forEach(y=>{this.addEntry_(y,c,o,i).setAttribute("transform",`translate( ${b}, 10 )`),b+=this.entryToDelta_(y)*i})}return o}entryToDelta_(t){if(this.calcMode==="frame")return t.delta;if(this.calcMode==="mean")return t.deltaMean;if(this.calcMode==="median")return t.deltaMedian;throw new Error('Unreachable! calcMode must be one of "frame", "mean", or "median"')}deltaToDisplayDelta_(t){return`${t.toFixed(this.fractionDigits)} ${this.deltaUnit}`}}class jE{constructor(t,n){this.targetDelta=n.targetDelta,this.bufferSize=n.bufferSize,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.viewProps=n.viewProps,this.view=new xE(t,{targetDelta:this.targetDelta,deltaUnit:n.deltaUnit,fractionDigits:n.fractionDigits,calcMode:n.calcMode,viewProps:this.viewProps}),this.viewProps.handleDispose(()=>{this.ticker_.dispose()}),this.measureHandler=n.measureHandler,this.rootCalcCacheStack_=[this.createNewEntryCalcCache_()]}measureStart(t){const r=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1].childrenCacheMap.getOrCreate(t,()=>this.createNewEntryCalcCache_());r.childrenCacheMap.resetUsedSet(),gE(r.childrenPromiseDelta),this.rootCalcCacheStack_.push(r),r.measureEnd=this.measureHandler.measureStart()}measureEnd(){return Eh(this,void 0,void 0,function*(){const t=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1],n=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-2],r=Promise.resolve(t.measureEnd());t.measureEnd=null,n.childrenPromiseDelta.push(r),this.rootCalcCacheStack_.pop(),t.childrenCacheMap.vaporize();const i=yield Promise.all(t.childrenPromiseDelta),c=Ki(i),o=(yield r)-c;t.meanCalc.push(o),t.medianCalc.push(o),t.latest=o})}measure(t,n){this.measureStart(t),n(),this.measureEnd()}measureAsync(t,n){return Eh(this,void 0,void 0,function*(){this.measureStart(t),yield n(),this.measureEnd()})}renderEntry(){return this.renderEntryFromCalcCache_("",this.rootCalcCacheStack_[0])}renderEntryFromCalcCache_(t,n){const r=[];for(const p of n.childrenCacheMap.keySet){const h=n.childrenCacheMap.get(p);r.push(this.renderEntryFromCalcCache_(p,h))}const i=n.latest,c=n.meanCalc.mean,o=n.medianCalc.median,d=Ki(r.map(p=>p.delta)),a=Ki(r.map(p=>p.deltaMean)),l=Ki(r.map(p=>p.deltaMedian)),b=i+d,y=c+a,u=o+l;return{name:t,delta:b,deltaMean:y,deltaMedian:u,selfDelta:i,selfDeltaMean:c,selfDeltaMedian:o,children:r}}onTick_(){this.view.update(this.renderEntry())}createNewEntryCalcCache_(){return{meanCalc:new vE(this.bufferSize),medianCalc:new bE(this.bufferSize),latest:0,measureEnd:null,childrenCacheMap:new tm,childrenPromiseDelta:[]}}}function CE(s,t){return t===0?new Jh:new ep(s,t??_o.monitor.defaultInterval)}function EE(s){switch(s){case"frame":case"mean":case"median":return s;default:return}}function SE(s){if(typeof s=="object"&&s!=null&&"measureStart"in s)return s;typeof s=="object"&&s!=null&&"measure"in s&&console.warn("The API of `ProfilerBladeDefaultMeasureHandler` has been changed in v0.4.0! Please define `measureStart` instead of `measure`. Fallback to the default measure handler.")}Nt({id:"profiler",type:"blade",accept(s){const t=It(s,n=>({view:n.required.constant("profiler"),targetDelta:n.optional.number,bufferSize:n.optional.number,deltaUnit:n.optional.string,fractionDigits:n.optional.number,calcMode:n.optional.custom(EE),label:n.optional.string,interval:n.optional.number,measureHandler:n.optional.custom(SE)}));return t?{params:t}:null},controller(s){var t,n,r,i,c,o,d;const a=(t=s.params.interval)!==null&&t!==void 0?t:500,l=(n=s.params.targetDelta)!==null&&n!==void 0?n:16.67,b=(r=s.params.bufferSize)!==null&&r!==void 0?r:30,y=(i=s.params.deltaUnit)!==null&&i!==void 0?i:"ms",u=(c=s.params.fractionDigits)!==null&&c!==void 0?c:2,p=(o=s.params.calcMode)!==null&&o!==void 0?o:"mean",h=(d=s.params.measureHandler)!==null&&d!==void 0?d:new yE;return new Ch(s.document,{blade:s.blade,labelProps:vt.fromObject({label:s.params.label}),valueController:new jE(s.document,{ticker:CE(s.document,a),targetDelta:l,bufferSize:b,deltaUnit:y,fractionDigits:u,calcMode:p,viewProps:s.viewProps,measureHandler:h})})},api(s){return s.controller instanceof Ch?new mE(s.controller):null}});class Sh{constructor(){this.drawer=t=>`L ${t[0]} ${t[1]}`}}class PE{constructor(){this.drawer=(t,n,r)=>{const[i,c]=this.controlPoint(r[n-1],r[n-2],t),[o,d]=this.controlPoint(t,r[n-1],r[n+1],!0);return`C ${i},${c} ${o},${d} ${t[0]},${t[1]}`}}controlPoint(t,n,r,i){const c=n||t,o=r||t,d=.2,a=o[0]-c[0],l=o[1]-c[1],b=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))*d,y=Math.atan2(l,a)+(i?Math.PI:0),u=t[0]+Math.cos(y)*b,p=t[1]+Math.sin(y)*b;return[u,p]}}const Ph=ht("wfm");class kE{constructor(t,n){switch(this.element=t.createElement("div"),this.element.classList.add(Ph()),n.viewProps.bindClassModifiers(this.element),this.svgElem=t.createElementNS(At,"svg"),this.svgElem.classList.add(Ph("g")),this.element.appendChild(this.svgElem),this.pathElem=t.createElementNS(At,"path"),this.svgElem.appendChild(this.pathElem),this.props=n.props,this.value=n.value,this.value.emitter.on("change",this.onValueChange_.bind(this)),this.props.get("lineStyle")){case"linear":this.lineDrawerProvider=new Sh;break;case"bezier":this.lineDrawerProvider=new PE;break;default:this.lineDrawerProvider=new Sh;break}this.refresh(),n.viewProps.handleDispose(()=>{this.value.emitter.off("change",this.onValueChange_)})}svgPath(t,n){return t.reduce((i,c,o,d)=>o===0?`M ${c[0]},${c[1]}`:`${i} ${n(c,o,d)}`,"")}refresh(){var t,n;const r=this.svgElem.getBoundingClientRect(),i=this.value.rawValue[0];if(i){const c=(t=this.props.get("min"))!==null&&t!==void 0?t:Math.min(...i)-1,o=(n=this.props.get("max"))!==null&&n!==void 0?n:Math.max(...i)+1,d=o-c,a=[],l=i.length-1,b=i.length>32?0:r.width/(i.length-1),y=d>50?0:r.height/d;this.element.style.backgroundSize=`${b}px ${y}px`,i.forEach((p,h)=>{if(p===void 0)return;const m=bt(h,0,l,0,r.width),g=bt(p,c,o,r.height,0);a.push([Math.floor(m),Math.floor(g)])});const u=this.svgPath(a,this.lineDrawerProvider.drawer);this.pathElem.setAttributeNS(null,"d",u)}}onValueChange_(){this.refresh()}}class TE{constructor(t,n){this.value=n.value,this.props=n.props,this.viewProps=n.viewProps,this.viewProps.handleDispose(()=>{}),this.view=new kE(t,{value:this.value,viewProps:this.viewProps,props:this.props})}}function ME(s){return"view"in s&&s.view==="waveform"}function kh(s){return typeof s=="object"?"length"in s:!1}Nt({id:"monitor-waveform",type:"monitor",accept:(s,t)=>{if(!kh(s))return null;const n=It(t,r=>({max:r.optional.number,min:r.optional.number,style:r.optional.custom(i=>i==="linear"||i==="bezier"?i:void 0),view:r.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>ME(s)?64:1,reader:s=>t=>kh(t)?t:[]},controller:s=>{var t,n,r;return new TE(s.document,{props:vt.fromObject({max:(t="max"in s.params?s.params.max:null)!==null&&t!==void 0?t:null,min:(n="min"in s.params?s.params.min:null)!==null&&n!==void 0?n:null,lineStyle:(r="style"in s.params?s.params.style:null)!==null&&r!==void 0?r:"linear"}),value:s.value,viewProps:s.viewProps})}});function LE(s){let t,n,r,i,c,o;function d(y){s[4](y)}let a={label:"gap"};s[1].gap!==void 0&&(a.value=s[1].gap),t=new EC({props:a}),Je.push(()=>it(t,"value",d));function l(y){s[5](y)}let b={};return s[1].tupTransform!==void 0&&(b.object=s[1].tupTransform),i=new Ai({props:b}),Je.push(()=>it(i,"object",l)),{c(){dt(t.$$.fragment),r=Gr(),dt(i.$$.fragment)},m(y,u){ut(t,y,u),_t(y,r,u),ut(i,y,u),o=!0},p(y,u){const p={};!n&&u&2&&(n=!0,p.value=y[1].gap,ot(()=>n=!1)),t.$set(p);const h={};!c&&u&2&&(c=!0,h.object=y[1].tupTransform,ot(()=>c=!1)),i.$set(h)},i(y){o||(Ue(t.$$.fragment,y),Ue(i.$$.fragment,y),o=!0)},o(y){He(t.$$.fragment,y),He(i.$$.fragment,y),o=!1},d(y){y&&gt(r),ct(t,y),ct(i,y)}}}function AE(s){let t,n,r;function i(o){s[6](o)}let c={};return s[1].charTransform!==void 0&&(c.object=s[1].charTransform),t=new Ai({props:c}),Je.push(()=>it(t,"object",i)),{c(){dt(t.$$.fragment)},m(o,d){ut(t,o,d),r=!0},p(o,d){const a={};!n&&d&2&&(n=!0,a.object=o[1].charTransform,ot(()=>n=!1)),t.$set(a)},i(o){r||(Ue(t.$$.fragment,o),r=!0)},o(o){He(t.$$.fragment,o),r=!1},d(o){ct(t,o)}}}function OE(s){let t,n,r;function i(o){s[7](o)}let c={};return s[1].style!==void 0&&(c.object=s[1].style),t=new Ai({props:c}),Je.push(()=>it(t,"object",i)),{c(){dt(t.$$.fragment)},m(o,d){ut(t,o,d),r=!0},p(o,d){const a={};!n&&d&2&&(n=!0,a.object=o[1].style,ot(()=>n=!1)),t.$set(a)},i(o){r||(Ue(t.$$.fragment,o),r=!0)},o(o){He(t.$$.fragment,o),r=!1},d(o){ct(t,o)}}}function RE(s){let t,n,r,i,c,o;function d(y){s[8](y)}let a={label:"Color"};s[1].background.color!==void 0&&(a.value=s[1].background.color),t=new Ej({props:a}),Je.push(()=>it(t,"value",d));function l(y){s[9](y)}let b={label:"Type",options:s[2]};return s[1].background.type!==void 0&&(b.value=s[1].background.type),i=new Fj({props:b}),Je.push(()=>it(i,"value",l)),{c(){dt(t.$$.fragment),r=Gr(),dt(i.$$.fragment)},m(y,u){ut(t,y,u),_t(y,r,u),ut(i,y,u),o=!0},p(y,u){const p={};!n&&u&2&&(n=!0,p.value=y[1].background.color,ot(()=>n=!1)),t.$set(p);const h={};!c&&u&2&&(c=!0,h.value=y[1].background.type,ot(()=>c=!1)),i.$set(h)},i(y){o||(Ue(t.$$.fragment,y),Ue(i.$$.fragment,y),o=!0)},o(y){He(t.$$.fragment,y),He(i.$$.fragment,y),o=!1},d(y){y&&gt(r),ct(t,y),ct(i,y)}}}function DE(s){let t,n,r,i,c,o,d,a,l,b,y,u,p;function h(g){s[3](g)}let m={label:"text"};return s[1].text!==void 0&&(m.value=s[1].text),t=new em({props:m}),Je.push(()=>it(t,"value",h)),t.$on("change",function(){Hl(s[0].resetTup)&&s[0].resetTup.apply(this,arguments)}),i=new oo({props:{expanded:!1,title:"ThrowUp",$$slots:{default:[LE]},$$scope:{ctx:s}}}),o=new oo({props:{expanded:!1,title:"Characters",$$slots:{default:[AE]},$$scope:{ctx:s}}}),a=new oo({props:{expanded:!1,title:"Style",$$slots:{default:[OE]},$$scope:{ctx:s}}}),b=new oo({props:{expanded:!1,title:"Background",$$slots:{default:[RE]},$$scope:{ctx:s}}}),u=new Tf({props:{title:"Save image"}}),u.$on("click",s[10]),{c(){dt(t.$$.fragment),r=Gr(),dt(i.$$.fragment),c=Gr(),dt(o.$$.fragment),d=Gr(),dt(a.$$.fragment),l=Gr(),dt(b.$$.fragment),y=Gr(),dt(u.$$.fragment)},m(g,f){ut(t,g,f),_t(g,r,f),ut(i,g,f),_t(g,c,f),ut(o,g,f),_t(g,d,f),ut(a,g,f),_t(g,l,f),ut(b,g,f),_t(g,y,f),ut(u,g,f),p=!0},p(g,f){s=g;const v={};!n&&f&2&&(n=!0,v.value=s[1].text,ot(()=>n=!1)),t.$set(v);const _={};f&2050&&(_.$$scope={dirty:f,ctx:s}),i.$set(_);const x={};f&2050&&(x.$$scope={dirty:f,ctx:s}),o.$set(x);const j={};f&2050&&(j.$$scope={dirty:f,ctx:s}),a.$set(j);const M={};f&2050&&(M.$$scope={dirty:f,ctx:s}),b.$set(M)},i(g){p||(Ue(t.$$.fragment,g),Ue(i.$$.fragment,g),Ue(o.$$.fragment,g),Ue(a.$$.fragment,g),Ue(b.$$.fragment,g),Ue(u.$$.fragment,g),p=!0)},o(g){He(t.$$.fragment,g),He(i.$$.fragment,g),He(o.$$.fragment,g),He(a.$$.fragment,g),He(b.$$.fragment,g),He(u.$$.fragment,g),p=!1},d(g){g&&(gt(r),gt(c),gt(d),gt(l),gt(y)),ct(t,g),ct(i,g),ct(o,g),ct(a,g),ct(b,g),ct(u,g)}}}function IE(s){let t,n;return t=new oE({props:{position:"inline",title:"ThrowUp",$$slots:{default:[DE]},$$scope:{ctx:s}}}),{c(){dt(t.$$.fragment)},m(r,i){ut(t,r,i),n=!0},p(r,[i]){const c={};i&2051&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(Ue(t.$$.fragment,r),n=!0)},o(r){He(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function FE(s,t,n){let r;ns(s,An,h=>n(1,r=h));let{p5:i}=t;const c=["wall","bang"];function o(h){s.$$.not_equal(r.text,h)&&(r.text=h,An.set(r))}function d(h){s.$$.not_equal(r.gap,h)&&(r.gap=h,An.set(r))}function a(h){s.$$.not_equal(r.tupTransform,h)&&(r.tupTransform=h,An.set(r))}function l(h){s.$$.not_equal(r.charTransform,h)&&(r.charTransform=h,An.set(r))}function b(h){s.$$.not_equal(r.style,h)&&(r.style=h,An.set(r))}function y(h){s.$$.not_equal(r.background.color,h)&&(r.background.color=h,An.set(r))}function u(h){s.$$.not_equal(r.background.type,h)&&(r.background.type=h,An.set(r))}const p=()=>i.save();return s.$$set=h=>{"p5"in h&&n(0,i=h.p5)},[i,r,c,o,d,a,l,b,y,u,p]}class NE extends cr{constructor(t){super(),ur(this,t,FE,IE,ar,{p5:0})}}function VE(s){let t,n,r,i,c;return i=new NE({props:{p5:s[0]}}),{c(){t=Yr("main"),n=Yr("div"),r=Gr(),dt(i.$$.fragment),Oh(n,"id","sketch")},m(o,d){_t(o,t,d),jl(t,n),jl(t,r),ut(i,t,null),c=!0},p(o,[d]){const a={};d&1&&(a.p5=o[0]),i.$set(a)},i(o){c||(Ue(i.$$.fragment,o),c=!0)},o(o){He(i.$$.fragment,o),c=!1},d(o){o&&gt(t),ct(i)}}}function BE(s,t,n){let r;return Rs(()=>{n(0,r=new Um(Wm,document.getElementById("sketch")))}),[r]}class UE extends cr{constructor(t){super(),ur(this,t,BE,VE,ar,{})}}new UE({target:document.getElementById("app")});
