var dm=Object.defineProperty;var hm=(s,r,n)=>r in s?dm(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var Na=(s,r,n)=>(hm(s,typeof r!="symbol"?r+"":r,n),n),Sc=(s,r,n)=>{if(!r.has(s))throw TypeError("Cannot "+n)};var Ai=(s,r,n)=>(Sc(s,r,"read from private field"),n?n.call(s):r.get(s)),Oi=(s,r,n)=>{if(r.has(s))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(s):r.set(s,n)},Va=(s,r,n,t)=>(Sc(s,r,"write to private field"),t?t.call(s,n):r.set(s,n),n);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function t(i){if(i.ep)return;i.ep=!0;const d=n(i);fetch(i.href,d)}})();function fr(){}function Dt(s,r){for(const n in r)s[n]=r[n];return s}function gh(s){return s()}function Pc(){return Object.create(null)}function ks(s){s.forEach(gh)}function Dl(s){return typeof s=="function"}function Cr(s,r){return s!=s?r==r:s!==r||s&&typeof s=="object"||typeof s=="function"}function pm(s){return Object.keys(s).length===0}function Il(s,...r){if(s==null){for(const t of r)t(void 0);return fr}const n=s.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function fm(s){let r;return Il(s,n=>r=n)(),r}function eo(s,r,n){s.$$.on_destroy.push(Il(r,n))}function zr(s,r,n,t){if(s){const i=vh(s,r,n,t);return s[0](i)}}function vh(s,r,n,t){return s[1]&&t?Dt(n.ctx.slice(),s[1](t(r))):n.ctx}function qr(s,r,n,t){if(s[2]&&t){const i=s[2](t(n));if(r.dirty===void 0)return i;if(typeof i=="object"){const d=[],o=Math.max(r.dirty.length,i.length);for(let c=0;c<o;c+=1)d[c]=r.dirty[c]|i[c];return d}return r.dirty|i}return r.dirty}function Hr(s,r,n,t,i,d){if(i){const o=vh(r,n,t,d);s.p(o,i)}}function Wr(s){if(s.ctx.length>32){const r=[],n=s.ctx.length/32;for(let t=0;t<n;t++)r[t]=-1;return r}return-1}function bn(s){const r={};for(const n in s)n[0]!=="$"&&(r[n]=s[n]);return r}function _r(s,r){const n={};r=new Set(r);for(const t in s)!r.has(t)&&t[0]!=="$"&&(n[t]=s[t]);return n}function bh(s,r,n){return s.set(n),r}const mm=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function fl(s,r){s.appendChild(r)}function Lt(s,r,n){s.insertBefore(r,n||null)}function Et(s){s.parentNode&&s.parentNode.removeChild(s)}function ln(s){return document.createElement(s)}function _h(s){return document.createTextNode(s)}function Mn(){return _h(" ")}function Vr(){return _h("")}function Vo(s,r,n,t){return s.addEventListener(r,n,t),()=>s.removeEventListener(r,n,t)}function wh(s,r,n){n==null?s.removeAttribute(r):s.getAttribute(r)!==n&&s.setAttribute(r,n)}function ym(s){return Array.from(s.childNodes)}function lr(s,r,n,t){n==null?s.style.removeProperty(r):s.style.setProperty(r,n,"")}let Ri;function gm(){if(Ri===void 0){Ri=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ri=!0}}return Ri}function vm(s,r){getComputedStyle(s).position==="static"&&(s.style.position="relative");const t=ln("iframe");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.tabIndex=-1;const i=gm();let d;return i?(t.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",d=Vo(window,"message",o=>{o.source===t.contentWindow&&r()})):(t.src="about:blank",t.onload=()=>{d=Vo(t.contentWindow,"resize",r),r()}),fl(s,t),()=>{(i||d&&t.contentWindow)&&d(),Et(t)}}function Di(s,r,n){s.classList.toggle(r,!!n)}function bm(s,r,{bubbles:n=!1,cancelable:t=!1}={}){return new CustomEvent(s,{detail:r,bubbles:n,cancelable:t})}let zo;function Bo(s){zo=s}function oo(){if(!zo)throw new Error("Function called outside component initialization");return zo}function _m(s){oo().$$.before_update.push(s)}function si(s){oo().$$.on_mount.push(s)}function oi(s){oo().$$.on_destroy.push(s)}function xh(){const s=oo();return(r,n,{cancelable:t=!1}={})=>{const i=s.$$.callbacks[r];if(i){const d=bm(r,n,{cancelable:t});return i.slice().forEach(o=>{o.call(s,d)}),!d.defaultPrevented}return!0}}function Hi(s,r){return oo().$$.context.set(s,r),r}function gs(s){return oo().$$.context.get(s)}function io(s,r){const n=s.$$.callbacks[r.type];n&&n.slice().forEach(t=>t.call(this,r))}const $s=[],it=[];let Zs=[];const ml=[],wm=Promise.resolve();let yl=!1;function xm(){yl||(yl=!0,wm.then(jh))}function ea(s){Zs.push(s)}function pt(s){ml.push(s)}const Ba=new Set;let Fs=0;function jh(){if(Fs!==0)return;const s=zo;do{try{for(;Fs<$s.length;){const r=$s[Fs];Fs++,Bo(r),jm(r.$$)}}catch(r){throw $s.length=0,Fs=0,r}for(Bo(null),$s.length=0,Fs=0;it.length;)it.pop()();for(let r=0;r<Zs.length;r+=1){const n=Zs[r];Ba.has(n)||(Ba.add(n),n())}Zs.length=0}while($s.length);for(;ml.length;)ml.pop()();yl=!1,Ba.clear(),Bo(s)}function jm(s){if(s.fragment!==null){s.update(),ks(s.before_update);const r=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,r),s.after_update.forEach(ea)}}function Cm(s){const r=[],n=[];Zs.forEach(t=>s.indexOf(t)===-1?r.push(t):n.push(t)),n.forEach(t=>t()),Zs=r}const Wi=new Set;let ms;function ao(){ms={r:0,c:[],p:ms}}function lo(){ms.r||ks(ms.c),ms=ms.p}function Ze(s,r){s&&s.i&&(Wi.delete(s),s.i(r))}function Qe(s,r,n,t){if(s&&s.o){if(Wi.has(s))return;Wi.add(s),ms.c.push(()=>{Wi.delete(s),t&&(n&&s.d(1),t())}),s.o(r)}else t&&t()}function kc(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Em(s,r){Qe(s,1,1,()=>{r.delete(s.key)})}function Sm(s,r,n,t,i,d,o,c,a,l,b,g){let u=s.length,h=d.length,p=u;const m={};for(;p--;)m[s[p].key]=p;const y=[],f=new Map,v=new Map,_=[];for(p=h;p--;){const S=g(i,d,p),P=n(S);let L=o.get(P);L?_.push(()=>L.p(S,r)):(L=l(P,S),L.c()),f.set(P,y[p]=L),P in m&&v.set(P,Math.abs(p-m[P]))}const x=new Set,C=new Set;function M(S){Ze(S,1),S.m(c,b),o.set(S.key,S),b=S.first,h--}for(;u&&h;){const S=y[h-1],P=s[u-1],L=S.key,D=P.key;S===P?(b=S.first,u--,h--):f.has(D)?!o.has(L)||x.has(L)?M(S):C.has(D)?u--:v.get(L)>v.get(D)?(C.add(L),M(S)):(x.add(D),u--):(a(P,o),u--)}for(;u--;){const S=s[u];f.has(S.key)||a(S,o)}for(;h;)M(y[h-1]);return ks(_),y}function cn(s,r){const n={},t={},i={$$scope:1};let d=s.length;for(;d--;){const o=s[d],c=r[d];if(c){for(const a in o)a in c||(t[a]=1);for(const a in c)i[a]||(n[a]=c[a],i[a]=1);s[d]=c}else for(const a in o)i[a]=1}for(const o in t)o in n||(n[o]=void 0);return n}function dn(s){return typeof s=="object"&&s!==null?s:{}}function ft(s,r,n){const t=s.$$.props[r];t!==void 0&&(s.$$.bound[t]=n,n(s.$$.ctx[t]))}function wt(s){s&&s.c()}function vt(s,r,n){const{fragment:t,after_update:i}=s.$$;t&&t.m(r,n),ea(()=>{const d=s.$$.on_mount.map(gh).filter(Dl);s.$$.on_destroy?s.$$.on_destroy.push(...d):ks(d),s.$$.on_mount=[]}),i.forEach(ea)}function bt(s,r){const n=s.$$;n.fragment!==null&&(Cm(n.after_update),ks(n.on_destroy),n.fragment&&n.fragment.d(r),n.on_destroy=n.fragment=null,n.ctx=[])}function Pm(s,r){s.$$.dirty[0]===-1&&($s.push(s),xm(),s.$$.dirty.fill(0)),s.$$.dirty[r/31|0]|=1<<r%31}function Tr(s,r,n,t,i,d,o=null,c=[-1]){const a=zo;Bo(s);const l=s.$$={fragment:null,ctx:[],props:d,update:fr,not_equal:i,bound:Pc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(a?a.$$.context:[])),callbacks:Pc(),dirty:c,skip_bound:!1,root:r.target||a.$$.root};o&&o(l.root);let b=!1;if(l.ctx=n?n(s,r.props||{},(g,u,...h)=>{const p=h.length?h[0]:u;return l.ctx&&i(l.ctx[g],l.ctx[g]=p)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](p),b&&Pm(s,g)),u}):[],l.update(),b=!0,ks(l.before_update),l.fragment=t?t(l.ctx):!1,r.target){if(r.hydrate){const g=ym(r.target);l.fragment&&l.fragment.l(g),g.forEach(Et)}else l.fragment&&l.fragment.c();r.intro&&Ze(s.$$.fragment),vt(s,r.target,r.anchor),jh()}Bo(a)}class Mr{constructor(){Na(this,"$$");Na(this,"$$set")}$destroy(){bt(this,1),this.$destroy=fr}$on(r,n){if(!Dl(n))return fr;const t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(n),()=>{const i=t.indexOf(n);i!==-1&&t.splice(i,1)}}$set(r){this.$$set&&!pm(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const km="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(km);var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Fi(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ch={exports:{}};/*! p5.js v1.9.4 May 21, 2024 */(function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(i,d,o){function c(b,g){if(!d[b]){if(!i[b]){var u=typeof Fi=="function"&&Fi;if(!g&&u)return u(b,!0);if(a)return a(b,!0);throw(g=new Error("Cannot find module '"+b+"'")).code="MODULE_NOT_FOUND",g}u=d[b]={exports:{}},i[b][0].call(u.exports,function(h){return c(i[b][1][h]||h)},u,u.exports,t,i,d,o)}return d[b].exports}for(var a=typeof Fi=="function"&&Fi,l=0;l<o.length;l++)c(o[l]);return c}({1:[function(t,i,d){d.byteLength=function(m){var m=u(m),p=m[0],m=m[1];return 3*(p+m)/4-m},d.toByteArray=function(h){var p,m,f=u(h),y=f[0],f=f[1],v=new a(function(C,M){return 3*(C+M)/4-M}(y,f)),_=0,x=0<f?y-4:y;for(m=0;m<x;m+=4)p=c[h.charCodeAt(m)]<<18|c[h.charCodeAt(m+1)]<<12|c[h.charCodeAt(m+2)]<<6|c[h.charCodeAt(m+3)],v[_++]=p>>16&255,v[_++]=p>>8&255,v[_++]=255&p;return f===2&&(p=c[h.charCodeAt(m)]<<2|c[h.charCodeAt(m+1)]>>4,v[_++]=255&p),f===1&&(p=c[h.charCodeAt(m)]<<10|c[h.charCodeAt(m+1)]<<4|c[h.charCodeAt(m+2)]>>2,v[_++]=p>>8&255,v[_++]=255&p),v},d.fromByteArray=function(h){for(var p,m=h.length,y=m%3,f=[],v=0,_=m-y;v<_;v+=16383)f.push(function(x,C,M){for(var S,P=[],L=C;L<M;L+=3)S=(x[L]<<16&16711680)+(x[L+1]<<8&65280)+(255&x[L+2]),P.push(function(D){return o[D>>18&63]+o[D>>12&63]+o[D>>6&63]+o[63&D]}(S));return P.join("")}(h,v,_<v+16383?_:v+16383));return y==1?(p=h[m-1],f.push(o[p>>2]+o[p<<4&63]+"==")):y==2&&(p=(h[m-2]<<8)+h[m-1],f.push(o[p>>10]+o[p>>4&63]+o[p<<2&63]+"=")),f.join("")};for(var o=[],c=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,g=l.length;b<g;++b)o[b]=l[b],c[l.charCodeAt(b)]=b;function u(h){var p=h.length;if(0<p%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=h.indexOf("="),p=(h=h===-1?p:h)===p?0:4-h%4,[h,p]}c[45]=62,c[95]=63},{}],2:[function(t,i,d){},{}],3:[function(t,i,d){},{}],4:[function(t,i,d){(function(u){var c=t("base64-js"),a=t("ieee754"),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,b=(d.Buffer=u,d.SlowBuffer=function(E){return+E!=E&&(E=0),u.alloc(+E)},d.INSPECT_MAX_BYTES=50,2147483647);function g(E){if(b<E)throw new RangeError('The value "'+E+'" is invalid for option "size"');return E=new Uint8Array(E),Object.setPrototypeOf(E,u.prototype),E}function u(E,R,B){if(typeof E!="number")return h(E,R,B);if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(E)}function h(E,R,B){if(typeof E=="string"){var H=E,Z=R;if(u.isEncoding(Z=typeof Z=="string"&&Z!==""?Z:"utf8"))return te=0|v(H,Z),se=g(te),se=(H=se.write(H,Z))!==te?se.slice(0,H):se;throw new TypeError("Unknown encoding: "+Z)}if(ArrayBuffer.isView(E))return y(E);if(E!=null){if(Y(E,ArrayBuffer)||E&&Y(E.buffer,ArrayBuffer)){var te=E,H=R,se=B;if(H<0||te.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<H+(se||0))throw new RangeError('"length" is outside of buffer bounds');return te=H===void 0&&se===void 0?new Uint8Array(te):se===void 0?new Uint8Array(te,H):new Uint8Array(te,H,se),Object.setPrototypeOf(te,u.prototype),te}if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(Z=E.valueOf&&E.valueOf(),Z!=null&&Z!==E)return u.from(Z,R,B);var pe=function(oe){{var he,de;if(u.isBuffer(oe))return he=0|f(oe.length),(de=g(he)).length!==0&&oe.copy(de,0,0,he),de}if(oe.length!==void 0)return typeof oe.length!="number"||K(oe.length)?g(0):y(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return y(oe.data)}(E);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return u.from(E[Symbol.toPrimitive]("string"),R,B)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}function p(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function m(E){return p(E),g(E<0?0:0|f(E))}function y(E){for(var R=E.length<0?0:0|f(E.length),B=g(R),H=0;H<R;H+=1)B[H]=255&E[H];return B}function f(E){if(b<=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|E}function v(E,R){if(u.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||Y(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var B=E.length,H=2<arguments.length&&arguments[2]===!0;if(!H&&B===0)return 0;for(var Z=!1;;)switch(R){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return W(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*B;case"hex":return B>>>1;case"base64":return G(E).length;default:if(Z)return H?-1:W(E).length;R=(""+R).toLowerCase(),Z=!0}}function _(E,R,B){var H,Z=!1;if((R=R===void 0||R<0?0:R)>this.length||(B=B===void 0||B>this.length?this.length:B)<=0||(B>>>=0)<=(R>>>=0))return"";for(E=E||"utf8";;)switch(E){case"hex":var te=this,ge=R,se=B,de=te.length;(!se||se<0||de<se)&&(se=de);for(var pe="",oe=ge=!ge||ge<0?0:ge;oe<se;++oe)pe+=ie[te[oe]];return pe;case"utf8":case"utf-8":return L(this,R,B);case"ascii":var he=this,de=R,J=B,ue="";J=Math.min(he.length,J);for(var ye=de;ye<J;++ye)ue+=String.fromCharCode(127&he[ye]);return ue;case"latin1":case"binary":var Ce=this,ge=R,_e=B,Ee="";_e=Math.min(Ce.length,_e);for(var Ie=ge;Ie<_e;++Ie)Ee+=String.fromCharCode(Ce[Ie]);return Ee;case"base64":return Te=this,H=B,(Ke=R)===0&&H===Te.length?c.fromByteArray(Te):c.fromByteArray(Te.slice(Ke,H));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Te=R,Ke=B,Ge=this.slice(Te,Ke),ze="",He=0;He<Ge.length;He+=2)ze+=String.fromCharCode(Ge[He]+256*Ge[He+1]);return ze;default:if(Z)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),Z=!0}}function x(E,R,B){var H=E[R];E[R]=E[B],E[B]=H}function C(E,R,B,H,Z){if(E.length===0)return-1;if(typeof B=="string"?(H=B,B=0):2147483647<B?B=2147483647:B<-2147483648&&(B=-2147483648),(B=(B=K(B=+B)?Z?0:E.length-1:B)<0?E.length+B:B)>=E.length){if(Z)return-1;B=E.length-1}else if(B<0){if(!Z)return-1;B=0}if(typeof R=="string"&&(R=u.from(R,H)),u.isBuffer(R))return R.length===0?-1:M(E,R,B,H,Z);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?(Z?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(E,R,B):M(E,[R],B,H,Z);throw new TypeError("val must be string, number or Buffer")}function M(E,R,B,H,Z){var te=1,se=E.length,pe=R.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(E.length<2||R.length<2)return-1;se/=te=2,pe/=2,B/=2}function oe(ye,Ce){return te===1?ye[Ce]:ye.readUInt16BE(Ce*te)}if(Z)for(var he=-1,de=B;de<se;de++)if(oe(E,de)===oe(R,he===-1?0:de-he)){if(de-(he=he===-1?de:he)+1===pe)return he*te}else he!==-1&&(de-=de-he),he=-1;else for(de=B=se<B+pe?se-pe:B;0<=de;de--){for(var J=!0,ue=0;ue<pe;ue++)if(oe(E,de+ue)!==oe(R,ue)){J=!1;break}if(J)return de}return-1}function S(E,R,B,H){return z(function(Z){for(var te=[],se=0;se<Z.length;++se)te.push(255&Z.charCodeAt(se));return te}(R),E,B,H)}function P(E,R,B,H){return z(function(Z,te){for(var se,pe,oe=[],he=0;he<Z.length&&!((te-=2)<0);++he)pe=Z.charCodeAt(he),se=pe>>8,pe=pe%256,oe.push(pe),oe.push(se);return oe}(R,E.length-B),E,B,H)}function L(E,R,B){B=Math.min(E.length,B);for(var H=[],Z=R;Z<B;){var te,se,pe,oe,he=E[Z],de=null,J=239<he?4:223<he?3:191<he?2:1;if(Z+J<=B)switch(J){case 1:he<128&&(de=he);break;case 2:(192&(te=E[Z+1]))==128&&127<(oe=(31&he)<<6|63&te)&&(de=oe);break;case 3:te=E[Z+1],se=E[Z+2],(192&te)==128&&(192&se)==128&&2047<(oe=(15&he)<<12|(63&te)<<6|63&se)&&(oe<55296||57343<oe)&&(de=oe);break;case 4:te=E[Z+1],se=E[Z+2],pe=E[Z+3],(192&te)==128&&(192&se)==128&&(192&pe)==128&&65535<(oe=(15&he)<<18|(63&te)<<12|(63&se)<<6|63&pe)&&oe<1114112&&(de=oe)}de===null?(de=65533,J=1):65535<de&&(de-=65536,H.push(de>>>10&1023|55296),de=56320|1023&de),H.push(de),Z+=J}var ue=H,ye=ue.length;if(ye<=D)return String.fromCharCode.apply(String,ue);for(var Ce="",ge=0;ge<ye;)Ce+=String.fromCharCode.apply(String,ue.slice(ge,ge+=D));return Ce}d.kMaxLength=b,(u.TYPED_ARRAY_SUPPORT=function(){try{var E=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(E,R),E.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=h,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(E,R,B){return R=R,B=B,p(E=E),!(E<=0)&&R!==void 0?typeof B=="string"?g(E).fill(R,B):g(E).fill(R):g(E)},u.allocUnsafe=m,u.allocUnsafeSlow=m,u.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==u.prototype},u.compare=function(E,R){if(Y(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),Y(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(E)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===R)return 0;for(var B=E.length,H=R.length,Z=0,te=Math.min(B,H);Z<te;++Z)if(E[Z]!==R[Z]){B=E[Z],H=R[Z];break}return B<H?-1:H<B?1:0},u.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(E,R){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return u.alloc(0);if(R===void 0)for(Z=R=0;Z<E.length;++Z)R+=E[Z].length;for(var B=u.allocUnsafe(R),H=0,Z=0;Z<E.length;++Z){var te=E[Z];if(Y(te,Uint8Array)&&(te=u.from(te)),!u.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(B,H),H+=te.length}return B},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var E=this.length;if(E%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<E;R+=2)x(this,R,R+1);return this},u.prototype.swap32=function(){var E=this.length;if(E%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<E;R+=4)x(this,R,R+3),x(this,R+1,R+2);return this},u.prototype.swap64=function(){var E=this.length;if(E%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<E;R+=8)x(this,R,R+7),x(this,R+1,R+6),x(this,R+2,R+5),x(this,R+3,R+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var E=this.length;return E===0?"":arguments.length===0?L(this,0,E):_.apply(this,arguments)},u.prototype.equals=function(E){if(u.isBuffer(E))return this===E||u.compare(this,E)===0;throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var R="",E=d.INSPECT_MAX_BYTES,R=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();return this.length>E&&(R+=" ... "),"<Buffer "+R+">"},l&&(u.prototype[l]=u.prototype.inspect),u.prototype.compare=function(E,R,B,H,Z){if(Y(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(B===void 0&&(B=E?E.length:0),H===void 0&&(H=0),Z===void 0&&(Z=this.length),(R=R===void 0?0:R)<0||B>E.length||H<0||Z>this.length)throw new RangeError("out of range index");if(Z<=H&&B<=R)return 0;if(Z<=H)return-1;if(B<=R)return 1;if(this===E)return 0;for(var te=(Z>>>=0)-(H>>>=0),se=(B>>>=0)-(R>>>=0),pe=Math.min(te,se),oe=this.slice(H,Z),he=E.slice(R,B),de=0;de<pe;++de)if(oe[de]!==he[de]){te=oe[de],se=he[de];break}return te<se?-1:se<te?1:0},u.prototype.includes=function(E,R,B){return this.indexOf(E,R,B)!==-1},u.prototype.indexOf=function(E,R,B){return C(this,E,R,B,!0)},u.prototype.lastIndexOf=function(E,R,B){return C(this,E,R,B,!1)},u.prototype.write=function(E,R,B,H){if(R===void 0)H="utf8",B=this.length,R=0;else if(B===void 0&&typeof R=="string")H=R,B=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(B)?(B>>>=0,H===void 0&&(H="utf8")):(H=B,B=void 0)}var Z=this.length-R;if((B===void 0||Z<B)&&(B=Z),0<E.length&&(B<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");H=H||"utf8";for(var te,se,pe,oe=!1;;)switch(H){case"hex":var he=this,de=E,J=R,ue=B,ye=(J=Number(J)||0,he.length-J);(!ue||ye<(ue=Number(ue)))&&(ue=ye),(ye=de.length)/2<ue&&(ue=ye/2);for(var Ce=0;Ce<ue;++Ce){var ge=parseInt(de.substr(2*Ce,2),16);if(K(ge))return Ce;he[J+Ce]=ge}return Ce;case"utf8":case"utf-8":return ye=R,pe=B,z(W(E,(se=this).length-ye),se,ye,pe);case"ascii":return S(this,E,R,B);case"latin1":case"binary":return S(this,E,R,B);case"base64":return se=this,pe=R,te=B,z(G(E),se,pe,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,E,R,B);default:if(oe)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),oe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function k(E,R,B){if(E%1!=0||E<0)throw new RangeError("offset is not uint");if(B<E+R)throw new RangeError("Trying to access beyond buffer length")}function I(E,R,B,H,Z,te){if(!u.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z<R||R<te)throw new RangeError('"value" argument is out of bounds');if(B+H>E.length)throw new RangeError("Index out of range")}function A(E,R,B,H){if(B+H>E.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function F(E,R,B,H,Z){return R=+R,B>>>=0,Z||A(E,0,B,4),a.write(E,R,B,H,23,4),B+4}function N(E,R,B,H,Z){return R=+R,B>>>=0,Z||A(E,0,B,8),a.write(E,R,B,H,52,8),B+8}u.prototype.slice=function(E,R){var B=this.length,B=((E=~~E)<0?(E+=B)<0&&(E=0):B<E&&(E=B),(R=R===void 0?B:~~R)<0?(R+=B)<0&&(R=0):B<R&&(R=B),R<E&&(R=E),this.subarray(E,R));return Object.setPrototypeOf(B,u.prototype),B},u.prototype.readUIntLE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E],Z=1,te=0;++te<R&&(Z*=256);)H+=this[E+te]*Z;return H},u.prototype.readUIntBE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E+--R],Z=1;0<R&&(Z*=256);)H+=this[E+--R]*Z;return H},u.prototype.readUInt8=function(E,R){return E>>>=0,R||k(E,1,this.length),this[E]},u.prototype.readUInt16LE=function(E,R){return E>>>=0,R||k(E,2,this.length),this[E]|this[E+1]<<8},u.prototype.readUInt16BE=function(E,R){return E>>>=0,R||k(E,2,this.length),this[E]<<8|this[E+1]},u.prototype.readUInt32LE=function(E,R){return E>>>=0,R||k(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+16777216*this[E+3]},u.prototype.readUInt32BE=function(E,R){return E>>>=0,R||k(E,4,this.length),16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])},u.prototype.readIntLE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=this[E],Z=1,te=0;++te<R&&(Z*=256);)H+=this[E+te]*Z;return(Z*=128)<=H&&(H-=Math.pow(2,8*R)),H},u.prototype.readIntBE=function(E,R,B){E>>>=0,R>>>=0,B||k(E,R,this.length);for(var H=R,Z=1,te=this[E+--H];0<H&&(Z*=256);)te+=this[E+--H]*Z;return(Z*=128)<=te&&(te-=Math.pow(2,8*R)),te},u.prototype.readInt8=function(E,R){return E>>>=0,R||k(E,1,this.length),128&this[E]?-1*(255-this[E]+1):this[E]},u.prototype.readInt16LE=function(E,R){return E>>>=0,R||k(E,2,this.length),R=this[E]|this[E+1]<<8,32768&R?4294901760|R:R},u.prototype.readInt16BE=function(E,R){return E>>>=0,R||k(E,2,this.length),R=this[E+1]|this[E]<<8,32768&R?4294901760|R:R},u.prototype.readInt32LE=function(E,R){return E>>>=0,R||k(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},u.prototype.readInt32BE=function(E,R){return E>>>=0,R||k(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},u.prototype.readFloatLE=function(E,R){return E>>>=0,R||k(E,4,this.length),a.read(this,E,!0,23,4)},u.prototype.readFloatBE=function(E,R){return E>>>=0,R||k(E,4,this.length),a.read(this,E,!1,23,4)},u.prototype.readDoubleLE=function(E,R){return E>>>=0,R||k(E,8,this.length),a.read(this,E,!0,52,8)},u.prototype.readDoubleBE=function(E,R){return E>>>=0,R||k(E,8,this.length),a.read(this,E,!1,52,8)},u.prototype.writeUIntLE=function(E,R,B,H){E=+E,R>>>=0,B>>>=0,H||I(this,E,R,B,Math.pow(2,8*B)-1,0);var Z=1,te=0;for(this[R]=255&E;++te<B&&(Z*=256);)this[R+te]=E/Z&255;return R+B},u.prototype.writeUIntBE=function(E,R,B,H){E=+E,R>>>=0,B>>>=0,H||I(this,E,R,B,Math.pow(2,8*B)-1,0);var Z=B-1,te=1;for(this[R+Z]=255&E;0<=--Z&&(te*=256);)this[R+Z]=E/te&255;return R+B},u.prototype.writeUInt8=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,1,255,0),this[R]=255&E,R+1},u.prototype.writeUInt16LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,65535,0),this[R]=255&E,this[R+1]=E>>>8,R+2},u.prototype.writeUInt16BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,65535,0),this[R]=E>>>8,this[R+1]=255&E,R+2},u.prototype.writeUInt32LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,4294967295,0),this[R+3]=E>>>24,this[R+2]=E>>>16,this[R+1]=E>>>8,this[R]=255&E,R+4},u.prototype.writeUInt32BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,4294967295,0),this[R]=E>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=255&E,R+4},u.prototype.writeIntLE=function(E,R,B,H){E=+E,R>>>=0,H||I(this,E,R,B,(H=Math.pow(2,8*B-1))-1,-H);var Z=0,te=1,se=0;for(this[R]=255&E;++Z<B&&(te*=256);)E<0&&se===0&&this[R+Z-1]!==0&&(se=1),this[R+Z]=(E/te>>0)-se&255;return R+B},u.prototype.writeIntBE=function(E,R,B,H){E=+E,R>>>=0,H||I(this,E,R,B,(H=Math.pow(2,8*B-1))-1,-H);var Z=B-1,te=1,se=0;for(this[R+Z]=255&E;0<=--Z&&(te*=256);)E<0&&se===0&&this[R+Z+1]!==0&&(se=1),this[R+Z]=(E/te>>0)-se&255;return R+B},u.prototype.writeInt8=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,1,127,-128),this[R]=255&(E=E<0?255+E+1:E),R+1},u.prototype.writeInt16LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,32767,-32768),this[R]=255&E,this[R+1]=E>>>8,R+2},u.prototype.writeInt16BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,2,32767,-32768),this[R]=E>>>8,this[R+1]=255&E,R+2},u.prototype.writeInt32LE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,2147483647,-2147483648),this[R]=255&E,this[R+1]=E>>>8,this[R+2]=E>>>16,this[R+3]=E>>>24,R+4},u.prototype.writeInt32BE=function(E,R,B){return E=+E,R>>>=0,B||I(this,E,R,4,2147483647,-2147483648),this[R]=(E=E<0?4294967295+E+1:E)>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=255&E,R+4},u.prototype.writeFloatLE=function(E,R,B){return F(this,E,R,!0,B)},u.prototype.writeFloatBE=function(E,R,B){return F(this,E,R,!1,B)},u.prototype.writeDoubleLE=function(E,R,B){return N(this,E,R,!0,B)},u.prototype.writeDoubleBE=function(E,R,B){return N(this,E,R,!1,B)},u.prototype.copy=function(E,R,B,H){if(!u.isBuffer(E))throw new TypeError("argument should be a Buffer");if(B=B||0,H||H===0||(H=this.length),R>=E.length&&(R=E.length),(H=0<H&&H<B?B:H)===B||E.length===0||this.length===0)return 0;if((R=R||0)<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length);var Z=(H=E.length-R<H-B?E.length-R+B:H)-B;if(this===E&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,B,H);else if(this===E&&B<R&&R<H)for(var te=Z-1;0<=te;--te)E[te+R]=this[te+B];else Uint8Array.prototype.set.call(E,this.subarray(B,H),R);return Z},u.prototype.fill=function(E,R,B,H){if(typeof E=="string"){if(typeof R=="string"?(H=R,R=0,B=this.length):typeof B=="string"&&(H=B,B=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!u.isEncoding(H))throw new TypeError("Unknown encoding: "+H);var Z;E.length===1&&(Z=E.charCodeAt(0),(H==="utf8"&&Z<128||H==="latin1")&&(E=Z))}else typeof E=="number"?E&=255:typeof E=="boolean"&&(E=Number(E));if(R<0||this.length<R||this.length<B)throw new RangeError("Out of range index");var te;if(!(B<=R))if(R>>>=0,B=B===void 0?this.length:B>>>0,typeof(E=E||0)=="number")for(te=R;te<B;++te)this[te]=E;else{var se=u.isBuffer(E)?E:u.from(E,H),pe=se.length;if(pe===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(te=0;te<B-R;++te)this[te+R]=se[te%pe]}return this};var U=/[^+/0-9A-Za-z-_]/g;function W(E,R){R=R||1/0;for(var B,H=E.length,Z=null,te=[],se=0;se<H;++se){if(55295<(B=E.charCodeAt(se))&&B<57344){if(!Z){if(56319<B){-1<(R-=3)&&te.push(239,191,189);continue}if(se+1===H){-1<(R-=3)&&te.push(239,191,189);continue}Z=B;continue}if(B<56320){-1<(R-=3)&&te.push(239,191,189),Z=B;continue}B=65536+(Z-55296<<10|B-56320)}else Z&&-1<(R-=3)&&te.push(239,191,189);if(Z=null,B<128){if(--R<0)break;te.push(B)}else if(B<2048){if((R-=2)<0)break;te.push(B>>6|192,63&B|128)}else if(B<65536){if((R-=3)<0)break;te.push(B>>12|224,B>>6&63|128,63&B|128)}else{if(!(B<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;te.push(B>>18|240,B>>12&63|128,B>>6&63|128,63&B|128)}}return te}function G(E){return c.toByteArray(function(R){if((R=(R=R.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(E))}function z(E,R,B,H){for(var Z=0;Z<H&&!(Z+B>=R.length||Z>=E.length);++Z)R[Z+B]=E[Z];return Z}function Y(E,R){return E instanceof R||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===R.name}function K(E){return E!=E}var ie=function(){for(var E="0123456789abcdef",R=new Array(256),B=0;B<16;++B)for(var H=16*B,Z=0;Z<16;++Z)R[H+Z]=E[B]+E[Z];return R}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(t,i,d){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(t,i,d){var o=t("../internals/is-object");i.exports=function(c){if(o(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":75}],7:[function(a,i,d){var o=a("../internals/well-known-symbol"),c=a("../internals/object-create"),a=a("../internals/object-define-property"),l=o("unscopables"),b=Array.prototype;b[l]==null&&a.f(b,l,{configurable:!0,value:c(null)}),i.exports=function(g){b[l][g]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(t,i,d){var o=t("../internals/string-multibyte").charAt;i.exports=function(c,a,l){return a+(l?o(c,a).length:1)}},{"../internals/string-multibyte":124}],9:[function(t,i,d){i.exports=function(o,c,a){if(o instanceof c)return o;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},{}],10:[function(t,i,d){var o=t("../internals/is-object");i.exports=function(c){if(o(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,i,d){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(A,i,d){function o(N){return g(N)&&u(F,h(N))}var c,a=A("../internals/array-buffer-native"),l=A("../internals/descriptors"),b=A("../internals/global"),g=A("../internals/is-object"),u=A("../internals/has"),h=A("../internals/classof"),p=A("../internals/create-non-enumerable-property"),m=A("../internals/redefine"),y=A("../internals/object-define-property").f,f=A("../internals/object-get-prototype-of"),v=A("../internals/object-set-prototype-of"),D=A("../internals/well-known-symbol"),A=A("../internals/uid"),_=b.Int8Array,x=_&&_.prototype,C=b.Uint8ClampedArray,C=C&&C.prototype,M=_&&f(_),S=x&&f(x),P=Object.prototype,L=P.isPrototypeOf,D=D("toStringTag"),k=A("TYPED_ARRAY_TAG"),I=a&&!!v&&h(b.opera)!=="Opera",A=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in F)b[c]||(I=!1);if((!I||typeof M!="function"||M===Function.prototype)&&(M=function(){throw TypeError("Incorrect invocation")},I))for(c in F)b[c]&&v(b[c],M);if((!I||!S||S===P)&&(S=M.prototype,I))for(c in F)b[c]&&v(b[c].prototype,S);if(I&&f(C)!==S&&v(C,S),l&&!u(S,D))for(c in A=!0,y(S,D,{get:function(){return g(this)?this[k]:void 0}}),F)b[c]&&p(b[c],k,c);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:A&&k,aTypedArray:function(N){if(o(N))return N;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(N){if(v){if(L.call(M,N))return N}else for(var U in F)if(u(F,c)&&(U=b[U],U&&(N===U||L.call(U,N))))return N;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(N,U,W){if(l){if(W)for(var G in F)G=b[G],G&&u(G.prototype,N)&&delete G.prototype[N];S[N]&&!W||m(S,N,!W&&I&&x[N]||U)}},exportTypedArrayStaticMethod:function(N,U,W){var G,z;if(l){if(v){if(W)for(G in F)(z=b[G])&&u(z,N)&&delete z[N];if(M[N]&&!W)return;try{return m(M,N,!W&&I&&_[N]||U)}catch{}}for(G in F)!(z=b[G])||z[N]&&!W||m(z,N,U)}},isView:function(N){return N=h(N),N==="DataView"||u(F,N)},isTypedArray:o,TypedArray:M,TypedArrayPrototype:S}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(B,i,d){function o(J){return[255&J]}function c(J){return[255&J,J>>8&255]}function a(J){return[255&J,J>>8&255,J>>16&255,J>>24&255]}function l(J){return J[3]<<24|J[2]<<16|J[1]<<8|J[0]}function b(J){return te(J,23,4)}function g(J){return te(J,52,8)}function u(J,ue){A(J[Y],ue,{get:function(){return U(this)[ue]}})}function h(Ee,ue,_e,Ce){if(_e=P(_e),Ee=U(Ee),_e+ue>Ee.byteLength)throw Z(K);var ge=U(Ee.buffer).bytes,_e=_e+Ee.byteOffset,Ee=ge.slice(_e,_e+ue);return Ce?Ee:Ee.reverse()}function p(J,ue,ye,Ce,ge,_e){if(ye=P(ye),J=U(J),ye+ue>J.byteLength)throw Z(K);for(var Ee=U(J.buffer).bytes,Ie=ye+J.byteOffset,Te=Ce(+ge),Ke=0;Ke<ue;Ke++)Ee[Ie+Ke]=Te[_e?Ke:ue-Ke-1]}var m=B("../internals/global"),y=B("../internals/descriptors"),f=B("../internals/array-buffer-native"),v=B("../internals/create-non-enumerable-property"),_=B("../internals/redefine-all"),x=B("../internals/fails"),C=B("../internals/an-instance"),M=B("../internals/to-integer"),S=B("../internals/to-length"),P=B("../internals/to-index"),L=B("../internals/ieee754"),D=B("../internals/object-get-prototype-of"),k=B("../internals/object-set-prototype-of"),I=B("../internals/object-get-own-property-names").f,A=B("../internals/object-define-property").f,F=B("../internals/array-fill"),N=B("../internals/set-to-string-tag"),B=B("../internals/internal-state"),U=B.get,W=B.set,G="ArrayBuffer",z="DataView",Y="prototype",K="Wrong index",ie=m[G],E=ie,R=m[z],B=R&&R[Y],H=Object.prototype,Z=m.RangeError,te=L.pack,se=L.unpack;if(f){if(!x(function(){ie(1)})||!x(function(){new ie(-1)})||x(function(){return new ie,new ie(1.5),new ie(NaN),ie.name!=G})){for(var pe,m=(E=function(ye){return C(this,E),new ie(P(ye))})[Y]=ie[Y],oe=I(ie),he=0;oe.length>he;)(pe=oe[he++])in E||v(E,pe,ie[pe]);m.constructor=E}k&&D(B)!==H&&k(B,H);var L=new R(new E(2)),de=B.setInt8;L.setInt8(0,2147483648),L.setInt8(1,2147483649),!L.getInt8(0)&&L.getInt8(1)||_(B,{setInt8:function(ue,ye){de.call(this,ue,ye<<24>>24)},setUint8:function(ue,ye){de.call(this,ue,ye<<24>>24)}},{unsafe:!0})}else E=function(J){C(this,E,G),J=P(J),W(this,{bytes:F.call(new Array(J),0),byteLength:J}),y||(this.byteLength=J)},R=function(J,ge,ye){C(this,R,z),C(J,E,z);var Ce=U(J).byteLength,ge=M(ge);if(ge<0||Ce<ge)throw Z("Wrong offset");if(Ce<ge+(ye=ye===void 0?Ce-ge:S(ye)))throw Z("Wrong length");W(this,{buffer:J,byteLength:ye,byteOffset:ge}),y||(this.buffer=J,this.byteLength=ye,this.byteOffset=ge)},y&&(u(E,"byteLength"),u(R,"buffer"),u(R,"byteLength"),u(R,"byteOffset")),_(R[Y],{getInt8:function(J){return h(this,1,J)[0]<<24>>24},getUint8:function(J){return h(this,1,J)[0]},getInt16:function(J){return J=h(this,2,J,1<arguments.length?arguments[1]:void 0),(J[1]<<8|J[0])<<16>>16},getUint16:function(J){return J=h(this,2,J,1<arguments.length?arguments[1]:void 0),J[1]<<8|J[0]},getInt32:function(J){return l(h(this,4,J,1<arguments.length?arguments[1]:void 0))},getUint32:function(J){return l(h(this,4,J,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(J){return se(h(this,4,J,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(J){return se(h(this,8,J,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(J,ue){p(this,1,J,o,ue)},setUint8:function(J,ue){p(this,1,J,o,ue)},setInt16:function(J,ue){p(this,2,J,c,ue,2<arguments.length?arguments[2]:void 0)},setUint16:function(J,ue){p(this,2,J,c,ue,2<arguments.length?arguments[2]:void 0)},setInt32:function(J,ue){p(this,4,J,a,ue,2<arguments.length?arguments[2]:void 0)},setUint32:function(J,ue){p(this,4,J,a,ue,2<arguments.length?arguments[2]:void 0)},setFloat32:function(J,ue){p(this,4,J,b,ue,2<arguments.length?arguments[2]:void 0)},setFloat64:function(J,ue){p(this,8,J,g,ue,2<arguments.length?arguments[2]:void 0)}});N(E,G),N(R,z),i.exports={ArrayBuffer:E,DataView:R}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(t,i,d){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),a=t("../internals/to-length"),l=Math.min;i.exports=[].copyWithin||function(y,g){var u=o(this),h=a(u.length),p=c(y,h),m=c(g,h),y=2<arguments.length?arguments[2]:void 0,f=l((y===void 0?h:c(y,h))-m,h-p),v=1;for(m<p&&p<m+f&&(v=-1,m+=f-1,p+=f-1);0<f--;)m in u?u[p]=u[m]:delete u[p],p+=v,m+=v;return u}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(t,i,d){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),a=t("../internals/to-length");i.exports=function(l){for(var b=o(this),g=a(b.length),h=arguments.length,u=c(1<h?arguments[1]:void 0,g),h=2<h?arguments[2]:void 0,p=h===void 0?g:c(h,g);u<p;)b[u++]=l;return b}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(a,i,d){var o=a("../internals/array-iteration").forEach,c=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),c=c("forEach"),a=a("forEach");i.exports=c&&a?[].forEach:function(l){return o(this,l,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,i,d){var o=t("../internals/function-bind-context"),c=t("../internals/to-object"),a=t("../internals/call-with-safe-iteration-closing"),l=t("../internals/is-array-iterator-method"),b=t("../internals/to-length"),g=t("../internals/create-property"),u=t("../internals/get-iterator-method");i.exports=function(C){var p,m,y,f,v,_,x=c(C),C=typeof this=="function"?this:Array,M=arguments.length,S=1<M?arguments[1]:void 0,P=S!==void 0,L=u(x),D=0;if(P&&(S=o(S,2<M?arguments[2]:void 0,2)),L==null||C==Array&&l(L))for(m=new C(p=b(x.length));D<p;D++)_=P?S(x[D],D):x[D],g(m,D,_);else for(v=(f=L.call(x)).next,m=new C;!(y=v.call(f)).done;D++)_=P?a(f,S,[y.value,D],!0):y.value,g(m,D,_);return m.length=D,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(t,i,d){function o(b){return function(g,u,h){var p,m=c(g),y=a(m.length),f=l(h,y);if(b&&u!=u){for(;f<y;)if((p=m[f++])!=p)return!0}else for(;f<y;f++)if((b||f in m)&&m[f]===u)return b||f||0;return!b&&-1}}var c=t("../internals/to-indexed-object"),a=t("../internals/to-length"),l=t("../internals/to-absolute-index");i.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(t,i,d){function o(h){var p=h==1,m=h==2,y=h==3,f=h==4,v=h==6,_=h==5||v;return function(x,C,M,S){for(var P,L,D=l(x),k=a(D),I=c(C,M,3),A=b(k.length),F=0,C=S||g,N=p?C(x,A):m?C(x,0):void 0;F<A;F++)if((_||F in k)&&(L=I(P=k[F],F,D),h)){if(p)N[F]=L;else if(L)switch(h){case 3:return!0;case 5:return P;case 6:return F;case 2:u.call(N,P)}else if(f)return!1}return v?-1:y||f?f:N}}var c=t("../internals/function-bind-context"),a=t("../internals/indexed-object"),l=t("../internals/to-object"),b=t("../internals/to-length"),g=t("../internals/array-species-create"),u=[].push;i.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(h,i,d){var o=h("../internals/to-indexed-object"),c=h("../internals/to-integer"),a=h("../internals/to-length"),u=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),l=Math.min,b=[].lastIndexOf,g=!!b&&1/[1].lastIndexOf(1,-0)<0,u=u("lastIndexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});i.exports=g||!u||!h?function(p){if(g)return b.apply(this,arguments)||0;var m=o(this),y=a(m.length),f=y-1;for((f=1<arguments.length?l(f,c(arguments[1])):f)<0&&(f=y+f);0<=f;f--)if(f in m&&m[f]===p)return f||0;return-1}:b},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(t,i,d){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),a=t("../internals/engine-v8-version"),l=c("species");i.exports=function(b){return 51<=a||!o(function(){var g=[];return(g.constructor={})[l]=function(){return{foo:1}},g[b](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(t,i,d){var o=t("../internals/fails");i.exports=function(c,a){var l=[][c];return!!l&&o(function(){l.call(null,a||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,i,d){function o(u){throw u}var c=t("../internals/descriptors"),a=t("../internals/fails"),l=t("../internals/has"),b=Object.defineProperty,g={};i.exports=function(u,h){var p,m,y,f;return l(g,u)?g[u]:(p=[][u],m=!!l(h=h||{},"ACCESSORS")&&h.ACCESSORS,y=l(h,0)?h[0]:o,f=l(h,1)?h[1]:void 0,g[u]=!!p&&!a(function(){if(m&&!c)return!0;var v={length:-1};m?b(v,1,{enumerable:!0,get:o}):v[1]=1,p.call(v,y,f)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,i,d){function o(g){return function(u,h,p,m){c(h);var y=a(u),f=l(y),v=b(y.length),_=g?v-1:0,x=g?-1:1;if(p<2)for(;;){if(_ in f){m=f[_],_+=x;break}if(_+=x,g?_<0:v<=_)throw TypeError("Reduce of empty array with no initial value")}for(;g?0<=_:_<v;_+=x)_ in f&&(m=h(m,f[_],_,y));return m}}var c=t("../internals/a-function"),a=t("../internals/to-object"),l=t("../internals/indexed-object"),b=t("../internals/to-length");i.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(t,i,d){var o=t("../internals/is-object"),c=t("../internals/is-array"),a=t("../internals/well-known-symbol")("species");i.exports=function(l,b){var g;return new((g=c(l)&&(typeof(g=l.constructor)=="function"&&(g===Array||c(g.prototype))||o(g)&&(g=g[a])===null)?void 0:g)===void 0?Array:g)(b===0?0:b)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(t,i,d){var o=t("../internals/an-object");i.exports=function(c,a,l,b){try{return b?a(o(l)[0],l[1]):a(l)}catch(g){throw b=c.return,b!==void 0&&o(b.call(c)),g}}},{"../internals/an-object":10}],27:[function(t,i,d){var o=t("../internals/well-known-symbol")("iterator"),c=!1;try{var a=0,l={next:function(){return{done:!!a++}},return:function(){c=!0}};l[o]=function(){return this},Array.from(l,function(){throw 2})}catch{}i.exports=function(b,g){if(!g&&!c)return!1;var u=!1;try{var h={};h[o]=function(){return{next:function(){return{done:u=!0}}}},b(h)}catch{}return u}},{"../internals/well-known-symbol":149}],28:[function(t,i,d){var o={}.toString;i.exports=function(c){return o.call(c).slice(8,-1)}},{}],29:[function(t,i,d){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("toStringTag"),l=c(function(){return arguments}())=="Arguments";i.exports=o?c:function(b){var g;return b===void 0?"Undefined":b===null?"Null":typeof(g=function(u,h){try{return u[h]}catch{}}(b=Object(b),a))=="string"?g:l?c(b):(g=c(b))=="Object"&&typeof b.callee=="function"?"Arguments":g}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(y,i,d){var o=y("../internals/object-define-property").f,c=y("../internals/object-create"),a=y("../internals/redefine-all"),l=y("../internals/function-bind-context"),b=y("../internals/an-instance"),g=y("../internals/iterate"),u=y("../internals/define-iterator"),h=y("../internals/set-species"),p=y("../internals/descriptors"),m=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),f=y.set,v=y.getterFor;i.exports={getConstructor:function(_,x,C,M){function S(k,I,A){var F,N=D(k),U=P(k,I);return U?U.value=A:(N.last=U={index:F=m(I,!0),key:I,value:A,previous:I=N.last,next:void 0,removed:!1},N.first||(N.first=U),I&&(I.next=U),p?N.size++:k.size++,F!=="F"&&(N.index[F]=U)),k}function P(F,I){var A,F=D(F),N=m(I);if(N!=="F")return F.index[N];for(A=F.first;A;A=A.next)if(A.key==I)return A}var L=_(function(k,I){b(k,L,x),f(k,{type:x,index:c(null),first:void 0,last:void 0,size:0}),p||(k.size=0),I!=null&&g(I,k[M],k,C)}),D=v(x);return a(L.prototype,{clear:function(){for(var k=D(this),I=k.index,A=k.first;A;)A.removed=!0,A.previous&&(A.previous=A.previous.next=void 0),delete I[A.index],A=A.next;k.first=k.last=void 0,p?k.size=0:this.size=0},delete:function(N){var I,A,F=D(this),N=P(this,N);return N&&(I=N.next,A=N.previous,delete F.index[N.index],N.removed=!0,A&&(A.next=I),I&&(I.previous=A),F.first==N&&(F.first=I),F.last==N&&(F.last=A),p?F.size--:this.size--),!!N},forEach:function(k){for(var I,A=D(this),F=l(k,1<arguments.length?arguments[1]:void 0,3);I=I?I.next:A.first;)for(F(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(k){return!!P(this,k)}}),a(L.prototype,C?{get:function(k){return k=P(this,k),k&&k.value},set:function(k,I){return S(this,k===0?0:k,I)}}:{add:function(k){return S(this,k=k===0?0:k,k)}}),p&&o(L.prototype,"size",{get:function(){return D(this).size}}),L},setStrong:function(_,x,C){var M=x+" Iterator",S=v(x),P=v(M);u(_,x,function(L,D){f(this,{type:M,target:L,state:S(L),kind:D,last:void 0})},function(){for(var L=P(this),D=L.kind,k=L.last;k&&k.removed;)k=k.previous;return L.target&&(L.last=k=k?k.next:L.state.first)?D=="keys"?{value:k.key,done:!1}:D=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:L.target=void 0,done:!0}},C?"entries":"values",!C,!0),h(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(f,i,d){function o(S){return S.frozen||(S.frozen=new c)}function c(){this.entries=[]}function a(S,P){return x(S.entries,function(L){return L[0]===P})}var l=f("../internals/redefine-all"),b=f("../internals/internal-metadata").getWeakData,g=f("../internals/an-object"),u=f("../internals/is-object"),h=f("../internals/an-instance"),p=f("../internals/iterate"),m=f("../internals/array-iteration"),y=f("../internals/has"),f=f("../internals/internal-state"),v=f.set,_=f.getterFor,x=m.find,C=m.findIndex,M=0;c.prototype={get:function(S){if(S=a(this,S),S)return S[1]},has:function(S){return!!a(this,S)},set:function(S,P){var L=a(this,S);L?L[1]=P:this.entries.push([S,P])},delete:function(S){var P=C(this.entries,function(L){return L[0]===S});return~P&&this.entries.splice(P,1),!!~P}},i.exports={getConstructor:function(S,P,L,D){function k(F,N,U){var W=A(F),G=b(g(N),!0);return G===!0?o(W).set(N,U):G[W.id]=U,F}var I=S(function(F,N){h(F,I,P),v(F,{type:P,id:M++,frozen:void 0}),N!=null&&p(N,F[D],F,L)}),A=_(P);return l(I.prototype,{delete:function(F){var N,U=A(this);return!!u(F)&&((N=b(F))===!0?o(U).delete(F):N&&y(N,U.id)&&delete N[U.id])},has:function(F){var N,U=A(this);return!!u(F)&&((N=b(F))===!0?o(U).has(F):N&&y(N,U.id))}}),l(I.prototype,L?{get:function(F){var N,U=A(this);if(u(F))return(N=b(F))===!0?o(U).get(F):N?N[U.id]:void 0},set:function(F,N){return k(this,F,N)}}:{add:function(F){return k(this,F,!0)}}),I}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/global"),a=t("../internals/is-forced"),l=t("../internals/redefine"),b=t("../internals/internal-metadata"),g=t("../internals/iterate"),u=t("../internals/an-instance"),h=t("../internals/is-object"),p=t("../internals/fails"),m=t("../internals/check-correctness-of-iteration"),y=t("../internals/set-to-string-tag"),f=t("../internals/inherit-if-required");i.exports=function(v,_,x){function C(G){var z=N[G];l(N,G,G=="add"?function(Y){return z.call(this,Y===0?0:Y),this}:G=="delete"?function(Y){return!(I&&!h(Y))&&z.call(this,Y===0?0:Y)}:G=="get"?function(Y){return I&&!h(Y)?void 0:z.call(this,Y===0?0:Y)}:G=="has"?function(Y){return!(I&&!h(Y))&&z.call(this,Y===0?0:Y)}:function(Y,K){return z.call(this,Y===0?0:Y,K),this})}var M,S,P,L,D,k=v.indexOf("Map")!==-1,I=v.indexOf("Weak")!==-1,A=k?"set":"add",F=c[v],N=F&&F.prototype,U=F,W={};return a(v,typeof F!="function"||!(I||N.forEach&&!p(function(){new F().entries().next()})))?(U=x.getConstructor(_,v,k,A),b.REQUIRED=!0):a(v,!0)&&(S=(M=new U)[A](I?{}:-0,1)!=M,P=p(function(){M.has(1)}),L=m(function(G){new F(G)}),D=!I&&p(function(){for(var G=new F,z=5;z--;)G[A](z,z);return!G.has(-0)}),L||(((U=_(function(G,z){return u(G,U,v),G=f(new F,G,U),z!=null&&g(z,G[A],G,k),G})).prototype=N).constructor=U),(P||D)&&(C("delete"),C("has"),k&&C("get")),(D||S)&&C(A),I&&N.clear&&delete N.clear),W[v]=U,o({global:!0,forced:U!=F},W),y(U,v),I||x.setStrong(U,v,k),U}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(t,i,d){var o=t("../internals/has"),c=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),l=t("../internals/object-define-property");i.exports=function(b,g){for(var u=c(g),h=l.f,p=a.f,m=0;m<u.length;m++){var y=u[m];o(b,y)||h(b,y,p(g,y))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(t,i,d){var o=t("../internals/well-known-symbol")("match");i.exports=function(c){var a=/./;try{"/./"[c](a)}catch{try{return a[o]=!1,"/./"[c](a)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(t,i,d){t=t("../internals/fails"),i.exports=!t(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(t,i,d){var o=t("../internals/require-object-coercible"),c=/"/g;i.exports=function(u,l,b,g){var u=String(o(u)),h="<"+l;return b!==""&&(h+=" "+b+'="'+String(g).replace(c,"&quot;")+'"'),h+">"+u+"</"+l+">"}},{"../internals/require-object-coercible":114}],37:[function(t,i,d){function o(){return this}var c=t("../internals/iterators-core").IteratorPrototype,a=t("../internals/object-create"),l=t("../internals/create-property-descriptor"),b=t("../internals/set-to-string-tag"),g=t("../internals/iterators");i.exports=function(u,h,p){return h+=" Iterator",u.prototype=a(c,{next:l(1,p)}),b(u,h,!1,!0),g[h]=o,u}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");i.exports=o?function(l,b,g){return c.f(l,b,a(1,g))}:function(l,b,g){return l[b]=g,l}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,i,d){i.exports=function(o,c){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:c}}},{}],40:[function(t,i,d){var o=t("../internals/to-primitive"),c=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");i.exports=function(l,b,g){b=o(b),b in l?c.f(l,b,a(0,g)):l[b]=g}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(f,i,d){function o(){return this}var c=f("../internals/export"),a=f("../internals/create-iterator-constructor"),l=f("../internals/object-get-prototype-of"),b=f("../internals/object-set-prototype-of"),g=f("../internals/set-to-string-tag"),u=f("../internals/create-non-enumerable-property"),h=f("../internals/redefine"),p=f("../internals/well-known-symbol"),m=f("../internals/is-pure"),y=f("../internals/iterators"),f=f("../internals/iterators-core"),v=f.IteratorPrototype,_=f.BUGGY_SAFARI_ITERATORS,x=p("iterator"),C="values",M="entries";i.exports=function(S,P,L,W,k,I,A){a(L,P,W);function F(E){if(E===k&&K)return K;if(!_&&E in z)return z[E];switch(E){case"keys":case C:case M:return function(){return new L(this,E)}}return function(){return new L(this)}}var N,U,W=P+" Iterator",G=!1,z=S.prototype,Y=z[x]||z["@@iterator"]||k&&z[k],K=!_&&Y||F(k),ie=P=="Array"&&z.entries||Y;if(ie&&(ie=l(ie.call(new S)),v!==Object.prototype&&ie.next&&(m||l(ie)===v||(b?b(ie,v):typeof ie[x]!="function"&&u(ie,x,o)),g(ie,W,!0,!0),m&&(y[W]=o))),k==C&&Y&&Y.name!==C&&(G=!0,K=function(){return Y.call(this)}),m&&!A||z[x]===K||u(z,x,K),y[P]=K,k)if(N={values:F(C),keys:I?K:F("keys"),entries:F(M)},A)for(U in N)!_&&!G&&U in z||h(z,U,N[U]);else c({target:P,proto:!0,forced:_||G},N);return N}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(t,i,d){var o=t("../internals/path"),c=t("../internals/has"),a=t("../internals/well-known-symbol-wrapped"),l=t("../internals/object-define-property").f;i.exports=function(b){var g=o.Symbol||(o.Symbol={});c(g,b)||l(g,b,{value:a.f(b)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(t,i,d){t=t("../internals/fails"),i.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,i,d){var o=c("../internals/global"),c=c("../internals/is-object"),a=o.document,l=c(a)&&c(a.createElement);i.exports=function(b){return l?a.createElement(b):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,i,d){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,i,d){t=t("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,i,d){t=t("../internals/get-built-in"),i.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(a,i,d){var o,c,l=a("../internals/global"),a=a("../internals/engine-user-agent"),l=l.process,l=l&&l.versions,l=l&&l.v8;l?c=(o=l.split("."))[0]+o[1]:a&&(!(o=a.match(/Edge\/(\d+)/))||74<=o[1])&&(o=a.match(/Chrome\/(\d+)/))&&(c=o[1]),i.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,i,d){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,i,d){var o=t("../internals/global"),c=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),l=t("../internals/redefine"),b=t("../internals/set-global"),g=t("../internals/copy-constructor-properties"),u=t("../internals/is-forced");i.exports=function(h,p){var m,y,f,v=h.target,_=h.global,x=h.stat,C=_?o:x?o[v]||b(v,{}):(o[v]||{}).prototype;if(C)for(m in p){if(y=p[m],f=h.noTargetGet?(f=c(C,m))&&f.value:C[m],!u(_?m:v+(x?".":"#")+m,h.forced)&&f!==void 0){if(typeof y==typeof f)continue;g(y,f)}(h.sham||f&&f.sham)&&a(y,"sham",!0),l(C,m,y,h)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(t,i,d){i.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(p,i,d){p("../modules/es.regexp.exec");var o=p("../internals/redefine"),c=p("../internals/fails"),a=p("../internals/well-known-symbol"),l=p("../internals/regexp-exec"),b=p("../internals/create-non-enumerable-property"),g=a("species"),u=!c(function(){var f=/./;return f.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(f,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",p=a("replace"),m=!!/./[p]&&/./[p]("a","$0")==="",y=!c(function(){var v=/(?:)/,f=v.exec,v=(v.exec=function(){return f.apply(this,arguments)},"ab".split(v));return v.length!==2||v[0]!=="a"||v[1]!=="b"});i.exports=function(f,v,_,x){var C,M,S=a(f),P=!c(function(){var D={};return D[S]=function(){return 7},""[f](D)!=7}),L=P&&!c(function(){var D=!1,k=/a/;return f==="split"&&((k={constructor:{}}).constructor[g]=function(){return k},k.flags="",k[S]=/./[S]),k.exec=function(){return D=!0,null},k[S](""),!D});P&&L&&(f!=="replace"||u&&h&&!m)&&(f!=="split"||y)||(C=/./[S],_=(L=_(S,""[f],function(D,k,I,A,F){return k.exec===l?P&&!F?{done:!0,value:C.call(k,I,A)}:{done:!0,value:D.call(I,k,A)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}))[0],M=L[1],o(String.prototype,f,_),o(RegExp.prototype,S,v==2?function(D,k){return M.call(D,this,k)}:function(D){return M.call(D,this)})),x&&b(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(t,i,d){function o(b,g,u,h,p,m,y,f){for(var v,_=p,x=0,C=!!y&&l(y,f,3);x<h;){if(x in u){if(v=C?C(u[x],x,g):u[x],0<m&&c(v))_=o(b,g,v,a(v.length),_,m-1)-1;else{if(9007199254740991<=_)throw TypeError("Exceed the acceptable array length");b[_]=v}_++}x++}return _}var c=t("../internals/is-array"),a=t("../internals/to-length"),l=t("../internals/function-bind-context");i.exports=o},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(t,i,d){t=t("../internals/fails"),i.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,i,d){var o=t("../internals/a-function");i.exports=function(c,a,l){if(o(c),a===void 0)return c;switch(l){case 0:return function(){return c.call(a)};case 1:return function(b){return c.call(a,b)};case 2:return function(b,g){return c.call(a,b,g)};case 3:return function(b,g,u){return c.call(a,b,g,u)}}return function(){return c.apply(a,arguments)}}},{"../internals/a-function":5}],56:[function(t,i,d){var o=t("../internals/a-function"),c=t("../internals/is-object"),a=[].slice,l={};i.exports=Function.bind||function(b){var g=o(this),u=a.call(arguments,1),h=function(){var p=u.concat(a.call(arguments));if(this instanceof h){var m=g,y=p.length,f=p;if(!(y in l)){for(var v=[],_=0;_<y;_++)v[_]="a["+_+"]";l[y]=Function("C,a","return new C("+v.join(",")+")")}return l[y](m,f)}return g.apply(b,p)};return c(g.prototype)&&(h.prototype=g.prototype),h}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,i,d){function o(l){return typeof l=="function"?l:void 0}var c=t("../internals/path"),a=t("../internals/global");i.exports=function(l,b){return arguments.length<2?o(c[l])||o(a[l]):c[l]&&c[l][b]||a[l]&&a[l][b]}},{"../internals/global":60,"../internals/path":105}],58:[function(t,i,d){var o=t("../internals/classof"),c=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");i.exports=function(l){if(l!=null)return l[a]||l["@@iterator"]||c[o(l)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(t,i,d){var o=t("../internals/an-object"),c=t("../internals/get-iterator-method");i.exports=function(a){var l=c(a);if(typeof l!="function")throw TypeError(String(a)+" is not iterable");return o(l.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,i,d){(function(o){function c(a){return a&&a.Math==Math&&a}i.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,i,d){var o={}.hasOwnProperty;i.exports=function(c,a){return o.call(c,a)}},{}],62:[function(t,i,d){i.exports={}},{}],63:[function(t,i,d){var o=t("../internals/global");i.exports=function(c,a){var l=o.console;l&&l.error&&(arguments.length===1?l.error(c):l.error(c,a))}},{"../internals/global":60}],64:[function(t,i,d){t=t("../internals/get-built-in"),i.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/fails"),a=t("../internals/document-create-element");i.exports=!o&&!c(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,i,d){var o=Math.abs,c=Math.pow,a=Math.floor,l=Math.log,b=Math.LN2;i.exports={pack:function(g,u,_){var p,m,y,f=new Array(_),v=8*_-u-1,_=(1<<v)-1,x=_>>1,C=u===23?c(2,-24)-c(2,-77):0,M=g<0||g===0&&1/g<0?1:0,S=0;for((g=o(g))!=g||g===1/0?(m=g!=g?1:0,p=_):(p=a(l(g)/b),g*(y=c(2,-p))<1&&(p--,y*=2),2<=(g+=1<=p+x?C/y:C*c(2,1-x))*y&&(p++,y/=2),_<=p+x?(m=0,p=_):1<=p+x?(m=(g*y-1)*c(2,u),p+=x):(m=g*c(2,x-1)*c(2,u),p=0));8<=u;f[S++]=255&m,m/=256,u-=8);for(p=p<<u|m,v+=u;0<v;f[S++]=255&p,p/=256,v-=8);return f[--S]|=128*M,f},unpack:function(g,u){var h,p=g.length,_=8*p-u-1,m=(1<<_)-1,y=m>>1,f=_-7,v=p-1,_=g[v--],x=127&_;for(_>>=7;0<f;x=256*x+g[v],v--,f-=8);for(h=x&(1<<-f)-1,x>>=-f,f+=u;0<f;h=256*h+g[v],v--,f-=8);if(x===0)x=1-y;else{if(x===m)return h?NaN:_?-1/0:1/0;h+=c(2,u),x-=y}return(_?-1:1)*h*c(2,x-u)}}},{}],67:[function(t,i,d){var o=t("../internals/fails"),c=t("../internals/classof-raw"),a="".split;i.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return c(l)=="String"?a.call(l,""):Object(l)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,i,d){var o=t("../internals/is-object"),c=t("../internals/object-set-prototype-of");i.exports=function(a,l,b){return c&&typeof(l=l.constructor)=="function"&&l!==b&&o(l=l.prototype)&&l!==b.prototype&&c(a,l),a}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(o,i,d){var o=o("../internals/shared-store"),c=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(a){return c.call(a)}),i.exports=o.inspectSource},{"../internals/shared-store":120}],70:[function(t,i,d){function o(f){b(f,h,{value:{objectID:"O"+ ++p,weakData:{}}})}var c=t("../internals/hidden-keys"),a=t("../internals/is-object"),l=t("../internals/has"),b=t("../internals/object-define-property").f,g=t("../internals/uid"),u=t("../internals/freezing"),h=g("meta"),p=0,m=Object.isExtensible||function(){return!0},y=i.exports={REQUIRED:!1,fastKey:function(f,v){if(!a(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!l(f,h)){if(!m(f))return"F";if(!v)return"E";o(f)}return f[h].objectID},getWeakData:function(f,v){if(!l(f,h)){if(!m(f))return!0;if(!v)return!1;o(f)}return f[h].weakData},onFreeze:function(f){return u&&y.REQUIRED&&m(f)&&!l(f,h)&&o(f),f}};c[h]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(_,i,d){var o,c,a,l,b,g,u,h,p=_("../internals/native-weak-map"),x=_("../internals/global"),m=_("../internals/is-object"),y=_("../internals/create-non-enumerable-property"),f=_("../internals/has"),v=_("../internals/shared-key"),_=_("../internals/hidden-keys"),x=x.WeakMap;u=p?(o=new x,c=o.get,a=o.has,l=o.set,b=function(C,M){return l.call(o,C,M),M},g=function(C){return c.call(o,C)||{}},function(C){return a.call(o,C)}):(_[h=v("state")]=!0,b=function(C,M){return y(C,h,M),M},g=function(C){return f(C,h)?C[h]:{}},function(C){return f(C,h)}),i.exports={set:b,get:g,has:u,enforce:function(C){return u(C)?g(C):b(C,{})},getterFor:function(C){return function(M){if(m(M)&&(M=g(M)).type===C)return M;throw TypeError("Incompatible receiver, "+C+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(t,i,d){var o=t("../internals/well-known-symbol"),c=t("../internals/iterators"),a=o("iterator"),l=Array.prototype;i.exports=function(b){return b!==void 0&&(c.Array===b||l[a]===b)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(t,i,d){var o=t("../internals/classof-raw");i.exports=Array.isArray||function(c){return o(c)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,i,d){function o(h,p){return(h=b[l(h)])==u||h!=g&&(typeof p=="function"?c(p):!!p)}var c=t("../internals/fails"),a=/#|\.prototype\./,l=o.normalize=function(h){return String(h).replace(a,".").toLowerCase()},b=o.data={},g=o.NATIVE="N",u=o.POLYFILL="P";i.exports=o},{"../internals/fails":51}],75:[function(t,i,d){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],76:[function(t,i,d){i.exports=!1},{}],77:[function(t,i,d){var o=t("../internals/is-object"),c=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");i.exports=function(l){var b;return o(l)&&((b=l[a])!==void 0?!!b:c(l)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(t,i,d){function o(h,p){this.stopped=h,this.result=p}var c=t("../internals/an-object"),a=t("../internals/is-array-iterator-method"),l=t("../internals/to-length"),b=t("../internals/function-bind-context"),g=t("../internals/get-iterator-method"),u=t("../internals/call-with-safe-iteration-closing");(i.exports=function(h,p,m,y,f){var v,_,x,C,M,S,P=b(p,m,y?2:1);if(f)v=h;else{if(typeof(p=g(h))!="function")throw TypeError("Target is not iterable");if(a(p)){for(_=0,x=l(h.length);_<x;_++)if((C=y?P(c(S=h[_])[0],S[1]):P(h[_]))&&C instanceof o)return C;return new o(!1)}v=p.call(h)}for(M=v.next;!(S=M.call(v)).done;)if(typeof(C=u(v,P,S.value,y))=="object"&&C&&C instanceof o)return C;return new o(!1)}).stop=function(h){return new o(!0,h)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(g,i,d){var o,c,a=g("../internals/object-get-prototype-of"),l=g("../internals/create-non-enumerable-property"),b=g("../internals/has"),u=g("../internals/well-known-symbol"),g=g("../internals/is-pure"),u=u("iterator"),h=!1;[].keys&&("next"in(c=[].keys())?(a=a(a(c)))!==Object.prototype&&(o=a):h=!0),o==null&&(o={}),g||b(o,u)||l(o,u,function(){return this}),i.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(t,i,d){i.exports={}},{}],81:[function(t,i,d){i.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],82:[function(y,i,d){var o,c,a,l,b,g,u,h,p=y("../internals/global"),M=y("../internals/object-get-own-property-descriptor").f,C=y("../internals/classof-raw"),m=y("../internals/task").set,y=y("../internals/engine-is-ios"),f=p.MutationObserver||p.WebKitMutationObserver,v=p.process,_=p.Promise,x=C(v)=="process",C=M(p,"queueMicrotask"),M=C&&C.value;M||(o=function(){var S,P;for(x&&(S=v.domain)&&S.exit();c;){P=c.fn,c=c.next;try{P()}catch(L){throw c?l():a=void 0,L}}a=void 0,S&&S.enter()},l=x?function(){v.nextTick(o)}:f&&!y?(b=!0,g=document.createTextNode(""),new f(o).observe(g,{characterData:!0}),function(){g.data=b=!b}):_&&_.resolve?(u=_.resolve(void 0),h=u.then,function(){h.call(u,o)}):function(){m.call(p,o)}),i.exports=M||function(S){S={fn:S,next:void 0},a&&(a.next=S),c||(c=S,l()),a=S}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(t,i,d){t=t("../internals/global"),i.exports=t.Promise},{"../internals/global":60}],84:[function(t,i,d){t=t("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,i,d){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),a=t("../internals/is-pure"),l=c("iterator");i.exports=!o(function(){var b=new URL("b?a=1&b=2&c=3","http://a"),g=b.searchParams,u="";return b.pathname="c%20d",g.forEach(function(h,p){g.delete("b"),u+=p+h}),a&&!b.toJSON||!g.sort||b.href!=="http://a/c%20d?a=1&c=3"||g.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!g[l]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(o,i,d){var c=o("../internals/global"),o=o("../internals/inspect-source"),c=c.WeakMap;i.exports=typeof c=="function"&&/native code/.test(o(c))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,i,d){function o(a){var l,b;this.promise=new a(function(g,u){if(l!==void 0||b!==void 0)throw TypeError("Bad Promise constructor");l=g,b=u}),this.resolve=c(l),this.reject=c(b)}var c=t("../internals/a-function");i.exports.f=function(a){return new o(a)}},{"../internals/a-function":5}],88:[function(t,i,d){var o=t("../internals/is-regexp");i.exports=function(c){if(o(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":77}],89:[function(t,i,d){var o=t("../internals/global").isFinite;i.exports=Number.isFinite||function(c){return typeof c=="number"&&o(c)}},{"../internals/global":60}],90:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/fails"),a=t("../internals/object-keys"),l=t("../internals/object-get-own-property-symbols"),b=t("../internals/object-property-is-enumerable"),g=t("../internals/to-object"),u=t("../internals/indexed-object"),h=Object.assign,p=Object.defineProperty;i.exports=!h||c(function(){var m,y,f,v;return!(!o||h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},v="abcdefghijklmnopqrst",(m={})[f=Symbol()]=7,v.split("").forEach(function(_){y[_]=_}),h({},m)[f]!=7||a(h({},y)).join("")!=v)})?function(m,y){for(var f=g(m),v=arguments.length,_=1,x=l.f,C=b.f;_<v;)for(var M,S=u(arguments[_++]),P=x?a(S).concat(x(S)):a(S),L=P.length,D=0;D<L;)M=P[D++],o&&!C.call(S,M)||(f[M]=S[M]);return f}:h},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(p,i,d){function o(){}var c,a=p("../internals/an-object"),l=p("../internals/object-define-properties"),b=p("../internals/enum-bug-keys"),g=p("../internals/hidden-keys"),u=p("../internals/html"),h=p("../internals/document-create-element"),p=p("../internals/shared-key"),m="prototype",y="script",f=p("IE_PROTO"),v=function(x){return"<"+y+">"+x+"</"+y+">"},_=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}_=c?((x=c).write(v("")),x.close(),C=x.parentWindow.Object,x=null,C):(x=h("iframe"),C="java"+y+":",x.style.display="none",u.appendChild(x),x.src=String(C),(C=x.contentWindow.document).open(),C.write(v("document.F=Object")),C.close(),C.F);for(var x,C,M=b.length;M--;)delete _[m][b[M]];return _()};g[f]=!0,i.exports=Object.create||function(x,C){var M;return x!==null?(o[m]=a(x),M=new o,o[m]=null,M[f]=x):M=_(),C===void 0?M:l(M,C)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),a=t("../internals/an-object"),l=t("../internals/object-keys");i.exports=o?Object.defineProperties:function(b,g){a(b);for(var u,h=l(g),p=h.length,m=0;m<p;)c.f(b,u=h[m++],g[u]);return b}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/ie8-dom-define"),a=t("../internals/an-object"),l=t("../internals/to-primitive"),b=Object.defineProperty;d.f=o?b:function(g,u,h){if(a(g),u=l(u,!0),a(h),c)try{return b(g,u,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(g[u]=h.value),g}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/object-property-is-enumerable"),a=t("../internals/create-property-descriptor"),l=t("../internals/to-indexed-object"),b=t("../internals/to-primitive"),g=t("../internals/has"),u=t("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;d.f=o?h:function(p,m){if(p=l(p),m=b(m,!0),u)try{return h(p,m)}catch{}if(g(p,m))return a(!c.f.call(p,m),p[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(t,i,d){var o=t("../internals/to-indexed-object"),c=t("../internals/object-get-own-property-names").f,a={}.toString,l=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(b){if(!l||a.call(b)!="[object Window]")return c(o(b));try{return c(b)}catch{return l.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(t,i,d){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys").concat("length","prototype");d.f=Object.getOwnPropertyNames||function(a){return o(a,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,i,d){d.f=Object.getOwnPropertySymbols},{}],98:[function(l,i,d){var o=l("../internals/has"),c=l("../internals/to-object"),a=l("../internals/shared-key"),l=l("../internals/correct-prototype-getter"),b=a("IE_PROTO"),g=Object.prototype;i.exports=l?Object.getPrototypeOf:function(u){return u=c(u),o(u,b)?u[b]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?g:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(t,i,d){var o=t("../internals/has"),c=t("../internals/to-indexed-object"),a=t("../internals/array-includes").indexOf,l=t("../internals/hidden-keys");i.exports=function(b,g){var u,h=c(b),p=0,m=[];for(u in h)!o(l,u)&&o(h,u)&&m.push(u);for(;g.length>p;)!o(h,u=g[p++])||~a(m,u)||m.push(u);return m}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(t,i,d){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys");i.exports=Object.keys||function(a){return o(a,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,i,d){var o={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,a=c&&!o.call({1:2},1);d.f=a?function(l){return l=c(this,l),!!l&&l.enumerable}:o},{}],102:[function(t,i,d){var o=t("../internals/an-object"),c=t("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,l=!1,b={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(b,[]),l=b instanceof Array}catch{}return function(g,u){return o(g),c(u),l?a.call(g,u):g.__proto__=u,g}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,i,d){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof");i.exports=o?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(t,i,d){var o=t("../internals/get-built-in"),c=t("../internals/object-get-own-property-names"),a=t("../internals/object-get-own-property-symbols"),l=t("../internals/an-object");i.exports=o("Reflect","ownKeys")||function(b){var g=c.f(l(b)),u=a.f;return u?g.concat(u(b)):g}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(t,i,d){t=t("../internals/global"),i.exports=t},{"../internals/global":60}],106:[function(t,i,d){i.exports=function(o){try{return{error:!1,value:o()}}catch(c){return{error:!0,value:c}}}},{}],107:[function(t,i,d){var o=t("../internals/an-object"),c=t("../internals/is-object"),a=t("../internals/new-promise-capability");i.exports=function(l,b){return o(l),c(b)&&b.constructor===l?b:((0,(l=a.f(l)).resolve)(b),l.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(t,i,d){var o=t("../internals/redefine");i.exports=function(c,a,l){for(var b in a)o(c,b,a[b],l);return c}},{"../internals/redefine":109}],109:[function(g,i,d){var o=g("../internals/global"),c=g("../internals/create-non-enumerable-property"),a=g("../internals/has"),l=g("../internals/set-global"),b=g("../internals/inspect-source"),g=g("../internals/internal-state"),u=g.get,h=g.enforce,p=String(String).split("String");(i.exports=function(m,y,f,C){var _=!!C&&!!C.unsafe,x=!!C&&!!C.enumerable,C=!!C&&!!C.noTargetGet;typeof f=="function"&&(typeof y!="string"||a(f,"name")||c(f,"name",y),h(f).source=p.join(typeof y=="string"?y:"")),m===o?x?m[y]=f:l(y,f):(_?!C&&m[y]&&(x=!0):delete m[y],x?m[y]=f:c(m,y,f))})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||b(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(t,i,d){var o=t("./classof-raw"),c=t("./regexp-exec");i.exports=function(a,l){var b=a.exec;if(typeof b=="function"){if(b=b.call(a,l),typeof b!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return b}if(o(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(a,l)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(l,i,d){var o,c,a=l("./regexp-flags"),l=l("./regexp-sticky-helpers"),b=RegExp.prototype.exec,g=String.prototype.replace,u=b,h=(o=/a/,c=/b*/g,b.call(o,"a"),b.call(c,"a"),o.lastIndex!==0||c.lastIndex!==0),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0;i.exports=u=h||m||p?function(y){var f,v,_,x,C=this,M=p&&C.sticky,S=a.call(C),P=C.source,L=0,D=y;return M&&((S=S.replace("y","")).indexOf("g")===-1&&(S+="g"),D=String(y).slice(C.lastIndex),0<C.lastIndex&&(!C.multiline||C.multiline&&y[C.lastIndex-1]!==`
`)&&(P="(?: "+P+")",D=" "+D,L++),v=new RegExp("^(?:"+P+")",S)),m&&(v=new RegExp("^"+P+"$(?!\\s)",S)),h&&(f=C.lastIndex),_=b.call(M?v:C,D),M?_?(_.input=_.input.slice(L),_[0]=_[0].slice(L),_.index=C.lastIndex,C.lastIndex+=_[0].length):C.lastIndex=0:h&&_&&(C.lastIndex=C.global?_.index+_[0].length:f),m&&_&&1<_.length&&g.call(_[0],v,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(_[x]=void 0)}),_}:u},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(t,i,d){var o=t("../internals/an-object");i.exports=function(){var c=o(this),a="";return c.global&&(a+="g"),c.ignoreCase&&(a+="i"),c.multiline&&(a+="m"),c.dotAll&&(a+="s"),c.unicode&&(a+="u"),c.sticky&&(a+="y"),a}},{"../internals/an-object":10}],113:[function(t,i,d){t=t("./fails");function o(c,a){return RegExp(c,a)}d.UNSUPPORTED_Y=t(function(){var c=o("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),d.BROKEN_CARET=t(function(){var c=o("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],114:[function(t,i,d){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],115:[function(t,i,d){i.exports=Object.is||function(o,c){return o===c?o!==0||1/o==1/c:o!=o&&c!=c}},{}],116:[function(t,i,d){var o=t("../internals/global"),c=t("../internals/create-non-enumerable-property");i.exports=function(a,l){try{c(o,a,l)}catch{o[a]=l}return l}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(t,i,d){var o=t("../internals/get-built-in"),c=t("../internals/object-define-property"),a=t("../internals/well-known-symbol"),l=t("../internals/descriptors"),b=a("species");i.exports=function(u){var u=o(u),h=c.f;l&&u&&!u[b]&&h(u,b,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(t,i,d){var o=t("../internals/object-define-property").f,c=t("../internals/has"),a=t("../internals/well-known-symbol")("toStringTag");i.exports=function(l,b,g){l&&!c(l=g?l:l.prototype,a)&&o(l,a,{configurable:!0,value:b})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(t,i,d){var o=t("../internals/shared"),c=t("../internals/uid"),a=o("keys");i.exports=function(l){return a[l]||(a[l]=c(l))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(o,i,d){var a=o("../internals/global"),o=o("../internals/set-global"),c="__core-js_shared__",a=a[c]||o(c,{});i.exports=a},{"../internals/global":60,"../internals/set-global":116}],121:[function(t,i,d){var o=t("../internals/is-pure"),c=t("../internals/shared-store");(i.exports=function(a,l){return c[a]||(c[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(t,i,d){var o=t("../internals/an-object"),c=t("../internals/a-function"),a=t("../internals/well-known-symbol")("species");i.exports=function(g,b){var g=o(g).constructor;return g===void 0||(g=o(g)[a])==null?b:c(g)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(t,i,d){var o=t("../internals/fails");i.exports=function(c){return o(function(){var a=""[c]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":51}],124:[function(t,i,d){function o(l){return function(h,p){var u,h=String(a(h)),p=c(p),m=h.length;return p<0||m<=p?l?"":void 0:(u=h.charCodeAt(p))<55296||56319<u||p+1===m||(m=h.charCodeAt(p+1))<56320||57343<m?l?h.charAt(p):u:l?h.slice(p,p+2):m-56320+(u-55296<<10)+65536}}var c=t("../internals/to-integer"),a=t("../internals/require-object-coercible");i.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(t,i,d){t=t("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],126:[function(t,i,d){function o(g){return function(m,v,f){var m=String(l(m)),y=m.length,f=f===void 0?" ":String(f),v=c(v);return v<=y||f==""?m:((y=a.call(f,b((v=v-y)/f.length))).length>v&&(y=y.slice(0,v)),g?m+y:y+m)}}var c=t("../internals/to-length"),a=t("../internals/string-repeat"),l=t("../internals/require-object-coercible"),b=Math.ceil;i.exports={start:o(!1),end:o(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(t,i,d){function o(_){return _+22+75*(_<26)}function c(_){var x,C=[],M=(_=function(Y){for(var K=[],ie=0,E=Y.length;ie<E;){var R,B=Y.charCodeAt(ie++);55296<=B&&B<=56319&&ie<E?(64512&(R=Y.charCodeAt(ie++)))==56320?K.push(((1023&B)<<10)+(1023&R)+65536):(K.push(B),ie--):K.push(B)}return K}(_)).length,S=128,P=0,L=72;for(A=0;A<_.length;A++)(x=_[A])<128&&C.push(v(x));var D=C.length,k=D;for(D&&C.push("-");k<M;){for(var I=a,A=0;A<_.length;A++)S<=(x=_[A])&&x<I&&(I=x);var F=k+1;if(I-S>f((a-P)/F))throw RangeError(m);for(P+=(I-S)*F,S=I,A=0;A<_.length;A++){if((x=_[A])<S&&++P>a)throw RangeError(m);if(x==S){for(var N=P,U=l;;U+=l){var W=U<=L?1:L+b<=U?b:U-L;if(N<W)break;var G=N-W,z=l-W;C.push(v(o(W+G%z))),N=f(G/z)}C.push(v(o(N))),L=function(Y,K,ie){var E=0;for(Y=ie?f(Y/u):Y>>1,Y+=f(Y/K);y*b>>1<Y;E+=l)Y=f(Y/y);return f(E+(y+1)*Y/(Y+g))}(P,F,k==D),P=0,++k}}++P,++S}return C.join("")}var a=2147483647,l=36,b=26,g=38,u=700,h=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",y=l-1,f=Math.floor,v=String.fromCharCode;i.exports=function(_){for(var x,C=[],M=_.toLowerCase().replace(p,".").split("."),S=0;S<M.length;S++)x=M[S],C.push(h.test(x)?"xn--"+c(x):x);return C.join(".")}},{}],128:[function(t,i,d){var o=t("../internals/to-integer"),c=t("../internals/require-object-coercible");i.exports="".repeat||function(a){var l=String(c(this)),b="",g=o(a);if(g<0||g==1/0)throw RangeError("Wrong number of repetitions");for(;0<g;(g>>>=1)&&(l+=l))1&g&&(b+=l);return b}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(t,i,d){var o=t("../internals/fails"),c=t("../internals/whitespaces");i.exports=function(a){return o(function(){return!!c[a]()||"​᠎"[a]()!="​᠎"||c[a].name!==a})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(a,i,d){function o(g){return function(u){return u=String(c(u)),1&g&&(u=u.replace(l,"")),u=2&g?u.replace(b,""):u}}var c=a("../internals/require-object-coercible"),a="["+a("../internals/whitespaces")+"]",l=RegExp("^"+a+a+"*"),b=RegExp(a+a+"*$");i.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(y,i,d){function o(k){return function(){D(k)}}function c(k){D(k.data)}function a(k){b.postMessage(k+"",f.protocol+"//"+f.host)}var l,b=y("../internals/global"),g=y("../internals/fails"),u=y("../internals/classof-raw"),h=y("../internals/function-bind-context"),p=y("../internals/html"),m=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),f=b.location,v=b.setImmediate,_=b.clearImmediate,x=b.process,C=b.MessageChannel,M=b.Dispatch,S=0,P={},L="onreadystatechange",D=function(k){var I;P.hasOwnProperty(k)&&(I=P[k],delete P[k],I())};v&&_||(v=function(k){for(var I=[],A=1;A<arguments.length;)I.push(arguments[A++]);return P[++S]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,I)},l(S),S},_=function(k){delete P[k]},u(x)=="process"?l=function(k){x.nextTick(o(k))}:M&&M.now?l=function(k){M.now(o(k))}:C&&!y?(y=(u=new C).port2,u.port1.onmessage=c,l=h(y.postMessage,y,1)):!b.addEventListener||typeof postMessage!="function"||b.importScripts||g(a)||f.protocol==="file:"?l=L in m("script")?function(k){p.appendChild(m("script"))[L]=function(){p.removeChild(this),D(k)}}:function(k){setTimeout(o(k),0)}:(l=a,b.addEventListener("message",c,!1))),i.exports={set:v,clear:_}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(t,i,d){var o=t("../internals/classof-raw");i.exports=function(c){if(typeof c!="number"&&o(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],133:[function(t,i,d){var o=t("../internals/to-integer"),c=Math.max,a=Math.min;i.exports=function(l,b){return l=o(l),l<0?c(l+b,0):a(l,b)}},{"../internals/to-integer":136}],134:[function(t,i,d){var o=t("../internals/to-integer"),c=t("../internals/to-length");i.exports=function(l){if(l===void 0)return 0;var l=o(l),b=c(l);if(l!==b)throw RangeError("Wrong length or index");return b}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(t,i,d){var o=t("../internals/indexed-object"),c=t("../internals/require-object-coercible");i.exports=function(a){return o(c(a))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(t,i,d){var o=Math.ceil,c=Math.floor;i.exports=function(a){return isNaN(a=+a)?0:(0<a?c:o)(a)}},{}],137:[function(t,i,d){var o=t("../internals/to-integer"),c=Math.min;i.exports=function(a){return 0<a?c(o(a),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(t,i,d){var o=t("../internals/require-object-coercible");i.exports=function(c){return Object(o(c))}},{"../internals/require-object-coercible":114}],139:[function(t,i,d){var o=t("../internals/to-positive-integer");i.exports=function(c,a){if(c=o(c),c%a)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":140}],140:[function(t,i,d){var o=t("../internals/to-integer");i.exports=function(c){if(c=o(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":136}],141:[function(t,i,d){var o=t("../internals/is-object");i.exports=function(c,a){if(!o(c))return c;var l,b;if(a&&typeof(l=c.toString)=="function"&&!o(b=l.call(c))||typeof(l=c.valueOf)=="function"&&!o(b=l.call(c))||!a&&typeof(l=c.toString)=="function"&&!o(b=l.call(c)))return b;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(t,i,d){var o={};o[t("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(t,i,d){function o(ge,_e){for(var Ee=0,Ie=_e.length,Te=new(J(ge))(Ie);Ee<Ie;)Te[Ee]=_e[Ee++];return Te}function c(ge,_e){R(ge,_e,{get:function(){return ie(this)[_e]}})}function a(ge){return ge instanceof te||(ge=D(ge))=="ArrayBuffer"||ge=="SharedArrayBuffer"}function l(ge,_e){return ue(ge)&&typeof _e!="symbol"&&_e in ge&&String(+_e)==String(_e)}function b(ge,_e){return l(ge,_e=P(_e,!0))?_(2,ge[_e]):B(ge,_e)}function g(ge,_e,Ee){return!(l(ge,_e=P(_e,!0))&&k(Ee)&&L(Ee,"value"))||L(Ee,"get")||L(Ee,"set")||Ee.configurable||L(Ee,"writable")&&!Ee.writable||L(Ee,"enumerable")&&!Ee.enumerable?R(ge,_e,Ee):(ge[_e]=Ee.value,ge)}var u=t("../internals/export"),h=t("../internals/global"),p=t("../internals/descriptors"),m=t("../internals/typed-array-constructors-require-wrappers"),y=t("../internals/array-buffer-view-core"),f=t("../internals/array-buffer"),v=t("../internals/an-instance"),_=t("../internals/create-property-descriptor"),x=t("../internals/create-non-enumerable-property"),C=t("../internals/to-length"),M=t("../internals/to-index"),S=t("../internals/to-offset"),P=t("../internals/to-primitive"),L=t("../internals/has"),D=t("../internals/classof"),k=t("../internals/is-object"),I=t("../internals/object-create"),A=t("../internals/object-set-prototype-of"),F=t("../internals/object-get-own-property-names").f,N=t("../internals/typed-array-from"),U=t("../internals/array-iteration").forEach,W=t("../internals/set-species"),G=t("../internals/object-define-property"),z=t("../internals/object-get-own-property-descriptor"),Y=t("../internals/internal-state"),K=t("../internals/inherit-if-required"),ie=Y.get,E=Y.set,R=G.f,B=z.f,H=Math.round,Z=h.RangeError,te=f.ArrayBuffer,se=f.DataView,pe=y.NATIVE_ARRAY_BUFFER_VIEWS,oe=y.TYPED_ARRAY_TAG,he=y.TypedArray,de=y.TypedArrayPrototype,J=y.aTypedArrayConstructor,ue=y.isTypedArray,ye="BYTES_PER_ELEMENT",Ce="Wrong length";p?(pe||(z.f=b,G.f=g,c(de,"buffer"),c(de,"byteOffset"),c(de,"byteLength"),c(de,"length")),u({target:"Object",stat:!0,forced:!pe},{getOwnPropertyDescriptor:b,defineProperty:g}),i.exports=function(ce,_e,Ee){function Ie(xe,Q){R(xe,Q,{get:function(){var re=this,$=Q;return(re=ie(re)).view[Ge]($*Te+re.byteOffset,!0)},set:function(re){var $=this,ne=Q;$=ie($),Ee&&(re=(re=H(re))<0?0:255<re?255:255&re),$.view[ze](ne*Te+$.byteOffset,re,!0)},enumerable:!0})}var Te=ce.match(/\d+$/)[0]/8,Ke=ce+(Ee?"Clamped":"")+"Array",Ge="get"+ce,ze="set"+ce,He=h[Ke],qe=He,ce=qe&&qe.prototype,Ae={};pe?m&&(qe=_e(function(xe,Q,re,$){return v(xe,qe,Ke),K(k(Q)?a(Q)?$!==void 0?new He(Q,S(re,Te),$):re!==void 0?new He(Q,S(re,Te)):new He(Q):ue(Q)?o(qe,Q):N.call(qe,Q):new He(M(Q)),xe,qe)}),A&&A(qe,he),U(F(He),function(xe){xe in qe||x(qe,xe,He[xe])}),qe.prototype=ce):(qe=_e(function(xe,Q,re,$){v(xe,qe,Ke);var ne,ve,je=0,Le=0;if(k(Q)){if(!a(Q))return ue(Q)?o(qe,Q):N.call(qe,Q);var Ne=Q,Le=S(re,Te),re=Q.byteLength;if($===void 0){if(re%Te||(ne=re-Le)<0)throw Z(Ce)}else if(re<(ne=C($)*Te)+Le)throw Z(Ce);ve=ne/Te}else ve=M(Q),Ne=new te(ne=ve*Te);for(E(xe,{buffer:Ne,byteOffset:Le,byteLength:ne,length:ve,view:new se(Ne)});je<ve;)Ie(xe,je++)}),A&&A(qe,he),ce=qe.prototype=I(de)),ce.constructor!==qe&&x(ce,"constructor",qe),oe&&x(ce,oe,Ke),Ae[Ke]=qe,u({global:!0,forced:qe!=He,sham:!pe},Ae),ye in qe||x(qe,ye,Te),ye in ce||x(ce,ye,Te),W(Ke)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(l,i,d){var o=l("../internals/global"),c=l("../internals/fails"),a=l("../internals/check-correctness-of-iteration"),l=l("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,b=o.ArrayBuffer,g=o.Int8Array;i.exports=!l||!c(function(){g(1)})||!c(function(){new g(-1)})||!a(function(u){new g,new g(null),new g(1.5),new g(u)},!0)||c(function(){return new g(new b(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(t,i,d){var o=t("../internals/to-object"),c=t("../internals/to-length"),a=t("../internals/get-iterator-method"),l=t("../internals/is-array-iterator-method"),b=t("../internals/function-bind-context"),g=t("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(u){var h,p,m,y,f,v,_=o(u),x=arguments.length,C=1<x?arguments[1]:void 0,M=C!==void 0,S=a(_);if(S!=null&&!l(S))for(v=(f=S.call(_)).next,_=[];!(y=v.call(f)).done;)_.push(y.value);for(M&&2<x&&(C=b(C,arguments[2],2)),p=c(_.length),m=new(g(this))(p),h=0;h<p;h++)m[h]=M?C(_[h],h):_[h];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(t,i,d){var o=0,c=Math.random();i.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++o+c).toString(36)}},{}],147:[function(t,i,d){t=t("../internals/native-symbol"),i.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(t,i,d){t=t("../internals/well-known-symbol"),d.f=t},{"../internals/well-known-symbol":149}],149:[function(g,i,d){var o=g("../internals/global"),c=g("../internals/shared"),a=g("../internals/has"),l=g("../internals/uid"),b=g("../internals/native-symbol"),g=g("../internals/use-symbol-as-uid"),u=c("wks"),h=o.Symbol,p=g?h:h&&h.withoutSetter||l;i.exports=function(m){return a(u,m)||(b&&a(h,m)?u[m]=h[m]:u[m]=p("Symbol."+m)),u[m]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(t,i,d){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],151:[function(a,i,d){var o=a("../internals/export"),c=a("../internals/global"),b=a("../internals/array-buffer"),a=a("../internals/set-species"),l="ArrayBuffer",b=b[l];o({global:!0,forced:c[l]!==b},{ArrayBuffer:b}),a(l)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(_,i,d){var o=_("../internals/export"),c=_("../internals/fails"),a=_("../internals/is-array"),l=_("../internals/is-object"),b=_("../internals/to-object"),g=_("../internals/to-length"),u=_("../internals/create-property"),h=_("../internals/array-species-create"),p=_("../internals/array-method-has-species-support"),v=_("../internals/well-known-symbol"),_=_("../internals/engine-v8-version"),m=v("isConcatSpreadable"),y=9007199254740991,f="Maximum allowed index exceeded",v=51<=_||!c(function(){var x=[];return x[m]=!1,x.concat()[0]!==x}),_=p("concat");o({target:"Array",proto:!0,forced:!v||!_},{concat:function(x){for(var C,M,S,P,L,D=b(this),k=h(D,0),I=0,A=-1,F=arguments.length;A<F;A++)if(L=void 0,!l(P=S=A===-1?D:arguments[A])||((L=P[m])!==void 0?!L:!a(P))){if(y<=I)throw TypeError(f);u(k,I++,S)}else{if(M=g(S.length),y<I+M)throw TypeError(f);for(C=0;C<M;C++,I++)C in S&&u(k,I,S[C])}return k.length=I,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(a,i,d){var o=a("../internals/export"),c=a("../internals/array-copy-within"),a=a("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:c}),a("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(l,i,d){var o=l("../internals/export"),c=l("../internals/array-iteration").every,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("every"),l=l("every");o({target:"Array",proto:!0,forced:!a||!l},{every:function(b){return c(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(a,i,d){var o=a("../internals/export"),c=a("../internals/array-fill"),a=a("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:c}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(l,i,d){var o=l("../internals/export"),c=l("../internals/array-iteration").filter,a=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),a=a("filter"),l=l("filter");o({target:"Array",proto:!0,forced:!a||!l},{filter:function(b){return c(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(g,i,d){var o=g("../internals/export"),c=g("../internals/array-iteration").findIndex,a=g("../internals/add-to-unscopables"),g=g("../internals/array-method-uses-to-length"),l="findIndex",b=!0,g=g(l);l in[]&&Array(1)[l](function(){b=!1}),o({target:"Array",proto:!0,forced:b||!g},{findIndex:function(u){return c(this,u,1<arguments.length?arguments[1]:void 0)}}),a(l)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/flatten-into-array"),a=t("../internals/to-object"),l=t("../internals/to-length"),b=t("../internals/a-function"),g=t("../internals/array-species-create");o({target:"Array",proto:!0},{flatMap:function(u){var h,p=a(this),m=l(p.length);return b(u),(h=g(p,0)).length=c(h,p,p,m,0,1,u,1<arguments.length?arguments[1]:void 0),h}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/flatten-into-array"),a=t("../internals/to-object"),l=t("../internals/to-length"),b=t("../internals/to-integer"),g=t("../internals/array-species-create");o({target:"Array",proto:!0},{flat:function(){var u=arguments.length?arguments[0]:void 0,h=a(this),p=l(h.length),m=g(h,0);return m.length=c(m,h,h,p,0,u===void 0?1:b(u)),m}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(c,i,d){var o=c("../internals/export"),c=c("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/array-from");o({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/array-includes").includes,a=t("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(l){return c(this,l,1<arguments.length?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(g,i,d){var o=g("../internals/export"),c=g("../internals/array-includes").indexOf,b=g("../internals/array-method-is-strict"),g=g("../internals/array-method-uses-to-length"),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,b=b("indexOf"),g=g("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:l||!b||!g},{indexOf:function(u){return l?a.apply(this,arguments)||0:c(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(b,i,d){var o=b("../internals/to-indexed-object"),c=b("../internals/add-to-unscopables"),a=b("../internals/iterators"),l=b("../internals/internal-state"),b=b("../internals/define-iterator"),g="Array Iterator",u=l.set,h=l.getterFor(g);i.exports=b(Array,"Array",function(p,m){u(this,{type:g,target:o(p),index:0,kind:m})},function(){var p=h(this),m=p.target,y=p.kind,f=p.index++;return!m||f>=m.length?{value:p.target=void 0,done:!0}:y=="keys"?{value:f,done:!1}:y=="values"?{value:m[f],done:!1}:{value:[f,m[f]],done:!1}},"values"),a.Arguments=a.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(b,i,d){var o=b("../internals/export"),l=b("../internals/indexed-object"),c=b("../internals/to-indexed-object"),b=b("../internals/array-method-is-strict"),a=[].join,l=l!=Object,b=b("join",",");o({target:"Array",proto:!0,forced:l||!b},{join:function(g){return a.call(c(this),g===void 0?",":g)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(c,i,d){var o=c("../internals/export"),c=c("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(l,i,d){var o=l("../internals/export"),c=l("../internals/array-iteration").map,a=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),a=a("map"),l=l("map");o({target:"Array",proto:!0,forced:!a||!l},{map:function(b){return c(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(m,i,d){var o=m("../internals/export"),c=m("../internals/is-object"),a=m("../internals/is-array"),l=m("../internals/to-absolute-index"),b=m("../internals/to-length"),g=m("../internals/to-indexed-object"),u=m("../internals/create-property"),h=m("../internals/well-known-symbol"),p=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),p=p("slice"),m=m("slice",{ACCESSORS:!0,0:0,1:2}),y=h("species"),f=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!p||!m},{slice:function(_,x){var C,M,S,P=g(this),L=b(P.length),D=l(_,L),k=l(x===void 0?L:x,L);if(a(P)&&((C=typeof(C=P.constructor)=="function"&&(C===Array||a(C.prototype))||c(C)&&(C=C[y])===null?void 0:C)===Array||C===void 0))return f.call(P,D,k);for(M=new(C===void 0?Array:C)(v(k-D,0)),S=0;D<k;D++,S++)D in P&&u(M,S,P[D]);return M.length=S,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(l,i,d){var o=l("../internals/export"),c=l("../internals/array-iteration").some,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("some"),l=l("some");o({target:"Array",proto:!0,forced:!a||!l},{some:function(b){return c(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(p,i,d){var o=p("../internals/export"),c=p("../internals/to-absolute-index"),a=p("../internals/to-integer"),l=p("../internals/to-length"),b=p("../internals/to-object"),g=p("../internals/array-species-create"),u=p("../internals/create-property"),h=p("../internals/array-method-has-species-support"),p=p("../internals/array-method-uses-to-length"),h=h("splice"),p=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,y=Math.min;o({target:"Array",proto:!0,forced:!h||!p},{splice:function(I,v){var _,x,C,M,S,P,L=b(this),D=l(L.length),k=c(I,D),I=arguments.length;if(I===0?_=x=0:x=I===1?(_=0,D-k):(_=I-2,y(m(a(v),0),D-k)),9007199254740991<D+_-x)throw TypeError("Maximum allowed length exceeded");for(C=g(L,x),M=0;M<x;M++)(S=k+M)in L&&u(C,M,L[S]);if(_<(C.length=x)){for(M=k;M<D-x;M++)P=M+_,(S=M+x)in L?L[P]=L[S]:delete L[P];for(M=D;D-x+_<M;M--)delete L[M-1]}else if(x<_)for(M=D-x;k<M;M--)P=M+_-1,(S=M+x-1)in L?L[P]=L[S]:delete L[P];for(M=0;M<_;M++)L[M+k]=arguments[M+2];return L.length=D-x+_,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(t,i,d){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(t,i,d){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(c,i,d){var o=c("../internals/descriptors"),c=c("../internals/object-define-property").f,a=Function.prototype,l=a.toString,b=/^\s*function ([^ (]*)/;!o||"name"in a||c(a,"name",{configurable:!0,get:function(){try{return l.call(this).match(b)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(c,i,d){var o=c("../internals/collection"),c=c("../internals/collection-strong");i.exports=o("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(o,i,d){var o=o("../internals/export"),c=Math.hypot,a=Math.abs,l=Math.sqrt;o({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(b,g){for(var u,h,p=0,m=0,y=arguments.length,f=0;m<y;)f<(u=a(arguments[m++]))?(p=p*(h=f/u)*h+1,f=u):p+=0<u?(h=u/f)*h:u;return f===1/0?1/0:f*l(p)}})},{"../internals/export":50}],176:[function(o,i,d){var o=o("../internals/export"),c=Math.log,a=Math.LN2;o({target:"Math",stat:!0},{log2:function(l){return c(l)/a}})},{"../internals/export":50}],177:[function(t,i,d){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(t,i,d){function o(A){var F,N,U,W,G,z,Y,K=p(A,!1);if(typeof K=="string"&&2<K.length){if((A=(K=x(K)).charCodeAt(0))===43||A===45){if((F=K.charCodeAt(2))===88||F===120)return NaN}else if(A===48){switch(K.charCodeAt(1)){case 66:case 98:N=2,U=49;break;case 79:case 111:N=8,U=55;break;default:return+K}for(G=(W=K.slice(2)).length,z=0;z<G;z++)if((Y=W.charCodeAt(z))<48||U<Y)return NaN;return parseInt(W,N)}}return+K}var c=t("../internals/descriptors"),a=t("../internals/global"),l=t("../internals/is-forced"),b=t("../internals/redefine"),g=t("../internals/has"),u=t("../internals/classof-raw"),h=t("../internals/inherit-if-required"),p=t("../internals/to-primitive"),m=t("../internals/fails"),y=t("../internals/object-create"),f=t("../internals/object-get-own-property-names").f,v=t("../internals/object-get-own-property-descriptor").f,_=t("../internals/object-define-property").f,x=t("../internals/string-trim").trim,C="Number",M=a[C],S=M.prototype,P=u(y(S))==C;if(l(C,!M(" 0o1")||!M("0b1")||M("+0x1"))){for(var L,D=function(F){var F=arguments.length<1?0:F,N=this;return N instanceof D&&(P?m(function(){S.valueOf.call(N)}):u(N)!=C)?h(new M(o(F)),N,D):o(F)},k=c?f(M):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;k.length>I;I++)g(M,L=k[I])&&!g(D,L)&&_(D,L,v(M,L));(D.prototype=S).constructor=D,b(a,C,D)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(t,i,d){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(g,i,d){function o(p,m,y){return m===0?y:m%2==1?o(p,m-1,y*p):o(p*p,m/2,y)}var c=g("../internals/export"),a=g("../internals/to-integer"),l=g("../internals/this-number-value"),b=g("../internals/string-repeat"),g=g("../internals/fails"),u=1 .toFixed,h=Math.floor;c({target:"Number",proto:!0,forced:u&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!g(function(){u.call({})})},{toFixed:function(C){function m(L,D){for(var k=-1,I=D;++k<6;)I+=L*M[k],M[k]=I%1e7,I=h(I/1e7)}function y(L){for(var D=6,k=0;0<=--D;)k+=M[D],M[D]=h(k/L),k=k%L*1e7}function f(){for(var L,D=6,k="";0<=--D;)k===""&&D!==0&&M[D]===0||(L=String(M[D]),k=k===""?L:k+b.call("0",7-L.length)+L);return k}var v,_,x=l(this),C=a(C),M=[0,0,0,0,0,0],S="",P="0";if(C<0||20<C)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(S="-",x=-x),1e-21<x)if(x=(v=function(L){for(var D=0,k=L;4096<=k;)D+=12,k/=4096;for(;2<=k;)D+=1,k/=2;return D}(x*o(2,69,1))-69)<0?x*o(2,-v,1):x/o(2,v,1),x*=4503599627370496,0<(v=52-v)){for(m(0,x),_=C;7<=_;)m(1e7,0),_-=7;for(m(o(10,_,1),0),_=v-1;23<=_;)y(1<<23),_-=23;y(1<<_),m(1,1),y(2),P=f()}else m(0,x),m(1<<-v,0),P=f()+b.call("0",C);return P=0<C?S+((x=P.length)<=C?"0."+b.call("0",C-x)+P:P.slice(0,x-C)+"."+P.slice(x-C)):S+P}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(c,i,d){var o=c("../internals/export"),c=c("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/iterate"),a=t("../internals/create-property");o({target:"Object",stat:!0},{fromEntries:function(l){var b={};return c(l,function(g,u){a(b,g,u)},void 0,!0),b}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(l,i,d){var o=l("../internals/export"),b=l("../internals/fails"),c=l("../internals/to-indexed-object"),a=l("../internals/object-get-own-property-descriptor").f,l=l("../internals/descriptors"),b=b(function(){a(1)});o({target:"Object",stat:!0,forced:!l||b,sham:!l},{getOwnPropertyDescriptor:function(g,u){return a(c(g),u)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(a,i,d){var o=a("../internals/export"),c=a("../internals/fails"),a=a("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(b,i,d){var o=b("../internals/export"),c=b("../internals/fails"),a=b("../internals/to-object"),l=b("../internals/object-get-prototype-of"),b=b("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:c(function(){l(1)}),sham:!b},{getPrototypeOf:function(g){return l(a(g))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/to-object"),a=t("../internals/object-keys");o({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(l){return a(c(l))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(a,i,d){var o=a("../internals/to-string-tag-support"),c=a("../internals/redefine"),a=a("../internals/object-to-string");o||c(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(Ee,i,d){var o,c,a,l,b=Ee("../internals/export"),g=Ee("../internals/is-pure"),u=Ee("../internals/global"),h=Ee("../internals/get-built-in"),p=Ee("../internals/native-promise-constructor"),m=Ee("../internals/redefine"),y=Ee("../internals/redefine-all"),f=Ee("../internals/set-to-string-tag"),v=Ee("../internals/set-species"),_=Ee("../internals/is-object"),x=Ee("../internals/a-function"),C=Ee("../internals/an-instance"),M=Ee("../internals/classof-raw"),S=Ee("../internals/inspect-source"),P=Ee("../internals/iterate"),L=Ee("../internals/check-correctness-of-iteration"),D=Ee("../internals/species-constructor"),k=Ee("../internals/task").set,I=Ee("../internals/microtask"),A=Ee("../internals/promise-resolve"),F=Ee("../internals/host-report-errors"),N=Ee("../internals/new-promise-capability"),U=Ee("../internals/perform"),W=Ee("../internals/internal-state"),G=Ee("../internals/is-forced"),Ie=Ee("../internals/well-known-symbol"),z=Ee("../internals/engine-v8-version"),Y=Ie("species"),K="Promise",ie=W.get,E=W.set,R=W.getterFor(K),B=p,H=u.TypeError,Z=u.document,te=u.process,se=h("fetch"),pe=N.f,oe=pe,he=M(te)=="process",de=!!(Z&&Z.createEvent&&u.dispatchEvent),J="unhandledrejection",ue="rejectionhandled",ye=1,Ce=2,ge=1,_e=2,Ee=G(K,function(){var Ae,xe;return S(B)===String(B)&&(z===66||!he&&typeof PromiseRejectionEvent!="function")?!0:!(!g||B.prototype.finally)||!(51<=z&&/native code/.test(B))&&(xe=function(Q){Q(function(){},function(){})},((Ae=B.resolve(1)).constructor={})[Y]=xe,!(Ae.then(function(){})instanceof xe))}),Ie=Ee||!L(function(Ae){B.all(Ae).catch(function(){})}),Te=function(Ae){var xe;return!(!_(Ae)||typeof(xe=Ae.then)!="function")&&xe},Ke=function(Ae,xe,Q){var re;xe.notified||(xe.notified=!0,re=xe.reactions,I(function(){for(var $,ne,ve=xe.value,je=xe.state==ye,Le=0;re.length>Le;){var Ne,Be,Ue,Xe=re[Le++],ct=je?Xe.ok:Xe.fail,ot=Xe.resolve,Je=Xe.reject,lt=Xe.domain;try{ct?(je||(xe.rejection===_e&&function(st,zt){k.call(u,function(){he?te.emit("rejectionHandled",st):Ge(ue,st,zt.value)})}(Ae,xe),xe.rejection=ge),ct===!0?Ne=ve:(lt&&lt.enter(),Ne=ct(ve),lt&&(lt.exit(),Ue=!0)),Ne===Xe.promise?Je(H("Promise-chain cycle")):(Be=Te(Ne))?Be.call(Ne,ot,Je):ot(Ne)):Je(ve)}catch(st){lt&&!Ue&&lt.exit(),Je(st)}}xe.reactions=[],xe.notified=!1,Q&&!xe.rejection&&($=Ae,ne=xe,k.call(u,function(){var st=ne.value,zt=ze(ne);if(zt&&(zt=U(function(){he?te.emit("unhandledRejection",st,$):Ge(J,$,st)}),ne.rejection=he||ze(ne)?_e:ge,zt.error))throw zt.value}))}))},Ge=function(Ae,xe,Q){var re;de?((re=Z.createEvent("Event")).promise=xe,re.reason=Q,re.initEvent(Ae,!1,!0),u.dispatchEvent(re)):re={promise:xe,reason:Q},(xe=u["on"+Ae])?xe(re):Ae===J&&F("Unhandled promise rejection",Q)},ze=function(Ae){return Ae.rejection!==ge&&!Ae.parent},He=function(Ae,xe,Q,re){return function($){Ae(xe,Q,$,re)}},qe=function(Ae,xe,Q,re){xe.done||(xe.done=!0,(xe=re||xe).value=Q,xe.state=Ce,Ke(Ae,xe,!0))},ce=function(Ae,xe,Q,re){if(!xe.done){xe.done=!0,re&&(xe=re);try{if(Ae===Q)throw H("Promise can't be resolved itself");var $=Te(Q);$?I(function(){var ne={done:!1};try{$.call(Q,He(ce,Ae,ne,xe),He(qe,Ae,ne,xe))}catch(ve){qe(Ae,ne,ve,xe)}}):(xe.value=Q,xe.state=ye,Ke(Ae,xe,!1))}catch(ne){qe(Ae,{done:!1},ne,xe)}}};Ee&&(B=function(Ae){C(this,B,K),x(Ae),o.call(this);var xe=ie(this);try{Ae(He(ce,this,xe),He(qe,this,xe))}catch(Q){qe(this,xe,Q)}},(o=function(Ae){E(this,{type:K,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(B.prototype,{then:function(Ae,xe){var Q=R(this),re=pe(D(this,B));return re.ok=typeof Ae!="function"||Ae,re.fail=typeof xe=="function"&&xe,re.domain=he?te.domain:void 0,Q.parent=!0,Q.reactions.push(re),Q.state!=0&&Ke(this,Q,!1),re.promise},catch:function(Ae){return this.then(void 0,Ae)}}),c=function(){var Ae=new o,xe=ie(Ae);this.promise=Ae,this.resolve=He(ce,Ae,xe),this.reject=He(qe,Ae,xe)},N.f=pe=function(Ae){return Ae===B||Ae===a?new c:oe(Ae)},g||typeof p!="function"||(l=p.prototype.then,m(p.prototype,"then",function(Ae,xe){var Q=this;return new B(function(re,$){l.call(Q,re,$)}).then(Ae,xe)},{unsafe:!0}),typeof se=="function"&&b({global:!0,enumerable:!0,forced:!0},{fetch:function(Ae){return A(B,se.apply(u,arguments))}}))),b({global:!0,wrap:!0,forced:Ee},{Promise:B}),f(B,K,!1,!0),v(K),a=h(K),b({target:K,stat:!0,forced:Ee},{reject:function(Ae){var xe=pe(this);return xe.reject.call(void 0,Ae),xe.promise}}),b({target:K,stat:!0,forced:g||Ee},{resolve:function(Ae){return A(g&&this===a?B:this,Ae)}}),b({target:K,stat:!0,forced:Ie},{all:function(Ae){var xe=this,Q=pe(xe),re=Q.resolve,$=Q.reject,ne=U(function(){var ve=x(xe.resolve),je=[],Le=0,Ne=1;P(Ae,function(Be){var Ue=Le++,Xe=!1;je.push(void 0),Ne++,ve.call(xe,Be).then(function(ct){Xe||(Xe=!0,je[Ue]=ct,--Ne||re(je))},$)}),--Ne||re(je)});return ne.error&&$(ne.value),Q.promise},race:function(Ae){var xe=this,Q=pe(xe),re=Q.reject,$=U(function(){var ne=x(xe.resolve);P(Ae,function(ve){ne.call(xe,ve).then(Q.resolve,re)})});return $.error&&re($.value),Q.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(u,i,d){var o=u("../internals/export"),y=u("../internals/get-built-in"),c=u("../internals/a-function"),a=u("../internals/an-object"),l=u("../internals/is-object"),b=u("../internals/object-create"),g=u("../internals/function-bind"),u=u("../internals/fails"),h=y("Reflect","construct"),p=u(function(){function f(){}return!(h(function(){},[],f)instanceof f)}),m=!u(function(){h(function(){})}),y=p||m;o({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(f,v){c(f),a(v);var _=arguments.length<3?f:c(arguments[2]);if(m&&!p)return h(f,v,_);if(f==_){switch(v.length){case 0:return new f;case 1:return new f(v[0]);case 2:return new f(v[0],v[1]);case 3:return new f(v[0],v[1],v[2]);case 4:return new f(v[0],v[1],v[2],v[3])}var x=[null];return x.push.apply(x,v),new(g.apply(f,x))}return x=_.prototype,_=b(l(x)?x:Object.prototype),x=Function.apply.call(f,_,v),l(x)?x:_}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/is-object"),a=t("../internals/an-object"),l=t("../internals/has"),b=t("../internals/object-get-own-property-descriptor"),g=t("../internals/object-get-prototype-of");o({target:"Reflect",stat:!0},{get:function u(h,p){var m,y=arguments.length<3?h:arguments[2];return a(h)===y?h[p]:(m=b.f(h,p))?l(m,"value")?m.value:m.get===void 0?void 0:m.get.call(y):c(m=g(h))?u(m,p,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(t,i,d){var o=t("../internals/descriptors"),c=t("../internals/global"),a=t("../internals/is-forced"),l=t("../internals/inherit-if-required"),b=t("../internals/object-define-property").f,g=t("../internals/object-get-own-property-names").f,u=t("../internals/is-regexp"),h=t("../internals/regexp-flags"),p=t("../internals/regexp-sticky-helpers"),m=t("../internals/redefine"),y=t("../internals/fails"),f=t("../internals/internal-state").set,v=t("../internals/set-species"),_=t("../internals/well-known-symbol")("match"),x=c.RegExp,C=x.prototype,M=/a/g,S=/a/g,P=new x(M)!==M,L=p.UNSUPPORTED_Y;if(o&&a("RegExp",!P||L||y(function(){return S[_]=!1,x(M)!=M||x(S)==S||x(M,"i")!="/a/i"}))){for(var D=function(A,F){var N,U=this instanceof D,W=u(A),G=F===void 0;return!U&&W&&A.constructor===D&&G?A:(P?W&&!G&&(A=A.source):A instanceof D&&(G&&(F=h.call(A)),A=A.source),L&&(N=!!F&&-1<F.indexOf("y"))&&(F=F.replace(/y/g,"")),W=l(P?new x(A,F):x(A,F),U?this:C,D),L&&N&&f(W,{sticky:N}),W)},k=g(x),I=0;k.length>I;)(function(A){A in D||b(D,A,{configurable:!0,get:function(){return x[A]},set:function(F){x[A]=F}})})(k[I++]);(C.constructor=D).prototype=C,m(c,"RegExp",D)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(c,i,d){var o=c("../internals/export"),c=c("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(l,i,d){var o=l("../internals/redefine"),c=l("../internals/an-object"),u=l("../internals/fails"),a=l("../internals/regexp-flags"),l="toString",b=RegExp.prototype,g=b[l],u=u(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),h=g.name!=l;(u||h)&&o(RegExp.prototype,l,function(){var p=c(this),m=String(p.source),y=p.flags;return"/"+m+"/"+String(y===void 0&&p instanceof RegExp&&!("flags"in b)?a.call(p):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(c,i,d){var o=c("../internals/collection"),c=c("../internals/collection-strong");i.exports=o("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(g,i,d){var o=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,a=g("../internals/to-length"),l=g("../internals/not-a-regexp"),b=g("../internals/require-object-coercible"),p=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),u="".endsWith,h=Math.min,p=p("endsWith");o({target:"String",proto:!0,forced:!!(g||p||!(o=c(String.prototype,"endsWith"))||o.writable)&&!p},{endsWith:function(m){var y=String(b(this)),f=(l(m),1<arguments.length?arguments[1]:void 0),v=a(y.length),f=f===void 0?v:h(a(f),v),v=String(m);return u?u.call(y,v,f):y.slice(f-v.length,f)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/not-a-regexp"),a=t("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(l){return!!~String(a(this)).indexOf(c(l),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(a,i,d){var o=a("../internals/string-multibyte").charAt,c=a("../internals/internal-state"),a=a("../internals/define-iterator"),l="String Iterator",b=c.set,g=c.getterFor(l);a(String,"String",function(u){b(this,{type:l,string:String(u),index:0})},function(){var u=g(this),h=u.string,p=u.index;return p>=h.length?{value:void 0,done:!0}:(h=o(h,p),u.index+=h.length,{value:h,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(t,i,d){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),a=t("../internals/to-length"),l=t("../internals/require-object-coercible"),b=t("../internals/advance-string-index"),g=t("../internals/regexp-exec-abstract");o("match",1,function(u,h,p){return[function(m){var y=l(this),f=m==null?void 0:m[u];return f!==void 0?f.call(m,y):new RegExp(m)[u](String(y))},function(m){var y=p(h,m,this);if(y.done)return y.value;var f=c(m),v=String(this);if(!f.global)return g(f,v);for(var _=f.unicode,x=[],C=f.lastIndex=0;(M=g(f,v))!==null;){var M=String(M[0]);(x[C]=M)===""&&(f.lastIndex=b(v,a(f.lastIndex),_)),C++}return C===0?null:x}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/string-pad").start;o({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(a){return c(this,a,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(t,i,d){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(t,i,d){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),a=t("../internals/to-object"),l=t("../internals/to-length"),b=t("../internals/to-integer"),g=t("../internals/require-object-coercible"),u=t("../internals/advance-string-index"),h=t("../internals/regexp-exec-abstract"),p=Math.max,m=Math.min,y=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;o("replace",2,function(_,x,C,M){var S=M.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,P=M.REPLACE_KEEPS_$0,L=S?"$":"$0";return[function(D,k){var I=g(this),A=D==null?void 0:D[_];return A!==void 0?A.call(D,I,k):x.call(String(I),D,k)},function(D,k){if(!S&&P||typeof k=="string"&&k.indexOf(L)===-1){var I=C(x,D,this,k);if(I.done)return I.value}for(var A,F=c(D),N=String(this),U=typeof k=="function",W=(U||(k=String(k)),F.global),G=(W&&(A=F.unicode,F.lastIndex=0),[]);(E=h(F,N))!==null&&(G.push(E),W);)String(E[0])===""&&(F.lastIndex=u(N,l(F.lastIndex),A));for(var z,Y="",K=0,ie=0;ie<G.length;ie++){for(var E=G[ie],R=String(E[0]),B=p(m(b(E.index),N.length),0),H=[],Z=1;Z<E.length;Z++)H.push((z=E[Z])===void 0?z:String(z));var te=E.groups,se=U?(se=[R].concat(H,B,N),te!==void 0&&se.push(te),String(k.apply(void 0,se))):function(pe,oe,he,de,J,ue){var ye=he+pe.length,Ce=de.length,ge=v;return J!==void 0&&(J=a(J),ge=f),x.call(ue,ge,function(_e,Ee){var Ie;switch(Ee.charAt(0)){case"$":return"$";case"&":return pe;case"`":return oe.slice(0,he);case"'":return oe.slice(ye);case"<":Ie=J[Ee.slice(1,-1)];break;default:var Te,Ke=+Ee;if(Ke==0)return _e;if(Ce<Ke)return(Te=y(Ke/10))!==0&&Te<=Ce?de[Te-1]===void 0?Ee.charAt(1):de[Te-1]+Ee.charAt(1):_e;Ie=de[Ke-1]}return Ie===void 0?"":Ie})}(R,N,B,H,te,k);K<=B&&(Y+=N.slice(K,B)+se,K=B+R.length)}return Y+N.slice(K)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(t,i,d){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),a=t("../internals/require-object-coercible"),l=t("../internals/same-value"),b=t("../internals/regexp-exec-abstract");o("search",1,function(g,u,h){return[function(p){var m=a(this),y=p==null?void 0:p[g];return y!==void 0?y.call(p,m):new RegExp(p)[g](String(m))},function(p){var m,y=h(u,p,this);return y.done?y.value:(y=c(p),p=String(this),m=y.lastIndex,l(m,0)||(y.lastIndex=0),p=b(y,p),l(y.lastIndex,m)||(y.lastIndex=m),p===null?-1:p.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(m,i,d){var o=m("../internals/fix-regexp-well-known-symbol-logic"),c=m("../internals/is-regexp"),a=m("../internals/an-object"),l=m("../internals/require-object-coercible"),b=m("../internals/species-constructor"),g=m("../internals/advance-string-index"),u=m("../internals/to-length"),h=m("../internals/regexp-exec-abstract"),p=m("../internals/regexp-exec"),m=m("../internals/fails"),y=[].push,f=Math.min,v=4294967295,_=!m(function(){return!RegExp(v,"y")});o("split",2,function(x,C,M){var S="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(P,L){var D=String(l(this)),k=L===void 0?v:L>>>0;if(k==0)return[];if(P===void 0)return[D];if(!c(P))return C.call(D,P,k);for(var I,A,F,N=[],L=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(P.sticky?"y":""),U=0,W=new RegExp(P.source,L+"g");(I=p.call(W,D))&&!(U<(A=W.lastIndex)&&(N.push(D.slice(U,I.index)),1<I.length&&I.index<D.length&&y.apply(N,I.slice(1)),F=I[0].length,U=A,N.length>=k));)W.lastIndex===I.index&&W.lastIndex++;return U===D.length?!F&&W.test("")||N.push(""):N.push(D.slice(U)),N.length>k?N.slice(0,k):N}:"0".split(void 0,0).length?function(P,L){return P===void 0&&L===0?[]:C.call(this,P,L)}:C;return[function(P,L){var D=l(this),k=P==null?void 0:P[x];return k!==void 0?k.call(P,D,L):S.call(String(D),P,L)},function(I,L){var D=M(S,I,this,L,S!==C);if(D.done)return D.value;var D=a(I),k=String(this),I=b(D,RegExp),A=D.unicode,F=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(_?"y":"g"),N=new I(_?D:"^(?:"+D.source+")",F),U=L===void 0?v:L>>>0;if(U==0)return[];if(k.length===0)return h(N,k)===null?[k]:[];for(var W=0,G=0,z=[];G<k.length;){N.lastIndex=_?G:0;var Y,K=h(N,_?k:k.slice(G));if(K===null||(Y=f(u(N.lastIndex+(_?0:G)),k.length))===W)G=g(k,G,A);else{if(z.push(k.slice(W,G)),z.length===U)return z;for(var ie=1;ie<=K.length-1;ie++)if(z.push(K[ie]),z.length===U)return z;G=W=Y}}return z.push(k.slice(W)),z}]},!_)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(g,i,d){var o=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,a=g("../internals/to-length"),l=g("../internals/not-a-regexp"),b=g("../internals/require-object-coercible"),p=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),u="".startsWith,h=Math.min,p=p("startsWith");o({target:"String",proto:!0,forced:!!(g||p||!(o=c(String.prototype,"startsWith"))||o.writable)&&!p},{startsWith:function(v){var y=String(b(this)),f=(l(v),a(h(1<arguments.length?arguments[1]:void 0,y.length))),v=String(v);return u?u.call(y,v,f):y.slice(f,f+v.length)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/create-html");o({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(t,i,d){var o=t("../internals/export"),c=t("../internals/string-trim").trim;o({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(f,i,d){var o,c,a,l,b,g=f("../internals/export"),u=f("../internals/descriptors"),h=f("../internals/global"),p=f("../internals/has"),m=f("../internals/is-object"),y=f("../internals/object-define-property").f,f=f("../internals/copy-constructor-properties"),v=h.Symbol;!u||typeof v!="function"||"description"in v.prototype&&v().description===void 0||(o={},f(c=function(){var _=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof c?new v(_):_===void 0?v():v(_);return _===""&&(o[x]=!0),x},v),(h=c.prototype=v.prototype).constructor=c,a=h.toString,l=String(v("test"))=="Symbol(test)",b=/^Symbol\((.*)\)[^)]+$/,y(h,"description",{configurable:!0,get:function(){var _=m(this)?this.valueOf():this,x=a.call(_);return p(o,_)?"":(_=l?x.slice(7,-1):x.replace(b,"$1"))===""?void 0:_}}),g({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(t,i,d){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(oe,i,d){function o($,ne){var ve=Ie[$]=D(ue[pe]);return he(ve,{type:se,tag:$,description:ne}),p||(ve.description=ne),ve}function c($,je){C($);var ve=S(je),je=k(ve).concat(re(ve));return Z(je,function(Le){p&&!Q.call(ve,Le)||xe($,Le,ve[Le])}),$}function a(je,Le){var ve,je=S(je),Le=P(Le,!0);if(je!==J||!v(Ie,Le)||v(Te,Le))return!(ve=Ce(je,Le))||!v(Ie,Le)||v(je,te)&&je[te][Le]||(ve.enumerable=!0),ve}function l(ne){var ne=_e(S(ne)),ve=[];return Z(ne,function(je){v(Ie,je)||v(K,je)||ve.push(je)}),ve}var b=oe("../internals/export"),g=oe("../internals/global"),u=oe("../internals/get-built-in"),h=oe("../internals/is-pure"),p=oe("../internals/descriptors"),m=oe("../internals/native-symbol"),y=oe("../internals/use-symbol-as-uid"),f=oe("../internals/fails"),v=oe("../internals/has"),_=oe("../internals/is-array"),x=oe("../internals/is-object"),C=oe("../internals/an-object"),M=oe("../internals/to-object"),S=oe("../internals/to-indexed-object"),P=oe("../internals/to-primitive"),L=oe("../internals/create-property-descriptor"),D=oe("../internals/object-create"),k=oe("../internals/object-keys"),I=oe("../internals/object-get-own-property-names"),A=oe("../internals/object-get-own-property-names-external"),F=oe("../internals/object-get-own-property-symbols"),N=oe("../internals/object-get-own-property-descriptor"),U=oe("../internals/object-define-property"),W=oe("../internals/object-property-is-enumerable"),G=oe("../internals/create-non-enumerable-property"),z=oe("../internals/redefine"),Y=oe("../internals/shared"),ze=oe("../internals/shared-key"),K=oe("../internals/hidden-keys"),ie=oe("../internals/uid"),E=oe("../internals/well-known-symbol"),R=oe("../internals/well-known-symbol-wrapped"),B=oe("../internals/define-well-known-symbol"),H=oe("../internals/set-to-string-tag"),He=oe("../internals/internal-state"),Z=oe("../internals/array-iteration").forEach,te=ze("hidden"),se="Symbol",pe="prototype",oe=E("toPrimitive"),he=He.set,de=He.getterFor(se),J=Object[pe],ue=g.Symbol,ye=u("JSON","stringify"),Ce=N.f,ge=U.f,_e=A.f,Ee=W.f,Ie=Y("symbols"),Te=Y("op-symbols"),Ke=Y("string-to-symbol-registry"),Ge=Y("symbol-to-string-registry"),ze=Y("wks"),He=g.QObject,qe=!He||!He[pe]||!He[pe].findChild,ce=p&&f(function(){return D(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a!=7})?function($,ne,ve){var je=Ce(J,ne);je&&delete J[ne],ge($,ne,ve),je&&$!==J&&ge(J,ne,je)}:ge,Ae=y?function($){return typeof $=="symbol"}:function($){return Object($)instanceof ue},xe=function($,ne,ve){return $===J&&xe(Te,ne,ve),C($),ne=P(ne,!0),C(ve),(v(Ie,ne)?(ve.enumerable?(v($,te)&&$[te][ne]&&($[te][ne]=!1),ve=D(ve,{enumerable:L(0,!1)})):(v($,te)||ge($,te,L(1,{})),$[te][ne]=!0),ce):ge)($,ne,ve)},Q=function(ne){var ne=P(ne,!0),ve=Ee.call(this,ne);return!(this===J&&v(Ie,ne)&&!v(Te,ne))&&(!(ve||!v(this,ne)||!v(Ie,ne)||v(this,te)&&this[te][ne])||ve)},re=function(ve){var ne=ve===J,ve=_e(ne?Te:S(ve)),je=[];return Z(ve,function(Le){!v(Ie,Le)||ne&&!v(J,Le)||je.push(Ie[Le])}),je};m||(z((ue=function(){if(this instanceof ue)throw TypeError("Symbol is not a constructor");var $=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ne=ie($),ve=function(je){this===J&&ve.call(Te,je),v(this,te)&&v(this[te],ne)&&(this[te][ne]=!1),ce(this,ne,L(1,je))};return p&&qe&&ce(J,ne,{configurable:!0,set:ve}),o(ne,$)})[pe],"toString",function(){return de(this).tag}),z(ue,"withoutSetter",function($){return o(ie($),$)}),W.f=Q,U.f=xe,N.f=a,I.f=A.f=l,F.f=re,R.f=function($){return o(E($),$)},p&&(ge(ue[pe],"description",{configurable:!0,get:function(){return de(this).description}}),h||z(J,"propertyIsEnumerable",Q,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:ue}),Z(k(ze),function($){B($)}),b({target:se,stat:!0,forced:!m},{for:function(ve){var ne,ve=String(ve);return v(Ke,ve)?Ke[ve]:(ne=ue(ve),Ke[ve]=ne,Ge[ne]=ve,ne)},keyFor:function($){if(!Ae($))throw TypeError($+" is not a symbol");if(v(Ge,$))return Ge[$]},useSetter:function(){qe=!0},useSimple:function(){qe=!1}}),b({target:"Object",stat:!0,forced:!m,sham:!p},{create:function($,ne){return ne===void 0?D($):c(D($),ne)},defineProperty:xe,defineProperties:c,getOwnPropertyDescriptor:a}),b({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:l,getOwnPropertySymbols:re}),b({target:"Object",stat:!0,forced:f(function(){F.f(1)})},{getOwnPropertySymbols:function($){return F.f(M($))}}),ye&&b({target:"JSON",stat:!0,forced:!m||f(function(){var $=ue();return ye([$])!="[null]"||ye({a:$})!="{}"||ye(Object($))!="{}"})},{stringify:function($,ne,ve){for(var je,Le=[$],Ne=1;Ne<arguments.length;)Le.push(arguments[Ne++]);if((x(je=ne)||$!==void 0)&&!Ae($))return _(ne)||(ne=function(Be,Ue){if(typeof je=="function"&&(Ue=je.call(this,Be,Ue)),!Ae(Ue))return Ue}),Le[1]=ne,ye.apply(null,Le)}}),ue[pe][oe]||G(ue[pe],oe,ue[pe].valueOf),H(ue,se),K[te]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-copy-within"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(l,b){return c.call(a(this),l,b,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").every,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-fill"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(l){return c.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").filter,a=t("../internals/species-constructor"),l=o.aTypedArray,b=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(g){for(var u=c(l(this),g,1<arguments.length?arguments[1]:void 0),g=a(this,this.constructor),h=0,p=u.length,m=new(b(g))(p);h<p;)m[h]=u[h++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").findIndex,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").find,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(t,i,d){t("../internals/typed-array-constructor")("Float32",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],217:[function(t,i,d){t("../internals/typed-array-constructor")("Float64",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],218:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").forEach,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(l){c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").includes,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").indexOf,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(t,i,d){t("../internals/typed-array-constructor")("Int16",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],222:[function(t,i,d){t("../internals/typed-array-constructor")("Int32",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],223:[function(c,i,d){function o(){return a.call(g(this))}var p=c("../internals/global"),h=c("../internals/array-buffer-view-core"),u=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),p=p.Uint8Array,a=u.values,l=u.keys,b=u.entries,g=h.aTypedArray,u=h.exportTypedArrayMethod,h=p&&p.prototype[c],p=!!h&&(h.name=="values"||h.name==null);u("entries",function(){return b.call(g(this))}),u("keys",function(){return l.call(g(this))}),u("values",o,!p),u(c,o,!p)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(c,i,d){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,a=[].join;c("join",function(l){return a.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-last-index-of"),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(l){return c.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").map,a=t("../internals/species-constructor"),l=o.aTypedArray,b=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(g){return c(l(this),g,1<arguments.length?arguments[1]:void 0,function(u,h){return new(b(a(u,u.constructor)))(h)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").right,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(l){return c(a(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").left,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(l){return c(a(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(c,i,d){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,a=Math.floor;c("reverse",function(){for(var l,b=o(this).length,g=a(b/2),u=0;u<g;)l=this[u],this[u++]=this[--b],this[b]=l;return this})},{"../internals/array-buffer-view-core":12}],230:[function(b,i,d){var o=b("../internals/array-buffer-view-core"),c=b("../internals/to-length"),a=b("../internals/to-offset"),l=b("../internals/to-object"),b=b("../internals/fails"),g=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(u){g(this);var h=a(1<arguments.length?arguments[1]:void 0,1),p=this.length,m=l(u),y=c(m.length),f=0;if(p<y+h)throw RangeError("Wrong length");for(;f<y;)this[h+f]=m[f++]},b(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(c,i,d){var b=c("../internals/array-buffer-view-core"),o=c("../internals/species-constructor"),c=c("../internals/fails"),a=b.aTypedArray,l=b.aTypedArrayConstructor,b=b.exportTypedArrayMethod,g=[].slice;b("slice",function(u,h){for(var p=g.call(a(this),u,h),u=o(this,this.constructor),m=0,y=p.length,f=new(l(u))(y);m<y;)f[m]=p[m++];return f},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").some,a=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(l){return c(a(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(c,i,d){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,a=[].sort;c("sort",function(l){return a.call(o(this),l)})},{"../internals/array-buffer-view-core":12}],234:[function(t,i,d){var o=t("../internals/array-buffer-view-core"),c=t("../internals/to-length"),a=t("../internals/to-absolute-index"),l=t("../internals/species-constructor"),b=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(m,u){var h=b(this),p=h.length,m=a(m,p);return new(l(h,h.constructor))(h.buffer,h.byteOffset+m*h.BYTES_PER_ELEMENT,c((u===void 0?p:a(u,p))-m))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(c,i,d){var b=c("../internals/global"),o=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),a=b.Int8Array,l=o.aTypedArray,b=o.exportTypedArrayMethod,g=[].toLocaleString,u=[].slice,h=!!a&&c(function(){g.call(new a(1))});b("toLocaleString",function(){return g.apply(h?u.call(l(this)):l(this),arguments)},c(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!c(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(c,i,d){var o=c("../internals/array-buffer-view-core").exportTypedArrayMethod,b=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},a=[].toString,l=[].join,b=(b(function(){a.call({})})&&(a=function(){return l.call(this)}),c.toString!=a);o("toString",a,b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(t,i,d){t("../internals/typed-array-constructor")("Uint16",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],238:[function(t,i,d){t("../internals/typed-array-constructor")("Uint32",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],239:[function(t,i,d){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,a,l){return o(this,c,a,l)}})},{"../internals/typed-array-constructor":143}],240:[function(t,i,d){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,a,l){return o(this,c,a,l)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(v,C,d){function o(M){return function(){return M(this,arguments.length?arguments[0]:void 0)}}var c,a,l,b,g,_=v("../internals/global"),u=v("../internals/redefine-all"),h=v("../internals/internal-metadata"),p=v("../internals/collection"),m=v("../internals/collection-weak"),y=v("../internals/is-object"),f=v("../internals/internal-state").enforce,v=v("../internals/native-weak-map"),_=!_.ActiveXObject&&"ActiveXObject"in _,x=Object.isExtensible,C=C.exports=p("WeakMap",o,m);v&&_&&(c=m.getConstructor(o,"WeakMap",!0),h.REQUIRED=!0,p=C.prototype,a=p.delete,l=p.has,b=p.get,g=p.set,u(p,{delete:function(M){var S;return y(M)&&!x(M)?((S=f(this)).frozen||(S.frozen=new c),a.call(this,M)||S.frozen.delete(M)):a.call(this,M)},has:function(M){var S;return y(M)&&!x(M)?((S=f(this)).frozen||(S.frozen=new c),l.call(this,M)||S.frozen.has(M)):l.call(this,M)},get:function(M){var S;return!y(M)||x(M)||((S=f(this)).frozen||(S.frozen=new c),l.call(this,M))?b.call(this,M):S.frozen.get(M)},set:function(M,S){var P;return!y(M)||x(M)||((P=f(this)).frozen||(P.frozen=new c),l.call(this,M))?g.call(this,M,S):P.frozen.set(M,S),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(t,i,d){var o,c=t("../internals/global"),a=t("../internals/dom-iterables"),l=t("../internals/array-for-each"),b=t("../internals/create-non-enumerable-property");for(o in a){var g=c[o],g=g&&g.prototype;if(g&&g.forEach!==l)try{b(g,"forEach",l)}catch{g.forEach=l}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(g,i,d){var o,c=g("../internals/global"),a=g("../internals/dom-iterables"),l=g("../modules/es.array.iterator"),b=g("../internals/create-non-enumerable-property"),g=g("../internals/well-known-symbol"),u=g("iterator"),h=g("toStringTag"),p=l.values;for(o in a){var m=c[o],y=m&&m.prototype;if(y){if(y[u]!==p)try{b(y,u,p)}catch{y[u]=p}if(y[h]||b(y,h,o),a[o]){for(var f in l)if(y[f]!==l[f])try{b(y,f,l[f])}catch{y[f]=l[f]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(te,i,d){te("../modules/es.array.iterator");function o(se){try{return decodeURIComponent(se)}catch{return se}}function c(se){return B[se]}function a(se){return encodeURIComponent(se).replace(R,c)}function l(se){this.entries.length=0,H(this.entries,se)}function b(se,pe){if(se<pe)throw TypeError("Not enough arguments")}function g(){_(this,g,U);var se,pe,oe,he,de,J,ue,ye,Ce=0<arguments.length?arguments[0]:void 0,ge=[];if(G(this,{type:U,entries:ge,updateURL:function(){},updateSearchParams:l}),Ce!==void 0)if(P(Ce))if(typeof(se=I(Ce))=="function")for(oe=(pe=se.call(Ce)).next;!(he=oe.call(pe)).done;){if((J=(de=(he=k(S(he.value))).next).call(he)).done||(ue=de.call(he)).done||!de.call(he).done)throw TypeError("Expected sequence with length 2");ge.push({key:J.value+"",value:ue.value+""})}else for(ye in Ce)x(Ce,ye)&&ge.push({key:ye,value:Ce[ye]+""});else H(ge,typeof Ce=="string"?Ce.charAt(0)==="?"?Ce.slice(1):Ce:Ce+"")}var u=te("../internals/export"),N=te("../internals/get-built-in"),h=te("../internals/native-url"),p=te("../internals/redefine"),m=te("../internals/redefine-all"),y=te("../internals/set-to-string-tag"),f=te("../internals/create-iterator-constructor"),v=te("../internals/internal-state"),_=te("../internals/an-instance"),x=te("../internals/has"),C=te("../internals/function-bind-context"),M=te("../internals/classof"),S=te("../internals/an-object"),P=te("../internals/is-object"),L=te("../internals/object-create"),D=te("../internals/create-property-descriptor"),k=te("../internals/get-iterator"),I=te("../internals/get-iterator-method"),te=te("../internals/well-known-symbol"),A=N("fetch"),F=N("Headers"),N=te("iterator"),U="URLSearchParams",W=U+"Iterator",G=v.set,z=v.getterFor(U),Y=v.getterFor(W),K=/\+/g,ie=Array(4),E=function(se){var pe,oe=se.replace(K," "),he=4;try{return decodeURIComponent(oe)}catch{for(;he;)oe=oe.replace((pe=he--,ie[pe-1]||(ie[pe-1]=RegExp("((?:%[\\da-f]{2}){"+pe+"})","gi"))),o);return oe}},R=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},H=function(se,pe){if(pe)for(var oe,he=pe.split("&"),de=0;de<he.length;)(oe=he[de++]).length&&(oe=oe.split("="),se.push({key:E(oe.shift()),value:E(oe.join("="))}))},Z=f(function(se,pe){G(this,{type:W,iterator:k(z(se).entries),kind:pe})},"Iterator",function(){var pe=Y(this),se=pe.kind,pe=pe.iterator.next(),oe=pe.value;return pe.done||(pe.value=se==="keys"?oe.key:se==="values"?oe.value:[oe.key,oe.value]),pe}),te=g.prototype;m(te,{append:function(se,pe){b(arguments.length,2);var oe=z(this);oe.entries.push({key:se+"",value:pe+""}),oe.updateURL()},delete:function(se){b(arguments.length,1);for(var pe=z(this),oe=pe.entries,he=se+"",de=0;de<oe.length;)oe[de].key===he?oe.splice(de,1):de++;pe.updateURL()},get:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=0;he<pe.length;he++)if(pe[he].key===oe)return pe[he].value;return null},getAll:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=[],de=0;de<pe.length;de++)pe[de].key===oe&&he.push(pe[de].value);return he},has:function(se){b(arguments.length,1);for(var pe=z(this).entries,oe=se+"",he=0;he<pe.length;)if(pe[he++].key===oe)return!0;return!1},set:function(se,pe){b(arguments.length,1);for(var oe,he=z(this),de=he.entries,J=!1,ue=se+"",ye=pe+"",Ce=0;Ce<de.length;Ce++)(oe=de[Ce]).key===ue&&(J?de.splice(Ce--,1):(J=!0,oe.value=ye));J||de.push({key:ue,value:ye}),he.updateURL()},sort:function(){for(var se,pe,oe=z(this),he=oe.entries,de=he.slice(),J=he.length=0;J<de.length;J++){for(se=de[J],pe=0;pe<J;pe++)if(he[pe].key>se.key){he.splice(pe,0,se);break}pe===J&&he.push(se)}oe.updateURL()},forEach:function(se){for(var pe,oe=z(this).entries,he=C(se,1<arguments.length?arguments[1]:void 0,3),de=0;de<oe.length;)he((pe=oe[de++]).value,pe.key,this)},keys:function(){return new Z(this,"keys")},values:function(){return new Z(this,"values")},entries:function(){return new Z(this,"entries")}},{enumerable:!0}),p(te,N,te.entries),p(te,"toString",function(){for(var se,pe=z(this).entries,oe=[],he=0;he<pe.length;)se=pe[he++],oe.push(a(se.key)+"="+a(se.value));return oe.join("&")},{enumerable:!0}),y(g,U),u({global:!0,forced:!h},{URLSearchParams:g}),h||typeof A!="function"||typeof F!="function"||u({global:!0,enumerable:!0,forced:!0},{fetch:function(de){var pe,oe,he,de=[de];return 1<arguments.length&&(P(pe=arguments[1])&&(oe=pe.body,M(oe)===U&&((he=pe.headers?new F(pe.headers):new F).has("content-type")||he.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),pe=L(pe,{body:D(0,String(oe)),headers:D(0,he)}))),de.push(pe)),A.apply(this,de)}}),i.exports={URLSearchParams:g,getState:z}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,d){k("../modules/es.string.iterator");function o(me){var Ve,$e,Fe,_t;if(typeof me=="number"){for(Ve=[],$e=0;$e<4;$e++)Ve.unshift(me%256),me=W(me/256);return Ve.join(".")}if(typeof me!="object")return me;for(Ve="",Fe=ue(me),$e=0;$e<8;$e++)_t&&me[$e]===0||(_t=_t&&!1,Fe===$e?(Ve+=$e?":":"::",_t=!0):(Ve+=me[$e].toString(16),$e<7&&(Ve+=":")));return"["+Ve+"]"}function c(me){return!me.host||me.cannotBeABaseURL||me.scheme=="file"}function a(me,Ve,$e,Fe){var _t,De,Ct,We=$e||Ae,xt=0,Ye="",sr=!1,hr=!1,tr=!1;for($e||(me.scheme="",me.username="",me.password="",me.host=null,me.port=null,me.path=[],me.query=null,me.fragment=null,me.cannotBeABaseURL=!1,Ve=Ve.replace(he,"")),Ve=Ve.replace(de,""),_t=M(Ve);xt<=_t.length;){switch(De=_t[xt],We){case Ae:if(!De||!E.test(De)){if($e)return Y;We=Q;continue}Ye+=De.toLowerCase(),We=xe;break;case xe:if(De&&(R.test(De)||De=="+"||De=="-"||De=="."))Ye+=De.toLowerCase();else{if(De!=":"){if($e)return Y;Ye="",We=Q,xt=0;continue}if($e&&(Te(me)!=x(Ie,Ye)||Ye=="file"&&(Ke(me)||me.port!==null)||me.scheme=="file"&&!me.host))return;if(me.scheme=Ye,$e)return void(Te(me)&&Ie[me.scheme]==me.port&&(me.port=null));Ye="",me.scheme=="file"?We=ct:Te(me)&&Fe&&Fe.scheme==me.scheme?We=re:Te(me)?We=je:_t[xt+1]=="/"?(We=$,xt++):(me.cannotBeABaseURL=!0,me.path.push(""),We=zt)}break;case Q:if(!Fe||Fe.cannotBeABaseURL&&De!="#")return Y;if(Fe.cannotBeABaseURL&&De=="#"){me.scheme=Fe.scheme,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",me.cannotBeABaseURL=!0,We=or;break}We=Fe.scheme=="file"?ct:ne;continue;case re:if(De!="/"||_t[xt+1]!="/"){We=ne;continue}We=Le,xt++;break;case $:if(De=="/"){We=Ne;break}We=st;continue;case ne:if(me.scheme=Fe.scheme,De==g)me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query=Fe.query;else if(De=="/"||De=="\\"&&Te(me))We=ve;else if(De=="?")me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query="",We=Er;else{if(De!="#"){me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.path.pop(),We=st;continue}me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",We=or}break;case ve:if(!Te(me)||De!="/"&&De!="\\"){if(De!="/"){me.username=Fe.username,me.password=Fe.password,me.host=Fe.host,me.port=Fe.port,We=st;continue}We=Ne}else We=Le;break;case je:if(We=Le,De!="/"||Ye.charAt(xt+1)!="/")continue;xt++;break;case Le:if(De=="/"||De=="\\")break;We=Ne;continue;case Ne:if(De=="@"){sr&&(Ye="%40"+Ye);for(var sr=!0,gr=M(Ye),fn=0;fn<gr.length;fn++){var Ur=gr[fn];Ur!=":"||tr?(Ur=Ee(Ur,_e),tr?me.password+=Ur:me.username+=Ur):tr=!0}Ye=""}else if(De==g||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)){if(sr&&Ye=="")return z;xt-=M(Ye).length+1,Ye="",We=Be}else Ye+=De;break;case Be:case Ue:if($e&&me.scheme=="file"){We=Je;continue}if(De!=":"||hr){if(De==g||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)){if(Te(me)&&Ye=="")return K;if($e&&Ye==""&&(Ke(me)||me.port!==null))return;if(Ct=J(me,Ye))return Ct;if(Ye="",We=lt,$e)return;continue}De=="["?hr=!0:De=="]"&&(hr=!1),Ye+=De}else{if(Ye=="")return K;if(Ct=J(me,Ye))return Ct;if(Ye="",We=Xe,$e==Ue)return}break;case Xe:if(!B.test(De)){if(De==g||De=="/"||De=="?"||De=="#"||De=="\\"&&Te(me)||$e){if(Ye!=""){var mn=parseInt(Ye,10);if(65535<mn)return ie;me.port=Te(me)&&mn===Ie[me.scheme]?null:mn,Ye=""}if($e)return;We=lt;continue}return ie}Ye+=De;break;case ct:if(me.scheme="file",De=="/"||De=="\\")We=ot;else{if(!Fe||Fe.scheme!="file"){We=st;continue}if(De==g)me.host=Fe.host,me.path=Fe.path.slice(),me.query=Fe.query;else if(De=="?")me.host=Fe.host,me.path=Fe.path.slice(),me.query="",We=Er;else{if(De!="#"){ze(_t.slice(xt).join(""))||(me.host=Fe.host,me.path=Fe.path.slice(),He(me)),We=st;continue}me.host=Fe.host,me.path=Fe.path.slice(),me.query=Fe.query,me.fragment="",We=or}}break;case ot:if(De=="/"||De=="\\"){We=Je;break}Fe&&Fe.scheme=="file"&&!ze(_t.slice(xt).join(""))&&(Ge(Fe.path[0],!0)?me.path.push(Fe.path[0]):me.host=Fe.host),We=st;continue;case Je:if(De==g||De=="/"||De=="\\"||De=="?"||De=="#"){if(!$e&&Ge(Ye))We=st;else{if(Ye==""){if(me.host="",$e)return}else{if(Ct=J(me,Ye))return Ct;if(me.host=="localhost"&&(me.host=""),$e)return;Ye=""}We=lt}continue}Ye+=De;break;case lt:if(Te(me)){if(We=st,De!="/"&&De!="\\")continue}else if($e||De!="?")if($e||De!="#"){if(De!=g&&(We=st,De!="/"))continue}else me.fragment="",We=or;else me.query="",We=Er;break;case st:if(De==g||De=="/"||De=="\\"&&Te(me)||!$e&&(De=="?"||De=="#")){if(ce(Ye)?(He(me),De=="/"||De=="\\"&&Te(me)||me.path.push("")):qe(Ye)?De=="/"||De=="\\"&&Te(me)||me.path.push(""):(me.scheme=="file"&&!me.path.length&&Ge(Ye)&&(me.host&&(me.host=""),Ye=Ye.charAt(0)+":"),me.path.push(Ye)),Ye="",me.scheme=="file"&&(De==g||De=="?"||De=="#"))for(;1<me.path.length&&me.path[0]==="";)me.path.shift();De=="?"?(me.query="",We=Er):De=="#"&&(me.fragment="",We=or)}else Ye+=Ee(De,ge);break;case zt:De=="?"?(me.query="",We=Er):De=="#"?(me.fragment="",We=or):De!=g&&(me.path[0]+=Ee(De,ye));break;case Er:$e||De!="#"?De!=g&&(De=="'"&&Te(me)?me.query+="%27":me.query+=De=="#"?"%23":Ee(De,ye)):(me.fragment="",We=or);break;case or:De!=g&&(me.fragment+=Ee(De,Ce))}xt++}}function l(De){var Ve,$e,Fe=_(this,l,"URL"),_t=1<arguments.length?arguments[1]:void 0,De=String(De),Ct=N(Fe,{type:"URL"});if(_t!==void 0){if(_t instanceof l)Ve=U(_t);else if($e=a(Ve={},String(_t)))throw TypeError($e)}if($e=a(Ct,De,null,Ve))throw TypeError($e);var We=Ct.searchParams=new A;(_t=F(We)).updateSearchParams(Ct.query),_t.updateURL=function(){Ct.query=String(We)||null},m||(Fe.href=Wt.call(Fe),Fe.origin=jt.call(Fe),Fe.protocol=wr.call(Fe),Fe.username=yr.call(Fe),Fe.password=Vt.call(Fe),Fe.host=xr.call(Fe),Fe.hostname=bo.call(Fe),Fe.port=_o.call(Fe),Fe.pathname=wo.call(Fe),Fe.search=Si.call(Fe),Fe.searchParams=xo.call(Fe),Fe.hash=jo.call(Fe))}function b(me,Ve){return{get:me,set:Ve,configurable:!0,enumerable:!0}}var g,u,h,p=k("../internals/export"),m=k("../internals/descriptors"),y=k("../internals/native-url"),At=k("../internals/global"),f=k("../internals/object-define-properties"),v=k("../internals/redefine"),_=k("../internals/an-instance"),x=k("../internals/has"),C=k("../internals/object-assign"),M=k("../internals/array-from"),S=k("../internals/string-multibyte").codeAt,P=k("../internals/string-punycode-to-ascii"),L=k("../internals/set-to-string-tag"),D=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),I=At.URL,A=D.URLSearchParams,F=D.getState,N=k.set,U=k.getterFor("URL"),W=Math.floor,G=Math.pow,z="Invalid authority",Y="Invalid scheme",K="Invalid host",ie="Invalid port",E=/[A-Za-z]/,R=/[\d+-.A-Za-z]/,B=/\d/,H=/^(0x|0X)/,Z=/^[0-7]+$/,te=/^\d+$/,se=/^[\dA-Fa-f]+$/,pe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,oe=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,he=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,de=/[\u0009\u000A\u000D]/g,J=function(me,Ve){var $e,Fe,_t;if(Ve.charAt(0)=="[")return Ve.charAt(Ve.length-1)=="]"&&($e=function(De){var Ct=[0,0,0,0,0,0,0,0],We=0,xt=null,Ye=0,sr,hr,tr,gr,fn,Ur,mn,vr=function(){return De.charAt(Ye)};if(vr()==":"){if(De.charAt(1)!=":")return;Ye+=2,We++,xt=We}for(;vr();){if(We==8)return;if(vr()==":"){if(xt!==null)return;Ye++,We++,xt=We;continue}for(sr=hr=0;hr<4&&se.test(vr());)sr=sr*16+parseInt(vr(),16),Ye++,hr++;if(vr()=="."){if(hr==0||(Ye-=hr,We>6))return;for(tr=0;vr();){if(gr=null,tr>0)if(vr()=="."&&tr<4)Ye++;else return;if(!B.test(vr()))return;for(;B.test(vr());){if(fn=parseInt(vr(),10),gr===null)gr=fn;else{if(gr==0)return;gr=gr*10+fn}if(gr>255)return;Ye++}Ct[We]=Ct[We]*256+gr,tr++,(tr==2||tr==4)&&We++}if(tr!=4)return;break}else if(vr()==":"){if(Ye++,!vr())return}else if(vr())return;Ct[We++]=sr}if(xt!==null)for(Ur=We-xt,We=7;We!=0&&Ur>0;)mn=Ct[We],Ct[We--]=Ct[xt+Ur-1],Ct[xt+--Ur]=mn;else if(We!=8)return;return Ct}(Ve.slice(1,-1)))?void(me.host=$e):K;if(Te(me))return Ve=P(Ve),pe.test(Ve)||($e=function(De){var Ct=De.split("."),We,xt,Ye,sr,hr,tr,gr;if(Ct.length&&Ct[Ct.length-1]==""&&Ct.pop(),(We=Ct.length)>4)return De;for(xt=[],Ye=0;Ye<We;Ye++){if(sr=Ct[Ye],sr=="")return De;if(hr=10,sr.length>1&&sr.charAt(0)=="0"&&(hr=H.test(sr)?16:8,sr=sr.slice(hr==8?1:2)),sr==="")tr=0;else{if(!(hr==10?te:hr==8?Z:se).test(sr))return De;tr=parseInt(sr,hr)}xt.push(tr)}for(Ye=0;Ye<We;Ye++)if(tr=xt[Ye],Ye==We-1){if(tr>=G(256,5-We))return null}else if(tr>255)return null;for(gr=xt.pop(),Ye=0;Ye<xt.length;Ye++)gr+=xt[Ye]*G(256,3-Ye);return gr}(Ve))===null?K:void(me.host=$e);if(oe.test(Ve))return K;for($e="",Fe=M(Ve),_t=0;_t<Fe.length;_t++)$e+=Ee(Fe[_t],ye);me.host=$e},ue=function(me){for(var Ve=null,$e=1,Fe=null,_t=0,De=0;De<8;De++)me[De]!==0?($e<_t&&(Ve=Fe,$e=_t),Fe=null,_t=0):(Fe===null&&(Fe=De),++_t);return $e<_t&&(Ve=Fe,$e=_t),Ve},ye={},Ce=C({},ye,{" ":1,'"':1,"<":1,">":1,"`":1}),ge=C({},Ce,{"#":1,"?":1,"{":1,"}":1}),_e=C({},ge,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ee=function(me,Ve){var $e=S(me,0);return 32<$e&&$e<127&&!x(Ve,me)?me:encodeURIComponent(me)},Ie={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Te=function(me){return x(Ie,me.scheme)},Ke=function(me){return me.username!=""||me.password!=""},Ge=function(me,Ve){return me.length==2&&E.test(me.charAt(0))&&((me=me.charAt(1))==":"||!Ve&&me=="|")},ze=function(me){return 1<me.length&&Ge(me.slice(0,2))&&(me.length==2||(me=me.charAt(2))==="/"||me==="\\"||me==="?"||me==="#")},He=function(me){var Ve=me.path,$e=Ve.length;!$e||me.scheme=="file"&&$e==1&&Ge(Ve[0],!0)||Ve.pop()},qe=function(me){return me==="."||me.toLowerCase()==="%2e"},ce=function(me){return(me=me.toLowerCase())===".."||me==="%2e."||me===".%2e"||me==="%2e%2e"},Ae={},xe={},Q={},re={},$={},ne={},ve={},je={},Le={},Ne={},Be={},Ue={},Xe={},ct={},ot={},Je={},lt={},st={},zt={},Er={},or={},At=l.prototype,Wt=function(){var me=U(this),Ve=me.scheme,$e=me.username,Fe=me.password,_t=me.host,De=me.port,Ct=me.path,We=me.query,xt=me.fragment,Ye=Ve+":";return _t!==null?(Ye+="//",Ke(me)&&(Ye+=$e+(Fe?":"+Fe:"")+"@"),Ye+=o(_t),De!==null&&(Ye+=":"+De)):Ve=="file"&&(Ye+="//"),Ye+=me.cannotBeABaseURL?Ct[0]:Ct.length?"/"+Ct.join("/"):"",We!==null&&(Ye+="?"+We),xt!==null&&(Ye+="#"+xt),Ye},jt=function(){var me=U(this),Ve=me.scheme,$e=me.port;if(Ve=="blob")try{return new URL(Ve.path[0]).origin}catch{return"null"}return Ve!="file"&&Te(me)?Ve+"://"+o(me.host)+($e!==null?":"+$e:""):"null"},wr=function(){return U(this).scheme+":"},yr=function(){return U(this).username},Vt=function(){return U(this).password},xr=function(){var Ve=U(this),me=Ve.host,Ve=Ve.port;return me===null?"":Ve===null?o(me):o(me)+":"+Ve},bo=function(){var me=U(this).host;return me===null?"":o(me)},_o=function(){var me=U(this).port;return me===null?"":String(me)},wo=function(){var me=U(this),Ve=me.path;return me.cannotBeABaseURL?Ve[0]:Ve.length?"/"+Ve.join("/"):""},Si=function(){var me=U(this).query;return me?"?"+me:""},xo=function(){return U(this).searchParams},jo=function(){var me=U(this).fragment;return me?"#"+me:""};m&&f(At,{href:b(Wt,function($e){var Ve=U(this),$e=String($e),$e=a(Ve,$e);if($e)throw TypeError($e);F(Ve.searchParams).updateSearchParams(Ve.query)}),origin:b(jt),protocol:b(wr,function(me){var Ve=U(this);a(Ve,String(me)+":",Ae)}),username:b(yr,function(me){var Ve=U(this),$e=M(String(me));if(!c(Ve)){Ve.username="";for(var Fe=0;Fe<$e.length;Fe++)Ve.username+=Ee($e[Fe],_e)}}),password:b(Vt,function(me){var Ve=U(this),$e=M(String(me));if(!c(Ve)){Ve.password="";for(var Fe=0;Fe<$e.length;Fe++)Ve.password+=Ee($e[Fe],_e)}}),host:b(xr,function(me){var Ve=U(this);Ve.cannotBeABaseURL||a(Ve,String(me),Be)}),hostname:b(bo,function(me){var Ve=U(this);Ve.cannotBeABaseURL||a(Ve,String(me),Ue)}),port:b(_o,function(me){var Ve=U(this);c(Ve)||((me=String(me))==""?Ve.port=null:a(Ve,me,Xe))}),pathname:b(wo,function(me){var Ve=U(this);Ve.cannotBeABaseURL||(Ve.path=[],a(Ve,me+"",lt))}),search:b(Si,function(me){var Ve=U(this);(me=String(me))==""?Ve.query=null:(me.charAt(0)=="?"&&(me=me.slice(1)),Ve.query="",a(Ve,me,Er)),F(Ve.searchParams).updateSearchParams(Ve.query)}),searchParams:b(xo),hash:b(jo,function(me){var Ve=U(this);(me=String(me))==""?Ve.fragment=null:(me.charAt(0)=="#"&&(me=me.slice(1)),Ve.fragment="",a(Ve,me,or))})}),v(At,"toJSON",function(){return Wt.call(this)},{enumerable:!0}),v(At,"toString",function(){return Wt.call(this)},{enumerable:!0}),I&&(u=I.createObjectURL,h=I.revokeObjectURL,u&&v(l,"createObjectURL",function(me){return u.apply(I,arguments)}),h&&v(l,"revokeObjectURL",function(me){return h.apply(I,arguments)})),L(l,"URL"),p({global:!0,forced:!y,sham:!m},{URL:l})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(t,i,d){i.exports=t("./").polyfill()},{"./":247}],247:[function(t,i,d){(function(o,c){var a,l;a=this,l=function(){function b(J){return typeof J=="function"}var g=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},u=0,h=void 0,p=void 0,m=function(J,ue){C[u]=J,C[u+1]=ue,(u+=2)===2&&(p?p(M):A())},y=typeof window<"u"?window:void 0,f=y||{},f=f.MutationObserver||f.WebKitMutationObserver,v=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",_=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var J=setTimeout;return function(){return J(M,1)}}var C=new Array(1e3);function M(){for(var J=0;J<u;J+=2)(0,C[J])(C[J+1]),C[J]=void 0,C[J+1]=void 0;u=0}function S(){try{var J=Function("return this")().require("vertx");return(h=J.runOnLoop||J.runOnContext)!==void 0?function(){h(M)}:x()}catch{return x()}}var P,L,D,A=void 0;function k(J,ue){var ye,Ce=this,ge=new this.constructor(N),_e=(ge[F]===void 0&&se(ge),Ce._state);return _e?(ye=arguments[_e-1],m(function(){return Z(_e,ge,ye,Ce._result)})):B(Ce,ge,J,ue),ge}function I(J){var ue;return J&&typeof J=="object"&&J.constructor===this?J:(K(ue=new this(N),J),ue)}var A=v?function(){return o.nextTick(M)}:f?(L=0,v=new f(M),D=document.createTextNode(""),v.observe(D,{characterData:!0}),function(){D.data=L=++L%2}):_?((P=new MessageChannel).port1.onmessage=M,function(){return P.port2.postMessage(0)}):(y===void 0&&typeof t=="function"?S:x)(),F=Math.random().toString(36).substring(2);function N(){}var U=void 0,W=1,G=2;function z(J,ue,ye){m(function(Ce){var ge=!1,_e=function(Ee,Ie,Te,Ke){try{Ee.call(Ie,Te,Ke)}catch(Ge){return Ge}}(ye,ue,function(Ee){ge||(ge=!0,(ue!==Ee?K:E)(Ce,Ee))},function(Ee){ge||(ge=!0,R(Ce,Ee))},Ce._label);!ge&&_e&&(ge=!0,R(Ce,_e))},J)}function Y(J,ue,ye){var Ce,ge;ue.constructor===J.constructor&&ye===k&&ue.constructor.resolve===I?(Ce=J,(ge=ue)._state===W?E(Ce,ge._result):ge._state===G?R(Ce,ge._result):B(ge,void 0,function(_e){return K(Ce,_e)},function(_e){return R(Ce,_e)})):ye!==void 0&&b(ye)?z(J,ue,ye):E(J,ue)}function K(J,ue){if(J===ue)R(J,new TypeError("You cannot resolve a promise with itself"));else if(ye=typeof ue,ue===null||ye!="object"&&ye!="function")E(J,ue);else{ye=void 0;try{ye=ue.then}catch(Ce){return void R(J,Ce)}Y(J,ue,ye)}var ye}function ie(J){J._onerror&&J._onerror(J._result),H(J)}function E(J,ue){J._state===U&&(J._result=ue,J._state=W,J._subscribers.length!==0&&m(H,J))}function R(J,ue){J._state===U&&(J._state=G,J._result=ue,m(ie,J))}function B(J,ue,ye,Ce){var ge=J._subscribers,_e=ge.length;J._onerror=null,ge[_e]=ue,ge[_e+W]=ye,ge[_e+G]=Ce,_e===0&&J._state&&m(H,J)}function H(J){var ue=J._subscribers,ye=J._state;if(ue.length!==0){for(var Ce,ge=void 0,_e=J._result,Ee=0;Ee<ue.length;Ee+=3)Ce=ue[Ee],ge=ue[Ee+ye],Ce?Z(ye,Ce,ge,_e):ge(_e);J._subscribers.length=0}}function Z(J,ue,ye,Ce){var ge=b(ye),_e=void 0,Ee=void 0,Ie=!0;if(ge){try{_e=ye(Ce)}catch(Te){Ie=!1,Ee=Te}if(ue===_e)return void R(ue,new TypeError("A promises callback cannot return that same promise."))}else _e=Ce;ue._state===U&&(ge&&Ie?K(ue,_e):Ie===!1?R(ue,Ee):J===W?E(ue,_e):J===G&&R(ue,_e))}var te=0;function se(J){J[F]=te++,J._state=void 0,J._result=void 0,J._subscribers=[]}oe.prototype._enumerate=function(J){for(var ue=0;this._state===U&&ue<J.length;ue++)this._eachEntry(J[ue],ue)},oe.prototype._eachEntry=function(J,ue){var ye=this._instanceConstructor,Ce=ye.resolve;if(Ce===I){var ge,_e=void 0,Ee=void 0,Ie=!1;try{_e=J.then}catch(Te){Ie=!0,Ee=Te}_e===k&&J._state!==U?this._settledAt(J._state,ue,J._result):typeof _e!="function"?(this._remaining--,this._result[ue]=J):ye===he?(ge=new ye(N),Ie?R(ge,Ee):Y(ge,J,_e),this._willSettleAt(ge,ue)):this._willSettleAt(new ye(function(Te){return Te(J)}),ue)}else this._willSettleAt(Ce(J),ue)},oe.prototype._settledAt=function(J,ue,ye){var Ce=this.promise;Ce._state===U&&(this._remaining--,J===G?R(Ce,ye):this._result[ue]=ye),this._remaining===0&&E(Ce,this._result)},oe.prototype._willSettleAt=function(J,ue){var ye=this;B(J,void 0,function(Ce){return ye._settledAt(W,ue,Ce)},function(Ce){return ye._settledAt(G,ue,Ce)})};var pe=oe;function oe(J,ue){this._instanceConstructor=J,this.promise=new J(N),this.promise[F]||se(this.promise),g(ue)?(this.length=ue.length,this._remaining=ue.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ue),this._remaining!==0)||E(this.promise,this._result)):R(this.promise,new Error("Array Methods must be provided an Array"))}de.prototype.catch=function(J){return this.then(null,J)},de.prototype.finally=function(J){var ue=this.constructor;return b(J)?this.then(function(ye){return ue.resolve(J()).then(function(){return ye})},function(ye){return ue.resolve(J()).then(function(){throw ye})}):this.then(J,J)};var he=de;function de(J){if(this[F]=te++,this._result=this._state=void 0,this._subscribers=[],N!==J){if(typeof J!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof de))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ue=this;try{J(function(ye){K(ue,ye)},function(ye){R(ue,ye)})}catch(ye){R(ue,ye)}}}return he.prototype.then=k,he.all=function(J){return new pe(this,J).promise},he.race=function(J){var ue=this;return g(J)?new ue(function(ye,Ce){for(var ge=J.length,_e=0;_e<ge;_e++)ue.resolve(J[_e]).then(ye,Ce)}):new ue(function(ye,Ce){return Ce(new TypeError("You must pass an array to race."))})},he.resolve=I,he.reject=function(J){var ue=new this(N);return R(ue,J),ue},he._setScheduler=function(J){p=J},he._setAsap=function(J){m=J},he._asap=m,he.polyfill=function(){var J=void 0;if(c!==void 0)J=c;else if(typeof self<"u")J=self;else try{J=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ue=J.Promise;if(ue){var ye=null;try{ye=Object.prototype.toString.call(ue.resolve())}catch{}if(ye==="[object Promise]"&&!ue.cast)return}J.Promise=he},he.Promise=he},typeof d=="object"&&i!==void 0?i.exports=l():a.ES6Promise=l()}).call(this,t("_process"),typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(t,i,d){var o,c;o=this,c=function(a,l){var b=5e3,g="callback";function u(p){try{delete window[p]}catch{window[p]=void 0}}function h(p){p=document.getElementById(p),p&&document.getElementsByTagName("head")[0].removeChild(p)}l.exports=function(p){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=p,f=m.timeout||b,v=m.jsonpCallback||g,_=void 0;return new Promise(function(x,C){var M=m.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=v+"_"+M,P=(window[M]=function(L){x({ok:!0,json:function(){return Promise.resolve(L)}}),_&&clearTimeout(_),h(S),u(M)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));P.setAttribute("src",""+y+v+"="+M),m.charset&&P.setAttribute("charset",m.charset),P.id=S,document.getElementsByTagName("head")[0].appendChild(P),_=setTimeout(function(){C(new Error("JSONP request to "+p+" timed out")),u(M),h(S),window[M]=function(){u(M)}},f),P.onerror=function(){C(new Error("JSONP request to "+p+" failed")),u(M),h(S),_&&clearTimeout(_)}})}},d!==void 0&&i!==void 0?c(0,i):(c(c={exports:{}},c),o.fetchJsonp=c.exports)},{}],249:[function(t,i,d){var o=function(c){var a,l,b,g,u,h,p,m,y,f,v;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=c.document,a=function(){return c.URL||c.webkitURL||c},l=v.createElementNS("http://www.w3.org/1999/xhtml","a"),b="download"in l,g=/constructor/i.test(c.HTMLElement)||c.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(_){(c.setImmediate||c.setTimeout)(function(){throw _},0)},p=4e4,m=function(_){setTimeout(function(){typeof _=="string"?a().revokeObjectURL(_):_.remove()},p)},y=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_},v=(f=function(_,x,L){L||(_=y(_));var M,S,P=this,L=_.type==="application/octet-stream",D=function(){for(var k=P,I="writestart progress write writeend".split(" "),A=void 0,F=(I=[].concat(I)).length;F--;){var N=k["on"+I[F]];if(typeof N=="function")try{N.call(k,A||k)}catch(U){h(U)}}};P.readyState=P.INIT,b?(M=a().createObjectURL(_),setTimeout(function(){var k,I;l.href=M,l.download=x,k=l,I=new MouseEvent("click"),k.dispatchEvent(I),D(),m(M),P.readyState=P.DONE})):(u||L&&g)&&c.FileReader?((S=new FileReader).onloadend=function(){var k=u?S.result:S.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(k,"_blank")||(c.location.href=k),k=void 0,P.readyState=P.DONE,D()},S.readAsDataURL(_),P.readyState=P.INIT):(M=M||a().createObjectURL(_),!L&&c.open(M,"_blank")||(c.location.href=M),P.readyState=P.DONE,D(),m(M))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(_,x,C){return x=x||_.name||"download",C||(_=y(_)),navigator.msSaveOrOpenBlob(_,x)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(_,x,C){return new f(_,x||_.name||"download",C)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=o:n!=null},{}],250:[function(t,i,d){var o,c=Object.defineProperty,a=(c(d,"__esModule",{value:!0}),d),l={GIFEncoder:()=>D,applyPalette:()=>function(U,W,G="rgb565"){if(!U||!U.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(U instanceof Uint8Array||U instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<W.length)throw new Error("applyPalette() only works with 256 colors or less");const z=new Uint32Array(U.buffer),Y=z.length,K=G==="rgb444"?4096:65536,ie=new Uint8Array(Y),E=new Array(K);if(G==="rgba4444")for(let de=0;de<Y;de++){var Z=z[de],R=Z>>24&255,B=Z>>16&255,H=Z>>8&255,Z=255&Z,te=m(Z,H,B,R),te=te in E?E[te]:E[te]=function(J,ue,ye,Ce,ge){let _e=0,Ee=1e100;for(let Ge=0;Ge<ge.length;Ge++){var Ie,Te=ge[Ge],Ke=S(Te[3]-Ce);Ke>Ee||(Ie=Te[0],(Ke+=S(Ie-J))>Ee||(Ie=Te[1],(Ke+=S(Ie-ue))>Ee||(Ie=Te[2],(Ke+=S(Ie-ye))>Ee||(Ee=Ke,_e=Ge))))}return _e}(Z,H,B,R,W);ie[de]=te}else{const de=G==="rgb444"?y:p;for(let J=0;J<Y;J++){var oe=z[J],se=oe>>16&255,pe=oe>>8&255,oe=255&oe,he=de(oe,pe,se),he=he in E?E[he]:E[he]=function(ue,ye,Ce,ge){let _e=0,Ee=1e100;for(let Ge=0;Ge<ge.length;Ge++){var Ie,Te=ge[Ge],Ke=S(Te[0]-ue);Ke>Ee||(Ie=Te[1],(Ke+=S(Ie-ye))>Ee||(Ie=Te[2],(Ke+=S(Ie-Ce))>Ee||(Ee=Ke,_e=Ge)))}return _e}(oe,pe,se,W);ie[J]=he}}return ie},default:()=>N,nearestColor:()=>function(U,W,G=C){return U[P(U,W,G)]},nearestColorIndex:()=>P,nearestColorIndexWithDistance:()=>L,prequantize:()=>function(U,{roundRGB:W=5,roundAlpha:G=10,oneBitAlpha:z=null}={}){const Y=new Uint32Array(U.buffer);for(let B=0;B<Y.length;B++){var R=Y[B];let H=R>>24&255;var K,ie=R>>16&255,E=R>>8&255,R=255&R;H=M(H,G),z&&(K=typeof z=="number"?z:127,H=H<=K?0:255),R=M(R,W),E=M(E,W),ie=M(ie,W),Y[B]=H<<24|ie<<16|E<<8|R<<0}},quantize:()=>function(U,W,G={}){var{format:z="rgb565",clearAlpha:Y=!0,clearAlphaColor:K=0,clearAlphaThreshold:ie=0,oneBitAlpha:E=!1}=G;if(!U||!U.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(U instanceof Uint8Array||U instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");U=new Uint32Array(U.buffer);let R=G.useSqrt!==!1;const B=z==="rgba4444",H=function(ze,He){const qe=He==="rgb444"?4096:65536,ce=new Array(qe),Ae=ze.length;if(He==="rgba4444")for(let ot=0;ot<Ae;++ot){var $=ze[ot],xe=$>>24&255,Q=$>>16&255,re=$>>8&255,$=255&$,ne=m($,re,Q,xe);let Je=ne in ce?ce[ne]:ce[ne]=x();Je.rc+=$,Je.gc+=re,Je.bc+=Q,Je.ac+=xe,Je.cnt++}else if(He==="rgb444")for(let ot=0;ot<Ae;++ot){var Le=ze[ot],ve=Le>>16&255,je=Le>>8&255,Le=255&Le,Ne=y(Le,je,ve);let Je=Ne in ce?ce[Ne]:ce[Ne]=x();Je.rc+=Le,Je.gc+=je,Je.bc+=ve,Je.cnt++}else for(let ot=0;ot<Ae;++ot){var Xe=ze[ot],Be=Xe>>16&255,Ue=Xe>>8&255,Xe=255&Xe,ct=p(Xe,Ue,Be);let Je=ct in ce?ce[ct]:ce[ct]=x();Je.rc+=Xe,Je.gc+=Ue,Je.bc+=Be,Je.cnt++}return ce}(U,z),Z=H.length,te=Z-1,se=new Uint32Array(Z+1);for(var pe=0,oe=0;oe<Z;++oe){const ze=H[oe];ze!=null&&(Te=1/ze.cnt,B&&(ze.ac*=Te),ze.rc*=Te,ze.gc*=Te,ze.bc*=Te,H[pe++]=ze)}v(W)/pe<.022&&(R=!1);for(var he,de,J,oe=0;oe<pe-1;++oe)H[oe].fw=oe+1,H[oe+1].bk=oe,R&&(H[oe].cnt=Math.sqrt(H[oe].cnt));for(R&&(H[oe].cnt=Math.sqrt(H[oe].cnt)),oe=0;oe<pe;++oe){_(H,oe);var ue=H[oe].err;for(de=++se[0];1<de&&(J=de>>1,!(H[he=se[J]].err<=ue));de=J)se[de]=he;se[de]=oe}var ye,Ce=pe-W;for(oe=0;oe<Ce;){for(;;){var ge=se[1];if((ye=H[ge]).tm>=ye.mtm&&H[ye.nn].mtm<=ye.tm)break;for(ye.mtm==te?ge=se[1]=se[se[0]--]:(_(H,ge),ye.tm=oe),ue=H[ge].err,de=1;(J=de+de)<=se[0]&&(J<se[0]&&H[se[J]].err>H[se[J+1]].err&&J++,!(ue<=H[he=se[J]].err));de=J)se[de]=he;se[de]=ge}var _e=H[ye.nn],Ee=ye.cnt,Ie=_e.cnt,Te=1/(Ee+Ie);B&&(ye.ac=Te*(Ee*ye.ac+Ie*_e.ac)),ye.rc=Te*(Ee*ye.rc+Ie*_e.rc),ye.gc=Te*(Ee*ye.gc+Ie*_e.gc),ye.bc=Te*(Ee*ye.bc+Ie*_e.bc),ye.cnt+=_e.cnt,ye.mtm=++oe,H[_e.bk].fw=_e.fw,H[_e.fw].bk=_e.bk,_e.mtm=te}let Ke=[];for(oe=0;;0){let ze=f(Math.round(H[oe].rc),0,255),He=f(Math.round(H[oe].gc),0,255),qe=f(Math.round(H[oe].bc),0,255),ce=255;B&&(ce=f(Math.round(H[oe].ac),0,255),E&&(Ge=typeof E=="number"?E:127,ce=ce<=Ge?0:255),Y&&ce<=ie&&(ze=He=qe=K,ce=0));var Ge=B?[ze,He,qe,ce]:[ze,He,qe];if(function(Ae,xe){for(let $=0;$<Ae.length;$++){var re=Ae[$],Q=re[0]===xe[0]&&re[1]===xe[1]&&re[2]===xe[2],re=!(4<=re.length&&4<=xe.length)||re[3]===xe[3];if(Q&&re)return!0}return!1}(Ke,Ge)||Ke.push(Ge),(oe=H[oe].fw)==0)break}return Ke},snapColorsToPalette:()=>function(U,W,G=5){if(U.length&&W.length){var z=U.map(R=>R.slice(0,3)),Y=G*G,K=U[0].length;for(let R=0;R<W.length;R++){let B=W[R];B=B.length<K?[B[0],B[1],B[2],255]:B.length>K?B.slice(0,3):B.slice();var E=L(z,B.slice(0,3),C),ie=E[0],E=E[1];0<E&&E<=Y&&(U[ie]=B)}}}};for(o in l)c(a,o,{get:l[o],enumerable:!0});var b={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function g(U=256){let W=0,G=new Uint8Array(U);return{get buffer(){return G.buffer},reset(){W=0},bytesView(){return G.subarray(0,W)},bytes(){return G.slice(0,W)},writeByte(Y){z(W+1),G[W]=Y,W++},writeBytes(Y,K=0,ie=Y.length){z(W+ie);for(let E=0;E<ie;E++)G[W++]=Y[E+K]},writeBytesView(Y,K=0,ie=Y.byteLength){z(W+ie),G.set(Y.subarray(K,K+ie),W),W+=ie}};function z(Y){var K=G.length;if(!(Y<=K)){Y=Math.max(Y,K*(K<1048576?2:1.125)>>>0),K!=0&&(Y=Math.max(Y,256));const ie=G;G=new Uint8Array(Y),0<W&&G.set(ie.subarray(0,W),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],h=function(U,W,G,B,Y=g(512),K=new Uint8Array(256),ie=new Int32Array(5003),E=new Int32Array(5003)){var R=ie.length,B=Math.max(2,B);K.fill(0),E.fill(0),ie.fill(-1);let H=0,Z=0;var te=B+1;const se=te;let pe=!1,oe=se,he=(1<<oe)-1;var de=1<<te-1;const J=1+de;let ue=2+de,ye=0,Ce=G[0],ge=0;for(let Ge=R;Ge<65536;Ge*=2)++ge;ge=8-ge,Y.writeByte(B),Ke(de);var _e=G.length;for(let Ge=1;Ge<_e;Ge++)e:{var Ee=G[Ge],Ie=(Ee<<12)+Ce;let ze=Ee<<ge^Ce;if(ie[ze]===Ie)Ce=E[ze];else{for(var Te=ze===0?1:R-ze;0<=ie[ze];)if((ze-=Te)<0&&(ze+=R),ie[ze]===Ie){Ce=E[ze];break e}Ke(Ce),Ce=Ee,ue<4096?(E[ze]=ue++,ie[ze]=Ie):(ie.fill(-1),ue=2+de,pe=!0,Ke(de))}}return Ke(Ce),Ke(J),Y.writeByte(0),Y.bytesView();function Ke(Ge){for(H&=u[Z],0<Z?H|=Ge<<Z:H=Ge,Z+=oe;8<=Z;)K[ye++]=255&H,254<=ye&&(Y.writeByte(ye),Y.writeBytesView(K,0,ye),ye=0),H>>=8,Z-=8;if((ue>he||pe)&&(pe?(oe=se,he=(1<<oe)-1,pe=!1):(++oe,he=oe===12?1<<oe:(1<<oe)-1)),Ge==J){for(;0<Z;)K[ye++]=255&H,254<=ye&&(Y.writeByte(ye),Y.writeBytesView(K,0,ye),ye=0),H>>=8,Z-=8;0<ye&&(Y.writeByte(ye),Y.writeBytesView(K,0,ye),ye=0)}}};function p(U,W,G){return U<<8&63488|W<<2&992|G>>3}function m(U,W,G,z){return U>>4|240&W|(240&G)<<4|(240&z)<<8}function y(U,W,G){return U>>4<<8|240&W|G>>4}function f(U,W,G){return U<W?W:G<U?G:U}function v(U){return U*U}function _(U,W,G){var z=0,Y=1e100;const K=U[W];for(var ie=K.cnt,E=K.ac,R=K.rc,B=K.gc,H=K.bc,Z=K.fw;Z!=0;Z=U[Z].fw){var te,se=U[Z],pe=se.cnt,pe=ie*pe/(ie+pe);Y<=pe||(te=0,Y<=(te+=pe*v(se.rc-R))||Y<=(te+=pe*v(se.gc-B))||Y<=(te+=pe*v(se.bc-H))||(Y=te,z=Z))}K.err=Y,K.nn=z}function x(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function C(U,W){for(var G=0,z=0;z<U.length;z++){var Y=U[z]-W[z];G+=Y*Y}return G}function M(U,W){return 1<W?Math.round(U/W)*W:U}function S(U){return U*U}function P(U,W,G=C){let z=1/0,Y=-1;for(let ie=0;ie<U.length;ie++){var K=G(W,U[ie]);K<z&&(z=K,Y=ie)}return Y}function L(U,W,G=C){let z=1/0,Y=-1;for(let ie=0;ie<U.length;ie++){var K=G(W,U[ie]);K<z&&(z=K,Y=ie)}return[Y,z]}function D(U={}){const{initialCapacity:W=4096,auto:G=!0}=U,z=g(W),Y=new Uint8Array(256),K=new Int32Array(5003),ie=new Int32Array(5003);let E=!1;return{reset(){z.reset(),E=!1},finish(){z.writeByte(b.trailer)},bytes(){return z.bytes()},bytesView(){return z.bytesView()},get buffer(){return z.buffer},get stream(){return z},writeHeader:R,writeFrame(B,H,Z,Ce={}){var{transparent:se=!1,transparentIndex:pe=0,delay:Te=0,palette:oe=null,repeat:_e=0,colorDepth:he=8,dispose:de=-1}=Ce;let J=!1;if(G?E||(J=!0,R(),E=!0):J=!!Ce.first,H=Math.max(0,Math.floor(H)),Z=Math.max(0,Math.floor(Z)),J){if(!oe)throw new Error("First frame must include a { palette } option");var[Ce,Ee,ye,Ie,ge=8]=[z,H,Z,oe,he];Ie=F(Ie.length)-1,ge=128|ge-1<<4|Ie,I(Ce,Ee),I(Ce,ye),Ce.writeBytes([ge,0,0]),k(z,oe),0<=_e&&(Ie=z,Ee=_e,Ie.writeByte(33),Ie.writeByte(255),Ie.writeByte(11),A(Ie,"NETSCAPE2.0"),Ie.writeByte(3),Ie.writeByte(1),I(Ie,Ee),Ie.writeByte(0))}var ue,ye=Math.round(Te/10),Ce=z,ge=de,_e=ye,Ee=se,Ie=pe,Te=(Ce.writeByte(33),Ce.writeByte(249),Ce.writeByte(4),Ie<0&&(Ie=0,Ee=!1),Ee=Ee?(ue=1,2):ue=0,0<=ge&&(Ee=7&ge),Ee<<=2,Ce.writeByte(0|Ee|ue),I(Ce,_e),Ce.writeByte(Ie||0),Ce.writeByte(0),!!oe&&!J);de=z,se=H,pe=Z,ue=Te?oe:null,de.writeByte(44),I(de,0),I(de,0),I(de,se),I(de,pe),ue?(se=F(ue.length)-1,de.writeByte(128|se)):de.writeByte(0),Te&&k(z,oe),[_e,Ce,pe,se,de=8,Te,oe,B]=[z,B,H,Z,he,Y,K,ie],h(pe,se,Ce,de,_e,Te,oe,B)}};function R(){A(z,"GIF89a")}}function k(U,W){var G=1<<F(W.length);for(let z=0;z<G;z++){let Y=[0,0,0];z<W.length&&(Y=W[z]),U.writeByte(Y[0]),U.writeByte(Y[1]),U.writeByte(Y[2])}}function I(U,W){U.writeByte(255&W),U.writeByte(W>>8&255)}function A(U,W){for(var G=0;G<W.length;G++)U.writeByte(W.charCodeAt(G))}function F(U){return Math.max(Math.ceil(Math.log2(U)),1)}var N=D},{}],251:[function(t,i,d){d.read=function(o,c,a,l,_){var g,u,h=8*_-l-1,p=(1<<h)-1,m=p>>1,y=-7,f=a?_-1:0,v=a?-1:1,_=o[c+f];for(f+=v,g=_&(1<<-y)-1,_>>=-y,y+=h;0<y;g=256*g+o[c+f],f+=v,y-=8);for(u=g&(1<<-y)-1,g>>=-y,y+=l;0<y;u=256*u+o[c+f],f+=v,y-=8);if(g===0)g=1-m;else{if(g===p)return u?NaN:1/0*(_?-1:1);u+=Math.pow(2,l),g-=m}return(_?-1:1)*u*Math.pow(2,g-l)},d.write=function(o,c,a,l,b,x){var u,h,p=8*x-b-1,m=(1<<p)-1,y=m>>1,f=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:x-1,_=l?1:-1,x=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(h=isNaN(c)?1:0,u=m):(u=Math.floor(Math.log(c)/Math.LN2),c*(l=Math.pow(2,-u))<1&&(u--,l*=2),2<=(c+=1<=u+y?f/l:f*Math.pow(2,1-y))*l&&(u++,l/=2),m<=u+y?(h=0,u=m):1<=u+y?(h=(c*l-1)*Math.pow(2,b),u+=y):(h=c*Math.pow(2,y-1)*Math.pow(2,b),u=0));8<=b;o[a+v]=255&h,v+=_,h/=256,b-=8);for(u=u<<b|h,p+=b;0<p;o[a+v]=255&u,v+=_,u/=256,p-=8);o[a+v-_]|=128*x}},{}],252:[function(t,i,d){var o;function c(Q,re){return Q.b===re.b&&Q.a===re.a}function a(Q,re){return Q.b<re.b||Q.b===re.b&&Q.a<=re.a}function l(Q,re,$){var ne=re.b-Q.b,ve=$.b-re.b;return 0<ne+ve?ne<ve?re.a-Q.a+ne/(ne+ve)*(Q.a-$.a):re.a-$.a+ve/(ne+ve)*($.a-Q.a):0}function b(Q,re,$){var ne=re.b-Q.b,ve=$.b-re.b;return 0<ne+ve?(re.a-$.a)*ne+(re.a-Q.a)*ve:0}function g(Q,re){return Q.a<re.a||Q.a===re.a&&Q.b<=re.b}function u(Q,re,$){var ne=re.a-Q.a,ve=$.a-re.a;return 0<ne+ve?ne<ve?re.b-Q.b+ne/(ne+ve)*(Q.b-$.b):re.b-$.b+ve/(ne+ve)*($.b-Q.b):0}function h(Q,re,$){var ne=re.a-Q.a,ve=$.a-re.a;return 0<ne+ve?(re.b-$.b)*ne+(re.b-Q.b)*ve:0}function p(Q,re,$,ne){return(Q=Q<0?0:Q)<=($=$<0?0:$)?$===0?(re+ne)/2:re+Q/(Q+$)*(ne-re):ne+$/(Q+$)*(re-ne)}function m(Q){var re=x(Q.b);return M(re,Q.c),M(re.b,Q.c),S(re,Q.a),re}function y(Q,re){var $=!1,ne=!1;Q!==re&&(re.a!==Q.a&&(ne=!0,L(re.a,Q.a)),re.d!==Q.d&&($=!0,D(re.d,Q.d)),C(re,Q),ne||(M(re,Q.a),Q.a.c=Q),$||(S(re,Q.d),Q.d.a=Q))}function f(Q){var re=Q.b,$=!1;Q.d!==Q.b.d&&($=!0,D(Q.d,Q.b.d)),Q.c===Q?L(Q.a,null):(Q.b.d.a=Q.b.e,Q.a.c=Q.c,C(Q,Q.b.e),$||S(Q,Q.d)),re.c===re?(L(re.a,null),D(re.d,null)):(Q.d.a=re.b.e,re.a.c=re.c,C(re,re.b.e)),P(Q)}function v(Q){var re=x(Q),$=re.b;return C(re,Q.e),re.a=Q.b.a,M($,re.a),re.d=$.d=Q.d,re=re.b,C(Q.b,Q.b.b.e),C(Q.b,re),Q.b.a=re.a,re.b.a.c=re.b,re.b.d=Q.b.d,re.f=Q.f,re.b.f=Q.b.f,re}function _(Q,re){var $=!1,ne=x(Q),ve=ne.b;return re.d!==Q.d&&($=!0,D(re.d,Q.d)),C(ne,Q.e),C(ve,re),ne.a=Q.b.a,ve.a=re.a,ne.d=ve.d=Q.d,Q.d.a=ve,$||S(ne,Q.d),ne}function x(Q){var re=new ye,$=new ye,ne=Q.b.h;return((($.h=ne).b.h=re).h=Q).b.h=$,re.b=$,((re.c=re).e=$).b=re,($.c=$).e=re}function C(Q,re){var $=Q.c,ne=re.c;$.b.e=re,(ne.b.e=Q).c=ne,re.c=$}function M(Q,re){var $=re.f,ne=new ge(re,$);for($.e=ne,$=(re.f=ne).c=Q;$.a=ne,($=$.c)!==Q;);}function S(Q,re){var $=re.d,ne=new ue(re,$);for($.b=ne,(re.d=ne).a=Q,ne.c=re.c,$=Q;$.d=ne,($=$.e)!==Q;);}function P(Q){var re=Q.h;Q=Q.b.h,(re.b.h=Q).b.h=re}function L(Q,re){for(var $=Q.c,ne=$;ne.a=re,(ne=ne.c)!==$;);$=Q.f,((ne=Q.e).f=$).e=ne}function D(Q,re){for(var $=Q.a,ne=$;ne.d=re,(ne=ne.e)!==$;);$=Q.d,((ne=Q.b).d=$).b=ne}function k(Q){var re=0;return Math.abs(Q[1])>Math.abs(Q[0])&&(re=1),re=Math.abs(Q[2])>Math.abs(Q[re])?2:re}function I(Q,re){Q.f+=re.f,Q.b.f+=re.b.f}function A(Q,re,$){return Q=Q.a,re=re.a,$=$.a,re.b.a===Q?$.b.a===Q?a(re.a,$.a)?b($.b.a,re.a,$.a)<=0:0<=b(re.b.a,$.a,re.a):b($.b.a,Q,$.a)<=0:$.b.a===Q?0<=b(re.b.a,Q,re.a):(re=l(re.b.a,Q,re.a),(Q=l($.b.a,Q,$.a))<=re)}function F(Q){Q.a.i=null;var re=Q.e;re.a.c=re.c,re.c.a=re.a,Q.e=null}function N(Q,re){f(Q.a),Q.c=!1,(Q.a=re).i=Q}function U(Q){for(var re=Q.a.a;(Q=xe(Q)).a.a===re;);return Q.c&&(N(Q,re=_(Ae(Q).a.b,Q.a.e)),Q=xe(Q)),Q}function W(Q,re,$){var ne=new ce;return ne.a=$,ne.e=pe(Q.f,re.e,ne),$.i=ne}function G(Q,re){switch(Q.s){case 100130:return(1&re)!=0;case 100131:return re!==0;case 100132:return 0<re;case 100133:return re<0;case 100134:return 2<=re||re<=-2}return!1}function z(Q){var re=Q.a,$=re.d;$.c=Q.d,$.a=re,F(Q)}function Y(Q,re,$){for(re=(Q=re).a;Q!==$;){Q.c=!1;var ne=Ae(Q),ve=ne.a;if(ve.a!==re.a){if(!ne.c){z(Q);break}N(ne,ve=_(re.c.b,ve.b))}re.c!==ve&&(y(ve.b.e,ve),y(re,ve)),z(Q),re=ne.a,Q=ne}return re}function K(Q,re,$,ne,ve,je){for(var Le=!0;W(Q,re,$.b),($=$.c)!==ne;);for(ve===null&&(ve=Ae(re).a.b.c);($=(ne=Ae(re)).a.b).a===ve.a;)$.c!==ve&&(y($.b.e,$),y(ve.b.e,$)),ne.f=re.f-$.f,ne.d=G(Q,ne.f),re.b=!0,!Le&&B(Q,re)&&(I($,ve),F(re),f(ve)),Le=!1,re=ne,ve=$;re.b=!0,je&&Z(Q,re)}function ie(Q,re,$,ne,ve){var je=[re.g[0],re.g[1],re.g[2]];re.d=null,re.d=Q.o&&Q.o(je,$,ne,Q.c)||null,re.d===null&&(ve?Q.n||(J(Q,100156),Q.n=!0):re.d=$[0])}function E(Q,re,$){var ne=[null,null,null,null];ne[0]=re.a.d,ne[1]=$.a.d,ie(Q,re.a,ne,[.5,.5,0,0],!1),y(re,$)}function R(Q,re,$,ne,ve){var je=Math.abs(re.b-Q.b)+Math.abs(re.a-Q.a),Le=Math.abs($.b-Q.b)+Math.abs($.a-Q.a),Ne=ve+1;ne[ve]=.5*Le/(je+Le),ne[Ne]=.5*je/(je+Le),Q.g[0]+=ne[ve]*re.g[0]+ne[Ne]*$.g[0],Q.g[1]+=ne[ve]*re.g[1]+ne[Ne]*$.g[1],Q.g[2]+=ne[ve]*re.g[2]+ne[Ne]*$.g[2]}function B(Q,re){var $=Ae(re),ne=re.a,ve=$.a;if(a(ne.a,ve.a)){if(0<b(ve.b.a,ne.a,ve.a))return;if(c(ne.a,ve.a)){if(ne.a!==ve.a){var $=Q.e,je=ne.a.h;if(0<=je){var Le=($=$.b).d,Ne=$.e,Be=$.c,Ue=Be[je];Le[Ue]=Le[$.a],(Be[Le[Ue]]=Ue)<=--$.a&&(Ue<=1||a(Ne[Le[Ue>>1]],Ne[Le[Ue]])?He:qe)($,Ue),Ne[je]=null,Be[je]=$.b,$.b=je}else for($.c[-(je+1)]=null;0<$.a&&$.c[$.d[$.a-1]]===null;)--$.a;E(Q,ve.b.e,ne)}}else v(ve.b),y(ne,ve.b.e),re.b=$.b=!0}else{if(b(ne.b.a,ve.a,ne.a)<0)return;xe(re).b=re.b=!0,v(ne.b),y(ve.b.e,ne)}return 1}function H(Q,re){var $=Ae(re),ne=re.a,ve=$.a,je=ne.a,Le=ve.a,Ne=ne.b.a,Be=ve.b.a,Ue=new ge;if(b(Ne,Q.a,je),b(Be,Q.a,Le),!(je===Le||Math.min(je.a,Ne.a)>Math.max(Le.a,Be.a))){if(a(je,Le)){if(0<b(Be,je,Le))return}else if(b(Ne,Le,je)<0)return;var Xe,ct,ot=Ne,Je=je,lt=Be,st=Le;if(a(ot,Je)||(Xe=ot,ot=Je,Je=Xe),a(lt,st)||(Xe=lt,lt=st,st=Xe),a(ot,lt)||(Xe=ot,ot=lt,lt=Xe,Xe=Je,Je=st,st=Xe),a(lt,Je)?a(Je,st)?((Xe=l(ot,lt,Je))+(ct=l(lt,Je,st))<0&&(Xe=-Xe,ct=-ct),Ue.b=p(Xe,lt.b,ct,Je.b)):((Xe=b(ot,lt,Je))+(ct=-b(ot,st,Je))<0&&(Xe=-Xe,ct=-ct),Ue.b=p(Xe,lt.b,ct,st.b)):Ue.b=(lt.b+Je.b)/2,g(ot,Je)||(Xe=ot,ot=Je,Je=Xe),g(lt,st)||(Xe=lt,lt=st,st=Xe),g(ot,lt)||(Xe=ot,ot=lt,lt=Xe,Xe=Je,Je=st,st=Xe),g(lt,Je)?g(Je,st)?((Xe=u(ot,lt,Je))+(ct=u(lt,Je,st))<0&&(Xe=-Xe,ct=-ct),Ue.a=p(Xe,lt.a,ct,Je.a)):((Xe=h(ot,lt,Je))+(ct=-h(ot,st,Je))<0&&(Xe=-Xe,ct=-ct),Ue.a=p(Xe,lt.a,ct,st.a)):Ue.a=(lt.a+Je.a)/2,a(Ue,Q.a)&&(Ue.b=Q.a.b,Ue.a=Q.a.a),ot=a(je,Le)?je:Le,a(ot,Ue)&&(Ue.b=ot.b,Ue.a=ot.a),c(Ue,je)||c(Ue,Le))return B(Q,re),0;if(!c(Ne,Q.a)&&0<=b(Ne,Q.a,Ue)||!c(Be,Q.a)&&b(Be,Q.a,Ue)<=0){if(Be===Q.a)v(ne.b),y(ve.b,ne),ne=Ae(re=U(re)).a,Y(Q,Ae(re),$),K(Q,re,ne.b.e,ne,ne,!0);else{if(Ne!==Q.a)return 0<=b(Ne,Q.a,Ue)&&(xe(re).b=re.b=!0,v(ne.b),ne.a.b=Q.a.b,ne.a.a=Q.a.a),void(b(Be,Q.a,Ue)<=0&&(re.b=$.b=!0,v(ve.b),ve.a.b=Q.a.b,ve.a.a=Q.a.a));for(v(ve.b),y(ne.e,ve.b.e),Le=(je=$=re).a.b.a;(je=xe(je)).a.b.a===Le;);je=Ae(re=je).a.b.c,$.a=ve.b.e,K(Q,re,(ve=Y(Q,$,null)).c,ne.b.c,je,!0)}return 1}v(ne.b),v(ve.b),y(ve.b.e,ne),ne.a.b=Ue.b,ne.a.a=Ue.a,ne.a.h=Ee(Q.e,ne.a),ne=ne.a,ve=[0,0,0,0],Ue=[je.d,Ne.d,Le.d,Be.d],ne.g[0]=ne.g[1]=ne.g[2]=0,R(ne,je,Ne,ve,0),R(ne,Le,Be,ve,2),ie(Q,ne,Ue,ve,!0),xe(re).b=re.b=$.b=!0}}function Z(Q,re){for(var $=Ae(re);;){for(;$.b;)$=Ae(re=$);if(!re.b&&((re=xe($=re))===null||!re.b))break;re.b=!1;var ne=re.a,ve=$.a;if(je=ne.b.a!==ve.b.a)e:{var je,Le=Ae(je=re),Ne=je.a,Be=Le.a,Ue=void 0;if(a(Ne.b.a,Be.b.a)){if(b(Ne.b.a,Be.b.a,Ne.a)<0){je=!1;break e}xe(je).b=je.b=!0,Ue=v(Ne),y(Be.b,Ue),Ue.d.c=je.d}else{if(0<b(Be.b.a,Ne.b.a,Be.a)){je=!1;break e}je.b=Le.b=!0,Ue=v(Be),y(Ne.e,Be.b),Ue.b.d.c=je.d}je=!0}if(je&&($.c?(F($),f(ve),ve=($=Ae(re)).a):re.c&&(F(re),f(ne),ne=(re=xe($)).a)),ne.a!==ve.a){if(ne.b.a===ve.b.a||re.c||$.c||ne.b.a!==Q.a&&ve.b.a!==Q.a)B(Q,re);else if(H(Q,re))break}ne.a===ve.a&&ne.b.a===ve.b.a&&(I(ve,ne),F(re),f(ne),re=xe($))}}function te(Q,re){var $=new ce,ne=m(Q.b);ne.a.b=4e150,ne.a.a=re,ne.b.a.b=-4e150,ne.b.a.a=re,Q.a=ne.b.a,$.a=ne,$.f=0,$.d=!1,$.c=!1,$.h=!0,$.b=!1,ne=pe(ne=Q.f,ne.a,$),$.e=ne}function se(Q){this.a=new oe,this.b=Q,this.c=A}function pe(Q,re,$){for(;(re=re.c).b!==null&&!Q.c(Q.b,re.b,$););return Q=new oe($,re.a,re),re.a.c=Q,re.a=Q}function oe(Q,re,$){this.b=Q||null,this.a=re||this,this.c=$||this}function he(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function de(Q,re){if(Q.d!==re)for(;Q.d!==re;)if(Q.d<re)switch(Q.d){case 0:J(Q,100151),Q.u(null);break;case 1:J(Q,100152),Q.t()}else switch(Q.d){case 2:J(Q,100154),Q.v();break;case 1:J(Q,100153),Q.w()}}function J(Q,re){Q.p&&Q.p(re,Q.c)}function ue(Q,re){this.b=Q||this,this.d=re||this,this.a=null,this.c=!1}function ye(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ce(){this.c=new ge,this.a=new ue,this.b=new ye,this.d=new ye,this.b.b=this.d,this.d.b=this.b}function ge(Q,re){this.e=Q||this,this.f=re||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function _e(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Te}function Ee(Q,re){var $,ne,ve;return Q.e?(2*(ne=++($=Q.b).a)>$.f&&($.f*=2,$.c=Ke($.c,$.f+1)),$.b===0?ve=ne:(ve=$.b,$.b=$.c[$.b]),$.e[ve]=re,$.c[ve]=ne,$.d[ne]=ve,$.h&&qe($,ne),ve):($=Q.a++,Q.c[$]=re,-($+1))}function Ie(Q){if(Q.a===0)return ze(Q.b);var re=Q.c[Q.d[Q.a-1]];if(Q.b.a!==0&&a(Ge(Q.b),re))return ze(Q.b);for(;--Q.a,0<Q.a&&Q.c[Q.d[Q.a-1]]===null;);return re}function Te(){this.d=Ke([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ke(Q,re){for(var $=Array(re),ne=0;ne<Q.length;ne++)$[ne]=Q[ne];for(;ne<re;ne++)$[ne]=0;return $}function Ge(Q){return Q.e[Q.d[1]]}function ze(Q){var re=Q.d,$=Q.e,ne=Q.c,ve=re[1],je=$[ve];return 0<Q.a&&(re[1]=re[Q.a],ne[re[1]]=1,$[ve]=null,ne[ve]=Q.b,Q.b=ve,0<--Q.a&&He(Q,1)),je}function He(Q,re){for(var $=Q.d,ne=Q.e,ve=Q.c,je=re,Le=$[je];;){var Ne=je<<1,Be=(Ne<Q.a&&a(ne[$[Ne+1]],ne[$[Ne]])&&(Ne+=1),$[Ne]);if(Ne>Q.a||a(ne[Le],ne[Be])){ve[$[je]=Le]=je;break}ve[$[je]=Be]=je,je=Ne}}function qe(Q,re){for(var $=Q.d,ne=Q.e,ve=Q.c,je=re,Le=$[je];;){var Ne=je>>1,Be=$[Ne];if(Ne==0||a(ne[Be],ne[Le])){ve[$[je]=Le]=je;break}ve[$[je]=Be]=je,je=Ne}}function ce(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ae(Q){return Q.e.c.b}function xe(Q){return Q.e.a.b}(o=he.prototype).x=function(){de(this,0)},o.B=function(Q,re){switch(Q){case 100142:return;case 100140:switch(re){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=re)}break;case 100141:return void(this.m=!!re);default:return void J(this,100900)}J(this,100901)},o.y=function(Q){switch(Q){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:J(this,100900)}return!1},o.A=function(Q,re,$){this.j[0]=Q,this.j[1]=re,this.j[2]=$},o.z=function(Q,re){var $=re||null;switch(Q){case 100100:case 100106:this.h=$;break;case 100104:case 100110:this.l=$;break;case 100101:case 100107:this.k=$;break;case 100102:case 100108:this.i=$;break;case 100103:case 100109:this.p=$;break;case 100105:case 100111:this.o=$;break;case 100112:this.r=$;break;default:J(this,100900)}},o.C=function(Q,re){var $=!1,ne=[0,0,0];de(this,2);for(var ve=0;ve<3;++ve){var je=Q[ve];je<-1e150&&(je=-1e150,$=!0),1e150<je&&(je=1e150,$=!0),ne[ve]=je}$&&J(this,100155),($=this.q)===null?y($=m(this.b),$.b):(v($),$=$.e),$.a.d=re,$.a.g[0]=ne[0],$.a.g[1]=ne[1],$.a.g[2]=ne[2],$.f=1,$.b.f=-1,this.q=$},o.u=function(Q){de(this,0),this.d=1,this.b=new Ce,this.c=Q},o.t=function(){de(this,1),this.d=2,this.q=null},o.v=function(){de(this,2),this.d=1},o.w=function(){de(this,1),this.d=0;var Q,re,$=this.j[0],ne=this.j[1],ve=this.j[2],je=!1,Le=[$,ne,ve];if($===0&&ne===0&&ve===0){for(var ne=[-2e150,-2e150,-2e150],Ne=[2e150,2e150,2e150],ve=[],Be=[],$=(je=this.b.c).e;$!==je;$=$.e)for(var Ue=0;Ue<3;++Ue){var Xe=$.g[Ue];Xe<Ne[Ue]&&(Ne[Ue]=Xe,Be[Ue]=$),Xe>ne[Ue]&&(ne[Ue]=Xe,ve[Ue]=$)}if(ne[1]-Ne[1]>ne[$=0]-Ne[0]&&($=1),Ne[$=ne[2]-Ne[2]>ne[$]-Ne[$]?2:$]>=ne[$])Le[0]=0,Le[1]=0,Le[2]=1;else{for(Ne=Be[$],ve=ve[$],Be=[ne=0,0,0],Ne=[Ne.g[0]-ve.g[0],Ne.g[1]-ve.g[1],Ne.g[2]-ve.g[2]],Ue=[0,0,0],$=je.e;$!==je;$=$.e)Ue[0]=$.g[0]-ve.g[0],Ue[1]=$.g[1]-ve.g[1],Ue[2]=$.g[2]-ve.g[2],Be[0]=Ne[1]*Ue[2]-Ne[2]*Ue[1],Be[1]=Ne[2]*Ue[0]-Ne[0]*Ue[2],Be[2]=Ne[0]*Ue[1]-Ne[1]*Ue[0],ne<(Xe=Be[0]*Be[0]+Be[1]*Be[1]+Be[2]*Be[2])&&(ne=Xe,Le[0]=Be[0],Le[1]=Be[1],Le[2]=Be[2]);ne<=0&&(Le[0]=Le[1]=Le[2]=0,Le[k(Ne)]=1)}je=!0}for(Be=k(Le),$=this.b.c,ne=(Be+1)%3,ve=(Be+2)%3,Be=0<Le[Be]?1:-1,Le=$.e;Le!==$;Le=Le.e)Le.b=Le.g[ne],Le.a=Be*Le.g[ve];if(je){for(Le=0,$=(je=this.b.a).b;$!==je;$=$.b)if(!((ne=$.a).f<=0))for(;Le+=(ne.a.b-ne.b.a.b)*(ne.a.a+ne.b.a.a),(ne=ne.e)!==$.a;);if(Le<0)for(je=(Le=this.b.c).e;je!==Le;je=je.e)je.a=-je.a}for(this.n=!1,Le=this.b.b,$=Le.h;$!==Le;$=je)je=$.h,ne=$.e,c($.a,$.b.a)&&$.e.e!==$&&(E(this,ne,$),f($),ne=($=ne).e),ne.e===$&&(ne!==$&&(ne!==je&&ne!==je.b||(je=je.h),f(ne)),$!==je&&$!==je.b||(je=je.h),f($));for(this.e=Le=new _e,je=this.b.c,$=je.e;$!==je;$=$.e)$.h=Ee(Le,$);var ct=Le;ct.d=[];for(var ot=0;ot<ct.a;ot++)ct.d[ot]=ot;ct.d.sort(function(st){return function(zt,Er){return a(st[zt],st[Er])?1:-1}}(ct.c)),ct.e=!0;for(var Je=ct.b,lt=Je.a;1<=lt;--lt)He(Je,lt);for(Je.h=!0,this.f=new se(this),te(this,-4e150),te(this,4e150);(Le=Ie(this.e))!==null;){for(;;){e:if(($=this.e).a===0)je=Ge($.b);else if(je=$.c[$.d[$.a-1]],$.b.a!==0&&a($=Ge($.b),je)){je=$;break e}if(je===null||!c(je,Le))break;je=Ie(this.e),E(this,Le.c,je.c)}(function st(zt,Er){for(var or,At=(zt.a=Er).c;At.i===null;)if((At=At.c)===Er.c){var At=zt,Wt=Er;(Vt=new ce).a=Wt.c.b;for(var xr=(jt=At.f).a;(xr=xr.a).b!==null&&!jt.c(jt.b,Vt,xr.b););var jt,wr,yr=Ae(jt=xr.b),Vt=jt.a,xr=yr.a;return void(b(Vt.b.a,Wt,Vt.a)===0?c((Vt=jt.a).a,Wt)||c(Vt.b.a,Wt)||(v(Vt.b),jt.c&&(f(Vt.c),jt.c=!1),y(Wt.c,Vt),st(At,Wt)):(wr=a(xr.b.a,Vt.b.a)?jt:yr,yr=void 0,jt.d||wr.c?(yr=wr===jt?_(Wt.c.b,Vt.e):_(xr.b.c.b,Wt.c).b,wr.c?N(wr,yr):((jt=W(Vt=At,jt,yr)).f=xe(jt).f+jt.a.f,jt.d=G(Vt,jt.f)),st(At,Wt)):K(At,jt,Wt.c,Wt.c,null,!0)))}jt=(Vt=Ae(At=U(At.i))).a,(Vt=Y(zt,Vt,null)).c===jt?(Vt=(jt=Vt).c,xr=Ae(At),yr=At.a,wr=xr.a,or=!1,yr.b.a!==wr.b.a&&H(zt,At),c(yr.a,zt.a)&&(y(Vt.b.e,yr),Vt=Ae(At=U(At)).a,Y(zt,Ae(At),xr),or=!0),c(wr.a,zt.a)&&(y(jt,wr.b.e),jt=Y(zt,xr,null),or=!0),or?K(zt,At,jt.c,Vt,Vt,!0):(Wt=a(wr.a,yr.a)?wr.b.e:yr,K(zt,At,Wt=_(jt.c.b,Wt),Wt.c,Wt.c,!1),Wt.b.i.c=!0,Z(zt,At))):K(zt,At,Vt.c,jt,jt,!0)})(this,Le)}for(this.a=this.f.a.a.b.a.a,Le=0;(je=this.f.a.a.b)!==null;)je.h||++Le,F(je);for(this.f=null,(Le=this.e).b=null,Le.d=null,this.e=Le.c=null,Le=this.b,$=Le.a.b;$!==Le.a;$=je)je=$.b,($=$.a).e.e===$&&(I($.c,$),f($));if(!this.n){if(Le=this.b,this.m)for($=Le.b.h;$!==Le.b;$=je)je=$.h,$.b.d.c!==$.d.c?$.f=$.d.c?1:-1:f($);else for($=Le.a.b;$!==Le.a;$=je)if(je=$.b,$.c){for($=$.a;a($.b.a,$.a);$=$.c.b);for(;a($.a,$.b.a);$=$.e);for(ne=$.c.b,ve=void 0;$.e!==ne;)if(a($.b.a,ne.a)){for(;ne.e!==$&&(a((re=ne.e).b.a,re.a)||b(ne.a,ne.b.a,ne.e.b.a)<=0);)ne=(ve=_(ne.e,ne)).b;ne=ne.c.b}else{for(;ne.e!==$&&(a((Q=$.c.b).a,Q.b.a)||0<=b($.b.a,$.a,$.c.b.a));)$=(ve=_($,$.c.b)).b;$=$.e}for(;ne.e.e!==$;)ve=_(ne.e,ne),ne=ve.b}if(this.h||this.i||this.k||this.l)if(this.m){for(je=(Le=this.b).a.b;je!==Le.a;je=je.b)if(je.c){for(this.h&&this.h(2,this.c),$=je.a;this.k&&this.k($.a.d,this.c),($=$.e)!==je.a;);this.i&&this.i(this.c)}}else{for(Le=this.b,je=!!this.l,$=!1,ne=-1,ve=Le.a.d;ve!==Le.a;ve=ve.d)if(ve.c)for($||(this.h&&this.h(4,this.c),$=!0),Be=ve.a;je&&(Ne=Be.b.d.c?0:1,ne!==Ne&&(ne=Ne,this.l&&this.l(!!ne,this.c))),this.k&&this.k(Be.a.d,this.c),(Be=Be.e)!==ve.a;);$&&this.i&&this.i(this.c)}if(this.r){for(Le=this.b,$=Le.a.b;$!==Le.a;$=je)if(je=$.b,!$.c){for(ve=(ne=$.a).e,Be=void 0;ve=(Be=ve).e,(Be.d=null)===Be.b.d&&(Be.c===Be?L(Be.a,null):(Be.a.c=Be.c,C(Be,Be.b.e)),(Ne=Be.b).c===Ne?L(Ne.a,null):(Ne.a.c=Ne.c,C(Ne,Ne.b.e)),P(Be)),Be!==ne;);ne=$.d,(($=$.b).d=ne).b=$}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:he,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},he.prototype.gluDeleteTess=he.prototype.x,he.prototype.gluTessProperty=he.prototype.B,he.prototype.gluGetTessProperty=he.prototype.y,he.prototype.gluTessNormal=he.prototype.A,he.prototype.gluTessCallback=he.prototype.z,he.prototype.gluTessVertex=he.prototype.C,he.prototype.gluTessBeginPolygon=he.prototype.u,he.prototype.gluTessBeginContour=he.prototype.t,he.prototype.gluTessEndContour=he.prototype.v,he.prototype.gluTessEndPolygon=he.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(t,i,d){function o(a,l,b,g){var u=0,h=(g=g===void 0?{}:g).loop===void 0?null:g.loop,p=g.palette===void 0?null:g.palette;if(l<=0||b<=0||65535<l||65535<b)throw new Error("Width/Height invalid.");function m(S){if(S=S.length,S<2||256<S||S&S-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return S}a[u++]=71,a[u++]=73,a[u++]=70,a[u++]=56,a[u++]=57,a[u++]=97;var y=0,f=0;if(p!==null){for(var v=m(p);v>>=1;)++y;if(v=1<<y,--y,g.background!==void 0){if(v<=(f=g.background))throw new Error("Background index out of range.");if(f===0)throw new Error("Background index explicitly passed as 0.")}}if(a[u++]=255&l,a[u++]=l>>8&255,a[u++]=255&b,a[u++]=b>>8&255,a[u++]=(p!==null?128:0)|y,a[u++]=f,a[u++]=0,p!==null)for(var _=0,x=p.length;_<x;++_){var C=p[_];a[u++]=C>>16&255,a[u++]=C>>8&255,a[u++]=255&C}if(h!==null){if(h<0||65535<h)throw new Error("Loop count invalid.");a[u++]=33,a[u++]=255,a[u++]=11,a[u++]=78,a[u++]=69,a[u++]=84,a[u++]=83,a[u++]=67,a[u++]=65,a[u++]=80,a[u++]=69,a[u++]=50,a[u++]=46,a[u++]=48,a[u++]=3,a[u++]=1,a[u++]=255&h,a[u++]=h>>8&255,a[u++]=0}var M=!1;this.addFrame=function(S,P,L,D,k,I){if(M===!0&&(--u,M=!1),I=I===void 0?{}:I,S<0||P<0||65535<S||65535<P)throw new Error("x/y invalid.");if(L<=0||D<=0||65535<L||65535<D)throw new Error("Width/Height invalid.");if(k.length<L*D)throw new Error("Not enough pixels for the frame size.");var A=!0,F=I.palette;if(F==null&&(A=!1,F=p),F==null)throw new Error("Must supply either a local or global palette.");for(var U=m(F),N=0;U>>=1;)++N;var U=1<<N,W=I.delay===void 0?0:I.delay,G=I.disposal===void 0?0:I.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var z=!1,Y=0;if(I.transparent!==void 0&&I.transparent!==null&&(z=!0,(Y=I.transparent)<0||U<=Y))throw new Error("Transparent color index.");if(G===0&&!z&&W===0||(a[u++]=33,a[u++]=249,a[u++]=4,a[u++]=G<<2|(z===!0?1:0),a[u++]=255&W,a[u++]=W>>8&255,a[u++]=Y,a[u++]=0),a[u++]=44,a[u++]=255&S,a[u++]=S>>8&255,a[u++]=255&P,a[u++]=P>>8&255,a[u++]=255&L,a[u++]=L>>8&255,a[u++]=255&D,a[u++]=D>>8&255,a[u++]=A===!0?128|N-1:0,A===!0)for(var K=0,ie=F.length;K<ie;++K){var E=F[K];a[u++]=E>>16&255,a[u++]=E>>8&255,a[u++]=255&E}return u=function(R,B,H,Z){R[B++]=H;var te=B++,se=1<<H,pe=se-1,oe=1+se,he=1+oe,de=H+1,J=0,ue=0;function ye(ze){for(;ze<=J;)R[B++]=255&ue,ue>>=8,J-=8,B===te+256&&(R[te]=255,te=B++)}function Ce(ze){ue|=ze<<J,J+=de,ye(8)}var ge=Z[0]&pe,_e={};Ce(se);for(var Ee=1,Ie=Z.length;Ee<Ie;++Ee){var Te=Z[Ee]&pe,Ke=ge<<8|Te,Ge=_e[Ke];if(Ge===void 0){for(ue|=ge<<J,J+=de;8<=J;)R[B++]=255&ue,ue>>=8,J-=8,B===te+256&&(R[te]=255,te=B++);he===4096?(Ce(se),he=1+oe,de=H+1,_e={}):(1<<de<=he&&++de,_e[Ke]=he++),ge=Te}else ge=Ge}return Ce(ge),Ce(oe),ye(1),te+1===B?R[te]=0:(R[te]=B-te-1,R[B++]=0),B}(a,u,N<2?2:N,k)},this.end=function(){return M===!1&&(a[u++]=59,M=!0),u},this.getOutputBuffer=function(){return a},this.setOutputBuffer=function(S){a=S},this.getOutputBufferPosition=function(){return u},this.setOutputBufferPosition=function(S){u=S}}function c(a,l,b,g){for(var u=a[l++],h=1<<u,p=1+h,m=1+p,y=u+1,f=(1<<y)-1,v=0,_=0,x=0,C=a[l++],M=new Int32Array(4096),S=null;;){for(;v<16&&C!==0;)_|=a[l++]<<v,v+=8,C===1?C=a[l++]:--C;if(v<y)break;var P=_&f;if(_>>=y,v-=y,P==h)m=1+p,f=(1<<(y=u+1))-1,S=null;else{if(P==p)break;for(var L=P<m?P:S,D=0,k=L;h<k;)k=M[k]>>8,++D;var I=k;if(g<x+D+(L!==P?1:0))return void console.log("Warning, gif stream longer than expected.");b[x++]=I;var A=x+=D;for(L!==P&&(b[x++]=I),k=L;D--;)k=M[k],b[--A]=255&k,k>>=8;S!==null&&m<4096&&(M[m++]=S<<8|I,f+1<=m&&y<12&&(++y,f=f<<1|1)),S=P}}x!==g&&console.log("Warning, gif stream shorter than expected.")}try{d.GifWriter=o,d.GifReader=function(a){var l=0;if(a[l++]!==71||a[l++]!==73||a[l++]!==70||a[l++]!==56||(a[l++]+1&253)!=56||a[l++]!==97)throw new Error("Invalid GIF 87a/89a header.");var b=a[l++]|a[l++]<<8,g=a[l++]|a[l++]<<8,u=a[l++],h=1<<1+(7&u),p=(a[l++],a[l++],null),m=null,y=(u>>7&&(p=l,l+=3*(m=h)),!0),f=[],v=0,_=null,x=0,C=null;for(this.width=b,this.height=g;y&&l<a.length;)switch(a[l++]){case 33:switch(a[l++]){case 255:if(a[l]!==11||a[l+1]==78&&a[l+2]==69&&a[l+3]==84&&a[l+4]==83&&a[l+5]==67&&a[l+6]==65&&a[l+7]==80&&a[l+8]==69&&a[l+9]==50&&a[l+10]==46&&a[l+11]==48&&a[l+12]==3&&a[l+13]==1&&a[l+16]==0)l+=14,C=a[l++]|a[l++]<<8,l++;else for(l+=12;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}break;case 249:if(a[l++]!==4||a[l+4]!==0)throw new Error("Invalid graphics extension block.");var M=a[l++],v=a[l++]|a[l++]<<8,_=a[l++];!(1&M)&&(_=null),x=M>>2&7,l++;break;case 254:for(;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}break;default:throw new Error("Unknown graphic control label: 0x"+a[l-1].toString(16))}break;case 44:var S,P=a[l++]|a[l++]<<8,L=a[l++]|a[l++]<<8,D=a[l++]|a[l++]<<8,k=a[l++]|a[l++]<<8,W=a[l++],I=W>>6&1,A=1<<1+(7&W),F=p,N=m,U=!1,W=(W>>7&&(U=!0,F=l,l+=3*(N=A)),l);for(l++;;){if(!(0<=(S=a[l++])))throw Error("Invalid block size");if(S===0)break;l+=S}f.push({x:P,y:L,width:D,height:k,has_local_palette:U,palette_offset:F,palette_size:N,data_offset:W,data_length:l-W,transparent_index:_,interlaced:!!I,delay:v,disposal:x});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+a[l-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(G){if(G<0||G>=f.length)throw new Error("Frame index out of range.");return f[G]},this.decodeAndBlitFrameBGRA=function(G,z){for(var G=this.frameInfo(G),Y=G.width*G.height,K=new Uint8Array(Y),ie=(c(a,G.data_offset,K,Y),G.palette_offset),E=G.transparent_index,R=(E===null&&(E=256),G.width),B=b-R,H=R,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),se=Z,pe=4*B,oe=(G.interlaced===!0&&(pe+=4*b*7),8),he=0,de=K.length;he<de;++he){var J,ue,ye=K[he];H===0&&(H=R,te<=(se+=pe)&&(pe=4*B+4*b*(oe-1),se=Z+(R+B)*(oe<<1),oe>>=1)),ye===E?se+=4:(J=a[ie+3*ye],ue=a[ie+3*ye+1],ye=a[ie+3*ye+2],z[se++]=ye,z[se++]=ue,z[se++]=J,z[se++]=255),--H}},this.decodeAndBlitFrameRGBA=function(G,z){for(var G=this.frameInfo(G),Y=G.width*G.height,K=new Uint8Array(Y),ie=(c(a,G.data_offset,K,Y),G.palette_offset),E=G.transparent_index,R=(E===null&&(E=256),G.width),B=b-R,H=R,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),se=Z,pe=4*B,oe=(G.interlaced===!0&&(pe+=4*b*7),8),he=0,de=K.length;he<de;++he){var J,ue,ye=K[he];H===0&&(H=R,te<=(se+=pe)&&(pe=4*B+4*b*(oe-1),se=Z+(R+B)*(oe<<1),oe>>=1)),ye===E?se+=4:(J=a[ie+3*ye],ue=a[ie+3*ye+1],ye=a[ie+3*ye+2],z[se++]=J,z[se++]=ue,z[se++]=ye,z[se++]=255),--H}}}}catch{}},{}],254:[function(t,i,d){(function(o){var c,a;c=this,a=function(l){function b(V){if(this==null)throw TypeError();var j,T=String(this),O=T.length,V=V?Number(V):0;if(!((V=V!=V?0:V)<0||O<=V))return 55296<=(j=T.charCodeAt(V))&&j<=56319&&V+1<O&&56320<=(O=T.charCodeAt(V+1))&&O<=57343?1024*(j-55296)+O-56320+65536:j}String.prototype.codePointAt||((g=function(){try{var w={},j=Object.defineProperty,T=j(w,w,w)&&j}catch{}return T}())?g(String.prototype,"codePointAt",{value:b,configurable:!0,writable:!0}):String.prototype.codePointAt=b);var g,u=0,h=-3;function p(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function m(w,j){this.source=w,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=j,this.destLen=0,this.ltree=new p,this.dtree=new p}var y=new p,f=new p,v=new Uint8Array(30),_=new Uint16Array(30),x=new Uint8Array(30),C=new Uint16Array(30),M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new p,P=new Uint8Array(320);function L(w,j,T,O){for(var V,q=0;q<T;++q)w[q]=0;for(q=0;q<30-T;++q)w[q+T]=q/T|0;for(V=O,q=0;q<30;++q)j[q]=V,V+=1<<w[q]}var D=new Uint16Array(16);function k(w,j,T,O){for(var V,q=0;q<16;++q)w.table[q]=0;for(q=0;q<O;++q)w.table[j[T+q]]++;for(q=V=w.table[0]=0;q<16;++q)D[q]=V,V+=w.table[q];for(q=0;q<O;++q)j[T+q]&&(w.trans[D[j[T+q]]++]=q)}function I(w,j,T){if(!j)return T;for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;var O=w.tag&65535>>>16-j;return w.tag>>>=j,w.bitcount-=j,O+T}function A(w,j){for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;for(var T=0,O=0,V=0,q=w.tag;O=2*O+(1&q),q>>>=1,T+=j.table[++V],0<=(O-=j.table[V]););return w.tag=q,w.bitcount-=V,j.trans[T+O]}function F(w,j,T){for(;;){var O=A(w,j);if(O===256)return u;if(O<256)w.dest[w.destLen++]=O;else for(var V,q=I(w,v[O-=257],_[O]),O=A(w,T),X=V=w.destLen-I(w,x[O],C[O]);X<V+q;++X)w.dest[w.destLen++]=w.dest[X]}}for(var N=y,U=f,W=0;W<7;++W)N.table[W]=0;for(N.table[7]=24,N.table[8]=152,N.table[9]=112,W=0;W<24;++W)N.trans[W]=256+W;for(W=0;W<144;++W)N.trans[24+W]=W;for(W=0;W<8;++W)N.trans[168+W]=280+W;for(W=0;W<112;++W)N.trans[176+W]=144+W;for(W=0;W<5;++W)U.table[W]=0;for(U.table[5]=32,W=0;W<32;++W)U.trans[W]=W;L(v,_,4,3),L(x,C,2,1),v[28]=0,_[28]=258;var G=function(w,j){var T,O,V,q=new m(w,j);do{switch(V=void 0,(O=q).bitcount--||(O.tag=O.source[O.sourceIndex++],O.bitcount=7),V=1&O.tag,O.tag>>>=1,O=V,I(q,2,0)){case 0:T=function(ke){for(var tt,dt;8<ke.bitcount;)ke.sourceIndex--,ke.bitcount-=8;if((tt=256*ke.source[ke.sourceIndex+1]+ke.source[ke.sourceIndex])!==(65535&~(256*ke.source[ke.sourceIndex+3]+ke.source[ke.sourceIndex+2])))return h;for(ke.sourceIndex+=4,dt=tt;dt;--dt)ke.dest[ke.destLen++]=ke.source[ke.sourceIndex++];return ke.bitcount=0,u}(q);break;case 1:T=F(q,y,f);break;case 2:Oe=Me=Re=Pe=X=fe=we=Se=be=ae=le=ee=void 0;for(var X,ee=q,le=q.ltree,ae=q.dtree,be=I(ee,5,257),Se=I(ee,5,1),we=I(ee,4,4),fe=0;fe<19;++fe)P[fe]=0;for(fe=0;fe<we;++fe){var Re=I(ee,3,0);P[M[fe]]=Re}for(k(S,P,0,19),X=0;X<be+Se;){var Me=A(ee,S);switch(Me){case 16:for(var Oe=P[X-1],Pe=I(ee,2,3);Pe;--Pe)P[X++]=Oe;break;case 17:for(Pe=I(ee,3,3);Pe;--Pe)P[X++]=0;break;case 18:for(Pe=I(ee,7,11);Pe;--Pe)P[X++]=0;break;default:P[X++]=Me}}k(le,P,0,be),k(ae,P,be,Se),T=F(q,q.ltree,q.dtree);break;default:T=h}if(T!==u)throw new Error("Data error")}while(!O);return q.destLen<q.dest.length?typeof q.dest.slice=="function"?q.dest.slice(0,q.destLen):q.dest.subarray(0,q.destLen):q.dest};function z(w,j,T,O,V){return Math.pow(1-V,3)*w+3*Math.pow(1-V,2)*V*j+3*(1-V)*Math.pow(V,2)*T+Math.pow(V,3)*O}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function K(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ie(w){throw new Error(w)}function E(w,j){w||ie(j)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(w,j){typeof w=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=w,this.x2=w),w<this.x1&&(this.x1=w),w>this.x2&&(this.x2=w)),typeof j=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))},Y.prototype.addX=function(w){this.addPoint(w,null)},Y.prototype.addY=function(w){this.addPoint(null,w)},Y.prototype.addBezier=function(w,j,T,O,V,q,X,ee){var le=[w,j],ae=[T,O],be=[V,q],Se=[X,ee];this.addPoint(w,j),this.addPoint(X,ee);for(var we=0;we<=1;we++){var fe,Re=6*le[we]-12*ae[we]+6*be[we],Me=-3*le[we]+9*ae[we]-9*be[we]+3*Se[we],Oe=3*ae[we]-3*le[we];Me==0?Re==0||0<(fe=-Oe/Re)&&fe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],fe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],fe))):(fe=Math.pow(Re,2)-4*Oe*Me)<0||(0<(Oe=(-Re+Math.sqrt(fe))/(2*Me))&&Oe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],Oe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],Oe))),0<(Oe=(-Re-Math.sqrt(fe))/(2*Me))&&Oe<1&&(we===0&&this.addX(z(le[we],ae[we],be[we],Se[we],Oe)),we===1&&this.addY(z(le[we],ae[we],be[we],Se[we],Oe))))}},Y.prototype.addQuad=function(w,j,T,O,V,q){T=w+2/3*(T-w),O=j+2/3*(O-j),this.addBezier(w,j,T,O,T+1/3*(V-w),O+1/3*(q-j),V,q)},K.prototype.moveTo=function(w,j){this.commands.push({type:"M",x:w,y:j})},K.prototype.lineTo=function(w,j){this.commands.push({type:"L",x:w,y:j})},K.prototype.curveTo=K.prototype.bezierCurveTo=function(w,j,T,O,V,q){this.commands.push({type:"C",x1:w,y1:j,x2:T,y2:O,x:V,y:q})},K.prototype.quadTo=K.prototype.quadraticCurveTo=function(w,j,T,O){this.commands.push({type:"Q",x1:w,y1:j,x:T,y:O})},K.prototype.close=K.prototype.closePath=function(){this.commands.push({type:"Z"})},K.prototype.extend=function(w){var j;if(w.commands)w=w.commands;else if(w instanceof Y)return j=w,this.moveTo(j.x1,j.y1),this.lineTo(j.x2,j.y1),this.lineTo(j.x2,j.y2),this.lineTo(j.x1,j.y2),void this.close();Array.prototype.push.apply(this.commands,w)},K.prototype.getBoundingBox=function(){for(var w=new Y,j=0,T=0,O=0,V=0,q=0;q<this.commands.length;q++){var X=this.commands[q];switch(X.type){case"M":w.addPoint(X.x,X.y),j=O=X.x,T=V=X.y;break;case"L":w.addPoint(X.x,X.y),O=X.x,V=X.y;break;case"Q":w.addQuad(O,V,X.x1,X.y1,X.x,X.y),O=X.x,V=X.y;break;case"C":w.addBezier(O,V,X.x1,X.y1,X.x2,X.y2,X.x,X.y),O=X.x,V=X.y;break;case"Z":O=j,V=T;break;default:throw new Error("Unexpected path command "+X.type)}}return w.isEmpty()&&w.addPoint(0,0),w},K.prototype.draw=function(w){w.beginPath();for(var j=0;j<this.commands.length;j+=1){var T=this.commands[j];T.type==="M"?w.moveTo(T.x,T.y):T.type==="L"?w.lineTo(T.x,T.y):T.type==="C"?w.bezierCurveTo(T.x1,T.y1,T.x2,T.y2,T.x,T.y):T.type==="Q"?w.quadraticCurveTo(T.x1,T.y1,T.x,T.y):T.type==="Z"&&w.closePath()}this.fill&&(w.fillStyle=this.fill,w.fill()),this.stroke&&(w.strokeStyle=this.stroke,w.lineWidth=this.strokeWidth,w.stroke())},K.prototype.toPathData=function(w){function j(){for(var q=arguments,X="",ee=0;ee<arguments.length;ee+=1){var le=q[ee];0<=le&&0<ee&&(X+=" "),X+=(le=le,Math.round(le)===le?""+Math.round(le):le.toFixed(w))}return X}w=w!==void 0?w:2;for(var T="",O=0;O<this.commands.length;O+=1){var V=this.commands[O];V.type==="M"?T+="M"+j(V.x,V.y):V.type==="L"?T+="L"+j(V.x,V.y):V.type==="C"?T+="C"+j(V.x1,V.y1,V.x2,V.y2,V.x,V.y):V.type==="Q"?T+="Q"+j(V.x1,V.y1,V.x,V.y):V.type==="Z"&&(T+="Z")}return T},K.prototype.toSVG=function(w){var j=(j='<path d="')+this.toPathData(w)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?j+=' fill="none"':j+=' fill="'+this.fill+'"'),this.stroke&&(j+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),j+="/>"},K.prototype.toDOMElement=function(j){var j=this.toPathData(j),T=document.createElementNS("http://www.w3.org/2000/svg","path");return T.setAttribute("d",j),T};var R={fail:ie,argument:E,assert:E},B={},H={},Z={};function te(w){return function(){return w}}H.BYTE=function(w){return R.argument(0<=w&&w<=255,"Byte value should be between 0 and 255."),[w]},Z.BYTE=te(1),H.CHAR=function(w){return[w.charCodeAt(0)]},Z.CHAR=te(1),H.CHARARRAY=function(w){for(var j=[],T=0;T<w.length;T+=1)j[T]=w.charCodeAt(T);return j},Z.CHARARRAY=function(w){return w.length},H.USHORT=function(w){return[w>>8&255,255&w]},Z.USHORT=te(2),H.SHORT=function(w){return[(w=32768<=w?-(65536-w):w)>>8&255,255&w]},Z.SHORT=te(2),H.UINT24=function(w){return[w>>16&255,w>>8&255,255&w]},Z.UINT24=te(3),H.ULONG=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]},Z.ULONG=te(4),H.LONG=function(w){return[(w=2147483648<=w?-(4294967296-w):w)>>24&255,w>>16&255,w>>8&255,255&w]},Z.LONG=te(4),H.FIXED=H.ULONG,Z.FIXED=Z.ULONG,H.FWORD=H.SHORT,Z.FWORD=Z.SHORT,H.UFWORD=H.USHORT,Z.UFWORD=Z.USHORT,H.LONGDATETIME=function(w){return[0,0,0,0,w>>24&255,w>>16&255,w>>8&255,255&w]},Z.LONGDATETIME=te(8),H.TAG=function(w){return R.argument(w.length===4,"Tag should be exactly 4 ASCII characters."),[w.charCodeAt(0),w.charCodeAt(1),w.charCodeAt(2),w.charCodeAt(3)]},Z.TAG=te(4),H.Card8=H.BYTE,Z.Card8=Z.BYTE,H.Card16=H.USHORT,Z.Card16=Z.USHORT,H.OffSize=H.BYTE,Z.OffSize=Z.BYTE,H.SID=H.USHORT,Z.SID=Z.USHORT,H.NUMBER=function(w){return-107<=w&&w<=107?[w+139]:108<=w&&w<=1131?[247+((w-=108)>>8),255&w]:-1131<=w&&w<=-108?[251+((w=-w-108)>>8),255&w]:-32768<=w&&w<=32767?H.NUMBER16(w):H.NUMBER32(w)},Z.NUMBER=function(w){return H.NUMBER(w).length},H.NUMBER16=function(w){return[28,w>>8&255,255&w]},Z.NUMBER16=te(3),H.NUMBER32=function(w){return[29,w>>24&255,w>>16&255,w>>8&255,255&w]},Z.NUMBER32=te(5),H.REAL=function(w){for(var j=w.toString(),T=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(j),O=(T&&(T=parseFloat("1e"+((T[2]?+T[2]:0)+T[1].length)),j=(Math.round(w*T)/T).toString()),""),V=0,q=j.length;V<q;V+=1){var X=j[V];O+=X==="e"?j[++V]==="-"?"c":"b":X==="."?"a":X==="-"?"e":X}for(var ee=[30],le=0,ae=(O+=1&O.length?"f":"ff").length;le<ae;le+=2)ee.push(parseInt(O.substr(le,2),16));return ee},Z.REAL=function(w){return H.REAL(w).length},H.NAME=H.CHARARRAY,Z.NAME=Z.CHARARRAY,H.STRING=H.CHARARRAY,Z.STRING=Z.CHARARRAY,B.UTF8=function(w,j,T){for(var O=[],V=T,q=0;q<V;q++,j+=1)O[q]=w.getUint8(j);return String.fromCharCode.apply(null,O)},B.UTF16=function(w,j,T){for(var O=[],V=T/2,q=0;q<V;q++,j+=2)O[q]=w.getUint16(j);return String.fromCharCode.apply(null,O)},H.UTF16=function(w){for(var j=[],T=0;T<w.length;T+=1){var O=w.charCodeAt(T);j[j.length]=O>>8&255,j[j.length]=255&O}return j},Z.UTF16=function(w){return 2*w.length};var se,pe={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},oe=(B.MACSTRING=function(w,j,T,O){var V=pe[O];if(V!==void 0){for(var q="",X=0;X<T;X++){var ee=w.getUint8(j+X);q+=ee<=127?String.fromCharCode(ee):V[127&ee]}return q}},typeof WeakMap=="function"&&new WeakMap);function he(w){return-128<=w&&w<=127}H.MACSTRING=function(w,j){var T=function(X){if(!se)for(var ee in se={},pe)se[ee]=new String(ee);var le=se[X];if(le!==void 0){if(oe){var ae=oe.get(le);if(ae!==void 0)return ae}var be=pe[X];if(be!==void 0){for(var Se={},we=0;we<be.length;we++)Se[be.charCodeAt(we)]=we+128;return oe&&oe.set(le,Se),Se}}}(j);if(T!==void 0){for(var O=[],V=0;V<w.length;V++){var q=w.charCodeAt(V);if(128<=q&&(q=T[q])===void 0)return;O[V]=q}return O}},Z.MACSTRING=function(w,j){return w=H.MACSTRING(w,j),w!==void 0?w.length:0},H.VARDELTAS=function(w){for(var O=0,j=[];O<w.length;)var T=w[O],O=(T===0?function(V,q,X){for(var ee=0,le=V.length;q<le&&ee<64&&V[q]===0;)++q,++ee;return X.push(128|ee-1),q}:-128<=T&&T<=127?function(V,q,X){for(var ee=0,le=V.length,ae=q;ae<le&&ee<64;){var be=V[ae];if(!he(be)||be===0&&ae+1<le&&V[ae+1]===0)break;++ae,++ee}X.push(ee-1);for(var Se=q;Se<ae;++Se)X.push(V[Se]+256&255);return ae}:function(V,q,X){for(var ee=0,le=V.length,ae=q;ae<le&&ee<64;){var be=V[ae];if(be===0||he(be)&&ae+1<le&&he(V[ae+1]))break;++ae,++ee}X.push(64|ee-1);for(var Se=q;Se<ae;++Se){var we=V[Se];X.push(we+65536>>8&255,we+256&255)}return ae})(w,O,j);return j},H.INDEX=function(w){for(var j=1,T=[j],O=[],V=0;V<w.length;V+=1){var q=H.OBJECT(w[V]);Array.prototype.push.apply(O,q),j+=q.length,T.push(j)}if(O.length===0)return[0,0];for(var X=[],ee=1+Math.floor(Math.log(j)/Math.log(2))/8|0,le=[void 0,H.BYTE,H.USHORT,H.UINT24,H.ULONG][ee],ae=0;ae<T.length;ae+=1){var be=le(T[ae]);Array.prototype.push.apply(X,be)}return Array.prototype.concat(H.Card16(w.length),H.OffSize(ee),X,O)},Z.INDEX=function(w){return H.INDEX(w).length},H.DICT=function(w){for(var j=[],T=Object.keys(w),O=T.length,V=0;V<O;V+=1){var q=parseInt(T[V],0),X=w[q];j=(j=j.concat(H.OPERAND(X.value,X.type))).concat(H.OPERATOR(q))}return j},Z.DICT=function(w){return H.DICT(w).length},H.OPERATOR=function(w){return w<1200?[w]:[12,w-1200]},H.OPERAND=function(w,j){var T=[];if(Array.isArray(j))for(var O=0;O<j.length;O+=1)R.argument(w.length===j.length,"Not enough arguments given for type"+j),T=T.concat(H.OPERAND(w[O],j[O]));else if(j==="SID")T=T.concat(H.NUMBER(w));else if(j==="offset")T=T.concat(H.NUMBER32(w));else if(j==="number")T=T.concat(H.NUMBER(w));else{if(j!=="real")throw new Error("Unknown operand type "+j);T=T.concat(H.REAL(w))}return T},H.OP=H.BYTE,Z.OP=Z.BYTE;var de=typeof WeakMap=="function"&&new WeakMap;function J(w,j,T){for(var O=0;O<j.length;O+=1){var V=j[O];this[V.name]=V.value}if(this.tableName=w,this.fields=j,T)for(var q=Object.keys(T),X=0;X<q.length;X+=1){var ee=q[X],le=T[ee];this[ee]!==void 0&&(this[ee]=le)}}function ue(w,j,T){T===void 0&&(T=j.length);var O=new Array(j.length+1);O[0]={name:w+"Count",type:"USHORT",value:T};for(var V=0;V<j.length;V++)O[V+1]={name:w+V,type:"USHORT",value:j[V]};return O}function ye(w,j,T){var O=j.length,V=new Array(O+1);V[0]={name:w+"Count",type:"USHORT",value:O};for(var q=0;q<O;q++)V[q+1]={name:w+q,type:"TABLE",value:T(j[q],q)};return V}function Ce(w,j,T){var O=j.length,V=[];V[0]={name:w+"Count",type:"USHORT",value:O};for(var q=0;q<O;q++)V=V.concat(T(j[q],q));return V}function ge(w){w.format===1?J.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ue("glyph",w.glyphs))):R.assert(!1,"Can't create coverage table format 2 yet.")}function _e(w){J.call(this,"scriptListTable",Ce("scriptRecord",w,function(j,T){var O=j.script,V=O.defaultLangSys;return R.assert(!!V,"Unable to write GSUB: script "+j.tag+" has no default language system."),[{name:"scriptTag"+T,type:"TAG",value:j.tag},{name:"script"+T,type:"TABLE",value:new J("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new J("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:V.reqFeatureIndex}].concat(ue("featureIndex",V.featureIndexes)))}].concat(Ce("langSys",O.langSysRecords,function(q,X){var ee=q.langSys;return[{name:"langSysTag"+X,type:"TAG",value:q.tag},{name:"langSys"+X,type:"TABLE",value:new J("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ee.reqFeatureIndex}].concat(ue("featureIndex",ee.featureIndexes)))}]})))}]}))}function Ee(w){J.call(this,"featureListTable",Ce("featureRecord",w,function(j,T){var O=j.feature;return[{name:"featureTag"+T,type:"TAG",value:j.tag},{name:"feature"+T,type:"TABLE",value:new J("featureTable",[{name:"featureParams",type:"USHORT",value:O.featureParams}].concat(ue("lookupListIndex",O.lookupListIndexes)))}]}))}function Ie(w,j){J.call(this,"lookupListTable",ye("lookup",w,function(T){var O=j[T.lookupType];return R.assert(!!O,"Unable to write GSUB lookup type "+T.lookupType+" tables."),new J("lookupTable",[{name:"lookupType",type:"USHORT",value:T.lookupType},{name:"lookupFlag",type:"USHORT",value:T.lookupFlag}].concat(ye("subtable",T.subtables,O)))}))}H.CHARSTRING=function(w){if(de){var j=de.get(w);if(j!==void 0)return j}for(var q=[],T=w.length,O=0;O<T;O+=1)var V=w[O],q=q.concat(H[V.type](V.value));return de&&de.set(w,q),q},Z.CHARSTRING=function(w){return H.CHARSTRING(w).length},H.OBJECT=function(w){var j=H[w.type];return R.argument(j!==void 0,"No encoding function for type "+w.type),j(w.value)},Z.OBJECT=function(w){var j=Z[w.type];return R.argument(j!==void 0,"No sizeOf function for type "+w.type),j(w.value)},H.TABLE=function(w){for(var j=[],T=w.fields.length,O=[],V=[],q=0;q<T;q+=1){var X=w.fields[q],le=H[X.type],ee=(R.argument(le!==void 0,"No encoding function for field type "+X.type+" ("+X.name+")"),w[X.name]),le=le(ee=ee===void 0?X.value:ee);X.type==="TABLE"?(V.push(j.length),j=j.concat([0,0]),O.push(le)):j=j.concat(le)}for(var ae=0;ae<O.length;ae+=1){var be=V[ae],Se=j.length;R.argument(Se<65536,"Table "+w.tableName+" too big."),j[be]=Se>>8,j[be+1]=255&Se,j=j.concat(O[ae])}return j},Z.TABLE=function(w){for(var j=0,T=w.fields.length,O=0;O<T;O+=1){var V=w.fields[O],q=Z[V.type],X=(R.argument(q!==void 0,"No sizeOf function for field type "+V.type+" ("+V.name+")"),w[V.name]);j+=q(X=X===void 0?V.value:X),V.type==="TABLE"&&(j+=2)}return j},H.RECORD=H.TABLE,Z.RECORD=Z.TABLE,H.LITERAL=function(w){return w},Z.LITERAL=function(w){return w.length},J.prototype.encode=function(){return H.TABLE(this)},J.prototype.sizeOf=function(){return Z.TABLE(this)};var Te={Table:J,Record:J,Coverage:(ge.prototype=Object.create(J.prototype)).constructor=ge,ScriptList:(_e.prototype=Object.create(J.prototype)).constructor=_e,FeatureList:(Ee.prototype=Object.create(J.prototype)).constructor=Ee,LookupList:(Ie.prototype=Object.create(J.prototype)).constructor=Ie,ushortList:ue,tableList:ye,recordList:Ce};function Ke(w,j){return w.getUint8(j)}function Ge(w,j){return w.getUint16(j,!1)}function ze(w,j){return w.getUint32(j,!1)}function He(w,j){return w.getInt16(j,!1)+w.getUint16(j+2,!1)/65535}var qe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ce(w,j){this.data=w,this.offset=j,this.relativeOffset=0}ce.prototype.parseByte=function(){var w=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},ce.prototype.parseChar=function(){var w=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},ce.prototype.parseCard8=ce.prototype.parseByte,ce.prototype.parseCard16=ce.prototype.parseUShort=function(){var w=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},ce.prototype.parseSID=ce.prototype.parseUShort,ce.prototype.parseOffset16=ce.prototype.parseUShort,ce.prototype.parseShort=function(){var w=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},ce.prototype.parseF2Dot14=function(){var w=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,w},ce.prototype.parseOffset32=ce.prototype.parseULong=function(){var w=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},ce.prototype.parseFixed=function(){var w=He(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},ce.prototype.parseString=function(w){var j=this.data,T=this.offset+this.relativeOffset,O="";this.relativeOffset+=w;for(var V=0;V<w;V++)O+=String.fromCharCode(j.getUint8(T+V));return O},ce.prototype.parseTag=function(){return this.parseString(4)},ce.prototype.parseLongDateTime=function(){var w=ze(this.data,this.offset+this.relativeOffset+4);return w-=2082844800,this.relativeOffset+=8,w},ce.prototype.parseVersion=function(w){var j=Ge(this.data,this.offset+this.relativeOffset),T=Ge(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,j+T/(w=w===void 0?4096:w)/10},ce.prototype.skip=function(w,j){this.relativeOffset+=qe[w]*(j=j===void 0?1:j)},ce.prototype.parseULongList=function(w){w===void 0&&(w=this.parseULong());for(var j=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)j[V]=T.getUint32(O),O+=4;return this.relativeOffset+=4*w,j},ce.prototype.parseOffset16List=ce.prototype.parseUShortList=function(w){w===void 0&&(w=this.parseUShort());for(var j=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)j[V]=T.getUint16(O),O+=2;return this.relativeOffset+=2*w,j},ce.prototype.parseShortList=function(w){for(var j=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)j[V]=T.getInt16(O),O+=2;return this.relativeOffset+=2*w,j},ce.prototype.parseByteList=function(w){for(var j=new Array(w),T=this.data,O=this.offset+this.relativeOffset,V=0;V<w;V++)j[V]=T.getUint8(O++);return this.relativeOffset+=w,j},ce.prototype.parseList=function(w,j){j||(j=w,w=this.parseUShort());for(var T=new Array(w),O=0;O<w;O++)T[O]=j.call(this);return T},ce.prototype.parseList32=function(w,j){j||(j=w,w=this.parseULong());for(var T=new Array(w),O=0;O<w;O++)T[O]=j.call(this);return T},ce.prototype.parseRecordList=function(w,j){j||(j=w,w=this.parseUShort());for(var T=new Array(w),O=Object.keys(j),V=0;V<w;V++){for(var q={},X=0;X<O.length;X++){var ee=O[X],le=j[ee];q[ee]=le.call(this)}T[V]=q}return T},ce.prototype.parseRecordList32=function(w,j){j||(j=w,w=this.parseULong());for(var T=new Array(w),O=Object.keys(j),V=0;V<w;V++){for(var q={},X=0;X<O.length;X++){var ee=O[X],le=j[ee];q[ee]=le.call(this)}T[V]=q}return T},ce.prototype.parseStruct=function(w){if(typeof w=="function")return w.call(this);for(var j=Object.keys(w),T={},O=0;O<j.length;O++){var V=j[O],q=w[V];T[V]=q.call(this)}return T},ce.prototype.parseValueRecord=function(w){var j;if((w=w===void 0?this.parseUShort():w)!==0)return j={},1&w&&(j.xPlacement=this.parseShort()),2&w&&(j.yPlacement=this.parseShort()),4&w&&(j.xAdvance=this.parseShort()),8&w&&(j.yAdvance=this.parseShort()),16&w&&(j.xPlaDevice=void 0,this.parseShort()),32&w&&(j.yPlaDevice=void 0,this.parseShort()),64&w&&(j.xAdvDevice=void 0,this.parseShort()),128&w&&(j.yAdvDevice=void 0,this.parseShort()),j},ce.prototype.parseValueRecordList=function(){for(var w=this.parseUShort(),j=this.parseUShort(),T=new Array(j),O=0;O<j;O++)T[O]=this.parseValueRecord(w);return T},ce.prototype.parsePointer=function(w){var j=this.parseOffset16();if(0<j)return new ce(this.data,this.offset+j).parseStruct(w)},ce.prototype.parsePointer32=function(w){var j=this.parseOffset32();if(0<j)return new ce(this.data,this.offset+j).parseStruct(w)},ce.prototype.parseListOfLists=function(w){for(var j=this.parseOffset16List(),T=j.length,O=this.relativeOffset,V=new Array(T),q=0;q<T;q++){var X=j[q];if(X===0)V[q]=void 0;else if(this.relativeOffset=X,w){for(var ee=this.parseOffset16List(),le=new Array(ee.length),ae=0;ae<ee.length;ae++)this.relativeOffset=X+ee[ae],le[ae]=w.call(this);V[q]=le}else V[q]=this.parseUShortList()}return this.relativeOffset=O,V},ce.prototype.parseCoverage=function(){var w=this.offset+this.relativeOffset,j=this.parseUShort(),T=this.parseUShort();if(j===1)return{format:1,glyphs:this.parseUShortList(T)};if(j!==2)throw new Error("0x"+w.toString(16)+": Coverage format must be 1 or 2.");for(var O=new Array(T),V=0;V<T;V++)O[V]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:O}},ce.prototype.parseClassDef=function(){var w=this.offset+this.relativeOffset,j=this.parseUShort();if(j===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(j===2)return{format:2,ranges:this.parseRecordList({start:ce.uShort,end:ce.uShort,classId:ce.uShort})};throw new Error("0x"+w.toString(16)+": ClassDef format must be 1 or 2.")},ce.list=function(w,j){return function(){return this.parseList(w,j)}},ce.list32=function(w,j){return function(){return this.parseList32(w,j)}},ce.recordList=function(w,j){return function(){return this.parseRecordList(w,j)}},ce.recordList32=function(w,j){return function(){return this.parseRecordList32(w,j)}},ce.pointer=function(w){return function(){return this.parsePointer(w)}},ce.pointer32=function(w){return function(){return this.parsePointer32(w)}},ce.tag=ce.prototype.parseTag,ce.byte=ce.prototype.parseByte,ce.uShort=ce.offset16=ce.prototype.parseUShort,ce.uShortList=ce.prototype.parseUShortList,ce.uLong=ce.offset32=ce.prototype.parseULong,ce.uLongList=ce.prototype.parseULongList,ce.struct=ce.prototype.parseStruct,ce.coverage=ce.prototype.parseCoverage,ce.classDef=ce.prototype.parseClassDef;var Ae={reserved:ce.uShort,reqFeatureIndex:ce.uShort,featureIndexes:ce.uShortList},xe=(ce.prototype.parseScriptList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,script:ce.pointer({defaultLangSys:ce.pointer(Ae),langSysRecords:ce.recordList({tag:ce.tag,langSys:ce.pointer(Ae)})})}))||[]},ce.prototype.parseFeatureList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,feature:ce.pointer({featureParams:ce.offset16,lookupListIndexes:ce.uShortList})}))||[]},ce.prototype.parseLookupList=function(w){return this.parsePointer(ce.list(ce.pointer(function(){var j=this.parseUShort(),T=(R.argument(1<=j&&j<=9,"GPOS/GSUB lookup type "+j+" unknown."),this.parseUShort()),O=16&T;return{lookupType:j,lookupFlag:T,subtables:this.parseList(ce.pointer(w[j])),markFilteringSet:O?this.parseUShort():void 0}})))||[]},ce.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var w=this.parseUShort(),j=this.parseUShort();return R.argument(w===1&&j<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ce.offset32,featureTableSubstitutionOffset:ce.offset32})})||[]},{getByte:Ke,getCard8:Ke,getUShort:Ge,getCard16:Ge,getShort:function(w,j){return w.getInt16(j,!1)},getULong:ze,getFixed:He,getTag:function(w,j){for(var T="",O=j;O<j+4;O+=1)T+=String.fromCharCode(w.getInt8(O));return T},getOffset:function(w,j,T){for(var O=0,V=0;V<T;V+=1)O=(O<<=8)+w.getUint8(j+V);return O},getBytes:function(w,j,T){for(var O=[],V=j;V<T;V+=1)O.push(w.getUint8(V));return O},bytesToString:function(w){for(var j="",T=0;T<w.length;T+=1)j+=String.fromCharCode(w[T]);return j},Parser:ce}),Q={parse:function(w,j){for(var T={},O=(T.version=xe.getUShort(w,j),R.argument(T.version===0,"cmap table version should be 0."),T.numTables=xe.getUShort(w,j+2),-1),V=T.numTables-1;0<=V;--V){var q=xe.getUShort(w,j+4+8*V),X=xe.getUShort(w,j+4+8*V+2);if(q===3&&(X===0||X===1||X===10)||q===0&&(X===0||X===1||X===2||X===3||X===4)){O=xe.getULong(w,j+4+8*V+4);break}}if(O===-1)throw new Error("No valid cmap sub-tables found.");var ee=new xe.Parser(w,j+O);if(T.format=ee.parseUShort(),T.format===12){var le,ae=T,be=ee;be.parseUShort(),ae.length=be.parseULong(),ae.language=be.parseULong(),ae.groupCount=le=be.parseULong(),ae.glyphIndexMap={};for(var Se=0;Se<le;Se+=1)for(var we=be.parseULong(),fe=be.parseULong(),Re=be.parseULong(),Me=we;Me<=fe;Me+=1)ae.glyphIndexMap[Me]=Re,Re++}else{if(T.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+T.format+").");var Oe=T,Pe=w,ke=j,tt=O;Oe.length=ee.parseUShort(),Oe.language=ee.parseUShort(),Oe.segCount=dt=ee.parseUShort()>>1,ee.skip("uShort",3),Oe.glyphIndexMap={};for(var dt,rt=new xe.Parser(Pe,ke+tt+14),nt=new xe.Parser(Pe,ke+tt+16+2*dt),yt=new xe.Parser(Pe,ke+tt+16+4*dt),qt=new xe.Parser(Pe,ke+tt+16+6*dt),rr=ke+tt+16+8*dt,ar=0;ar<dt-1;ar+=1)for(var Sr=void 0,Pr=rt.parseUShort(),on=nt.parseUShort(),Ut=yt.parseShort(),Xt=qt.parseUShort(),Ft=on;Ft<=Pr;Ft+=1)Xt!==0?(rr=(rr=qt.offset+qt.relativeOffset-2)+Xt+2*(Ft-on),(Sr=xe.getUShort(Pe,rr))!==0&&(Sr=Sr+Ut&65535)):Sr=Ft+Ut&65535,Oe.glyphIndexMap[Ft]=Sr}return T},make:function(w){for(var j=!0,T=w.length-1;0<T;--T)if(65535<w.get(T).unicode){console.log("Adding CMAP format 12 (needed!)"),j=!1;break}var O,V,q=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:j?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:j?12:20}],X=(q=(q=j?q:q.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Te.Table("cmap",q));for(X.segments=[],T=0;T<w.length;T+=1){for(var ee=w.get(T),le=0;le<ee.unicodes.length;le+=1)O=ee.unicodes[le],V=T,X.segments.push({end:O,start:O,delta:-(O-V),offset:0,glyphIndex:V});X.segments=X.segments.sort(function(ke,tt){return ke.start-tt.start})}X.segments.push({end:65535,start:65535,delta:1,offset:0});var ae=X.segments.length,be=0,Se=[],we=[],fe=[],Re=[],Me=[],Oe=[];for(T=0;T<ae;T+=1){var Pe=X.segments[T];Pe.end<=65535&&Pe.start<=65535?(Se=Se.concat({name:"end_"+T,type:"USHORT",value:Pe.end}),we=we.concat({name:"start_"+T,type:"USHORT",value:Pe.start}),fe=fe.concat({name:"idDelta_"+T,type:"SHORT",value:Pe.delta}),Re=Re.concat({name:"idRangeOffset_"+T,type:"USHORT",value:Pe.offset}),Pe.glyphId!==void 0&&(Me=Me.concat({name:"glyph_"+T,type:"USHORT",value:Pe.glyphId}))):be+=1,j||Pe.glyphIndex===void 0||(Oe=(Oe=(Oe=Oe.concat({name:"cmap12Start_"+T,type:"ULONG",value:Pe.start})).concat({name:"cmap12End_"+T,type:"ULONG",value:Pe.end})).concat({name:"cmap12Glyph_"+T,type:"ULONG",value:Pe.glyphIndex}))}return X.segCountX2=2*(ae-be),X.searchRange=2*Math.pow(2,Math.floor(Math.log(ae-be)/Math.log(2))),X.entrySelector=Math.log(X.searchRange/2)/Math.log(2),X.rangeShift=X.segCountX2-X.searchRange,X.fields=X.fields.concat(Se),X.fields.push({name:"reservedPad",type:"USHORT",value:0}),X.fields=X.fields.concat(we),X.fields=X.fields.concat(fe),X.fields=X.fields.concat(Re),X.fields=X.fields.concat(Me),X.cmap4Length=14+2*Se.length+2+2*we.length+2*fe.length+2*Re.length+2*Me.length,j||(q=16+4*Oe.length,X.cmap12Offset=20+X.cmap4Length,X.fields=X.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:q},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Oe.length/3}]),X.fields=X.fields.concat(Oe)),X}},re=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],$=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ve=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function je(w){this.font=w}function Le(w){this.cmap=w}function Ne(w,j){this.encoding=w,this.charset=j}function Be(w){switch(w.version){case 1:this.names=ve.slice();break;case 2:this.names=new Array(w.numberOfGlyphs);for(var j=0;j<w.numberOfGlyphs;j++)w.glyphNameIndex[j]<ve.length?this.names[j]=ve[w.glyphNameIndex[j]]:this.names[j]=w.names[w.glyphNameIndex[j]-ve.length];break;case 2.5:this.names=new Array(w.numberOfGlyphs);for(var T=0;T<w.numberOfGlyphs;T++)this.names[T]=ve[T+w.glyphNameIndex[T]];break;default:this.names=[]}}je.prototype.charToGlyphIndex=function(w){var j=w.codePointAt(0),T=this.font.glyphs;if(T){for(var O=0;O<T.length;O+=1)for(var V=T.get(O),q=0;q<V.unicodes.length;q+=1)if(V.unicodes[q]===j)return O}return null},Le.prototype.charToGlyphIndex=function(w){return this.cmap.glyphIndexMap[w.codePointAt(0)]||0},Ne.prototype.charToGlyphIndex=function(w){return w=w.codePointAt(0),w=this.encoding[w],this.charset.indexOf(w)},Be.prototype.nameToGlyphIndex=function(w){return this.names.indexOf(w)},Be.prototype.glyphIndexToName=function(w){return this.names[w]};var Ue={line:function(w,j,T,O,V){w.beginPath(),w.moveTo(j,T),w.lineTo(O,V),w.stroke()}};function Xe(w){this.bindConstructorValues(w)}function ct(w,j,T){Object.defineProperty(w,j,{get:function(){return w.path,w[T]},set:function(O){w[T]=O},enumerable:!0,configurable:!0})}function ot(w,j){if(this.font=w,this.glyphs={},Array.isArray(j))for(var T=0;T<j.length;T++)this.glyphs[T]=j[T];this.length=j&&j.length||0}Xe.prototype.bindConstructorValues=function(w){var j;this.index=w.index||0,this.name=w.name||null,this.unicode=w.unicode||void 0,this.unicodes=w.unicodes||w.unicode!==void 0?[w.unicode]:[],w.xMin&&(this.xMin=w.xMin),w.yMin&&(this.yMin=w.yMin),w.xMax&&(this.xMax=w.xMax),w.yMax&&(this.yMax=w.yMax),w.advanceWidth&&(this.advanceWidth=w.advanceWidth),Object.defineProperty(this,"path",(w=w.path,j=w||new K,{configurable:!0,get:function(){return j=typeof j=="function"?j():j},set:function(T){j=T}}))},Xe.prototype.addUnicode=function(w){this.unicodes.length===0&&(this.unicode=w),this.unicodes.push(w)},Xe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Xe.prototype.getPath=function(w,j,T,O,V){w=w!==void 0?w:0,j=j!==void 0?j:0,T=T!==void 0?T:72;for(var q,X,ee=(O=O||{}).xScale,le=O.yScale,ae=((q=O.hinting&&V&&V.hinting?this.path&&V.hinting.exec(this,T):q)?(X=V.hinting.getCommands(q),w=Math.round(w),j=Math.round(j),ee=le=1):(X=this.path.commands,O=1/this.path.unitsPerEm*T,ee===void 0&&(ee=O),le===void 0&&(le=O)),new K),be=0;be<X.length;be+=1){var Se=X[be];Se.type==="M"?ae.moveTo(w+Se.x*ee,j+-Se.y*le):Se.type==="L"?ae.lineTo(w+Se.x*ee,j+-Se.y*le):Se.type==="Q"?ae.quadraticCurveTo(w+Se.x1*ee,j+-Se.y1*le,w+Se.x*ee,j+-Se.y*le):Se.type==="C"?ae.curveTo(w+Se.x1*ee,j+-Se.y1*le,w+Se.x2*ee,j+-Se.y2*le,w+Se.x*ee,j+-Se.y*le):Se.type==="Z"&&ae.closePath()}return ae},Xe.prototype.getContours=function(){if(this.points===void 0)return[];for(var w=[],j=[],T=0;T<this.points.length;T+=1){var O=this.points[T];j.push(O),O.lastPointOfContour&&(w.push(j),j=[])}return R.argument(j.length===0,"There are still points left in the current contour."),w},Xe.prototype.getMetrics=function(){for(var w=this.path.commands,j=[],T=[],O=0;O<w.length;O+=1){var V=w[O];V.type!=="Z"&&(j.push(V.x),T.push(V.y)),V.type!=="Q"&&V.type!=="C"||(j.push(V.x1),T.push(V.y1)),V.type==="C"&&(j.push(V.x2),T.push(V.y2))}var q={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,T),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,T),leftSideBearing:this.leftSideBearing};return isFinite(q.xMin)||(q.xMin=0),isFinite(q.xMax)||(q.xMax=this.advanceWidth),isFinite(q.yMin)||(q.yMin=0),isFinite(q.yMax)||(q.yMax=0),q.rightSideBearing=this.advanceWidth-q.leftSideBearing-(q.xMax-q.xMin),q},Xe.prototype.draw=function(w,j,T,O,V){this.getPath(j,T,O,V).draw(w)},Xe.prototype.drawPoints=function(w,j,T,O){function V(be,Se,we,fe){var Re=2*Math.PI;w.beginPath();for(var Me=0;Me<be.length;Me+=1)w.moveTo(Se+be[Me].x*fe,we+be[Me].y*fe),w.arc(Se+be[Me].x*fe,we+be[Me].y*fe,2,0,Re,!1);w.closePath(),w.fill()}j=j!==void 0?j:0,T=T!==void 0?T:0;for(var O=1/this.path.unitsPerEm*(O=O!==void 0?O:24),q=[],X=[],ee=this.path,le=0;le<ee.commands.length;le+=1){var ae=ee.commands[le];ae.x!==void 0&&q.push({x:ae.x,y:-ae.y}),ae.x1!==void 0&&X.push({x:ae.x1,y:-ae.y1}),ae.x2!==void 0&&X.push({x:ae.x2,y:-ae.y2})}w.fillStyle="blue",V(q,j,T,O),w.fillStyle="red",V(X,j,T,O)},Xe.prototype.drawMetrics=function(w,j,T,O){j=j!==void 0?j:0,T=T!==void 0?T:0,O=1/this.path.unitsPerEm*(O=O!==void 0?O:24),w.lineWidth=1,w.strokeStyle="black",Ue.line(w,j,-1e4,j,1e4),Ue.line(w,-1e4,T,1e4,T);var V=this.xMin||0,q=this.yMin||0,X=this.xMax||0,ee=this.yMax||0,le=this.advanceWidth||0;w.strokeStyle="blue",Ue.line(w,j+V*O,-1e4,j+V*O,1e4),Ue.line(w,j+X*O,-1e4,j+X*O,1e4),Ue.line(w,-1e4,T+-q*O,1e4,T+-q*O),Ue.line(w,-1e4,T+-ee*O,1e4,T+-ee*O),w.strokeStyle="green",Ue.line(w,j+le*O,-1e4,j+le*O,1e4)},ot.prototype.get=function(w){return typeof this.glyphs[w]=="function"&&(this.glyphs[w]=this.glyphs[w]()),this.glyphs[w]},ot.prototype.push=function(w,j){this.glyphs[w]=j,this.length++};var Je={GlyphSet:ot,glyphLoader:function(w,j){return new Xe({index:j,font:w})},ttfGlyphLoader:function(w,j,T,O,V,q){return function(){var X=new Xe({index:j,font:w});return X.path=function(){T(X,O,V);var ee=q(w.glyphs,X);return ee.unitsPerEm=w.unitsPerEm,ee},ct(X,"xMin","_xMin"),ct(X,"xMax","_xMax"),ct(X,"yMin","_yMin"),ct(X,"yMax","_yMax"),X}},cffGlyphLoader:function(w,j,T,O){return function(){var V=new Xe({index:j,font:w});return V.path=function(){var q=T(w,V,O);return q.unitsPerEm=w.unitsPerEm,q},V}}};function lt(w){return w=w.length<1240?107:w.length<33900?1131:32768,w}function st(w,j,T){var O,V=[],q=[],X=xe.getCard16(w,j);if(X!==0){for(var ee=xe.getByte(w,j+2),le=j+(X+1)*ee+2,ae=j+3,be=0;be<X+1;be+=1)V.push(xe.getOffset(w,ae,ee)),ae+=ee;O=le+V[X]}else O=j+2;for(var Se=0;Se<V.length-1;Se+=1){var we=xe.getBytes(w,le+V[Se],le+V[Se+1]);T&&(we=T(we)),q.push(we)}return{objects:q,startOffset:j,endOffset:O}}function zt(w,j){if(j===28)return w.parseByte()<<8|w.parseByte();if(j===29)return w.parseByte()<<24|w.parseByte()<<16|w.parseByte()<<8|w.parseByte();if(j===30){for(var T=w,O="",V=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var X=T.parseByte(),q=X>>4,X=15&X;if(q==15||(O+=V[q],X==15))break;O+=V[X]}return parseFloat(O)}if(32<=j&&j<=246)return j-139;if(247<=j&&j<=250)return 256*(j-247)+w.parseByte()+108;if(251<=j&&j<=254)return 256*-(j-251)-w.parseByte()-108;throw new Error("Invalid b0 "+j)}function Er(w,j,T){var O=new xe.Parser(w,j=j!==void 0?j:0),V=[],q=[];for(T=T!==void 0?T:w.length;O.relativeOffset<T;){var X=O.parseByte();X<=21?(X===12&&(X=1200+O.parseByte()),V.push([X,q]),q=[]):q.push(zt(O,X))}for(var ee=V,le={},ae=0;ae<ee.length;ae+=1){var be=ee[ae][0],Se=ee[ae][1],we=void 0,we=Se.length===1?Se[0]:Se;if(le.hasOwnProperty(be)&&!isNaN(le[be]))throw new Error("Object "+le+" already has key "+be);le[be]=we}return le}function or(w,j){return j=j<=390?re[j]:w[j-391]}function At(w,j,T){for(var O,V={},q=0;q<j.length;q+=1){var X=j[q];if(Array.isArray(X.type)){var ee=[];ee.length=X.type.length;for(var le=0;le<X.type.length;le++)(O=w[X.op]!==void 0?w[X.op][le]:void 0)===void 0&&(O=X.value!==void 0&&X.value[le]!==void 0?X.value[le]:null),X.type[le]==="SID"&&(O=or(T,O)),ee[le]=O;V[X.name]=ee}else(O=w[X.op])===void 0&&(O=X.value!==void 0?X.value:null),X.type==="SID"&&(O=or(T,O)),V[X.name]=O}return V}var Wt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],jt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function wr(w,j,T,O){return At(Er(w,j,T),jt,O)}function yr(w,j,T,O){for(var V=[],q=0;q<T.length;q+=1){var X=new DataView(new Uint8Array(T[q]).buffer),X=(ee=O,At(Er(X,0,X.byteLength),Wt,ee)),ee=(X._subrs=[],X._subrsBias=0,X.private[0]),le=X.private[1];ee!==0&&le!==0&&(ee=wr(w,le+j,ee,O),X._defaultWidthX=ee.defaultWidthX,X._nominalWidthX=ee.nominalWidthX,ee.subrs!==0&&(le=st(w,le+ee.subrs+j),X._subrs=le.objects,X._subrsBias=lt(X._subrs)),X._privateDict=ee),V.push(X)}return V}function Vt(w,j,T){var O,V,q,X,ee,le,ae,be,Se,we=new K,fe=[],Re=0,Me=!1,Oe=!1,Pe=0,ke=0,tt=(Se=(w.isCIDFont?(ee=w.tables.cff.topDict._fdSelect[j.index],ee=w.tables.cff.topDict._fdArray[ee],le=ee._subrs,ae=ee._subrsBias,be=ee._defaultWidthX,ee):(le=w.tables.cff.topDict._subrs,ae=w.tables.cff.topDict._subrsBias,be=w.tables.cff.topDict._defaultWidthX,w.tables.cff.topDict))._nominalWidthX,be);function dt(nt,yt){Oe&&we.closePath(),we.moveTo(nt,yt),Oe=!0}function rt(){fe.length%2==0||Me||(tt=fe.shift()+Se),Re+=fe.length>>1,fe.length=0,Me=!0}return function nt(yt){for(var qt,rr,ar,Sr,Pr,on,Ut,Xt,Ft,kr,Jt,jr,Yt=0;Yt<yt.length;){var br=yt[Yt];switch(Yt+=1,br){case 1:case 3:rt();break;case 4:1<fe.length&&!Me&&(tt=fe.shift()+Se,Me=!0),ke+=fe.pop(),dt(Pe,ke);break;case 5:for(;0<fe.length;)Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);break;case 6:for(;0<fe.length&&(Pe+=fe.shift(),we.lineTo(Pe,ke),fe.length!==0);)ke+=fe.shift(),we.lineTo(Pe,ke);break;case 7:for(;0<fe.length&&(ke+=fe.shift(),we.lineTo(Pe,ke),fe.length!==0);)Pe+=fe.shift(),we.lineTo(Pe,ke);break;case 8:for(;0<fe.length;)O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 10:Pr=fe.pop()+ae,(on=le[Pr])&&nt(on);break;case 11:return;case 12:switch(br=yt[Yt],Yt+=1,br){case 35:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X+fe.shift(),Ft=Ut+fe.shift(),kr=Xt+fe.shift(),Jt=Ft+fe.shift(),jr=kr+fe.shift(),Pe=Jt+fe.shift(),ke=jr+fe.shift(),fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,kr,Jt,jr,Pe,ke);break;case 34:O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X,Ft=Ut+fe.shift(),kr=X,Jt=Ft+fe.shift(),jr=ke,Pe=Jt+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,kr,Jt,jr,Pe,ke);break;case 36:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X,Ft=Ut+fe.shift(),kr=X,Jt=Ft+fe.shift(),jr=kr+fe.shift(),Pe=Jt+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,kr,Jt,jr,Pe,ke);break;case 37:O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Ut=q+fe.shift(),Xt=X+fe.shift(),Ft=Ut+fe.shift(),kr=Xt+fe.shift(),Jt=Ft+fe.shift(),jr=kr+fe.shift(),Math.abs(Jt-Pe)>Math.abs(jr-ke)?Pe=Jt+fe.shift():ke=jr+fe.shift(),we.curveTo(O,V,q,X,Ut,Xt),we.curveTo(Ft,kr,Jt,jr,Pe,ke);break;default:console.log("Glyph "+j.index+": unknown operator 1200"+br),fe.length=0}break;case 14:0<fe.length&&!Me&&(tt=fe.shift()+Se,Me=!0),Oe&&(we.closePath(),Oe=!1);break;case 18:rt();break;case 19:case 20:rt(),Yt+=Re+7>>3;break;case 21:2<fe.length&&!Me&&(tt=fe.shift()+Se,Me=!0),ke+=fe.pop(),dt(Pe+=fe.pop(),ke);break;case 22:1<fe.length&&!Me&&(tt=fe.shift()+Se,Me=!0),dt(Pe+=fe.pop(),ke);break;case 23:rt();break;case 24:for(;2<fe.length;)O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);break;case 25:for(;6<fe.length;)Pe+=fe.shift(),ke+=fe.shift(),we.lineTo(Pe,ke);O=Pe+fe.shift(),V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 26:for(fe.length%2&&(Pe+=fe.shift());0<fe.length;)O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q,ke=X+fe.shift(),we.curveTo(O,V,q,X,Pe,ke);break;case 27:for(fe.length%2&&(ke+=fe.shift());0<fe.length;)O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X,we.curveTo(O,V,q,X,Pe,ke);break;case 28:qt=yt[Yt],rr=yt[Yt+1],fe.push((qt<<24|rr<<16)>>16),Yt+=2;break;case 29:Pr=fe.pop()+w.gsubrsBias,(on=w.gsubrs[Pr])&&nt(on);break;case 30:for(;0<fe.length&&(O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke),fe.length!==0);)O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),ke=X+fe.shift(),Pe=q+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke);break;case 31:for(;0<fe.length&&(O=Pe+fe.shift(),V=ke,q=O+fe.shift(),X=V+fe.shift(),ke=X+fe.shift(),Pe=q+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke),fe.length!==0);)O=Pe,V=ke+fe.shift(),q=O+fe.shift(),X=V+fe.shift(),Pe=q+fe.shift(),ke=X+(fe.length===1?fe.shift():0),we.curveTo(O,V,q,X,Pe,ke);break;default:br<32?console.log("Glyph "+j.index+": unknown operator "+br):br<247?fe.push(br-139):br<251?(qt=yt[Yt],Yt+=1,fe.push(256*(br-247)+qt+108)):br<255?(qt=yt[Yt],Yt+=1,fe.push(256*-(br-251)-qt-108)):(qt=yt[Yt],rr=yt[Yt+1],ar=yt[Yt+2],Sr=yt[Yt+3],Yt+=4,fe.push((qt<<24|rr<<16|ar<<8|Sr)/65536))}}}(T),j.advanceWidth=tt,we}function xr(w,j){var T,O=re.indexOf(w);return 0<=O&&(T=O),0<=(O=j.indexOf(w))?T=O+re.length:(T=re.length+j.length,j.push(w)),T}function bo(w,j,T){for(var O={},V=0;V<w.length;V+=1){var q=w[V],X=j[q.name];X===void 0||function ee(le,ae){if(le===ae)return 1;if(Array.isArray(le)&&Array.isArray(ae)&&le.length===ae.length){for(var be=0;be<le.length;be+=1)if(!ee(le[be],ae[be]))return;return 1}}(X,q.value)||(q.type==="SID"&&(X=xr(X,T)),O[q.op]={name:q.name,type:q.type,value:X})}return O}function _o(w,j){var T=new Te.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return T.dict=bo(Wt,w,j),T}function wo(w){var j=new Te.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return j.topDicts=[{name:"topDict_0",type:"TABLE",value:w}],j}function Si(w){for(var j=new Te.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),T=0;T<w.length;T+=1){var O=w.get(T),V=function(q){for(var X=[],ee=q.path,le=(X.push({name:"width",type:"NUMBER",value:q.advanceWidth}),0),ae=0,be=0;be<ee.commands.length;be+=1){var Se,we,fe,Re,Me=void 0,Oe=void 0,Pe=ee.commands[be];(Pe=Pe.type==="Q"?{type:"C",x:Pe.x,y:Pe.y,x1:1/3*le+2/3*Pe.x1,y1:1/3*ae+2/3*Pe.y1,x2:1/3*Pe.x+2/3*Pe.x1,y2:1/3*Pe.y+2/3*Pe.y1}:Pe).type==="M"?(Me=Math.round(Pe.x-le),Oe=Math.round(Pe.y-ae),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rmoveto",type:"OP",value:21}),le=Math.round(Pe.x),ae=Math.round(Pe.y)):Pe.type==="L"?(Me=Math.round(Pe.x-le),Oe=Math.round(Pe.y-ae),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rlineto",type:"OP",value:5}),le=Math.round(Pe.x),ae=Math.round(Pe.y)):Pe.type==="C"&&(Se=Math.round(Pe.x1-le),we=Math.round(Pe.y1-ae),fe=Math.round(Pe.x2-Pe.x1),Re=Math.round(Pe.y2-Pe.y1),Me=Math.round(Pe.x-Pe.x2),Oe=Math.round(Pe.y-Pe.y2),X.push({name:"dx1",type:"NUMBER",value:Se}),X.push({name:"dy1",type:"NUMBER",value:we}),X.push({name:"dx2",type:"NUMBER",value:fe}),X.push({name:"dy2",type:"NUMBER",value:Re}),X.push({name:"dx",type:"NUMBER",value:Me}),X.push({name:"dy",type:"NUMBER",value:Oe}),X.push({name:"rrcurveto",type:"OP",value:8}),le=Math.round(Pe.x),ae=Math.round(Pe.y))}return X.push({name:"endchar",type:"OP",value:14}),X}(O);j.charStrings.push({name:O.name,type:"CHARSTRING",value:V})}return j}var xo={parse:function(w,j,T){T.tables.cff={},ee=w,O=j,(V={}).formatMajor=xe.getCard8(ee,O),V.formatMinor=xe.getCard8(ee,O+1),V.size=xe.getCard8(ee,O+2),V.offsetSize=xe.getCard8(ee,O+3),V.startOffset=O,V.endOffset=O+4;var ee=st(w,V.endOffset,xe.bytesToString),O=st(w,ee.endOffset),V=st(w,O.endOffset,xe.bytesToString),ee=st(w,V.endOffset);if(T.gsubrs=ee.objects,T.gsubrsBias=lt(T.gsubrs),(ee=yr(w,j,O.objects,V.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ee.length);if(O=ee[0],(T.tables.cff.topDict=O)._privateDict&&(T.defaultWidthX=O._privateDict.defaultWidthX,T.nominalWidthX=O._privateDict.nominalWidthX),O.ros[0]!==void 0&&O.ros[1]!==void 0&&(T.isCIDFont=!0),T.isCIDFont){var ee=O.fdArray,q=O.fdSelect;if(ee===0||q===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ee=yr(w,j,st(w,ee+=j).objects,V.objects),O._fdArray=ee,O._fdSelect=function(we,fe,Re,Me){var Oe,Pe=[],ke=new xe.Parser(we,fe);if((we=ke.parseCard8())===0)for(var tt=0;tt<Re;tt++){if(Me<=(Oe=ke.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Oe+" (FD count "+Me+")");Pe.push(Oe)}else{if(we!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+we);var dt,rt=ke.parseCard16(),nt=ke.parseCard16();if(nt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+nt);for(var yt=0;yt<rt;yt++){if(Oe=ke.parseCard8(),dt=ke.parseCard16(),Me<=Oe)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Oe+" (FD count "+Me+")");if(Re<dt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+dt);for(;nt<dt;nt++)Pe.push(Oe);nt=dt}if(dt!==Re)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+dt)}return Pe}(w,q+=j,T.numGlyphs,ee.length)}var q=j+O.private[1],ee=wr(w,q,O.private[0],V.objects),X=(T.defaultWidthX=ee.defaultWidthX,T.nominalWidthX=ee.nominalWidthX,ee.subrs!==0?(q=st(w,q+ee.subrs),T.subrs=q.objects,T.subrsBias=lt(T.subrs)):(T.subrs=[],T.subrsBias=0),st(w,j+O.charStrings)),ee=(T.nGlyphs=X.objects.length,function(be,Se,we,fe){var Re=new xe.Parser(be,Se),Me=(--we,[".notdef"]);if((be=Re.parseCard8())===0)for(var Oe=0;Oe<we;Oe+=1)Pe=Re.parseSID(),Me.push(or(fe,Pe));else if(be===1)for(;Me.length<=we;)for(var Pe=Re.parseSID(),ke=Re.parseCard8(),tt=0;tt<=ke;tt+=1)Me.push(or(fe,Pe)),Pe+=1;else{if(be!==2)throw new Error("Unknown charset format "+be);for(;Me.length<=we;){Pe=Re.parseSID(),ke=Re.parseCard16();for(var dt=0;dt<=ke;dt+=1)Me.push(or(fe,Pe)),Pe+=1}}return Me}(w,j+O.charset,T.nGlyphs,V.objects));O.encoding===0?T.cffEncoding=new Ne($,ee):O.encoding===1?T.cffEncoding=new Ne(ne,ee):T.cffEncoding=function(be,Se,we){var fe={},Re=new xe.Parser(be,Se);if((be=Re.parseCard8())===0)for(var Me=Re.parseCard8(),Oe=0;Oe<Me;Oe+=1)fe[ke=Re.parseCard8()]=Oe;else{if(be!==1)throw new Error("Unknown encoding format "+be);for(var Pe=Re.parseCard8(),ke=1,tt=0;tt<Pe;tt+=1)for(var dt=Re.parseCard8(),rt=Re.parseCard8(),nt=dt;nt<=dt+rt;nt+=1)fe[nt]=ke,ke+=1}return new Ne(fe,we)}(w,j+O.encoding,ee),T.encoding=T.encoding||T.cffEncoding,T.glyphs=new Je.GlyphSet(T);for(var le=0;le<T.nGlyphs;le+=1){var ae=X.objects[le];T.glyphs.push(le,Je.cffGlyphLoader(T,le,Vt,ae))}},make:function(w,be){for(var T,O=new Te.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),V=1/be.unitsPerEm,V={version:be.version,fullName:be.fullName,familyName:be.familyName,weight:be.weightName,fontBBox:be.fontBBox||[0,0,0,0],fontMatrix:[V,0,0,V,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},q=[],X=1;X<w.length;X+=1)T=w.get(X),q.push(T.name);var ee,le,ae=[],be=(O.header=new Te.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),O.nameIndex=function(we){var fe=new Te.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);fe.names=[];for(var Re=0;Re<we.length;Re+=1)fe.names.push({name:"name_"+Re,type:"NAME",value:we[Re]});return fe}([be.postScriptName]),_o(V,ae)),Se=(O.topDictIndex=wo(be),O.globalSubrIndex=new Te.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),O.charsets=function(we,fe){for(var Re=new Te.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Me=0;Me<we.length;Me+=1){var Oe=xr(we[Me],fe);Re.fields.push({name:"glyph_"+Me,type:"SID",value:Oe})}return Re}(q,ae),O.charStringsIndex=Si(w),O.privateDict=(Se={},ee=ae,(le=new Te.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=bo(jt,Se,ee),le),O.stringIndex=function(we){var fe=new Te.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);fe.strings=[];for(var Re=0;Re<we.length;Re+=1)fe.strings.push({name:"string_"+Re,type:"STRING",value:we[Re]});return fe}(ae),O.header.sizeOf()+O.nameIndex.sizeOf()+O.topDictIndex.sizeOf()+O.stringIndex.sizeOf()+O.globalSubrIndex.sizeOf());return V.charset=Se,V.encoding=0,V.charStrings=V.charset+O.charsets.sizeOf(),V.private[1]=V.charStrings+O.charStringsIndex.sizeOf(),be=_o(V,ae),O.topDictIndex=wo(be),O}},jo={parse:function(O,j){var T={},O=new xe.Parser(O,j);return T.version=O.parseVersion(),T.fontRevision=Math.round(1e3*O.parseFixed())/1e3,T.checkSumAdjustment=O.parseULong(),T.magicNumber=O.parseULong(),R.argument(T.magicNumber===1594834165,"Font header has wrong magic number."),T.flags=O.parseUShort(),T.unitsPerEm=O.parseUShort(),T.created=O.parseLongDateTime(),T.modified=O.parseLongDateTime(),T.xMin=O.parseShort(),T.yMin=O.parseShort(),T.xMax=O.parseShort(),T.yMax=O.parseShort(),T.macStyle=O.parseUShort(),T.lowestRecPPEM=O.parseUShort(),T.fontDirectionHint=O.parseShort(),T.indexToLocFormat=O.parseShort(),T.glyphDataFormat=O.parseShort(),T},make:function(w){var j=Math.round(new Date().getTime()/1e3)+2082844800,T=j;return w.createdTimestamp&&(T=w.createdTimestamp+2082844800),new Te.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:T},{name:"modified",type:"LONGDATETIME",value:j},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],w)}},me={parse:function(O,j){var T={},O=new xe.Parser(O,j);return T.version=O.parseVersion(),T.ascender=O.parseShort(),T.descender=O.parseShort(),T.lineGap=O.parseShort(),T.advanceWidthMax=O.parseUShort(),T.minLeftSideBearing=O.parseShort(),T.minRightSideBearing=O.parseShort(),T.xMaxExtent=O.parseShort(),T.caretSlopeRise=O.parseShort(),T.caretSlopeRun=O.parseShort(),T.caretOffset=O.parseShort(),O.relativeOffset+=8,T.metricDataFormat=O.parseShort(),T.numberOfHMetrics=O.parseUShort(),T},make:function(w){return new Te.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],w)}},Ve={parse:function(w,j,T,O,V){for(var q,X,ee=new xe.Parser(w,j),le=0;le<O;le+=1){le<T&&(q=ee.parseUShort(),X=ee.parseShort());var ae=V.get(le);ae.advanceWidth=q,ae.leftSideBearing=X}},make:function(w){for(var j=new Te.Table("hmtx",[]),T=0;T<w.length;T+=1){var V=w.get(T),O=V.advanceWidth||0,V=V.leftSideBearing||0;j.fields.push({name:"advanceWidth_"+T,type:"USHORT",value:O}),j.fields.push({name:"leftSideBearing_"+T,type:"SHORT",value:V})}return j}},$e={make:function(w){for(var j=new Te.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:w.length}]),T="",O=12+4*w.length,V=0;V<w.length;++V){var q=T.indexOf(w[V]);q<0&&(q=T.length,T+=w[V]),j.fields.push({name:"offset "+V,type:"USHORT",value:O+q}),j.fields.push({name:"length "+V,type:"USHORT",value:w[V].length})}return j.fields.push({name:"stringPool",type:"CHARARRAY",value:T}),j},parse:function(w,j){for(var T=new xe.Parser(w,j),O=T.parseULong(),V=(R.argument(O===1,"Unsupported ltag table version."),T.skip("uLong",1),T.parseULong()),q=[],X=0;X<V;X++){for(var ee="",le=j+T.parseUShort(),ae=T.parseUShort(),be=le;be<le+ae;++be)ee+=String.fromCharCode(w.getInt8(be));q.push(ee)}return q}},Fe={parse:function(O,j){var T={},O=new xe.Parser(O,j);return T.version=O.parseVersion(),T.numGlyphs=O.parseUShort(),T.version===1&&(T.maxPoints=O.parseUShort(),T.maxContours=O.parseUShort(),T.maxCompositePoints=O.parseUShort(),T.maxCompositeContours=O.parseUShort(),T.maxZones=O.parseUShort(),T.maxTwilightPoints=O.parseUShort(),T.maxStorage=O.parseUShort(),T.maxFunctionDefs=O.parseUShort(),T.maxInstructionDefs=O.parseUShort(),T.maxStackElements=O.parseUShort(),T.maxSizeOfInstructions=O.parseUShort(),T.maxComponentElements=O.parseUShort(),T.maxComponentDepth=O.parseUShort()),T},make:function(w){return new Te.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:w}])}},_t=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],De={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ct={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},We={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},xt="utf-16",Ye={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},sr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function hr(w,j,T){switch(w){case 0:return xt;case 1:return sr[T]||Ye[j];case 3:if(j===1||j===10)return xt}}function tr(w){var j,T={};for(j in w)T[w[j]]=parseInt(j);return T}function gr(w,j,T,O,V,q){return new Te.Record("NameRecord",[{name:"platformID",type:"USHORT",value:w},{name:"encodingID",type:"USHORT",value:j},{name:"languageID",type:"USHORT",value:T},{name:"nameID",type:"USHORT",value:O},{name:"length",type:"USHORT",value:V},{name:"offset",type:"USHORT",value:q}])}function fn(w,j){if((T=function(q,X){var ee=q.length,le=X.length-ee+1;e:for(var ae=0;ae<le;ae++)for(;ae<le;ae++){for(var be=0;be<ee;be++)if(X[ae+be]!==q[be])continue e;return ae}return-1}(w,j))<0)for(var T=j.length,O=0,V=w.length;O<V;++O)j.push(w[O]);return T}var Ur={parse:function(w,j,T){for(var O={},V=new xe.Parser(w,j),j=V.parseUShort(),q=V.parseUShort(),X=V.offset+V.parseUShort(),ee=0;ee<q;ee++){var Re=V.parseUShort(),le=V.parseUShort(),ae=V.parseUShort(),be=V.parseUShort(),be=_t[be]||be,Se=V.parseUShort(),we=V.parseUShort(),fe=function(Oe,Pe,ke){switch(Oe){case 0:if(Pe===65535)return"und";if(ke)return ke[Pe];break;case 1:return De[Pe];case 3:return We[Pe]}}(Re,ae,T),Re=hr(Re,le,ae);Re!==void 0&&fe!==void 0&&(le=void 0,(le=Re===xt?B.UTF16(w,X+we,Se):B.MACSTRING(w,X+we,Se,Re))&&((ae=(ae=O[be])===void 0?O[be]={}:ae)[fe]=le))}return j===1&&V.parseUShort(),O},make:function(w,j){var T,O=[],V={},q=tr(_t);for(T in w){var X=q[T];if(X===void 0&&(X=T),we=parseInt(X),isNaN(we))throw new Error('Name table entry "'+T+'" does not exist, see nameTableNames for complete list.');V[we]=w[T],O.push(we)}for(var ee=tr(De),le=tr(We),ae=[],be=[],Se=0;Se<O.length;Se++){var we,fe,Re=V[we=O[Se]];for(fe in Re){var Me=Re[fe],dt=1,Oe=ee[fe],Pe=Ct[Oe],ke=hr(dt,Pe,Oe),ke=H.MACSTRING(Me,ke),tt=(ke===void 0&&(dt=0,(Oe=j.indexOf(fe))<0&&(Oe=j.length,j.push(fe)),Pe=4,ke=H.UTF16(Me)),fn(ke,be)),dt=(ae.push(gr(dt,Pe,Oe,we,ke.length,tt)),le[fe]);dt!==void 0&&(Oe=fn(Pe=H.UTF16(Me),be),ae.push(gr(3,1,dt,we,Pe.length,Oe)))}}ae.sort(function(yt,qt){return yt.platformID-qt.platformID||yt.encodingID-qt.encodingID||yt.languageID-qt.languageID||yt.nameID-qt.nameID});for(var rt=new Te.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ae.length},{name:"stringOffset",type:"USHORT",value:6+12*ae.length}]),nt=0;nt<ae.length;nt++)rt.fields.push({name:"record_"+nt,type:"RECORD",value:ae[nt]});return rt.fields.push({name:"strings",type:"LITERAL",value:be}),rt}},mn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],vr={parse:function(w,j){var T={},O=new xe.Parser(w,j);T.version=O.parseUShort(),T.xAvgCharWidth=O.parseShort(),T.usWeightClass=O.parseUShort(),T.usWidthClass=O.parseUShort(),T.fsType=O.parseUShort(),T.ySubscriptXSize=O.parseShort(),T.ySubscriptYSize=O.parseShort(),T.ySubscriptXOffset=O.parseShort(),T.ySubscriptYOffset=O.parseShort(),T.ySuperscriptXSize=O.parseShort(),T.ySuperscriptYSize=O.parseShort(),T.ySuperscriptXOffset=O.parseShort(),T.ySuperscriptYOffset=O.parseShort(),T.yStrikeoutSize=O.parseShort(),T.yStrikeoutPosition=O.parseShort(),T.sFamilyClass=O.parseShort(),T.panose=[];for(var V=0;V<10;V++)T.panose[V]=O.parseByte();return T.ulUnicodeRange1=O.parseULong(),T.ulUnicodeRange2=O.parseULong(),T.ulUnicodeRange3=O.parseULong(),T.ulUnicodeRange4=O.parseULong(),T.achVendID=String.fromCharCode(O.parseByte(),O.parseByte(),O.parseByte(),O.parseByte()),T.fsSelection=O.parseUShort(),T.usFirstCharIndex=O.parseUShort(),T.usLastCharIndex=O.parseUShort(),T.sTypoAscender=O.parseShort(),T.sTypoDescender=O.parseShort(),T.sTypoLineGap=O.parseShort(),T.usWinAscent=O.parseUShort(),T.usWinDescent=O.parseUShort(),1<=T.version&&(T.ulCodePageRange1=O.parseULong(),T.ulCodePageRange2=O.parseULong()),2<=T.version&&(T.sxHeight=O.parseShort(),T.sCapHeight=O.parseShort(),T.usDefaultChar=O.parseUShort(),T.usBreakChar=O.parseUShort(),T.usMaxContent=O.parseUShort()),T},make:function(w){return new Te.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],w)},unicodeRanges:mn,getUnicodeRange:function(w){for(var j=0;j<mn.length;j+=1){var T=mn[j];if(w>=T.begin&&w<T.end)return j}return-1}},zu={parse:function(w,j){var T={},O=new xe.Parser(w,j);switch(T.version=O.parseVersion(),T.italicAngle=O.parseFixed(),T.underlinePosition=O.parseShort(),T.underlineThickness=O.parseShort(),T.isFixedPitch=O.parseULong(),T.minMemType42=O.parseULong(),T.maxMemType42=O.parseULong(),T.minMemType1=O.parseULong(),T.maxMemType1=O.parseULong(),T.version){case 1:T.names=ve.slice();break;case 2:T.numberOfGlyphs=O.parseUShort(),T.glyphNameIndex=new Array(T.numberOfGlyphs);for(var V=0;V<T.numberOfGlyphs;V++)T.glyphNameIndex[V]=O.parseUShort();T.names=[];for(var q,X=0;X<T.numberOfGlyphs;X++)T.glyphNameIndex[X]>=ve.length&&(q=O.parseChar(),T.names.push(O.parseString(q)));break;case 2.5:T.numberOfGlyphs=O.parseUShort(),T.offset=new Array(T.numberOfGlyphs);for(var ee=0;ee<T.numberOfGlyphs;ee++)T.offset[ee]=O.parseChar()}return T},make:function(){return new Te.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},nn=new Array(9),Os=(nn[1]=function(){var w=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(ce.coverage),deltaGlyphId:this.parseUShort()}:j===2?{substFormat:2,coverage:this.parsePointer(ce.coverage),substitute:this.parseOffset16List()}:void R.assert(!1,"0x"+w.toString(16)+": lookup type 1 format must be 1 or 2.")},nn[2]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),sequences:this.parseListOfLists()}},nn[3]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),alternateSets:this.parseListOfLists()}},nn[4]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB ligature table identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:ce.uShort,lookupListIndex:ce.uShort});nn[5]=function(){var w,j,T=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:O,coverage:this.parsePointer(ce.coverage),ruleSets:this.parseListOfLists(function(){var V=this.parseUShort(),q=this.parseUShort();return{input:this.parseUShortList(V-1),lookupRecords:this.parseRecordList(q,Os)}})}:O===2?{substFormat:O,coverage:this.parsePointer(ce.coverage),classDef:this.parsePointer(ce.classDef),classSets:this.parseListOfLists(function(){var V=this.parseUShort(),q=this.parseUShort();return{classes:this.parseUShortList(V-1),lookupRecords:this.parseRecordList(q,Os)}})}:O===3?(w=this.parseUShort(),j=this.parseUShort(),{substFormat:O,coverages:this.parseList(w,ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(j,Os)}):void R.assert(!1,"0x"+T.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},nn[6]=function(){var w=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(ce.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Os)}})}:j===2?{substFormat:2,coverage:this.parsePointer(ce.coverage),backtrackClassDef:this.parsePointer(ce.classDef),inputClassDef:this.parsePointer(ce.classDef),lookaheadClassDef:this.parsePointer(ce.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Os)}})}:j===3?{substFormat:3,backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),inputCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(Os)}:void R.assert(!1,"0x"+w.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},nn[7]=function(){var w=this.parseUShort(),w=(R.argument(w===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),j=new ce(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:w,extension:nn[w].call(j)}},nn[8]=function(){var w=this.parseUShort();return R.argument(w===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(ce.coverage),backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),substitutes:this.parseUShortList()}};var Pi=new Array(9);Pi[1]=function(w){return w.substFormat===1?new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)},{name:"deltaGlyphID",type:"USHORT",value:w.deltaGlyphId}]):new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.ushortList("substitute",w.substitute)))},Pi[3]=function(w){return R.assert(w.substFormat===1,"Lookup type 3 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.tableList("altSet",w.alternateSets,function(j){return new Te.Table("alternateSetTable",Te.ushortList("alternate",j))})))},Pi[4]=function(w){return R.assert(w.substFormat===1,"Lookup type 4 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(w.coverage)}].concat(Te.tableList("ligSet",w.ligatureSets,function(j){return new Te.Table("ligatureSetTable",Te.tableList("ligature",j,function(T){return new Te.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:T.ligGlyph}].concat(Te.ushortList("component",T.components,T.components.length+1)))}))})))};var qu={parse:function(w,j){return j=(w=new ce(w,j=j||0)).parseVersion(1),R.argument(j===1||j===1.1,"Unsupported GSUB table version."),j===1?{version:j,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(nn)}:{version:j,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(nn),variations:w.parseFeatureVariationsList()}},make:function(w){return new Te.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(w.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(w.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(w.lookups,Pi)}])}},Hu={parse:function(w,j){for(var T=new xe.Parser(w,j),O=T.parseULong(),V=(R.argument(O===1,"Unsupported META table version."),T.parseULong(),T.parseULong(),T.parseULong()),q={},X=0;X<V;X++){var ee=T.parseTag(),ae=T.parseULong(),le=T.parseULong(),ae=B.UTF8(w,j+ae,le);q[ee]=ae}return q},make:function(w){var j,T=Object.keys(w).length,O="",V=16+12*T,q=new Te.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:V},{name:"numTags",type:"ULONG",value:T}]);for(j in w){var X=O.length;O+=w[j],q.fields.push({name:"tag "+j,type:"TAG",value:j}),q.fields.push({name:"offset "+j,type:"ULONG",value:V+X}),q.fields.push({name:"length "+j,type:"ULONG",value:w[j].length})}return q.fields.push({name:"stringPool",type:"CHARARRAY",value:O}),q}};function Wu(w){return Math.log(w)/Math.log(2)|0}function La(w){for(;w.length%4!=0;)w.push(0);for(var j=0,T=0;T<w.length;T+=4)j+=(w[T]<<24)+(w[T+1]<<16)+(w[T+2]<<8)+w[T+3];return j%=Math.pow(2,32)}function Xu(w,j,T,O){return new Te.Record("Table Record",[{name:"tag",type:"TAG",value:w!==void 0?w:""},{name:"checkSum",type:"ULONG",value:j!==void 0?j:0},{name:"offset",type:"ULONG",value:T!==void 0?T:0},{name:"length",type:"ULONG",value:O!==void 0?O:0}])}function Yu(w){for(var j=new Te.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),T=(j.tables=w,j.numTables=w.length,Math.pow(2,Wu(j.numTables))),O=(j.searchRange=16*T,j.entrySelector=Wu(T),j.rangeShift=16*j.numTables-j.searchRange,[]),V=[],q=j.sizeOf()+Xu().sizeOf()*j.numTables;q%4!=0;)q+=1,V.push({name:"padding",type:"BYTE",value:0});for(var X=0;X<w.length;X+=1){var ee=w[X],le=(R.argument(ee.tableName.length===4,"Table name"+ee.tableName+" is invalid."),ee.sizeOf()),ae=Xu(ee.tableName,La(ee.encode()),q,le);for(O.push({name:ae.tag+" Table Record",type:"RECORD",value:ae}),V.push({name:ee.tableName+" table",type:"RECORD",value:ee}),q+=le,R.argument(!isNaN(q),"Something went wrong calculating the offset.");q%4!=0;)q+=1,V.push({name:"padding",type:"BYTE",value:0})}return O.sort(function(be,Se){return be.value.tag>Se.value.tag?1:-1}),j.fields=j.fields.concat(O),j.fields=j.fields.concat(V),j}function $u(w,j,T){for(var O=0;O<j.length;O+=1){var V=w.charToGlyphIndex(j[O]);if(0<V)return w.glyphs.get(V).getMetrics()}return T}var Wf={make:Yu,fontToTable:function(w){for(var j,T=[],O=[],V=[],q=[],X=[],ee=[],le=[],ae=0,be=0,Se=0,we=0,fe=0,Re=0;Re<w.glyphs.length;Re+=1){var Me=w.glyphs.get(Re),Oe=0|Me.unicode;if(isNaN(Me.advanceWidth))throw new Error("Glyph "+Me.name+" ("+Re+"): advanceWidth is not a number.");(Oe<j||j===void 0)&&0<Oe&&(j=Oe),ae<Oe&&(ae=Oe);var Oe=vr.getUnicodeRange(Oe);if(Oe<32)be|=1<<Oe;else if(Oe<64)Se|=1<<Oe-32;else if(Oe<96)we|=1<<Oe-64;else{if(!(Oe<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");fe|=1<<Oe-96}Me.name!==".notdef"&&(Oe=Me.getMetrics(),T.push(Oe.xMin),O.push(Oe.yMin),V.push(Oe.xMax),q.push(Oe.yMax),ee.push(Oe.leftSideBearing),le.push(Oe.rightSideBearing),X.push(Me.advanceWidth))}var Pe,ke={xMin:Math.min.apply(null,T),yMin:Math.min.apply(null,O),xMax:Math.max.apply(null,V),yMax:Math.max.apply(null,q),advanceWidthMax:Math.max.apply(null,X),advanceWidthAvg:function(br){for(var Po=0,Is=0;Is<br.length;Is+=1)Po+=br[Is];return Po/br.length}(X),minLeftSideBearing:Math.min.apply(null,ee),maxLeftSideBearing:Math.max.apply(null,ee),minRightSideBearing:Math.min.apply(null,le)},tt=(ke.ascender=w.ascender,ke.descender=w.descender,jo.make({flags:3,unitsPerEm:w.unitsPerEm,xMin:ke.xMin,yMin:ke.yMin,xMax:ke.xMax,yMax:ke.yMax,lowestRecPPEM:3,createdTimestamp:w.createdTimestamp})),dt=me.make({ascender:ke.ascender,descender:ke.descender,advanceWidthMax:ke.advanceWidthMax,minLeftSideBearing:ke.minLeftSideBearing,minRightSideBearing:ke.minRightSideBearing,xMaxExtent:ke.maxLeftSideBearing+(ke.xMax-ke.xMin),numberOfHMetrics:w.glyphs.length}),rt=Fe.make(w.glyphs.length),nt=vr.make({xAvgCharWidth:Math.round(ke.advanceWidthAvg),usWeightClass:w.tables.os2.usWeightClass,usWidthClass:w.tables.os2.usWidthClass,usFirstCharIndex:j,usLastCharIndex:ae,ulUnicodeRange1:be,ulUnicodeRange2:Se,ulUnicodeRange3:we,ulUnicodeRange4:fe,fsSelection:w.tables.os2.fsSelection,sTypoAscender:ke.ascender,sTypoDescender:ke.descender,sTypoLineGap:0,usWinAscent:ke.yMax,usWinDescent:Math.abs(ke.yMin),ulCodePageRange1:1,sxHeight:$u(w,"xyvw",{yMax:Math.round(ke.ascender/2)}).yMax,sCapHeight:$u(w,"HIKLEFJMNTZBDPRAGOQSUVWXY",ke).yMax,usDefaultChar:w.hasChar(" ")?32:0,usBreakChar:w.hasChar(" ")?32:0}),yt=Ve.make(w.glyphs),qt=Q.make(w.glyphs),Xt=w.getEnglishName("fontFamily"),Ft=w.getEnglishName("fontSubfamily"),Ut=Xt+" "+Ft,rr=(rr=w.getEnglishName("postScriptName"))||Xt.replace(/\s/g,"")+"-"+Ft,ar={};for(Pe in w.names)ar[Pe]=w.names[Pe];ar.uniqueID||(ar.uniqueID={en:w.getEnglishName("manufacturer")+":"+Ut}),ar.postScriptName||(ar.postScriptName={en:rr}),ar.preferredFamily||(ar.preferredFamily=w.names.fontFamily),ar.preferredSubfamily||(ar.preferredSubfamily=w.names.fontSubfamily);var Pr=[],Sr=Ur.make(ar,Pr),Pr=0<Pr.length?$e.make(Pr):void 0,on=zu.make(),Ut=xo.make(w.glyphs,{version:w.getEnglishName("version"),fullName:Ut,familyName:Xt,weightName:Ft,postScriptName:rr,unitsPerEm:w.unitsPerEm,fontBBox:[0,ke.yMin,ke.ascender,ke.advanceWidthMax]}),Xt=w.metas&&0<Object.keys(w.metas).length?Hu.make(w.metas):void 0,Ft=[tt,dt,rt,nt,Sr,qt,on,Ut,yt];Pr&&Ft.push(Pr),w.tables.gsub&&Ft.push(qu.make(w.tables.gsub)),Xt&&Ft.push(Xt);for(var kr=La((rr=Yu(Ft)).encode()),Jt=rr.fields,jr=!1,Yt=0;Yt<Jt.length;Yt+=1)if(Jt[Yt].name==="head table"){Jt[Yt].value.checkSumAdjustment=2981146554-kr,jr=!0;break}if(jr)return rr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:La};function Aa(w,j){for(var T=0,O=w.length-1;T<=O;){var V=T+O>>>1,q=w[V].tag;if(q===j)return V;q<j?T=1+V:O=V-1}return-T-1}function Ku(w,j){for(var T=0,O=w.length-1;T<=O;){var V=T+O>>>1,q=w[V];if(q===j)return V;q<j?T=1+V:O=V-1}return-T-1}function Zu(w,j){for(var T=0,O=w.length-1;T<=O;){var V,q=T+O>>>1,X=(V=w[q]).start;if(X===j)return V;X<j?T=1+q:O=q-1}if(0<T)return j>(V=w[T-1]).end?0:V}function ki(w,j){this.font=w,this.tableName=j}function Ti(w){ki.call(this,w,"gpos")}function yn(w){ki.call(this,w,"gsub")}function Qu(w,j,T){for(var O=w.subtables,V=0;V<O.length;V++){var q=O[V];if(q.substFormat===j)return q}if(T)return O.push(T),T}function Ju(w){for(var j=new ArrayBuffer(w.length),T=new Uint8Array(j),O=0;O<w.length;++O)T[O]=w[O];return j}function Rs(w,j){if(!w)throw j}function ec(w,j,T,O,V){var q=0<(j&O)?(q=w.parseByte(),T+(q=j&V?q:-q)):0<(j&V)?T:T+w.parseShort();return q}function Xf(w,j,T){var O,V=new xe.Parser(j,T);if(w.numberOfContours=V.parseShort(),w._xMin=V.parseShort(),w._yMin=V.parseShort(),w._xMax=V.parseShort(),w._yMax=V.parseShort(),0<w.numberOfContours){for(var q=w.endPointIndices=[],X=0;X<w.numberOfContours;X+=1)q.push(V.parseUShort());w.instructionLength=V.parseUShort(),w.instructions=[];for(var ee=0;ee<w.instructionLength;ee+=1)w.instructions.push(V.parseByte());for(var le=q[q.length-1]+1,ae=[],be=0;be<le;be+=1)if(O=V.parseByte(),ae.push(O),0<(8&O))for(var Se=V.parseByte(),we=0;we<Se;we+=1)ae.push(O),be+=1;if(R.argument(ae.length===le,"Bad flags."),0<q.length){var fe,Re=[];if(0<le){for(var Me=0;Me<le;Me+=1)O=ae[Me],(fe={}).onCurve=!!(1&O),fe.lastPointOfContour=0<=q.indexOf(Me),Re.push(fe);for(var Oe=0,Pe=0;Pe<le;Pe+=1)O=ae[Pe],(fe=Re[Pe]).x=ec(V,O,Oe,2,16),Oe=fe.x;for(var ke=0,tt=0;tt<le;tt+=1)O=ae[tt],(fe=Re[tt]).y=ec(V,O,ke,4,32),ke=fe.y}w.points=Re}else w.points=[]}else if(w.numberOfContours===0)w.points=[];else{w.isComposite=!0,w.points=[],w.components=[];for(var dt=!0;dt;){ae=V.parseUShort();var rt={glyphIndex:V.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ae)?0<(2&ae)?(rt.dx=V.parseShort(),rt.dy=V.parseShort()):rt.matchedPoints=[V.parseUShort(),V.parseUShort()]:0<(2&ae)?(rt.dx=V.parseChar(),rt.dy=V.parseChar()):rt.matchedPoints=[V.parseByte(),V.parseByte()],0<(8&ae)?rt.xScale=rt.yScale=V.parseF2Dot14():0<(64&ae)?(rt.xScale=V.parseF2Dot14(),rt.yScale=V.parseF2Dot14()):0<(128&ae)&&(rt.xScale=V.parseF2Dot14(),rt.scale01=V.parseF2Dot14(),rt.scale10=V.parseF2Dot14(),rt.yScale=V.parseF2Dot14()),w.components.push(rt),dt=!!(32&ae)}if(256&ae){w.instructionLength=V.parseUShort(),w.instructions=[];for(var nt=0;nt<w.instructionLength;nt+=1)w.instructions.push(V.parseByte())}}}function Oa(w,j){for(var T=[],O=0;O<w.length;O+=1){var V=w[O],V={x:j.xScale*V.x+j.scale01*V.y+j.dx,y:j.scale10*V.x+j.yScale*V.y+j.dy,onCurve:V.onCurve,lastPointOfContour:V.lastPointOfContour};T.push(V)}return T}function tc(w){var j=new K;if(w)for(var T=function(Se){for(var we=[],fe=[],Re=0;Re<Se.length;Re+=1){var Me=Se[Re];fe.push(Me),Me.lastPointOfContour&&(we.push(fe),fe=[])}return R.argument(fe.length===0,"There are still points left in the current contour."),we}(w),O=0;O<T.length;++O){var V,q=T[O],X=q[q.length-1],ee=q[0];X.onCurve?j.moveTo(X.x,X.y):ee.onCurve?j.moveTo(ee.x,ee.y):(V={x:.5*(X.x+ee.x),y:.5*(X.y+ee.y)},j.moveTo(V.x,V.y));for(var le=0;le<q.length;++le){var ae,be=X,X=ee,ee=q[(le+1)%q.length];X.onCurve?j.lineTo(X.x,X.y):(ae=ee,be.onCurve||(X.x,be.x,X.y,be.y),ee.onCurve||(ae={x:.5*(X.x+ee.x),y:.5*(X.y+ee.y)}),j.quadraticCurveTo(X.x,X.y,ae.x,ae.y))}j.closePath()}return j}function Yf(w,j){if(j.isComposite)for(var T=0;T<j.components.length;T+=1){var O=j.components[T],V=w.get(O.glyphIndex);if(V.getPath(),V.points){var q=void 0;if(O.matchedPoints===void 0)q=Oa(V.points,O);else{if(O.matchedPoints[0]>j.points.length-1||O.matchedPoints[1]>V.points.length-1)throw Error("Matched points out of range in "+j.name);var X=j.points[O.matchedPoints[0]],ee=V.points[O.matchedPoints[1]],O={xScale:O.xScale,scale01:O.scale01,scale10:O.scale10,yScale:O.yScale,dx:0,dy:0},ee=Oa([ee],O)[0];O.dx=X.x-ee.x,O.dy=X.y-ee.y,q=Oa(V.points,O)}j.points=j.points.concat(q)}}return tc(j.points)}(Ti.prototype=ki.prototype={searchTag:Aa,binSearch:Ku,getTable:function(w){var j=this.font.tables[this.tableName];return j=!j&&w?this.font.tables[this.tableName]=this.createDefaultTable():j},getScriptNames:function(){var w=this.getTable();return w?w.scripts.map(function(j){return j.tag}):[]},getDefaultScriptName:function(){var w=this.getTable();if(w){for(var j=!1,T=0;T<w.scripts.length;T++){var O=w.scripts[T].tag;if(O==="DFLT")return O;O==="latn"&&(j=!0)}return j?"latn":void 0}},getScriptTable:function(w,j){var T,O=this.getTable(j);if(O)return T=O.scripts,0<=(O=Aa(O.scripts,w=w||"DFLT"))?T[O].script:j?(T.splice(-1-O,0,j={tag:w,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),j.script):void 0},getLangSysTable:function(V,j,T){var O,V=this.getScriptTable(V,T);if(V)return j&&j!=="dflt"&&j!=="DFLT"?0<=(O=Aa(V.langSysRecords,j))?V.langSysRecords[O].langSys:T?(V.langSysRecords.splice(-1-O,0,T={tag:j,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),T.langSys):void 0:V.defaultLangSys},getFeatureTable:function(w,j,T,O){if(w=this.getLangSysTable(w,j,O),w){for(var V,q=w.featureIndexes,X=this.font.tables[this.tableName].features,ee=0;ee<q.length;ee++)if((V=X[q[ee]]).tag===T)return V.feature;if(O)return j=X.length,R.assert(j===0||T>=X[j-1].tag,"Features must be added in alphabetical order."),X.push(V={tag:T,feature:{params:0,lookupListIndexes:[]}}),q.push(j),V.feature}},getLookupTables:function(q,j,T,O,V){var q=this.getFeatureTable(q,j,T,V),X=[];if(q){for(var ee,le=q.lookupListIndexes,ae=this.font.tables[this.tableName].lookups,be=0;be<le.length;be++)(ee=ae[le[be]]).lookupType===O&&X.push(ee);if(X.length===0&&V)return j=ae.length,ae.push(ee={lookupType:O,lookupFlag:0,subtables:[],markFilteringSet:void 0}),le.push(j),[ee]}return X},getGlyphClass:function(w,j){switch(w.format){case 1:return w.startGlyph<=j&&j<w.startGlyph+w.classes.length?w.classes[j-w.startGlyph]:0;case 2:var T=Zu(w.ranges,j);return T?T.classId:0}},getCoverageIndex:function(w,j){switch(w.format){case 1:var T=Ku(w.glyphs,j);return 0<=T?T:-1;case 2:return T=Zu(w.ranges,j),T?T.index+j-T.start:-1}},expandCoverage:function(w){if(w.format===1)return w.glyphs;for(var j=[],T=w.ranges,O=0;O<T.length;O++)for(var V=T[O],q=V.start,X=V.end,ee=q;ee<=X;ee++)j.push(ee);return j}}).init=function(){var w=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(w)},Ti.prototype.getKerningValue=function(w,j,T){for(var O=0;O<w.length;O++)for(var V=w[O].subtables,q=0;q<V.length;q++){var X=V[q],ee=this.getCoverageIndex(X.coverage,j);if(!(ee<0))switch(X.posFormat){case 1:for(var le=X.pairSets[ee],ae=0;ae<le.length;ae++){var be=le[ae];if(be.secondGlyph===T)return be.value1&&be.value1.xAdvance||0}break;case 2:var we=this.getGlyphClass(X.classDef1,j),Se=this.getGlyphClass(X.classDef2,T),we=X.classRecords[we][Se];return we.value1&&we.value1.xAdvance||0}}return 0},Ti.prototype.getKerningTables=function(w,j){if(this.font.tables.gpos)return this.getLookupTables(w,j,"kern",2)},(yn.prototype=ki.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},yn.prototype.getSingle=function(w,j,T){for(var O=[],V=this.getLookupTables(j,T,w,1),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++){var le=X[ee],ae=this.expandCoverage(le.coverage),be=void 0;if(le.substFormat===1)for(var Se=le.deltaGlyphId,be=0;be<ae.length;be++){var we=ae[be];O.push({sub:we,by:we+Se})}else{var fe=le.substitute;for(be=0;be<ae.length;be++)O.push({sub:ae[be],by:fe[be]})}}return O},yn.prototype.getAlternates=function(w,j,T){for(var O=[],V=this.getLookupTables(j,T,w,3),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++)for(var le=X[ee],ae=this.expandCoverage(le.coverage),be=le.alternateSets,Se=0;Se<ae.length;Se++)O.push({sub:ae[Se],by:be[Se]});return O},yn.prototype.getLigatures=function(w,j,T){for(var O=[],V=this.getLookupTables(j,T,w,4),q=0;q<V.length;q++)for(var X=V[q].subtables,ee=0;ee<X.length;ee++)for(var le=X[ee],ae=this.expandCoverage(le.coverage),be=le.ligatureSets,Se=0;Se<ae.length;Se++)for(var we=ae[Se],fe=be[Se],Re=0;Re<fe.length;Re++){var Me=fe[Re];O.push({sub:[we].concat(Me.components),by:Me.ligGlyph})}return O},yn.prototype.addSingle=function(w,j,T,O){T=Qu(this.getLookupTables(T,O,w,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),R.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format),O=j.sub,w=this.binSearch(T.coverage.glyphs,O),w<0&&(T.coverage.glyphs.splice(w=-1-w,0,O),T.substitute.splice(w,0,0)),T.substitute[w]=j.by},yn.prototype.addAlternate=function(w,j,T,O){T=Qu(this.getLookupTables(T,O,w,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),R.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format),O=j.sub,w=this.binSearch(T.coverage.glyphs,O),w<0&&(T.coverage.glyphs.splice(w=-1-w,0,O),T.alternateSets.splice(w,0,0)),T.alternateSets[w]=j.by},yn.prototype.addLigature=function(q,le,ee,V){var ee=this.getLookupTables(ee,V,q,4,!0)[0],V=ee.subtables[0],q=(V||(ee.subtables[0]=V={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),R.assert(V.coverage.format===1,"Ligature: unable to modify coverage table format "+V.coverage.format),le.sub[0]),X=le.sub.slice(1),ee={ligGlyph:le.by,components:X},le=this.binSearch(V.coverage.glyphs,q);if(0<=le){for(var ae=V.ligatureSets[le],be=0;be<ae.length;be++)if(function(Se,we){var fe=Se.length;if(fe===we.length){for(var Re=0;Re<fe;Re++)if(Se[Re]!==we[Re])return;return 1}}(ae[be].components,X))return;ae.push(ee)}else V.coverage.glyphs.splice(le=-1-le,0,q),V.ligatureSets.splice(le,0,[ee])},yn.prototype.getFeature=function(w,j,T){if(/ss\d\d/.test(w))return this.getSingle(w,j,T);switch(w){case"aalt":case"salt":return this.getSingle(w,j,T).concat(this.getAlternates(w,j,T));case"dlig":case"liga":case"rlig":return this.getLigatures(w,j,T)}},yn.prototype.add=function(w,j,T,O){if(/ss\d\d/.test(w))return this.addSingle(w,j,T,O);switch(w){case"aalt":case"salt":return typeof j.by=="number"?this.addSingle(w,j,T,O):this.addAlternate(w,j,T,O);case"dlig":case"liga":case"rlig":return this.addLigature(w,j,T,O)}};var rc={getPath:tc,parse:function(w,j,T,O){for(var V=new Je.GlyphSet(O),q=0;q<T.length-1;q+=1){var X=T[q];X!==T[q+1]?V.push(q,Je.ttfGlyphLoader(O,q,Xf,w,j+X,Yf)):V.push(q,Je.glyphLoader(O,q))}return V}};function nc(w){this.font=w,this.getCommands=function(j){return rc.getPath(j).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function $f(w){return w}function sc(w){return Math.sign(w)*Math.round(Math.abs(w))}function Kf(w){return Math.sign(w)*Math.round(Math.abs(2*w))/2}function Zf(w){return Math.sign(w)*(Math.round(Math.abs(w)+.5)-.5)}function Qf(w){return Math.sign(w)*Math.ceil(Math.abs(w))}function Jf(w){return Math.sign(w)*Math.floor(Math.abs(w))}function oc(w){var j=this.srPeriod,T=this.srPhase,O=1;return w<0&&(w=-w,O=-1),w+=this.srThreshold-T,w=Math.trunc(w/j)*j,(w+=T)<0?T*O:w*O}var gn={x:1,y:0,axis:"x",distance:function(w,j,T,O){return(T?w.xo:w.x)-(O?j.xo:j.x)},interpolate:function(w,j,T,O){var V,q,X,ee,le,ae,be;if(!O||O===this)return V=w.xo-j.xo,q=w.xo-T.xo,le=j.x-j.xo,ae=T.x-T.xo,(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?void(w.x=w.xo+(le+ae)/2):void(w.x=w.xo+(le*ee+ae*X)/be);V=O.distance(w,j,!0,!0),q=O.distance(w,T,!0,!0),le=O.distance(j,j,!1,!0),ae=O.distance(T,T,!1,!0),(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?gn.setRelative(w,w,(le+ae)/2,O,!0):gn.setRelative(w,w,(le*ee+ae*X)/be,O,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(w,j,T,O,V){var q,X;O&&O!==this?(q=V?j.xo:j.x,X=V?j.yo:j.y,q+=T*O.x,X+=T*O.y,w.x=q+(w.y-X)/O.normalSlope):w.x=(V?j.xo:j.x)+T},slope:0,touch:function(w){w.xTouched=!0},touched:function(w){return w.xTouched},untouch:function(w){w.xTouched=!1}},Cn={x:0,y:1,axis:"y",distance:function(w,j,T,O){return(T?w.yo:w.y)-(O?j.yo:j.y)},interpolate:function(w,j,T,O){var V,q,X,ee,le,ae,be;if(!O||O===this)return V=w.yo-j.yo,q=w.yo-T.yo,le=j.y-j.yo,ae=T.y-T.yo,(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?void(w.y=w.yo+(le+ae)/2):void(w.y=w.yo+(le*ee+ae*X)/be);V=O.distance(w,j,!0,!0),q=O.distance(w,T,!0,!0),le=O.distance(j,j,!1,!0),ae=O.distance(T,T,!1,!0),(be=(X=Math.abs(V))+(ee=Math.abs(q)))===0?Cn.setRelative(w,w,(le+ae)/2,O,!0):Cn.setRelative(w,w,(le*ee+ae*X)/be,O,!0)},normalSlope:0,setRelative:function(w,j,T,O,V){var q,X;O&&O!==this?(q=V?j.xo:j.x,X=V?j.yo:j.y,q+=T*O.x,X+=T*O.y,w.y=X+O.normalSlope*(w.x-q)):w.y=(V?j.yo:j.y)+T},slope:Number.POSITIVE_INFINITY,touch:function(w){w.yTouched=!0},touched:function(w){return w.yTouched},untouch:function(w){w.yTouched=!1}};function Co(w,j){this.x=w,this.y=j,this.axis=void 0,this.slope=j/w,this.normalSlope=-w/j,Object.freeze(this)}function Eo(w,j){var T=Math.sqrt(w*w+j*j);return j/=T,(w/=T)===1&&j===0?gn:w===0&&j===1?Cn:new Co(w,j)}function En(w,j,T,O){this.x=this.xo=Math.round(64*w)/64,this.y=this.yo=Math.round(64*j)/64,this.lastPointOfContour=T,this.onCurve=O,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(gn),Object.freeze(Cn),Co.prototype.distance=function(w,j,T,O){return this.x*gn.distance(w,j,T,O)+this.y*Cn.distance(w,j,T,O)},Co.prototype.interpolate=function(w,V,q,O){var X=O.distance(w,V,!0,!0),ee=O.distance(w,q,!0,!0),V=O.distance(V,V,!1,!0),q=O.distance(q,q,!1,!0),X=Math.abs(X),ee=Math.abs(ee),le=X+ee;le===0?this.setRelative(w,w,(V+q)/2,O,!0):this.setRelative(w,w,(V*ee+q*X)/le,O,!0)},Co.prototype.setRelative=function(w,q,le,ae,ee){var X=ee?q.xo:q.x,ee=ee?q.yo:q.y,q=X+le*(ae=ae||this).x,X=ee+le*ae.y,ee=ae.normalSlope,le=this.slope,ae=w.x,be=w.y;w.x=(le*ae-ee*q+X-be)/(le-ee),w.y=le*(w.x-ae)+be},Co.prototype.touch=function(w){w.xTouched=!0,w.yTouched=!0},En.prototype.nextTouched=function(w){for(var j=this.nextPointOnContour;!w.touched(j)&&j!==this;)j=j.nextPointOnContour;return j},En.prototype.prevTouched=function(w){for(var j=this.prevPointOnContour;!w.touched(j)&&j!==this;)j=j.prevPointOnContour;return j};var So=Object.freeze(new En(0,0)),em={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Fn(w,j){switch(this.env=w,this.stack=[],this.prog=j,w){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=gn,this.round=sc}}function Mi(w){for(var j=w.tZone=new Array(w.gZone.length),T=0;T<j.length;T++)j[T]=new En(0,0)}function ic(w,j){var T,O=w.prog,V=w.ip,q=1;do if((T=O[++V])===88)q++;else if(T===89)q--;else if(T===64)V+=O[V+1]+1;else if(T===65)V+=2*O[V+1]+1;else if(176<=T&&T<=183)V+=T-176+1;else if(184<=T&&T<=191)V+=2*(T-184+1);else if(j&&q===1&&T===27)break;while(0<q);w.ip=V}function ac(w,j){l.DEBUG&&console.log(j.step,"SVTCA["+w.axis+"]"),j.fv=j.pv=j.dpv=w}function lc(w,j){l.DEBUG&&console.log(j.step,"SPVTCA["+w.axis+"]"),j.pv=j.dpv=w}function uc(w,j){l.DEBUG&&console.log(j.step,"SFVTCA["+w.axis+"]"),j.fv=w}function cc(w,j){var T,V=j.stack,O=V.pop(),V=V.pop(),q=j.z2[O],X=j.z1[V];l.DEBUG&&console.log("SPVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),j.pv=j.dpv=Eo(T,O)}function dc(w,j){var T,V=j.stack,O=V.pop(),V=V.pop(),q=j.z2[O],X=j.z1[V];l.DEBUG&&console.log("SFVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),j.fv=Eo(T,O)}function Ra(w){l.DEBUG&&console.log(w.step,"POP[]"),w.stack.pop()}function hc(w,j){var T=j.stack.pop(),O=j.z0[T],V=j.fv,q=j.pv,X=(l.DEBUG&&console.log(j.step,"MDAP["+w+"]",T),q.distance(O,So));w&&(X=j.round(X)),V.setRelative(O,So,X,q),V.touch(O),j.rp0=j.rp1=T}function pc(w,j){var T,O,V,q=j.z2,X=q.length-2;l.DEBUG&&console.log(j.step,"IUP["+w.axis+"]");for(var ee=0;ee<X;ee++)T=q[ee],w.touched(T)||(O=T.prevTouched(w))!==T&&(O===(V=T.nextTouched(w))&&w.setRelative(T,T,w.distance(O,O,!1,!0),w,!0),w.interpolate(T,O,V,w))}function fc(w,j){for(var T=j.stack,O=w?j.rp1:j.rp2,V=(w?j.z0:j.z1)[O],q=j.fv,X=j.pv,ee=j.loop,le=j.z2;ee--;){var ae=T.pop(),be=le[ae],Se=X.distance(V,V,!1,!0);q.setRelative(be,be,Se,X),q.touch(be),l.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-ee)+": ":"")+"SHP["+(w?"rp1":"rp2")+"]",ae)}j.loop=1}function mc(w,j){for(var T=j.stack,X=w?j.rp1:j.rp2,O=(w?j.z0:j.z1)[X],V=j.fv,q=j.pv,X=T.pop(),ee=j.z2[j.contours[X]],le=ee,ae=(l.DEBUG&&console.log(j.step,"SHC["+w+"]",X),q.distance(O,O,!1,!0));le!==O&&V.setRelative(le,le,ae,q),(le=le.nextPointOnContour)!==ee;);}function yc(w,j){var T,O,ee=j.stack,V=w?j.rp1:j.rp2,V=(w?j.z0:j.z1)[V],q=j.fv,X=j.pv,ee=ee.pop();switch(l.DEBUG&&console.log(j.step,"SHZ["+w+"]",ee),ee){case 0:T=j.tZone;break;case 1:T=j.gZone;break;default:throw new Error("Invalid zone")}for(var le=X.distance(V,V,!1,!0),ae=T.length-2,be=0;be<ae;be++)O=T[be],q.setRelative(O,O,le,X)}function gc(w,j){var O=j.stack,T=O.pop()/64,O=O.pop(),V=j.z1[O],q=j.z0[j.rp0],X=j.fv,ee=j.pv;X.setRelative(V,q,T,ee),X.touch(V),l.DEBUG&&console.log(j.step,"MSIRP["+w+"]",T,O),j.rp1=j.rp0,j.rp2=O,w&&(j.rp0=O)}function vc(w,j){var T=j.stack,ee=T.pop(),T=T.pop(),O=j.z0[T],V=j.fv,q=j.pv,X=j.cvt[ee],ee=(l.DEBUG&&console.log(j.step,"MIAP["+w+"]",ee,"(",X,")",T),q.distance(O,So));w&&(Math.abs(ee-X)<j.cvCutIn&&(ee=X),ee=j.round(ee)),V.setRelative(O,So,ee,q),j.zp0===0&&(O.xo=O.x,O.yo=O.y),V.touch(O),j.rp0=j.rp1=T}function bc(w,j){var T=j.stack,O=T.pop(),V=j.z2[O];l.DEBUG&&console.log(j.step,"GC["+w+"]",O),T.push(64*j.dpv.distance(V,So,w,!1))}function _c(w,j){var O=j.stack,T=O.pop(),O=O.pop(),V=j.z1[T],q=j.z0[O],q=j.dpv.distance(q,V,w,w);l.DEBUG&&console.log(j.step,"MD["+w+"]",T,O,"->",q),j.stack.push(Math.round(64*q))}function Da(w,j){var T=j.stack,O=T.pop(),V=j.fv,q=j.pv,X=j.ppem,ee=j.deltaBase+16*(w-1),le=j.deltaShift,ae=j.z0;l.DEBUG&&console.log(j.step,"DELTAP["+w+"]",O,T);for(var be=0;be<O;be++){var Se=T.pop(),we=T.pop();ee+((240&we)>>4)===X&&(0<=(we=(15&we)-8)&&we++,l.DEBUG&&console.log(j.step,"DELTAPFIX",Se,"by",we*le),Se=ae[Se],V.setRelative(Se,Se,we*le,q))}}function Li(w,j){var T=j.stack,O=T.pop();l.DEBUG&&console.log(j.step,"ROUND[]"),T.push(64*j.round(O/64))}function Ia(w,j){var T=j.stack,O=T.pop(),V=j.ppem,q=j.deltaBase+16*(w-1),X=j.deltaShift;l.DEBUG&&console.log(j.step,"DELTAC["+w+"]",O,T);for(var ee=0;ee<O;ee++){var le=T.pop(),ae=T.pop();q+((240&ae)>>4)===V&&(0<=(ae=(15&ae)-8)&&ae++,ae=ae*X,l.DEBUG&&console.log(j.step,"DELTACFIX",le,"by",ae),j.cvt[le]+=ae)}}function wc(w,j){var T,V=j.stack,O=V.pop(),V=V.pop(),q=j.z2[O],X=j.z1[V];l.DEBUG&&console.log(j.step,"SDPVTL["+w+"]",O,V),O=w?(T=q.y-X.y,X.x-q.x):(T=X.x-q.x,X.y-q.y),j.dpv=Eo(T,O)}function Nn(w,j){var T=j.stack,O=j.prog,V=j.ip;l.DEBUG&&console.log(j.step,"PUSHB["+w+"]");for(var q=0;q<w;q++)T.push(O[++V]);j.ip=V}function Vn(w,j){var T=j.ip,O=j.prog,V=j.stack;l.DEBUG&&console.log(j.ip,"PUSHW["+w+"]");for(var q=0;q<w;q++){var X=O[++T]<<8|O[++T];32768&X&&(X=-(1+(65535^X))),V.push(X)}j.ip=T}function et(w,j,T,O,V,q){var X,ee,ae=q.stack,le=w&&ae.pop(),ae=ae.pop(),be=q.rp0,be=q.z0[be],Se=q.z1[ae],we=q.minDis,fe=q.fv,Re=q.dpv,Me=X=Re.distance(Se,be,!0,!0),Oe=0<=Me?1:-1;Me=Math.abs(Me),w&&(ee=q.cvt[le],O&&Math.abs(Me-ee)<q.cvCutIn&&(Me=ee)),T&&Me<we&&(Me=we),O&&(Me=q.round(Me)),fe.setRelative(Se,be,Oe*Me,Re),fe.touch(Se),l.DEBUG&&console.log(q.step,(w?"MIRP[":"MDRP[")+(j?"M":"m")+(T?">":"_")+(O?"R":"_")+(V===0?"Gr":V===1?"Bl":V===2?"Wh":"")+"]",w?le+"("+q.cvt[le]+","+ee+")":"",ae,"(d =",X,"->",Oe*Me,")"),q.rp1=q.rp0,q.rp2=ae,j&&(q.rp0=ae)}nc.prototype.exec=function(w,j){if(typeof j!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var T=this.font,O=this._prepState;if(!O||O.ppem!==j){var V=this._fpgmState;if(!V){Fn.prototype=em,(V=this._fpgmState=new Fn("fpgm",T.tables.fpgm)).funcs=[],V.font=T,l.DEBUG&&(console.log("---EXEC FPGM---"),V.step=-1);try{Ds(V)}catch(ae){return console.log("Hinting error in FPGM:"+ae),void(this._errorState=3)}}Fn.prototype=V,(O=this._prepState=new Fn("prep",T.tables.prep)).ppem=j;var q=T.tables.cvt;if(q)for(var X=O.cvt=new Array(q.length),ee=j/T.unitsPerEm,le=0;le<q.length;le++)X[le]=q[le]*ee;else O.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),O.step=-1);try{Ds(O)}catch(ae){this._errorState<2&&console.log("Hinting error in PREP:"+ae),this._errorState=2}}if(!(1<this._errorState))try{return tm(w,O)}catch(ae){this._errorState<1&&(console.log("Hinting error:"+ae),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var tm=function(w,j){var T=j.ppem/j.font.unitsPerEm,O=T,V=w.components;if(Fn.prototype=j,V){for(var q=j.font,X=[],ee=[],le=0;le<V.length;le++){var ae=V[le],be=q.glyphs.get(ae.glyphIndex),Se=new Fn("glyf",be.instructions);l.DEBUG&&(console.log("---EXEC COMP "+le+"---"),Se.step=-1),xc(be,Se,T,O);for(var we=Math.round(ae.dx*T),fe=Math.round(ae.dy*O),Re=Se.gZone,Me=Se.contours,Oe=0;Oe<Re.length;Oe++){var Pe=Re[Oe];Pe.xTouched=Pe.yTouched=!1,Pe.xo=Pe.x=Pe.x+we,Pe.yo=Pe.y=Pe.y+fe}var ke=X.length;X.push.apply(X,Re);for(var tt=0;tt<Me.length;tt++)ee.push(Me[tt]+ke)}w.instructions&&!Se.inhibitGridFit&&((Se=new Fn("glyf",w.instructions)).gZone=Se.z0=Se.z1=Se.z2=X,Se.contours=ee,X.push(new En(0,0),new En(Math.round(w.advanceWidth*T),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),Se.step=-1),Ds(Se),X.length-=2)}else Se=new Fn("glyf",w.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),Se.step=-1),xc(w,Se,T,O),X=Se.gZone;return X},xc=function(w,j,T,O){for(var V,q,X,ee=w.points||[],le=ee.length,ae=j.gZone=j.z0=j.z1=j.z2=[],be=j.contours=[],Se=0;Se<le;Se++)V=ee[Se],ae[Se]=new En(V.x*T,V.y*O,V.lastPointOfContour,V.onCurve);for(var we=0;we<le;we++)V=ae[we],q||(q=V,be.push(we)),V.lastPointOfContour?((V.nextPointOnContour=q).prevPointOnContour=V,q=void 0):(X=ae[we+1],(V.nextPointOnContour=X).prevPointOnContour=V);if(!j.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",j.stack);for(var fe=0;fe<le;fe++)console.log(fe,ae[fe].x,ae[fe].y)}if(ae.push(new En(0,0),new En(Math.round(w.advanceWidth*T),0)),Ds(j),ae.length-=2,l.DEBUG){console.log("FINISHED GLYPH",j.stack);for(var Re=0;Re<le;Re++)console.log(Re,ae[Re].x,ae[Re].y)}}},Ds=function(w){var j=w.prog;if(j){var T,O=j.length;for(w.ip=0;w.ip<O;w.ip++){if(l.DEBUG&&w.step++,!(T=rm[j[w.ip]]))throw new Error("unknown instruction: 0x"+Number(j[w.ip]).toString(16));T(w)}}},rm=[ac.bind(void 0,Cn),ac.bind(void 0,gn),lc.bind(void 0,Cn),lc.bind(void 0,gn),uc.bind(void 0,Cn),uc.bind(void 0,gn),cc.bind(void 0,0),cc.bind(void 0,1),dc.bind(void 0,0),dc.bind(void 0,1),function(w){var j=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"SPVFS[]",j,T),w.pv=w.dpv=Eo(T,j)},function(w){var j=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"SPVFS[]",j,T),w.fv=Eo(T,j)},function(w){var j=w.stack,T=w.pv;l.DEBUG&&console.log(w.step,"GPV[]"),j.push(16384*T.x),j.push(16384*T.y)},function(w){var j=w.stack,T=w.fv;l.DEBUG&&console.log(w.step,"GFV[]"),j.push(16384*T.x),j.push(16384*T.y)},function(w){w.fv=w.pv,l.DEBUG&&console.log(w.step,"SFVTPV[]")},function(j){var T=(X=j.stack).pop(),O=X.pop(),V=X.pop(),q=X.pop(),X=X.pop(),le=j.z0,be=j.z1,ee=le[T],le=le[O],ae=be[V],be=be[q],j=j.z2[X],T=(l.DEBUG&&console.log("ISECT[], ",T,O,V,q,X),ee.x),O=ee.y,V=le.x,q=le.y,X=ae.x,ee=ae.y,le=be.x,ae=be.y,be=(T-V)*(ee-ae)-(O-q)*(X-le),Se=T*q-O*V,we=X*ae-ee*le;j.x=(Se*(X-le)-we*(T-V))/be,j.y=(Se*(ee-ae)-we*(O-q))/be},function(w){w.rp0=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP0[]",w.rp0)},function(w){w.rp1=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP1[]",w.rp1)},function(w){w.rp2=w.stack.pop(),l.DEBUG&&console.log(w.step,"SRP2[]",w.rp2)},function(w){var j=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP0[]",j),w.zp0=j){case 0:w.tZone||Mi(w),w.z0=w.tZone;break;case 1:w.z0=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var j=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP1[]",j),w.zp1=j){case 0:w.tZone||Mi(w),w.z1=w.tZone;break;case 1:w.z1=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var j=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZP2[]",j),w.zp2=j){case 0:w.tZone||Mi(w),w.z2=w.tZone;break;case 1:w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var j=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SZPS[]",j),w.zp0=w.zp1=w.zp2=j){case 0:w.tZone||Mi(w),w.z0=w.z1=w.z2=w.tZone;break;case 1:w.z0=w.z1=w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){w.loop=w.stack.pop(),l.DEBUG&&console.log(w.step,"SLOOP[]",w.loop)},function(w){l.DEBUG&&console.log(w.step,"RTG[]"),w.round=sc},function(w){l.DEBUG&&console.log(w.step,"RTHG[]"),w.round=Zf},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SMD[]",j),w.minDis=j/64},function(w){l.DEBUG&&console.log(w.step,"ELSE[]"),ic(w,!1)},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"JMPR[]",j),w.ip+=j-1},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SCVTCI[]",j),w.cvCutIn=j/64},void 0,void 0,function(w){var j=w.stack;l.DEBUG&&console.log(w.step,"DUP[]"),j.push(j[j.length-1])},Ra,function(w){l.DEBUG&&console.log(w.step,"CLEAR[]"),w.stack.length=0},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"SWAP[]"),j.push(T),j.push(O)},function(w){var j=w.stack;l.DEBUG&&console.log(w.step,"DEPTH[]"),j.push(j.length)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"CINDEX[]",T),j.push(j[j.length-T])},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"MINDEX[]",T),j.push(j.splice(j.length-T,1)[0])},void 0,void 0,void 0,function(w){var j=(O=w.stack).pop(),T=O.pop(),O=(l.DEBUG&&console.log(w.step,"LOOPCALL[]",j,T),w.ip),V=w.prog;w.prog=w.funcs[j];for(var q=0;q<T;q++)Ds(w),l.DEBUG&&console.log(++w.step,q+1<T?"next loopcall":"done loopcall",q);w.ip=O,w.prog=V},function(w){var j=w.stack.pop(),T=(l.DEBUG&&console.log(w.step,"CALL[]",j),w.ip),O=w.prog;w.prog=w.funcs[j],Ds(w),w.ip=T,w.prog=O,l.DEBUG&&console.log(++w.step,"returning from",j)},function(w){if(w.env!=="fpgm")throw new Error("FDEF not allowed here");var O=w.stack,j=w.prog,T=w.ip,O=O.pop(),V=T;for(l.DEBUG&&console.log(w.step,"FDEF[]",O);j[++T]!==45;);w.ip=T,w.funcs[O]=j.slice(V+1,T)},void 0,hc.bind(void 0,0),hc.bind(void 0,1),pc.bind(void 0,Cn),pc.bind(void 0,gn),fc.bind(void 0,0),fc.bind(void 0,1),mc.bind(void 0,0),mc.bind(void 0,1),yc.bind(void 0,0),yc.bind(void 0,1),function(w){for(var j=w.stack,T=w.loop,O=w.fv,V=j.pop()/64,q=w.z2;T--;){var X=j.pop(),ee=q[X];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-T)+": ":"")+"SHPIX[]",X,V),O.setRelative(ee,ee,V),O.touch(ee)}w.loop=1},function(w){for(var j=w.stack,T=w.rp1,O=w.rp2,V=w.loop,q=w.z0[T],X=w.z1[O],ee=w.fv,le=w.dpv,ae=w.z2;V--;){var be=j.pop(),Se=ae[be];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-V)+": ":"")+"IP[]",be,T,"<->",O),ee.interpolate(Se,q,X,le),ee.touch(Se)}w.loop=1},gc.bind(void 0,0),gc.bind(void 0,1),function(w){for(var j=w.stack,T=w.rp0,O=w.z0[T],V=w.loop,q=w.fv,X=w.pv,ee=w.z1;V--;){var le=j.pop(),ae=ee[le];l.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-V)+": ":"")+"ALIGNRP[]",le),q.setRelative(ae,O,0,X),q.touch(ae)}w.loop=1},function(w){l.DEBUG&&console.log(w.step,"RTDG[]"),w.round=Kf},vc.bind(void 0,0),vc.bind(void 0,1),function(w){var j=w.prog,T=w.ip,O=w.stack,V=j[++T];l.DEBUG&&console.log(w.step,"NPUSHB[]",V);for(var q=0;q<V;q++)O.push(j[++T]);w.ip=T},function(w){var j=w.ip,T=w.prog,O=w.stack,V=T[++j];l.DEBUG&&console.log(w.step,"NPUSHW[]",V);for(var q=0;q<V;q++){var X=T[++j]<<8|T[++j];32768&X&&(X=-(1+(65535^X))),O.push(X)}w.ip=j},function(w){var O=w.stack,j=(j=w.store)||(w.store=[]),T=O.pop(),O=O.pop();l.DEBUG&&console.log(w.step,"WS",T,O),j[O]=T},function(V){var j=V.stack,T=V.store,O=j.pop(),V=(l.DEBUG&&console.log(V.step,"RS",O),T&&T[O]||0);j.push(V)},function(w){var j=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"WCVTP",j,T),w.cvt[T]=j/64},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"RCVT",T),j.push(64*w.cvt[T])},bc.bind(void 0,0),bc.bind(void 0,1),void 0,_c.bind(void 0,0),_c.bind(void 0,1),function(w){l.DEBUG&&console.log(w.step,"MPPEM[]"),w.stack.push(w.ppem)},void 0,function(w){l.DEBUG&&console.log(w.step,"FLIPON[]"),w.autoFlip=!0},void 0,void 0,function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"LT[]",T,O),j.push(O<T?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"LTEQ[]",T,O),j.push(O<=T?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"GT[]",T,O),j.push(T<O?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"GTEQ[]",T,O),j.push(T<=O?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"EQ[]",T,O),j.push(T===O?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"NEQ[]",T,O),j.push(T!==O?1:0)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"ODD[]",T),j.push(Math.trunc(T)%2?1:0)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"EVEN[]",T),j.push(Math.trunc(T)%2?0:1)},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"IF[]",j),j||(ic(w,!0),l.DEBUG&&console.log(w.step,"EIF[]"))},function(w){l.DEBUG&&console.log(w.step,"EIF[]")},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"AND[]",T,O),j.push(T&&O?1:0)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"OR[]",T,O),j.push(T||O?1:0)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"NOT[]",T),j.push(T?0:1)},Da.bind(void 0,1),function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SDB[]",j),w.deltaBase=j},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SDS[]",j),w.deltaShift=Math.pow(.5,j)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"ADD[]",T,O),j.push(O+T)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"SUB[]",T,O),j.push(O-T)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"DIV[]",T,O),j.push(64*O/T)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"MUL[]",T,O),j.push(O*T/64)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"ABS[]",T),j.push(Math.abs(T))},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"NEG[]",T),j.push(-T)},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"FLOOR[]",T),j.push(64*Math.floor(T/64))},function(w){var j=w.stack,T=j.pop();l.DEBUG&&console.log(w.step,"CEILING[]",T),j.push(64*Math.ceil(T/64))},Li.bind(void 0,0),Li.bind(void 0,1),Li.bind(void 0,2),Li.bind(void 0,3),void 0,void 0,void 0,void 0,function(w){var j=(T=w.stack).pop(),T=T.pop();l.DEBUG&&console.log(w.step,"WCVTF[]",j,T),w.cvt[T]=j*w.ppem/w.font.unitsPerEm},Da.bind(void 0,2),Da.bind(void 0,3),Ia.bind(void 0,1),Ia.bind(void 0,2),Ia.bind(void 0,3),function(w){var j,T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"SROUND[]",T),w.round=oc,192&T){case 0:j=.5;break;case 64:j=1;break;case 128:j=2;break;default:throw new Error("invalid SROUND value")}switch(w.srPeriod=j,48&T){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*j;break;case 32:w.srPhase=.5*j;break;case 48:w.srPhase=.75*j;break;default:throw new Error("invalid SROUND value")}w.srThreshold=(T&=15)===0?0:(T/8-.5)*j},function(w){var j,T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"S45ROUND[]",T),w.round=oc,192&T){case 0:j=Math.sqrt(2)/2;break;case 64:j=Math.sqrt(2);break;case 128:j=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(w.srPeriod=j,48&T){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*j;break;case 32:w.srPhase=.5*j;break;case 48:w.srPhase=.75*j;break;default:throw new Error("invalid S45ROUND value")}w.srThreshold=(T&=15)===0?0:(T/8-.5)*j},void 0,void 0,function(w){l.DEBUG&&console.log(w.step,"ROFF[]"),w.round=$f},void 0,function(w){l.DEBUG&&console.log(w.step,"RUTG[]"),w.round=Qf},function(w){l.DEBUG&&console.log(w.step,"RDTG[]"),w.round=Jf},Ra,Ra,void 0,void 0,void 0,void 0,void 0,function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SCANCTRL[]",j)},wc.bind(void 0,0),wc.bind(void 0,1),function(w){var j=w.stack,T=j.pop(),O=0;l.DEBUG&&console.log(w.step,"GETINFO[]",T),1&T&&(O=35),32&T&&(O|=4096),j.push(O)},void 0,function(w){var j=w.stack,T=j.pop(),O=j.pop(),V=j.pop();l.DEBUG&&console.log(w.step,"ROLL[]"),j.push(O),j.push(T),j.push(V)},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"MAX[]",T,O),j.push(Math.max(O,T))},function(w){var j=w.stack,T=j.pop(),O=j.pop();l.DEBUG&&console.log(w.step,"MIN[]",T,O),j.push(Math.min(O,T))},function(w){var j=w.stack.pop();l.DEBUG&&console.log(w.step,"SCANTYPE[]",j)},function(w){var j=w.stack.pop(),T=w.stack.pop();switch(l.DEBUG&&console.log(w.step,"INSTCTRL[]",j,T),j){case 1:return void(w.inhibitGridFit=!!T);case 2:return void(w.ignoreCvt=!!T);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Nn.bind(void 0,1),Nn.bind(void 0,2),Nn.bind(void 0,3),Nn.bind(void 0,4),Nn.bind(void 0,5),Nn.bind(void 0,6),Nn.bind(void 0,7),Nn.bind(void 0,8),Vn.bind(void 0,1),Vn.bind(void 0,2),Vn.bind(void 0,3),Vn.bind(void 0,4),Vn.bind(void 0,5),Vn.bind(void 0,6),Vn.bind(void 0,7),Vn.bind(void 0,8),et.bind(void 0,0,0,0,0,0),et.bind(void 0,0,0,0,0,1),et.bind(void 0,0,0,0,0,2),et.bind(void 0,0,0,0,0,3),et.bind(void 0,0,0,0,1,0),et.bind(void 0,0,0,0,1,1),et.bind(void 0,0,0,0,1,2),et.bind(void 0,0,0,0,1,3),et.bind(void 0,0,0,1,0,0),et.bind(void 0,0,0,1,0,1),et.bind(void 0,0,0,1,0,2),et.bind(void 0,0,0,1,0,3),et.bind(void 0,0,0,1,1,0),et.bind(void 0,0,0,1,1,1),et.bind(void 0,0,0,1,1,2),et.bind(void 0,0,0,1,1,3),et.bind(void 0,0,1,0,0,0),et.bind(void 0,0,1,0,0,1),et.bind(void 0,0,1,0,0,2),et.bind(void 0,0,1,0,0,3),et.bind(void 0,0,1,0,1,0),et.bind(void 0,0,1,0,1,1),et.bind(void 0,0,1,0,1,2),et.bind(void 0,0,1,0,1,3),et.bind(void 0,0,1,1,0,0),et.bind(void 0,0,1,1,0,1),et.bind(void 0,0,1,1,0,2),et.bind(void 0,0,1,1,0,3),et.bind(void 0,0,1,1,1,0),et.bind(void 0,0,1,1,1,1),et.bind(void 0,0,1,1,1,2),et.bind(void 0,0,1,1,1,3),et.bind(void 0,1,0,0,0,0),et.bind(void 0,1,0,0,0,1),et.bind(void 0,1,0,0,0,2),et.bind(void 0,1,0,0,0,3),et.bind(void 0,1,0,0,1,0),et.bind(void 0,1,0,0,1,1),et.bind(void 0,1,0,0,1,2),et.bind(void 0,1,0,0,1,3),et.bind(void 0,1,0,1,0,0),et.bind(void 0,1,0,1,0,1),et.bind(void 0,1,0,1,0,2),et.bind(void 0,1,0,1,0,3),et.bind(void 0,1,0,1,1,0),et.bind(void 0,1,0,1,1,1),et.bind(void 0,1,0,1,1,2),et.bind(void 0,1,0,1,1,3),et.bind(void 0,1,1,0,0,0),et.bind(void 0,1,1,0,0,1),et.bind(void 0,1,1,0,0,2),et.bind(void 0,1,1,0,0,3),et.bind(void 0,1,1,0,1,0),et.bind(void 0,1,1,0,1,1),et.bind(void 0,1,1,0,1,2),et.bind(void 0,1,1,0,1,3),et.bind(void 0,1,1,1,0,0),et.bind(void 0,1,1,1,0,1),et.bind(void 0,1,1,1,0,2),et.bind(void 0,1,1,1,0,3),et.bind(void 0,1,1,1,1,0),et.bind(void 0,1,1,1,1,1),et.bind(void 0,1,1,1,1,2),et.bind(void 0,1,1,1,1,3)],nm=Array.from||function(w){return w.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Bt(w){(w=w||{}).empty||(Rs(w.familyName,"When creating a new Font object, familyName is required."),Rs(w.styleName,"When creating a new Font object, styleName is required."),Rs(w.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Rs(w.ascender,"When creating a new Font object, ascender is required."),Rs(w.descender,"When creating a new Font object, descender is required."),Rs(w.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:w.familyName||" "},fontSubfamily:{en:w.styleName||" "},fullName:{en:w.fullName||w.familyName+" "+w.styleName},postScriptName:{en:w.postScriptName||(w.familyName+w.styleName).replace(/\s/g,"")},designer:{en:w.designer||" "},designerURL:{en:w.designerURL||" "},manufacturer:{en:w.manufacturer||" "},manufacturerURL:{en:w.manufacturerURL||" "},license:{en:w.license||" "},licenseURL:{en:w.licenseURL||" "},version:{en:w.version||"Version 0.1"},description:{en:w.description||" "},copyright:{en:w.copyright||" "},trademark:{en:w.trademark||" "}},this.unitsPerEm=w.unitsPerEm||1e3,this.ascender=w.ascender,this.descender=w.descender,this.createdTimestamp=w.createdTimestamp,this.tables={os2:{usWeightClass:w.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:w.widthClass||this.usWidthClasses.MEDIUM,fsSelection:w.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Je.GlyphSet(this,w.glyphs||[]),this.encoding=new je(this),this.position=new Ti(this),this.substitution=new yn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new nc(this):void 0)}})}function jc(w,j){var T,O=JSON.stringify(w),V=256;for(T in j){var q=parseInt(T);if(q&&!(q<256)){if(JSON.stringify(j[T])===O)return q;V<=q&&(V=q+1)}}return j[V]=w,V}Bt.prototype.hasChar=function(w){return this.encoding.charToGlyphIndex(w)!==null},Bt.prototype.charToGlyphIndex=function(w){return this.encoding.charToGlyphIndex(w)},Bt.prototype.charToGlyph=function(w){return w=this.charToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Bt.prototype.stringToGlyphs=function(w,j){j=j||this.defaultRenderOptions;for(var T=nm(w),O=[],V=0;V<T.length;V+=1){var q=T[V];O.push(this.charToGlyphIndex(q))}var X=O.length;if(j.features){var w=j.script||this.substitution.getDefaultScriptName(),ee=[];j.features.liga&&(ee=ee.concat(this.substitution.getFeature("liga",w,j.language))),j.features.rlig&&(ee=ee.concat(this.substitution.getFeature("rlig",w,j.language)));for(var le=0;le<X;le+=1)for(var ae=0;ae<ee.length;ae++){for(var be=ee[ae],Se=be.sub,we=Se.length,fe=0;fe<we&&Se[fe]===O[le+fe];)fe++;fe===we&&(O.splice(le,we,be.by),X=X-we+1)}}for(var Re=new Array(X),Me=this.glyphs.get(0),Oe=0;Oe<X;Oe+=1)Re[Oe]=this.glyphs.get(O[Oe])||Me;return Re},Bt.prototype.nameToGlyphIndex=function(w){return this.glyphNames.nameToGlyphIndex(w)},Bt.prototype.nameToGlyph=function(w){return w=this.nameToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Bt.prototype.glyphIndexToName=function(w){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(w):""},Bt.prototype.getKerningValue=function(w,j){w=w.index||w,j=j.index||j;var T=this.position.defaultKerningTables;return T?this.position.getKerningValue(T,w,j):this.kerningPairs[w+","+j]||0},Bt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Bt.prototype.forEachGlyph=function(w,j,T,O,V,q){j=j!==void 0?j:0,T=T!==void 0?T:0,V=V||this.defaultRenderOptions;var X,ee=1/this.unitsPerEm*(O=O!==void 0?O:72),le=this.stringToGlyphs(w,V);V.kerning&&(w=V.script||this.position.getDefaultScriptName(),X=this.position.getKerningTables(w,V.language));for(var ae=0;ae<le.length;ae+=1){var be=le[ae];q.call(this,be,j,T,O,V),be.advanceWidth&&(j+=be.advanceWidth*ee),V.kerning&&ae<le.length-1&&(j+=(X?this.position.getKerningValue(X,be.index,le[ae+1].index):this.getKerningValue(be,le[ae+1]))*ee),V.letterSpacing?j+=V.letterSpacing*O:V.tracking&&(j+=V.tracking/1e3*O)}return j},Bt.prototype.getPath=function(w,j,T,O,V){var q=new K;return this.forEachGlyph(w,j,T,O,V,function(X,ee,le,ae){X=X.getPath(ee,le,ae,V,this),q.extend(X)}),q},Bt.prototype.getPaths=function(w,j,T,O,V){var q=[];return this.forEachGlyph(w,j,T,O,V,function(X,ee,le,ae){X=X.getPath(ee,le,ae,V,this),q.push(X)}),q},Bt.prototype.getAdvanceWidth=function(w,j,T){return this.forEachGlyph(w,0,0,j,T,function(){})},Bt.prototype.draw=function(w,j,T,O,V,q){this.getPath(j,T,O,V,q).draw(w)},Bt.prototype.drawPoints=function(w,j,T,O,V,q){this.forEachGlyph(j,T,O,V,q,function(X,ee,le,ae){X.drawPoints(w,ee,le,ae)})},Bt.prototype.drawMetrics=function(w,j,T,O,V,q){this.forEachGlyph(j,T,O,V,q,function(X,ee,le,ae){X.drawMetrics(w,ee,le,ae)})},Bt.prototype.getEnglishName=function(w){if(w=this.names[w],w)return w.en},Bt.prototype.validate=function(){var w=this;function j(T){T=w.getEnglishName(T),T&&T.trim().length}j("fontFamily"),j("weightName"),j("manufacturer"),j("copyright"),j("version"),this.unitsPerEm},Bt.prototype.toTables=function(){return Wf.fontToTable(this)},Bt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Bt.prototype.toArrayBuffer=function(){for(var w=this.toTables().encode(),j=new ArrayBuffer(w.length),T=new Uint8Array(j),O=0;O<w.length;O++)T[O]=w[O];return j},Bt.prototype.download=function(w){var j=this.getEnglishName("fontFamily"),T=this.getEnglishName("fontSubfamily"),O=(w=w||j.replace(/\s/g,"")+"-"+T+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,O.byteLength,function(V){V.root.getFile(w,{create:!0},function(q){q.createWriter(function(X){var ee=new DataView(O),ee=new Blob([ee],{type:"font/opentype"});X.write(ee),X.addEventListener("writeend",function(){location.href=q.toURL()},!1)})})},function(V){throw new Error(V.name+": "+V.message)})):(j=t("fs"),T=function(V){for(var q=new o(V.byteLength),X=new Uint8Array(V),ee=0;ee<q.length;++ee)q[ee]=X[ee];return q}(O),j.writeFileSync(w,T))},Bt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Bt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Bt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var sm={make:function(w,j){var T=new Te.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:w.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:w.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*w.axes.length}]);T.offsetToData=T.sizeOf();for(var O,V,q,X=0;X<w.axes.length;X++)T.fields=T.fields.concat((O=X,V=w.axes[X],q=j,q=jc(V.name,j),[{name:"tag_"+O,type:"TAG",value:V.tag},{name:"minValue_"+O,type:"FIXED",value:V.minValue<<16},{name:"defaultValue_"+O,type:"FIXED",value:V.defaultValue<<16},{name:"maxValue_"+O,type:"FIXED",value:V.maxValue<<16},{name:"flags_"+O,type:"USHORT",value:0},{name:"nameID_"+O,type:"USHORT",value:q}]));for(var ee=0;ee<w.instances.length;ee++)T.fields=T.fields.concat(function(le,ae,be,Se){for(var we=[{name:"nameID_"+le,type:"USHORT",value:jc(ae.name,Se)},{name:"flags_"+le,type:"USHORT",value:0}],fe=0;fe<be.length;++fe){var Re=be[fe].tag;we.push({name:"axis_"+le+" "+Re,type:"FIXED",value:ae.coordinates[Re]<<16})}return we}(ee,w.instances[ee],w.axes,j));return T},parse:function(w,j,T){for(var O,V,q,X,ee=new xe.Parser(w,j),le=ee.parseULong(),ae=(R.argument(le===65536,"Unsupported fvar table version."),ee.parseOffset16()),be=(ee.skip("uShort",1),ee.parseUShort()),Se=ee.parseUShort(),we=ee.parseUShort(),fe=ee.parseUShort(),Re=[],Me=0;Me<be;Me++)Re.push((O=w,V=j+ae+Me*Se,q=T,X={},O=new xe.Parser(O,V),X.tag=O.parseTag(),X.minValue=O.parseFixed(),X.defaultValue=O.parseFixed(),X.maxValue=O.parseFixed(),O.skip("uShort",1),X.name=q[O.parseUShort()]||{},X));for(var Oe=[],Pe=j+ae+be*Se,ke=0;ke<we;ke++)Oe.push(function(tt,dt,rt,nt){var yt={},qt=new xe.Parser(tt,dt);yt.name=nt[qt.parseUShort()]||{},qt.skip("uShort",1),yt.coordinates={};for(var rr=0;rr<rt.length;++rr)yt.coordinates[rt[rr].tag]=qt.parseFixed();return yt}(w,Pe+ke*fe,Re,T));return{axes:Re,instances:Oe}}},sn=new Array(10);sn[1]=function(){var w=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{posFormat:1,coverage:this.parsePointer(ce.coverage),value:this.parseValueRecord()}:j===2?{posFormat:2,coverage:this.parsePointer(ce.coverage),values:this.parseValueRecordList()}:void R.assert(!1,"0x"+w.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},sn[2]=function(){var w,j,T,O,q=this.offset+this.relativeOffset,V=this.parseUShort(),q=(R.assert(V===1||V===2,"0x"+q.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(ce.coverage)),X=this.parseUShort(),ee=this.parseUShort();return V===1?{posFormat:V,coverage:q,valueFormat1:X,valueFormat2:ee,pairSets:this.parseList(ce.pointer(ce.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(X),value2:this.parseValueRecord(ee)}})))}:V===2?(w=this.parsePointer(ce.classDef),j=this.parsePointer(ce.classDef),T=this.parseUShort(),O=this.parseUShort(),{posFormat:V,coverage:q,valueFormat1:X,valueFormat2:ee,classDef1:w,classDef2:j,class1Count:T,class2Count:O,classRecords:this.parseList(T,ce.list(O,function(){return{value1:this.parseValueRecord(X),value2:this.parseValueRecord(ee)}}))}):void 0},sn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},sn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},sn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},sn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},sn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},sn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},sn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var om=new Array(10),im={parse:function(w,j){return j=(w=new ce(w,j=j||0)).parseVersion(1),R.argument(j===1||j===1.1,"Unsupported GPOS table version "+j),j===1?{version:j,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(sn)}:{version:j,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(sn),variations:w.parseFeatureVariationsList()}},make:function(w){return new Te.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(w.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(w.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(w.lookups,om)}])}},am={parse:function(w,j){if(w=new xe.Parser(w,j),(j=w.parseUShort())===0){var T=w,O={},Se=(T.skip("uShort"),T.parseUShort()),V=(R.argument(Se===0,"Unsupported kern sub-table version."),T.skip("uShort",2),T.parseUShort());T.skip("uShort",3);for(var q=0;q<V;q+=1){var X=T.parseUShort(),ee=T.parseUShort(),le=T.parseShort();O[X+","+ee]=le}return O}if(j!==1)throw new Error("Unsupported kern table version ("+j+").");var ae=w,be={},Se=(ae.skip("uShort"),1<ae.parseULong()&&console.warn("Only the first kern subtable is supported."),ae.skip("uLong"),255&ae.parseUShort());if(ae.skip("uShort"),Se==0){var we=ae.parseUShort();ae.skip("uShort",3);for(var fe=0;fe<we;fe+=1){var Re=ae.parseUShort(),Me=ae.parseUShort(),Oe=ae.parseShort();be[Re+","+Me]=Oe}}return be}},lm={parse:function(w,j,T,O){for(var V=new xe.Parser(w,j),q=O?V.parseUShort:V.parseULong,X=[],ee=0;ee<T+1;ee+=1){var le=q.call(V);O&&(le*=2),X.push(le)}return X}};function um(w,j){t("fs").readFile(w,function(T,O){if(T)return j(T.message);j(null,Ju(O))})}function cm(w,j){var T=new XMLHttpRequest;T.open("get",w,!0),T.responseType="arraybuffer",T.onload=function(){return T.response?j(null,T.response):j("Font could not be loaded: "+T.statusText)},T.onerror=function(){j("Font could not be loaded")},T.send()}function Cc(w,j){for(var T=[],O=12,V=0;V<j;V+=1){var q=xe.getTag(w,O),X=xe.getULong(w,O+4),ee=xe.getULong(w,O+8),le=xe.getULong(w,O+12);T.push({tag:q,checksum:X,offset:ee,length:le,compression:!1}),O+=16}return T}function ir(T,j){if(j.compression!=="WOFF")return{data:T,offset:j.offset};var T=new Uint8Array(T.buffer,j.offset+2,j.compressedLength-2),O=new Uint8Array(j.length);if(G(T,O),O.byteLength!==j.length)throw new Error("Decompression error: "+j.tag+" decompressed length doesn't match recorded length");return{data:new DataView(O.buffer,0),offset:0}}function Fa(ke){var j,T,O,V,q,X,ee,le,ae,be,Se,we,fe,Re,Me=new Bt({empty:!0}),Oe=new DataView(ke,0),Pe=[],ke=xe.getTag(Oe,0);if(ke==="\0\0\0"||ke==="true"||ke==="typ1")Me.outlinesFormat="truetype",Pe=Cc(Oe,O=xe.getUShort(Oe,4));else if(ke==="OTTO")Me.outlinesFormat="cff",Pe=Cc(Oe,O=xe.getUShort(Oe,4));else{if(ke!=="wOFF")throw new Error("Unsupported OpenType signature "+ke);var tt=xe.getTag(Oe,4);if(tt==="\0\0\0")Me.outlinesFormat="truetype";else{if(tt!=="OTTO")throw new Error("Unsupported OpenType flavor "+ke);Me.outlinesFormat="cff"}Pe=function(Xt,Ft){for(var kr=[],Jt=44,jr=0;jr<Ft;jr+=1){var Yt=xe.getTag(Xt,Jt),br=xe.getULong(Xt,Jt+4),Po=xe.getULong(Xt,Jt+8),Is=xe.getULong(Xt,Jt+12),Ec=void 0,Ec=Po<Is&&"WOFF";kr.push({tag:Yt,offset:br,compression:Ec,compressedLength:Po,length:Is}),Jt+=20}return kr}(Oe,O=xe.getUShort(Oe,12))}for(var dt=0;dt<O;dt+=1){var rt=Pe[dt],nt=void 0;switch(rt.tag){case"cmap":nt=ir(Oe,rt),Me.tables.cmap=Q.parse(nt.data,nt.offset),Me.encoding=new Le(Me.tables.cmap);break;case"cvt ":nt=ir(Oe,rt),Re=new xe.Parser(nt.data,nt.offset),Me.tables.cvt=Re.parseShortList(rt.length/2);break;case"fvar":q=rt;break;case"fpgm":nt=ir(Oe,rt),Re=new xe.Parser(nt.data,nt.offset),Me.tables.fpgm=Re.parseByteList(rt.length);break;case"head":nt=ir(Oe,rt),Me.tables.head=jo.parse(nt.data,nt.offset),Me.unitsPerEm=Me.tables.head.unitsPerEm,j=Me.tables.head.indexToLocFormat;break;case"hhea":nt=ir(Oe,rt),Me.tables.hhea=me.parse(nt.data,nt.offset),Me.ascender=Me.tables.hhea.ascender,Me.descender=Me.tables.hhea.descender,Me.numberOfHMetrics=Me.tables.hhea.numberOfHMetrics;break;case"hmtx":ae=rt;break;case"ltag":nt=ir(Oe,rt),T=$e.parse(nt.data,nt.offset);break;case"maxp":nt=ir(Oe,rt),Me.tables.maxp=Fe.parse(nt.data,nt.offset),Me.numGlyphs=Me.tables.maxp.numGlyphs;break;case"name":we=rt;break;case"OS/2":nt=ir(Oe,rt),Me.tables.os2=vr.parse(nt.data,nt.offset);break;case"post":nt=ir(Oe,rt),Me.tables.post=zu.parse(nt.data,nt.offset),Me.glyphNames=new Be(Me.tables.post);break;case"prep":nt=ir(Oe,rt),Re=new xe.Parser(nt.data,nt.offset),Me.tables.prep=Re.parseByteList(rt.length);break;case"glyf":X=rt;break;case"loca":Se=rt;break;case"CFF ":V=rt;break;case"kern":be=rt;break;case"GPOS":ee=rt;break;case"GSUB":le=rt;break;case"meta":fe=rt}}if(tt=ir(Oe,we),Me.tables.name=Ur.parse(tt.data,tt.offset,T),Me.names=Me.tables.name,X&&Se)ke=j===0,tt=ir(Oe,Se),tt=lm.parse(tt.data,tt.offset,Me.numGlyphs,ke),ke=ir(Oe,X),Me.glyphs=rc.parse(ke.data,ke.offset,tt,Me);else{if(!V)throw new Error("Font doesn't contain TrueType or CFF outlines.");ke=ir(Oe,V),xo.parse(ke.data,ke.offset,Me)}for(var tt=ir(Oe,ae),yt=(Ve.parse(tt.data,tt.offset,Me.numberOfHMetrics,Me.numGlyphs,Me.glyphs),Me),qt=yt.tables.cmap.glyphIndexMap,rr=Object.keys(qt),ar=0;ar<rr.length;ar+=1){var Sr,Pr=rr[ar],on=qt[Pr];(Sr=yt.glyphs.get(on)).addUnicode(parseInt(Pr))}for(var Ut=0;Ut<yt.glyphs.length;Ut+=1)Sr=yt.glyphs.get(Ut),yt.cffEncoding?yt.isCIDFont?Sr.name="gid"+Ut:Sr.name=yt.cffEncoding.charset[Ut]:yt.glyphNames.names&&(Sr.name=yt.glyphNames.glyphIndexToName(Ut));return be?(ke=ir(Oe,be),Me.kerningPairs=am.parse(ke.data,ke.offset)):Me.kerningPairs={},ee&&(tt=ir(Oe,ee),Me.tables.gpos=im.parse(tt.data,tt.offset),Me.position.init()),le&&(ke=ir(Oe,le),Me.tables.gsub=qu.parse(ke.data,ke.offset)),q&&(tt=ir(Oe,q),Me.tables.fvar=sm.parse(tt.data,tt.offset,Me.names)),fe&&(ke=ir(Oe,fe),Me.tables.meta=Hu.parse(ke.data,ke.offset),Me.metas=Me.tables.meta),Me}l.Font=Bt,l.Glyph=Xe,l.Path=K,l.BoundingBox=Y,l._parse=xe,l.parse=Fa,l.load=function(w,j){(typeof window>"u"?um:cm)(w,function(T,O){if(T)return j(T);var V;try{V=Fa(O)}catch(q){return j(q,null)}return j(null,V)})},l.loadSync=function(w){return Fa(Ju(t("fs").readFileSync(w)))},Object.defineProperty(l,"__esModule",{value:!0})},a(typeof d=="object"&&i!==void 0?d:c.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],255:[function(t,i,d){(function(o){function c(b,g){for(var u=0,h=b.length-1;0<=h;h--){var p=b[h];p==="."?b.splice(h,1):p===".."?(b.splice(h,1),u++):u&&(b.splice(h,1),u--)}if(g)for(;u--;)b.unshift("..");return b}function a(b,g){if(b.filter)return b.filter(g);for(var u=[],h=0;h<b.length;h++)g(b[h],h,b)&&u.push(b[h]);return u}d.resolve=function(){for(var b="",g=!1,u=arguments.length-1;-1<=u&&!g;u--){var h=0<=u?arguments[u]:o.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(b=h+"/"+b,g=h.charAt(0)==="/")}return(g?"/":"")+(b=c(a(b.split("/"),function(p){return!!p}),!g).join("/"))||"."},d.normalize=function(b){var g=d.isAbsolute(b),u=l(b,-1)==="/";return(b=(b=c(a(b.split("/"),function(h){return!!h}),!g).join("/"))||g?b:".")&&u&&(b+="/"),(g?"/":"")+b},d.isAbsolute=function(b){return b.charAt(0)==="/"},d.join=function(){var b=Array.prototype.slice.call(arguments,0);return d.normalize(a(b,function(g,u){if(typeof g!="string")throw new TypeError("Arguments to path.join must be strings");return g}).join("/"))},d.relative=function(b,g){function u(_){for(var x=0;x<_.length&&_[x]==="";x++);for(var C=_.length-1;0<=C&&_[C]==="";C--);return C<x?[]:_.slice(x,C-x+1)}b=d.resolve(b).substr(1),g=d.resolve(g).substr(1);for(var h=u(b.split("/")),p=u(g.split("/")),m=Math.min(h.length,p.length),y=m,f=0;f<m;f++)if(h[f]!==p[f]){y=f;break}for(var v=[],f=y;f<h.length;f++)v.push("..");return(v=v.concat(p.slice(y))).join("/")},d.sep="/",d.delimiter=":",d.dirname=function(b){if(typeof b!="string"&&(b+=""),b.length===0)return".";for(var g=b.charCodeAt(0)===47,u=-1,h=!0,p=b.length-1;1<=p;--p)if(b.charCodeAt(p)===47){if(!h){u=p;break}}else h=!1;return u===-1?g?"/":".":g&&u===1?"/":b.slice(0,u)},d.basename=function(b,g){return b=function(u){typeof u!="string"&&(u+="");for(var h=0,p=-1,m=!0,y=u.length-1;0<=y;--y)if(u.charCodeAt(y)===47){if(!m){h=y+1;break}}else p===-1&&(m=!1,p=y+1);return p===-1?"":u.slice(h,p)}(b),b=g&&b.substr(-1*g.length)===g?b.substr(0,b.length-g.length):b},d.extname=function(b){typeof b!="string"&&(b+="");for(var g=-1,u=0,h=-1,p=!0,m=0,y=b.length-1;0<=y;--y){var f=b.charCodeAt(y);if(f===47){if(p)continue;u=y+1;break}h===-1&&(p=!1,h=y+1),f===46?g===-1?g=y:m!==1&&(m=1):g!==-1&&(m=-1)}return g===-1||h===-1||m===0||m===1&&g===h-1&&g===u+1?"":b.slice(g,h)};var l="ab".substr(-1)==="b"?function(b,g,u){return b.substr(g,u)}:function(b,g,u){return g<0&&(g=b.length+g),b.substr(g,u)}}).call(this,t("_process"))},{_process:256}],256:[function(t,a,d){var o,c,a=a.exports={};function l(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:l}catch{o=l}try{c=typeof clearTimeout=="function"?clearTimeout:b}catch{c=b}function g(x){if(o===setTimeout)return setTimeout(x,0);if((o===l||!o)&&setTimeout)return(o=setTimeout)(x,0);try{return o(x,0)}catch{try{return o.call(null,x,0)}catch{return o.call(this,x,0)}}}var u,h=[],p=!1,m=-1;function y(){p&&u&&(p=!1,u.length?h=u.concat(h):m=-1,h.length&&f())}function f(){if(!p){for(var x=g(y),C=(p=!0,h.length);C;){for(u=h,h=[];++m<C;)u&&u[m].run();m=-1,C=h.length}u=null,p=!1,function(M){if(c===clearTimeout)return clearTimeout(M);if((c===b||!c)&&clearTimeout)return(c=clearTimeout)(M);try{c(M)}catch{try{return c.call(null,M)}catch{return c.call(this,M)}}}(x)}}function v(x,C){this.fun=x,this.array=C}function _(){}a.nextTick=function(x){var C=new Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)C[M-1]=arguments[M];h.push(new v(x,C)),h.length!==1||p||g(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(x){return[]},a.binding=function(x){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(x){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],257:[function(t,i,d){i=function(o){var c,a=Object.prototype,l=a.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},b=S.iterator||"@@iterator",g=S.asyncIterator||"@@asyncIterator",u=S.toStringTag||"@@toStringTag";function h(W,B,z,H){var K,ie,E,R,B=B&&B.prototype instanceof x?B:x,B=Object.create(B.prototype),H=new F(H||[]);return B._invoke=(K=W,ie=z,E=H,R=m,function(Z,te){if(R===f)throw new Error("Generator is already running");if(R===v){if(Z==="throw")throw te;return U()}for(E.method=Z,E.arg=te;;){var se=E.delegate;if(se&&(se=function pe(oe,he){var de=oe.iterator[he.method];if(de===c){if(he.delegate=null,he.method==="throw"){if(oe.iterator.return&&(he.method="return",he.arg=c,pe(oe,he),he.method==="throw"))return _;he.method="throw",he.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}if(de=p(de,oe.iterator,he.arg),de.type==="throw")return he.method="throw",he.arg=de.arg,he.delegate=null,_;if(de=de.arg,!de)return he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,_;{if(!de.done)return de;he[oe.resultName]=de.value,he.next=oe.nextLoc,he.method!=="return"&&(he.method="next",he.arg=c)}return he.delegate=null,_}(se,E),se)){if(se===_)continue;return se}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(R===m)throw R=v,E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);if(R=f,se=p(K,ie,E),se.type==="normal"){if(R=E.done?v:y,se.arg!==_)return{value:se.arg,done:E.done}}else se.type==="throw"&&(R=v,E.method="throw",E.arg=se.arg)}}),B}function p(W,G,z){try{return{type:"normal",arg:W.call(G,z)}}catch(Y){return{type:"throw",arg:Y}}}o.wrap=h;var m="suspendedStart",y="suspendedYield",f="executing",v="completed",_={};function x(){}function C(){}function M(){}var S={},P=(S[b]=function(){return this},Object.getPrototypeOf),P=P&&P(P(N([]))),L=(P&&P!==a&&l.call(P,b)&&(S=P),M.prototype=x.prototype=Object.create(S));function D(W){["next","throw","return"].forEach(function(G){W[G]=function(z){return this._invoke(G,z)}})}function k(W){var G;this._invoke=function(z,Y){function K(){return new Promise(function(ie,E){(function R(pe,H,Z,te){var se,pe=p(W[pe],W,H);if(pe.type!=="throw")return(H=(se=pe.arg).value)&&typeof H=="object"&&l.call(H,"__await")?Promise.resolve(H.__await).then(function(oe){R("next",oe,Z,te)},function(oe){R("throw",oe,Z,te)}):Promise.resolve(H).then(function(oe){se.value=oe,Z(se)},function(oe){return R("throw",oe,Z,te)});te(pe.arg)})(z,Y,ie,E)})}return G=G?G.then(K,K):K()}}function I(W){var G={tryLoc:W[0]};1 in W&&(G.catchLoc=W[1]),2 in W&&(G.finallyLoc=W[2],G.afterLoc=W[3]),this.tryEntries.push(G)}function A(W){var G=W.completion||{};G.type="normal",delete G.arg,W.completion=G}function F(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(I,this),this.reset(!0)}function N(W){if(W){var G,z=W[b];if(z)return z.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length))return G=-1,(z=function Y(){for(;++G<W.length;)if(l.call(W,G))return Y.value=W[G],Y.done=!1,Y;return Y.value=c,Y.done=!0,Y}).next=z}return{next:U}}function U(){return{value:c,done:!0}}return(C.prototype=L.constructor=M).constructor=C,M[u]=C.displayName="GeneratorFunction",o.isGeneratorFunction=function(W){return W=typeof W=="function"&&W.constructor,!!W&&(W===C||(W.displayName||W.name)==="GeneratorFunction")},o.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,M):(W.__proto__=M,u in W||(W[u]="GeneratorFunction")),W.prototype=Object.create(L),W},o.awrap=function(W){return{__await:W}},D(k.prototype),k.prototype[g]=function(){return this},o.AsyncIterator=k,o.async=function(W,G,z,Y){var K=new k(h(W,G,z,Y));return o.isGeneratorFunction(G)?K:K.next().then(function(ie){return ie.done?ie.value:K.next()})},D(L),L[u]="Generator",L[b]=function(){return this},L.toString=function(){return"[object Generator]"},o.keys=function(W){var G,z=[];for(G in W)z.push(G);return z.reverse(),function Y(){for(;z.length;){var K=z.pop();if(K in W)return Y.value=K,Y.done=!1,Y}return Y.done=!0,Y}},o.values=N,F.prototype={constructor:F,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(A),!W)for(var G in this)G.charAt(0)==="t"&&l.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=c)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var G=this;function z(B,H){return ie.type="throw",ie.arg=W,G.next=B,H&&(G.method="next",G.arg=c),!!H}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var K=this.tryEntries[Y],ie=K.completion;if(K.tryLoc==="root")return z("end");if(K.tryLoc<=this.prev){var E=l.call(K,"catchLoc"),R=l.call(K,"finallyLoc");if(E&&R){if(this.prev<K.catchLoc)return z(K.catchLoc,!0);if(this.prev<K.finallyLoc)return z(K.finallyLoc)}else if(E){if(this.prev<K.catchLoc)return z(K.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return z(K.finallyLoc)}}}},abrupt:function(W,G){for(var z=this.tryEntries.length-1;0<=z;--z){var Y=this.tryEntries[z];if(Y.tryLoc<=this.prev&&l.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var K=Y;break}}var ie=(K=K&&(W==="break"||W==="continue")&&K.tryLoc<=G&&G<=K.finallyLoc?null:K)?K.completion:{};return ie.type=W,ie.arg=G,K?(this.method="next",this.next=K.finallyLoc,_):this.complete(ie)},complete:function(W,G){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&G&&(this.next=G),_},finish:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var z=this.tryEntries[G];if(z.finallyLoc===W)return this.complete(z.completion,z.afterLoc),A(z),_}},catch:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var z,Y,K=this.tryEntries[G];if(K.tryLoc===W)return(z=K.completion).type==="throw"&&(Y=z.arg,A(K)),Y}throw new Error("illegal catch attempt")},delegateYield:function(W,G,z){return this.delegate={iterator:N(W),resultName:G,nextLoc:z},this.method==="next"&&(this.arg=c),_}},o}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(t,i,d){(function(o){var c,a,l,b,g,u,h,p,m,y;function f(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function v(A){return A=typeof A!="string"?String(A):A}function _(A){var F={next:function(){var N=A.shift();return{done:N===void 0,value:N}}};return a&&(F[Symbol.iterator]=function(){return F}),F}function x(A){this.map={},A instanceof x?A.forEach(function(F,N){this.append(N,F)},this):Array.isArray(A)?A.forEach(function(F){this.append(F[0],F[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(F){this.append(F,A[F])},this)}function C(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function M(A){return new Promise(function(F,N){A.onload=function(){F(A.result)},A.onerror=function(){N(A.error)}})}function S(A){var F=new FileReader,N=M(F);return F.readAsArrayBuffer(A),N}function P(A){var F;return A.slice?A.slice(0):((F=new Uint8Array(A.byteLength)).set(new Uint8Array(A)),F.buffer)}function L(){return this.bodyUsed=!1,this._initBody=function(A){if(this._bodyInit=A)if(typeof A=="string")this._bodyText=A;else if(l&&Blob.prototype.isPrototypeOf(A))this._bodyBlob=A;else if(b&&FormData.prototype.isPrototypeOf(A))this._bodyFormData=A;else if(c&&URLSearchParams.prototype.isPrototypeOf(A))this._bodyText=A.toString();else if(g&&l&&h(A))this._bodyArrayBuffer=P(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(A)&&!p(A))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=P(A)}else this._bodyText="";this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l&&(this.blob=function(){var A=C(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var A,F,N=C(this);if(N)return N;if(this._bodyBlob)return N=this._bodyBlob,A=new FileReader,F=M(A),A.readAsText(N),F;if(this._bodyArrayBuffer)return Promise.resolve(function(U){for(var W=new Uint8Array(U),G=new Array(W.length),z=0;z<W.length;z++)G[z]=String.fromCharCode(W[z]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function D(A,F){var N,U=(F=F||{}).body;if(A instanceof D){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,F.headers||(this.headers=new x(A.headers)),this.method=A.method,this.mode=A.mode,U||A._bodyInit==null||(U=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=F.credentials||this.credentials||"omit",!F.headers&&this.headers||(this.headers=new x(F.headers)),this.method=(A=F.method||this.method||"GET",N=A.toUpperCase(),-1<m.indexOf(N)?N:A),this.mode=F.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(U)}function k(A){var F=new FormData;return A.trim().split("&").forEach(function(N){var U;N&&(U=(N=N.split("=")).shift().replace(/\+/g," "),N=N.join("=").replace(/\+/g," "),F.append(decodeURIComponent(U),decodeURIComponent(N)))}),F}function I(A,F){F=F||{},this.type="default",this.status=F.status===void 0?200:F.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new x(F.headers),this.url=F.url||"",this._initBody(A)}o.fetch||(c="URLSearchParams"in o,a="Symbol"in o&&"iterator"in Symbol,l="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),b="FormData"in o,(g="ArrayBuffer"in o)&&(u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(A){return A&&DataView.prototype.isPrototypeOf(A)},p=ArrayBuffer.isView||function(A){return A&&-1<u.indexOf(Object.prototype.toString.call(A))}),x.prototype.append=function(A,F){A=f(A),F=v(F);var N=this.map[A];this.map[A]=N?N+","+F:F},x.prototype.delete=function(A){delete this.map[f(A)]},x.prototype.get=function(A){return A=f(A),this.has(A)?this.map[A]:null},x.prototype.has=function(A){return this.map.hasOwnProperty(f(A))},x.prototype.set=function(A,F){this.map[f(A)]=v(F)},x.prototype.forEach=function(A,F){for(var N in this.map)this.map.hasOwnProperty(N)&&A.call(F,this.map[N],N,this)},x.prototype.keys=function(){var A=[];return this.forEach(function(F,N){A.push(N)}),_(A)},x.prototype.values=function(){var A=[];return this.forEach(function(F){A.push(F)}),_(A)},x.prototype.entries=function(){var A=[];return this.forEach(function(F,N){A.push([N,F])}),_(A)},a&&(x.prototype[Symbol.iterator]=x.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],D.prototype.clone=function(){return new D(this,{body:this._bodyInit})},L.call(D.prototype),L.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},I.error=function(){var A=new I(null,{status:0,statusText:""});return A.type="error",A},y=[301,302,303,307,308],I.redirect=function(A,F){if(y.indexOf(F)===-1)throw new RangeError("Invalid status code");return new I(null,{status:F,headers:{location:A}})},o.Headers=x,o.Request=D,o.Response=I,o.fetch=function(A,F){return new Promise(function(N,U){var W=new D(A,F),G=new XMLHttpRequest;G.onload=function(){var z,Y={status:G.status,statusText:G.statusText,headers:(Y=G.getAllResponseHeaders()||"",z=new x,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(E){var E=E.split(":"),R=E.shift().trim();R&&(E=E.join(":").trim(),z.append(R,E))}),z)},K=(Y.url="responseURL"in G?G.responseURL:Y.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);N(new I(K,Y))},G.onerror=function(){U(new TypeError("Network request failed"))},G.ontimeout=function(){U(new TypeError("Network request failed"))},G.open(W.method,W.url,!0),W.credentials==="include"?G.withCredentials=!0:W.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&l&&(G.responseType="blob"),W.headers.forEach(function(z,Y){G.setRequestHeader(Y,z)}),G.send(W._bodyInit===void 0?null:W._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(t,i,d){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o,c=l(t("../core/main")),a=l(t("../color/color_conversion"));function l(u){return u&&u.__esModule?u:{default:u}}var b=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],g=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(m){var h,p,m=a.default._rgbaToHSBA(m),y=[(o=m)[0],m[1],m[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(m=y[0].toString().split(""))[p=m.length-1]=parseInt(m[p]),m[p]<2.5?m[p]=0:2.5<=m[p]&&m[p]<7.5&&(m[p]=5),m.length===2?(m[0]=parseInt(m[0]),7.5<=m[p]&&(m[p]=0,m[0]=m[0]+1),y[0]=10*m[0]+m[1]):7.5<=m[p]?y[0]=10:y[0]=m[p]),y[2]=y[2]/255;for(var f=y.length-1;1<=f;f--)y[f]<=.25?y[f]=0:.25<y[f]&&y[f]<.75?y[f]=.5:y[f]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var v=2;0<=v;v--)o[v]=Math.round(1e4*o[v])/1e4;for(var _=0;_<b.length;_++){if(b[_].h===o[0]&&b[_].s===o[1]&&b[_].b===o[2]){h=b[_].name;break}h="white"}}else for(var x=0;x<g.length;x++)if(g[x].h===y[0]&&g[x].s===y[1]&&g[x].b===y[2]){h=g[x].name;break}return h},t=c.default,d.default=t},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t},c="_Description",a="_fallbackDesc",l="_fallbackTable",b="_Label",g="_labelDesc",u="_labelTable";function h(p){if(p==="label"||p==="fallback")throw new Error("description should not be LABEL or FALLBACK");return p.endsWith(".")||p.endsWith(";")||p.endsWith(",")||p.endsWith("?")||p.endsWith("!")||(p+="."),p}o.default.prototype.describe=function(p,m){var y;o.default._validateParameters("describe",arguments),typeof p=="string"&&(y=this.canvas.id,p=h(p),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==p&&(this.descriptions.fallback.innerHTML=p):this._describeHTML("fallback",p),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==p&&(this.descriptions.label.innerHTML=p):this._describeHTML("label",p)))},o.default.prototype.describeElement=function(p,m,y){var f,v;o.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof p=="string"&&(f=this.canvas.id,m=h(m),v=function(_){if(_==="label"||_==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return _.endsWith(".")||_.endsWith(";")||_.endsWith(",")?_=_.replace(/.$/,":"):_.endsWith(":")||(_+=":"),_}(p),p=p.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[p]?this.descriptions.fallbackElements[p].innerHTML!==v&&(this.descriptions.fallbackElements[p].innerHTML=v):this._describeElementHTML("fallback",p,v),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[p]?this.descriptions.labelElements[p].innerHTML!==v&&(this.descriptions.labelElements[p].innerHTML=v):this._describeElementHTML("label",p,v)))},o.default.prototype._describeHTML=function(p,m){var y,f=this.canvas.id;p==="fallback"?(this.dummyDOM.querySelector("#".concat(f+c))?this.dummyDOM.querySelector("#"+f+l).insertAdjacentHTML("beforebegin",'<p id="'.concat(f+a,'"></p>')):(y='<div id="'.concat(f).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(f).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(f,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(f,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(f)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(f).concat(a)),this.descriptions.fallback.innerHTML=m):p==="label"&&(this.dummyDOM.querySelector("#".concat(f+b))?this.dummyDOM.querySelector("#".concat(f+u))&&this.dummyDOM.querySelector("#".concat(f+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(f).concat(g,'"></p>')):(y='<div id="'.concat(f).concat(b,'" class="p5Label"><p id="').concat(f).concat(g,'"></p></div>'),this.dummyDOM.querySelector("#".concat(f,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(f,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+f).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+f+g),this.descriptions.label.innerHTML=m)},o.default.prototype._describeElementHTML=function(p,m,y){var f,v=this.canvas.id;p==="fallback"?(this.dummyDOM.querySelector("#".concat(v+c))?this.dummyDOM.querySelector("#"+v+l)||this.dummyDOM.querySelector("#"+v+a).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table>')):(f='<div id="'.concat(v).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#"+v).innerHTML=f),(f=document.createElement("tr")).id=v+"_fte_"+m,this.dummyDOM.querySelector("#"+v+l).appendChild(f),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=y):p==="label"&&(this.dummyDOM.querySelector("#".concat(v+b))?this.dummyDOM.querySelector("#".concat(v+u))||this.dummyDOM.querySelector("#"+v+g).insertAdjacentHTML("afterend",'<table id="'.concat(v+u,'"></table>')):(f='<div id="'.concat(v).concat(b,'" class="p5Label"><table id="').concat(v).concat(u,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",f)),(p=document.createElement("tr")).id=v+"_lte_"+m,this.dummyDOM.querySelector("#"+v+u).appendChild(p),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=y)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(o){var c,a,l,b;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],l=function(g,u,h,p){return u="".concat(u," canvas, ").concat(h," by ").concat(p," pixels, contains ").concat(g[0]),u=(g[0]===1?"".concat(u," shape: "):"".concat(u," shapes: ")).concat(g[1]),u}((a=function(g,u){var h,p="",m="",y=0;for(h in u){var f,v=0;for(f in u[h]){var _='<li id="'.concat(g,"shape").concat(y,'">').concat(u[h][f].color," ").concat(h,",");h==="line"?_+=" location = ".concat(u[h][f].pos,", length = ").concat(u[h][f].length," pixels"):(_+=" location = ".concat(u[h][f].pos),h!=="point"&&(_+=", area = ".concat(u[h][f].area," %")),_+="</li>"),p+=_,v++,y++}m=1<v?"".concat(m," ").concat(v," ").concat(h,"s"):"".concat(m," ").concat(v," ").concat(h)}return{numShapes:[y,m],details:p}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(g,u){var h,p,m=0,y="",f=Array.from(Array(10),function(){return Array(10)});for(h in u)for(var v in u[h]){var _=void 0;_=h!=="line"?'<a href="#'.concat(g,"shape").concat(m,'">').concat(u[h][v].color," ").concat(h,"</a>"):'<a href="#'.concat(g,"shape").concat(m,'">').concat(u[h][v].color," ").concat(h," midpoint</a>"),f[u[h][v].loc.locY][u[h][v].loc.locX]?f[u[h][v].loc.locY][u[h][v].loc.locX]=f[u[h][v].loc.locY][u[h][v].loc.locX]+"  "+_:f[u[h][v].loc.locY][u[h][v].loc.locX]=_,m++}for(p in f){var x,C="<tr>";for(x in f[p])C+="<td>",f[p][x]!==void 0&&(C+=f[p][x]),C+="</td>";y=y+C+"</tr>"}return y}(o,this.ingredients.shapes),l!==c.summary.innerHTML&&(c.summary.innerHTML=l),b!==c.map.innerHTML&&(c.map.innerHTML=b),a.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=a.details),this._accessibleOutputs[o]=c)},t=t.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(l){return function(b){if(Array.isArray(b)){for(var g=0,u=new Array(b.length);g<b.length;g++)u[g]=b[g];return u}}(l)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(l,b,g){return b=Math.floor(l[0]/b*10),l=Math.floor(l[1]/g*10),b===10&&(b-=1),l===10&&(l-=1),{locX:b,locY:l}}o.default.prototype.textOutput=function(l){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(l){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(l,b){var g,u,h,p=this.canvas.id,m=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),"");b==="Fallback"?(g=p+l,this.dummyDOM.querySelector("#".concat(u=p+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(p,"_Description"))?this.dummyDOM.querySelector("#".concat(p,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(p)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):b==="Label"&&(g=p+l+(m=b),this.dummyDOM.querySelector("#".concat(u=p+"accessibleOutput"+b))||(this.dummyDOM.querySelector("#".concat(p,"_Label"))?this.dummyDOM.querySelector("#".concat(p,"_Label")):this.dummyDOM.querySelector("#".concat(p))).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>'))),this._accessibleOutputs[g]={},l==="textOutput"?(m="#".concat(p,"gridOutput").concat(m),h='<div id="'.concat(g,'">Text Output<div id="').concat(g,'Summary" aria-label="text output summary"><p id="').concat(g,'_summary"></p><ul id="').concat(g,'_list"></ul></div><table id="').concat(g,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(u)).innerHTML=h,this._accessibleOutputs[g].list=this.dummyDOM.querySelector("#".concat(g,"_list"))):l==="gridOutput"&&(m="#".concat(p,"textOutput").concat(m),h='<div id="'.concat(g,'">Grid Output<p id="').concat(g,'_summary" aria-label="grid output summary"><table id="').concat(g,'_map" summary="grid output content"></table><ul id="').concat(g,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(u)).innerHTML=h,this._accessibleOutputs[g].map=this.dummyDOM.querySelector("#".concat(g,"_map"))),this._accessibleOutputs[g].shapeDetails=this.dummyDOM.querySelector("#".concat(g,"_shapeDetails")),this._accessibleOutputs[g].summary=this.dummyDOM.querySelector("#".concat(g,"_summary"))},o.default.prototype._updateAccsOutput=function(){var l=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(l+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(l+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(l+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(l+"gridOutputLabel"))},o.default.prototype._accsBackground=function(l){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==l&&(this.ingredients.colors.backgroundRGBA=l,this.ingredients.colors.background=this._rgbColorName(l))},o.default.prototype._accsCanvasColors=function(l,b){l==="fill"?this.ingredients.colors.fillRGBA!==b&&(this.ingredients.colors.fillRGBA=b,this.ingredients.colors.fill=this._rgbColorName(b)):l==="stroke"&&this.ingredients.colors.strokeRGBA!==b&&(this.ingredients.colors.strokeRGBA=b,this.ingredients.colors.stroke=this._rgbColorName(b))},o.default.prototype._accsOutput=function(l,b){l==="ellipse"&&b[2]===b[3]?l="circle":l==="rectangle"&&b[2]===b[3]&&(l="square");var g,u,h={},p=!0,m=function(f,v){var _;return f=f==="rectangle"||f==="ellipse"||f==="arc"||f==="circle"||f==="square"?(_=Math.round(v[0]+v[2]/2),Math.round(v[1]+v[3]/2)):f==="triangle"?(_=(v[0]+v[2]+v[4])/3,(v[1]+v[3]+v[5])/3):f==="quadrilateral"?(_=(v[0]+v[2]+v[4]+v[6])/4,(v[1]+v[3]+v[5]+v[7])/4):f==="line"?(_=(v[0]+v[2])/2,(v[1]+v[3])/2):(_=v[0],v[1]),[_,f]}(l,b);if(l==="line"?(h.color=this.ingredients.colors.stroke,h.length=Math.round(this.dist(b[0],b[1],b[2],b[3])),g=this._getPos(b[0],[1]),u=this._getPos(b[2],[3]),h.loc=a(m,this.width,this.height),h.pos=g===u?"at ".concat(g):"from ".concat(g," to ").concat(u)):(l==="point"?h.color=this.ingredients.colors.stroke:(h.color=this.ingredients.colors.fill,h.area=this._getArea(l,b)),h.pos=this._getPos.apply(this,c(m)),h.loc=a(m,this.width,this.height)),this.ingredients.shapes[l]){if(this.ingredients.shapes[l]!==[h]){for(var y in this.ingredients.shapes[l])JSON.stringify(this.ingredients.shapes[l][y])===JSON.stringify(h)&&(p=!1);p===!0&&this.ingredients.shapes[l].push(h)}}else this.ingredients.shapes[l]=[h]},o.default.prototype._getPos=function(u,g){var u=new DOMPointReadOnly(u,g),g=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),u=u.matrixTransform(g),g=u.x,u=u.y,h=this.width*this._pixelDensity,p=this.height*this._pixelDensity;return g<.4*h?u<.4*p?"top left":.6*p<u?"bottom left":"mid left":.6*h<g?u<.4*p?"top right":.6*p<u?"bottom right":"mid right":u<.4*p?"top middle":.6*p<u?"bottom middle":"middle"},o.default.prototype._getArea=function(l,b){var g,u,h=0,p=(l==="arc"?(h=(g=((b[5]-b[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*b[2]*b[3]/8,b[6]!=="open"&&b[6]!=="chord"||(u=b[0],v=b[1],p=b[0]+b[2]/2*Math.cos(b[4]).toFixed(2),_=b[1]+b[3]/2*Math.sin(b[4]).toFixed(2),y=b[0]+b[2]/2*Math.cos(b[5]).toFixed(2),m=b[1]+b[3]/2*Math.sin(b[5]).toFixed(2),u=Math.abs(u*(_-m)+p*(m-v)+y*(v-_))/2,g>Math.PI?h+=u:h-=u)):l==="ellipse"||l==="circle"?h=3.14*b[2]/2*b[3]/2:l==="line"||l==="point"?h=0:l==="quadrilateral"?h=Math.abs((b[6]+b[0])*(b[7]-b[1])+(b[0]+b[2])*(b[1]-b[3])+(b[2]+b[4])*(b[3]-b[5])+(b[4]+b[6])*(b[5]-b[7]))/2:l==="rectangle"||l==="square"?h=b[2]*b[3]:l==="triangle"&&(h=Math.abs(b[0]*(b[3]-b[5])+b[2]*(b[5]-b[1])+b[4]*(b[1]-b[3]))/2),this.width*this._pixelDensity),m=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(p,0),new DOMPoint(p,m),new DOMPoint(0,m)],f=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),v=y.map(function(x){return x.matrixTransform(f)}),_=Math.abs((v[3].x+v[0].x)*(v[3].y-v[0].y)+(v[0].x+v[1].x)*(v[0].y-v[1].y)+(v[1].x+v[2].x)*(v[1].y-v[2].y)+(v[2].x+v[3].x)*(v[2].y-v[3].y))/2;return Math.round(100*h/_)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(o){var c,a,l,b;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],l=function(g,u,h,p){return h="Your output is a, ".concat(h," by ").concat(p," pixels, ").concat(u," canvas containing the following"),h=g===1?"".concat(h," shape:"):"".concat(h," ").concat(g," shapes:"),h}((a=function(g,u){var h,p="",m=0;for(h in u)for(var y in u[h]){var f='<li><a href="#'.concat(g,"shape").concat(m,'">').concat(u[h][y].color," ").concat(h,"</a>");h==="line"?f+=", ".concat(u[h][y].pos,", ").concat(u[h][y].length," pixels long.</li>"):(f+=", at ".concat(u[h][y].pos),h!=="point"&&(f+=", covering ".concat(u[h][y].area,"% of the canvas")),f+=".</li>"),p+=f,m++}return{numShapes:m,listShapes:p}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(g,u){var h,p="",m=0;for(h in u)for(var y in u[h]){var f='<tr id="'.concat(g,"shape").concat(m,'"><th>').concat(u[h][y].color," ").concat(h,"</th>");h==="line"?f+="<td>location = ".concat(u[h][y].pos,"</td><td>length = ").concat(u[h][y].length," pixels</td></tr>"):(f+="<td>location = ".concat(u[h][y].pos,"</td>"),h!=="point"&&(f+="<td> area = ".concat(u[h][y].area,"%</td>")),f+="</tr>"),p+=f,m++}return p}(o,this.ingredients.shapes),l!==c.summary.innerHTML&&(c.summary.innerHTML=l),a.listShapes!==c.list.innerHTML&&(c.list.innerHTML=a.listShapes),b!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=b),this._accessibleOutputs[o]=c)},t=t.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(t,i,d){var o=(o=t("./core/main"))&&o.__esModule?o:{default:o};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),i.exports=o.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(o){var c=o[0],a=o[1],l=o[2],b=(2-a)*l/2;return b!=0&&(b==1?a=0:b<.5?a/=2-a:a=a*l/(2-2*b)),[c,a,b,o[3]]},_hsbaToRGBA:function(o){var c,a,l,b,g,u=6*o[0],h=o[1],p=o[2];return h===0?[p,p,p,o[3]]:(a=p*(1-h),l=p*(1-h*(u-(c=Math.floor(u)))),h=p*(1-h*(1+c-u)),u=c===1?(b=l,g=p,a):c===2?(b=a,g=p,h):c===3?(b=a,g=l,p):c===4?(b=h,g=a,p):c===5?(b=p,g=a,l):(b=p,g=h,a),[b,g,u,o[3]])},_hslaToHSBA:function(o){var c=o[0],a=o[1],l=o[2],b=l<.5?(1+a)*l:l+a-l*a;return[c,a=2*(b-l)/b,b,o[3]]},_hslaToRGBA:function(o){var c,a=6*o[0],l=o[1],b=o[2];return l===0?[b,b,b,o[3]]:[(c=function(g,u,h){return g<0?g+=6:6<=g&&(g-=6),g<1?u+(h-u)*g:g<3?h:g<4?u+(h-u)*(4-g):u})(2+a,l=2*b-(b=b<.5?(1+l)*b:b+l-b*l),b),c(a,l,b),c(a-2,l,b),o[3]]},_rgbaToHSBA:function(o){var c,a,l=o[0],b=o[1],g=o[2],u=Math.max(l,b,g),h=u-Math.min(l,b,g);return h==0?a=c=0:(a=h/u,l===u?c=(b-g)/h:b===u?c=2+(g-l)/h:g===u&&(c=4+(l-b)/h),c<0?c+=6:6<=c&&(c-=6)),[c/6,a,u,o[3]]},_rgbaToHSLA:function(o){var c,a,l=o[0],b=o[1],g=o[2],u=Math.max(l,b,g),p=Math.min(l,b,g),h=u+p,p=u-p;return p==0?a=c=0:(a=h<1?p/h:p/(2-h),l===u?c=(b-g)/p:b===u?c=2+(g-l)/p:g===u&&(c=4+(l-b)/p),c<0?c+=6:6<=c&&(c-=6)),[c/6,a,h/2,o[3]]}},t=t.default.ColorConversion,d.default=t},{"../core/main":280}],266:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../core/main"))&&g.__esModule?g:{default:g},l=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(u){return a.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},a.default.prototype.blue=function(u){return a.default._validateParameters("blue",arguments),this.color(u)._getBlue()},a.default.prototype.brightness=function(u){return a.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},a.default.prototype.color=function(){for(var u,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return a.default._validateParameters("color",p),p[0]instanceof a.default.Color?p[0]:(u=Array.isArray(p[0])?p[0]:p,new a.default.Color(this,u))},a.default.prototype.green=function(u){return a.default._validateParameters("green",arguments),this.color(u)._getGreen()},a.default.prototype.hue=function(u){return a.default._validateParameters("hue",arguments),this.color(u)._getHue()},a.default.prototype.lerpColor=function(u,h,p){a.default._validateParameters("lerpColor",arguments);var m,y,f,v=this._colorMode,_=this._colorMaxes;if(v===l.RGB)y=u.levels.map(function(x){return x/255}),f=h.levels.map(function(x){return x/255});else if(v===l.HSB)u._getBrightness(),h._getBrightness(),y=u.hsba,f=h.hsba;else{if(v!==l.HSL)throw new Error("".concat(v," cannot be used for interpolation."));u._getLightness(),h._getLightness(),y=u.hsla,f=h.hsla}return p=Math.max(Math.min(p,1),0),this.lerp===void 0&&(this.lerp=function(x,C,M){return M*(C-x)+x}),v===l.RGB?m=this.lerp(y[0],f[0],p):(.5<Math.abs(y[0]-f[0])&&(y[0]>f[0]?f[0]+=1:y[0]+=1),1<=(m=this.lerp(y[0],f[0],p))&&--m),u=this.lerp(y[1],f[1],p),h=this.lerp(y[2],f[2],p),y=this.lerp(y[3],f[3],p),m*=_[v][0],u*=_[v][1],h*=_[v][2],y*=_[v][3],this.color(m,u,h,y)},a.default.prototype.lightness=function(u){return a.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},a.default.prototype.red=function(u){return a.default._validateParameters("red",arguments),this.color(u)._getRed()},a.default.prototype.saturation=function(u){return a.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var g=a.default;d.default=g},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(m,i,d){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(C){return o(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":o(C)})(x)}m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.get-own-property-descriptor"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.string.trim"),m("core-js/modules/es.weak-map"),m("core-js/modules/web.dom-collections.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=u(m("../core/main")),l=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var C=g();if(C&&C.has(x))return C.get(x);var M,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in x){var L;Object.prototype.hasOwnProperty.call(x,M)&&((L=P?Object.getOwnPropertyDescriptor(x,M):null)&&(L.get||L.set)?Object.defineProperty(S,M,L):S[M]=x[M])}return S.default=x,C&&C.set(x,S),S}(m("../core/constants")),b=u(m("./color_conversion"));function g(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,g=function(){return x},x)}function u(x){return x&&x.__esModule?x:{default:x}}function h(x,C){for(var M=0;M<C.length;M++){var S=C[M];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}var p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},m=/\s*/,_=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp("".concat(y.source,"%")),v={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",_.source,",",_.source,",",_.source,"\\)$"].join(m.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),RGBA:new RegExp(["^rgba\\(",_.source,",",_.source,",",_.source,",",y.source,"\\)$"].join(m.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",y.source,"\\)$"].join(m.source),"i"),HSL:new RegExp(["^hsl\\(",_.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),HSLA:new RegExp(["^hsla\\(",_.source,",",f.source,",",f.source,",",y.source,"\\)$"].join(m.source),"i"),HSB:new RegExp(["^hsb\\(",_.source,",",f.source,",",f.source,"\\)$"].join(m.source),"i"),HSBA:new RegExp(["^hsba\\(",_.source,",",f.source,",",f.source,",",y.source,"\\)$"].join(m.source),"i")},_=(a.default.Color=function(){function x(P,L){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(P._colorMode,P._colorMaxes),![l.RGB,l.HSL,l.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=x._parseInputs.apply(this,L),this._calculateLevels()}var C,M,S;return C=x,S=[{key:"_parseInputs",value:function(P,L,D,k){var I,A=arguments.length,F=this.mode,N=this.maxes[F],U=[];if(3<=A){for(U[0]=P/N[0],U[1]=L/N[1],U[2]=D/N[2],U[3]=typeof k=="number"?k/N[3]:1,I=U.length-1;0<=I;--I){var W=U[I];W<0?U[I]=0:1<W&&(U[I]=1)}return F===l.HSL?b.default._hslaToRGBA(U):F===l.HSB?b.default._hsbaToRGBA(U):U}if(A===1&&typeof P=="string"){if(D=P.trim().toLowerCase(),p[D])return x._parseInputs.call(this,p[D]);if(v.HEX3.test(D))return(U=v.HEX3.exec(D).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,U;if(v.HEX6.test(D))return(U=v.HEX6.exec(D).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,U;if(v.HEX4.test(D))return U=v.HEX4.exec(D).slice(1).map(function(G){return parseInt(G+G,16)/255});if(v.HEX8.test(D))return U=v.HEX8.exec(D).slice(1).map(function(G){return parseInt(G,16)/255});if(v.RGB.test(D))return(U=v.RGB.exec(D).slice(1).map(function(G){return G/255}))[3]=1,U;if(v.RGB_PERCENT.test(D))return(U=v.RGB_PERCENT.exec(D).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,U;if(v.RGBA.test(D))return U=v.RGBA.exec(D).slice(1).map(function(G,z){return z===3?parseFloat(G):G/255});if(v.RGBA_PERCENT.test(D))return U=v.RGBA_PERCENT.exec(D).slice(1).map(function(G,z){return z===3?parseFloat(G):parseFloat(G)/100});if(v.HSL.test(D)?(U=v.HSL.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:v.HSLA.test(D)&&(U=v.HSLA.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:z===3?parseFloat(G):parseInt(G,10)/100})),(U=U.map(function(G){return Math.max(Math.min(G,1),0)})).length)return b.default._hslaToRGBA(U);if(v.HSB.test(D)?(U=v.HSB.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:v.HSBA.test(D)&&(U=v.HSBA.exec(D).slice(1).map(function(G,z){return z===0?parseInt(G,10)/360:z===3?parseFloat(G):parseInt(G,10)/100})),U.length){for(I=U.length-1;0<=I;--I)U[I]=Math.max(Math.min(U[I],1),0);return b.default._hsbaToRGBA(U)}U=[1,1,1,1]}else{if(A!==1&&A!==2||typeof P!="number")throw new Error("".concat(arguments,"is not a valid color representation."));U[0]=P/N[2],U[1]=P/N[2],U[2]=P/N[2],U[3]=typeof L=="number"?L/N[3]:1,U=U.map(function(G){return Math.max(Math.min(G,1),0)})}return U}}],(M=[{key:"toString",value:function(P){var L=this.levels,D=this._array,k=D[3];switch(P){case"#rrggbb":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16));case"#rrggbbaa":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16),L[3]<16?"0".concat(L[3].toString(16)):L[3].toString(16));case"#rgb":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16),Math.round(15*D[3]).toString(16));case"rgb":return"rgb(".concat(L[0],", ",L[1],", ",L[2],")");case"rgb%":return"rgb(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%, ",(100*D[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(L[0],",",L[1],",",L[2],",",k,")")}}},{key:"setRed",value:function(P){this._array[0]=P/this.maxes[l.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(P){this._array[1]=P/this.maxes[l.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(P){this._array[2]=P/this.maxes[l.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(P){this._array[3]=P/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var P=this._array,L=this.levels=new Array(P.length),D=P.length-1;0<=D;--D)L[D]=Math.round(255*P[D]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(P,L){this.mode=P,this.maxes=L}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[l.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[l.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[l.RGB][1]}},{key:"_getHue",value:function(){return this.mode===l.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[l.HSB][0]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[l.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[l.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[l.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===l.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[l.HSB][1]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[l.HSL][1])}}])&&h(C.prototype,M),S&&h(C,S),x}(),a.default.Color);d.default=_},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../core/main"))&&g.__esModule?g:{default:g},l=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}t("./p5.Color"),a.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},a.default.prototype.endClip=function(){this._renderer.endClip()},a.default.prototype.clip=function(u,h){this._renderer.beginClip(h),u(),this._renderer.endClip(h)},a.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},a.default.prototype.colorMode=function(u,h,p,m,y){return a.default._validateParameters("colorMode",arguments),u!==l.RGB&&u!==l.HSB&&u!==l.HSL||(this._colorMode=u,u=this._colorMaxes[u],arguments.length===2?(u[0]=h,u[1]=h,u[2]=h,u[3]=h):arguments.length===4?(u[0]=h,u[1]=p,u[2]=m):arguments.length===5&&(u[0]=h,u[1]=p,u[2]=m,u[3]=y)),this},a.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},a.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var g=a.default;d.default=g},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.QUADRATIC=d.LINEAR=d._CTX_MIDDLE=d._DEFAULT_LEADMULT=d._DEFAULT_TEXT_FILL=d.WORD=d.CHAR=d.BOLDITALIC=d.BOLD=d.ITALIC=d.NORMAL=d.BLUR=d.ERODE=d.DILATE=d.POSTERIZE=d.INVERT=d.OPAQUE=d.GRAY=d.THRESHOLD=d.BURN=d.DODGE=d.SOFT_LIGHT=d.HARD_LIGHT=d.OVERLAY=d.REPLACE=d.SCREEN=d.MULTIPLY=d.EXCLUSION=d.SUBTRACT=d.DIFFERENCE=d.LIGHTEST=d.DARKEST=d.ADD=d.REMOVE=d.BLEND=d.UP_ARROW=d.TAB=d.SHIFT=d.RIGHT_ARROW=d.RETURN=d.OPTION=d.LEFT_ARROW=d.ESCAPE=d.ENTER=d.DOWN_ARROW=d.DELETE=d.CONTROL=d.BACKSPACE=d.ALT=d.AUTO=d.HSL=d.HSB=d.RGB=d.MITER=d.BEVEL=d.ROUND=d.SQUARE=d.PROJECT=d.PIE=d.CHORD=d.OPEN=d.CLOSE=d.TESS=d.QUAD_STRIP=d.QUADS=d.TRIANGLE_STRIP=d.TRIANGLE_FAN=d.TRIANGLES=d.LINE_LOOP=d.LINE_STRIP=d.LINES=d.POINTS=d.BASELINE=d.BOTTOM=d.TOP=d.CENTER=d.LEFT=d.RIGHT=d.RADIUS=d.CORNERS=d.CORNER=d.RAD_TO_DEG=d.DEG_TO_RAD=d.RADIANS=d.DEGREES=d.TWO_PI=d.TAU=d.QUARTER_PI=d.PI=d.HALF_PI=d.WAIT=d.TEXT=d.MOVE=d.HAND=d.CROSS=d.ARROW=d.WEBGL2=d.WEBGL=d.P2D=d.VERSION=void 0,d.RGBA=d.HALF_FLOAT=d.FLOAT=d.UNSIGNED_INT=d.UNSIGNED_BYTE=d.COVER=d.CONTAIN=d.FALLBACK=d.LABEL=d.AXES=d.GRID=d._DEFAULT_FILL=d._DEFAULT_STROKE=d.PORTRAIT=d.LANDSCAPE=d.SMOOTH=d.FLAT=d.MIRROR=d.CLAMP=d.REPEAT=d.NEAREST=d.IMAGE=d.IMMEDIATE=d.TEXTURE=d.FILL=d.STROKE=d.CURVE=d.BEZIER=void 0;var o=Math.PI,c=(d.VERSION="1.9.4",d.P2D="p2d",d.WEBGL="webgl",d.WEBGL2="webgl2",d.ARROW="default",d.CROSS="crosshair",d.HAND="pointer",d.MOVE="move",d.TEXT="text",d.WAIT="wait",o/2),c=(d.HALF_PI=c,o),c=(d.PI=c,o/4),c=(d.QUARTER_PI=c,2*o),c=(d.TAU=c,2*o),c=(d.TWO_PI=c,d.DEGREES="degrees",d.RADIANS="radians",o/180),c=(d.DEG_TO_RAD=c,180/o);d.RAD_TO_DEG=c,d.CORNER="corner",d.CORNERS="corners",d.RADIUS="radius",d.RIGHT="right",d.LEFT="left",d.CENTER="center",d.TOP="top",d.BOTTOM="bottom",d.BASELINE="alphabetic",d.POINTS=0,d.LINES=1,d.LINE_STRIP=3,d.LINE_LOOP=2,d.TRIANGLES=4,d.TRIANGLE_FAN=6,d.TRIANGLE_STRIP=5,d.QUADS="quads",d.QUAD_STRIP="quad_strip",d.TESS="tess",d.CLOSE="close",d.OPEN="open",d.CHORD="chord",d.PIE="pie",d.PROJECT="square",d.SQUARE="butt",d.ROUND="round",d.BEVEL="bevel",d.MITER="miter",d.RGB="rgb",d.HSB="hsb",d.HSL="hsl",d.AUTO="auto",d.ALT=18,d.BACKSPACE=8,d.CONTROL=17,d.DELETE=46,d.DOWN_ARROW=40,d.ENTER=13,d.ESCAPE=27,d.LEFT_ARROW=37,d.OPTION=18,d.RETURN=13,d.RIGHT_ARROW=39,d.SHIFT=16,d.TAB=9,d.UP_ARROW=38,d.BLEND="source-over",d.REMOVE="destination-out",d.ADD="lighter",d.DARKEST="darken",d.LIGHTEST="lighten",d.DIFFERENCE="difference",d.SUBTRACT="subtract",d.EXCLUSION="exclusion",d.MULTIPLY="multiply",d.SCREEN="screen",d.REPLACE="copy",d.OVERLAY="overlay",d.HARD_LIGHT="hard-light",d.SOFT_LIGHT="soft-light",d.DODGE="color-dodge",d.BURN="color-burn",d.THRESHOLD="threshold",d.GRAY="gray",d.OPAQUE="opaque",d.INVERT="invert",d.POSTERIZE="posterize",d.DILATE="dilate",d.ERODE="erode",d.BLUR="blur",d.NORMAL="normal",d.ITALIC="italic",d.BOLD="bold",d.BOLDITALIC="bold italic",d.CHAR="CHAR",d.WORD="WORD",d._DEFAULT_TEXT_FILL="#000000",d._DEFAULT_LEADMULT=1.25,d._CTX_MIDDLE="middle",d.LINEAR="linear",d.QUADRATIC="quadratic",d.BEZIER="bezier",d.CURVE="curve",d.STROKE="stroke",d.FILL="fill",d.TEXTURE="texture",d.IMMEDIATE="immediate",d.IMAGE="image",d.NEAREST="nearest",d.REPEAT="repeat",d.CLAMP="clamp",d.MIRROR="mirror",d.FLAT="flat",d.SMOOTH="smooth",d.LANDSCAPE="landscape",d.PORTRAIT="portrait",d._DEFAULT_STROKE="#000000",d._DEFAULT_FILL="#FFFFFF",d.GRID="grid",d.AXES="axes",d.LABEL="label",d.FALLBACK="fallback",d.CONTAIN="contain",d.COVER="cover",d.UNSIGNED_BYTE="unsigned-byte",d.UNSIGNED_INT="unsigned-int",d.FLOAT="float",d.HALF_FLOAT="half-float",d.RGBA="rgba"},{}],270:[function(t,i,d){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(y)}function c(y){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(l=t("./main"))&&l.__esModule?l:{default:l},l=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var f=b();if(f&&f.has(y))return f.get(y);var v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var C;Object.prototype.hasOwnProperty.call(y,v)&&((C=x?Object.getOwnPropertyDescriptor(y,v):null)&&(C.get||C.set)?Object.defineProperty(_,v,C):_[v]=y[v])}return _.default=y,f&&f.set(y,_),_}(t("./constants"));function b(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,b=function(){return y},y)}var g=[l.ARROW,l.CROSS,l.HAND,l.MOVE,l.TEXT,l.WAIT],u=(a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60,window.print),h=!1;function p(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function m(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):h||(u(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(h=!0))},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(y,f,v){var _,x="auto",C=this._curElement.elt;g.includes(y)?x=y:typeof y=="string"&&(_="",f&&v&&typeof f=="number"&&typeof v=="number"&&(_="".concat(f," ").concat(v)),x=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(_,", auto"):y),C.style.cursor=x},a.default.prototype.frameRate=function(y){return a.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(y){return this.frameRate(y)},a.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.webglVersion=l.P2D,a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=p(),a.default.prototype.windowHeight=m(),a.default.prototype._onresize=function(y){this._setProperty("windowWidth",p()),this._setProperty("windowHeight",m());var f=this._isGlobal?window:this;typeof f.windowResized!="function"||(f=f.windowResized(y))===void 0||f||y.preventDefault()},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(y){if(a.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(y){var f;return a.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=y),(f=this).resizeCanvas(this.width,this.height,!0)):f=this._pixelDensity,f},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},a.default.prototype.getURLParams=function(){for(var y,f=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,v={};(y=f.exec(location.search))!=null;)y.index===f.lastIndex&&f.lastIndex++,v[y[1]]=y[2];return v},t=a.default,d.default=t},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(g=t("../main"))&&g.__esModule?g:{default:g};t("../internationalization");function c(u,h){h=h||console.log.bind(console),a||b(),a.some(function(p){var m;if(u.message&&u.message.match("\\W?".concat(p.name,"\\W"))!==null)return m=p.type==="function"?"".concat(p.name,"()"):p.name,h("Did you just try to use p5.js's ".concat(m," ").concat(p.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(l)),!0})}var a=null,b=null,l=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},a=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),b=function(){function u(p){return Object.getOwnPropertyNames(p).filter(function(m){return m[0]!=="_"&&!(m in h)&&(h[m]=!0)}).map(function(m){var y=typeof p[m]=="function"?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:y}})}var h={};(a=[].concat(u(o.default.prototype),u(t("../constants")))).sort(function(p,m){return m.name.length-p.name.length})},g=(o.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),o.default);d.default=g},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(o=t("../main"))&&o.__esModule?o:{default:o};t("../internationalization"),o.default._friendlyFileLoadError=function(){},t=o.default,d.default=t},{"../internationalization":278,"../main":280}],273:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=g(t("../main"));t("../internationalization"),b(t("../constants"));function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}function b(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=l();if(p&&p.has(h))return p.get(h);var m,y,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&((y=v?Object.getOwnPropertyDescriptor(h,m):null)&&(y.get||y.set)?Object.defineProperty(f,m,y):f[m]=h[m]);return f.default=h,p&&p.set(h,f),f}function g(h){return h&&h.__esModule?h:{default:h}}a.default._fesCodeReader=function(){};var u=a.default;d.default=u},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(t,i,d){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function o(){var c=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,l=/^(eval@)?(\[native code])?$/;return{parse:function(b){return b.stacktrace!==void 0||b["opera#sourceloc"]!==void 0?this.parseOpera(b):b.stack&&b.stack.match(a)?this.parseV8OrIE(b):b.stack?this.parseFFOrSafari(b):void 0},extractLocation:function(b){return b.indexOf(":")===-1?[b]:[(b=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(b.replace(/[()]/g,"")))[1],b[2]||void 0,b[3]||void 0]},parseV8OrIE:function(b){return b.stack.split(`
`).filter(function(g){return!!g.match(a)},this).map(function(g){var u=(g=-1<g.indexOf("(eval ")?g.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):g).replace(/^\s+/,"").replace(/\(eval code/g,"("),h=u.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=h?u.replace(h[0],""):u).split(/\s+/).slice(1),h=this.extractLocation(h?h[1]:u.pop());return{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(h[0])?void 0:h[0],lineNumber:h[1],columnNumber:h[2],source:g}},this)},parseFFOrSafari:function(b){return b.stack.split(`
`).filter(function(g){return!g.match(l)},this).map(function(g){var u,h;return(g=-1<g.indexOf(" > eval")?g.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):g).indexOf("@")===-1&&g.indexOf(":")===-1?{functionName:g}:{functionName:(h=g.match(u=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&h[1]?h[1]:void 0,fileName:(h=this.extractLocation(g.replace(u,"")))[0],lineNumber:h[1],columnNumber:h[2],source:g}},this)},parseOpera:function(b){return!b.stacktrace||-1<b.message.indexOf(`
`)&&b.message.split(`
`).length>b.stacktrace.split(`
`).length?this.parseOpera9(b):b.stack?this.parseOpera11(b):this.parseOpera10(b)},parseOpera9:function(b){for(var g=/Line (\d+).*script (?:in )?(\S+)/i,u=b.message.split(`
`),h=[],p=2,m=u.length;p<m;p+=2){var y=g.exec(u[p]);y&&h.push({fileName:y[2],lineNumber:y[1],source:u[p]})}return h},parseOpera10:function(b){for(var g=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=b.stacktrace.split(`
`),h=[],p=0,m=u.length;p<m;p+=2){var y=g.exec(u[p]);y&&h.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:u[p]})}return h},parseOpera11:function(b){return b.stack.split(`
`).filter(function(g){return!!g.match(c)&&!g.match(/^Error created at/)},this).map(function(g){var u,p=g.split("@"),h=this.extractLocation(p.pop()),p=p.shift()||"";return{functionName:p.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(u=p.match(/\(([^)]*)\)/)?p.replace(/^[^(]+\(([^)]*)\)$/,"$1"):u)===void 0||u==="[arguments not available]"?void 0:u.split(","),fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:g}},this)}}}t.default._getErrorStackParser=function(){return new o},t=t.default,d.default=t},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(t,i,d){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(c=t("../main"))&&c.__esModule?c:{default:c};(function(b){if(!(b&&b.__esModule)&&!(b===null||l(b)!=="object"&&typeof b!="function")){var g=a();if(g&&g.has(b))return g.get(b);var u,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in b){var m;Object.prototype.hasOwnProperty.call(b,u)&&((m=p?Object.getOwnPropertyDescriptor(b,u):null)&&(m.get||m.set)?Object.defineProperty(h,u,m):h[u]=b[u])}h.default=b,g&&g.set(b,h)}})(t("../constants")),t("../internationalization");function a(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,a=function(){return b},b)}function l(b){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(b)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},t=c.default,d.default=t},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(t,i,d){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}function c(b){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var g=l();if(g&&g.has(b))return g.get(b);var u,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in b){var m;Object.prototype.hasOwnProperty.call(b,u)&&((m=p?Object.getOwnPropertyDescriptor(b,u):null)&&(m.get||m.set)?Object.defineProperty(h,u,m):h[u]=b[u])}return h.default=b,g&&g.set(b,h),h}(t("./constants"));function l(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,l=function(){return b},b)}d.default={modeAdjust:function(b,g,u,h,p){return p===a.CORNER?{x:b,y:g,w:u,h}:p===a.CORNERS?{x:b,y:g,w:u-b,h:h-g}:p===a.RADIUS?{x:b-u,y:g-h,w:2*u,h:2*h}:p===a.CENTER?{x:b-.5*u,y:g-.5*h,w:u,h}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(t,i,d){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(a,l){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),c]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(t,i,d){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.setTranslatorLanguage=d.currentTranslatorLanguage=d.availableTranslatorLanguages=d.initialize=d.translator=void 0;var o,c,a=b(t("i18next")),l=b(t("i18next-browser-languagedetector"));function b(h){return h&&h.__esModule?h:{default:h}}function g(h,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var u=function(){function h(y,f){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.init(y,f)}var p,m;return p=h,(m=[{key:"fetchWithTimeout",value:function(y,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(y,f),new Promise(function(_,x){return setTimeout(function(){return x(new Error("timeout"))},v)})])}},{key:"init",value:function(y){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=y,this.options=f}},{key:"read",value:function(y,f,v){var _=this.options.loadPath;y===this.options.fallback?v(null,o[y][f]):c.includes(y)?(_=this.services.interpolator.interpolate(_,{lng:y,ns:f}),this.loadUrl(_,v)):v("Not found",!1)}},{key:"loadUrl",value:function(y,f){this.fetchWithTimeout(y).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(v){return f(null,v)}).catch(f)}}])&&g(p.prototype,m),h}();u.type="backend",d.translator=function(h,p){console.debug("p5.js translator called before translations were loaded"),a.default.t(h,p)},d.initialize=function(){return a.default.use(l.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(h){d.translator=h},function(h){return console.debug("Translations failed to load (".concat(h,")"))})},d.availableTranslatorLanguages=function(){return a.default.languages},d.currentTranslatorLanguage=function(h){return a.default.language},d.setTranslatorLanguage=function(h){return a.default.changeLanguage(h||void 0,function(p){return console.debug("Translations failed to load (".concat(p,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,d.default=t},{"./main":280}],280:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t("./shim");var a=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=l();if(p&&p.has(h))return p.get(h);var m,y={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var v;Object.prototype.hasOwnProperty.call(h,m)&&((v=f?Object.getOwnPropertyDescriptor(h,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=h[m])}return y.default=h,p&&p.set(h,y),y}(t("./constants"));function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}function b(h,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var g,u=function(){function h(y,_){var v=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=_,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var _=Object.getOwnPropertyNames(h.prototype._registeredMethods),x=!0,C=!1,M=void 0;try{for(var S,P=_[Symbol.iterator]();!(x=(S=P.next()).done);x=!0){var L=S.value;this._registeredMethods[L]=h.prototype._registeredMethods[L].slice()}}catch(G){C=!0,M=G}finally{try{x||P.return==null||P.return()}finally{if(C)throw M}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),h.prototype.callRegisteredHooksFor=function(G){var z=this||h.prototype,Y=this._isGlobal?window:this;if(z._registeredMethods.hasOwnProperty(G)){var z=z._registeredMethods[G],K=!0,G=!1,ie=void 0;try{for(var E,R=z[Symbol.iterator]();!(K=(E=R.next()).done);K=!0){var B=E.value;typeof B=="function"&&B.call(Y)}}catch(te){G=!0,ie=te}finally{try{K||R.return==null||R.return()}finally{if(G)throw ie}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var G=v._isGlobal?window:v;if(G.preload){v.callRegisteredHooksFor("beforePreload");var z,Y=document.getElementById(v._loadingScreenId),K=(Y||((Y=document.createElement("div")).innerHTML="Loading...",Y.style.position="absolute",Y.id=v._loadingScreenId,(v._userNode||document.body).appendChild(Y)),v._preloadMethods);for(z in K){K[z]=K[z]||h;var ie=K[z];ie!==h.prototype&&ie!==h||(v._isGlobal&&(window[z]=v._wrapPreload(v,z)),ie=v),v._registeredPreloadMethods[z]=ie[z],ie[z]=v._wrapPreload(ie,z)}G.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var G,z=this._isGlobal?window:this;z._preloadCount===0&&((G=document.getElementById(z._loadingScreenId))&&G.parentNode.removeChild(G),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),z._setup(),this._recording||z._draw()))},this._decrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||typeof G.preload!="function"||(G._setProperty("_preloadCount",G._preloadCount-1),G._runIfPreloadsAreDone())},this._wrapPreload=function(G,z){var Y=this;return function(){Y._incrementPreload();for(var K=arguments.length,ie=new Array(K),E=0;E<K;E++)ie[E]=arguments[E];return Y._registeredPreloadMethods[z].apply(G,ie)}},this._incrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||G._setProperty("_preloadCount",G._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var G=v._isGlobal?window:v;if(typeof G.preload=="function")for(var z in v._preloadMethods)G[z]=v._preloadMethods[z][z],G[z]&&v&&(G[z]=G[z].bind(v));v._millisStart=window.performance.now(),G._preloadDone=!0,typeof G.setup=="function"&&G.setup();var Y=document.getElementsByTagName("canvas"),K=!0,ie=!1,E=void 0;try{for(var R,B=Y[Symbol.iterator]();!(K=(R=B.next()).done);K=!0){var H=R.value;H.dataset.hidden==="true"&&(H.style.visibility="",delete H.dataset.hidden)}}catch(Z){ie=!0,E=Z}finally{try{K||B.return==null||B.return()}finally{if(ie)throw E}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var G=window.performance.now(),z=G-v._lastTargetFrameTime,Y=1e3/v._targetFrameRate;(!v._loop||Y-5<=z)&&(v.deltaTime=G-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+Y,G),v._lastRealFrameTime=G,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(G,z){v[G]=z,v._isGlobal&&(window[G]=z)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var G=document.getElementById(v._loadingScreenId);if(G&&(G.parentNode.removeChild(G),v._incrementPreload()),v._curElement){for(var z in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(z,v._events[z]);var Y=!0,G=!1,K=void 0;try{for(var ie,E=v._elements[Symbol.iterator]();!(Y=(ie=E.next()).done);Y=!0){var R,B=ie.value;for(R in B.elt&&B.elt.parentNode&&B.elt.parentNode.removeChild(B.elt),B._events)B.elt.removeEventListener(R,B._events[R])}}catch(pe){G=!0,K=pe}finally{try{Y||E.return==null||E.return()}finally{if(G)throw K}}var H=v;v._registeredMethods.remove.forEach(function(pe){pe!==void 0&&pe.call(H)})}if(v._isGlobal){for(var Z in h.prototype)try{delete window[Z]}catch{window[Z]=void 0}for(var te in v)if(v.hasOwnProperty(te))try{delete window[te]}catch{window[te]=void 0}h.instance=null}},this._registeredMethods.init.forEach(function(G){G!==void 0&&G.call(this)},this),this._setupPromisePreloads();var D,k,I=this._createFriendlyGlobalFunctionBinder();if(y)y(this),h._checkForUserDefinedFunctions(this);else{for(var A in this._isGlobal=!0,h.instance=this,h.prototype)typeof h.prototype[A]=="function"?(D=A.substring(2),this._events.hasOwnProperty(D)||(Math.hasOwnProperty(A)&&Math[A]===h.prototype[A]?I(A,h.prototype[A]):I(A,h.prototype[A].bind(this)))):I(A,h.prototype[A]);for(var F in this)this.hasOwnProperty(F)&&I(F,this[F])}for(k in this._events){var N=this["_on".concat(k)];N&&(N=N.bind(this),window.addEventListener(k,N,{passive:!1}),this._events[k]=N)}function U(){v._setProperty("focused",!0)}function W(){v._setProperty("focused",!1)}window.addEventListener("focus",U),window.addEventListener("blur",W),this.registerMethod("remove",function(){window.removeEventListener("focus",U),window.removeEventListener("blur",W)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var p,m;return p=h,(m=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(y,f){h.prototype._preloadMethods.hasOwnProperty(y)||(h.prototype._preloadMethods[y]=f)}},{key:"registerMethod",value:function(y,f){var v=this||h.prototype;v._registeredMethods.hasOwnProperty(y)||(v._registeredMethods[y]=[]),v._registeredMethods[y].push(f)}},{key:"unregisterMethod",value:function(y,f){var v=this||h.prototype;if(v._registeredMethods.hasOwnProperty(y)){for(var _=v._registeredMethods[y],x=[],C=0;C<_.length;C++)_[C]===f&&x.push(C);for(var M=x.length-1;0<=M;M--)_.splice(x[M],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},f=y.globalObject||window;return y.log||console.log.bind(console),function(v,_){h.disableFriendlyErrors,f[v]=_}}}])&&b(p.prototype,m),h}();for(g in u.instance=null,u.disableFriendlyErrors=!1,a)u.prototype[g]=a[g];u.VERSION=a.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},d.default=u},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(a,l){for(var b=0;b<l.length;b++){var g=l[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}o.default.Element=function(){function a(u,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.elt=u,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var l,b,g;return l=a,g=[{key:"_adjustListener",value:function(u,h,p){return h===!1?o.default.Element._detachListener(u,p):o.default.Element._attachListener(u,h,p),this}},{key:"_attachListener",value:function(u,h,p){p._events[u]&&o.default.Element._detachListener(u,p),h=h.bind(p),p.elt.addEventListener(u,h,!1),p._events[u]=h}},{key:"_detachListener",value:function(u,h){var p=h._events[u];h.elt.removeEventListener(u,p,!1),h._events[u]=null}}],(b=[{key:"parent",value:function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)}},{key:"id",value:function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)}},{key:"mousePressed",value:function(u){return o.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),u.call(this,h)},this),this}},{key:"doubleClicked",value:function(u){return o.default.Element._adjustListener("dblclick",u,this),this}},{key:"mouseWheel",value:function(u){return o.default.Element._adjustListener("wheel",u,this),this}},{key:"mouseReleased",value:function(u){return o.default.Element._adjustListener("mouseup",u,this),this}},{key:"mouseClicked",value:function(u){return o.default.Element._adjustListener("click",u,this),this}},{key:"mouseMoved",value:function(u){return o.default.Element._adjustListener("mousemove",u,this),this}},{key:"mouseOver",value:function(u){return o.default.Element._adjustListener("mouseover",u,this),this}},{key:"mouseOut",value:function(u){return o.default.Element._adjustListener("mouseout",u,this),this}},{key:"touchStarted",value:function(u){return o.default.Element._adjustListener("touchstart",u,this),this}},{key:"touchMoved",value:function(u){return o.default.Element._adjustListener("touchmove",u,this),this}},{key:"touchEnded",value:function(u){return o.default.Element._adjustListener("touchend",u,this),this}},{key:"dragOver",value:function(u){return o.default.Element._adjustListener("dragover",u,this),this}},{key:"dragLeave",value:function(u){return o.default.Element._adjustListener("dragleave",u,this),this}},{key:"_setProperty",value:function(u,h){this[u]=h}}])&&c(l.prototype,b),g&&c(l,g),a}(),t=o.default.Element,d.default=t},{"./main":280}],282:[function(t,i,d){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function c(v){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(f=t("./main"))&&f.__esModule?f:{default:f},l=function(v){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var _=b();if(_&&_.has(v))return _.get(v);var x,C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(C,x,S):C[x]=v[x])}return C.default=v,_&&_.set(v,C),C}(t("./constants"));function b(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,b=function(){return v},v)}function g(v,_){for(var x=0;x<_.length;x++){var C=_[x];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function u(v,_){return(u=Object.setPrototypeOf||function(x,C){return x.__proto__=C,x})(v,_)}function h(v){return function(){var _,x=y(v);return p(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=y(this).constructor,Reflect.construct(x,arguments,_)):x.apply(this,arguments))}}function p(v,_){return!_||c(_)!=="object"&&typeof _!="function"?m(v):_}function m(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function y(v){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}a.default.Graphics=function(v){var _=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&u(_,v);var x=h(C);function C(M,S,F,L,D){var k;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");A=D||document.createElement("canvas"),(k=x.call(this,A,L)).canvas=A;var I,A=F||l.P2D,F=L._userNode||document.body;for(I in D||F.appendChild(k.canvas),a.default.prototype)k[I]||(typeof a.default.prototype[I]=="function"?k[I]=a.default.prototype[I].bind(m(k)):k[I]=a.default.prototype[I]);return a.default.prototype._initializeInstanceVariables.apply(m(k)),k.width=M,k.height=S,k._pixelDensity=L._pixelDensity,A===l.WEBGL?(k._renderer=new a.default.RendererGL(k.canvas,m(k),!1),M=(D=k._renderer._adjustDimensions(M,S)).adjustedWidth,S=D.adjustedHeight):k._renderer=new a.default.Renderer2D(k.canvas,m(k),!1),L._elements.push(m(k)),Object.defineProperty(m(k),"deltaTime",{get:function(){return this._pInst.deltaTime}}),k._renderer.resize(M,S),k._renderer._applyDefaults(),p(k,m(k))}return _=C,(v=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var M,S=this._pInst._elements.indexOf(this);for(M in S!==-1&&this._pInst._elements.splice(S,1),this._events)this.elt.removeEventListener(M,this._events[M])}},{key:"createFramebuffer",value:function(M){return new a.default.Framebuffer(this,M)}}])&&g(_.prototype,v),C}(a.default.Element);var f=a.default.Graphics;d.default=f},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(t,i,d){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(y=t("./main"))&&y.__esModule?y:{default:y},a=function(v){if(v&&v.__esModule)return v;if(v===null||b(v)!=="object"&&typeof v!="function")return{default:v};var _=l();if(_&&_.has(v))return _.get(v);var x,C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(C,x,S):C[x]=v[x])}return C.default=v,_&&_.set(v,C),C}(t("../core/constants"));function l(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,l=function(){return v},v)}function b(v){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}function g(v,_){for(var x=0;x<_.length;x++){var C=_[x];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function u(v,_){return(u=Object.setPrototypeOf||function(x,C){return x.__proto__=C,x})(v,_)}function h(v){return function(){var _,x,C=m(v);return _=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=m(this).constructor,Reflect.construct(C,arguments,_)):C.apply(this,arguments),C=this,!(x=_)||b(x)!=="object"&&typeof x!="function"?p(C):x}}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function m(v){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}var y=function(v){var _=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&u(_,v);var x=h(C);function C(M,S,P){var L;if(this instanceof C)return(L=x.call(this,M,S)).canvas=M,L._pixelsState=S,P?(L._isMainCanvas=!0,L._pInst._setProperty("_curElement",p(L)),L._pInst._setProperty("canvas",L.canvas),L._pInst._setProperty("width",L.width),L._pInst._setProperty("height",L.height)):(L.canvas.style.display="none",L._styles=[]),L._clipping=!1,L._clipInvert=!1,L._textSize=12,L._textLeading=15,L._textFont="sans-serif",L._textStyle=a.NORMAL,L._textAscent=null,L._textDescent=null,L._textAlign=a.LEFT,L._textBaseline=a.BASELINE,L._textWrap=a.WORD,L._rectMode=a.CORNER,L._ellipseMode=a.CENTER,L._curveTightness=0,L._imageMode=a.CORNER,L._tint=null,L._doStroke=!0,L._doFill=!0,L._strokeSet=!1,L._fillSet=!1,L._leadingSet=!1,L._pushPopDepth=0,L;throw new TypeError("Cannot call a class as a function")}return _=C,(v=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(M){this._pushPopDepth--,M.properties&&Object.assign(this,M.properties)}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=M.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(M,S){this.width=M,this.height=S,this.elt.width=M*this._pInst._pixelDensity,this.elt.height=S*this._pInst._pixelDensity,this.elt.style.width="".concat(M,"px"),this.elt.style.height="".concat(S,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(M,S,P,L){var D=this._pixelsState,k=D._pixelDensity,I=this.canvas;if(M===void 0&&S===void 0)M=S=0,P=D.width,L=D.height;else if(M*=k,S*=k,P===void 0&&L===void 0)return M<0||S<0||M>=I.width||S>=I.height?[0,0,0,0]:this._getPixel(M,S);return D=new c.default.Image(P*k,L*k),D.pixelDensity(k),D.canvas.getContext("2d").drawImage(I,M,S,P*k,L*k,0,0,P*k,L*k),D}},{key:"textLeading",value:function(M){return typeof M=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",M),this._pInst):this._textLeading}},{key:"textStyle",value:function(M){return M?(M!==a.NORMAL&&M!==a.ITALIC&&M!==a.BOLD&&M!==a.BOLDITALIC||this._setProperty("_textStyle",M),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(M,S){return M!==void 0?(this._setProperty("_textAlign",M),S!==void 0&&this._setProperty("_textBaseline",S),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(M){return this._setProperty("_textWrap",M),this._textWrap}},{key:"text",value:function(M,S,P,L,D){var k,I,A,F,N=this._pInst,U=this._textWrap,W=Number.MAX_VALUE,G=P;if((this._doFill||this._doStroke)&&M!==void 0){if(k=(M=(M=typeof M!="string"?M.toString():M).replace(/(\t)/g,"  ")).split(`
`),L!==void 0){switch(this._rectMode===a.CENTER&&(S-=L/2),this._textAlign){case a.CENTER:S+=L/2;break;case a.RIGHT:S+=L}if(D!==void 0){this._rectMode===a.CENTER&&(P-=D/2,G-=D/2);var M=P,z=N.textAscent();switch(this._textBaseline){case a.BOTTOM:F=P+D,P=Math.max(F,P),G+=z;break;case a.CENTER:F=P+D/2,P=Math.max(F,P),G+=z/2}W=P+D-z,this._textBaseline===a.CENTER&&(W=M+D-z/2)}else this._textBaseline!==a.BOTTOM&&this._textBaseline!==a.CENTER||(G=P-(M=N.textSize()*this._textLeading)/2,W=P+M/2);if(U===a.WORD){for(var Y=[],K=0;K<k.length;K++){for(var ie="",E=k[K].split(" "),R=0;R<E.length;R++)I="".concat(ie+E[R])+" ",ie=L<(A=this.textWidth(I))&&0<ie.length?(Y.push(ie),"".concat(E[R])+" "):I;Y.push(ie)}var B=0;this._textBaseline===a.CENTER?B=(Y.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(B=(Y.length-1)*N.textLeading());for(var H=0;H<k.length;H++){ie="",E=k[H].split(" ");for(var Z=0;Z<E.length;Z++)I="".concat(ie+E[Z])+" ",L<(A=this.textWidth(I))&&0<ie.length?(this._renderText(N,ie.trim(),S,P-B,W,G),ie="".concat(E[Z])+" ",P+=N.textLeading()):ie=I;this._renderText(N,ie.trim(),S,P-B,W,G),P+=N.textLeading()}}else{for(var te=[],se=0;se<k.length;se++)for(var pe=k[se].split(ie=""),oe=0;oe<pe.length;oe++)I="".concat(ie+pe[oe]),(A=this.textWidth(I))<=L?ie+=pe[oe]:L<A&&0<ie.length&&(te.push(ie),ie="".concat(pe[oe]));te.push(ie);var he=0;this._textBaseline===a.CENTER?he=(te.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(he=(te.length-1)*N.textLeading());for(var de=0;de<k.length;de++){pe=k[de].split(ie="");for(var J=0;J<pe.length;J++)I="".concat(ie+pe[J]),(A=this.textWidth(I))<=L?ie+=pe[J]:L<A&&0<ie.length&&(this._renderText(N,ie.trim(),S,P-he,W,G),P+=N.textLeading(),ie="".concat(pe[J]))}this._renderText(N,ie.trim(),S,P-he,W,G),P+=N.textLeading()}}else{var ue=0;this._textBaseline===a.CENTER?ue=(k.length-1)*N.textLeading()/2:this._textBaseline===a.BOTTOM&&(ue=(k.length-1)*N.textLeading());for(var ye=0;ye<k.length;ye++)this._renderText(N,k[ye],S,P-ue,W,G-ue),P+=N.textLeading()}return N}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return b(M)==="object"&&M.font&&M.font.supported}},{key:"_updateTextMetrics",value:function(){var M,S,P,L,D,k;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((M=document.createElement("span")).style.fontFamily=this._textFont,M.style.fontSize="".concat(this._textSize,"px"),M.innerHTML="ABCjgq|",(k=document.createElement("div")).style.display="inline-block",k.style.width="1px",k.style.height="0px",L=((S=document.createElement("div")).appendChild(M),S.appendChild(k),S.style.height="0px",S.style.overflow="hidden",document.body.appendChild(S),k.style.verticalAlign="baseline",f(k)),D=f(M),P=L[1]-D[1],L=(k.style.verticalAlign="bottom",f(k)),D=f(M),k=L[1]-D[1]-P,document.body.removeChild(S),this._setProperty("_textAscent",P),this._setProperty("_textDescent",k)),this}}])&&g(_.prototype,v),C}(c.default.Element);function f(v){var _=0,x=0;if(v.offsetParent)for(;_+=v.offsetLeft,x+=v.offsetTop,v=v.offsetParent;);else _+=v.offsetLeft,x+=v.offsetTop;return[_,x]}y.prototype.textSize=function(v){return typeof v=="number"?(this._setProperty("_textSize",v),this._leadingSet||this._setProperty("_textLeading",v*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=y,t=c.default.Renderer,d.default=t},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(v,i,d){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function c(_){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}v("core-js/modules/es.symbol"),v("core-js/modules/es.symbol.description"),v("core-js/modules/es.symbol.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.for-each"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.number.to-fixed"),v("core-js/modules/es.object.get-own-property-descriptor"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.reflect.construct"),v("core-js/modules/es.reflect.get"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.iterator"),v("core-js/modules/es.weak-map"),v("core-js/modules/web.dom-collections.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.for-each"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.number.to-fixed"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(f=v("./main"))&&f.__esModule?f:{default:f},l=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var x=b();if(x&&x.has(_))return x.get(_);var C,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in _){var P;Object.prototype.hasOwnProperty.call(_,C)&&((P=S?Object.getOwnPropertyDescriptor(_,C):null)&&(P.get||P.set)?Object.defineProperty(M,C,P):M[C]=_[C])}return M.default=_,x&&x.set(_,M),M}(v("./constants"));function b(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,b=function(){return _},_)}function g(_,x){for(var C=0;C<x.length;C++){var M=x[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function u(_,x,C){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,S,P){var L=function(D,k){for(;!Object.prototype.hasOwnProperty.call(D,k)&&(D=m(D))!==null;);return D}(L,S);if(L)return(L=Object.getOwnPropertyDescriptor(L,S)).get?L.get.call(P):L.value})(_,x,C||_)}function h(_,x){return(h=Object.setPrototypeOf||function(C,M){return C.__proto__=M,C})(_,x)}function p(_){return function(){var x,C=m(_),C=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=m(this).constructor,Reflect.construct(C,arguments,x)):C.apply(this,arguments),this);if(!x||c(x)!=="object"&&typeof x!="function"){if(C!==void 0)return C;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function m(_){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}v("./p5.Renderer");var y="rgba(0,0,0,0)",f=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&h(x,_);var C=p(M);function M(S,P,L){if(this instanceof M)return(S=C.call(this,S,P,L)).drawingContext=S.canvas.getContext("2d"),S._pInst._setProperty("drawingContext",S.drawingContext),S;throw new TypeError("Cannot call a class as a function")}return x=M,(_=[{key:"getFilterGraphicsLayer",value:function(){var S;return this.filterGraphicsLayer||(S=(this._pInst instanceof a.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new a.default.Graphics(this.width,this.height,l.WEBGL,S)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=l.BLEND,this._setFill(l._DEFAULT_FILL),this._setStroke(l._DEFAULT_STROKE),this.drawingContext.lineCap=l.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(S,P){u(m(M.prototype),"resize",this).call(this,S,P),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var S,P;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(S=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(S,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(S=this._getFill(),P=(P=this._pInst).color.apply(P,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(P.levels),P=P.toString(),this._setFill(P),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(S),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var S=(S=this._pInst).color.apply(S,arguments);this._setFill(S.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",S.levels)}},{key:"stroke",value:function(){var S=(S=this._pInst).color.apply(S,arguments);this._setStroke(S.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",S.levels)}},{key:"erase",value:function(S,P){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,S=this._pInst.color(255,S).toString(),this.drawingContext.fillStyle=S,this._cachedStrokeStyle=this.drawingContext.strokeStyle,S=this._pInst.color(255,P).toString(),this.drawingContext.strokeStyle=S,P=this._cachedBlendMode,this.blendMode(l.REMOVE),this._cachedBlendMode=P,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},S=(u(m(M.prototype),"beginClip",this).call(this,S),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),S=(this.drawingContext.fillStyle=S,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),S=(this.drawingContext.strokeStyle=S,this._cachedBlendMode);this.blendMode(l.BLEND),this._cachedBlendMode=S,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),u(m(M.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(S,P,L,D,k,I,A,F,N){S.gifProperties&&S._animateGif(this._pInst);try{a.default.MediaElement&&S instanceof a.default.MediaElement&&S._ensureCanvas();var U=(U=this._tint&&S.canvas?this._getTintedImageCanvas(S):U)||S.canvas||S.elt,W=1;S.width&&0<S.width&&(W=U.width/S.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(U,W*P,W*L,W*D,W*k,I,A,F,N),this._isErasing&&this._pInst.erase()}catch(G){if(G.name!=="NS_ERROR_NOT_AVAILABLE")throw G}}},{key:"_getTintedImageCanvas",value:function(S){if(!S.canvas)return S;S.tintCanvas||(S.tintCanvas=document.createElement("canvas")),S.tintCanvas.width!==S.canvas.width&&(S.tintCanvas.width=S.canvas.width),S.tintCanvas.height!==S.canvas.height&&(S.tintCanvas.height=S.canvas.height);var P=S.tintCanvas.getContext("2d");return P.save(),P.clearRect(0,0,S.canvas.width,S.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(P.drawImage(S.canvas,0,0),P.globalCompositeOperation="luminosity",P.drawImage(S.canvas,0,0),P.globalCompositeOperation="color",P.drawImage(S.canvas,0,0),P.globalCompositeOperation="multiply",P.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),P.fillRect(0,0,S.canvas.width,S.canvas.height),P.globalCompositeOperation="destination-in"),P.globalAlpha=this._tint[3]/255,P.drawImage(S.canvas,0,0),P.restore(),S.tintCanvas}},{key:"blendMode",value:function(S){if(S===l.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(S!==l.BLEND&&S!==l.REMOVE&&S!==l.DARKEST&&S!==l.LIGHTEST&&S!==l.DIFFERENCE&&S!==l.MULTIPLY&&S!==l.EXCLUSION&&S!==l.SCREEN&&S!==l.REPLACE&&S!==l.OVERLAY&&S!==l.HARD_LIGHT&&S!==l.SOFT_LIGHT&&S!==l.DODGE&&S!==l.BURN&&S!==l.ADD)throw new Error("Mode ".concat(S," not recognized."));this._cachedBlendMode=S,this.drawingContext.globalCompositeOperation=S}}},{key:"blend",value:function(){for(var S=this.drawingContext.globalCompositeOperation,P=arguments.length,L=new Array(P),D=0;D<P;D++)L[D]=arguments[D];var k=L[L.length-1],I=Array.prototype.slice.call(L,0,L.length-1);this.drawingContext.globalCompositeOperation=k,a.default.prototype.copy.apply(this,I),this.drawingContext.globalCompositeOperation=S}},{key:"_getPixel",value:function(S,P){return S=this.drawingContext.getImageData(S,P,1,1).data,[S[0],S[1],S[2],S[3]]}},{key:"loadPixels",value:function(){var S=this._pixelsState,P=S._pixelDensity,L=this.width*P,P=this.height*P,L=this.drawingContext.getImageData(0,0,L,P);S._setProperty("imageData",L),S._setProperty("pixels",L.data)}},{key:"set",value:function(S,P,L){S=Math.floor(S),P=Math.floor(P);var D=this._pixelsState;if(L instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(D._pixelDensity,D._pixelDensity),this.drawingContext.clearRect(S,P,L.width,L.height),this.drawingContext.drawImage(L.canvas,S,P),this.drawingContext.restore();else{var k=0,I=0,A=0,F=0,N=4*(P*D._pixelDensity*(this.width*D._pixelDensity)+S*D._pixelDensity);if(D.imageData||D.loadPixels(),typeof L=="number")N<D.pixels.length&&(A=I=k=L,F=255);else if(Array.isArray(L)){if(L.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");N<D.pixels.length&&(k=L[0],I=L[1],A=L[2],F=L[3])}else L instanceof a.default.Color&&N<D.pixels.length&&(k=L.levels[0],I=L.levels[1],A=L.levels[2],F=L.levels[3]);for(var U=0;U<D._pixelDensity;U++)for(var W=0;W<D._pixelDensity;W++)N=4*((P*D._pixelDensity+W)*this.width*D._pixelDensity+(S*D._pixelDensity+U)),D.pixels[N]=k,D.pixels[N+1]=I,D.pixels[N+2]=A,D.pixels[N+3]=F}}},{key:"updatePixels",value:function(S,P,L,D){var k=this._pixelsState,I=k._pixelDensity;S===void 0&&P===void 0&&L===void 0&&D===void 0&&(P=S=0,L=this.width,D=this.height),S*=I,P*=I,L*=I,D*=I,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=k.imageData),this.drawingContext.putImageData(k.imageData,S,P,0,0,L,D)}},{key:"_acuteArcToBezier",value:function(S,P){var I=P/2,L=Math.cos(I),F=Math.sin(I),D=1/Math.tan(I),I=S+I,k=Math.cos(I),I=Math.sin(I),A=(4-L)/3,F=F+(L-A)*D;return{ax:Math.cos(S).toFixed(7),ay:Math.sin(S).toFixed(7),bx:(A*k+F*I).toFixed(7),by:(A*I-F*k).toFixed(7),cx:(A*k-F*I).toFixed(7),cy:(A*I+F*k).toFixed(7),dx:Math.cos(S+P).toFixed(7),dy:Math.sin(S+P).toFixed(7)}}},{key:"arc",value:function(S,P,L,D,k,I,A){var F,N=this.drawingContext,U=L/2,W=D/2,G=[];for(S+=U,P+=W;1e-5<=I-k;)F=Math.min(I-k,l.HALF_PI),G.push(this._acuteArcToBezier(k,F)),k+=F;return this._doFill&&(this._clipping||N.beginPath(),G.forEach(function(z,Y){Y===0&&N.moveTo(S+z.ax*U,P+z.ay*W),N.bezierCurveTo(S+z.bx*U,P+z.by*W,S+z.cx*U,P+z.cy*W,S+z.dx*U,P+z.dy*W)}),A!==l.PIE&&A!=null||N.lineTo(S,P),N.closePath(),this._clipping||N.fill()),this._doStroke&&(this._clipping||N.beginPath(),G.forEach(function(z,Y){Y===0&&N.moveTo(S+z.ax*U,P+z.ay*W),N.bezierCurveTo(S+z.bx*U,P+z.by*W,S+z.cx*U,P+z.cy*W,S+z.dx*U,P+z.dy*W)}),A===l.PIE?(N.lineTo(S,P),N.closePath()):A===l.CHORD&&N.closePath(),this._clipping||N.stroke()),this}},{key:"ellipse",value:function(F){var P=this.drawingContext,L=this._doFill,D=this._doStroke,k=parseFloat(F[0]),I=parseFloat(F[1]),A=parseFloat(F[2]),F=parseFloat(F[3]);if(L&&!D){if(this._getFill()===y)return this}else if(!L&&D&&this._getStroke()===y)return this;k+=A/2,I+=F/2,A/=2,F/=2,this._clipping||P.beginPath(),P.ellipse(k,I,A,F,0,0,2*Math.PI),!this._clipping&&L&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"line",value:function(S,P,L,D){var k=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||k.beginPath(),k.moveTo(S,P),k.lineTo(L,D),k.stroke()),this}},{key:"point",value:function(S,P){var L,D,k=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(L=this._getStroke(),D=this._getFill(),this._clipping||this._setFill(L),this._clipping||k.beginPath(),k.arc(S,P,k.lineWidth/2,0,l.TWO_PI,!1),void(this._clipping||(k.fill(),this._setFill(D))))}},{key:"quad",value:function(S,P,L,D,k,I,A,F){var N=this.drawingContext,U=this._doFill,W=this._doStroke;if(U&&!W){if(this._getFill()===y)return this}else if(!U&&W&&this._getStroke()===y)return this;return this._clipping||N.beginPath(),N.moveTo(S,P),N.lineTo(L,D),N.lineTo(k,I),N.lineTo(A,F),N.closePath(),!this._clipping&&U&&N.fill(),!this._clipping&&W&&N.stroke(),this}},{key:"rect",value:function(W){var P,L,D=W[0],k=W[1],I=W[2],A=W[3],F=W[4],N=W[5],U=W[6],W=W[7],G=this.drawingContext,z=this._doFill,Y=this._doStroke;if(z&&!Y){if(this._getFill()===y)return this}else if(!z&&Y&&this._getStroke()===y)return this;return this._clipping||G.beginPath(),F===void 0?G.rect(D,k,I,A):(N===void 0&&(N=F),U===void 0&&(U=N),W===void 0&&(W=U),Y=(z=Math.abs(I))/2,L=(P=Math.abs(A))/2,P<2*(F=z<2*F?Y:F)&&(F=L),P<2*(N=z<2*N?Y:N)&&(N=L),P<2*(U=z<2*U?Y:U)&&(U=L),P<2*(W=z<2*W?Y:W)&&(W=L),this._clipping||G.beginPath(),G.moveTo(D+F,k),G.arcTo(D+I,k,D+I,k+A,N),G.arcTo(D+I,k+A,D,k+A,U),G.arcTo(D,k+A,D,k,W),G.arcTo(D,k,D+I,k,F),G.closePath()),!this._clipping&&this._doFill&&G.fill(),!this._clipping&&this._doStroke&&G.stroke(),this}},{key:"triangle",value:function(U){var P=this.drawingContext,L=this._doFill,D=this._doStroke,k=U[0],I=U[1],A=U[2],F=U[3],N=U[4],U=U[5];if(L&&!D){if(this._getFill()===y)return this}else if(!L&&D&&this._getStroke()===y)return this;this._clipping||P.beginPath(),P.moveTo(k,I),P.lineTo(A,F),P.lineTo(N,U),P.closePath(),!this._clipping&&L&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"endShape",value:function(S,P,L,D,k,I,A){if(P.length!==0&&(this._doStroke||this._doFill)){var F,N,U,W=S===l.CLOSE,G=(W&&!I&&P.push(P[0]),P.length);if(L&&A===null){if(3<G){var z=[],Y=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[1][0],P[1][1]),N=1;N+2<G;N++)F=P[N],z[0]=[F[0],F[1]],z[1]=[F[0]+(Y*P[N+1][0]-Y*P[N-1][0])/6,F[1]+(Y*P[N+1][1]-Y*P[N-1][1])/6],z[2]=[P[N+1][0]+(Y*P[N][0]-Y*P[N+2][0])/6,P[N+1][1]+(Y*P[N][1]-Y*P[N+2][1])/6],z[3]=[P[N+1][0],P[N+1][1]],this.drawingContext.bezierCurveTo(z[1][0],z[1][1],z[2][0],z[2][1],z[3][0],z[3][1]);W&&this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this._doFillStrokeClose(W)}}else if(D&&A===null){for(this._clipping||this.drawingContext.beginPath(),N=0;N<G;N++)P[N].isVert?P[N].moveTo?this.drawingContext.moveTo(P[N][0],P[N][1]):this.drawingContext.lineTo(P[N][0],P[N][1]):this.drawingContext.bezierCurveTo(P[N][0],P[N][1],P[N][2],P[N][3],P[N][4],P[N][5]);this._doFillStrokeClose(W)}else if(k&&A===null){for(this._clipping||this.drawingContext.beginPath(),N=0;N<G;N++)P[N].isVert?P[N].moveTo?this.drawingContext.moveTo(P[N][0],P[N][1]):this.drawingContext.lineTo(P[N][0],P[N][1]):this.drawingContext.quadraticCurveTo(P[N][0],P[N][1],P[N][2],P[N][3]);this._doFillStrokeClose(W)}else if(A===l.POINTS)for(N=0;N<G;N++)F=P[N],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(A===l.LINES)for(N=0;N+1<G;N+=2)F=P[N],this._doStroke&&this._pInst.stroke(P[N+1][6]),this._pInst.line(F[0],F[1],P[N+1][0],P[N+1][1]);else if(A===l.TRIANGLES)for(N=0;N+2<G;N+=3)F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(P[N+2][0],P[N+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(P[N+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[N+2][6]),this.drawingContext.stroke());else if(A===l.TRIANGLE_STRIP)for(N=0;N+1<G;N++)F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+1][5]),N+2<G&&(this.drawingContext.lineTo(P[N+2][0],P[N+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+2][5])),this._doFillStrokeClose(W);else if(A===l.TRIANGLE_FAN){if(2<G){for(this._clipping||this.drawingContext.beginPath(),N=2;N<G;N++)F=P[N],this.drawingContext.moveTo(P[0][0],P[0][1]),this.drawingContext.lineTo(P[N-1][0],P[N-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[0][0],P[0][1]),N<G-1&&(this._doFill&&F[5]!==P[N+1][5]||this._doStroke&&F[6]!==P[N+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(P[N+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(P[N+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(W)}}else if(A===l.QUADS)for(N=0;N+3<G;N+=4){for(F=P[N],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),U=1;U<4;U++)this.drawingContext.lineTo(P[N+U][0],P[N+U][1]);this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+3][6]),this._doFillStrokeClose(W)}else if(A===l.QUAD_STRIP){if(3<G)for(N=0;N+1<G;N+=2)F=P[N],this._clipping||this.drawingContext.beginPath(),N+3<G?(this.drawingContext.moveTo(P[N+2][0],P[N+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1]),this.drawingContext.lineTo(P[N+3][0],P[N+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(P[N+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[N+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[N+1][0],P[N+1][1])),this._doFillStrokeClose(W)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0][0],P[0][1]),N=1;N<G;N++)(F=P[N]).isVert&&(F.moveTo?(W&&this.drawingContext.closePath(),this.drawingContext.moveTo(F[0],F[1])):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(W)}I=k=D=L=!1,W&&P.pop()}return this}},{key:"strokeCap",value:function(S){return S!==l.ROUND&&S!==l.SQUARE&&S!==l.PROJECT||(this.drawingContext.lineCap=S),this}},{key:"strokeJoin",value:function(S){return S!==l.ROUND&&S!==l.BEVEL&&S!==l.MITER||(this.drawingContext.lineJoin=S),this}},{key:"strokeWeight",value:function(S){return this.drawingContext.lineWidth=S===void 0||S===0?1e-4:S,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(S){S!==this._cachedFillStyle&&(this.drawingContext.fillStyle=S,this._cachedFillStyle=S)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(S){S!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=S,this._cachedStrokeStyle=S)}},{key:"bezier",value:function(S,P,L,D,k,I,A,F){return this._pInst.beginShape(),this._pInst.vertex(S,P),this._pInst.bezierVertex(L,D,k,I,A,F),this._pInst.endShape(),this}},{key:"curve",value:function(S,P,L,D,k,I,A,F){return this._pInst.beginShape(),this._pInst.curveVertex(S,P),this._pInst.curveVertex(L,D),this._pInst.curveVertex(k,I),this._pInst.curveVertex(A,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(S){S&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(S,P,L,D,k,I){this.drawingContext.transform(S,P,L,D,k,I)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(S){this.drawingContext.rotate(S)}},{key:"scale",value:function(S,P){return this.drawingContext.scale(S,P),this}},{key:"translate",value:function(S,P){return S instanceof a.default.Vector&&(P=S.y,S=S.x),this.drawingContext.translate(S,P),this}},{key:"_renderText",value:function(S,P,L,D,k,I){if(!(D<I||k<=D))return S.push(),this._isOpenType()?this._textFont._renderPath(P,L,D,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(P,L,D),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(l._DEFAULT_TEXT_FILL),this.drawingContext.fillText(P,L,D))),S.pop(),S}},{key:"textWidth",value:function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):this.drawingContext.measureText(S).width}},{key:"_applyTextProperties",value:function(){var S=this._pInst,P=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),P=this._textFont,this._isOpenType()&&(P=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),P||"sans-serif");return/\s/.exec(P)&&(P='"'.concat(P,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(P),this.drawingContext.textAlign=this._textAlign,this._textBaseline===l.CENTER?this.drawingContext.textBaseline=l._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,S}},{key:"push",value:function(){return this.drawingContext.save(),u(m(M.prototype),"push",this).call(this)}},{key:"pop",value:function(S){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,u(m(M.prototype),"pop",this).call(this,S)}}])&&g(x.prototype,_),M}(a.default.Renderer),v=(f.prototype.text=function(_,x,C,L,S){L!==void 0&&this.drawingContext.textBaseline===l.BASELINE&&(P=!0,this.drawingContext.textBaseline=l.TOP);var P,L=a.default.Renderer.prototype.text.apply(this,arguments);return P&&(this.drawingContext.textBaseline=l.BASELINE),L},a.default.Renderer2D=f,a.default.Renderer2D);d.default=v},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(t=t("./main"))&&t.__esModule?t:{default:t};o.default.prototype._promisePreloads=[];function c(){return{}}var a=!(o.default.prototype.registerPromisePreload=function(l){o.default.prototype._promisePreloads.push(l)});o.default.prototype._setupPromisePreloads=function(){var l=!0,b=!1,g=void 0;try{for(var u,h=this._promisePreloads[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var p=u.value,m=this,y=p.method,f=p.addCallbacks,v=p.legacyPreloadSetup,_=p.target||this,x=_[y].bind(_);if(_===o.default.prototype){if(a)continue;m=null,x=_[y]}_[y]=this._wrapPromisePreload(m,x,f),v&&(_[v.method]=this._legacyPreloadGenerator(m,v,_[y]))}}catch(C){b=!0,g=C}finally{try{l||h.return==null||h.return()}finally{if(b)throw g}}a=!0},o.default.prototype._wrapPromisePreload=function(l,b,g){var u=function(){for(var h=this,p=(this._incrementPreload(),null),m=null,y=arguments.length,f=new Array(y),v=0;v<y;v++)f[v]=arguments[v];if(g)for(var _=f.length-1;0<=_&&!m&&typeof f[_]=="function";_--)m=p,p=f.pop();var x=Promise.resolve(b.apply(this,f));return p&&x.then(p),m&&x.catch(m),x.then(function(){return h._decrementPreload()}),x};return u=l?u.bind(l):u},o.default.prototype._legacyPreloadGenerator=function(l,h,g){var u=h.createBaseObject||c,h=function(){var p=this;this._incrementPreload();for(var m=arguments.length,y=new Array(m),f=0;f<m;f++)y[f]=arguments[f];var v=u.apply(this,y);return g.apply(this,y).then(function(_){Object.assign(v,_),p._decrementPreload()}),v};return h=l?h.bind(l):h}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(u=t("./main"))&&u.__esModule?u:{default:u},a=function(h){if(h&&h.__esModule)return h;if(h===null||b(h)!=="object"&&typeof h!="function")return{default:h};var p=l();if(p&&p.has(h))return p.get(h);var m,y={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var v;Object.prototype.hasOwnProperty.call(h,m)&&((v=f?Object.getOwnPropertyDescriptor(h,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=h[m])}return y.default=h,p&&p.set(h,y),y}(t("./constants"));function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}function b(h){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var g="defaultCanvas0",u=(c.default.prototype.createCanvas=function(h,p,m,y){var f,v,_;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(m=a.P2D,y=arguments[2]):f=m||a.P2D,y)(_=document.getElementById(g))&&_.parentNode.removeChild(_),_=y,this._defaultGraphicsCreated=!1;else{if(f===a.WEBGL)(_=document.getElementById(g))&&(_.parentNode.removeChild(_),v=this._renderer,this._elements=this._elements.filter(function(C){return C!==v})),(_=document.createElement("canvas")).id=g,_.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)_=this.canvas;else{_=y||document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;g="defaultCanvas".concat(x),_.id=g,_.classList.add("p5Canvas")}this._setupDone||(_.dataset.hidden=!0,_.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(m=document.createElement("main"),document.body.appendChild(m)),document.getElementsByTagName("main")[0])).appendChild(_)}return f===a.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(_,this,!0)),this._elements.push(this._renderer),h=(y=this._renderer._adjustDimensions(h,p)).adjustedWidth,p=y.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(_,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(h,p),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(h,p,m){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,f,v,_={};for(y in this.drawingContext){var x=this.drawingContext[y];b(x)!=="object"&&typeof x!="function"&&(_[y]=x)}for(v in this._renderer instanceof c.default.RendererGL&&(h=(f=this._renderer._adjustDimensions(h,p)).adjustedWidth,p=f.adjustedHeight),this.width=h,this.height=p,this._renderer.resize(h,p),_)try{this.drawingContext[v]=_[v]}catch{}m||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(h,p){for(var m=arguments.length,y=new Array(2<m?m-2:0),f=2;f<m;f++)y[f-2]=arguments[f];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=a.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(h,p,y[0],this,y[1])},c.default.prototype.createFramebuffer=function(h){return new c.default.Framebuffer(this,h)},c.default.prototype.clearDepth=function(h){this._assert3d("clearDepth"),this._renderer.clearDepth(h)},c.default.prototype.blendMode=function(h){c.default._validateParameters("blendMode",arguments),h===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),h=a.BLEND),this._renderer.blendMode(h)},c.default);d.default=u},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=u(t("../main")),l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var m=g();if(m&&m.has(p))return m.get(p);var y,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var _;Object.prototype.hasOwnProperty.call(p,y)&&((_=v?Object.getOwnPropertyDescriptor(p,y):null)&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=p[y])}return f.default=p,m&&m.set(p,f),f}(t("../constants")),b=u(t("../helpers"));function g(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,g=function(){return p},p)}function u(p){return p&&p.__esModule?p:{default:p}}function h(p){return function(m){if(Array.isArray(m)){for(var y=0,f=new Array(m.length);y<m.length;y++)f[y]=m[y];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(p,m,y,f,v){var _;return p-=l.TWO_PI*Math.floor(p/l.TWO_PI),m-=l.TWO_PI*Math.floor(m/l.TWO_PI),_=Math.min(Math.abs(p-m),l.TWO_PI-Math.abs(p-m)),v&&(p=p<=l.HALF_PI?Math.atan(y/f*Math.tan(p)):p>l.HALF_PI&&p<=3*l.HALF_PI?Math.atan(y/f*Math.tan(p))+l.PI:Math.atan(y/f*Math.tan(p))+l.TWO_PI,m=m<=l.HALF_PI?Math.atan(y/f*Math.tan(m)):m>l.HALF_PI&&m<=3*l.HALF_PI?Math.atan(y/f*Math.tan(m))+l.PI:Math.atan(y/f*Math.tan(m))+l.TWO_PI),m<p&&(m+=l.TWO_PI),{start:p,stop:m,correspondToSamePoint:_<1e-5}},a.default.prototype.arc=function(p,m,y,f,v,_,x,C){return a.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&v!==_&&(v=this._toRadians(v),_=this._toRadians(_),y=Math.abs(y),f=Math.abs(f),p=b.default.modeAdjust(p,m,y,f,this._renderer._ellipseMode),(m=this._normalizeArcAngles(v,_,p.w,p.h,!0)).correspondToSamePoint?this._renderer.ellipse([p.x,p.y,p.w,p.h,C]):(this._renderer.arc(p.x,p.y,p.w,p.h,m.start,m.stop,x,C),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[p.x,p.y,p.w,p.h,m.start,m.stop,x]))),this},a.default.prototype.ellipse=function(p,m,y,f,v){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];a.default._validateParameters("circle",m);var f=m.slice(0,2);return f.push(m[2],m[2]),this._renderEllipse.apply(this,h(f))},a.default.prototype._renderEllipse=function(p,m,y,f,v){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),f===void 0?f=y:f<0&&(f=Math.abs(f)),p=b.default.modeAdjust(p,m,y,f,this._renderer._ellipseMode),this._renderer.ellipse([p.x,p.y,p.w,p.h,v]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[p.x,p.y,p.w,p.h])),this},a.default.prototype.line=function(){for(var p,m=arguments.length,y=new Array(m),f=0;f<m;f++)y[f]=arguments[f];return a.default._validateParameters("line",y),this._renderer._doStroke&&(p=this._renderer).line.apply(p,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},a.default.prototype.point=function(){for(var p,m=arguments.length,y=new Array(m),f=0;f<m;f++)y[f]=arguments[f];return a.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((p=this._renderer).point.apply(p,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},a.default.prototype.quad=function(){for(var p,m=arguments.length,y=new Array(m),f=0;f<m;f++)y[f]=arguments[f];return a.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((p=this._renderer).quad.apply(p,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},a.default.prototype.rect=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return a.default._validateParameters("rect",m),this._renderRect.apply(this,m)},a.default.prototype.square=function(p,m,y,f,v,_,x){return a.default._validateParameters("square",arguments),this._renderRect.call(this,p,m,y,y,f,v,_,x)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var p=b.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),m=[p.x,p.y,p.w,p.h],y=4;y<arguments.length;y++)m[y]=arguments[y];this._renderer.rect(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[p.x,p.y,p.w,p.h])}return this},a.default.prototype.triangle=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return a.default._validateParameters("triangle",m),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",m),this},t=a.default,d.default=t},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../main"))&&g.__esModule?g:{default:g},l=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.prototype.ellipseMode=function(u){return a.default._validateParameters("ellipseMode",arguments),u!==l.CORNER&&u!==l.CORNERS&&u!==l.RADIUS&&u!==l.CENTER||(this._renderer._ellipseMode=u),this},a.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(u){return a.default._validateParameters("rectMode",arguments),u!==l.CORNER&&u!==l.CORNERS&&u!==l.RADIUS&&u!==l.CENTER||(this._renderer._rectMode=u),this},a.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(u){return a.default._validateParameters("strokeCap",arguments),u!==l.ROUND&&u!==l.SQUARE&&u!==l.PROJECT||this._renderer.strokeCap(u),this},a.default.prototype.strokeJoin=function(u){return a.default._validateParameters("strokeJoin",arguments),u!==l.ROUND&&u!==l.BEVEL&&u!==l.MITER||this._renderer.strokeJoin(u),this},a.default.prototype.strokeWeight=function(u){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var g=a.default;d.default=g},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(c=t("../main"))&&c.__esModule?c:{default:c};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var a,l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("bezier",b),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,b),this},o.default.prototype.bezierDetail=function(a){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},o.default.prototype.bezierPoint=function(a,l,b,g,u){o.default._validateParameters("bezierPoint",arguments);var h=1-u;return Math.pow(h,3)*a+3*Math.pow(h,2)*u*l+3*h*Math.pow(u,2)*b+Math.pow(u,3)*g},o.default.prototype.bezierTangent=function(a,l,b,g,u){o.default._validateParameters("bezierTangent",arguments);var h=1-u;return 3*g*Math.pow(u,2)-3*b*Math.pow(u,2)+6*b*h*u-6*l*h*u+3*l*Math.pow(h,2)-3*a*Math.pow(h,2)},o.default.prototype.curve=function(){for(var a,l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("curve",b),this._renderer._doStroke&&(a=this._renderer).curve.apply(a,b),this},o.default.prototype.curveDetail=function(a){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},o.default.prototype.curveTightness=function(a){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},o.default.prototype.curvePoint=function(a,l,b,g,u){o.default._validateParameters("curvePoint",arguments);var h=this._renderer._curveTightness,p=u*u*u,m=u*u;return a*((h-1)/2*p+(1-h)*m+(h-1)/2*u)+l*((h+3)/2*p+(-5-h)/2*m+1)+b*((-3-h)/2*p+(h+2)*m+(1-h)/2*u)+g*((1-h)/2*p+(h-1)/2*m)},o.default.prototype.curveTangent=function(a,l,b,g,m){o.default._validateParameters("curveTangent",arguments);var h=this._renderer._curveTightness,p=m*m*3,m=2*m;return a*((h-1)/2*p+(1-h)*m+(h-1)/2)+l*((h+3)/2*p+(-5-h)/2*m)+b*((-3-h)/2*p+(h+2)*m+(1-h)/2)+g*((1-h)/2*p+(h-1)/2*m)};var c=o.default;d.default=c},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(t,i,d){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(C){return o(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":o(C)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(_=t("../main"))&&_.__esModule?_:{default:_},l=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var C=b();if(C&&C.has(x))return C.get(x);var M,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in x){var L;Object.prototype.hasOwnProperty.call(x,M)&&((L=P?Object.getOwnPropertyDescriptor(x,M):null)&&(L.get||L.set)?Object.defineProperty(S,M,L):S[M]=x[M])}return S.default=x,C&&C.set(x,S),S}(t("../constants"));function b(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,b=function(){return x},x)}var g=null,u=[],h=[],p=!1,m=!1,y=!1,f=!1,v=!0,_=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(h=[],f=!0),this},a.default.prototype.beginShape=function(x){var C;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(C=this._renderer).beginShape.apply(C,arguments):(g=x===l.POINTS||x===l.LINES||x===l.TRIANGLES||x===l.TRIANGLE_FAN||x===l.TRIANGLE_STRIP||x===l.QUADS||x===l.QUAD_STRIP?x:null,u=[],h=[]),this},a.default.prototype.bezierVertex=function(){for(var x,C=arguments.length,M=new Array(C),S=0;S<C;S++)M[S]=arguments[S];if(a.default._validateParameters("bezierVertex",M),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,M);else if(u.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{p=!0;for(var P=[],L=0;L<M.length;L++)P[L]=M[L];P.isVert=!1,(f?h:u).push(P)}return this},a.default.prototype.curveVertex=function(){for(var x,C=arguments.length,M=new Array(C),S=0;S<C;S++)M[S]=arguments[S];return a.default._validateParameters("curveVertex",M),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,M):(m=!0,this.vertex(M[0],M[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var x=h[0].slice();x.isVert=h[0].isVert,x.moveTo=!1,h.push(x),v&&(u.push(u[0]),v=!1);for(var C=0;C<h.length;C++)u.push(h[C])}return this},a.default.prototype.endShape=function(x){var C=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),C<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),C=1),this._renderer.isP3D)this._renderer.endShape(x,m,p,y,f,g,C);else{if(C!==1&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;C=x===l.CLOSE,C&&!f&&u.push(u[0]),this._renderer.endShape(x,u,m,p,y,f,g),v=!(f=y=p=m=!1),C&&u.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var x,C=arguments.length,M=new Array(C),S=0;S<C;S++)M[S]=arguments[S];if(a.default._validateParameters("quadraticVertex",M),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,M);else{if(this._contourInited)return(x={}).x=M[0],x.y=M[1],x.x3=M[2],x.y3=M[3],x.type=l.QUADRATIC,this._contourVertices.push(x),this;if(0<u.length){y=!0;for(var P=[],L=0;L<M.length;L++)P[L]=M[L];P.isVert=!1,(f?h:u).push(P)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(x,C,M,S,P){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=x,L[1]=C,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),M&&(L.moveTo=M),(f?(h.length===0&&(L.moveTo=!0),h):u).push(L)),this},a.default.prototype.normal=function(x,C,M){var S;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(S=this._renderer).normal.apply(S,arguments),this},a.default);d.default=_},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(t,i,d){},{}],292:[function(t,i,d){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var c=parseInt(o),a=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof a.draw=="function"){a.setup===void 0&&a.scale(a._pixelDensity,a._pixelDensity);for(var l=0;l<c;l++){a.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),a._renderer.isP3D&&a._renderer._update(),a._setProperty("frameCount",a.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{a.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,d.default=t},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(a){return function(l){if(Array.isArray(l)){for(var b=0,g=new Array(l.length);b<l.length;b++)g[b]=l[b];return g}}(a)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var a=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||a?(a=this._renderer).applyMatrix.apply(a,c(arguments.length<=0?void 0:arguments[0])):(a=this._renderer).applyMatrix.apply(a,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(a,l){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(a),l),this},o.default.prototype.rotateX=function(a){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(a)),this},o.default.prototype.rotateY=function(a){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(a)),this},o.default.prototype.rotateZ=function(a){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(a)),this},o.default.prototype.scale=function(a,l,b){var g;return o.default._validateParameters("scale",arguments),a instanceof o.default.Vector?(a=(g=a).x,l=g.y,b=g.z):Array.isArray(a)&&(a=(g=a)[0],l=g[1],b=g[2]||1),isNaN(l)?l=b=a:isNaN(b)&&(b=1),this._renderer.scale(a,l,b),this},o.default.prototype.shearX=function(a){return o.default._validateParameters("shearX",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,0,Math.tan(a),1,0,0),this},o.default.prototype.shearY=function(a){return o.default._validateParameters("shearY",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,Math.tan(a),0,1,0,0),this},o.default.prototype.translate=function(a,l,b){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(a,l,b):this._renderer.translate(a,l),this},t=o.default,d.default=t},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(t,i,d){function o(b){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(b){return function(g){if(Array.isArray(g)){for(var u=0,h=new Array(g.length);u<g.length;u++)h[u]=g[u];return h}}(b)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(b){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(b)}c.default.prototype.storeItem=function(b,g){typeof b!="string"&&console.log("The argument that you passed to storeItem() - ".concat(b," is not a string.")),b.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(b," must not end with 'p5TypeID'.")),g===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=l(g);switch(u){case"number":case"boolean":g=g.toString();break;case"object":g instanceof c.default.Color?u="p5.Color":g instanceof c.default.Vector&&(u="p5.Vector",g=[g.x,g.y,g.z]),g=JSON.stringify(g)}localStorage.setItem(b,g),b="".concat(b,"p5TypeID"),localStorage.setItem(b,u)},c.default.prototype.getItem=function(b){var g=localStorage.getItem(b),u=localStorage.getItem("".concat(b,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(b,"in local storage. Did you save the item with something other than setItem()?"));else if(g!==null)switch(u){case"number":g=parseFloat(g);break;case"boolean":g=g==="true";break;case"object":g=JSON.parse(g);break;case"p5.Color":g=JSON.parse(g),g=this.color.apply(this,a(g.levels));break;case"p5.Vector":g=JSON.parse(g),g=this.createVector.apply(this,a(g))}return g},c.default.prototype.clearStorage=function(){var b=this;Object.keys(localStorage).forEach(function(g){g.endsWith("p5TypeID")&&b.removeItem(g.replace("p5TypeID",""))})},c.default.prototype.removeItem=function(b){typeof b!="string"&&console.log("The argument that you passed to removeItem() - ".concat(b," is not a string.")),localStorage.removeItem(b),localStorage.removeItem("".concat(b,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(t,i,d){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(y)}function c(y){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),f&&b(y,f)}function b(y,f){return(b=Object.setPrototypeOf||function(v,_){return v.__proto__=_,v})(y,f)}function g(y){return function(){var f,v=u(y),v=(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(f=u(this).constructor,Reflect.construct(v,arguments,f)):v.apply(this,arguments),this);if(!f||c(f)!=="object"&&typeof f!="function"){if(v!==void 0)return v;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return f}}function u(y){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(y)}function h(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function p(y,f){for(var v=0;v<f.length;v++){var _=f[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function m(y,f,v){f&&p(y.prototype,f)}a.default.prototype.createStringDict=function(y,f){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(y,f)},a.default.prototype.createNumberDict=function(y,f){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(y,f)},a.default.TypedDict=function(){function y(f,v){return h(this,y),f instanceof Object?this.data=f:(this.data={},this.data[f]=v),this}return m(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(f){return this.data.hasOwnProperty(f)}},{key:"get",value:function(f){if(this.data.hasOwnProperty(f))return this.data[f];console.log("".concat(f," does not exist in this Dictionary"))}},{key:"set",value:function(f,v){this._validate(v)?this.data[f]=v:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(f){for(var v in f)this.set(v,f[v])}},{key:"create",value:function(f,v){f instanceof Object&&v===void 0?this._addObj(f):f!==void 0?this.set(f,v):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(f){if(!this.data.hasOwnProperty(f))throw new Error("".concat(f," does not exist in this Dictionary"));delete this.data[f]}},{key:"print",value:function(){for(var f in this.data)console.log("key:".concat(f," value:").concat(this.data[f]))}},{key:"saveTable",value:function(f){var v,_="";for(v in this.data)_+="".concat(v,",").concat(this.data[v],`
`);var x=new Blob([_],{type:"text/csv"});a.default.prototype.downloadFile(x,f||"mycsv","csv")}},{key:"saveJSON",value:function(f,v){a.default.prototype.saveJSON(this.data,f,v)}},{key:"_validate",value:function(f){return!0}}]),y}(),a.default.StringDict=function(){l(f,a.default.TypedDict);var y=g(f);function f(){h(this,f);for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];return y.call.apply(y,[this].concat(_))}return m(f,[{key:"_validate",value:function(v){return typeof v=="string"}}]),f}(),a.default.NumberDict=function(){l(f,a.default.TypedDict);var y=g(f);function f(){h(this,f);for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];return y.call.apply(y,[this].concat(_))}return m(f,[{key:"_validate",value:function(v){return typeof v=="number"}},{key:"add",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]+=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"sub",value:function(v,_){this.add(v,-_)}},{key:"mult",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]*=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"div",value:function(v,_){this.data.hasOwnProperty(v)?this.data[v]/=_:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"_valueTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var _,x=this.data[Object.keys(this.data)[0]];for(_ in this.data)this.data[_]*v<x*v&&(x=this.data[_]);return x}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var _=Object.keys(this.data)[0],x=1;x<Object.keys(this.data).length;x++)Object.keys(this.data)[x]*v<_*v&&(_=Object.keys(this.data)[x]);return _}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),f}(),t=a.default.TypedDict,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(t,i,d){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(_,x){for(var C=0;C<x.length;C++){var M=x[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function l(_,x,C){x&&a(_.prototype,x),C&&a(_,C)}function b(_,x){return(b=Object.setPrototypeOf||function(C,M){return C.__proto__=M,C})(_,x)}function g(_){return function(){var x,C,M=h(_);return x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=h(this).constructor,Reflect.construct(M,arguments,x)):M.apply(this,arguments),M=this,!(C=x)||m(C)!=="object"&&typeof C!="function"?u(M):C}}function u(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function h(_){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}function p(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function m(_){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}function y(_,x,C){return(x._userNode||document.body).appendChild(_),C=new(C?c.default.MediaElement:c.default.Element)(_,x),x._elements.push(C),C}function f(_,L,C,M){var S=document.createElement(L),P=(typeof(C=C||"")=="string"&&(C=[C]),!0),L=!1,D=void 0;try{for(var k,I=C[Symbol.iterator]();!(P=(k=I.next()).done);P=!0){var A=k.value,F=document.createElement("source");F.setAttribute("src",A),S.appendChild(F)}}catch(U){L=!0,D=U}finally{try{P||I.return==null||I.return()}finally{if(L)throw D}}typeof M=="function"&&S.addEventListener("canplaythrough",function U(){M(),S.removeEventListener("canplaythrough",U)});var N=y(S,_,!0);return N.loadedmetadata=!1,S.addEventListener("loadedmetadata",function(){N.width=S.videoWidth,N.height=S.videoHeight,N.elt.width===0&&(N.elt.width=S.videoWidth),N.elt.height===0&&(N.elt.height=S.videoHeight),N.presetPlaybackRate&&(N.elt.playbackRate=N.presetPlaybackRate,delete N.presetPlaybackRate),N.loadedmetadata=!0}),N}c.default.prototype.select=function(_,x){return c.default._validateParameters("select",arguments),x=this._getContainer(x).querySelector(_),x?this._wrapElement(x):null},c.default.prototype.selectAll=function(_,x){c.default._validateParameters("selectAll",arguments);var C=[],M=this._getContainer(x).querySelectorAll(_);if(M)for(var S=0;S<M.length;S++){var P=this._wrapElement(M[S]);C.push(P)}return C},c.default.prototype._getContainer=function(_){var x=document;return typeof _=="string"?x=document.querySelector(_)||document:_ instanceof c.default.Element?x=_.elt:_ instanceof HTMLElement&&(x=_),x},c.default.prototype._wrapElement=function(_){var x,C=Array.prototype.slice.call(_.children);return _.tagName==="INPUT"&&_.type==="checkbox"?((x=new c.default.Element(_,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},x):_.tagName==="VIDEO"||_.tagName==="AUDIO"?new c.default.MediaElement(_,this):_.tagName==="SELECT"?this.createSelect(new c.default.Element(_,this)):0<C.length&&C.every(function(M){return M.tagName==="INPUT"||M.tagName==="LABEL"})?this.createRadio(new c.default.Element(_,this)):new c.default.Element(_,this)},c.default.prototype.removeElements=function(_){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(x){return!(x.elt instanceof HTMLCanvasElement)}).map(function(x){return x.remove()})},c.default.Element.prototype.changed=function(_){return c.default.Element._adjustListener("change",_,this),this},c.default.Element.prototype.input=function(_){return c.default.Element._adjustListener("input",_,this),this},c.default.prototype.createDiv=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("div");return x.innerHTML=_,y(x,this)},c.default.prototype.createP=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("p");return x.innerHTML=_,y(x,this)},c.default.prototype.createSpan=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=document.createElement("span");return x.innerHTML=_,y(x,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var _,x=document.createElement("img"),C=arguments;return 1<C.length&&typeof C[1]=="string"&&(x.alt=C[1]),2<C.length&&typeof C[2]=="string"&&(x.crossOrigin=C[2]),x.src=C[0],_=y(x,this),x.addEventListener("load",function(){_.width=x.offsetWidth||x.width,_.height=x.offsetHeight||x.height;var M=C[C.length-1];typeof M=="function"&&M(_)}),_},c.default.prototype.createA=function(_,x,C){c.default._validateParameters("createA",arguments);var M=document.createElement("a");return M.href=_,M.innerHTML=x,C&&(M.target=C),y(M,this)},c.default.prototype.createSlider=function(_,x,C,M){c.default._validateParameters("createSlider",arguments);var S=document.createElement("input");return S.type="range",S.min=_,S.max=x,M===0?S.step=1e-18:M&&(S.step=M),typeof C=="number"&&(S.value=C),y(S,this)},c.default.prototype.createButton=function(_,x){c.default._validateParameters("createButton",arguments);var C=document.createElement("button");return C.innerHTML=_,x&&(C.value=x),y(C,this)},c.default.prototype.createCheckbox=function(){for(var _=arguments.length,x=new Array(_),C=0;C<_;C++)x[C]=arguments[C];c.default._validateParameters("createCheckbox",x);var M=document.createElement("div"),S=document.createElement("input"),P=(S.type="checkbox",document.createElement("label")),L=(P.appendChild(S),M.appendChild(P),y(M,this));return L.checked=function(){var D=L.elt.firstElementChild.getElementsByTagName("input")[0];if(D){if(arguments.length===0)return D.checked;D.checked=!(arguments.length<=0||!arguments[0])}return L},this.value=function(D){return L.value=D,this},x[0]&&(L.value(x[0]),(M=document.createElement("span")).innerHTML=x[0],P.appendChild(M)),x[1]&&(S.checked=!0),L},c.default.prototype.createSelect=function(){for(var _,x=arguments.length,C=new Array(x),M=0;M<x;M++)C[M]=arguments[M];c.default._validateParameters("createSelect",C);var S,P=C[0];return P instanceof c.default.Element&&P.elt instanceof HTMLSelectElement?this.elt=(_=P).elt:P instanceof HTMLSelectElement?(_=y(P,this),this.elt=P):(S=document.createElement("select"),P&&typeof P=="boolean"&&S.setAttribute("multiple","true"),_=y(S,this),this.elt=S),_.option=function(L,D){var k;if(L!==void 0){for(var I,A=0;A<this.elt.length;A+=1)if(this.elt[A].textContent===L){k=A;break}k!==void 0?D===!1?this.elt.remove(k):this.elt[k].value=D:((I=document.createElement("option")).textContent=L,I.value=D===void 0?L:D,this.elt.appendChild(I),this._pInst._elements.push(I))}},_.selected=function(L){if(L!==void 0){for(var D=0;D<this.elt.length;D+=1)this.elt[D].value.toString()===L.toString()&&(this.elt.selectedIndex=D);return this}if(this.elt.getAttribute("multiple")){var k=[],I=!0,A=!1,F=void 0;try{for(var N,U=this.elt.selectedOptions[Symbol.iterator]();!(I=(N=U.next()).done);I=!0){var W=N.value;k.push(W.value)}}catch(G){A=!0,F=G}finally{try{I||U.return==null||U.return()}finally{if(A)throw F}}return k}return this.elt.value},_.disable=function(L){if(typeof L=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===L&&(this.elt[D].disabled=!0,this.elt[D].selected=!1);else this.elt.disabled=!0;return this},_.enable=function(L){if(typeof L=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===L&&(this.elt[D].disabled=!1,this.elt[D].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},_},c.default.prototype.createRadio=function(){function _(L){return L instanceof HTMLInputElement&&L.type==="radio"}function x(L){return L instanceof HTMLLabelElement}var C,M,S,P=arguments.length<=0?void 0:arguments[0];return P instanceof c.default.Element&&(P.elt instanceof HTMLDivElement||P.elt instanceof HTMLSpanElement)?(C=P,this.elt=P.elt):P instanceof HTMLDivElement||P instanceof HTMLSpanElement?(C=y(P,this),M=this.elt=P,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(S=arguments.length<=1?void 0:arguments[1])):(typeof P=="string"&&(S=P),M=document.createElement("div"),C=y(M,this),this.elt=M),C._name=S||"radioOption",C._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(L){return _(L)||x(L)&&_(L.firstElementChild)}).map(function(L){return _(L)?L:L.firstElementChild})},C.option=function(L,D){var k,I,A,F=!0,N=!1,U=void 0;try{for(var W,G=C._getOptionsArray()[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var z=W.value;if(z.value===L){k=z;break}}}catch(Y){N=!0,U=Y}finally{try{F||G.return==null||G.return()}finally{if(N)throw U}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",L)),k.setAttribute("name",C._name),x(k.parentElement)?I=k.parentElement:(I=document.createElement("label")).insertAdjacentElement("afterbegin",k),I.lastElementChild instanceof HTMLSpanElement?A=I.lastElementChild:(A=document.createElement("span"),k.insertAdjacentElement("afterend",A)),A.innerHTML=D===void 0?L:D,this.elt.appendChild(I),k},C.remove=function(L){var D=!0,k=!1,I=void 0;try{for(var A,F=C._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0){var N=A.value;if(N.value===L)return void(x(N.parentElement)?N.parentElement:N).remove()}}catch(U){k=!0,I=U}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}},C.value=function(){var L="",D=!0,k=!1,I=void 0;try{for(var A,F=C._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0){var N=A.value;if(N.checked){L=N.value;break}}}catch(U){k=!0,I=U}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}return L},C.selected=function(L){var D=null;if(L===void 0){var k=!0,I=!1,A=void 0;try{for(var F,N=C._getOptionsArray()[Symbol.iterator]();!(k=(F=N.next()).done);k=!0){var U=F.value;if(U.checked){D=U;break}}}catch(K){I=!0,A=K}finally{try{k||N.return==null||N.return()}finally{if(I)throw A}}}else{C._getOptionsArray().forEach(function(E){E.checked=!1,E.removeAttribute("checked")});var W=!0,I=!1,A=void 0;try{for(var G,z=C._getOptionsArray()[Symbol.iterator]();!(W=(G=z.next()).done);W=!0){var Y=G.value;Y.value===L&&(Y.setAttribute("checked",!0),Y.checked=!0,D=Y)}}catch(E){I=!0,A=E}finally{try{W||z.return==null||z.return()}finally{if(I)throw A}}}return D},C.disable=function(){var L=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],D=!0,k=!1,I=void 0;try{for(var A,F=C._getOptionsArray()[Symbol.iterator]();!(D=(A=F.next()).done);D=!0)A.value.setAttribute("disabled",L)}catch(N){k=!0,I=N}finally{try{D||F.return==null||F.return()}finally{if(k)throw I}}},C},c.default.prototype.createColorPicker=function(_){c.default._validateParameters("createColorPicker",arguments);var x=document.createElement("input");return x.type="color",_?_ instanceof c.default.Color?x.value=_.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},x.value=c.default.prototype.color(_).toString("#rrggbb")):x.value="#000000",(x=y(x,this)).color=function(){return _&&(_.mode&&(c.default.prototype._colorMode=_.mode),_.maxes&&(c.default.prototype._colorMaxes=_.maxes)),c.default.prototype.color(this.elt.value)},x},c.default.prototype.createInput=function(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",C=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return C.setAttribute("value",_),C.setAttribute("type",x),y(C,this)},c.default.prototype.createFileInput=function(_){var x,C=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(x=document.createElement("input")).setAttribute("type","file"),C&&x.setAttribute("multiple",!0),x.addEventListener("change",function(M){var S=!0,P=!1,L=void 0;try{for(var D,k=M.target.files[Symbol.iterator]();!(S=(D=k.next()).done);S=!0){var I=D.value;c.default.File._load(I,_)}}catch(A){P=!0,L=A}finally{try{S||k.return==null||k.return()}finally{if(P)throw L}}},!1),y(x,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(_,x){return c.default._validateParameters("createVideo",arguments),f(this,"video",_,x)},c.default.prototype.createAudio=function(_,x){return c.default._validateParameters("createAudio",arguments),f(this,"audio",_,x)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(_){var x=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return x?new Promise(function(C,M){x.call(navigator,_,C,M)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var _=arguments.length,x=new Array(_),C=0;C<_;C++)x[C]=arguments[C];if(c.default._validateParameters("createCapture",x),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var M,S=!0,P=!0,L=!1,D=0,k=x;D<k.length;D++){var I=k[D];I===c.default.prototype.VIDEO?P=!1:I===c.default.prototype.AUDIO?S=!1:m(I)==="object"?(I.flipped!==void 0&&(L=I.flipped,delete I.flipped),A=Object.assign({},A,I)):typeof I=="function"&&(M=I)}var A=Object.assign({},{video:S,audio:P},A),F=document.createElement("video"),N=(F.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(A).then(function(U){try{"srcObject"in F?F.srcObject=U:F.src=window.URL.createObjectURL(U)}catch{F.src=U}}).catch(function(U){U.name==="NotFoundError"&&c.default._friendlyError("No webcam found on this device","createCapture"),U.name==="NotAllowedError"&&c.default._friendlyError("Access to the camera was denied","createCapture"),console.error(U)}),y(F,this,!0));return N.loadedmetadata=!1,F.addEventListener("loadedmetadata",function(){F.play(),F.width?(N.width=F.width,N.height=F.height,L&&(N.elt.style.transform="scaleX(-1)")):(N.width=N.elt.width=F.videoWidth,N.height=N.elt.height=F.videoHeight),N.loadedmetadata=!0,M&&M(F.srcObject)}),N.flipped=L,N},c.default.prototype.createElement=function(_,x){return c.default._validateParameters("createElement",arguments),_=document.createElement(_),x!==void 0&&(_.innerHTML=x),y(_,this)},c.default.Element.prototype.addClass=function(_){return this.elt.className?this.hasClass(_)||(this.elt.className=this.elt.className+" "+_):this.elt.className=_,this},c.default.Element.prototype.removeClass=function(_){return this.elt.classList.remove(_),this},c.default.Element.prototype.hasClass=function(_){return this.elt.classList.contains(_)},c.default.Element.prototype.toggleClass=function(_){return this.elt.classList.contains(_)?this.elt.classList.remove(_):this.elt.classList.add(_),this},c.default.Element.prototype.child=function(_){return _===void 0?this.elt.childNodes:(typeof _=="string"?(_[0]==="#"&&(_=_.substring(1)),_=document.getElementById(_)):_ instanceof c.default.Element&&(_=_.elt),_ instanceof HTMLElement&&this.elt.appendChild(_),this)},c.default.Element.prototype.center=function(_){var x=this.elt.style.display,C=this.elt.style.display==="none",M=this.parent().style.display==="none",S={x:this.elt.offsetLeft,y:this.elt.offsetTop},P=(C&&this.show(),M&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),L=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return _==="both"||_===void 0?this.position(P/2+this.parent().offsetLeft,L/2+this.parent().offsetTop):_==="horizontal"?this.position(P/2+this.parent().offsetLeft,S.y):_==="vertical"&&this.position(S.x,L/2+this.parent().offsetTop),this.style("display",x),C&&this.hide(),M&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var _="";return this.elt.style.transform&&(_=(_=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=_,this},c.default.Element.prototype._rotate=function(){var _="";return this.elt.style.transform&&(_=(_=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=_,this},c.default.Element.prototype.style=function(_,x){if((x=x instanceof c.default.Color?"rgba("+x.levels[0]+","+x.levels[1]+","+x.levels[2]+","+x.levels[3]/255+")":x)===void 0){if(_.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(_);for(var C=_.split(";"),M=0;M<C.length;M++){var S=C[M].split(":");S[0]&&S[1]&&(this.elt.style[S[0].trim()]=S[1].trim())}}else this.elt.style[_]=x,_!=="width"&&_!=="height"&&_!=="left"&&_!=="top"||(x=window.getComputedStyle(this.elt).getPropertyValue(_).replace(/[^\d.]/g,""),this[_]=Math.round(parseFloat(x,10)));return this},c.default.Element.prototype.attribute=function(_,x){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return x===void 0?this.elt.getAttribute(_):(this.elt.setAttribute(_,x),this);if(x===void 0)return this.elt.firstChild.getAttribute(_);for(var C=0;C<this.elt.childNodes.length;C++)this.elt.childNodes[C].setAttribute(_,x)},c.default.Element.prototype.removeAttribute=function(_){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var x=0;x<this.elt.childNodes.length;x++)this.elt.childNodes[x].removeAttribute(_);return this.elt.removeAttribute(_),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(_,x){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var C=_,M=x,S=c.default.prototype.AUTO;if(C!==S||M!==S){if(C===S?C=x*this.width/this.height:M===S&&(M=_*this.height/this.width),this.elt instanceof HTMLCanvasElement){var P,L={},D=this.elt.getContext("2d");for(P in D)L[P]=D[P];for(P in this.elt.setAttribute("width",C*this._pInst._pixelDensity),this.elt.setAttribute("height",M*this._pInst._pixelDensity),this.elt.style.width=C+"px",this.elt.style.height=M+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),L)this.elt.getContext("2d")[P]=L[P]}else this.elt.style.width=C+"px",this.elt.style.height=M+"px",this.elt.width=C,this.elt.height=M;this.width=C,this.height=M,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",C),this._pInst._setProperty("height",M))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(x=this.elt.srcObject)!==null&&x.getTracks().forEach(function(C){C.stop()}));var _,x=this._pInst._elements.indexOf(this);for(_ in x!==-1&&this._pInst._elements.splice(x,1),this._events)this.elt.removeEventListener(_,this._events[_]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(_,x){var C;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",C=function(M){M.preventDefault()}),this.elt.addEventListener("dragleave",C)),c.default.Element._attachListener("drop",function(S){S.preventDefault(),typeof x=="function"&&x.call(this,S);var S=S.dataTransfer.files,P=!0,L=!1,D=void 0;try{for(var k,I=S[Symbol.iterator]();!(P=(k=I.next()).done);P=!0){var A=k.value;c.default.File._load(A,_)}}catch(F){L=!0,D=F}finally{try{P||I.return==null||I.return()}finally{if(L)throw D}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(_){var x,C="ontouchstart"in window,M=0,S=0,P=0,L=0,D=C?"touchend":"mouseup",k=C?"touchmove":"mousemove";function I(F){var N;F=F||window.event,L=C?(N=F.changedTouches,M=P-parseInt(N[0].clientX),S=L-parseInt(N[0].clientY),P=parseInt(N[0].clientX),parseInt(N[0].clientY)):(M=P-parseInt(F.clientX),S=L-parseInt(F.clientY),P=parseInt(F.clientX),parseInt(F.clientY)),_.style.left=_.offsetLeft-M+"px",_.style.top=_.offsetTop-S+"px"}function A(){document.removeEventListener(D,A,!1),document.removeEventListener(k,I,!1)}return _===void 0?x=_=this.elt:_!==this.elt&&_.elt!==this.elt&&(_=_.elt,x=this.elt),x.addEventListener(C?"touchstart":"mousedown",function(F){{var N;F=F||window.event,L=C?(N=F.changedTouches,P=parseInt(N[0].clientX),parseInt(N[0].clientY)):(P=parseInt(F.clientX),parseInt(F.clientY))}return document.addEventListener(D,A,!1),document.addEventListener(k,I,!1),!1},!1),x.style.cursor="move",this};function v(_,x,C,M){p(this,v),this.callback=_,this.time=x,this.id=C,this.val=M}t=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&b(x,_);var C=g(M);function M(S,P){p(this,M);var L=u(P=C.call(this,S,P));return P.elt.crossOrigin="anonymous",P._prevTime=0,P._cueIDCounter=0,P._cues=[],P.pixels=[],P._pixelsState=u(P),P._pixelDensity=1,P._modified=!1,P._frameOnCanvas=-1,Object.defineProperty(L,"src",{get:function(){var D=L.elt.children[0].src,k=L.elt.src===window.location.href?"":L.elt.src;return D===window.location.href?k:D},set:function(D){for(var k=0;k<L.elt.children.length;k++)L.elt.removeChild(L.elt.children[k]);var I=document.createElement("source");I.src=D,S.appendChild(I),L.elt.src=D,L.modified=!0}}),L._onended=function(){},L.elt.onended=function(){L._onended(L)},P}return l(M,[{key:"play",value:function(){var S;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(S=this.elt.play())&&S.catch&&S.catch(function(P){P.name==="NotAllowedError"?console.error(P):console.error("Media play method encountered an unexpected error",P)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var S=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(S)},{passive:!0,once:!0})}},{key:"autoplay",value:function(S){var P=this,L=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",S),S&&!L&&(S=function(){return P._setupAutoplayFailDetection()},this.elt.readyState===4?S():this.elt.addEventListener("canplay",S,{passive:!0,once:!0})),this}},{key:"volume",value:function(S){if(S===void 0)return this.elt.volume;this.elt.volume=S}},{key:"speed",value:function(S){if(S===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=S:this.presetPlaybackRate=S}},{key:"time",value:function(S){return S===void 0?this.elt.currentTime:(this.elt.currentTime=S,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var S=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&S&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return c.default.Renderer2D.prototype.loadPixels.apply(this,P)}},{key:"updatePixels",value:function(S,P,L,D){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,S,P,L,D)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return c.default.Renderer2D.prototype.get.apply(this,P)}},{key:"_getPixel",value:function(){this.loadPixels();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];return c.default.Renderer2D.prototype._getPixel.apply(this,P)}},{key:"set",value:function(S,P,L){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,S,P,L),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];c.default.prototype.copy.apply(this,P)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var S=arguments.length,P=new Array(S),L=0;L<S;L++)P[L]=arguments[L];c.default.Image.prototype.mask.apply(this,P)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(S){this._modified=S}},{key:"onended",value:function(S){return this._onended=S,this}},{key:"connect",value:function(S){var P,L;if(typeof c.default.prototype.getAudioContext=="function")P=c.default.prototype.getAudioContext(),L=c.default.soundOut.input;else try{L=(P=S.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=P.createMediaElementSource(this.elt),this.audioSourceNode.connect(L)),S?S.input?this.audioSourceNode.connect(S.input):this.audioSourceNode.connect(S):this.audioSourceNode.connect(L)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(S,k,L){var D=this._cueIDCounter++,k=new v(k,S,D,L);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),D}},{key:"removeCue",value:function(S){for(var P=0;P<this._cues.length;P++)this._cues[P].id===S&&(console.log(S),this._cues.splice(P,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var S=this.time(),P=0;P<this._cues.length;P++){var L=this._cues[P].time,D=this._cues[P].val;this._prevTime<L&&L<=S&&this._cues[P].callback(D)}this._prevTime=S}}]),M}(c.default.Element),c.default.MediaElement=t,t=function(){function _(x,C){p(this,_),this.file=x,this._pInst=C,C=x.type.split("/"),this.type=C[0],this.subtype=C[1],this.name=x.name,this.size=x.size,this.data=void 0}return l(_,null,[{key:"_createLoader",value:function(x,C){var M=new FileReader;return M.onload=function(S){var P,L=new c.default.File(x);L.file.type==="application/json"?L.data=JSON.parse(S.target.result):L.file.type==="text/xml"?(P=new DOMParser().parseFromString(S.target.result,"text/xml"),L.data=new c.default.XML(P.documentElement)):L.data=S.target.result,C(L)},M}},{key:"_load",value:function(x,C){var M;/^text\//.test(x.type)||x.type==="application/json"?c.default.File._createLoader(x,C).readAsText(x):/^(video|audio)\//.test(x.type)?((M=new c.default.File(x)).data=URL.createObjectURL(x),C(M)):c.default.File._createLoader(x,C).readAsDataURL(x)}}]),_}(),c.default.File=t,t=c.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(m,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(m=m("../core/main"))&&m.__esModule?m:{default:m};o.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",o.default.prototype.accelerationX=0,o.default.prototype.accelerationY=0,o.default.prototype.accelerationZ=0,o.default.prototype.pAccelerationX=0,o.default.prototype.pAccelerationY=0,o.default.prototype.pAccelerationZ=0,o.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},o.default.prototype.rotationX=0,o.default.prototype.rotationY=0,o.default.prototype.rotationZ=0,o.default.prototype.pRotationX=0,o.default.prototype.pRotationY=0;var c=o.default.prototype.pRotationZ=0,a=0,l=0,b="clockwise",g="clockwise",u="clockwise",h=(o.default.prototype.pRotateDirectionX=void 0,o.default.prototype.pRotateDirectionY=void 0,o.default.prototype.pRotateDirectionZ=void 0,o.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},o.default.prototype.turnAxis=void 0,.5),p=30,m=(o.default.prototype.setMoveThreshold=function(y){o.default._validateParameters("setMoveThreshold",arguments),h=y},o.default.prototype.setShakeThreshold=function(y){o.default._validateParameters("setShakeThreshold",arguments),p=y},o.default.prototype._ondeviceorientation=function(y){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(y.beta)),this._setProperty("rotationY",this._fromDegrees(y.gamma)),this._setProperty("rotationZ",this._fromDegrees(y.alpha)),this._handleMotion()},o.default.prototype._ondevicemotion=function(y){this._updatePAccelerations(),this._setProperty("accelerationX",2*y.acceleration.x),this._setProperty("accelerationY",2*y.acceleration.y),this._setProperty("accelerationZ",2*y.acceleration.z),this._handleMotion()},o.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var y,f,v,_,x,C=this._isGlobal?window:this;typeof C.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&C.deviceMoved(),typeof C.deviceTurned=="function"&&(f=this._toDegrees(this.rotationX)+180,v=this._toDegrees(this.pRotationX)+180,y=c+180,0<f-v&&f-v<270||f-v<-270?b="clockwise":(f-v<0||270<f-v)&&(b="counter-clockwise"),b!==this.pRotateDirectionX&&(y=f),90<Math.abs(f-y)&&Math.abs(f-y)<270&&(y=f,this._setProperty("turnAxis","X"),C.deviceTurned()),this.pRotateDirectionX=b,c=y-180,v=this._toDegrees(this.rotationY)+180,f=this._toDegrees(this.pRotationY)+180,y=a+180,0<v-f&&v-f<270||v-f<-270?g="clockwise":(v-f<0||270<v-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(y=v),90<Math.abs(v-y)&&Math.abs(v-y)<270&&(y=v,this._setProperty("turnAxis","Y"),C.deviceTurned()),this.pRotateDirectionY=g,a=y-180,0<(f=this._toDegrees(this.rotationZ))-(v=this._toDegrees(this.pRotationZ))&&f-v<270||f-v<-270?u="clockwise":(f-v<0||270<f-v)&&(u="counter-clockwise"),u!==this.pRotateDirectionZ&&(l=f),90<Math.abs(f-l)&&Math.abs(f-l)<270&&(l=f,this._setProperty("turnAxis","Z"),C.deviceTurned()),this.pRotateDirectionZ=u,this._setProperty("turnAxis",void 0)),typeof C.deviceShaken=="function"&&(this.pAccelerationX!==null&&(_=Math.abs(this.accelerationX-this.pAccelerationX),x=Math.abs(this.accelerationY-this.pAccelerationY)),p<_+x&&C.deviceShaken())},o.default);d.default=m},{"../core/main":280}],298:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(c){var a;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(a=this._isGlobal?window:this).keyPressed!="function"||c.charCode||a.keyPressed(c)===!1&&c.preventDefault())},o.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var a=this._isGlobal?window:this;typeof a.keyReleased=="function"&&a.keyReleased(c)===!1&&c.preventDefault()},o.default.prototype._onkeypress=function(c){var a;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(a=this._isGlobal?window:this).keyTyped=="function"&&a.keyTyped(c)===!1&&c.preventDefault())},o.default.prototype._onblur=function(c){this._downKeys={}},o.default.prototype.keyIsDown=function(c){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},o.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},t=o.default,d.default=t},{"../core/main":280}],299:[function(t,i,d){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(a=t("../core/main"))&&a.__esModule?a:{default:a},l=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var u=b();if(u&&u.has(g))return u.get(g);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in g){var y;Object.prototype.hasOwnProperty.call(g,h)&&((y=m?Object.getOwnPropertyDescriptor(g,h):null)&&(y.get||y.set)?Object.defineProperty(p,h,y):p[h]=g[h])}return p.default=g,u&&u.set(g,p),p}(t("../core/constants"));function b(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,b=function(){return g},g)}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(g){var u,h,p,m,y;this._curElement!==null&&(!g.touches||0<g.touches.length)&&(u=this._curElement.elt,h=this.width,p=this.height,(m=g)&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0])),y=u.getBoundingClientRect(),h=u.scrollWidth/h||1,u=u.scrollHeight/p||1,p={x:(m.clientX-y.left)/h,y:(m.clientY-y.top)/u,winX:m.clientX,winY:m.clientY,id:m.identifier},this._setProperty("movedX",g.movementX),this._setProperty("movedY",g.movementY),this._setProperty("mouseX",p.x),this._setProperty("mouseY",p.y),this._setProperty("winMouseX",p.winX),this._setProperty("winMouseY",p.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(g){g.button===1?this._setProperty("mouseButton",l.CENTER):g.button===2?this._setProperty("mouseButton",l.RIGHT):this._setProperty("mouseButton",l.LEFT)},a.default.prototype._onmousemove=function(g){var u=this._isGlobal?window:this;this._updateNextMouseCoords(g),this.mouseIsPressed?typeof u.mouseDragged=="function"?u.mouseDragged(g)===!1&&g.preventDefault():typeof u.touchMoved=="function"&&u.touchMoved(g)===!1&&g.preventDefault():typeof u.mouseMoved=="function"&&u.mouseMoved(g)===!1&&g.preventDefault()},a.default.prototype._onmousedown=function(g){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(g),this._updateNextMouseCoords(g),this.touchstart||(typeof u.mousePressed=="function"?u.mousePressed(g)===!1&&g.preventDefault():typeof u.touchStarted=="function"&&u.touchStarted(g)===!1&&g.preventDefault(),this.touchstart=!1)},a.default.prototype._onmouseup=function(g){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof u.mouseReleased=="function"?u.mouseReleased(g)===!1&&g.preventDefault():typeof u.touchEnded=="function"&&u.touchEnded(g)===!1&&g.preventDefault(),this.touchend=!1)},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(g){var u=this._isGlobal?window:this;typeof u.mouseClicked=="function"&&u.mouseClicked(g)===!1&&g.preventDefault()},a.default.prototype._ondblclick=function(g){var u=this._isGlobal?window:this;typeof u.doubleClicked=="function"&&u.doubleClicked(g)===!1&&g.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(g){var u=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",g.deltaY),typeof u.mouseWheel=="function"&&(g.delta=g.deltaY,u.mouseWheel(g)===!1&&g.preventDefault())},a.default.prototype.requestPointerLock=function(){var g=this._curElement.elt;return g.requestPointerLock=g.requestPointerLock||g.mozRequestPointerLock,g.requestPointerLock?(g.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=a.default,d.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var c=[],a=0;a<o.touches.length;a++)c[a]=function(y,m,f,u){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,p=y.getBoundingClientRect(),m=y.scrollWidth/m||1,y=y.scrollHeight/f||1,f=u.touches[h]||u.changedTouches[h];return{x:(f.clientX-p.left)/m,y:(f.clientY-p.top)/y,winX:f.clientX,winY:f.clientY,id:f.identifier}}(this._curElement.elt,this.width,this.height,o,a);this._setProperty("touches",c)}},t.default.prototype._ontouchstart=function(o){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof c.touchStarted=="function"&&(c.touchStarted(o)===!1&&o.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(o){var c=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof c.touchMoved=="function"?c.touchMoved(o)===!1&&o.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(o)===!1&&o.preventDefault()},t.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"&&(c.touchEnded(o)===!1&&o.preventDefault(),this.touchend=!0)},t=t.default,d.default=t},{"../core/main":280}],301:[function(t,i,d){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o,c,a,l,b={_toPixels:function(g){var u,h;return g instanceof ImageData?g.data:g.getContext("2d")?g.getContext("2d").getImageData(0,0,g.width,g.height).data:g.getContext("webgl")?(h=(u=g.getContext("webgl")).drawingBufferWidth*u.drawingBufferHeight*4,h=new Uint8Array(h),u.readPixels(0,0,g.width,g.height,u.RGBA,u.UNSIGNED_BYTE,h),h):void 0},_getARGB:function(g,u){return u*=4,g[3+u]<<24&4278190080|g[u]<<16&16711680|g[1+u]<<8&65280|255&g[2+u]},_setPixels:function(g,u){for(var h,p=0,m=g.length;p<m;p++)g[0+(h=4*p)]=(16711680&u[p])>>>16,g[1+h]=(65280&u[p])>>>8,g[2+h]=255&u[p],g[3+h]=(4278190080&u[p])>>>24},_toImageData:function(g){return g instanceof ImageData?g:g.getContext("2d").getImageData(0,0,g.width,g.height)},_createImageData:function(g,u){return b._tmpCanvas=document.createElement("canvas"),b._tmpCtx=b._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(g,u)},apply:function(g,y,h){var p=g.getContext("2d"),m=p.getImageData(0,0,g.width,g.height),y=y(m,h);y instanceof ImageData?p.putImageData(y,0,0,0,0,g.width,g.height):p.putImageData(m,0,0,0,0,g.width,g.height)},threshold:function(g){for(var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,h=b._toPixels(g),p=Math.floor(255*u),m=0;m<h.length;m+=4){var y=void 0,y=p<=.2126*h[m]+.7152*h[m+1]+.0722*h[m+2]?255:0;h[m]=h[m+1]=h[m+2]=y}},gray:function(g){for(var u=b._toPixels(g),h=0;h<u.length;h+=4){var p=u[h],m=u[h+1],y=u[h+2];u[h]=u[h+1]=u[h+2]=.2126*p+.7152*m+.0722*y}},opaque:function(g){for(var u=b._toPixels(g),h=0;h<u.length;h+=4)u[h+3]=255;return u},invert:function(g){for(var u=b._toPixels(g),h=0;h<u.length;h+=4)u[h]=255-u[h],u[h+1]=255-u[h+1],u[h+2]=255-u[h+2]},posterize:function(g){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,h=b._toPixels(g);if(u<2||255<u)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var p=u-1,m=0;m<h.length;m+=4){var y=h[m],f=h[m+1],v=h[m+2];h[m]=255*(y*u>>8)/p,h[m+1]=255*(f*u>>8)/p,h[m+2]=255*(v*u>>8)/p}},dilate:function(g){for(var u,h,p,m,y,f,v,_,x,C=b._toPixels(g),M=0,S=C.length?C.length/4:0,P=new Int32Array(S);M<S;)for(h=(u=M)+g.width;M<h;)m=p=b._getARGB(C,M),(x=M-1)<u&&(x=M),h<=(_=M+1)&&(_=M),(y=M-g.width)<0&&(y=0),S<=(f=M+g.width)&&(f=M),y=b._getARGB(C,y),x=b._getARGB(C,x),f=b._getARGB(C,f),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(v=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(p=x,m=v),m<(v=77*((x=b._getARGB(C,_))>>16&255)+151*(x>>8&255)+28*(255&x))&&(p=x,m=v),m<(_=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(p=y,m=_),m<(x=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(p=f,m=x),P[M++]=p;b._setPixels(C,P)},erode:function(g){for(var u,h,p,m,y,f,v,_,x,C=b._toPixels(g),M=0,S=C.length?C.length/4:0,P=new Int32Array(S);M<S;)for(h=(u=M)+g.width;M<h;)m=p=b._getARGB(C,M),(x=M-1)<u&&(x=M),h<=(_=M+1)&&(_=M),(y=M-g.width)<0&&(y=0),S<=(f=M+g.width)&&(f=M),y=b._getARGB(C,y),x=b._getARGB(C,x),f=b._getARGB(C,f),(v=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(p=x,m=v),(v=77*((x=b._getARGB(C,_))>>16&255)+151*(x>>8&255)+28*(255&x))<m&&(p=x,m=v),(_=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<m&&(p=y,m=_),(x=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<m&&(p=f,m=x),P[M++]=p;b._setPixels(C,P)},blur:function(g,u){for(var h,p,m,y,f,v,_,x,C,M,S=b._toPixels(g),P=g.width,L=g.height,D=P*L,k=new Int32Array(D),I=0;I<D;I++)k[I]=b._getARGB(S,I);var A,F,N,U,W,G,z,Y,K=new Int32Array(D),ie=new Int32Array(D),E=new Int32Array(D),R=new Int32Array(D),B=0,H=3.5*u|0;if(o!==(H=H<1?1:H<248?H:248)){c=1+(o=H)<<1,a=new Int32Array(c),l=new Array(c);for(var Z=0;Z<c;Z++)l[Z]=new Int32Array(256);for(var te=1,se=H-1;te<H;te++){a[H+te]=a[se]=G=se*se,z=l[H+te],Y=l[se--];for(var pe=0;pe<256;pe++)z[pe]=Y[pe]=G*pe}W=a[H]=H*H,z=l[H];for(var oe=0;oe<256;oe++)z[oe]=W*oe}for(F=0;F<L;F++){for(A=0;A<P;A++){if(y=m=p=f=h=0,(v=A-o)<0)M=-v,v=0;else{if(P<=v)break;M=0}for(N=M;N<c&&!(P<=v);N++){var he=k[v+B];U=l[N],f+=U[(-16777216&he)>>>24],p+=U[(16711680&he)>>16],m+=U[(65280&he)>>8],y+=U[255&he],h+=a[N],v++}K[_=B+A]=f/h,ie[_]=p/h,E[_]=m/h,R[_]=y/h}B+=P}for(C=(x=-o)*P,F=B=0;F<L;F++){for(A=0;A<P;A++){if(y=m=p=f=h=0,x<0)M=_=-x,v=A;else{if(L<=x)break;M=0,_=x,v=A+C}for(N=M;N<c&&!(L<=_);N++)U=l[N],f+=U[K[v]],p+=U[ie[v]],m+=U[E[v]],y+=U[R[v]],h+=a[N],_++,v+=P;k[A+B]=f/h<<24|p/h<<16|m/h<<8|y/h}B+=P,C+=P,x++}b._setPixels(S,k)}};d.default=b},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=a(t("../core/main")),c=a(t("omggif"));function a(b){return b&&b.__esModule?b:{default:b}}function l(b){return function(g){if(Array.isArray(g)){for(var u=0,h=new Array(g.length);u<g.length;u++)h[u]=g[u];return h}}(b)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(b,g){return o.default._validateParameters("createImage",arguments),new o.default.Image(b,g)},o.default.prototype.saveCanvas=function(){for(var b,g,u,h,p,m,y=arguments.length,f=new Array(y),v=0;v<y;v++)f[v]=arguments[v];switch(o.default._validateParameters("saveCanvas",f),f[0]instanceof HTMLCanvasElement?(b=f[0],f.shift()):f[0]instanceof o.default.Element?(b=f[0].elt,f.shift()):f[0]instanceof o.default.Framebuffer?(h=f[0],(p=this.createGraphics(h.width,h.height)).pixelDensity(pixelDensity()),h.loadPixels(),p.loadPixels(),p.pixels.set(h.pixels),p.updatePixels(),b=p.elt,f.shift()):b=this._curElement&&this._curElement.elt,1<=f.length&&(g=f[0]),u=(u=2<=f.length?f[1]:u)||o.default.prototype._checkFileExtension(g,u)[1]||"png"){default:m="image/png";break;case"jpeg":case"jpg":m="image/jpeg"}b.toBlob(function(_){o.default.prototype.downloadFile(_,g,u),p&&p.remove()},m)},o.default.prototype.encodeAndDownloadGif=function(b,g){for(var u=b.gifProperties,h=u.loopLimit,p=(h===1?h=null:h===null&&(h=0),new Uint8Array(b.width*b.height*u.numFrames)),m=[],y={},f=0;f<u.numFrames;f++){for(var v=new Set,_=u.frames[f].image.data,x=_.length,C=new Uint32Array(b.width*b.height),M=0,S=0;M<x;M+=4,S++){var P=_[M+0]<<16|_[M+1]<<8|_[M+2]<<0;v.add(P),C[S]=P}var L=l(v).sort().toString();y[L]===void 0?y[L]={freq:1,frames:[f]}:(y[L].freq+=1,y[L].frames.push(f)),m.push(C)}for(var I=[],D=Object.keys(y).sort(function(E,R){return y[R].freq-y[E].freq}),k=D[0].split(",").map(function(E){return parseInt(E)}),I=I.concat(y[k].frames),A=new Set(k),F=1;F<D.length;F++){var N=D[F].split(",").map(function(E){return parseInt(E)}).filter(function(E){return!A.has(E)});if(k.length+N.length<=256){for(var U=0;U<N.length;U++)k.push(N[U]),A.add(N[U]);I=I.concat(y[D[F]].frames)}}I=new Set(I);for(var W={},G=0;G<k.length;G++)W[k[G]]||(W[k[G]]=G);for(var z=1;z<k.length;)z<<=1;k.length=z;for(var h={loop:h,palette:new Uint32Array(k)},Y=new c.default.GifWriter(p,b.width,b.height,h),K={},ie=0;ie<u.numFrames;ie++)(function(R){var B=!I.has(R),H=B?[]:k,Z=new Uint8Array(b.width*b.height),te={},se=new Set,pe=(m[R].forEach(function(ue,ye){B?(te[ue]===void 0&&(te[ue]=H.length,H.push(ue)),Z[ye]=te[ue]):Z[ye]=W[ue],0<R&&m[R-1][ye]!==ue&&se.add(ue)}),{}),oe=H.filter(function(ue){return!se.has(ue)});if(0<oe.length){var oe=oe[0],he=(B?te:W)[oe];if(0<R){for(var de=0;de<m[R].length;de++)m[R-1][de]===m[R][de]&&(Z[de]=he);pe.transparent=he,K.frameOpts.disposal=1}}if(pe.delay=u.frames[R].delay/10,B){for(var J=1;J<H.length;)J<<=1;H.length=J,pe.palette=new Uint32Array(H)}0<R&&Y.addFrame(0,0,b.width,b.height,K.pixelPaletteIndex,K.frameOpts),K={pixelPaletteIndex:Z,frameOpts:pe}})(ie);K.frameOpts.disposal=1,Y.addFrame(0,0,b.width,b.height,K.pixelPaletteIndex,K.frameOpts),h=new Blob([p.slice(0,Y.end())],{type:"image/gif"}),o.default.prototype.downloadFile(h,g,"gif")},o.default.prototype.saveFrames=function(b,g,u,m,p){o.default._validateParameters("saveFrames",arguments),u=o.default.prototype.constrain(u=u||3,0,15),u*=1e3;var m=o.default.prototype.constrain(m||15,0,22),y=0,f=o.default.prototype._makeFrame,v=this._curElement.elt,_=[],x=setInterval(function(){_.push(f(b+y,g,v)),y++},1e3/m);setTimeout(function(){if(clearInterval(x),p)p(_);else for(var C=0,M=_;C<M.length;C++){var S=M[C];o.default.prototype.downloadFile(S.imageData,S.filename,S.ext)}_=[]},.01+u)},o.default.prototype._makeFrame=function(b,g,p){var h,p=this?this._curElement.elt:p;if(g)switch(g.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else g="png",h="image/png";var p=(p=p.toDataURL(h)).replace(h,"image/octet-stream"),m={};return m.imageData=p,m.filename=b,m.ext=g,m},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(t,i,d){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function c(v){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t("regenerator-runtime/runtime");var a=p(t("../core/main")),l=p(t("../core/helpers")),b=function(v){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var _=h();if(_&&_.has(v))return _.get(v);var x,C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var S;Object.prototype.hasOwnProperty.call(v,x)&&((S=M?Object.getOwnPropertyDescriptor(v,x):null)&&(S.get||S.set)?Object.defineProperty(C,x,S):C[x]=v[x])}return C.default=v,_&&_.set(v,C),C}(t("../core/constants")),g=p(t("omggif")),u=t("gifenc");function h(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,h=function(){return v},v)}function p(v){return v&&v.__esModule?v:{default:v}}function m(v,_,x,C,M,S,P){try{var L=v[S](P),D=L.value}catch(k){return void x(k)}L.done?_(D):Promise.resolve(D).then(C,M)}function y(v,_,x,C,M,S,P,L,D,k,I){var A,F,N,U,W,G,z,Y,K;return v===b.COVER&&(A=_,N=x,z=S,Y=P,G=L,K=D,F=k,U=I,W=Math.max(z/F,Y/U),z/=W,Y/=W,W=G,G=K,A===b.CENTER?W+=(F-z)/2:A===b.RIGHT&&(W+=F-z),N===b.CENTER?G+=(U-Y)/2:N===b.BOTTOM&&(G+=U-Y),L=(K={x:W,y:G,w:z,h:Y}).x,D=K.y,k=K.w,I=K.h),v===b.CONTAIN&&(A=_,F=x,N=C,U=M,W=S,G=P,z=k,Y=I,K=Math.max(z/W,Y/G),z/=K,Y/=K,K=N,N=U,A===b.CENTER?K+=(W-z)/2:A===b.RIGHT&&(K+=W-z),F===b.CENTER?N+=(G-Y)/2:F===b.BOTTOM&&(N+=G-Y),C=(v={x:K,y:N,w:z,h:Y}).x,M=v.y,S=v.w,P=v.h),{sx:L,sy:D,sw:k,sh:I,dx:C,dy:M,dw:S,dh:P}}function f(v,_){return 0<v&&v<_?v:_}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(v,_,x){a.default._validateParameters("loadImage",arguments);var C=new a.default.Image(1,1,this),M=this,S=new Request(v,{method:"GET",mode:"cors"});return fetch(v,S).then(function(P){var L,D=P.headers.get("content-type");D===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),D&&D.includes("image/gif")?P.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),I=C,A=_,F=x,N=(function(B){M._decrementPreload()}).bind(M),U=new g.default.GifReader(k),W=(I.width=I.canvas.width=U.width,I.height=I.canvas.height=U.height,[]),G=U.numFrames(),z=new Uint8ClampedArray(I.width*I.height*4),Y=0;Y<G;Y++){var K=U.frameInfo(Y),ie=I.drawingContext.getImageData(0,0,I.width,I.height),E=(z=ie.data.slice(),function(B,H){try{H.decodeAndBlitFrameRGBA(B,z)}catch(Z){a.default._friendlyFileLoadError(8,I.src),typeof F=="function"?F(Z):console.error(Z)}}(Y,U),new ImageData(z,I.width,I.height)),E=(I.drawingContext.putImageData(E,0,0),K.delay);E===0&&(E=10),W.push({image:I.drawingContext.getImageData(0,0,I.width,I.height),delay:10*E}),K.disposal===2?I.drawingContext.clearRect(K.x,K.y,K.width,K.height):K.disposal===3&&I.drawingContext.putImageData(ie,0,0,K.x,K.y,K.width,K.height)}(k=U.loopCount())===null?k=1:k===0&&(k=null),I.drawingContext.putImageData(W[0].image,0,0),1<W.length&&(I.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:W,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof A=="function"&&A(I),N()}},function(k){typeof x=="function"?(x(k),M._decrementPreload()):console.error(k)}):((L=new Image).onload=function(){C.width=C.canvas.width=L.width,C.height=C.canvas.height=L.height,C.drawingContext.drawImage(L,0,0),C.modified=!0,typeof _=="function"&&_(C),M._decrementPreload()},L.onerror=function(k){a.default._friendlyFileLoadError(0,L.src),typeof x=="function"?(x(k),M._decrementPreload()):console.error(k)},v.indexOf("data:image/")!==0&&(L.crossOrigin="Anonymous"),L.src=v),C.modified=!0}).catch(function(P){a.default._friendlyFileLoadError(0,v),typeof x=="function"?(x(P),M._decrementPreload()):console.error(P)}),C},a.default.prototype.saveGif=function(){v=regeneratorRuntime.mark(function x(C,M){var S,P,L,D,k,I,A,F,N,U,W,G,z,Y,K,ie,E,R,B,H,Z,te,se,pe,oe,he,de=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(S=2<de.length&&de[2]!==void 0?de[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof C!="string")throw TypeError("fileName parameter must be a string");J.next=3;break;case 3:if(typeof M!="number")throw TypeError("Duration parameter must be a number");J.next=5;break;case 5:if(P=S&&S.delay||0,L=S&&S.units||"seconds",D=S&&S.silent||!1,k=S&&S.notificationDuration||0,I=S&&S.notificationID||"progressBar",typeof P!="number")throw TypeError("Delay parameter must be a number");J.next=12;break;case 12:if(L!=="seconds"&&L!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');J.next=14;break;case 14:if(typeof D!="boolean")throw TypeError("Silent parameter must be a boolean");J.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");J.next=18;break;case 18:if(typeof I!="string")throw TypeError("Notification ID parameter must be a string");J.next=20;break;case 20:return this._recording=!0,U=this._targetFrameRate,A=(A=1/(U=U!==1/0&&U!==void 0&&U!==0?U:60)*1e3)<20?20:A,N=(F=L==="seconds"?M*U:M)+(U=L==="seconds"?P*U:P),U=U,this.frameCount=U,W=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(I)!==null&&document.getElementById(I).remove(),D||((z=this.createP("")).id(I),z.style("font-size","16px"),z.style("font-family","Montserrat"),z.style("background-color","#ffffffa0"),z.style("padding","8px"),z.style("border-radius","10px"),z.position(0,0)),this._renderer instanceof a.default.RendererGL&&(K=this.drawingContext,Y=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4)),this.noLoop(),J.next=39,Promise.resolve();case 39:if(U<N)return this.redraw(),pe=void 0,pe=this._renderer instanceof a.default.RendererGL?(Y=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4),K.readPixels(0,0,K.drawingBufferWidth,K.drawingBufferHeight,K.RGBA,K.UNSIGNED_BYTE,Y),function(ue,ye,Ce){for(var ge=parseInt(Ce/2),_e=4*ye,Ee=new Uint8Array(4*ye),Ie=0;Ie<ge;++Ie){var Te=Ie*_e,Ke=(Ce-Ie-1)*_e;Ee.set(ue.subarray(Te,Te+_e)),ue.copyWithin(Te,Ke,Ke+_e),ue.set(Ee,Ke)}return ue}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(pe),U++,D||z.html("Saved frame <b>"+G.length.toString()+"</b> out of "+F.toString()),J.next=48,new Promise(function(ue){return setTimeout(ue,0)});J.next=50;break;case 48:J.next=39;break;case 50:D||z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(W),ie=(0,u.GIFEncoder)(),E=function(ue){for(var ye=new Uint8Array(ue.length*ue[0].length),Ce=0;Ce<ue.length;Ce++)ye.set(ue[Ce],Ce*ue[0].length);var ge=(0,u.quantize)(ye,256,{format:"rgba4444",oneBitAlpha:!0});return ge.length===256?ge[ge.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ge.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ge}(G),R={},B=function(ue){for(var ye=ue.length/4,Ce=new Uint8Array(ye),ge=0;ge<ye;ge++){var _e=ue[4*ge]<<24|ue[4*ge+1]<<16|ue[4*ge+2]<<8|ue[4*ge+3];R[_e]===void 0&&(R[_e]=(0,u.nearestColorIndex)(E,ue.slice(4*ge,4*(ge+1)))),Ce[ge]=R[_e]}return Ce},H=E.length-1,Z=[],te=0;case 60:if(!(te<G.length)){J.next=71;break}if(se=B(G[te]),pe=se.slice(),te===0)ie.writeFrame(se,this.width,this.height,{palette:E,delay:A,dispose:1});else{for(oe=0;oe<se.length;oe++)se[oe]===Z[oe]&&(se[oe]=H);ie.writeFrame(se,this.width,this.height,{delay:A,transparent:!0,transparentIndex:H,dispose:1})}return Z=pe,D||z.html("Rendered frame <b>"+te.toString()+"</b> out of "+F.toString()),J.next=68,new Promise(function(ue){return setTimeout(ue,0)});case 68:te++,J.next=60;break;case 71:ie.finish(),he=ie.bytesView(),he=new Blob([he],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),D||(z.html("Done. Downloading your gif!🌸"),0<k&&setTimeout(function(){return z.remove()},1e3*k)),a.default.prototype.downloadFile(he,C,"gif");case 80:case"end":return J.stop()}},x,this)});var v,_=function(){var x=this,C=arguments;return new Promise(function(M,S){var P=v.apply(x,C);function L(k){m(P,M,S,L,D,"next",k)}function D(k){m(P,M,S,L,D,"throw",k)}L(void 0)})};return function(x,C){return _.apply(this,arguments)}}(),a.default.prototype.image=function(v,_,x,C,U,W,G,z,K,k,I,A){a.default._validateParameters("image",arguments);var Y=v.width,F=v.height,N=(A=A||b.CENTER,I=I||b.CENTER,v.elt&&(Y=Y!==void 0?Y:v.elt.width,F=F!==void 0?F:v.elt.height),v.elt&&v.elt.videoWidth&&!v.canvas&&(Y=Y!==void 0?Y:v.elt.videoWidth,F=F!==void 0?F:v.elt.videoHeight),C||Y),U=U||F,W=W||0,G=G||0,z=f(z!==void 0?z:Y,Y),Y=f(K!==void 0?K:F,F),K=1;v.elt&&!v.canvas&&v.elt.style.width&&(K=v.elt.videoWidth&&!C?v.elt.videoWidth:v.elt.width,K/=parseInt(v.elt.style.width,10)),W*=K,G*=K,Y*=K,z*=K,F=y(k,I,A,(F=l.default.modeAdjust(_,x,N,U,this._renderer._imageMode)).x,F.y,F.w,F.h,W,G,z,Y),this._renderer.image(v,F.sx,F.sy,F.sw,F.sh,F.dx,F.dy,F.dw,F.dh)},a.default.prototype.tint=function(){for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];a.default._validateParameters("tint",_);var C=this.color.apply(this,_);this._renderer._tint=C.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(v){a.default._validateParameters("imageMode",arguments),v!==b.CORNER&&v!==b.CORNERS&&v!==b.CENTER||(this._renderer._imageMode=v)},t=a.default,d.default=t},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=a(t("../core/main")),c=a(t("./filters"));function a(b){return b&&b.__esModule?b:{default:b}}function l(b,g){for(var u=0;u<g.length;u++){var h=g[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}o.default.Image=function(){function b(h,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var g,u;return g=b,(u=[{key:"pixelDensity",value:function(h){return h!==void 0?(h<=0&&(o.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(y){var p,m=this.gifProperties,y=y._lastRealFrameTime||window.performance.now();m.lastChangeTime===0&&(m.lastChangeTime=y),m.playing&&(m.timeDisplayed=y-m.lastChangeTime,p=m.frames[m.displayIndex].delay,m.timeDisplayed>=p&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=y,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(y=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[y].image,0,0),m.displayIndex=y,this.setModified(!0))))}},{key:"_setProperty",value:function(h,p){this[h]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,p,m,y){o.default.Renderer2D.prototype.updatePixels.call(this,h,p,m,y),this.setModified(!0)}},{key:"get",value:function(h,p,m,y){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return o.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(h,p,m){o.default.Renderer2D.prototype.set.call(this,h,p,m),this.setModified(!0)}},{key:"resize",value:function(h,p){h===0&&p===0?(h=this.canvas.width,p=this.canvas.height):h===0?h=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=h,m.height=p,this.gifProperties)for(var y=this.gifProperties,f=0;f<y.numFrames;f++){for(var v=this.drawingContext.createImageData(h,p),_=(P=P=S=M=C=void 0,y.frames[f].image),x=v,C=0,M=0;M<x.height;M++)for(var S=0;S<x.width;S++){var P=Math.floor(S*_.width/x.width),P=4*(Math.floor(M*_.height/x.height)*_.width+P);x.data[C++]=_.data[P++],x.data[C++]=_.data[P++],x.data[C++]=_.data[P++],x.data[C++]=_.data[+P]}y.frames[f].image=v}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];o.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(h){var p=this.drawingContext.globalCompositeOperation,m=this._pixelDensity,y=1,f=[h=h===void 0?this:h,0,0,(y=h instanceof o.default.Renderer?h._pInst._pixelDensity:y)*h.width,y*h.height,0,0,m*this.width,m*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,f),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,m*this.width,m*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,f);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(h,p){c.default.apply(this.canvas,c.default[h],p),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,p){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,h):o.default.prototype.saveCanvas(this.canvas,h,p)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var p;this.gifProperties&&(h<(p=this.gifProperties).numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=h;else{var y=!0,p=!1,f=void 0;try{for(var v,_=m.frames[Symbol.iterator]();!(y=(v=_.next()).done);y=!0)v.value.delay=h}catch(C){p=!0,f=C}finally{try{y||_.return==null||_.return()}finally{if(p)throw f}}}}}}])&&l(g.prototype,u),b}(),t=o.default.Image,d.default=t},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(t,i,d){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=a(t("../core/main")),c=a(t("./filters"));function a(l){return l&&l.__esModule?l:{default:l}}t("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var l,b=arguments.length,g=new Array(b),u=0;u<b;u++)g[u]=arguments[u];o.default._validateParameters("blend",g),this._renderer?(l=this._renderer).blend.apply(l,g):o.default.Renderer2D.prototype.blend.apply(this,g)},o.default.prototype.copy=function(){for(var l,b,g,u,h,p,m,y,f,v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];if(o.default._validateParameters("copy",_),_.length===9)l=_[0],b=_[1],g=_[2],u=_[3],h=_[4],p=_[5],m=_[6],y=_[7],f=_[8];else{if(_.length!==8)throw new Error("Signature not supported");l=this,b=_[0],g=_[1],u=_[2],h=_[3],p=_[4],m=_[5],y=_[6],f=_[7]}o.default.prototype._copyHelper(this,l,b,g,u,h,p,m,y,f)},o.default.prototype._copyHelper=function(l,b,g,u,h,p,m,y,f,v){var _=b.canvas.width/b.width,x=0,C=0;b._renderer&&b._renderer.isP3D&&(x=b.width/2,C=b.height/2),l._renderer&&l._renderer.isP3D?(l.push(),l.resetMatrix(),l.noLights(),l.blendMode(l.BLEND),l.imageMode(l.CORNER),o.default.RendererGL.prototype.image.call(l._renderer,b,g+x,u+C,h,p,m,y,f,v),l.pop()):l.drawingContext.drawImage(b.canvas,_*(g+x),_*(u+C),_*h,_*p,m,y,f,v)},o.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},o.default.prototype.filter=function(){for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];o.default._validateParameters("filter",b);var m=(function(){var y,f={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof o.default.Shader?f.shader=arguments.length<=0?void 0:arguments[0]:(f.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(f.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(f.useWebGL=!1)),f}).apply(void 0,b),u=m.shader,h=m.operation,p=m.value,m=m.useWebGL;this._renderer.isP3D&&u?o.default.RendererGL.prototype.filter.call(this._renderer,u):m||this._renderer.isP3D?(!m&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?o.default.RendererGL.prototype.filter.call(this._renderer,h,p):((u=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),u.filter.apply(u,b),this.copy(u._renderer,0,0,this.width,this.height,0,0,this.width,this.height),u.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[h],p):c.default.apply(this.elt,c.default[h],p)},o.default.prototype.get=function(l,b,g,u){var h;return o.default._validateParameters("get",arguments),(h=this._renderer).get.apply(h,arguments)},o.default.prototype.loadPixels=function(){for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];o.default._validateParameters("loadPixels",b),this._renderer.loadPixels()},o.default.prototype.set=function(l,b,g){this._renderer.set(l,b,g)},o.default.prototype.updatePixels=function(l,b,g,u){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(l,b,g,u)},t=o.default,d.default=t},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=b(t("../core/main")),a=(t("whatwg-fetch"),t("es6-promise/auto"),b(t("fetch-jsonp"))),l=b(t("file-saver"));function b(p){return p&&p.__esModule?p:{default:p}}function g(p){return(g=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}function u(p){return p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(p,m){m&&m!==!0&&m!=="true"||(m="");var y="";return(p=p||"untitled")&&p.includes(".")&&(y=p.split(".").pop()),m&&y!==m&&(y=m,p="".concat(p,".").concat(y)),[p,y]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];c.default._validateParameters("loadJSON",m);for(var f,v,_,x=m[0],C={},M="json",S=1;S<m.length;S++){var P=m[S];typeof P=="string"?P!=="jsonp"&&P!=="json"||(M=P):typeof P=="function"?f?v=P:f=P:g(P)==="object"&&(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))&&(M="jsonp",_=P)}var L=this;return this.httpDo(x,"GET",_,M,function(D){for(var k in D)C[k]=D[k];f!==void 0&&f(D),L._decrementPreload()},function(D){if(c.default._friendlyFileLoadError(5,x),!v)throw D;v(D)}),C},c.default.prototype.loadStrings=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];c.default._validateParameters("loadStrings",m);for(var f,v,_=[],x=1;x<m.length;x++){var C=m[x];typeof C=="function"&&(f===void 0?f=C:v===void 0&&(v=C))}var M=this;return c.default.prototype.httpDo.call(this,m[0],"GET","text",function(S){for(var P=S.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),L=0,D=P.length;L<D;L+=32768)Array.prototype.push.apply(_,P.slice(L,Math.min(L+32768,D)));f!==void 0&&f(_),M._decrementPreload()},function(S){if(c.default._friendlyFileLoadError(3,S),!v)throw S;v(S)}),_},c.default.prototype.loadTable=function(p){var m,y,f,v=!1,_=p.substring(p.lastIndexOf(".")+1,p.length);_==="csv"?f=",":_==="ssv"?f=";":_==="tsv"&&(f="	");for(var x=1;x<arguments.length;x++)typeof arguments[x]=="function"?m===void 0?m=arguments[x]:y===void 0&&(y=arguments[x]):typeof arguments[x]=="string"&&(arguments[x]==="header"&&(v=!0),arguments[x]==="csv"?f=",":arguments[x]==="ssv"?f=";":arguments[x]==="tsv"&&(f="	"));var C=new c.default.Table,M=this;return this.httpDo(p,"GET","table",function(S){for(var P,L,D={},k=0,I=[],A=0,F=null,N=function(){D.currentState=k,D.token=""},U=function(){F.push(D.token),N()},W=function(){D.currentState=4,I.push(F),F=null};;){if((P=S[A++])==null){if(D.escaped)throw new Error("Unclosed quote in file.");if(F){U(),W();break}}if(F===null&&(D.escaped=!1,F=[],N()),D.currentState===k){if(P==='"'){D.escaped=!0,D.currentState=1;continue}D.currentState=1}if(D.currentState===1&&D.escaped)if(P==='"')S[A]==='"'?(D.token+='"',A++):(D.escaped=!1,D.currentState=2);else{if(P==="\r")continue;D.token+=P}else P==="\r"?(S[A]===`
`&&A++,U(),W()):P===`
`?(U(),W()):P===f?U():D.currentState===1&&(D.token+=P)}if(v)C.columns=I.shift();else for(var G=0;G<I[0].length;G++)C.columns[G]="null";for(var z=0;z<I.length;z++)(I[z].length!==1||I[z][0]!=="undefined"&&I[z][0]!=="")&&((L=new c.default.TableRow).arr=I[z],L.obj=function(Y,K){if((K=K||[])===void 0)for(var ie=0;ie<Y.length;ie++)K[ie.toString()]=ie;return Object.fromEntries(K.map(function(E,R){return[E,Y[R]]}))}(I[z],C.columns),C.addRow(L));typeof m=="function"&&m(C),M._decrementPreload()},function(S){c.default._friendlyFileLoadError(2,p),y?y(S):console.error(S)}),C},c.default.prototype.loadXML=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];for(var f,v,_=new c.default.XML,x=1;x<m.length;x++){var C=m[x];typeof C=="function"&&(f===void 0?f=C:v===void 0&&(v=C))}var M=this;return this.httpDo(m[0],"GET","xml",function(S){for(var P in S)_[P]=S[P];f!==void 0&&f(_),M._decrementPreload()},function(S){if(c.default._friendlyFileLoadError(1,S),!v)throw S;v(S)}),_},c.default.prototype.loadBytes=function(p,m,y){var f={},v=this;return this.httpDo(p,"GET","arrayBuffer",function(_){f.bytes=new Uint8Array(_),typeof m=="function"&&m(f),v._decrementPreload()},function(_){if(c.default._friendlyFileLoadError(6,p),!y)throw _;y(_)}),f},c.default.prototype.httpGet=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return c.default._validateParameters("httpGet",m),m.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,m)},c.default.prototype.httpPost=function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return c.default._validateParameters("httpPost",m),m.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,m)},c.default.prototype.httpDo=function(){for(var p,m,y,f={},v=0,_="text/plain",x=arguments.length-1;0<x&&typeof(x<0||arguments.length<=x?void 0:arguments[x])=="function";x--)v++;var C=arguments.length-v,M=arguments.length<=0?void 0:arguments[0];if(C==2&&typeof M=="string"&&g(arguments.length<=1?void 0:arguments[1])==="object")I=new Request(M,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var S,P="GET",L=1;L<arguments.length;L++){var D=L<0||arguments.length<=L?void 0:arguments[L];if(typeof D=="string")D==="GET"||D==="POST"||D==="PUT"||D==="DELETE"?P=D:D==="json"||D==="jsonp"||D==="binary"||D==="arrayBuffer"||D==="xml"||D==="text"||D==="table"?p=D:S=D;else if(typeof D=="number")S=D.toString();else if(g(D)==="object")if(D.hasOwnProperty("jsonpCallback")||D.hasOwnProperty("jsonpCallbackFunction"))for(var k in D)f[k]=D[k];else _=D instanceof c.default.XML?(S=D.serialize(),"application/xml"):(S=JSON.stringify(D),"application/json");else typeof D=="function"&&(m?y=D:m=D)}var C=P==="GET"?new Headers:new Headers({"Content-Type":_}),I=new Request(M,{method:P,mode:"cors",body:S,headers:C})}return(C=(C=(p=p||(M.includes("json")?"json":M.includes("xml")?"xml":"text"))==="jsonp"?(0,a.default)(M,f):fetch(I)).then(function(A){if(!A.ok)throw(F=new Error(A.body)).status=A.status,F.ok=!1,F;var F=0;switch((F=p!=="jsonp"?A.headers.get("content-length"):F)&&64e6<F&&c.default._friendlyFileLoadError(7,M),p){case"json":case"jsonp":return A.json();case"binary":return A.blob();case"arrayBuffer":return A.arrayBuffer();case"xml":return A.text().then(function(N){return N=new DOMParser().parseFromString(N,"text/xml"),new c.default.XML(N.documentElement)});default:return A.text()}})).then(m||function(){}),C.catch(y||console.error),C},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(p,m){var y,f;for(f in c.default.prototype._pWriters)if(c.default.prototype._pWriters[f].name===p)return y=new c.default.PrintWriter(p+this.millis(),m),c.default.prototype._pWriters.push(y),y;return y=new c.default.PrintWriter(p,m),c.default.prototype._pWriters.push(y),y},c.default.PrintWriter=function(p,m){var y=this;this.name=p,this.content="",this.write=function(f){this.content+=f},this.print=function(f){this.content+="".concat(f,`
`)},this.clear=function(){this.content=""},this.close=function(){var f,v=[];for(f in v.push(this.content),c.default.prototype.writeFile(v,p,m),c.default.prototype._pWriters)c.default.prototype._pWriters[f].name===this.name&&c.default.prototype._pWriters.splice(f,1);y.clear(),y={}}},c.default.prototype.save=function(p,m,y){var f=arguments,v=(this._curElement||this).elt;if(f.length===0)c.default.prototype.saveCanvas(v);else if(f[0]instanceof c.default.Renderer||f[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(f[0].elt,f[1],f[2]);else if(f.length===1&&typeof f[0]=="string")c.default.prototype.saveCanvas(v,f[0]);else switch(h(f[1],f[2])[1]){case"json":return void c.default.prototype.saveJSON(f[0],f[1],f[2]);case"txt":return void c.default.prototype.saveStrings(f[0],f[1],f[2]);default:f[0]instanceof Array?c.default.prototype.saveStrings(f[0],f[1],f[2]):f[0]instanceof c.default.Table?c.default.prototype.saveTable(f[0],f[1],f[2]):f[0]instanceof c.default.Image?c.default.prototype.saveCanvas(f[0].canvas,f[1]):f[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(f[0],f[1],f[2],f[3])}},c.default.prototype.saveJSON=function(p,m,y){c.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(p):JSON.stringify(p,void 0,2),this.saveStrings(y.split(`
`),m,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(p,m,y,f){c.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(m,y||"txt"),_=0;_<p.length;_++)f?v.write(p[_]+`\r
`):v.write(p[_]+`
`);v.close(),v.clear()},c.default.prototype.saveTable=function(p,m,y){c.default._validateParameters("saveTable",arguments),f=y===void 0?m.substring(m.lastIndexOf(".")+1,m.length):y;var f,v=this.createWriter(m,f),_=p.columns,x=f==="tsv"?"	":",";if(f!=="html"){if(_[0]!=="0"){for(var C=0;C<_.length;C++)C<_.length-1?v.write(_[C]+x):v.write(_[C]);v.write(`
`)}for(var M=0;M<p.rows.length;M++){for(var S=void 0,S=0;S<p.rows[M].arr.length;S++)S<p.rows[M].arr.length-1?f==="csv"&&String(p.rows[M].arr[S]).includes(",")?v.write('"'+p.rows[M].arr[S]+'"'+x):v.write(p.rows[M].arr[S]+x):f==="csv"&&String(p.rows[M].arr[S]).includes(",")?v.write('"'+p.rows[M].arr[S]+'"'):v.write(p.rows[M].arr[S]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),_[0]!=="0"){v.print("    <tr>");for(var P=0;P<_.length;P++){var L=u(_[P]);v.print("      <td>".concat(L)),v.print("      </td>")}v.print("    </tr>")}for(var D=0;D<p.rows.length;D++){v.print("    <tr>");for(var k=0;k<p.columns.length;k++){var I=u(p.rows[D].getString(k));v.print("      <td>".concat(I)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},c.default.prototype.writeFile=function(v,m,y){var f="application/octet-stream",v=(c.default.prototype._isSafari()&&(f="text/plain"),new Blob(v,{type:f}));c.default.prototype.downloadFile(v,m,y)},c.default.prototype.downloadFile=function(p,v,_){var f,v=h(v,_),_=v[0];p instanceof Blob?l.default.saveAs(p,_):((f=document.createElement("a")).href=p,f.download=_,f.onclick=function(x){document.body.removeChild(x.target),x.stopPropagation()},f.style.display="none",document.body.appendChild(f),c.default.prototype._isSafari()&&(p=(p=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(v[1],'"'),alert(p)),f.click())},c.default.prototype._checkFileExtension=h,c.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=c.default,d.default=t},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(a,l){for(var b=0;b<l.length;b++){var g=l[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}o.default.Table=function(){function a(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],u=this,h=a;if(!(u instanceof h))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=g}var l,b;return l=a,(b=[{key:"addRow",value:function(g){if(g=g||new o.default.TableRow,g.arr===void 0||g.obj===void 0)throw new Error("invalid TableRow: ".concat(g));return(g.table=this).rows.push(g),g}},{key:"removeRow",value:function(g){this.rows[g].table=null,g=this.rows.splice(g+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(g)}},{key:"getRow",value:function(g){return this.rows[g]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(g,u){if(typeof u=="string"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[u]===g)return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[u]===g)return this.rows[p];return null}},{key:"findRows",value:function(g,u){var h=[];if(typeof u=="string")for(var p=0;p<this.rows.length;p++)this.rows[p].obj[u]===g&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[u]===g&&h.push(this.rows[m]);return h}},{key:"matchRow",value:function(g,u){if(typeof u=="number"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[u].match(g))return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[u].match(g))return this.rows[p];return null}},{key:"matchRows",value:function(g,u){var h=[];if(typeof u=="number")for(var p=0;p<this.rows.length;p++)this.rows[p].arr[u].match(g)&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[u].match(g)&&h.push(this.rows[m]);return h}},{key:"getColumn",value:function(g){var u=[];if(typeof g=="string")for(var h=0;h<this.rows.length;h++)u.push(this.rows[h].obj[g]);else for(var p=0;p<this.rows.length;p++)u.push(this.rows[p].arr[g]);return u}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(g){this.columns.push(g||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(g,u){for(var h=[],p=0;p<g.length;p++)h.push(g.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(h.join("|"),"g");if(u===void 0)for(var y=0;y<this.columns.length;y++)for(var f=0;f<this.rows.length;f++){var v=(v=this.rows[f].arr[y]).replace(m,"");this.rows[f].arr[y]=v,this.rows[f].obj[this.columns[y]]=v}else if(typeof u=="string")for(var _=0;_<this.rows.length;_++){var x=(x=this.rows[_].obj[u]).replace(m,""),C=(this.rows[_].obj[u]=x,this.columns.indexOf(u));this.rows[_].arr[C]=x}else for(var M=0;M<this.rows.length;M++){var S=(S=this.rows[M].arr[u]).replace(m,"");this.rows[M].arr[u]=S,this.rows[M].obj[this.columns[u]]=S}}},{key:"trim",value:function(g){var u=new RegExp(" ","g");if(g===void 0)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[h]).replace(u,"");this.rows[p].arr[h]=m,this.rows[p].obj[this.columns[h]]=m}else if(typeof g=="string")for(var y=0;y<this.rows.length;y++){var f=(f=this.rows[y].obj[g]).replace(u,""),v=(this.rows[y].obj[g]=f,this.columns.indexOf(g));this.rows[y].arr[v]=f}else for(var _=0;_<this.rows.length;_++){var x=(x=this.rows[_].arr[g]).replace(u,"");this.rows[_].arr[g]=x,this.rows[_].obj[this.columns[g]]=x}}},{key:"removeColumn",value:function(p){typeof p=="string"?h=this.columns.indexOf(u=p):u=this.columns[h=p];var u,h,p=this.columns.splice(h+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var y=this.rows[m].arr,f=y.splice(h+1,y.length);y.pop(),this.rows[m].arr=y.concat(f),delete this.rows[m].obj[u]}}},{key:"set",value:function(g,u,h){this.rows[g].set(u,h)}},{key:"setNum",value:function(g,u,h){this.rows[g].setNum(u,h)}},{key:"setString",value:function(g,u,h){this.rows[g].setString(u,h)}},{key:"get",value:function(g,u){return this.rows[g].get(u)}},{key:"getNum",value:function(g,u){return this.rows[g].getNum(u)}},{key:"getString",value:function(g,u){return this.rows[g].getString(u)}},{key:"getObject",value:function(g){for(var u,h={},p=0;p<this.rows.length;p++)if(u=this.rows[p].obj,typeof g=="string"){if(!(0<=this.columns.indexOf(g)))throw new Error('This table has no column named "'.concat(g,'"'));h[u[g]]=u}else h[p]=this.rows[p].obj;return h}},{key:"getArray",value:function(){for(var g=[],u=0;u<this.rows.length;u++)g.push(this.rows[u].arr);return g}}])&&c(l.prototype,b),a}(),t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(t,i,d){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}t.default.TableRow=function(){function c(b,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var u=[];b&&(u=b.split(g=g||",")),this.arr=u,this.obj=Object.fromEntries(u.entries()),this.table=null}var a,l;return a=c,(l=[{key:"set",value:function(b,g){if(typeof b=="string"){var u=this.table.columns.indexOf(b);if(!(0<=u))throw new Error('This table has no column named "'.concat(b,'"'));this.obj[b]=g,this.arr[u]=g}else{if(!(b<this.table.columns.length))throw new Error("Column #".concat(b," is out of the range of this table"));this.arr[b]=g,u=this.table.columns[b],this.obj[u]=g}}},{key:"setNum",value:function(b,g){g=parseFloat(g),this.set(b,g)}},{key:"setString",value:function(b,g){g=g.toString(),this.set(b,g)}},{key:"get",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b]}},{key:"getNum",value:function(b){var g=parseFloat(typeof b=="string"?this.obj[b]:this.arr[b]);if(g.toString()==="NaN")throw"Error: ".concat(this.obj[b]," is NaN (Not a Number)");return g}},{key:"getString",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b].toString()}}])&&o(a.prototype,l),c}(),t=t.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(l,b){for(var g=0;g<b.length;g++){var u=b[g];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function a(l){for(var b=[],g=0;g<l.length;g++)b.push(new o.default.XML(l[g]));return b}o.default.XML=function(){function l(u){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");u?this.DOM=u:(u=document.implementation.createDocument(null,"doc"),this.DOM=u.createElement("root"))}var b,g;return b=l,(g=[{key:"getParent",value:function(){return new o.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(u){var h=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(u);m.innerHTML=h;for(var y=0;y<p.length;y++)m.setAttribute(p[y].nodeName,p[y].nodeValue);this.DOM=m}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var u=[],h=0;h<this.DOM.childNodes.length;h++)u.push(this.DOM.childNodes[h].nodeName);return u}},{key:"getChildren",value:function(u){return a(u?this.DOM.getElementsByTagName(u):this.DOM.children)}},{key:"getChild",value:function(u){if(typeof u!="string")return new o.default.XML(this.DOM.children[u]);var h=!0,p=!1,m=void 0;try{for(var y,f=this.DOM.children[Symbol.iterator]();!(h=(y=f.next()).done);h=!0){var v=y.value;if(v.tagName===u)return new o.default.XML(v)}}catch(_){p=!0,m=_}finally{try{h||f.return==null||f.return()}finally{if(p)throw m}}}},{key:"addChild",value:function(u){u instanceof o.default.XML&&this.DOM.appendChild(u.DOM)}},{key:"removeChild",value:function(u){var h=-1;if(typeof u=="string"){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===u){h=p;break}}else h=u;h!==-1&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var u=[],h=!0,p=!1,m=void 0;try{for(var y,f=this.DOM.attributes[Symbol.iterator]();!(h=(y=f.next()).done);h=!0){var v=y.value;u.push(v.nodeName)}}catch(_){p=!0,m=_}finally{try{h||f.return==null||f.return()}finally{if(p)throw m}}return u}},{key:"hasAttribute",value:function(u){var h={},p=!0,m=!1,y=void 0;try{for(var f,v=this.DOM.attributes[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){var _=f.value;h[_.nodeName]=_.nodeValue}}catch(x){m=!0,y=x}finally{try{p||v.return==null||v.return()}finally{if(m)throw y}}return!!h[u]}},{key:"getNum",value:function(u,h){var p={},m=!0,y=!1,f=void 0;try{for(var v,_=this.DOM.attributes[Symbol.iterator]();!(m=(v=_.next()).done);m=!0){var x=v.value;p[x.nodeName]=x.nodeValue}}catch(C){y=!0,f=C}finally{try{m||_.return==null||_.return()}finally{if(y)throw f}}return Number(p[u])||h||0}},{key:"getString",value:function(u,h){var p={},m=!0,y=!1,f=void 0;try{for(var v,_=this.DOM.attributes[Symbol.iterator]();!(m=(v=_.next()).done);m=!0){var x=v.value;p[x.nodeName]=x.nodeValue}}catch(C){y=!0,f=C}finally{try{m||_.return==null||_.return()}finally{if(y)throw f}}return p[u]?String(p[u]):h||null}},{key:"setAttribute",value:function(u,h){this.DOM.setAttribute(u,h)}},{key:"getContent",value:function(u){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||u||null}},{key:"setContent",value:function(u){this.DOM.children.length||(this.DOM.textContent=u)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(b.prototype,g),l}(),t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(a){return function(l){if(Array.isArray(l)){for(var b=0,g=new Array(l.length);b<l.length;b++)g[b]=l[b];return g}}(a)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(a,l,b){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(a,b),l)},o.default.prototype.dist=function(){for(var a=arguments.length,l=new Array(a),b=0;b<a;b++)l[b]=arguments[b];return o.default._validateParameters("dist",l),l.length===4?Math.hypot(l[2]-l[0],l[3]-l[1]):l.length===6?Math.hypot(l[3]-l[0],l[4]-l[1],l[5]-l[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(a,l,b){return o.default._validateParameters("lerp",arguments),b*(l-a)+a},o.default.prototype.log=Math.log,o.default.prototype.mag=function(a,l){return o.default._validateParameters("mag",arguments),Math.hypot(a,l)},o.default.prototype.map=function(a,l,b,g,u,h){return o.default._validateParameters("map",arguments),a=(a-l)/(b-l)*(u-g)+g,h?g<u?this.constrain(a,g,u):this.constrain(a,u,g):a},o.default.prototype.max=function(){for(var a=function(u){return Math.max.apply(Math,c(u))},l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return Array.isArray(b[0])?a(b[0]):a(b)},o.default.prototype.min=function(){for(var a=function(u){return Math.min.apply(Math,c(u))},l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return Array.isArray(b[0])?a(b[0]):a(b)},o.default.prototype.norm=function(a,l,b){return o.default._validateParameters("norm",arguments),this.map(a,l,b,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(a,l){return l?(l=Math.pow(10,l),Math.round(a*l)/l):Math.round(a)},o.default.prototype.sq=function(a){return a*a},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(g){o.default._validateParameters("fract",arguments);var l,b=0,g=Number(g);return isNaN(g)||Math.abs(g)===1/0?g:(g<0&&(g=-g,b=1),String(g).includes(".")&&!String(g).includes("e")?(l=String(g),l=+("0"+l.slice(l.indexOf("."))),Math.abs(b-l)):g<1?Math.abs(b-g):0)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(l,b,g){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(u,h,p){var m=[null];return m.push.apply(m,h),h=new(Function.bind.apply(u,m)),p&&a(h,p.prototype),h}).apply(null,arguments)}function a(l,b){return(a=Object.setPrototypeOf||function(g,u){return g.__proto__=u,g})(l,b)}o.default.prototype.createVector=function(l,b,g){return this instanceof o.default?c(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(l,b,g)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(g,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,g=(g=g("../core/main"))&&g.__esModule?g:{default:g};function o(u){return .5*(1-Math.cos(u*Math.PI))}var c,a=4095,l=4,b=.5,g=(g.default.prototype.noise=function(u){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var m=0;m<4096;m++)c[m]=Math.random()}u<0&&(u=-u),h<0&&(h=-h),p<0&&(p=-p);for(var y,f,v=Math.floor(u),_=Math.floor(h),x=Math.floor(p),C=u-v,M=h-_,S=p-x,P=0,L=.5,D=0;D<l;D++){var k=v+(_<<4)+(x<<8),I=o(C),A=o(M),F=c[k&a];F+=I*(c[k+1&a]-F),y=c[k+16&a],F+=A*((y+=I*(c[k+16+1&a]-y))-F),y=c[(k+=256)&a],y+=I*(c[k+1&a]-y),f=c[k+16&a],y+=A*((f+=I*(c[k+16+1&a]-f))-y),P+=(F+=o(S)*(y-F))*L,L*=b,v<<=1,_<<=1,x<<=1,1<=(C*=2)&&(v++,C--),1<=(M*=2)&&(_++,M--),1<=(S*=2)&&(x++,S--)}return P},g.default.prototype.noiseDetail=function(u,h){0<u&&(l=u),0<h&&(b=h)},g.default.prototype.noiseSeed=function(u){m=4294967296;var h,p,m,y={setSeed:function(v){p=h=(v??Math.random()*m)>>>0},getSeed:function(){return h},rand:function(){return(p=(1664525*p+1013904223)%m)/m}};y.setSeed(u),c=new Array(4096);for(var f=0;f<4096;f++)c[f]=y.rand()},g.default);d.default=g},{"../core/main":280}],313:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(u=t("../core/main"))&&u.__esModule?u:{default:u},l=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=b();if(p&&p.has(h))return p.get(h);var m,y={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var v;Object.prototype.hasOwnProperty.call(h,m)&&((v=f?Object.getOwnPropertyDescriptor(h,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=h[m])}return y.default=h,p&&p.set(h,y),y}(t("../core/constants"));function b(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,b=function(){return h},h)}function g(h,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}a.default.Vector=function(){function h(){var x=this,f=h;if(!(x instanceof f))throw new TypeError("Cannot call a class as a function");var v,_,x=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],v=(arguments.length<=2?void 0:arguments[2])||0,_=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(v=(arguments.length<=0?void 0:arguments[0])||0,_=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=v,this.y=_,this.z=x}var p,m,y;return p=h,y=[{key:"fromAngle",value:function(f){var v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new a.default.Vector(v*Math.cos(f),v*Math.sin(f),0)}},{key:"fromAngles",value:function(S,C){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,x=Math.cos(C),C=Math.sin(C),M=Math.cos(S),S=Math.sin(S);return new a.default.Vector(_*S*C,-_*M,_*S*x)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*l.TWO_PI)}},{key:"random3D",value:function(){var f=Math.random()*l.TWO_PI,v=2*Math.random()-1,x=Math.sqrt(1-v*v),_=x*Math.cos(f),x=x*Math.sin(f);return new a.default.Vector(_,x,v)}},{key:"copy",value:function(f){return f.copy(f)}},{key:"add",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),M.add(C),M}},{key:"rem",value:function(f,v){if(f instanceof a.default.Vector&&v instanceof a.default.Vector)return(f=f.copy()).rem(v),f}},{key:"sub",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),M.sub(C),M}},{key:"mult",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),M.mult(C),M}},{key:"rotate",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return v.length===2?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),M.set(x)),M.rotate(C),M}},{key:"div",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return M?M.set(x):(M=x.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),M.div(C),M}},{key:"dot",value:function(f,v){return f.dot(v)}},{key:"cross",value:function(f,v){return f.cross(v)}},{key:"dist",value:function(f,v){return f.dist(v)}},{key:"lerp",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2],S=v[3];return S?S.set(x):(S=x.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),S.lerp(C,M),S}},{key:"slerp",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2],S=v[3];return S?S.set(x):(S=x.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),S.slerp(C,M),S}},{key:"mag",value:function(f){return f.mag()}},{key:"magSq",value:function(f){return f.magSq()}},{key:"normalize",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1];return v.length<2?C=x.copy():(C instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),C.set(x)),C.normalize()}},{key:"limit",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),M.set(x)),M.limit(C)}},{key:"setMag",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),M.set(x)),M.setMag(C)}},{key:"heading",value:function(f){return f.heading()}},{key:"angleBetween",value:function(f,v){return f.angleBetween(v)}},{key:"reflect",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];return v.length<3?M=x.copy():(M instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),M.set(x)),M.reflect(C)}},{key:"array",value:function(f){return f.array()}},{key:"equals",value:function(f,v){var _;return f instanceof a.default.Vector?_=f:Array.isArray(f)?_=new a.default.Vector().set(f):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),_.equals(v)}}],(m=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(f,v,_){return f instanceof a.default.Vector?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):Array.isArray(f)?(this.x=f[0]||0,this.y=f[1]||0,this.z=f[2]||0):(this.x=f||0,this.y=v||0,this.z=_||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(f,v,_){return f instanceof a.default.Vector?(this.x+=f.x||0,this.y+=f.y||0,this.z+=f.z||0):Array.isArray(f)?(this.x+=f[0]||0,this.y+=f[1]||0,this.z+=f[2]||0):(this.x+=f||0,this.y+=v||0,this.z+=_||0),this}},{key:"calculateRemainder2D",value:function(f,v){return f!==0&&(this.x=this.x%f),v!==0&&(this.y=this.y%v),this}},{key:"calculateRemainder3D",value:function(f,v,_){return f!==0&&(this.x=this.x%f),v!==0&&(this.y=this.y%v),_!==0&&(this.z=this.z%_),this}},{key:"rem",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x,C,M,S=v[0],P=v[1],L=v[2];if(S instanceof a.default.Vector){if([S.x,S.y,S.z].every(Number.isFinite))return x=parseFloat(S.x),C=parseFloat(S.y),M=parseFloat(S.z),this.calculateRemainder3D(x,C,M)}else if(Array.isArray(S)){if(S.every(Number.isFinite))return S.length===2?this.calculateRemainder2D(S[0],S[1]):S.length===3?this.calculateRemainder3D(S[0],S[1],S[2]):void 0}else if(v.length===1){if(Number.isFinite(S)&&S!==0)return this.x=this.x%S,this.y=this.y%S,this.z=this.z%S,this}else if(v.length===2){if(v.every(Number.isFinite))return this.calculateRemainder2D(S,P)}else if(v.length===3&&v.every(Number.isFinite))return this.calculateRemainder3D(S,P,L)}},{key:"sub",value:function(f,v,_){return f instanceof a.default.Vector?(this.x-=f.x||0,this.y-=f.y||0,this.z-=f.z||0):Array.isArray(f)?(this.x-=f[0]||0,this.y-=f[1]||0,this.z-=f[2]||0):(this.x-=f||0,this.y-=v||0,this.z-=_||0),this}},{key:"mult",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x,C=v[0],M=v[1],S=v[2];return C instanceof a.default.Vector?Number.isFinite(C.x)&&Number.isFinite(C.y)&&Number.isFinite(C.z)&&typeof C.x=="number"&&typeof C.y=="number"&&typeof C.z=="number"?(this.x*=C.x,this.y*=C.y,this.z*=C.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(C)?C.every(function(P){return Number.isFinite(P)})&&C.every(function(P){return typeof P=="number"})?C.length===1?(this.x*=C[0],this.y*=C[0],this.z*=C[0]):C.length===2?(this.x*=C[0],this.y*=C[1]):C.length===3&&(this.x*=C[0],this.y*=C[1],this.z*=C[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(x=v).every(function(P){return Number.isFinite(P)})&&x.every(function(P){return typeof P=="number"})?(v.length===1&&(this.x*=C,this.y*=C,this.z*=C),v.length===2&&(this.x*=C,this.y*=M),v.length===3&&(this.x*=C,this.y*=M,this.z*=S)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var x=v[0],C=v[1],M=v[2];if(x instanceof a.default.Vector)if(Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&typeof x.x=="number"&&typeof x.y=="number"&&typeof x.z=="number"){var S=x.z===0&&this.z===0;if(x.x===0||x.y===0||!S&&x.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=x.x,this.y/=x.y,S||(this.z/=x.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(x))if(x.every(Number.isFinite)&&x.every(function(P){return typeof P=="number"})){if(x.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1?(this.x/=x[0],this.y/=x[0],this.z/=x[0]):x.length===2?(this.x/=x[0],this.y/=x[1]):x.length===3&&(this.x/=x[0],this.y/=x[1],this.z/=x[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(v.every(Number.isFinite)&&v.every(function(P){return typeof P=="number"})){if(v.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;v.length===1&&(this.x/=x,this.y/=x,this.z/=x),v.length===2&&(this.x/=x,this.y/=C),v.length===3&&(this.x/=x,this.y/=C,this.z/=M)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var f=this.x,v=this.y,_=this.z;return f*f+v*v+_*_}},{key:"dot",value:function(f,v,_){return f instanceof a.default.Vector?this.dot(f.x,f.y,f.z):this.x*(f||0)+this.y*(v||0)+this.z*(_||0)}},{key:"cross",value:function(x){var v=this.y*x.z-this.z*x.y,_=this.z*x.x-this.x*x.z,x=this.x*x.y-this.y*x.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,v,_,x):new a.default.Vector(v,_,x)}},{key:"dist",value:function(f){return f.copy().sub(this).mag()}},{key:"normalize",value:function(){var f=this.mag();return f!==0&&this.mult(1/f),this}},{key:"limit",value:function(f){var v=this.magSq();return f*f<v&&this.div(Math.sqrt(v)).mult(f),this}},{key:"setMag",value:function(f){return this.normalize().mult(f)}},{key:"heading",value:function(){var f=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(f):f}},{key:"setHeading",value:function(f){this.isPInst&&(f=this._toRadians(f));var v=this.mag();return this.x=v*Math.cos(f),this.y=v*Math.sin(f),this}},{key:"rotate",value:function(v){var v=this.heading()+v,_=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*_,this.y=Math.sin(v)*_,this}},{key:"angleBetween",value:function(f){var v;return this.magSq()*f.magSq()==0?NaN:(v=this.cross(f),f=Math.atan2(v.mag(),this.dot(f))*Math.sign(v.z||1),this.isPInst?this._fromRadians(f):f)}},{key:"lerp",value:function(f,v,_,x){return f instanceof a.default.Vector?this.lerp(f.x,f.y,f.z,v):(this.x+=(f-this.x)*x||0,this.y+=(v-this.y)*x||0,this.z+=(_-this.z)*x||0,this)}},{key:"slerp",value:function(f,v){if(v!==0){if(v===1)return this.set(f);var _=this.mag(),x=f.mag();if(_*x==0)this.mult(1-v).add(f.x*v,f.y*v,f.z*v);else{var C=this.cross(f),M=C.mag(),S=Math.atan2(M,this.dot(f));if(0<M)C.x/=M,C.y/=M,C.z/=M;else{if(S<.5*Math.PI)return this.mult(1-v).add(f.x*v,f.y*v,f.z*v),this;this.z===0&&f.z===0?C.set(0,0,1):this.x!==0?C.set(this.y,-this.x,0).normalize():C.set(1,0,0)}M=C.cross(this),f=1-v+v*x/_,C=f*Math.cos(v*S),x=f*Math.sin(v*S),this.x=this.x*C+M.x*x,this.y=this.y*C+M.y*x,this.z=this.z*C+M.z*x}}return this}},{key:"reflect",value:function(f){return f.normalize(),this.sub(f.mult(2*this.dot(f)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(M,v,_){var x,C,M=M instanceof a.default.Vector?(x=M.x||0,C=M.y||0,M.z||0):Array.isArray(M)?(x=M[0]||0,C=M[1]||0,M[2]||0):(x=M||0,C=v||0,_||0);return this.x===x&&this.y===C&&this.z===M}}])&&g(p.prototype,m),y&&g(p,y),h}();var u=a.default.Vector;d.default=u},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(b,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(b=b("../core/main"))&&b.__esModule?b:{default:b},c="_lcg_random_state",a=4294967296,l=0,b=(o.default.prototype._lcg=function(g){return this[g]=(1664525*this[g]+1013904223)%a,this[g]/a},o.default.prototype._lcgSetSeed=function(g,u){this[g]=(u??Math.random()*a)>>>0},o.default.prototype.randomSeed=function(g){this._lcgSetSeed(c,g),this._gaussian_previous=!1},o.default.prototype.random=function(g,u){var h,p;return o.default._validateParameters("random",arguments),h=this[c]!=null?this._lcg(c):Math.random(),g===void 0?h:u===void 0?Array.isArray(g)?g[Math.floor(h*g.length)]:h*g:(u<g&&(p=g,g=u,u=p),h*(u-g)+g)},o.default.prototype.randomGaussian=function(g){var u,h,p,m,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)u=l,this._gaussian_previous=!1;else{for(;1<=(m=(h=this.random(2)-1)*h+(p=this.random(2)-1)*p););u=h*(m=Math.sqrt(-2*Math.log(m)/m)),l=p*m,this._gaussian_previous=!0}return u*y+(g||0)},o.default);d.default=b},{"../core/main":280}],315:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../core/main"))&&g.__esModule?g:{default:g},l=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.prototype._angleMode=l.RADIANS,a.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},a.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},a.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},a.default.prototype.atan2=function(u,h){return this._fromRadians(Math.atan2(u,h))},a.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},a.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},a.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},a.default.prototype.degrees=function(u){return u*l.RAD_TO_DEG},a.default.prototype.radians=function(u){return u*l.DEG_TO_RAD},a.default.prototype.angleMode=function(u){if(a.default._validateParameters("angleMode",arguments),u===void 0)return this._angleMode;u!==l.DEGREES&&u!==l.RADIANS||u!==this._angleMode&&(u===l.RADIANS?(this._setProperty("pRotationX",this.pRotationX*l.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*l.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*l.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*l.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*l.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*l.RAD_TO_DEG)),this._angleMode=u)},a.default.prototype._toRadians=function(u){return this._angleMode===l.DEGREES?u*l.DEG_TO_RAD:u},a.default.prototype._toDegrees=function(u){return this._angleMode===l.RADIANS?u*l.RAD_TO_DEG:u},a.default.prototype._fromRadians=function(u){return this._angleMode===l.DEGREES?u*l.RAD_TO_DEG:u},a.default.prototype._fromDegrees=function(u){return this._angleMode===l.RADIANS?u*l.DEG_TO_RAD:u};var g=a.default;d.default=g},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(t,i,d){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.textAlign=function(c,a){var l;return o.default._validateParameters("textAlign",arguments),(l=this._renderer).textAlign.apply(l,arguments)},o.default.prototype.textLeading=function(c){var a;return o.default._validateParameters("textLeading",arguments),(a=this._renderer).textLeading.apply(a,arguments)},o.default.prototype.textSize=function(c){var a;return o.default._validateParameters("textSize",arguments),(a=this._renderer).textSize.apply(a,arguments)},o.default.prototype.textStyle=function(c){var a;return o.default._validateParameters("textStyle",arguments),(a=this._renderer).textStyle.apply(a,arguments)},o.default.prototype.textWidth=function(){for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];if(a[0]+="",o.default._validateParameters("textWidth",a),a[0].length===0)return 0;for(var b=a[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),g=[],u=0;u<b.length;u++)g.push(this._renderer.textWidth(b[u]));return Math.max.apply(Math,g)},o.default.prototype.textAscent=function(){for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];return o.default._validateParameters("textAscent",a),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];return o.default._validateParameters("textDescent",a),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(c){return o.default._validateParameters("textWrap",[c]),this._renderer.textWrap(c)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},l=u(t("../core/constants")),b=u(t("opentype.js"));function g(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,g=function(){return p},p)}function u(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var m=g();if(m&&m.has(p))return m.get(p);var y,f,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&((f=_?Object.getOwnPropertyDescriptor(p,y):null)&&(f.get||f.set)?Object.defineProperty(v,y,f):v[y]=p[y]);return v.default=p,m&&m.set(p,v),v}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(p,m,y){a.default._validateParameters("loadFont",arguments);var f=new a.default.Font(this),v=this;return b.load(p,function(C,M){if(C)return a.default._friendlyFileLoadError(4,p),y!==void 0?y(C):void console.error(C,p);f.font=M,m!==void 0&&m(f),v._decrementPreload();var C=p.split("\\").pop().split("/").pop(),M=C.lastIndexOf("."),S=M<1?null:C.slice(M+1);["ttf","otf","woff","woff2"].includes(S)&&(S=C.slice(0,M!==-1?M:0),(C=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(p,`);
}
`))),document.head.appendChild(C))}),f},a.default.prototype.text=function(p,m,y,f,v){var _;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(_=this._renderer).text.apply(_,arguments):this},a.default.prototype.textFont=function(p,m){if(a.default._validateParameters("textFont",arguments),arguments.length){if(p)return this._renderer._setProperty("_textFont",p),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*l._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var h=a.default;d.default=h},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(t,i,d){function o(P){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(P)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(c=t("../core/main"))&&c.__esModule?c:{default:c},a=function(P){if(P&&P.__esModule)return P;if(P===null||b(P)!=="object"&&typeof P!="function")return{default:P};var L=l();if(L&&L.has(P))return L.get(P);var D,k={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in P){var A;Object.prototype.hasOwnProperty.call(P,D)&&((A=I?Object.getOwnPropertyDescriptor(P,D):null)&&(A.get||A.set)?Object.defineProperty(k,D,A):k[D]=P[D])}return k.default=P,L&&L.set(P,k),k}(t("../core/constants"));function l(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,l=function(){return P},P)}function b(P){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(L){return o(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":o(L)})(P)}function g(P,L){for(var D=0;D<L.length;D++){var k=L[D];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}function u(P,L){var D=P.length;return P[L<0?L%D+D:L%D]}function h(P,L,D,k){var I,A,F;return k?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),A=h.tmpPoint1,F=h.tmpPoint2,A.x=L.x-P.x,A.y=L.y-P.y,F.x=D.x-L.x,F.y=D.y-L.y,I=A.x*F.x+A.y*F.y,A=Math.sqrt(A.x*A.x+A.y*A.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(I/(A*F))<k):(L[0]-P[0])*(D[1]-P[1])-(D[0]-P[0])*(L[1]-P[1])==0}function p(R,H,B,Z,te,A,F,N,U){var W=1-U,z=Math.pow(W,3),Y=Math.pow(W,2),E=U*U,K=E*U,G=z*R+3*Y*U*B+3*W*U*U*te+K*F,z=z*H+3*Y*U*Z+3*W*U*U*A+K*N,Y=R+2*U*(B-R)+E*(te-2*B+R),K=H+2*U*(Z-H)+E*(A-2*Z+H),ie=B+2*U*(te-B)+E*(F-2*te+B),E=Z+2*U*(A-Z)+E*(N-2*A+Z),R=W*R+U*B,B=W*H+U*Z,H=W*te+U*F,Z=W*A+U*N,te=90-180*Math.atan2(Y-ie,K-E)/Math.PI;return(ie<Y||K<E)&&(te+=180),{x:G,y:z,m:{x:Y,y:K},n:{x:ie,y:E},start:{x:R,y:B},end:{x:H,y:Z},alpha:te}}function m(P,L,D,k,I,A,F,N,U){return U==null?M(P,L,D,k,I,A,F,N):p(P,L,D,k,I,A,F,N,function(W,G,z,Y,K,ie,E,R,B){if(!(B<0||M(W,G,z,Y,K,ie,E,R)<B)){var H,Z=.5,te=1-Z;for(H=M(W,G,z,Y,K,ie,E,R,te);.01<Math.abs(H-B);)H=M(W,G,z,Y,K,ie,E,R,te+=(H<B?1:-1)*(Z/=2));return te}}(P,L,D,k,I,A,F,N,U))}function y(P,L,D){for(var k,I,A,F,N,U=0,W=0,G=(P=function(z,Y){function K(ge,_e,Ee){var Ie,Te;if(!ge)return["C",_e.x,_e.y,_e.x,_e.y,_e.x,_e.y];switch(ge[0]in{T:1,Q:1}||(_e.qx=_e.qy=null),ge[0]){case"M":_e.X=ge[1],_e.Y=ge[2];break;case"A":ge=["C"].concat(v.apply(0,[_e.x,_e.y].concat(ge.slice(1))));break;case"S":Te=Ee==="C"||Ee==="S"?(Ie=2*_e.x-_e.bx,2*_e.y-_e.by):(Ie=_e.x,_e.y),ge=["C",Ie,Te].concat(ge.slice(1));break;case"T":Ee==="Q"||Ee==="T"?(_e.qx=2*_e.x-_e.qx,_e.qy=2*_e.y-_e.qy):(_e.qx=_e.x,_e.qy=_e.y),ge=["C"].concat(C(_e.x,_e.y,_e.qx,_e.qy,ge[1],ge[2]));break;case"Q":_e.qx=ge[1],_e.qy=ge[2],ge=["C"].concat(C(_e.x,_e.y,ge[1],ge[2],ge[3],ge[4]));break;case"L":ge=["C"].concat(x(_e.x,_e.y,ge[1],ge[2]));break;case"H":ge=["C"].concat(x(_e.x,_e.y,ge[1],_e.y));break;case"V":ge=["C"].concat(x(_e.x,_e.y,_e.x,ge[1]));break;case"Z":ge=["C"].concat(x(_e.x,_e.y,_e.X,_e.Y))}return ge}function ie(ge,_e){if(7<ge[_e].length){ge[_e].shift();for(var Ee=ge[_e];Ee.length;)se[_e]="A",H&&(pe[_e]="A"),ge.splice(_e++,0,["C"].concat(Ee.splice(0,6)));ge.splice(_e,1),R=Math.max(B.length,H&&H.length||0)}}function E(ge,_e,Ee,Ie,Te){ge&&_e&&ge[Te][0]==="M"&&_e[Te][0]!=="M"&&(_e.splice(Te,0,["M",Ie.x,Ie.y]),Ee.bx=0,Ee.by=0,Ee.x=ge[Te][1],Ee.y=ge[Te][2],R=Math.max(B.length,H&&H.length||0))}var R,B=f(z),H=Y&&f(Y),Z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},se=[],pe=[],oe="",he="";R=Math.max(B.length,H&&H.length||0);for(var de=0;de<R;de++){(oe=B[de]?B[de][0]:oe)!=="C"&&(se[de]=oe,de&&(he=se[de-1])),B[de]=K(B[de],Z,he),se[de]!=="A"&&oe==="C"&&(se[de]="C"),ie(B,de),H&&((oe=H[de]?H[de][0]:oe)!=="C"&&(pe[de]=oe,de&&(he=pe[de-1])),H[de]=K(H[de],te,he),pe[de]!=="A"&&oe==="C"&&(pe[de]="C"),ie(H,de)),E(B,H,Z,te,de),E(H,B,te,Z,de);var J=B[de],ue=H&&H[de],ye=J.length,Ce=H&&ue.length;Z.x=J[ye-2],Z.y=J[ye-1],Z.bx=parseFloat(J[ye-4])||Z.x,Z.by=parseFloat(J[ye-3])||Z.y,te.bx=H&&(parseFloat(ue[Ce-4])||te.x),te.by=H&&(parseFloat(ue[Ce-3])||te.y),te.x=H&&ue[Ce-2],te.y=H&&ue[Ce-1]}return H?[B,H]:B}(P)).length;W<G;W++){if((A=P[W])[0]==="M")k=+A[1],I=+A[2];else{if(L<U+(F=m(k,I,A[1],A[2],A[3],A[4],A[5],A[6]))&&!D)return{x:(N=m(k,I,A[1],A[2],A[3],A[4],A[5],A[6],L-U)).x,y:N.y,alpha:N.alpha};U+=F,k=+A[5],I=+A[6]}A.shift()}return N=(N=D?U:p(k,I,A[0],A[1],A[2],A[3],A[4],A[5],1)).alpha?{x:N.x,y:N.y,alpha:N.alpha}:N}function f(P){var L=[],D=0,k=0,I=0,A=0,F=0;if(P){P[0][0]==="M"&&(I=D=+P[0][1],A=k=+P[0][2],F++,L[0]=["M",D,k]);for(var N,U,W=P.length===3&&P[0][0]==="M"&&P[1][0].toUpperCase()==="R"&&P[2][0].toUpperCase()==="Z",G=F,z=P.length;G<z;G++){if(L.push(N=[]),(U=P[G])[0]!==U[0].toUpperCase())switch(N[0]=U[0].toUpperCase(),N[0]){case"A":N[1]=U[1],N[2]=U[2],N[3]=U[3],N[4]=U[4],N[5]=U[5],N[6]=+(U[6]+D),N[7]=+(U[7]+k);break;case"V":N[1]=+U[1]+k;break;case"H":N[1]=+U[1]+D;break;case"R":for(var Y,K=2,ie=(Y=[D,k].concat(U.slice(1))).length;K<ie;K++)Y[K]=+Y[K]+D,Y[++K]=+Y[K]+k;L.pop(),L=L.concat(_(Y,W));break;case"M":I=+U[1]+D,A=+U[2]+k;break;default:for(var E=1,R=U.length;E<R;E++)N[E]=+U[E]+(E%2?D:k)}else if(U[0]==="R")Y=[D,k].concat(U.slice(1)),L.pop(),L=L.concat(_(Y,W)),N=["R"].concat(U.slice(-2));else for(var B=0,H=U.length;B<H;B++)N[B]=U[B];switch(N[0]){case"Z":D=I,k=A;break;case"H":D=N[1];break;case"V":k=N[1];break;case"M":I=N[N.length-2],A=N[N.length-1];break;default:D=N[N.length-2],k=N[N.length-1]}}}return L}function v(P,L,D,k,H,se,Z,N,U,W){function G(Ce,ge,_e){return{x:Ce*Math.cos(_e)-ge*Math.sin(_e),y:Ce*Math.sin(_e)+ge*Math.cos(_e)}}var z,R=Math.PI,B=120*R/180,Y=R/180*(+H||0),K=[],ie=(W?(de=W[0],z=W[1],oe=W[2],he=W[3]):(P=(te=G(P,L,-Y)).x,L=te.y,1<(ie=(E=(P-(N=(te=G(N,U,-Y)).x))/2)*E/(D*D)+(te=(L-(U=te.y))/2)*te/(k*k))&&(D*=ie=Math.sqrt(ie),k*=ie),ie=D*D,pe=k*k,oe=(se=(se===Z?-1:1)*Math.sqrt(Math.abs((ie*pe-ie*te*te-pe*E*E)/(ie*te*te+pe*E*E))))*D*te/k+(P+N)/2,he=se*-k*E/D+(L+U)/2,de=Math.asin(((L-he)/k).toFixed(9)),z=Math.asin(((U-he)/k).toFixed(9)),(de=P<oe?R-de:de)<0&&(de=2*R+de),(z=N<oe?R-z:z)<0&&(z=2*R+z),Z&&z<de&&(de-=2*R),!Z&&de<z&&(z-=2*R)),z-de),E=(Math.abs(ie)>B&&(pe=z,te=N,se=U,z=de+B*(Z&&de<z?1:-1),K=v(N=oe+D*Math.cos(z),U=he+k*Math.sin(z),D,k,H,0,Z,te,se,[z,pe,oe,he])),ie=z-de,Math.cos(de)),R=Math.sin(de),B=Math.cos(z),H=Math.sin(z),Z=Math.tan(ie/4),te=4/3*D*Z,se=4/3*k*Z,pe=[P,L],oe=[P+te*R,L-se*E],he=[N+te*H,U-se*B],de=[N,U];if(oe[0]=2*pe[0]-oe[0],oe[1]=2*pe[1]-oe[1],W)return[oe,he,de].concat(K);for(var J=[],ue=0,ye=(K=[oe,he,de].concat(K).join().split(",")).length;ue<ye;ue++)J[ue]=ue%2?G(K[ue-1],K[ue],Y).y:G(K[ue],K[ue+1],Y).x;return J}function _(P,L){for(var D=[],k=0,I=P.length;k<I-2*!L;k+=2){var A=[{x:+P[k-2],y:+P[k-1]},{x:+P[k],y:+P[k+1]},{x:+P[k+2],y:+P[k+3]},{x:+P[k+4],y:+P[k+5]}];L?k?I-4===k?A[3]={x:+P[0],y:+P[1]}:I-2===k&&(A[2]={x:+P[0],y:+P[1]},A[3]={x:+P[2],y:+P[3]}):A[0]={x:+P[I-2],y:+P[I-1]}:I-4===k?A[3]=A[2]:k||(A[0]={x:+P[k],y:+P[k+1]}),D.push(["C",(-A[0].x+6*A[1].x+A[2].x)/6,(-A[0].y+6*A[1].y+A[2].y)/6,(A[1].x+6*A[2].x-A[3].x)/6,(A[1].y+6*A[2].y-A[3].y)/6,A[2].x,A[2].y])}return D}function x(P,L,D,k){return[P,L,D,k,D,k]}function C(P,L,D,k,I,A){return[1/3*P+2/3*D,1/3*L+2/3*k,1/3*I+2/3*D,1/3*A+2/3*k,I,A]}function M(P,L,D,k,I,A,F,N,U){for(var W=(U=1<(U=U??1)?1:U<0?0:U)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],z=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],K=0;K<12;K++){var E=W*G[K]+W,ie=S(E,P,D,I,F),E=S(E,L,k,A,N);z+=Y[K]*Math.sqrt(ie*ie+E*E)}return W*z}function S(P,L,D,k,I){return P*(P*(-3*L+9*D-9*k+3*I)+6*L-12*D+6*k)-3*L+3*D}c.default.Font=function(){function P(k){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");this.parent=k,this.cache={},this.font=void 0}var L,D;return L=P,(D=[{key:"textBounds",value:function(k){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,W=3<arguments.length?arguments[3]:void 0,F=4<arguments.length?arguments[4]:void 0,N=F&&F.renderer&&F.renderer._pInst||this.parent,U=N._renderer.drawingContext,W=(U.textAlign||a.LEFT,U.textBaseline||a.BASELINE,W||N._renderer._textSize);if(!te){for(var G=[],z=[],Y=[],K=(Y[0]=[],[]),ie=this._scale(W),E=N._renderer.textLeading(),R=0,B=(this.font.forEachGlyph(k,I,A,W,F,function(oe,he,de,J){var ue=oe.getMetrics();oe.index===0?Y[R+=1]=[]:(Y[R].push(he+ue.xMin*ie),Y[R].push(he+ue.xMax*ie),K.push(de+R*E+-ue.yMin*ie),K.push(de+R*E+-ue.yMax*ie))}),0<Y[R].length&&(G[R]=Math.min.apply(null,Y[R]),z[R]=Math.max.apply(null,Y[R])),0),H=0;H<=R;H++){G[H]=Math.min.apply(null,Y[H]),z[H]=Math.max.apply(null,Y[H]);var Z=z[H]-G[H];B<Z&&(B=Z)}var U=Math.min.apply(null,G),te={x:U,y:A=Math.min.apply(null,K),h:Math.max.apply(null,K)-A,w:B,advance:U-I},W=this._handleAlignment(N._renderer,k,te.x,te.y,te.w+te.advance);te.x=W.x,te.y=W.y}return te}},{key:"textToPoints",value:function(k,I,A,F,N){var U=I,W=[],G=k.split(/\r?\n|\r|\n/g);F=F||this.parent._renderer._textSize;for(var z,Y,K,ie=0;ie<G.length;ie++){var E=0;I=U;for(var R=(R=G[ie]).replace("	","  "),B=this._getGlyphs(R),H=0;H<B.length;H++){if(Y=R,!((K=B)[z=H].name&&K[z].name==="space"||Y.length===K.length&&Y[z]===" "))for(var Z=function(oe){for(var he,de=[],J=0;J<oe.length;J++)oe[J].type==="M"&&(he&&de.push(he),he=[]),he.push(function(ue){var ye=[ue.type];return ue.type==="M"||ue.type==="L"?ye.push(ue.x,ue.y):ue.type==="C"?ye.push(ue.x1,ue.y1,ue.x2,ue.y2,ue.x,ue.y):ue.type==="Q"&&ye.push(ue.x1,ue.y1,ue.x,ue.y),ye}(oe[J]));return de.push(he),de}(B[H].getPath(I,A,F).commands),te=0;te<Z.length;te++)for(var se=function(oe,he){for(var he=function(ge,_e){if(b(ge)!=="object")ge=_e;else for(var Ee in _e)ge[Ee]===void 0&&(ge[Ee]=_e[Ee]);return ge}(he,{sampleFactor:.1,simplifyThreshold:0}),de=y(oe,0,1),J=de/(de*he.sampleFactor),ue=[],ye=0;ye<de;ye+=J)ue.push(y(oe,ye));return he.simplifyThreshold&&function(Ce){for(var ge=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,_e=0,Ee=Ce.length-1;3<Ce.length&&0<=Ee;--Ee)h(u(Ce,Ee-1),u(Ce,Ee),u(Ce,Ee+1),ge)&&(Ce.splice(Ee%Ce.length,1),_e++)}(ue,he.simplifyThreshold),ue}(Z[te],N),pe=0;pe<se.length;pe++)se[pe].x+=E,W.push(se[pe]);E+=B[H].advanceWidth*this._scale(F)}A+=this.parent._renderer._textLeading}return W}},{key:"_getGlyphs",value:function(k){return this.font.stringToGlyphs(k)}},{key:"_getPath",value:function(k,U,A,F){var N=(F&&F.renderer&&F.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(N,k,U,A);return this.font.getPath(k,U.x,U.y,N._textSize,F)}},{key:"_getPathData",value:function(k,I,A,F){var N=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,I,A,F):b(I)==="object"&&(F=I),F&&typeof F.decimals=="number"&&(N=F.decimals),k.toPathData(N)}},{key:"_getSVG",value:function(k,I,A,F){var N=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,I,A,F):b(I)==="object"&&(F=I),F&&(typeof F.decimals=="number"&&(N=F.decimals),typeof F.strokeWidth=="number"&&(k.strokeWidth=F.strokeWidth),F.fill!==void 0&&(k.fill=F.fill),F.stroke!==void 0&&(k.stroke=F.stroke)),k.toSVG(N)}},{key:"_renderPath",value:function(W,z,Y,F){var N=F&&F.renderer||this.parent._renderer,U=N.drawingContext,W=(b(W)==="object"&&W.commands?W:this._getPath(W,z,Y,F)).commands,G=(U.beginPath(),!0),z=!1,Y=void 0;try{for(var K,ie=W[Symbol.iterator]();!(G=(K=ie.next()).done);G=!0){var E=K.value;E.type==="M"?U.moveTo(E.x,E.y):E.type==="L"?U.lineTo(E.x,E.y):E.type==="C"?U.bezierCurveTo(E.x1,E.y1,E.x2,E.y2,E.x,E.y):E.type==="Q"?U.quadraticCurveTo(E.x1,E.y1,E.x,E.y):E.type==="Z"&&U.closePath()}}catch(R){z=!0,Y=R}finally{try{G||ie.return==null||ie.return()}finally{if(z)throw Y}}return N._doStroke&&N._strokeSet&&!N._clipping&&U.stroke(),N._doFill&&!N._clipping&&(N._fillSet||N._setFill(a._DEFAULT_TEXT_FILL),U.fill()),this}},{key:"_textWidth",value:function(k,I){return this.font.getAdvanceWidth(k,I)}},{key:"_textAscent",value:function(k){return this.font.ascender*this._scale(k)}},{key:"_textDescent",value:function(k){return-this.font.descender*this._scale(k)}},{key:"_scale",value:function(k){return 1/this.font.unitsPerEm*(k||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(k,I,A,F,N){var U=k._textSize;switch(N===void 0&&(N=this._textWidth(I,U)),k._textAlign){case a.CENTER:A-=N/2;break;case a.RIGHT:A-=N}switch(k._textBaseline){case a.TOP:F+=this._textAscent(U);break;case a.CENTER:F+=this._textAscent(U)/2;break;case a.BOTTOM:F-=this._textDescent(U)}return{x:A,y:F}}}])&&g(L.prototype,D),P}(),t=c.default,d.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(t,i,d){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(o,c){return o.push(c),o},t.default.prototype.arrayCopy=function(o,c,a,l,b){var g,u;o=b!==void 0?(u=Math.min(b,o.length),g=l,o.slice(c,u+c)):(u=a!==void 0?(u=a,Math.min(u,o.length)):o.length,a=c,o.slice(g=0,u)),Array.prototype.splice.apply(a,[g,u].concat(o))},t.default.prototype.concat=function(o,c){return o.concat(c)},t.default.prototype.reverse=function(o){return o.reverse()},t.default.prototype.shorten=function(o){return o.pop(),o},t.default.prototype.shuffle=function(o,c){for(var a,l,b=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),g=(o=c||b?o:o.slice()).length;1<g;)a=this.random(0,1)*g|0,l=o[--g],o[g]=o[a],o[a]=l;return o},t.default.prototype.sort=function(o,l){var a=l?o.slice(0,Math.min(l,o.length)):o,l=l?o.slice(Math.min(l,o.length)):[];return(a=typeof a[0]=="string"?a.sort():a.sort(function(b,g){return b-g})).concat(l)},t.default.prototype.splice=function(o,c,a){return Array.prototype.splice.apply(o,[a,0].concat(c)),o},t.default.prototype.subset=function(o,c,a){return a!==void 0?o.slice(c,c+a):o.slice(c,o.length)},t=t.default,d.default=t},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(t,i,d){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},o.default.prototype.int=function(c){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,a):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(l){return o.default.prototype.int(l,a)}):void 0},o.default.prototype.str=function(c){return c instanceof Array?c.map(o.default.prototype.str):String(c)},o.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(c){return c=o.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(o.default.prototype.char):typeof c=="string"?o.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},o.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(c,a){if(a=a??8,c instanceof Array)return c.map(function(b){return o.default.prototype.hex(b,a)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(a);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var l=Number(c).toString(16).toUpperCase();l.length<a;)l="0".concat(l);return l=l.length>=a?l.substring(l.length-a,l.length):l}},o.default.prototype.unhex=function(c){return c instanceof Array?c.map(o.default.prototype.unhex):parseInt("0x".concat(c),16)},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(u=t("../core/main"))&&u.__esModule?u:{default:u};function c(h,p){return function(m){if(Array.isArray(m))return m}(h)||function(m,y){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]"){var f=[],v=!0,_=!1,x=void 0;try{for(var C,M=m[Symbol.iterator]();!(v=(C=M.next()).done)&&(f.push(C.value),!y||f.length!==y);v=!0);}catch(S){_=!0,x=S}finally{try{v||M.return==null||M.return()}finally{if(_)throw x}}return f}}(h,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(h,p,m){var f=c(h.toString().split("."),2),y=f[0],f=f[1];return m===void 0?(y=y.padStart(p,"0"),f?y+"."+f:y):(y=(h=c(h.toFixed(m).toString().split("."),2))[0],f=h[1],y=y.padStart(p,"0"),f===void 0?y:y+"."+f)}function l(f,p){var m=(f=f.toString()).indexOf("."),y=m!==-1?f.substring(m):"",f=(f=m!==-1?f.substring(0,m):f).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(p===0)y="";else if(p!==void 0)if(p>y.length)for(var v=p-(y+=m===-1?".":"").length+1,_=0;_<v;_++)y+="0";else y=y.substring(0,p+1);return f+y}function b(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function g(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),o.default.prototype.join=function(h,p){return o.default._validateParameters("join",arguments),h.join(p)},o.default.prototype.match=function(h,p){return o.default._validateParameters("match",arguments),h.match(p)},o.default.prototype.matchAll=function(h,p){o.default._validateParameters("matchAll",arguments);for(var m=new RegExp(p,"g"),y=m.exec(h),f=[];y!==null;)f.push(y),y=m.exec(h);return f},o.default.prototype.nf=function(h,p,m){return o.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(y){return a(y,p,m)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):a(h,p,m)},o.default.prototype.nfc=function(h,p){return o.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(m){return l(m,p)}):l(h,p)},o.default.prototype.nfp=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];o.default._validateParameters("nfp",p);var y=o.default.prototype.nf.apply(this,p);return y instanceof Array?y.map(b):b(y)},o.default.prototype.nfs=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];o.default._validateParameters("nfs",p);var y=o.default.prototype.nf.apply(this,p);return y instanceof Array?y.map(g):g(y)},o.default.prototype.split=function(h,p){return o.default._validateParameters("split",arguments),h.split(p)},o.default.prototype.splitTokens=function(h,p){var m,y;return o.default._validateParameters("splitTokens",arguments),y=p!==void 0?(y=/\]/g.exec(p=p),(m=/\[/g.exec(p))&&y?(p=p.slice(0,y.index)+p.slice(y.index+1),m=/\[/g.exec(p),p=p.slice(0,m.index)+p.slice(m.index+1),new RegExp("[\\[".concat(p,"\\]]"),"g")):y?(p=p.slice(0,y.index)+p.slice(y.index+1),new RegExp("[".concat(p,"\\]]"),"g")):m?(p=p.slice(0,m.index)+p.slice(m.index+1),new RegExp("[".concat(p,"\\[]"),"g")):new RegExp("[".concat(p,"]"),"g")):/\s/g,h.split(y).filter(function(f){return f})},o.default.prototype.trim=function(h){return o.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var u=o.default;d.default=u},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(t,i,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,d.default=t},{"../core/main":280}],323:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(u=t("../core/main"))&&u.__esModule?u:{default:u},l=(t("./p5.Geometry"),function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=b();if(p&&p.has(h))return p.get(h);var m,y={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var v;Object.prototype.hasOwnProperty.call(h,m)&&((v=f?Object.getOwnPropertyDescriptor(h,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=h[m])}return y.default=h,p&&p.set(h,y),y}(t("../core/constants")));function b(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,b=function(){return h},h)}a.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},a.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},a.default.prototype.buildGeometry=function(h){return this._renderer.buildGeometry(h)},a.default.prototype.freeGeometry=function(h){this._renderer._freeBuffers(h.gid)},a.default.prototype.plane=function(){var h,p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=(this._assert3d("plane"),a.default._validateParameters("plane",arguments),"plane|".concat(y,"|").concat(f));return this._renderer.geometryInHash(v)||((h=new a.default.Geometry(y,f,function(){for(var _,x,C=0;C<=this.detailY;C++)for(var M=C/this.detailY,S=0;S<=this.detailX;S++)_=S/this.detailX,x=new a.default.Vector(_-.5,M-.5,0),this.vertices.push(x),this.uvs.push(_,M)})).computeFaces().computeNormals(),y<=1&&f<=1?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,p,m,1),this},a.default.prototype.box=function(h,p,m,y,f){this._assert3d("box"),a.default._validateParameters("box",arguments),h===void 0&&(h=50),p===void 0&&(p=h),m===void 0&&(m=p);var v,_=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,_=(f===void 0&&(f=_?1:4),"box|".concat(y=y===void 0?_?1:4:y,"|").concat(f));return this._renderer.geometryInHash(_)||((v=new a.default.Geometry(y,f,function(){var x=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(C,M){for(var M=4*M,S=0;S<4;S++){var P=C[S],P=new a.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2);x.vertices.push(P),x.uvs.push(1&S,(2&S)/2)}x.faces.push([M,1+M,2+M]),x.faces.push([2+M,1+M,3+M])})})).computeNormals(),y<=4&&f<=4?v._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(_,v)),this._renderer.drawBuffersScaled(_,h,p,m),this},a.default.prototype.sphere=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),this.ellipsoid(h,h,h,p,m),this};function g(h,p,m,y,f,v,_){h=h<=0?1:h,p=p<0?0:p,m=m<=0?h:m,y=y<3?3:y;for(var x,C,M=(v=v===void 0||v)?-2:0,S=(f=f<1?1:f)+((_=_===void 0?p!==0:_)?2:0),P=Math.atan2(h-p,m),L=Math.sin(P),D=Math.cos(P),k=M;k<=S;++k){var I=k/f,A=m*I,F=void 0,F=k<0?(I=A=0,h):f<k?(A=m,I=1,p):h+(p-h)*I;for(k!==-2&&k!==f+2||(F=0),A-=m/2,x=0;x<y;++x){var N=x/(y-1),W=2*Math.PI*N,U=Math.sin(W),W=Math.cos(W),G=(this.vertices.push(new a.default.Vector(U*F,A,W*F)),void 0),G=k<0?new a.default.Vector(0,-1,0):f<k&&p?new a.default.Vector(0,1,0):new a.default.Vector(U*D,L,W*D);this.vertexNormals.push(G),this.uvs.push(N,I)}}var z=0;if(v){for(C=0;C<y;++C)this.faces.push([z+C,z+y+(C+1)%y,z+y+C]);z+=2*y}for(k=0;k<f;++k){for(x=0;x<y;++x){var Y=(x+1)%y;this.faces.push([z+x,z+Y,z+y+Y]),this.faces.push([z+x,z+y+Y,z+y+x])}z+=y}if(_)for(z+=y,x=0;x<y;++x)this.faces.push([z+x,z+(x+1)%y,z+y])}a.default.prototype.cylinder=function(){var h,p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],_=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],x=(this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),"cylinder|".concat(y,"|").concat(f,"|").concat(v,"|").concat(_));return this._renderer.geometryInHash(x)||(h=new a.default.Geometry(y,f),g.call(h,1,1,1,y,f,v,_),y<=24&&f<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,p,m,p),this},a.default.prototype.cone=function(){var h,p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],_=(this._assert3d("cone"),a.default._validateParameters("cone",arguments),"cone|".concat(y,"|").concat(f,"|").concat(v));return this._renderer.geometryInHash(_)||(h=new a.default.Geometry(y,f),g.call(h,1,0,1,y,f,v,!1),y<=24&&f<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,h)),this._renderer.drawBuffersScaled(_,p,m,p),this},a.default.prototype.ellipsoid=function(){var h,p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:p,f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,v=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,_=(this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(f,"|").concat(v));return this._renderer.geometryInHash(_)||((h=new a.default.Geometry(f,v,function(){for(var x=0;x<=this.detailY;x++)for(var C=x/this.detailY,M=Math.PI*C-Math.PI/2,S=Math.cos(M),P=Math.sin(M),L=0;L<=this.detailX;L++){var D=L/this.detailX,I=2*Math.PI*D,k=Math.cos(I),I=Math.sin(I),I=new a.default.Vector(S*I,P,S*k);this.vertices.push(I),this.vertexNormals.push(I),this.uvs.push(D,C)}})).computeFaces(),f<=24&&v<=24?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(_,h)),this._renderer.drawBuffersScaled(_,p,m,y),this},a.default.prototype.torus=function(h,_,m,y){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),h===void 0)h=50;else if(!h)return;if(_===void 0)_=10;else if(!_)return;m===void 0&&(m=24),y===void 0&&(y=16);var f,v=(_/h).toPrecision(4),_="torus|".concat(v,"|").concat(m,"|").concat(y);return this._renderer.geometryInHash(_)||((f=new a.default.Geometry(m,y,function(){for(var x=0;x<=this.detailY;x++)for(var C=x/this.detailY,M=2*Math.PI*C,S=Math.cos(M),P=Math.sin(M),L=1+v*S,D=0;D<=this.detailX;D++){var k=D/this.detailX,I=2*Math.PI*k,F=Math.cos(I),I=Math.sin(I),A=new a.default.Vector(L*F,L*I,v*P),F=new a.default.Vector(S*F,S*I,P);this.vertices.push(A),this.vertexNormals.push(F),this.uvs.push(k,C)}})).computeFaces(),m<=24&&y<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,f)),this._renderer.drawBuffersScaled(_,h,h,h),this},a.default.RendererGL.prototype.point=function(h,p){var m=[];return m.push(new a.default.Vector(h,p,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(m,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(_){var p=_[0],m=_[1],y=_[2],f=_[3],v=_[4],_=_[5],x=(this.geometryInHash("tri")||((x=new a.default.Geometry(1,1,function(){var S=[];S.push(new a.default.Vector(0,0,0)),S.push(new a.default.Vector(1,0,0)),S.push(new a.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=S,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)),this.uMVMatrix.copy());try{var C=Math.sign(p*f-y*m+y*_-v*f+v*m-p*_),M=new a.default.Matrix([y-p,f-m,0,0,v-p,_-m,0,0,0,0,C,0,p,m,0,1]).mult(this.uMVMatrix);this.uMVMatrix=M,this.drawBuffers("tri")}finally{this.uMVMatrix=x}return this},a.default.RendererGL.prototype.ellipse=function(h){this.arc(h[0],h[1],h[2],h[3],0,l.TWO_PI,l.OPEN,h[4])},a.default.RendererGL.prototype.arc=function(){var h,p=arguments.length<=0?void 0:arguments[0],m=arguments.length<=1?void 0:arguments[1],y=arguments.length<=2?void 0:arguments[2],f=arguments.length<=3?void 0:arguments[3],v=arguments.length<=4?void 0:arguments[4],_=arguments.length<=5?void 0:arguments[5],x=arguments.length<=6?void 0:arguments[6],C=(arguments.length<=7?void 0:arguments[7])||25,M=(Math.abs(_-v)>=l.TWO_PI?"".concat(S="ellipse","|"):"".concat(S="arc","|").concat(v,"|").concat(_,"|").concat(x,"|")).concat(C,"|"),S=(this.geometryInHash(M)||((h=new a.default.Geometry(C,1,function(){if(v.toFixed(10)!==_.toFixed(10)){x!==l.PIE&&x!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var P=0;P<=C;P++){var D=(_-v)*(P/C)+v,L=.5+Math.cos(D)/2,D=.5+Math.sin(D)/2;this.vertices.push(new a.default.Vector(L,D,0)),this.uvs.push([L,D]),P<C-1&&(this.faces.push([0,P+1,P+2]),this.edges.push([P+1,P+2]))}switch(x){case l.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case l.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case l.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),C<=50?h._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(S," with more than 50 detail")),this.createBuffers(M,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([p,m,0]),this.uMVMatrix.scale(y,f,1),this.drawBuffers(M)}finally{this.uMVMatrix=S}return this},a.default.RendererGL.prototype.rect=function(h){var p=h[0],m=h[1],y=h[2],f=h[3];if(h[4]===void 0){var x=this._pInst._glAttributes.perPixelLighting,v=h[4]||(x?1:24),_=h[5]||(x?1:16),x="rect|".concat(v,"|").concat(_),C=(this.geometryInHash(x)||((C=new a.default.Geometry(v,_,function(){for(var G=0;G<=this.detailY;G++)for(var z=G/this.detailY,Y=0;Y<=this.detailX;Y++){var K=Y/this.detailX,ie=new a.default.Vector(K,z,0);this.vertices.push(ie),this.uvs.push(K,z)}0<v&&0<_&&(this.edges=[[0,v],[v,(v+1)*(_+1)-1],[(v+1)*(_+1)-1,(v+1)*_],[(v+1)*_,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(x,C)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([p,m,0]),this.uMVMatrix.scale(y,f,1),this.drawBuffers(x)}finally{this.uMVMatrix=C}}else{var x=h[4],C=h[5]===void 0?x:h[5],M=h[6]===void 0?C:h[6],h=h[7]===void 0?M:h[7],I=y,S=f,D=((I+=p)<p&&(D=p,p=I,I=D),(S+=m)<m&&(D=m,m=S,S=D),Math.min((I-p)/2,(S-m)/2)),P=(D<x&&(x=D),D<C&&(C=D),D<M&&(M=D),D<h&&(h=D),p),L=m,D=I,p=S,k=(this.beginShape(),C!==0?(this.vertex(D-C,L),this.quadraticVertex(D,L,D,L+C)):this.vertex(D,L),M!==0?(this.vertex(D,p-M),this.quadraticVertex(D,p,D-M,p)):this.vertex(D,p),h!==0?(this.vertex(P+h,p),this.quadraticVertex(P,p,P,p-h)):this.vertex(P,p),x!==0?(this.vertex(P,L+x),this.quadraticVertex(P,L,P+x,L)):this.vertex(P,L),!(this.immediateMode.geometry.uvs.length=0)),m=!1,I=void 0;try{for(var A,F=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(A=F.next()).done);k=!0){var N=A.value,U=(N.x-P)/y,W=(N.y-L)/f;this.immediateMode.geometry.uvs.push(U,W)}}catch(E){m=!0,I=E}finally{try{k||F.return==null||F.return()}finally{if(m)throw I}}this.endShape(l.CLOSE)}return this},a.default.RendererGL.prototype.quad=function(h,p,m,y,f,v,_,x,C,M,S,P){var L=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,D=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(h,"|").concat(p,"|").concat(m,"|").concat(y,"|").concat(f,"|").concat(v,"|").concat(_,"|").concat(x,"|").concat(C,"|").concat(M,"|").concat(S,"|").concat(P,"|").concat(L,"|").concat(D);if(!this.geometryInHash(k)){var I=new a.default.Geometry(L,D,function(){for(var Y=1/(this.detailX-1),K=1/(this.detailY-1),ie=0;ie<this.detailY;ie++)for(var E=0;E<this.detailX;E++){var R=E*Y,B=ie*K;this.vertices.push(new a.default.Vector((1-R)*((1-B)*h+B*M)+R*((1-B)*y+B*_),(1-R)*((1-B)*p+B*S)+R*((1-B)*f+B*x),(1-R)*((1-B)*m+B*P)+R*((1-B)*v+B*C))),this.uvs.push([R,B])}});I.faces=[];for(var A=0;A<D-1;A++)for(var F=0;F<L-1;F++){var N=F+A*L,U=F+1+(A+1)*L,W=F+(A+1)*L;I.faces.push([N,F+1+A*L,U]),I.faces.push([N,U,W])}I.computeNormals();for(var G=[I.edges.length=0,2,3,1],z=0;z<G.length;z++)I.edges.push([G[z],G[(z+1)%G.length]]);I._edgesToVertices(),this.createBuffers(k,I)}return this.drawBuffers(k),this},a.default.RendererGL.prototype.bezier=function(h,p,m,y,f,v,_,x,C,M,S,P){arguments.length===8&&(S=x,M=_,x=v,_=f,f=y,y=m,m=v=C=P=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var D=0;D<=L;D++){var k=Math.pow(1-D/L,3),I=D/L*3*Math.pow(1-D/L,2),A=3*Math.pow(D/L,2)*(1-D/L),F=Math.pow(D/L,3);this.vertex(h*k+y*I+_*A+M*F,p*k+f*I+x*A+S*F,m*k+v*I+C*A+P*F)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(h,p,m,y,f,v,_,x,C,M,S,P){arguments.length===8&&(M=_,S=x,_=f,x=y,f=y=m,m=v=C=P=0);var L=this._pInst._curveDetail;this.beginShape();for(var D=0;D<=L;D++){var k=.5*Math.pow(D/L,3),I=.5*Math.pow(D/L,2),A=D/L*.5;this.vertex(k*(3*y-h-3*_+M)+I*(2*h-5*y+4*_-M)+A*(-h+_)+2*y*.5,k*(3*f-p-3*x+S)+I*(2*p-5*f+4*x-S)+A*(-p+x)+2*f*.5,k*(3*v-m-3*C+P)+I*(2*m-5*v+4*C-P)+A*(-m+C)+2*v*.5)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var h,p,m,y,f,v,_=[],x=[],C=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(v);break}S+=M,P-=M,++L}}for(var D=this._lookUpTableBezier.length,k=[],I=0;I<4;I++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var A=[];for(I=0;I<4;I++)A.push([]);if(A[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),A[3]=this.curStrokeColor.slice(),C===6){this.isBezier=!0;var _=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(_[0]-_[1],x[0]-x[1]),U=Math.hypot(_[1]-_[2],x[1]-x[2]),N=Math.hypot(_[2]-_[3],x[2]-x[3]),U=F+U+N;for(F/=U,N/=U,f=0;f<4;f++)k[1].push(k[0][f]*(1-F)+k[3][f]*F),k[2].push(k[0][f]*N+k[3][f]*(1-N)),A[1].push(A[0][f]*(1-F)+A[3][f]*F),A[2].push(A[0][f]*N+A[3][f]*(1-N));for(y=0;y<D;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=h=p=0;I<4;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableBezier[y][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableBezier[y][I]*A[I][f];h+=_[I]*this._lookUpTableBezier[y][I],p+=x[I]*this._lookUpTableBezier[y][I]}this.vertex(h,p)}this.curFillColor=k[3],this.curStrokeColor=A[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(C===9){this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var W=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(_[0]-_[1],x[0]-x[1],W[0]-W[1]),U=Math.hypot(_[1]-_[2],x[1]-x[2],W[1]-W[2]),z=Math.hypot(_[2]-_[3],x[2]-x[3],W[2]-W[3]),C=G+U+z;for(G/=C,z/=C,f=0;f<4;f++)k[1].push(k[0][f]*(1-G)+k[3][f]*G),k[2].push(k[0][f]*z+k[3][f]*(1-z)),A[1].push(A[0][f]*(1-G)+A[3][f]*G),A[2].push(A[0][f]*z+A[3][f]*(1-z));for(y=0;y<D;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=h=p=m=0;I<4;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableBezier[y][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableBezier[y][I]*A[I][f];h+=_[I]*this._lookUpTableBezier[y][I],p+=x[I]*this._lookUpTableBezier[y][I],m+=W[I]*this._lookUpTableBezier[y][I]}this.vertex(h,p,m)}this.curFillColor=k[3],this.curStrokeColor=A[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var h,p,m,y,f,v,_=[],x=[],C=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var M=1/this._lutQuadraticDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(v);break}S+=M,P-=M,++L}}for(var D=this._lookUpTableQuadratic.length,k=[],I=0;I<3;I++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var A=[];for(I=0;I<3;I++)A.push([]);if(A[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),A[2]=this.curStrokeColor.slice(),C===4){this.isQuadratic=!0;var _=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],F=Math.hypot(_[0]-_[1],x[0]-x[1]);for(F/=F+Math.hypot(_[1]-_[2],x[1]-x[2]),f=0;f<4;f++)k[1].push(k[0][f]*(1-F)+k[2][f]*F),A[1].push(A[0][f]*(1-F)+A[2][f]*F);for(y=0;y<D;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=h=p=0;I<3;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableQuadratic[y][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableQuadratic[y][I]*A[I][f];h+=_[I]*this._lookUpTableQuadratic[y][I],p+=x[I]*this._lookUpTableQuadratic[y][I]}this.vertex(h,p)}this.curFillColor=k[2],this.curStrokeColor=A[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(C===6){this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var N=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],U=Math.hypot(_[0]-_[1],x[0]-x[1],N[0]-N[1]);for(U/=U+Math.hypot(_[1]-_[2],x[1]-x[2],N[1]-N[2]),f=0;f<4;f++)k[1].push(k[0][f]*(1-U)+k[2][f]*U),A[1].push(A[0][f]*(1-U)+A[2][f]*U);for(y=0;y<D;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],I=h=p=m=0;I<3;I++){for(f=0;f<4;f++)this.curFillColor[f]+=this._lookUpTableQuadratic[y][I]*k[I][f],this.curStrokeColor[f]+=this._lookUpTableQuadratic[y][I]*A[I][f];h+=_[I]*this._lookUpTableQuadratic[y][I],p+=x[I]*this._lookUpTableQuadratic[y][I],m+=N[I]*this._lookUpTableQuadratic[y][I]}this.vertex(h,p,m)}this.curFillColor=k[2],this.curStrokeColor=A[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var h,p,m,y,f,v,_=[],x=[],C=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,S=0,P=1,L=0;S<1;){if(v=parseFloat(S.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(v),P.toFixed(6)===M.toFixed(6)){v=parseFloat(P.toFixed(6))+parseFloat(S.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(v);break}S+=M,P-=M,++L}}var D=this._lookUpTableBezier.length;if(C===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),f=0;f<D;f++)p=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],m=x[0]*this._lookUpTableBezier[f][0]+x[1]*this._lookUpTableBezier[f][1]+x[2]*this._lookUpTableBezier[f][2]+x[3]*this._lookUpTableBezier[f][3],this.vertex(p,m);for(f=0;f<C;f++)this.immediateMode._curveVertex.shift()}}else if(C===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),h=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),f=0;f<D;f++)p=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],m=x[0]*this._lookUpTableBezier[f][0]+x[1]*this._lookUpTableBezier[f][1]+x[2]*this._lookUpTableBezier[f][2]+x[3]*this._lookUpTableBezier[f][3],y=h[0]*this._lookUpTableBezier[f][0]+h[1]*this._lookUpTableBezier[f][1]+h[2]*this._lookUpTableBezier[f][2]+h[3]*this._lookUpTableBezier[f][3],this.vertex(p,m,y);for(f=0;f<C;f++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(h,P,m,L,f,v,_,x,C){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(h),this._pInst.textureMode(l.NORMAL);var M=0,S=(P<=h.width&&(M=P/h.width),1),P=(P+L<=h.width&&(S=(P+L)/h.width),0),L=(m<=h.height&&(P=m/h.height),1);m+f<=h.height&&(L=(m+f)/h.height),this.beginShape(),this.vertex(v,_,0,M,P),this.vertex(v+x,_,0,S,P),this.vertex(v+x,_+C,0,S,L),this.vertex(v,_+C,0,M,L),this.endShape(l.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(l.REMOVE)};var u=a.default;d.default=u},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var m=b();if(m&&m.has(p))return m.get(p);var y,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var _;Object.prototype.hasOwnProperty.call(p,y)&&((_=v?Object.getOwnPropertyDescriptor(p,y):null)&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=p[y])}return f.default=p,m&&m.set(p,f),f}(t("../core/constants"));function b(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,b=function(){return p},p)}function g(p){return function(m){if(Array.isArray(m)){for(var y=0,f=new Array(m.length);y<m.length;y++)f[y]=m[y];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(p,m){for(var y=0;y<m.length;y++){var f=m[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(p,f.key,f)}}var h=function(){function p(f){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");(this.renderer=f)._pInst.push(),this.identityMatrix=new a.default.Matrix,f.uMVMatrix=new a.default.Matrix,this.geometry=new a.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(p.nextGeometryId),p.nextGeometryId++,this.hasTransform=!1}var m,y;return m=p,(y=[{key:"transformVertices",value:function(f){var v=this;return this.hasTransform?f.map(function(_){return v.renderer.uMVMatrix.multiplyPoint(_)}):f}},{key:"transformNormals",value:function(f){var v=this;return this.hasTransform?f.map(function(_){return v.renderer.uNMatrix.multiplyVec3(_)}):f}},{key:"addGeometry",value:function(f){for(var v,_=this,x=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(M,S){return M===_.identityMatrix.mat4[S]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),C=((v=this.geometry.vertices).push.apply(v,g(this.transformVertices(f.vertices))),(v=this.geometry.vertexNormals).push.apply(v,g(this.transformNormals(f.vertexNormals))),(v=this.geometry.uvs).push.apply(v,g(f.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,g(f.faces.map(function(M){return M.map(function(S){return S+x})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,g(f.edges.map(function(M){return M.map(function(S){return S+x})}))),g(f.vertexColors));C.length<4*f.vertices.length;)C.push.apply(C,g(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,g(C))}},{key:"addImmediate",value:function(){var f=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,_=[];if(this.renderer._doFill)if(v===l.TRIANGLE_STRIP||v===l.QUAD_STRIP)for(var x=2;x<f.vertices.length;x++)x%2==0?_.push([x,x-1,x-2]):_.push([x,x-2,x-1]);else if(v===l.TRIANGLE_FAN)for(var C=2;C<f.vertices.length;C++)_.push([0,C-1,C]);else for(var M=0;M<f.vertices.length;M+=3)_.push([M,M+1,M+2]);this.addGeometry(Object.assign({},f,{faces:_}))}},{key:"addRetained",value:function(f){this.addGeometry(f.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&u(m.prototype,y),p}();h.nextGeometryId=0,d.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=(g=t("../core/main"))&&g.__esModule?g:{default:g},a=function(u){if(u&&u.__esModule)return u;if(u===null||b(u)!=="object"&&typeof u!="function")return{default:u};var h=l();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants"));function l(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,l=function(){return u},u)}function b(u){return(b=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}c.default.prototype.orbitControl=function(u,h,p,C){var y=this,f=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);u===void 0&&(u=1),h===void 0&&(h=u),p===void 0&&(p=1),b(C)!=="object"&&(C={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var S=C.disableTouchActions;this.touchActionsDisabled===!0||S!==void 0&&!S||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var v,_,x,S=C.freeRotation,C=S!==void 0&&S,M=[],S=(this.touches.forEach(function(F){y._renderer.prevTouches.forEach(function(N){F.id===N.id&&(N={x:F.x,y:F.y,px:N.x,py:N.y},M.push(N))})}),this._renderer.prevTouches=this.touches,0),P=0,L=0,D=0,k=0,I=this.height<this.width?this.height:this.width,A=!1;return 0<M.length?(A=0<M[0].x&&M[0].x<this.width&&0<M[0].y&&M[0].y<this.height,M.length===1?(P=-u*((v=M[0]).x-v.px)/I,L=h*(v.y-v.py)/I):(v=M[0],_=M[1],S=-(Math.hypot(v.x-_.x,v.y-_.y)-Math.hypot(v.px-_.px,v.py-_.py))*p*4e-4,D=.5*(v.x+_.x)-.5*(v.px+_.px),k=.5*(v.y+_.y)-.5*(v.py+_.py)),0<this.touches.length?A&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(A=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(S=Math.sign(this._mouseWheelDeltaY)*p,S*=.01,this._mouseWheelDeltaY=0,A&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(P=-u*this.movedX/I,L=h*this.movedY/I):this.mouseButton===this.RIGHT&&(D=this.movedX,k=this.movedY*f.yScale),A&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),S!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=S),.001<Math.abs(this._renderer.zoomVelocity)?(C?f._orbitFree(0,0,this._renderer.zoomVelocity):f._orbit(0,0,this._renderer.zoomVelocity),f.projMatrix.mat4[15]!==0&&(f.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),f.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=f.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=f.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,P===0&&L===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*P,.6*L),1e-6<this._renderer.rotateVelocity.magSq()?(C?f._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):f._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),D===0&&k===0||!this._renderer.executeRotateAndMove||(v=2*D/this.width,_=2*-k/this.height,this._renderer.moveVelocity.add(.15*v,.15*_)),1e-6<this._renderer.moveVelocity.magSq()?(p=f._getLocalAxes(),u=f.eyeX-f.centerX,h=f.eyeY-f.centerY,I=f.eyeZ-f.centerZ,A=Math.sqrt(u*u+h*h+I*I),S=new c.default.Vector(f.centerX,f.centerY,f.centerZ),S=f.cameraMatrix.multiplyPoint(S),(S=this._renderer.uPMatrix.multiplyAndNormalizePoint(S)).x-=this._renderer.moveVelocity.x,S.y-=this._renderer.moveVelocity.y,L=(P=this._renderer.uPMatrix.mat4)[15]===0?(x=(P[8]+S.x)/P[0]*A,(P[9]+S.y)/P[5]*A):(x=(S.x-P[12])/P[0],(S.y-P[13])/P[5]),f.setPosition(f.eyeX+x*p.x[0]+L*p.y[0],f.eyeY+x*p.x[1]+L*p.y[1],f.eyeZ+x*p.x[2]+L*p.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];c.default._validateParameters("debugMode",h);for(var m=this._registeredMethods.post.length-1;0<=m;m--)this._registeredMethods.post[m].toString()!==this._grid().toString()&&this._registeredMethods.post[m].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(m,1);h[0]===a.GRID?this.registerMethod("post",this._grid(h[1],h[2],h[3],h[4],h[5])):h[0]===a.AXES?this.registerMethod("post",this._axesIcon(h[1],h[2],h[3],h[4])):(this.registerMethod("post",this._grid(h[0],h[1],h[2],h[3],h[4])),this.registerMethod("post",this._axesIcon(h[5],h[6],h[7],h[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},c.default.prototype._grid=function(u,h,p,m,y){u===void 0&&(u=this.width/2),h===void 0&&(h=Math.round(u/30)<4?4:Math.round(u/30)),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0);var f=u/h,v=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var _=0;_<=h;_++)this.beginShape(this.LINES),this.vertex(-v+p,m,_*f-v+y),this.vertex(v+p,m,_*f-v+y),this.endShape();for(var x=0;x<=h;x++)this.beginShape(this.LINES),this.vertex(x*f-v+p,m,-v+y),this.vertex(x*f-v+p,m,v+y),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(u,h,p,m){return u===void 0&&(u=40<this.width/20?this.width/20:40),h===void 0&&(h=-this.width/4),p===void 0&&(p=h),m===void 0&&(m=h),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(h,p,m),this.vertex(h+u,p,m),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(h,p,m),this.vertex(h,p+u,m),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(h,p,m),this.vertex(h,p,m+u),this.endShape(),this.pop()}};var g=c.default;d.default=g},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(t,i,d){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.ambientLight=function(c,a,l,b){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var g=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(g._array[0],g._array[1],g._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(c,a,l){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var b=this.color.apply(this,arguments);return this._renderer.specularColors=[b._array[0],b._array[1],b._array[2]],this},o.default.prototype.directionalLight=function(c,y,m,b,g,u){this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),c=c instanceof o.default.Color?c:this.color(c,y,m);var h,p,y=arguments[arguments.length-1],m=typeof y=="number"?(h=arguments[arguments.length-3],p=arguments[arguments.length-2],arguments[arguments.length-1]):(h=y.x,p=y.y,y.z),y=Math.sqrt(h*h+p*p+m*m);return this._renderer.directionalLightDirections.push(h/y,p/y,m/y),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(c,m,y,b,g,u){this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),c=c instanceof o.default.Color?c:this.color(c,m,y);var h,p,m=arguments[arguments.length-1],y=typeof m=="number"?(h=arguments[arguments.length-3],p=arguments[arguments.length-2],arguments[arguments.length-1]):(h=m.x,p=m.y,m.z);return this._renderer.pointLightPositions.push(h,p,y),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},o.default.prototype.panorama=function(c){this.filter(this._renderer._getSphereMapping(c))},o.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},o.default.prototype.lightFalloff=function(c,a,l){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&a===0&&l===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=l,this},o.default.prototype.spotLight=function(c,a,l,b,g,u,h,p,m,y,f){this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var v,_,x,C=arguments.length;switch(C){case 11:case 10:v=this.color(c,a,l),_=new o.default.Vector(b,g,u),x=new o.default.Vector(h,p,m);break;case 9:c instanceof o.default.Color?(v=c,_=new o.default.Vector(a,l,b),x=new o.default.Vector(g,u,h),y=p,f=m):b instanceof o.default.Vector?(v=this.color(c,a,l),_=b,x=new o.default.Vector(g,u,h),y=p,f=m):h instanceof o.default.Vector?(v=this.color(c,a,l),_=new o.default.Vector(b,g,u),x=h,y=p,f=m):(v=this.color(c,a,l),_=new o.default.Vector(b,g,u),x=new o.default.Vector(h,p,m));break;case 8:y=(x=c instanceof o.default.Color?(v=c,_=new o.default.Vector(a,l,b),new o.default.Vector(g,u,h)):b instanceof o.default.Vector?(v=this.color(c,a,l),_=b,new o.default.Vector(g,u,h)):(v=this.color(c,a,l),_=new o.default.Vector(b,g,u),h),p);break;case 7:c instanceof o.default.Color&&a instanceof o.default.Vector?(v=c,_=a,x=new o.default.Vector(l,b,g),y=u,f=h):c instanceof o.default.Color&&g instanceof o.default.Vector?(v=c,_=new o.default.Vector(a,l,b),x=g,y=u,f=h):b instanceof o.default.Vector&&g instanceof o.default.Vector?(v=this.color(c,a,l),_=b,x=g,y=u,f=h):x=c instanceof o.default.Color?(v=c,_=new o.default.Vector(a,l,b),new o.default.Vector(g,u,h)):b instanceof o.default.Vector?(v=this.color(c,a,l),_=b,new o.default.Vector(g,u,h)):(v=this.color(c,a,l),_=new o.default.Vector(b,g,u),h);break;case 6:b instanceof o.default.Vector&&g instanceof o.default.Vector?(v=this.color(c,a,l),_=b,x=g,y=u):c instanceof o.default.Color&&g instanceof o.default.Vector?(v=c,_=new o.default.Vector(a,l,b),x=g,y=u):c instanceof o.default.Color&&a instanceof o.default.Vector&&(v=c,_=a,x=new o.default.Vector(l,b,g),y=u);break;case 5:c instanceof o.default.Color&&a instanceof o.default.Vector&&l instanceof o.default.Vector?(v=c,_=a,x=l,y=b,f=g):b instanceof o.default.Vector&&g instanceof o.default.Vector?(v=this.color(c,a,l),_=b,x=g):c instanceof o.default.Color&&g instanceof o.default.Vector?(v=c,_=new o.default.Vector(a,l,b),x=g):c instanceof o.default.Color&&a instanceof o.default.Vector&&(v=c,_=a,x=new o.default.Vector(l,b,g));break;case 4:v=c,_=a,x=l,y=b;break;case 3:v=c,_=a,x=l;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(C<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(_.x,_.y,_.z),x.normalize(),this._renderer.spotLightDirections.push(x.x,x.y,x.z),y===void 0&&(y=Math.PI/3),f!==void 0&&f<1?(f=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):f===void 0&&(f=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(f),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];return o.default._validateParameters("noLights",a),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=o.default,d.default=t},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(t,i,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t("regenerator-runtime/runtime");var c=(u=t("../core/main"))&&u.__esModule?u:{default:u};function a(h){return function(p){if(Array.isArray(p)){for(var m=0,y=new Array(p.length);m<p.length;m++)y[m]=p[m];return y}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(h,p,m,y,f,v,_){try{var x=h[v](_),C=x.value}catch(M){return void m(M)}x.done?p(C):Promise.resolve(C).then(y,f)}function b(h){return function(){var p=this,m=arguments;return new Promise(function(y,f){var v=h.apply(p,m);function _(C){l(v,y,f,_,x,"next",C)}function x(C){l(v,y,f,_,x,"throw",C)}_(void 0)})}}function g(h){return(g=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(h)}t("./p5.Geometry"),c.default.prototype.loadModel=function(h,p){c.default._validateParameters("loadModel",arguments);var m,y,f=!1,v=!1,_=!1,x=h.slice(-4),C=(p&&g(p)==="object"?(f=p.normalize||!1,m=p.successCallback,y=p.failureCallback,x=p.fileType||x,v=p.flipU||!1,_=p.flipV||!1):typeof p=="boolean"?(f=p,m=arguments[2],y=arguments[3],arguments[4]!==void 0&&(x=arguments[4])):(m=typeof p=="function"?p:void 0,y=arguments[2],arguments[3]!==void 0&&(x=arguments[3])),new c.default.Geometry),M=(C.gid="".concat(h,"|").concat(f),this);function S(){return(S=b(regeneratorRuntime.mark(function L(D){var k,I,A,F;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:for(k=[],I=0;I<D.length;I++)(A=D[I].match(/^mtllib (.+)/))&&function(){var U="",W=A[1],G=h.split("/");U=1<G.length?(G.pop(),G.join("/")+"/"+W):W,k.push(function(){return P.apply(this,arguments)}(U).then(function(z){return z?(Y=M,K=U,new Promise(function(ie,E){var R=null,B={};Y.loadStrings(K,function(H){for(var Z=0;Z<H.length;++Z){var te,se=H[Z].trim().split(/\s+/);se[0]==="newmtl"?(te=se[1],B[R=te]={}):se[0]==="Kd"?B[R].diffuseColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="Ka"?B[R].ambientColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="Ks"?B[R].specularColor=[parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])]:se[0]==="map_Kd"&&(B[R].texturePath=se[1])}ie(B)},E)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(U)),{});var Y,K}).catch(function(z){return console.warn("Error loading MTL file: ".concat(U),z),{}}))}();return N.prev=2,N.next=5,Promise.all(k);case 5:return F=N.sent,F=Object.assign.apply(Object,[{}].concat(a(F))),N.abrupt("return",F);case 10:return N.prev=10,N.t0=N.catch(2),N.abrupt("return",{});case 13:case"end":return N.stop()}},L,null,[[2,10]])}))).apply(this,arguments)}function P(){return(P=b(regeneratorRuntime.mark(function L(D){var k;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,fetch(D,{method:"HEAD"});case 3:return k=I.sent,I.abrupt("return",k.ok);case 7:return I.prev=7,I.t0=I.catch(0),I.abrupt("return",!1);case 10:case"end":return I.stop()}},L,null,[[0,7]])}))).apply(this,arguments)}return x.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(L){(function(D,k){if(function(I){for(var A=new DataView(I),F=[115,111,108,105,100],N=0;N<5;N++)if(function(U,W,G){for(var z=0,Y=U.length;z<Y;z++)if(U[z]!==W.getUint8(G+z,!1))return;return 1}(F,A,N))return;return 1}(k))(function(I,A){for(var F,N,U,W,G,z,Y,K=new DataView(A),ie=K.getUint32(80,!0),E=!1,R=0;R<70;R++)K.getUint32(R,!1)===1129270351&&K.getUint8(R+4)===82&&K.getUint8(R+5)===61&&(E=!0,W=[],G=K.getUint8(R+6)/255,z=K.getUint8(R+7)/255,Y=K.getUint8(R+8)/255);for(var B=0;B<ie;B++){for(var H,Z=84+50*B,te=K.getFloat32(Z,!0),se=K.getFloat32(4+Z,!0),pe=K.getFloat32(8+Z,!0),oe=(E&&(H=K.getUint16(48+Z,!0),U=32768&H?(F=G,N=z,Y):(F=(31&H)/31,N=(H>>5&31)/31,(H>>10&31)/31)),new c.default.Vector(te,se,pe)),he=1;he<=3;he++){var de=Z+12*he,de=new c.default.Vector(K.getFloat32(de,!0),K.getFloat32(4+de,!0),K.getFloat32(8+de,!0));I.vertices.push(de),I.vertexNormals.push(oe),E&&W.push(F,N,U)}I.faces.push([3*B,3*B+1,3*B+2]),I.uvs.push([0,0],[0,0],[0,0])}})(D,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(I,A){for(var F,N,U="",W=[],G=0;G<A.length;++G){for(var z=A[G].trim(),Y=z.split(" "),K=0;K<Y.length;++K)Y[K]===""&&Y.splice(K,1);if(Y.length!==0)switch(U){case"":if(Y[0]!=="solid")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));U="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));F=new c.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),I.vertexNormals.push(F,F,F),U="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));U="vertex";break;case"vertex":if(Y[0]==="vertex")N=new c.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),I.vertices.push(N),I.uvs.push([0,0]),W.push(I.vertices.indexOf(N));else{if(Y[0]!=="endloop")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));I.faces.push(W),W=[],U="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));U="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));F=new c.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),I.vertexNormals.push(F,F,F),U="facet normal"}break;default:console.error('Invalid state "'.concat(U,'"'))}}}(D,k)}})(C,L),f&&C.normalize(),v&&C.flipU(),_&&C.flipV(),M._decrementPreload(),typeof m=="function"&&m(C)},y):x.match(/\.obj$/i)?this.loadStrings(h,function(){var L=b(regeneratorRuntime.mark(function D(k){var I;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,function(){return S.apply(this,arguments)}(k);case 3:I=A.sent,function(F,N){for(var U=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},W={v:[],vt:[],vn:[]},G={},z=null,Y=new Set,K=!1,ie=!1,E=0;E<N.length;++E){var R=N[E].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="usemtl")z=R[1];else if(R[0]==="v"||R[0]==="vn"){var B=new c.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));W[R[0]].push(B)}else if(R[0]==="vt")B=[parseFloat(R[1]),1-parseFloat(R[2])],W[R[0]].push(B);else if(R[0]==="f")for(var H=3;H<R.length;++H){for(var Z=[],te=[1,H-1,H],se=0;se<te.length;++se){for(var pe,oe=R[te[se]],he=oe.split("/"),de=0;de<he.length;de++)he[de]=parseInt(he[de])-1;G[oe]||(G[oe]={}),G[oe][z]===void 0?(pe=F.vertices.length,F.vertices.push(W.v[he[0]].copy()),F.uvs.push(W.vt[he[1]]?W.vt[he[1]].slice():[0,0]),F.vertexNormals.push(W.vn[he[2]]?W.vn[he[2]].copy():new c.default.Vector),G[oe][z]=pe,Z.push(pe),z&&U[z]&&U[z].diffuseColor&&Y.add(W.v[he[0]])):Z.push(G[oe][z])}if(Z[0]!==Z[1]&&Z[0]!==Z[2]&&Z[1]!==Z[2])if(F.faces.push(Z),z&&U[z]&&U[z].diffuseColor){K=K=!0;for(var J=U[z].diffuseColor,ue=0;ue<Z.length;ue++)F.vertexColors.push(J[0]),F.vertexColors.push(J[1]),F.vertexColors.push(J[2])}else ie=!0}}}if(F.vertexNormals.length===0&&F.computeNormals(),K===ie)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(C,k,I),A.next=11;break;case 7:return A.prev=7,A.t0=A.catch(0),y?y(A.t0):c.default._friendlyError("Error during parsing: "+A.t0.message),A.abrupt("return");case 11:return A.prev=11,f&&C.normalize(),v&&C.flipU(),_&&C.flipV(),M._decrementPreload(),typeof m=="function"&&m(C),A.finish(11);case 18:case"end":return A.stop()}},D,null,[[0,7,11,18]])}));return function(D){return L.apply(this,arguments)}}(),y):(c.default._friendlyFileLoadError(3,h),y?y():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),C},c.default.prototype.model=function(h){this._assert3d("model"),c.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var u=c.default;d.default=u},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../core/main"))&&g.__esModule?g:{default:g},l=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants"));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}t("./p5.Texture"),a.default.prototype.loadShader=function(u,h,p,m){a.default._validateParameters("loadShader",arguments),m=m||console.error;function y(){v._decrementPreload(),p&&p(f)}var f=new a.default.Shader,v=this,_=!1,x=!1;return this.loadStrings(u,function(C){f._vertSrc=C.join(`
`),x=!0,_&&y()},m),this.loadStrings(h,function(C){f._fragSrc=C.join(`
`),_=!0,x&&y()},m),f},a.default.prototype.createShader=function(u,h){return a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,u,h)},a.default.prototype.createFilterShader=function(u){a.default._validateParameters("createFilterShader",arguments);var h=u.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,h=new a.default.Shader(this._renderer,h,u);return this._renderer.GL?h.ensureCompiledOnContext(this):h.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),h},a.default.prototype.shader=function(u){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),u.ensureCompiledOnContext(this),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(u){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=l.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(u){u!==l.IMAGE&&u!==l.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},a.default.prototype.textureWrap=function(u){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,p=(this._renderer.textureWrapX=u,this._renderer.textureWrapY=h,!0),m=!1,y=void 0;try{for(var f,v=this._renderer.textures.values()[Symbol.iterator]();!(p=(f=v.next()).done);p=!0)f.value.setWrapMode(u,h)}catch(_){m=!0,y=_}finally{try{p||v.return==null||v.return()}finally{if(m)throw y}}},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return a.default._validateParameters("normalMaterial",h),this._renderer.drawMode=l.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(u,h,p){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var m=a.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=m._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.emissiveMaterial=function(u,h,p,m){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var y=a.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.specularMaterial=function(u,h,p,m){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var y=a.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.shininess=function(u){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),this._renderer._useShininess=u=u<1?1:u,this},a.default.prototype.metalness=function(u){return this._assert3d("metalness"),u=1-Math.exp(-u/100),this._renderer._useMetalness=u,this},a.default.RendererGL.prototype._applyColorBlend=function(u,y){var p=this.GL,m=this.drawMode===l.TEXTURE,y=y||this.userFillShader||this.userStrokeShader||this.userPointShader||m||this.curBlendMode!==l.BLEND||u[u.length-1]<1||this._isErasing;return y!==this._isBlending&&(y||this.curBlendMode!==l.BLEND&&this.curBlendMode!==l.ADD?p.enable(p.BLEND):p.disable(p.BLEND),p.depthMask(!0),this._isBlending=y),this._applyBlendMode(),u},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case l.BLEND:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case l.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE);break;case l.REMOVE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ZERO,u.ONE_MINUS_SRC_ALPHA);break;case l.MULTIPLY:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA);break;case l.SCREEN:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_COLOR);break;case l.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case l.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case l.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case l.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case l.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var g=a.default;d.default=g},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(t,i,d){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(a,l){for(var b=0;b<l.length;b++){var g=l[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}o.default.prototype.camera=function(){var a;this._assert3d("camera");for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("camera",b),(a=this._renderer._curCamera).camera.apply(a,b),this},o.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("perspective",b),(a=this._renderer._curCamera).perspective.apply(a,b),this},o.default.prototype.linePerspective=function(a){if(o.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof o.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(a===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=a},o.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("ortho",b),(a=this._renderer._curCamera).ortho.apply(a,b),this},o.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var l=arguments.length,b=new Array(l),g=0;g<l;g++)b[g]=arguments[g];return o.default._validateParameters("frustum",b),(a=this._renderer._curCamera).frustum.apply(a,b),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new o.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},o.default.Camera=function(){function a(g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=g,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix,this.yScale=1}var l,b;return l=a,(b=[{key:"perspective",value:function(m,u,h,p){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),u===void 0&&(u=this.defaultAspectRatio),h===void 0&&(h=this.defaultCameraNear),p===void 0&&(p=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=u,this.cameraNear=h,this.cameraFar=p,this.projMatrix=o.default.Matrix.identity();var m=1/Math.tan(this.cameraFOV/2),y=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/u,0,0,0,0,-m*this.yScale,0,0,0,0,(p+h)*y,-1,0,0,2*p*h*y,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(S,M,h,p,m,y){S===void 0&&(S=-this._renderer.width/2),M===void 0&&(M=+this._renderer.width/2),h===void 0&&(h=-this._renderer.height/2),p===void 0&&(p=+this._renderer.height/2),m===void 0&&(m=0),y===void 0&&(y=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=m;var P=M-S,f=p-h,v=(this.cameraFar=y)-m,_=2/P,x=2/f*this.yScale,C=-2/v,M=-(M+S)/P,S=-(p+h)/f,P=-(y+m)/v;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,-x,0,0,0,0,C,0,M,S,P,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(S,M,h,p,m,y){S===void 0&&(S=.05*-this._renderer.width),M===void 0&&(M=.05*+this._renderer.width),h===void 0&&(h=.05*+this._renderer.height),p===void 0&&(p=.05*-this._renderer.height),m===void 0&&(m=this.defaultCameraNear),y===void 0&&(y=this.defaultCameraFar),this.cameraNear=m;var P=M-S,f=p-h,v=(this.cameraFar=y)-m,_=2*m/P,x=2*m/f*this.yScale,C=-2*y*m/v,M=(M+S)/P,S=(p+h)/f,P=-(y+m)/v;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,-x,0,0,M,S,P,-1,0,0,C,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(_,u,h,p){var m=this.centerX,y=this.centerY,f=this.centerZ,v=(m-=this.eyeX,y-=this.eyeY,f-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),_=(v.rotate(this._renderer._pInst._toRadians(_),u,h,p),[m*v.mat4[0]+y*v.mat4[4]+f*v.mat4[8],m*v.mat4[1]+y*v.mat4[5]+f*v.mat4[9],m*v.mat4[2]+y*v.mat4[6]+f*v.mat4[10]]);_[0]+=this.eyeX,_[1]+=this.eyeY,_[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,_[0],_[1],_[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(g){var u=this._getLocalAxes();this._rotateView(g,u.y[0],u.y[1],u.y[2])}},{key:"tilt",value:function(g){var u=this._getLocalAxes();this._rotateView(g,u.x[0],u.x[1],u.x[2])}},{key:"lookAt",value:function(g,u,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,g,u,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(g,u,h,p,m,y,f,v,_){return g===void 0&&(g=this.defaultEyeX,u=this.defaultEyeY,h=this.defaultEyeZ,p=g,m=u,v=1,_=f=y=0),this.eyeX=g,this.eyeY=u,this.eyeZ=h,p!==void 0&&(this.centerX=p,this.centerY=m,this.centerZ=y),f!==void 0&&(this.upX=f,this.upY=v,this.upZ=_),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),m=-g,this.cameraMatrix.translate([m,-u,-h]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(p,m,h){var y=this._getLocalAxes(),p=[y.x[0]*p,y.x[1]*p,y.x[2]*p],m=[y.y[0]*m,y.y[1]*m,y.y[2]*m],y=[y.z[0]*h,y.z[1]*h,y.z[2]*h];this.camera(this.eyeX+p[0]+m[0]+y[0],this.eyeY+p[1]+m[1]+y[1],this.eyeZ+p[2]+m[2]+y[2],this.centerX+p[0]+m[0]+y[0],this.centerY+p[1]+m[1]+y[1],this.centerZ+p[2]+m[2]+y[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(g,u,h){var p=g-this.eyeX,m=u-this.eyeY,y=h-this.eyeZ;this.camera(g,u,h,this.centerX+p,this.centerY+m,this.centerZ+y,this.upX,this.upY,this.upZ)}},{key:"set",value:function(g){for(var u=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];u<h.length;u++){var p=h[u];this[p]=g[p]}this.cameraMatrix=g.cameraMatrix.copy(),this.projMatrix=g.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(g,u,h){var p,m,y,f,v,_,x,C,M,S,P,L,D,k,I,A,F,N;h===0?this.set(g):h===1?this.set(u):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=g.projMatrix.mat4[0]*Math.pow(u.projMatrix.mat4[0]/g.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=g.projMatrix.mat4[5]*Math.pow(u.projMatrix.mat4[5]/g.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),f=new o.default.Vector(g.eyeX,g.eyeY,g.eyeZ),v=new o.default.Vector(u.eyeX,u.eyeY,u.eyeZ),A=new o.default.Vector(g.centerX,g.centerY,g.centerZ),N=new o.default.Vector(u.centerX,u.centerY,u.centerZ),y=o.default.Vector.dist(f,A),p=o.default.Vector.dist(v,N),p=y*Math.pow(p/y,h),y=o.default.Vector.sub(f,v),m=1,1e-6<(F=(k=f.copy().sub(v).sub(A).add(N)).magSq())&&(m=o.default.Vector.dot(y,k)/F,m=Math.max(0,Math.min(m,1))),y=o.default.Vector.lerp(o.default.Vector.lerp(f,A,m),o.default.Vector.lerp(v,N,m),h),k=g.cameraMatrix.createSubMatrix3x3(),F=u.cameraMatrix.createSubMatrix3x3(),f=k.row(2),A=F.row(2),v=k.row(1),N=F.row(1),g=new o.default.Vector,u=new o.default.Vector,_=new o.default.Vector,x=new o.default.Vector,1-(C=.5*((k=(F=F.mult3x3(k.copy().transpose3x3())).diagonal())[0]+k[1]+k[2]-1))<1e-7?(g.set(o.default.Vector.lerp(f,A,h)).normalize(),_.set(g).mult(m*p).add(y),x.set(g).mult((m-1)*p).add(y),u.set(o.default.Vector.lerp(v,N,h)).normalize()):(A=1/(1-C),N=Math.max(k[0],k[1],k[2]),L=F.mat3[1]+F.mat3[3],D=F.mat3[2]+F.mat3[6],I=F.mat3[5]+F.mat3[7],N=N===k[0]?(S=.5*L*(A/=M=Math.sqrt((k[0]-C)*A)),P=.5*D*A,.5*(F.mat3[7]-F.mat3[5])/M):N===k[1]?(P=.5*I*(A/=S=Math.sqrt((k[1]-C)*A)),M=.5*L*A,.5*(F.mat3[2]-F.mat3[6])/S):(M=.5*D*(A/=P=Math.sqrt((k[2]-C)*A)),S=.5*I*A,.5*(F.mat3[3]-F.mat3[1])/P),L=h*Math.atan2(N,C),D=Math.cos(L),k=Math.sin(L),(N=new o.default.Matrix("mat3",[D+(I=1-D)*M*M,I*(A=M*S)+k*P,I*(F=P*M)-k*S,I*A-k*P,D+I*S*S,I*(h=S*P)+k*M,I*F+k*S,I*h-k*M,D+I*P*P])).multiplyVec3(f,g),_.set(g).mult(m*p).add(y),x.set(g).mult((m-1)*p).add(y),N.multiplyVec3(v,u)),this.camera(_.x,_.y,_.z,x.x,x.y,x.z,u.x,u.y,u.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var g=new o.default.Camera(this._renderer);return g.cameraFOV=this.cameraFOV,g.aspectRatio=this.aspectRatio,g.eyeX=this.eyeX,g.eyeY=this.eyeY,g.eyeZ=this.eyeZ,g.centerX=this.centerX,g.centerY=this.centerY,g.centerZ=this.centerZ,g.upX=this.upX,g.upY=this.upY,g.upZ=this.upZ,g.cameraNear=this.cameraNear,g.cameraFar=this.cameraFar,g.cameraType=this.cameraType,g.cameraMatrix=this.cameraMatrix.copy(),g.projMatrix=this.projMatrix.copy(),g.yScale=this.yScale,g}},{key:"_getLocalAxes",value:function(){var g=this.eyeX-this.centerX,u=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,f=Math.sqrt(g*g+u*u+h*h),f=(f!==0&&(g/=f,u/=f,h/=f),this.upX),p=(v=this.upY)*h-(_=this.upZ)*u,m=-f*h+_*g,y=f*u-v*g,f=u*y-h*m,v=-g*y+h*p,_=g*m-u*p,x=Math.sqrt(p*p+m*m+y*y),x=(x!==0&&(p/=x,m/=x,y/=x),Math.sqrt(f*f+v*v+_*_));return x!==0&&(f/=x,v/=x,_/=x),{x:[p,m,y],y:[f,v,_],z:[g,u,h]}}},{key:"_orbit",value:function(g,x,_){var m=this.eyeX-this.centerX,y=this.eyeY-this.centerY,f=this.eyeZ-this.centerZ,p=Math.hypot(m,y,f),m=new o.default.Vector(m,y,f).normalize(),y=new o.default.Vector(this.upX,this.upY,this.upZ).normalize(),f=o.default.Vector.cross(y,m).normalize(),v=o.default.Vector.cross(f,y),_=((p=(p*=Math.pow(10,_))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,o.default.Vector.dot(m,y))))+x),x=g;(_<=0||_>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),y.mult(Math.cos(_)),v.mult(Math.cos(x)*Math.sin(_)),f.mult(Math.sin(x)*Math.sin(_)),m.set(y).add(v).add(f),this.eyeX=p*m.x+this.centerX,this.eyeY=p*m.y+this.centerY,this.eyeZ=p*m.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(_,x,M){var m=this.eyeX-this.centerX,y=this.eyeY-this.centerY,f=this.eyeZ-this.centerZ,p=Math.hypot(m,y,f),m=new o.default.Vector(m,y,f).normalize(),y=new o.default.Vector(this.upX,this.upY,this.upZ),f=o.default.Vector.cross(y,m).normalize(),v=o.default.Vector.cross(m,f),S=Math.atan2(x,_),S=(v.mult(Math.sin(S)),f.mult(Math.cos(S)).add(v),Math.sqrt(_*_+x*x)),v=o.default.Vector.cross(m,f),_=((p=(p*=Math.pow(10,M))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),Math.cos(S)),x=Math.sin(S),M=y.dot(m),S=y.dot(f),C=M*_+S*x,M=-M*x+S*_,S=y.dot(v);y.x=C*m.x+M*f.x+S*v.x,y.y=C*m.y+M*f.y+S*v.y,y.z=C*m.z+M*f.z+S*v.z,f.mult(-x),m.mult(_).add(f).mult(p),this.camera(m.x+this.centerX,m.y+this.centerY,m.z+this.centerZ,this.centerX,this.centerY,this.centerZ,y.x,y.y,y.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(l.prototype,b),a}(),o.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix)},t=o.default.Camera,d.default=t},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(t,i,d){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}t.default.DataArray=function(){function c(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,g=this,u=c;if(!(g instanceof u))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(b),this.initialLength=b}var a,l;return a=c,(l=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var b;this.length<this.data.length/2&&(b=1<<Math.ceil(Math.log2(this.length)),(b=new Float32Array(b)).set(this.data.subarray(0,this.length),0),this.data=b)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var b=arguments.length,g=new Array(b),u=0;u<b;u++)g[u]=arguments[u];this.ensureLength(this.length+g.length),this.data.set(g,this.length),this.length+=g.length}},{key:"slice",value:function(b,g){return this.data.slice(b,Math.min(g,this.length))}},{key:"subArray",value:function(b,g){return this.data.subarray(b,Math.min(g,this.length))}},{key:"ensureLength",value:function(b){for(;this.data.length<b;){var g=new Float32Array(2*this.data.length);g.set(this.data,0),this.data=g}}}])&&o(a.prototype,l),c}(),t=t.default.DataArray,d.default=t},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(L,i,d){function o(D){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(D)}function c(D){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(D)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(P=L("../core/main"))&&P.__esModule?P:{default:P},l=function(D){if(D&&D.__esModule)return D;if(D===null||c(D)!=="object"&&typeof D!="function")return{default:D};var k=u();if(k&&k.has(D))return k.get(D);var I,A={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(I in D){var N;Object.prototype.hasOwnProperty.call(D,I)&&((N=F?Object.getOwnPropertyDescriptor(D,I):null)&&(N.get||N.set)?Object.defineProperty(A,I,N):A[I]=D[I])}return A.default=D,k&&k.set(D,A),A}(L("../core/constants")),b=L("./p5.Texture"),g=L("./p5.RendererGL");function u(){var D;return typeof WeakMap!="function"?null:(D=new WeakMap,u=function(){return D},D)}function h(D,k){return function(I){if(Array.isArray(I))return I}(D)||function(I,A){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var F=[],N=!0,U=!1,W=void 0;try{for(var G,z=I[Symbol.iterator]();!(N=(G=z.next()).done)&&(F.push(G.value),!A||F.length!==A);N=!0);}catch(Y){U=!0,W=Y}finally{try{N||z.return==null||z.return()}finally{if(U)throw W}}return F}}(D,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(D,k,I){return k in D?Object.defineProperty(D,k,{value:I,enumerable:!0,configurable:!0,writable:!0}):D[k]=I,D}function m(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")}function y(D,k){for(var I=0;I<k.length;I++){var A=k[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(D,A.key,A)}}function f(D,k,I){k&&y(D.prototype,k)}function v(D,k,I){return(v=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(U,F,N){var U=function(W,G){for(;!Object.prototype.hasOwnProperty.call(W,G)&&(W=C(W))!==null;);return W}(U,F);if(U)return(U=Object.getOwnPropertyDescriptor(U,F)).get?U.get.call(N):U.value})(D,k,I||D)}function _(D,k){return(_=Object.setPrototypeOf||function(I,A){return I.__proto__=A,I})(D,k)}function x(D){return function(){var k,I=C(D),I=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=C(this).constructor,Reflect.construct(I,arguments,k)):I.apply(this,arguments),this);if(!k||c(k)!=="object"&&typeof k!="function"){if(I!==void 0)return I;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function C(D){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(D)}var M=function(D){var k=A;if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),D&&_(k,D);var I=x(A);function A(F){var N;return m(this,A),(N=I.call(this,F.target._renderer)).fbo=F,N.yScale=-1,N}return f(A,[{key:"_computeCameraDefaultSettings",value:function(){v(C(A.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),A}(a.default.Camera),S=(a.default.FramebufferCamera=M,function(){function D(k,I){m(this,D),this.framebuffer=k,this.property=I}return f(D,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),D}()),P=(a.default.FramebufferTexture=S,function(){function D(k){var I=this,A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},F=(m(this,D),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=A.format||l.UNSIGNED_BYTE,this.channels=A.channels||(k._renderer._pInst._glAttributes.alpha?l.RGBA:l.RGB),this.useDepth=A.depth===void 0||A.depth,this.depthFormat=A.depthFormat||l.FLOAT,this.textureFiltering=A.textureFiltering||l.LINEAR,A.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof A.antialias=="number"?this.antialiasSamples=A.antialias:this.antialiasSamples=A.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==l.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=A.density||k.pixelDensity(),k._renderer.GL);if(this.gl=F,A.width&&A.height?(N=k._renderer._adjustDimensions(A.width,A.height),this.width=N.adjustedWidth,this.height=N.adjustedHeight,this._autoSized=!1):(A.width===void 0!=(A.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),A.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(A.stencil===void 0||A.stencil),this.framebuffer=F.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=F.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var N=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=N,this.draw(function(){return I.target.clear()})}return f(D,[{key:"resize",value:function(k,I){this._autoSized=!1;var A=this.target._renderer._adjustDimensions(k,I);k=A.adjustedWidth,I=A.adjustedHeight,this.width=k,this.height=I,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===l.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===l.WEBGL&&this.depthFormat===l.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=l.UNSIGNED_INT),[l.UNSIGNED_BYTE,l.FLOAT,l.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.useDepth&&![l.UNSIGNED_INT,l.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=l.FLOAT),(0,b.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==l.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===l.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=l.UNSIGNED_INT),k.halfFloat||this.format!==l.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=l.UNSIGNED_BYTE),this.channels===l.RGB&&[l.FLOAT,l.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=l.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,I=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),A=k.getParameter(k.FRAMEBUFFER_BINDING),F=k.createTexture();if(!F)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,F);var N=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,N.internalFormat,this.width*this.density,this.height*this.density,0,N.format,N.type,null),this.colorTexture=F,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,F,0),this.useDepth){var F=k.createTexture();if(!F)throw new Error("Unable to create depth texture");var U=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,F),k.texImage2D(k.TEXTURE_2D,0,U.internalFormat,this.width*this.density,this.height*this.density,0,U.format,U.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),N.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(U=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),U.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new S(this,"depthTexture"),F=k.NEAREST,this.depthP5Texture=new a.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new S(this,"colorTexture"),N=this.textureFiltering===l.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new a.default.Texture(this.target._renderer,this.color,{minFilter:N,magFilter:N}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,I),k.bindFramebuffer(k.FRAMEBUFFER,A)}},{key:"_glColorFormat",value:function(){var k,I,A=this.gl,F=this.format===l.FLOAT?A.FLOAT:this.format===l.HALF_FLOAT?this.target.webglVersion===l.WEBGL2?A.HALF_FLOAT:A.getExtension("OES_texture_half_float").HALF_FLOAT_OES:A.UNSIGNED_BYTE,N=this.channels===l.RGBA?A.RGBA:A.RGB;return{internalFormat:this.target.webglVersion===l.WEBGL2?(p(I={},A.FLOAT,p({},A.RGBA,A.RGBA32F)),p(I,A.HALF_FLOAT,p({},A.RGBA,A.RGBA16F)),p(I,A.UNSIGNED_BYTE,(p(k={},A.RGBA,A.RGBA8),p(k,A.RGB,A.RGB8),k)),I[F][N]):this.format===l.HALF_FLOAT?A.RGBA:N,format:N,type:F}}},{key:"_glDepthFormat",value:function(){var A=this.gl,k=this.useStencil?this.depthFormat===l.FLOAT?A.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===l.WEBGL2?A.UNSIGNED_INT_24_8:A.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===l.FLOAT?A.FLOAT:A.UNSIGNED_INT,I=this.useStencil?A.DEPTH_STENCIL:A.DEPTH_COMPONENT,A=this.useStencil?this.depthFormat===l.FLOAT?A.DEPTH32F_STENCIL8:this.target.webglVersion===l.WEBGL2?A.DEPTH24_STENCIL8:A.DEPTH_STENCIL:this.target.webglVersion===l.WEBGL2?this.depthFormat===l.FLOAT?A.DEPTH_COMPONENT32F:A.DEPTH_COMPONENT24:A.DEPTH_COMPONENT;return{internalFormat:A,format:I,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.color,k=this.depth,I=this.colorRenderbuffer,A=this.depthRenderbuffer,F=(this._deleteTexture(F),k&&this._deleteTexture(k),this.gl);I&&F.deleteRenderbuffer(I),A&&F.deleteRenderbuffer(A),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new M(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,I=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&I.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var A=0,F=I;A<F.length;A++){var U=h(F[A],2),N=U[0],U=U[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,N,U)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,I=this.target._renderer.activeFramebuffer(),A=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,g.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,A.format,A.type),I?k.bindFramebuffer(k.FRAMEBUFFER,I._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,I,A,F){a.default._validateParameters("p5.Framebuffer.get",arguments);var N=this._glColorFormat();if(k===void 0&&I===void 0)I=k=0,A=this.width,F=this.height;else if(A===void 0&&F===void 0)return(k<0||I<0||k>=this.width||I>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),I=this.target.constrain(I,0,this.height-1)),(0,g.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,I*this.density,N.format,N.type);k=this.target.constrain(k,0,this.width-1),I=this.target.constrain(I,0,this.height-1),A=this.target.constrain(A,1,this.width-k),F=this.target.constrain(F,1,this.height-I);for(var U=(0,g.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,I*this.density,A*this.density,F*this.density,N.format,N.type),W=new Uint8ClampedArray(A*F*this.density*this.density*4),G=(W.fill(255),N.type===this.gl.RGB?3:4),z=0;z<F*this.density;z++)for(var Y=0;Y<A*this.density;Y++)for(var K=0;K<4;K++){var ie,E=4*(z*A*this.density+Y)+K;K<G&&(ie=G==4?E:(z*A*this.density+Y)*G+K,W[E]=U[ie])}return k=new a.default.Image(A*this.density,F*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(W),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(A,F),k}},{key:"updatePixels",value:function(){var k=this.gl,I=(this.colorP5Texture.bindTexture(),this._glColorFormat()),A=I.format===k.RGBA?4:3,A=this.width*this.height*this.density*this.density*A,F=I.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof F)||this.pixels.length!==A)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,I.internalFormat,this.width*this.density,this.height*this.density,0,I.format,I.type,this.pixels),this.colorP5Texture.unbindTexture(),F=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),D}()),L=a.default.Framebuffer=P;d.default=L},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var m=b();if(m&&m.has(p))return m.get(p);var y,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var _;Object.prototype.hasOwnProperty.call(p,y)&&((_=v?Object.getOwnPropertyDescriptor(p,y):null)&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=p[y])}return f.default=p,m&&m.set(p,f),f}(t("../core/constants"));function b(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,b=function(){return p},p)}function g(p){return function(m){if(Array.isArray(m)){for(var y=0,f=new Array(m.length);y<m.length;y++)f[y]=m[y];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(p,m){for(var y=0;y<m.length;y++){var f=m[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(p,f.key,f)}}a.default.Geometry=function(){function p(f,v,_){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new a.default.DataArray,this.lineTangentsIn=new a.default.DataArray,this.lineTangentsOut=new a.default.DataArray,this.lineSides=new a.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new a.default.DataArray,this.detailX=f!==void 0?f:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,_ instanceof Function&&_.call(this)}var m,y;return m=p,(y=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var f=new a.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new a.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),_=0;_<this.vertices.length;_++){var x=this.vertices[_];f.x=Math.min(f.x,x.x),f.y=Math.min(f.y,x.y),f.z=Math.min(f.z,x.z),v.x=Math.max(v.x,x.x),v.y=Math.max(v.y,x.y),v.z=Math.max(v.z,x.z)}var C=new a.default.Vector(v.x-f.x,v.y-f.y,v.z-f.z),M=new a.default.Vector((f.x+v.x)/2,(f.y+v.y)/2,(f.z+v.z)/2);this.boundingBoxCache={min:f,max:v,size:C,offset:M}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var f=0;f<this.vertexColors.length;f+=4)if(this.vertexColors[f+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var f=0;f<this.lineVertexColors.length;f+=4)if(this.lineVertexColors[f+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(f,v){return v%2==0?1-f:f})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(f,v){return v%2==0?f:1-f})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var f,v,_,x=this.detailX+1,C=0;C<this.detailY;C++)for(var M=0;M<this.detailX;M++)v=(C+1)*x+M+1,this.faces.push([C*x+M,f=C*x+M+1,_=(C+1)*x+M]),this.faces.push([_,f,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],_=this.vertices[v[0]],C=this.vertices[v[1]],v=this.vertices[v[2]],C=a.default.Vector.sub(C,_),v=a.default.Vector.sub(v,_),_=a.default.Vector.cross(C,v),x=a.default.Vector.mag(_),C=x/(a.default.Vector.mag(C)*a.default.Vector.mag(v));return C===0||isNaN(C)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),_):(1<C&&(C=1),_.mult(Math.asin(C)/x))}},{key:"computeNormals",value:function(){var f,v=this,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:l.FLAT,x=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,C=this.vertexNormals,M=this.vertices,S=this.faces;if(_===l.SMOOTH){for(var P={},L=[],D=Math.pow(10,x===void 0?3:x),k=function(U){return Math.round(U*D)/D},I=function(U){return"".concat(k(U.x),",").concat(k(U.y),",").concat(k(U.z))},A=0;A<M.length;A++){var F=M[A],N=I(F);P[N]===void 0&&(P[N]=L.length,L.push(F))}S.forEach(function(U){for(var W=0;W<3;++W){var G=U[W],G=M[G],G=I(G);U[W]=P[G]}}),this.edges.forEach(function(U){for(var W=0;W<2;++W){var G=U[W],G=M[G],G=I(G);U[W]=P[G]}}),this.vertices=M=L}for(f=C.length=0;f<M.length;++f)C.push(new a.default.Vector);for(S.forEach(function(U,W){for(var G=v._getFaceNormal(W),z=0;z<3;++z){var Y=U[z];C[Y].add(G)}}),f=0;f<M.length;++f)C[f].normalize();return this}},{key:"averageNormals",value:function(){for(var f=0;f<=this.detailY;f++){var v=this.detailX+1,_=a.default.Vector.add(this.vertexNormals[f*v],this.vertexNormals[f*v+this.detailX]),_=a.default.Vector.div(_,2);this.vertexNormals[f*v]=_,this.vertexNormals[f*v+this.detailX]=_}return this}},{key:"averagePoleNormals",value:function(){for(var f=new a.default.Vector(0,0,0),v=0;v<this.detailX;v++)f.add(this.vertexNormals[v]);for(var f=a.default.Vector.div(f,this.detailX),_=0;_<this.detailX;_++)this.vertexNormals[_]=f;f=new a.default.Vector(0,0,0);for(var x=this.vertices.length-1;x>this.vertices.length-1-this.detailX;x--)f.add(this.vertexNormals[x]);f=a.default.Vector.div(f,this.detailX);for(var C=this.vertices.length-1;C>this.vertices.length-1-this.detailX;C--)this.vertexNormals[C]=f;return this}},{key:"_makeTriangleEdges",value:function(){for(var f=this.edges.length=0;f<this.faces.length;f++)this.edges.push([this.faces[f][0],this.faces[f][1]]),this.edges.push([this.faces[f][1],this.faces[f][2]]),this.edges.push([this.faces[f][2],this.faces[f][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var f,v=new Map,_=new Set,x=0;x<this.edges.length;x++){var C,M=this.edges[x-1],S=this.edges[x],P=this.vertices[S[0]],L=this.vertices[S[1]],D=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[0],4*(S[0]+1)):[0,0,0,0],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[1],4*(S[1]+1)):[0,0,0,0],I=L.copy().sub(P).normalize(),A=0<I.magSq();A&&this._addSegment(P,L,D,k,I),0<x&&M[1]===S[0]?_.has(S[0])||(_.add(S[0]),v.delete(S[0]),f&&A&&I.dot(f)<1-1e-8&&this._addJoin(P,f,I,D)):(A&&!_.has(S[0])&&((C=v.get(S[0]))?(this._addJoin(P,C.dir,I,D),v.delete(S[0]),_.add(S[0])):v.set(S[0],{point:P,dir:I.copy().mult(-1),color:D})),f&&!_.has(M[1])&&((C=v.get(M[1]))?(this._addJoin(this.vertices[M[1]],f,C.dir.copy().mult(-1),D),v.delete(M[1]),_.add(M[1])):v.set(M[1],{point:this.vertices[M[1]],dir:f,color:D}),f=void 0)),x!==this.edges.length-1||_.has(S[1])||((P=v.get(S[1]))?(this._addJoin(L,I,P.dir.copy().mult(-1),k),v.delete(S[1]),_.add(S[1])):v.set(S[1],{point:L,dir:I,color:k})),A&&(f=I)}var F=!0,N=!1,U=void 0;try{for(var W,G=v.values()[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var z=W.value,Y=z.point,K=z.dir,ie=z.color;this._addCap(Y,K,ie)}}catch(E){N=!0,U=E}finally{try{F||G.return==null||G.return()}finally{if(N)throw U}}return this}},{key:"_addSegment",value:function(M,S,_,x,C){var M=M.array(),S=S.array(),P=C.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var L=0,D=[this.lineTangentsIn,this.lineTangentsOut];L<D.length;L++)for(var k=D[L],I=0;I<6;I++)k.push.apply(k,g(P));return(C=this.lineVertices).push.apply(C,g(M).concat(g(S),g(M),g(S),g(S),g(M))),(C=this.lineVertexColors).push.apply(C,g(_).concat(g(x),g(_),g(x),g(x),g(_))),this}},{key:"_addCap",value:function(f,v,_){for(var x,C=f.array(),M=v.array(),S=[0,0,0],P=0;P<6;P++)(x=this.lineVertices).push.apply(x,g(C)),(x=this.lineTangentsIn).push.apply(x,g(M)),(x=this.lineTangentsOut).push.apply(x,S),(x=this.lineVertexColors).push.apply(x,g(_));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(f,v,_,x){for(var C,M=f.array(),S=v.array(),P=_.array(),L=0;L<12;L++)(C=this.lineVertices).push.apply(C,g(M)),(C=this.lineTangentsIn).push.apply(C,g(S)),(C=this.lineTangentsOut).push.apply(C,g(P)),(C=this.lineVertexColors).push.apply(C,g(x));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var f=this.vertices[0].copy(),v=this.vertices[0].copy(),_=0;_<this.vertices.length;_++)f.x=Math.max(f.x,this.vertices[_].x),v.x=Math.min(v.x,this.vertices[_].x),f.y=Math.max(f.y,this.vertices[_].y),v.y=Math.min(v.y,this.vertices[_].y),f.z=Math.max(f.z,this.vertices[_].z),v.z=Math.min(v.z,this.vertices[_].z);for(var x=a.default.Vector.lerp(f,v,.5),C=a.default.Vector.sub(f,v),M=200/Math.max(Math.max(C.x,C.y),C.z),S=0;S<this.vertices.length;S++)this.vertices[S].sub(x),this.vertices[S].mult(M)}return this}}])&&u(m.prototype,y),p}();var h=a.default.Geometry;d.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(b,i,d){b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(b=b("../core/main"))&&b.__esModule?b:{default:b};function c(g,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(g,p.key,p)}}var a=Array,l=function(g){return Array.isArray(g)},b=(typeof Float32Array<"u"&&(a=Float32Array,l=function(g){return Array.isArray(g)||g instanceof Float32Array}),o.default.Matrix=function(){function g(){var m=this,y=g;if(m instanceof y)return arguments.length&&((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])instanceof o.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var u,h,p;return u=g,p=[{key:"identity",value:function(m){return new o.default.Matrix(m)}}],(h=[{key:"set",value:function(m){var y=arguments;if(m instanceof o.default.Matrix?y=m.mat4:l(m)&&(y=m),y.length!==16)o.default._friendlyError("Expected 16 values but received ".concat(y.length,"."),"p5.Matrix.set");else for(var f=0;f<16;f++)this.mat4[f]=y[f];return this}},{key:"get",value:function(){return new o.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var m;return this.mat3!==void 0?((m=new o.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],m.mat3[1]=this.mat3[1],m.mat3[2]=this.mat3[2],m.mat3[3]=this.mat3[3],m.mat3[4]=this.mat3[4],m.mat3[5]=this.mat3[5],m.mat3[6]=this.mat3[6],m.mat3[7]=this.mat3[7],m.mat3[8]=this.mat3[8]):((m=new o.default.Matrix(this.p5)).mat4[0]=this.mat4[0],m.mat4[1]=this.mat4[1],m.mat4[2]=this.mat4[2],m.mat4[3]=this.mat4[3],m.mat4[4]=this.mat4[4],m.mat4[5]=this.mat4[5],m.mat4[6]=this.mat4[6],m.mat4[7]=this.mat4[7],m.mat4[8]=this.mat4[8],m.mat4[9]=this.mat4[9],m.mat4[10]=this.mat4[10],m.mat4[11]=this.mat4[11],m.mat4[12]=this.mat4[12],m.mat4[13]=this.mat4[13],m.mat4[14]=this.mat4[14],m.mat4[15]=this.mat4[15]),m}},{key:"transpose",value:function(m){var y,f,v,_,x,C;return m instanceof o.default.Matrix?(y=m.mat4[1],f=m.mat4[2],v=m.mat4[3],_=m.mat4[6],x=m.mat4[7],C=m.mat4[11],this.mat4[0]=m.mat4[0],this.mat4[1]=m.mat4[4],this.mat4[2]=m.mat4[8],this.mat4[3]=m.mat4[12],this.mat4[4]=y,this.mat4[5]=m.mat4[5],this.mat4[6]=m.mat4[9],this.mat4[7]=m.mat4[13],this.mat4[8]=f,this.mat4[9]=_,this.mat4[10]=m.mat4[10],this.mat4[11]=m.mat4[14],this.mat4[12]=v,this.mat4[13]=x,this.mat4[14]=C,this.mat4[15]=m.mat4[15]):l(m)&&(y=m[1],f=m[2],v=m[3],_=m[6],x=m[7],C=m[11],this.mat4[0]=m[0],this.mat4[1]=m[4],this.mat4[2]=m[8],this.mat4[3]=m[12],this.mat4[4]=y,this.mat4[5]=m[5],this.mat4[6]=m[9],this.mat4[7]=m[13],this.mat4[8]=f,this.mat4[9]=_,this.mat4[10]=m[10],this.mat4[11]=m[14],this.mat4[12]=v,this.mat4[13]=x,this.mat4[14]=C,this.mat4[15]=m[15]),this}},{key:"invert",value:function(U){U instanceof o.default.Matrix?(y=U.mat4[0],f=U.mat4[1],v=U.mat4[2],_=U.mat4[3],x=U.mat4[4],C=U.mat4[5],M=U.mat4[6],S=U.mat4[7],P=U.mat4[8],L=U.mat4[9],D=U.mat4[10],k=U.mat4[11],I=U.mat4[12],A=U.mat4[13],F=U.mat4[14],N=U.mat4[15]):l(U)&&(y=U[0],f=U[1],v=U[2],_=U[3],x=U[4],C=U[5],M=U[6],S=U[7],P=U[8],L=U[9],D=U[10],k=U[11],I=U[12],A=U[13],F=U[14],N=U[15]);var y,f,v,_,x,C,M,S,P,L,D,k,I,A,F,N,U=y*C-f*x,W=y*M-v*x,G=y*S-_*x,z=f*M-v*C,Y=f*S-_*C,K=v*S-_*M,ie=P*A-L*I,E=P*F-D*I,R=P*N-k*I,B=L*F-D*A,H=L*N-k*A,Z=D*N-k*F,te=U*Z-W*H+G*B+z*R-Y*E+K*ie;return te?(this.mat4[0]=(C*Z-M*H+S*B)*(te=1/te),this.mat4[1]=(v*H-f*Z-_*B)*te,this.mat4[2]=(A*K-F*Y+N*z)*te,this.mat4[3]=(D*Y-L*K-k*z)*te,this.mat4[4]=(M*R-x*Z-S*E)*te,this.mat4[5]=(y*Z-v*R+_*E)*te,this.mat4[6]=(F*G-I*K-N*W)*te,this.mat4[7]=(P*K-D*G+k*W)*te,this.mat4[8]=(x*H-C*R+S*ie)*te,this.mat4[9]=(f*R-y*H-_*ie)*te,this.mat4[10]=(I*Y-A*G+N*U)*te,this.mat4[11]=(L*G-P*Y-k*U)*te,this.mat4[12]=(C*E-x*B-M*ie)*te,this.mat4[13]=(y*B-f*E+v*ie)*te,this.mat4[14]=(A*W-I*z-F*U)*te,this.mat4[15]=(P*z-L*W+D*U)*te,this):null}},{key:"invert3x3",value:function(){var m=this.mat3[0],y=this.mat3[1],f=this.mat3[2],v=this.mat3[3],_=this.mat3[4],x=this.mat3[5],C=this.mat3[6],M=this.mat3[7],S=this.mat3[8],P=S*_-x*M,L=-S*v+x*C,D=M*v-_*C,k=m*P+y*L+f*D;return k?(this.mat3[0]=P*(k=1/k),this.mat3[1]=(-S*y+f*M)*k,this.mat3[2]=(x*y-f*_)*k,this.mat3[3]=L*k,this.mat3[4]=(S*m-f*C)*k,this.mat3[5]=(-x*m+f*v)*k,this.mat3[6]=D*k,this.mat3[7]=(-M*m+y*C)*k,this.mat3[8]=(_*m-y*v)*k,this):null}},{key:"transpose3x3",value:function(m){var y=(m=m===void 0?this.mat3:m)[1],f=m[2],v=m[5];return this.mat3[0]=m[0],this.mat3[1]=m[3],this.mat3[2]=m[6],this.mat3[3]=y,this.mat3[4]=m[4],this.mat3[5]=m[7],this.mat3[6]=f,this.mat3[7]=v,this.mat3[8]=m[8],this}},{key:"inverseTranspose",value:function(m){if(m=m.mat4,this.mat3===void 0?o.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=m[0],this.mat3[1]=m[1],this.mat3[2]=m[2],this.mat3[3]=m[4],this.mat3[4]=m[5],this.mat3[5]=m[6],this.mat3[6]=m[8],this.mat3[7]=m[9],this.mat3[8]=m[10]),m=this.invert3x3(),m)m.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var m=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],f=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],v=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],_=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],x=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],C=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],M=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],S=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],P=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],L=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return m*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*L+f*P+v*S-_*M+x*C}},{key:"mult",value:function(f){var y;if(f===this||f===this.mat4)y=this.copy().mat4;else if(f instanceof o.default.Matrix)y=f.mat4;else if(l(f))y=f;else{if(arguments.length!==16)return;y=arguments}var f=this.mat4[0],v=this.mat4[1],_=this.mat4[2],x=this.mat4[3];return this.mat4[0]=f*y[0]+v*y[4]+_*y[8]+x*y[12],this.mat4[1]=f*y[1]+v*y[5]+_*y[9]+x*y[13],this.mat4[2]=f*y[2]+v*y[6]+_*y[10]+x*y[14],this.mat4[3]=f*y[3]+v*y[7]+_*y[11]+x*y[15],f=this.mat4[4],v=this.mat4[5],_=this.mat4[6],x=this.mat4[7],this.mat4[4]=f*y[0]+v*y[4]+_*y[8]+x*y[12],this.mat4[5]=f*y[1]+v*y[5]+_*y[9]+x*y[13],this.mat4[6]=f*y[2]+v*y[6]+_*y[10]+x*y[14],this.mat4[7]=f*y[3]+v*y[7]+_*y[11]+x*y[15],f=this.mat4[8],v=this.mat4[9],_=this.mat4[10],x=this.mat4[11],this.mat4[8]=f*y[0]+v*y[4]+_*y[8]+x*y[12],this.mat4[9]=f*y[1]+v*y[5]+_*y[9]+x*y[13],this.mat4[10]=f*y[2]+v*y[6]+_*y[10]+x*y[14],this.mat4[11]=f*y[3]+v*y[7]+_*y[11]+x*y[15],f=this.mat4[12],v=this.mat4[13],_=this.mat4[14],x=this.mat4[15],this.mat4[12]=f*y[0]+v*y[4]+_*y[8]+x*y[12],this.mat4[13]=f*y[1]+v*y[5]+_*y[9]+x*y[13],this.mat4[14]=f*y[2]+v*y[6]+_*y[10]+x*y[14],this.mat4[15]=f*y[3]+v*y[7]+_*y[11]+x*y[15],this}},{key:"apply",value:function(f){var y;if(f===this||f===this.mat4)y=this.copy().mat4;else if(f instanceof o.default.Matrix)y=f.mat4;else if(l(f))y=f;else{if(arguments.length!==16)return;y=arguments}var f=this.mat4,v=f[0],_=f[4],x=f[8],C=f[12],v=(f[0]=y[0]*v+y[1]*_+y[2]*x+y[3]*C,f[4]=y[4]*v+y[5]*_+y[6]*x+y[7]*C,f[8]=y[8]*v+y[9]*_+y[10]*x+y[11]*C,f[12]=y[12]*v+y[13]*_+y[14]*x+y[15]*C,f[1]),_=f[5],x=f[9],C=f[13],v=(f[1]=y[0]*v+y[1]*_+y[2]*x+y[3]*C,f[5]=y[4]*v+y[5]*_+y[6]*x+y[7]*C,f[9]=y[8]*v+y[9]*_+y[10]*x+y[11]*C,f[13]=y[12]*v+y[13]*_+y[14]*x+y[15]*C,f[2]),_=f[6],x=f[10],C=f[14],v=(f[2]=y[0]*v+y[1]*_+y[2]*x+y[3]*C,f[6]=y[4]*v+y[5]*_+y[6]*x+y[7]*C,f[10]=y[8]*v+y[9]*_+y[10]*x+y[11]*C,f[14]=y[12]*v+y[13]*_+y[14]*x+y[15]*C,f[3]),_=f[7],x=f[11],C=f[15];return f[3]=y[0]*v+y[1]*_+y[2]*x+y[3]*C,f[7]=y[4]*v+y[5]*_+y[6]*x+y[7]*C,f[11]=y[8]*v+y[9]*_+y[10]*x+y[11]*C,f[15]=y[12]*v+y[13]*_+y[14]*x+y[15]*C,this}},{key:"scale",value:function(m,y,f){return m instanceof o.default.Vector?(y=m.y,f=m.z,m=m.x):m instanceof Array&&(y=m[1],f=m[2],m=m[0]),this.mat4[0]*=m,this.mat4[1]*=m,this.mat4[2]*=m,this.mat4[3]*=m,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=f,this.mat4[9]*=f,this.mat4[10]*=f,this.mat4[11]*=f,this}},{key:"rotate",value:function(U,H,B,v){H instanceof o.default.Vector?(B=H.y,v=H.z,H=H.x):H instanceof Array&&(B=H[1],v=H[2],H=H[0]);var _=Math.sqrt(H*H+B*B+v*v),_=(H*=1/_,B*=1/_,v*=1/_,this.mat4[0]),x=this.mat4[1],C=this.mat4[2],M=this.mat4[3],S=this.mat4[4],P=this.mat4[5],L=this.mat4[6],D=this.mat4[7],k=this.mat4[8],I=this.mat4[9],A=this.mat4[10],F=this.mat4[11],N=Math.sin(U),U=Math.cos(U),W=1-U,G=H*H*W+U,z=B*H*W+v*N,Y=v*H*W-B*N,K=H*B*W-v*N,ie=B*B*W+U,E=v*B*W+H*N,R=H*v*W+B*N,B=B*v*W-H*N,H=v*v*W+U;return this.mat4[0]=_*G+S*z+k*Y,this.mat4[1]=x*G+P*z+I*Y,this.mat4[2]=C*G+L*z+A*Y,this.mat4[3]=M*G+D*z+F*Y,this.mat4[4]=_*K+S*ie+k*E,this.mat4[5]=x*K+P*ie+I*E,this.mat4[6]=C*K+L*ie+A*E,this.mat4[7]=M*K+D*ie+F*E,this.mat4[8]=_*R+S*B+k*H,this.mat4[9]=x*R+P*B+I*H,this.mat4[10]=C*R+L*B+A*H,this.mat4[11]=M*R+D*B+F*H,this}},{key:"translate",value:function(v){var y=v[0],f=v[1],v=v[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*f+this.mat4[8]*v,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*f+this.mat4[9]*v,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*f+this.mat4[10]*v,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*f+this.mat4[11]*v}},{key:"rotateX",value:function(m){this.rotate(m,1,0,0)}},{key:"rotateY",value:function(m){this.rotate(m,0,1,0)}},{key:"rotateZ",value:function(m){this.rotate(m,0,0,1)}},{key:"perspective",value:function(_,y,f,v){var _=1/Math.tan(_/2),x=1/(f-v);return this.mat4[0]=_/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=_,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(v+f)*x,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*v*f*x,this.mat4[15]=0,this}},{key:"ortho",value:function(m,y,f,v,_,x){var C=1/(m-y),M=1/(f-v),S=1/(_-x);return this.mat4[0]=-2*C,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*M,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*S,this.mat4[11]=0,this.mat4[12]=(m+y)*C,this.mat4[13]=(v+f)*M,this.mat4[14]=(x+_)*S,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(m,y,f,v){var _=new Array(4),x=this.mat4;return _[0]=x[0]*m+x[4]*y+x[8]*f+x[12]*v,_[1]=x[1]*m+x[5]*y+x[9]*f+x[13]*v,_[2]=x[2]*m+x[6]*y+x[10]*f+x[14]*v,_[3]=x[3]*m+x[7]*y+x[11]*f+x[15]*v,_}},{key:"multiplyPoint",value:function(f){var v=f.x,y=f.y,f=f.z,v=this.multiplyVec4(v,y,f,1);return new o.default.Vector(v[0],v[1],v[2])}},{key:"multiplyAndNormalizePoint",value:function(f){var v=f.x,y=f.y,f=f.z,v=this.multiplyVec4(v,y,f,1);return v[0]/=v[3],v[1]/=v[3],v[2]/=v[3],new o.default.Vector(v[0],v[1],v[2])}},{key:"multiplyDirection",value:function(f){var v=f.x,y=f.y,f=f.z,v=this.multiplyVec4(v,y,f,0);return new o.default.Vector(v[0],v[1],v[2])}},{key:"mult3x3",value:function(f){var y;if(f===this||f===this.mat3)y=this.copy().mat3;else if(f instanceof o.default.Matrix)y=f.mat3;else if(l(f))y=f;else{if(arguments.length!==9)return;y=arguments}var f=this.mat3[0],v=this.mat3[1],_=this.mat3[2];return this.mat3[0]=f*y[0]+v*y[3]+_*y[6],this.mat3[1]=f*y[1]+v*y[4]+_*y[7],this.mat3[2]=f*y[2]+v*y[5]+_*y[8],f=this.mat3[3],v=this.mat3[4],_=this.mat3[5],this.mat3[3]=f*y[0]+v*y[3]+_*y[6],this.mat3[4]=f*y[1]+v*y[4]+_*y[7],this.mat3[5]=f*y[2]+v*y[5]+_*y[8],f=this.mat3[6],v=this.mat3[7],_=this.mat3[8],this.mat3[6]=f*y[0]+v*y[3]+_*y[6],this.mat3[7]=f*y[1]+v*y[4]+_*y[7],this.mat3[8]=f*y[2]+v*y[5]+_*y[8],this}},{key:"column",value:function(m){return new o.default.Vector(this.mat3[3*m],this.mat3[3*m+1],this.mat3[3*m+2])}},{key:"row",value:function(m){return new o.default.Vector(this.mat3[m],this.mat3[m+3],this.mat3[m+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(m,y){return(y=y===void 0?m.copy():y).x=this.row(0).dot(m),y.y=this.row(1).dot(m),y.z=this.row(2).dot(m),y}},{key:"createSubMatrix3x3",value:function(){var m=new o.default.Matrix("mat3");return m.mat3[0]=this.mat4[0],m.mat3[1]=this.mat4[1],m.mat3[2]=this.mat4[2],m.mat3[3]=this.mat4[4],m.mat3[4]=this.mat4[5],m.mat3[5]=this.mat4[6],m.mat3[6]=this.mat4[8],m.mat3[7]=this.mat4[9],m.mat3[8]=this.mat4[10],m}}])&&c(u.prototype,h),p&&c(u,p),g}(),o.default.Matrix);d.default=b},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(t,i,d){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,a){for(var l=0;l<a.length;l++){var b=a[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}t.default.RenderBuffer=function(){function c(b,g,u,h,p,m){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=b,this.src=g,this.dst=u,this.attr=h,this._renderer=p,this.map=m}var a,l;return a=c,(l=[{key:"_prepareBuffer",value:function(b,g){var u,h,p,f=g.attributes,m=this._renderer.GL,y=b.model||b,f=f[this.attr];f&&(u=b[this.dst],0<(h=y[this.src]).length?((p=!u)&&(b[this.dst]=u=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,u),!p&&y.dirtyFlags[this.src]===!1||(p=(b=this.map)?b(h):h,this._renderer._bindBuffer(u,m.ARRAY_BUFFER,p),y.dirtyFlags[this.src]=!1),g.enableAttrib(f,this.size)):(b=f.location)!==-1&&this._renderer.registerEnabled.has(b)&&(m.disableVertexAttribArray(b),this._renderer.registerEnabled.delete(b)))}}])&&o(a.prototype,l),c}(),t=t.default.RenderBuffer,d.default=t},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(t,i,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var m=b();if(m&&m.has(p))return m.get(p);var y,f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var _;Object.prototype.hasOwnProperty.call(p,y)&&((_=v?Object.getOwnPropertyDescriptor(p,y):null)&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=p[y])}return f.default=p,m&&m.set(p,f),f}(t("../core/constants"));function b(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,b=function(){return p},p)}function g(p){return function(m){if(Array.isArray(m)){for(var y=0,f=new Array(m.length);y<m.length;y++)f[y]=m[y];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(p){return this.immediateMode.shapeMode=p!==void 0?p:l.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var u={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},h=(a.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==l.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},a.default.RendererGL.prototype.vertex=function(p,m){if(this.immediateMode.shapeMode===l.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in u){var f=u[y],y=this.immediateMode.geometry[y];y.push.apply(y,g(y.slice(y.length-3*f,y.length-2*f)).concat(g(y.slice(y.length-f,y.length))))}var v,_,x=v=_=0,C=(arguments.length===3?x=arguments[2]:arguments.length===4?(v=arguments[2],_=arguments[3]):arguments.length===5&&(x=arguments[2],v=arguments[3],_=arguments[4]),new a.default.Vector(p,m,x)),C=(this.immediateMode.geometry.vertices.push(C),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),C=(this.immediateMode.geometry.vertexColors.push(C[0],C[1],C[2],C[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(C[0],C[1],C[2],C[3]),this.textureMode!==l.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(v/=this._tex.width,_/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(v,_),this.immediateMode._bezierVertex[0]=p,this.immediateMode._bezierVertex[1]=m,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=p,this.immediateMode._quadraticVertex[1]=m,this.immediateMode._quadraticVertex[2]=x,this},a.default.RendererGL.prototype.normal=function(p,m,y){return p instanceof a.default.Vector?this._currentNormal=p:this._currentNormal=new a.default.Vector(p,m,y),this},a.default.RendererGL.prototype.endShape=function(p,m,y,f,v,_){var x,C=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===l.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===l.TESS&&(this.immediateMode.shapeMode,l.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),x=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==l.LINE_STRIP&&this.immediateMode.shapeMode!==l.LINES||(this.immediateMode.shapeMode=l.TRIANGLE_FAN,x=!0),this.immediateMode.shapeMode===l.QUADS?this.immediateMode.shapeMode=l.TRIANGLES:this.immediateMode.shapeMode===l.QUAD_STRIP&&(this.immediateMode.shapeMode=l.TRIANGLE_STRIP),this._doFill&&!x&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(C),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(p){var m;this.immediateMode.geometry.vertices.length!==0&&(m=this._doStroke,p=p===l.CLOSE,m&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,p),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),m=this.immediateMode.shapeMode===l.TESS,p=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||m||p)&&this.immediateMode.shapeMode!==l.LINES&&this._tesselateShape())},a.default.RendererGL.prototype._calculateEdges=function(p,m,y){var f=[],v=0,_=this.immediateMode.contourIndices.slice(),x=0;switch(p){case l.TRIANGLE_STRIP:for(v=0;v<m.length-2;v++)f.push([v,v+1]),f.push([v,v+2]);f.push([v,v+1]);break;case l.TRIANGLE_FAN:for(v=1;v<m.length-1;v++)f.push([0,v]),f.push([v,v+1]);f.push([0,m.length-1]);break;case l.TRIANGLES:for(v=0;v<m.length-2;v+=3)f.push([v,v+1]),f.push([v+1,v+2]),f.push([v+2,v]);break;case l.LINES:for(v=0;v<m.length-1;v+=2)f.push([v,v+1]);break;case l.QUADS:for(v=0;v<m.length-5;v+=6)f.push([v,v+1]),f.push([v+1,v+2]),f.push([v+3,v+5]),f.push([v+4,v+5]);break;case l.QUAD_STRIP:for(v=0;v<m.length-2;v+=2)f.push([v,v+1]),f.push([v,v+2]),f.push([v+1,v+3]);f.push([v,v+1]);break;default:for(v=0;v<m.length;v++)v+1<m.length&&v+1!==_[0]?f.push([v,v+1]):((y||x)&&f.push([v,x]),0<_.length&&(x=_.shift()))}return p!==l.TESS&&y&&f.push([m.length-1,0]),f},a.default.RendererGL.prototype._tesselateShape=function(){for(var p=this,m=(this.immediateMode.shapeMode=l.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),m.push([])),m[m.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var f,v=this._triangulate(m),_=this.immediateMode.geometry.vertices,x=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),C=0,M=v.length;C<M;C+=a.default.RendererGL.prototype.tessyVertexSize)x.push.apply(x,g(v.slice(C+5,C+9))),this.normal.apply(this,g(v.slice(C+9,C+12))),this.vertex.apply(this,g(v.slice(C,C+5)));this.geometryBuilder&&(f=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(S){return S.map(function(P){if(!f.has(P)){var L=_[P],D=p.immediateMode.geometry.vertices.findIndex(function(W){return L.x===W.x&&L.y===W.y&&L.z===W.z});if(D===-1){for(var k=1/0,I=0,A=0;A<p.immediateMode.geometry.vertices.length;A++){var N=p.immediateMode.geometry.vertices[A],U=L.x-N.x,F=L.y-N.y,N=L.z-N.z,U=U*U+F*F+N*N;U<k&&(k=U,I=A)}D=I}f.set(P,D)}return f.get(P)})})),this.immediateMode.geometry.vertexColors=x},a.default.RendererGL.prototype._drawImmediateFill=function(){var p,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,f=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,p=this._getImmediateFillShader(),this._setFillUniforms(p),!0),v=!1,_=void 0;try{for(var x,C=this.immediateMode.buffers.fill[Symbol.iterator]();!(f=(x=C.next()).done);f=!0)x.value._prepareBuffer(this.immediateMode.geometry,p)}catch(M){v=!0,_=M}finally{try{f||C.return==null||C.return()}finally{if(v)throw _}}if(p.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),m===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,m)}catch{console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode")}p.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var p=this.GL,m=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(m),!0),f=!1,v=void 0;try{for(var _,x=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(_=x.next()).done);y=!0)_.value._prepareBuffer(this.immediateMode.geometry,m)}catch(C){f=!0,v=C}finally{try{y||x.return==null||x.return()}finally{if(f)throw v}}m.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),p.drawArrays(p.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),m.unbindShader()},a.default.RendererGL);d.default=h},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(t,i,d){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var a=(g=t("../core/main"))&&g.__esModule?g:{default:g},l=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var h=b();if(h&&h.has(u))return h.get(u);var p,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var f;Object.prototype.hasOwnProperty.call(u,p)&&((f=y?Object.getOwnPropertyDescriptor(u,p):null)&&(f.get||f.set)?Object.defineProperty(m,p,f):m[p]=u[p])}return m.default=u,h&&h.set(u,m),m}(t("../core/constants")));function b(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,b=function(){return u},u)}a.default.RendererGL.prototype.freeGeometry=function(u){u.gid?this._freeBuffers(u.gid):console.warn("The model you passed to freeGeometry does not have an id!")},a.default.RendererGL.prototype._initBufferDefaults=function(u){var h;return this._freeBuffers(u),1e3<Object.keys(this.retainedMode.geometry).length&&(h=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(h)),this.retainedMode.geometry[u]={}},a.default.RendererGL.prototype._freeBuffers=function(u){var h,p=this.retainedMode.geometry[u];function m(y){var f=!0,v=!1,_=void 0;try{for(var x,C=y[Symbol.iterator]();!(f=(x=C.next()).done);f=!0){var M=x.value;p[M.dst]&&(h.deleteBuffer(p[M.dst]),p[M.dst]=null)}}catch(S){v=!0,_=S}finally{try{f||C.return==null||C.return()}finally{if(v)throw _}}}p&&(delete this.retainedMode.geometry[u],h=this.GL,p.indexBuffer&&h.deleteBuffer(p.indexBuffer),m(this.retainedMode.buffers.stroke),m(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(v,h){var p,m,y,f=this.GL,v=this._initBufferDefaults(v),_=(v.model=h,v.indexBuffer);return h.faces.length?(_=_||(v.indexBuffer=f.createBuffer()),y=(m=(p=a.default.RendererGL.prototype._flatten(h.faces)).some(function(x){return 65535<x}))?Uint32Array:Uint16Array,this._bindBuffer(_,f.ELEMENT_ARRAY_BUFFER,p,y),v.indexBufferType=m?f.UNSIGNED_INT:f.UNSIGNED_SHORT,v.vertexCount=3*h.faces.length):(_&&(f.deleteBuffer(_),v.indexBuffer=null),v.vertexCount=h.vertices?h.vertices.length:0),v.lineVertexCount=h.lineVertices?h.lineVertices.length/3:0,v},a.default.RendererGL.prototype.drawBuffers=function(u){var h=this.GL,p=this.retainedMode.geometry[u];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[u].vertexCount){this._useVertexColor=0<p.model.vertexColors.length;var m=this._getRetainedFillShader(),y=(this._setFillUniforms(m),!0),f=!1,v=void 0;try{for(var _,x=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(_=x.next()).done);y=!0)_.value._prepareBuffer(p,m)}catch(L){f=!0,v=L}finally{try{y||x.return==null||x.return()}finally{if(f)throw v}}m.disableRemainingAttributes(),p.indexBuffer&&this._bindBuffer(p.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,p.model.hasFillTransparency()),this._drawElements(h.TRIANGLES,u),m.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<p.lineVertexCount){this._useLineColor=0<p.model.vertexStrokeColors.length;var C=this._getRetainedStrokeShader(),M=(this._setStrokeUniforms(C),!0),f=!1,v=void 0;try{for(var S,P=this.retainedMode.buffers.stroke[Symbol.iterator]();!(M=(S=P.next()).done);M=!0)S.value._prepareBuffer(p,C)}catch(k){f=!0,v=k}finally{try{M||P.return==null||P.return()}finally{if(f)throw v}}C.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,p.model.hasStrokeTransparency()),this._drawArrays(h.TRIANGLES,u),C.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(p),this},a.default.RendererGL.prototype.drawBuffersScaled=function(u,h,p,m){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,p,m),this.drawBuffers(u)}finally{this.uMVMatrix=y}},a.default.RendererGL.prototype._drawArrays=function(u,h){return this.GL.drawArrays(u,0,this.retainedMode.geometry[h].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(u,p){var p=this.retainedMode.geometry[p],m=this.GL;if(p.indexBuffer){if(this._pInst.webglVersion!==l.WEBGL2&&p.indexBufferType===m.UNSIGNED_INT&&!m.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");m.drawElements(m.TRIANGLES,p.vertexCount,p.indexBufferType,0)}else m.drawArrays(u||m.TRIANGLES,0,p.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(u,h){var p=this.GL,m=this._getImmediatePointShader();this._setPointUniforms(m),this._bindBuffer(h,p.ARRAY_BUFFER,this._vToNArray(u),Float32Array,p.STATIC_DRAW),m.enableAttrib(m.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),p.drawArrays(p.Points,0,u.length),m.unbindShader()};var g=a.default.RendererGL;d.default=g},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(A,i,d){function o(z){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(z)}function c(z){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(Y){return o(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":o(Y)})(z)}A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.concat"),A("core-js/modules/es.array.copy-within"),A("core-js/modules/es.array.every"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.flat"),A("core-js/modules/es.array.flat-map"),A("core-js/modules/es.array.from"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.array.map"),A("core-js/modules/es.array.slice"),A("core-js/modules/es.array.some"),A("core-js/modules/es.array.unscopables.flat"),A("core-js/modules/es.array.unscopables.flat-map"),A("core-js/modules/es.map"),A("core-js/modules/es.object.assign"),A("core-js/modules/es.object.get-own-property-descriptor"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.reflect.construct"),A("core-js/modules/es.reflect.get"),A("core-js/modules/es.regexp.to-string"),A("core-js/modules/es.set"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.float64-array"),A("core-js/modules/es.typed-array.int16-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint16-array"),A("core-js/modules/es.typed-array.uint32-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/es.weak-map"),A("core-js/modules/web.dom-collections.iterator"),A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.concat"),A("core-js/modules/es.array.copy-within"),A("core-js/modules/es.array.every"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.flat"),A("core-js/modules/es.array.flat-map"),A("core-js/modules/es.array.from"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.array.map"),A("core-js/modules/es.array.slice"),A("core-js/modules/es.array.some"),A("core-js/modules/es.array.unscopables.flat"),A("core-js/modules/es.array.unscopables.flat-map"),A("core-js/modules/es.map"),A("core-js/modules/es.object.assign"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.set"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.float64-array"),A("core-js/modules/es.typed-array.int16-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint16-array"),A("core-js/modules/es.typed-array.uint32-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.readPixelsWebGL=W,d.readPixelWebGL=G,d.default=void 0;var a=p(A("../core/main")),l=function(z){if(z&&z.__esModule)return z;if(z===null||c(z)!=="object"&&typeof z!="function")return{default:z};var Y=h();if(Y&&Y.has(z))return Y.get(z);var K,ie={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(K in z){var R;Object.prototype.hasOwnProperty.call(z,K)&&((R=E?Object.getOwnPropertyDescriptor(z,K):null)&&(R.get||R.set)?Object.defineProperty(ie,K,R):ie[K]=z[K])}return ie.default=z,Y&&Y.set(z,ie),ie}(A("../core/constants")),b=p(A("./GeometryBuilder")),g=p(A("libtess")),u=(A("./p5.Shader"),A("./p5.Camera"),A("../core/p5.Renderer"),A("./p5.Matrix"),A("./p5.Framebuffer"),A("path"),A("./p5.Texture"));function h(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,h=function(){return z},z)}function p(z){return z&&z.__esModule?z:{default:z}}function m(z){return function(Y){if(Array.isArray(Y)){for(var K=0,ie=new Array(Y.length);K<Y.length;K++)ie[K]=Y[K];return ie}}(z)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(z,Y){for(var K=0;K<Y.length;K++){var ie=Y[K];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(z,ie.key,ie)}}function f(z,Y,K){return(f=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(B,E,R){var B=function(H,Z){for(;!Object.prototype.hasOwnProperty.call(H,Z)&&(H=C(H))!==null;);return H}(B,E);if(B)return(B=Object.getOwnPropertyDescriptor(B,E)).get?B.get.call(R):B.value})(z,Y,K||z)}function v(z,Y){return(v=Object.setPrototypeOf||function(K,ie){return K.__proto__=ie,K})(z,Y)}function _(z){return function(){var Y,K,ie=C(z);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=C(this).constructor,Reflect.construct(ie,arguments,Y)):ie.apply(this,arguments),ie=this,!(K=Y)||c(K)!=="object"&&typeof K!="function"?x(ie):K}}function x(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function C(z){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(z)}function M(z,Y,K){Y in z?Object.defineProperty(z,Y,{value:K,enumerable:!0,configurable:!0,writable:!0}):z[Y]=K}function S(z,Y){I+="#define STROKE_CAP_".concat(z," ").concat(Y,`
`),D[l[z]]=Y}function P(z,Y){I+="#define STROKE_JOIN_".concat(z," ").concat(Y,`
`),k[l[z]]=Y}var L,D={},k={},I="",A=(S("ROUND",0),S("PROJECT",1),S("SQUARE",2),P("ROUND",0),P("MITER",1),P("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),F={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:A+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:A+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:I+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:I+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},N=F.sphereMappingFrag;for(L in F)F[L]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+F[L];M(A={},l.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),M(A,l.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),M(A,l.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),M(A,l.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),M(A,l.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),M(A,l.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),M(A,l.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),M(A,l.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var U=A;function W(z,Y,pe,ie,E,R,B,H,Z,te){var se=Y.getParameter(Y.FRAMEBUFFER_BINDING),pe=(Y.bindFramebuffer(Y.FRAMEBUFFER,pe),H===Y.RGBA?4:3),oe=R*B*pe,he=Z===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(z instanceof he&&z.length===oe||(z=new he(oe)),Y.readPixels(ie,te?te-E-B:E,R,B,H,Z,z),Y.bindFramebuffer(Y.FRAMEBUFFER,se),te)for(var de=Math.floor(B/2),J=new he(R*pe),ue=0;ue<de;ue++){var ye=ue*R*4,Ce=(B-ue-1)*R*4;J.set(z.subarray(ye,ye+4*R)),z.copyWithin(ye,Ce,Ce+4*R),z.set(J,Ce)}return z}function G(z,Z,K,ie,E,R,B){var H=z.getParameter(z.FRAMEBUFFER_BINDING),Z=(z.bindFramebuffer(z.FRAMEBUFFER,Z),E===z.RGBA?4:3),Z=new(R===z.UNSIGNED_BYTE?Uint8Array:Float32Array)(Z);return z.readPixels(K,B?B-ie-1:ie,1,1,E,R,Z),z.bindFramebuffer(z.FRAMEBUFFER,H),Array.from(Z)}a.default.prototype.setAttributes=function(z,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var K=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[z]!==Y&&(this._glAttributes[z]=Y,K=!1)):z instanceof Object&&this._glAttributes!==z&&(this._glAttributes=z,K=!1),this._renderer.isP3D&&!K){if(!this._setupDone){for(var ie in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(ie))return void a.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},a.default.RendererGL=function(z){var Y=ie;if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(z&&z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),z&&v(Y,z);var K=_(ie);function ie(E,R,B,H){if(this instanceof ie)return(E=K.call(this,E,R,B))._setAttributeDefaults(R),E._initContext(),E.isP3D=!0,E.geometryBuilder=void 0,E.GL=E.drawingContext,E._pInst._setProperty("drawingContext",E.drawingContext),E._isErasing=!1,E._clipDepths=[],E._isClipApplied=!1,E._stencilTestOn=!1,E._enableLighting=!1,E.ambientLightColors=[],E.mixedAmbientLight=[],E.mixedSpecularColor=[],E.specularColors=[1,1,1],E.directionalLightDirections=[],E.directionalLightDiffuseColors=[],E.directionalLightSpecularColors=[],E.pointLightPositions=[],E.pointLightDiffuseColors=[],E.pointLightSpecularColors=[],E.spotLightPositions=[],E.spotLightDirections=[],E.spotLightDiffuseColors=[],E.spotLightSpecularColors=[],E.spotLightAngle=[],E.spotLightConc=[],E.activeImageLight=null,E.diffusedTextures=new Map,E.specularTextures=new Map,E.drawMode=l.FILL,E.curFillColor=E._cachedFillStyle=[1,1,1,1],E.curAmbientColor=E._cachedFillStyle=[1,1,1,1],E.curSpecularColor=E._cachedFillStyle=[0,0,0,0],E.curEmissiveColor=E._cachedFillStyle=[0,0,0,0],E.curStrokeColor=E._cachedStrokeStyle=[0,0,0,1],E.curBlendMode=l.BLEND,E.preEraseBlend=void 0,E._cachedBlendMode=void 0,E.webglVersion===l.WEBGL2?E.blendExt=E.GL:E.blendExt=E.GL.getExtension("EXT_blend_minmax"),E._isBlending=!1,E._hasSetAmbient=!1,E._useSpecularMaterial=!1,E._useEmissiveMaterial=!1,E._useNormalMaterial=!1,E._useShininess=1,E._useMetalness=0,E._useLineColor=!1,E._useVertexColor=!1,E.registerEnabled=new Set,E._tint=[255,255,255,255],E.constantAttenuation=1,E.linearAttenuation=0,E.quadraticAttenuation=0,E.uMVMatrix=new a.default.Matrix,E.uPMatrix=new a.default.Matrix,E.uNMatrix=new a.default.Matrix("mat3"),E.curMatrix=new a.default.Matrix("mat3"),E._currentNormal=new a.default.Vector(0,0,1),E._curCamera=new a.default.Camera(x(E)),E._curCamera._computeCameraDefaultSettings(),E._curCamera._setDefaultCamera(),E.filterCamera=new a.default.Camera(x(E)),E.filterCamera._computeCameraDefaultSettings(),E.filterCamera._setDefaultCamera(),E.prevTouches=[],E.zoomVelocity=0,E.rotateVelocity=new a.default.Vector(0,0),E.moveVelocity=new a.default.Vector(0,0),E.executeZoom=!1,E.executeRotateAndMove=!1,E.specularShader=void 0,E.sphereMapping=void 0,E.diffusedShader=void 0,E._defaultLightShader=void 0,E._defaultImmediateModeShader=void 0,E._defaultNormalShader=void 0,E._defaultColorShader=void 0,E._defaultPointShader=void 0,E.userFillShader=void 0,E.userStrokeShader=void 0,E.userPointShader=void 0,E.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(E)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(E)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(E)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(E))],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(E),E._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(E)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)]}},E.immediateMode={geometry:new a.default.Geometry,shapeMode:l.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(E),E._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(E),E._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(E)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(E),E._flatten)],stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(E)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(E)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(E)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(E)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(E))],point:E.GL.createBuffer()}},E.pointSize=5,E.curStrokeWeight=1,E.curStrokeCap=l.ROUND,E.curStrokeJoin=l.ROUND,E.textures=new Map,E.framebuffers=new Set,E.activeFramebuffers=[],E.filterShader=void 0,E.filterLayer=void 0,E.filterLayerTemp=void 0,E.defaultFilterShaders={},E.textureMode=l.IMAGE,E.textureWrapX=l.CLAMP,E.textureWrapY=l.CLAMP,E._tex=null,E._curveTightness=6,E._lookUpTableBezier=[],E._lookUpTableQuadratic=[],E._lutBezierDetail=0,E._lutQuadraticDetail=0,E.isProcessingVertices=!1,E._tessy=E._initTessy(),E.fontInfos={},E._curShader=void 0,E;throw new TypeError("Cannot call a class as a function")}return Y=ie,(z=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new b.default(this)}},{key:"endGeometry",value:function(){var E;if(this.geometryBuilder)return E=this.geometryBuilder.finish(),this.geometryBuilder=void 0,E;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(E){return this.beginGeometry(),E(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(E){var R={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};E._glAttributes===null?E._glAttributes=R:E._glAttributes=Object.assign(R,E._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?l.WEBGL2:l.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var E=this.drawingContext;E.enable(E.DEPTH_TEST),E.depthFunc(E.LEQUAL),E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var E=this.drawingContext;return E.getParameter(E.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(E,R){this._maxTextureSize||(this._maxTextureSize=this._getParam());var H=this._maxTextureSize,H=(a.default.prototype._maxAllowedPixelDimensions,Math.floor(H/this.pixelDensity())),B=Math.min(E,H),H=Math.min(R,H);return B===E&&H===R||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(B,", height: ").concat(H,".")),{adjustedWidth:B,adjustedHeight:H}}},{key:"_resetContext",value:function(E,R){var B,H=this.width,Z=this.height,se=this.canvas.id,te=this._pInst instanceof a.default.Graphics,se=(te?((B=this._pInst).canvas.parentNode.removeChild(B.canvas),B.canvas=document.createElement("canvas"),(B._pInst._userNode||document.body).appendChild(B.canvas),a.default.Element.call(B,B.canvas,B._pInst),B.width=H,B.height=Z):((B=this.canvas)&&B.parentNode.removeChild(B),(B=document.createElement("canvas")).id=se,(this._pInst._userNode||document.body).appendChild(B),this._pInst.canvas=B,this.canvas=B),new a.default.RendererGL(this._pInst.canvas,this._pInst,!te));this._pInst._setProperty("_renderer",se),se.resize(H,Z),se._applyDefaults(),te||this._pInst._elements.push(se),typeof R=="function"&&setTimeout(function(){R.apply(window._renderer,E)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var H=(H=this._pInst).color.apply(H,arguments),E=H.levels[0]/255,R=H.levels[1]/255,B=H.levels[2]/255,H=H.levels[3]/255;this.clear(E,R,B,H)}},{key:"fill",value:function(E,R,B,H){var Z=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Z._array,this.drawMode=l.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(E,R,B,H){var Z=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Z._array}},{key:"strokeCap",value:function(E){this.curStrokeCap=E}},{key:"strokeJoin",value:function(E){this.curStrokeJoin=E}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(E,R){E.width===R.width&&E.height===R.height||E.resize(R.width,R.height),E.pixelDensity()!==R.pixelDensity()&&E.pixelDensity(R.pixelDensity())}},{key:"filter",value:function(){var E,R,B=this,H=this.getFilterLayer(),Z=void 0,te=void 0,se=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(te=arguments.length<=0?void 0:arguments[0],M(E={},l.BLUR,3),M(E,l.POSTERIZE,4),M(E,l.THRESHOLD,.5),Z=te in(E=E)&&(arguments.length<=1?void 0:arguments[1])===void 0?E[te]:arguments.length<=1?void 0:arguments[1],te in this.defaultFilterShaders||(this.defaultFilterShaders[te]=new a.default.Shader(H._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,U[te])),this.filterShader=this.defaultFilterShaders[te]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),pe=(this.matchSize(H,se),H.draw(function(){return B._pInst.clear()}),[1/(se.width*se.pixelDensity()),1/(se.height*se.pixelDensity())]);te===l.BLUR?(R=this.getFilterLayerTemp(),this.matchSize(R,se),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(l.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",pe),this.filterShader.setUniform("canvasSize",[se.width,se.height]),this.filterShader.setUniform("radius",Math.max(1,Z)),R.draw(function(){B.filterShader.setUniform("direction",[1,0]),B.filterShader.setUniform("tex0",se),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),H.draw(function(){B.filterShader.setUniform("direction",[0,1]),B.filterShader.setUniform("tex0",R),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),this._pInst.pop()):H.draw(function(){B._pInst.noStroke(),B._pInst.blendMode(l.BLEND),B._pInst.shader(B.filterShader),B.filterShader.setUniform("tex0",se),B.filterShader.setUniform("texelSize",pe),B.filterShader.setUniform("canvasSize",[se.width,se.height]),B.filterShader.setUniform("filterParameter",Z),B._pInst.noLights(),B._pInst.plane(se.width,se.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(l.CORNER),this._pInst.blendMode(l.BLEND),se.filterCamera._resize(),this._pInst.setCamera(se.filterCamera),this._pInst.resetMatrix(),this._pInst.image(H,-se.width/2,-se.height/2,se.width,se.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(E){return E?this._pInst.pixelDensity(E):this._pInst.pixelDensity()}},{key:"blendMode",value:function(E){E===l.DARKEST||E===l.LIGHTEST||E===l.ADD||E===l.BLEND||E===l.SUBTRACT||E===l.SCREEN||E===l.EXCLUSION||E===l.REPLACE||E===l.MULTIPLY||E===l.REMOVE?this.curBlendMode=E:E!==l.BURN&&E!==l.OVERLAY&&E!==l.HARD_LIGHT&&E!==l.SOFT_LIGHT&&E!==l.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(E,R){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(l.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,E/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,R/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(f(C(ie.prototype),"beginClip",this).call(this,E),this.drawTarget()._isClipApplied=!0,this.GL);E.clearStencil(0),E.clear(E.STENCIL_BUFFER_BIT),E.enable(E.STENCIL_TEST),this._stencilTestOn=!0,E.stencilFunc(E.ALWAYS,1,255),E.stencilOp(E.KEEP,E.KEEP,E.REPLACE),E.disable(E.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var E=this.GL;E.stencilOp(E.KEEP,E.KEEP,E.KEEP),E.stencilFunc(this._clipInvert?E.EQUAL:E.NOTEQUAL,0,255),E.enable(E.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),f(C(ie.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(E){this.curStrokeWeight!==E&&(this.pointSize=E,this.curStrokeWeight=E)}},{key:"_getPixel",value:function(E,R){var B=this.GL;return G(B,null,E,R,B.RGBA,B.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var E,R,B=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(E=this._pInst._pixelDensity,R=this.GL,B._setProperty("pixels",W(B.pixels,R,null,0,0,this.width*E,this.height*E,R.RGBA,R.UNSIGNED_BYTE,this.height*E)))}},{key:"updatePixels",value:function(){var E=this._getTempFramebuffer();E.pixels=this._pixelsState.pixels,E.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(l.CENTER),this._pInst.image(E,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:l.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:l.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(E){return this.retainedMode.geometry[E]!==void 0}},{key:"viewport",value:function(E,R){this._viewport=[0,0,E,R],this.GL.viewport(0,0,E,R)}},{key:"resize",value:function(Z,H){a.default.Renderer.prototype.resize.call(this,Z,H),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Z=this._pixelsState,B=(Z.pixels!==void 0&&Z._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),H=!1,Z=void 0;try{for(var te,se=this.framebuffers[Symbol.iterator]();!(B=(te=se.next()).done);B=!0)te.value._canvasSizeChanged()}catch(pe){H=!0,Z=pe}finally{try{B||se.return==null||se.return()}finally{if(H)throw Z}}}},{key:"clear",value:function(){var E=(arguments.length<=0?void 0:arguments[0])||0,R=(arguments.length<=1?void 0:arguments[1])||0,B=(arguments.length<=2?void 0:arguments[2])||0,H=(arguments.length<=3?void 0:arguments[3])||0,Z=this.activeFramebuffer();Z&&Z.format===l.UNSIGNED_BYTE&&!Z.antialias&&H===0&&(H=1e-10),this.GL.clearColor(E*H,R*H,B*H,H),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(E,R,B,H,Z,te){arguments.length===16?a.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([E,R,0,0,B,H,0,0,0,0,1,0,Z,te,0,1])}},{key:"translate",value:function(E,R,B){return E instanceof a.default.Vector&&(B=E.z,R=E.y,E=E.x),this.uMVMatrix.translate([E,R,B]),this}},{key:"scale",value:function(E,R,B){return this.uMVMatrix.scale(E,R,B),this}},{key:"rotate",value:function(E,R){return R===void 0?this.rotateZ(E):(a.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(E){return this.rotate(E,1,0,0),this}},{key:"rotateY",value:function(E){return this.rotate(E,0,1,0),this}},{key:"rotateZ",value:function(E){return this.rotate(E,0,0,1),this}},{key:"push",value:function(){var E=a.default.Renderer.prototype.push.apply(this),R=E.properties;return R.uMVMatrix=this.uMVMatrix.copy(),R.uPMatrix=this.uPMatrix.copy(),R._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),R.ambientLightColors=this.ambientLightColors.slice(),R.specularColors=this.specularColors.slice(),R.directionalLightDirections=this.directionalLightDirections.slice(),R.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),R.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),R.pointLightPositions=this.pointLightPositions.slice(),R.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),R.pointLightSpecularColors=this.pointLightSpecularColors.slice(),R.spotLightPositions=this.spotLightPositions.slice(),R.spotLightDirections=this.spotLightDirections.slice(),R.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),R.spotLightSpecularColors=this.spotLightSpecularColors.slice(),R.spotLightAngle=this.spotLightAngle.slice(),R.spotLightConc=this.spotLightConc.slice(),R.userFillShader=this.userFillShader,R.userStrokeShader=this.userStrokeShader,R.userPointShader=this.userPointShader,R.pointSize=this.pointSize,R.curStrokeWeight=this.curStrokeWeight,R.curStrokeColor=this.curStrokeColor,R.curFillColor=this.curFillColor,R.curAmbientColor=this.curAmbientColor,R.curSpecularColor=this.curSpecularColor,R.curEmissiveColor=this.curEmissiveColor,R._hasSetAmbient=this._hasSetAmbient,R._useSpecularMaterial=this._useSpecularMaterial,R._useEmissiveMaterial=this._useEmissiveMaterial,R._useShininess=this._useShininess,R._useMetalness=this._useMetalness,R.constantAttenuation=this.constantAttenuation,R.linearAttenuation=this.linearAttenuation,R.quadraticAttenuation=this.quadraticAttenuation,R._enableLighting=this._enableLighting,R._useNormalMaterial=this._useNormalMaterial,R._tex=this._tex,R.drawMode=this.drawMode,R._currentNormal=this._currentNormal,R.curBlendMode=this.curBlendMode,R.activeImageLight=this.activeImageLight,E}},{key:"pop",value:function(){var E;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var R=arguments.length,B=new Array(R),H=0;H<R;H++)B[H]=arguments[H];(E=f(C(ie.prototype),"pop",this)).call.apply(E,[this].concat(B)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var E=this.drawTarget();E._isClipApplied!==this._stencilTestOn&&(E._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var E=this.userStrokeShader;return E&&E.isStrokeShader()?E:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(E){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(N)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",E),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var E=this.userFillShader;if(this._useNormalMaterial&&(!E||!E.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!E||!E.isLightShader())return this._getLightShader()}else if(this._tex){if(!E||!E.isTextureShader())return this._getLightShader()}else if(!E)return this._getImmediateModeShader();return E}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var E=this.userFillShader;if(this._enableLighting){if(!E||!E.isLightShader())return this._getLightShader()}else if(this._tex){if(!E||!E.isTextureShader())return this._getLightShader()}else if(!E)return this._getColorShader();return E}},{key:"_getImmediatePointShader",value:function(){var E=this.userPointShader;return E&&E.isPointShader()?E:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+F.phongFrag):this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+F.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===l.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(E,R){var B="";return this.webglVersion===l.WEBGL2&&(B+=`#version 300 es
#define WEBGL2
`),E==="vert"?B+=`#define VERTEX_SHADER
`:E==="frag"&&(B+=`#define FRAGMENT_SHADER
`),R&&(B+="precision ".concat(R,` float;
`)),B}},{key:"_getEmptyTexture",value:function(){var E;return this._emptyTexture||((E=new a.default.Image(1,1)).set(0,0,255),this._emptyTexture=new a.default.Texture(this,E)),this._emptyTexture}},{key:"getTexture",value:function(E){E instanceof a.default.Framebuffer&&(E=E.color);var R=this.textures.get(E);return R||(R=new a.default.Texture(this,E),this.textures.set(E,R),R)}},{key:"getDiffusedTexture",value:function(E){var R,B,H=this;return this.diffusedTextures.get(E)!=null?this.diffusedTextures.get(E):(R=Math.floor(E.height/E.width*200),B=this._pInst.createFramebuffer({width:200,height:R,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(F.imageLightVert,F.imageLightDiffusedFrag)),B.draw(function(){H._pInst.shader(H.diffusedShader),H.diffusedShader.setUniform("environmentMap",E),H._pInst.noStroke(),H._pInst.rectMode(l.CENTER),H._pInst.noLights(),H._pInst.rect(0,0,200,R)}),this.diffusedTextures.set(E,B),B)}},{key:"getSpecularTexture",value:function(E){var R=this;if(this.specularTextures.get(E)!=null)return this.specularTextures.get(E);for(var B,H=[],Z=this._pInst.createFramebuffer({width:512,height:512,density:1}),te=Math.log(512)/Math.log(2),se=(this.specularShader||(this.specularShader=this._pInst.createShader(F.imageLightVert,F.imageLightSpecularFrag)),512);1<=se;se/=2)(function(pe){Z.resize(pe,pe);var oe=1-Math.log(pe)/Math.log(2)/te;Z.draw(function(){R._pInst.shader(R.specularShader),R._pInst.clear(),R.specularShader.setUniform("environmentMap",E),R.specularShader.setUniform("roughness",oe),R._pInst.noStroke(),R._pInst.noLights(),R._pInst.plane(pe,pe)}),H.push(Z.get().drawingContext.getImageData(0,0,pe,pe))})(se);return Z.remove(),B=new u.MipmapTexture(this,H,{}),this.specularTextures.set(E,B),B}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(E){return new a.default.Framebuffer(this,E)}},{key:"_setStrokeUniforms",value:function(E){E.bindShader(),E.setUniform("uUseLineColor",this._useLineColor),E.setUniform("uMaterialColor",this.curStrokeColor),E.setUniform("uStrokeWeight",this.curStrokeWeight),E.setUniform("uStrokeCap",D[this.curStrokeCap]),E.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(E){var R=this,B=(E.bindShader(),this.mixedSpecularColor=m(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(H,Z){return R.curFillColor[Z]*R._useMetalness+H*(1-R._useMetalness)})),E.setUniform("uUseVertexColor",this._useVertexColor),E.setUniform("uMaterialColor",this.curFillColor),E.setUniform("isTexture",!!this._tex),this._tex&&E.setUniform("uSampler",this._tex),E.setUniform("uTint",this._tint),E.setUniform("uHasSetAmbient",this._hasSetAmbient),E.setUniform("uAmbientMatColor",this.curAmbientColor),E.setUniform("uSpecularMatColor",this.mixedSpecularColor),E.setUniform("uEmissiveMatColor",this.curEmissiveColor),E.setUniform("uSpecular",this._useSpecularMaterial),E.setUniform("uEmissive",this._useEmissiveMaterial),E.setUniform("uShininess",this._useShininess),E.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(E),E.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),B=(E.setUniform("uPointLightCount",B),E.setUniform("uPointLightLocation",this.pointLightPositions),E.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),E.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),B=(E.setUniform("uDirectionalLightCount",B),E.setUniform("uLightingDirection",this.directionalLightDirections),E.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),E.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),B=(this.mixedAmbientLight=m(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(H){return H-=R._useMetalness,Math.max(0,H)})),E.setUniform("uAmbientLightCount",B),E.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);E.setUniform("uSpotLightCount",B),E.setUniform("uSpotLightAngle",this.spotLightAngle),E.setUniform("uSpotLightConc",this.spotLightConc),E.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),E.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),E.setUniform("uSpotLightLocation",this.spotLightPositions),E.setUniform("uSpotLightDirection",this.spotLightDirections),E.setUniform("uConstantAttenuation",this.constantAttenuation),E.setUniform("uLinearAttenuation",this.linearAttenuation),E.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),E.bindTextures()}},{key:"_setImageLightUniforms",value:function(E){var R,B;E.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(R=this.getDiffusedTexture(this.activeImageLight),E.setUniform("environmentMapDiffused",R),R=this.getSpecularTexture(this.activeImageLight),B=20/this._useShininess,E.setUniform("levelOfDetail",8*B),E.setUniform("environmentMapSpecular",R))}},{key:"_setPointUniforms",value:function(E){E.bindShader(),E.setUniform("uMaterialColor",this.curStrokeColor),E.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(E,R,B,H,Z){R=R||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(R,E),B!==void 0&&((E=B)instanceof a.default.DataArray?E=B.dataArray():E instanceof(H||Float32Array)||(E=new(H||Float32Array)(E)),this.GL.bufferData(R,E,Z||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(E,R){return E.length===R.length&&E.every(function(B,H){return B===R[H]})}},{key:"_isTypedArray",value:function(E){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(R){return E instanceof R})}},{key:"_flatten",value:function(E){return E.flat()}},{key:"_vToNArray",value:function(E){return E.flatMap(function(R){return[R.x,R.y,R.z]})}},{key:"_bezierCoefficients",value:function(E){var R=E*E,B=1-E,H=B*B;return[H*B,3*H*E,3*B*R,R*E]}},{key:"_quadraticCoefficients",value:function(E){var R=1-E;return[R*R,2*R*E,E*E]}},{key:"_bezierToCatmull",value:function(E){return[E[1],E[1]+(E[2]-E[0])/this._curveTightness,E[2]-(E[3]-E[1])/this._curveTightness,E[2]]}},{key:"_initTessy",value:function(){var E=new g.default.GluTesselator;return E.gluTessCallback(g.default.gluEnum.GLU_TESS_VERTEX_DATA,function(R,B){var H=!0,Z=!1,te=void 0;try{for(var se,pe=R[Symbol.iterator]();!(H=(se=pe.next()).done);H=!0){var oe=se.value;B.push(oe)}}catch(he){Z=!0,te=he}finally{try{H||pe.return==null||pe.return()}finally{if(Z)throw te}}}),E.gluTessCallback(g.default.gluEnum.GLU_TESS_BEGIN,function(R){R!==g.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(R))}),E.gluTessCallback(g.default.gluEnum.GLU_TESS_ERROR,function(R){console.log("error callback"),console.log("error number: ".concat(R))}),E.gluTessCallback(g.default.gluEnum.GLU_TESS_COMBINE,function(R,B,H){for(var Z=new Array(a.default.RendererGL.prototype.tessyVertexSize).fill(0),te=0;te<H.length;te++)for(var se=0;se<Z.length;se++)H[te]!==0&&B[te]&&(Z[se]+=B[te][se]*H[te]);return Z}),E.gluTessCallback(g.default.gluEnum.GLU_TESS_EDGE_FLAG,function(R){}),E.gluTessProperty(g.default.gluEnum.GLU_TESS_WINDING_RULE,g.default.windingRule.GLU_TESS_WINDING_NONZERO),E}},{key:"_triangulate",value:function(E){var R=E[0]?E[0][2]:void 0,B=!0,H=!0,oe=!1,de=void 0;try{for(var Z,te=E[Symbol.iterator]();!(H=(Z=te.next()).done);H=!0)for(var se=Z.value,pe=0;pe<se.length;pe+=a.default.RendererGL.prototype.tessyVertexSize)if(se[pe+2]!==R){B=!1;break}}catch(Ee){oe=!0,de=Ee}finally{try{H||te.return==null||te.return()}finally{if(oe)throw de}}B?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var oe=[],he=(this._tessy.gluTessBeginPolygon(oe),!0),de=!1,J=void 0;try{for(var ue,ye=E[Symbol.iterator]();!(he=(ue=ye.next()).done);he=!0){var Ce=ue.value;this._tessy.gluTessBeginContour();for(var ge=0;ge<Ce.length;ge+=a.default.RendererGL.prototype.tessyVertexSize){var _e=Ce.slice(ge,ge+a.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(_e,_e)}this._tessy.gluTessEndContour()}}catch(Ee){de=!0,J=Ee}finally{try{he||ye.return==null||ye.return()}finally{if(de)throw J}}return this._tessy.gluTessEndPolygon(),oe}}])&&y(Y.prototype,z),ie}(a.default.Renderer),a.default.prototype._assert3d=function(z){if(!this._renderer.isP3D)throw new Error("".concat(z,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype.tessyVertexSize=12,A=a.default.RendererGL,d.default=A},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(t,i,d){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(a,l){for(var b=0;b<l.length;b++){var g=l[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}o.default.Shader=function(){function a(g,u,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=g,this._vertSrc=u,this._fragSrc=h,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var l,b;return l=a,(b=[{key:"init",value:function(){if(this._glProgram===0){var g=this._renderer.GL;if(this._vertShader=g.createShader(g.VERTEX_SHADER),g.shaderSource(this._vertShader,this._vertSrc),g.compileShader(this._vertShader),!g.getShaderParameter(this._vertShader,g.COMPILE_STATUS))return o.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(g.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=g.createShader(g.FRAGMENT_SHADER),g.shaderSource(this._fragShader,this._fragSrc),g.compileShader(this._fragShader),!g.getShaderParameter(this._fragShader,g.COMPILE_STATUS))return o.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(g.getShaderInfoLog(this._fragShader))),null;this._glProgram=g.createProgram(),g.attachShader(this._glProgram,this._vertShader),g.attachShader(this._glProgram,this._fragShader),g.linkProgram(this._glProgram),g.getProgramParameter(this._glProgram,g.LINK_STATUS)||o.default._friendlyError("Snap! Error linking shader program: ".concat(g.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(g){var u=new o.default.Shader(g._renderer,this._vertSrc,this._fragSrc);return u.ensureCompiledOnContext(g),u}},{key:"ensureCompiledOnContext",value:function(g){if(this._glProgram!==0&&this._renderer!==g._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=g._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var g=this._renderer.GL,u=g.getProgramParameter(this._glProgram,g.ACTIVE_ATTRIBUTES),h=0;h<u;++h){var p=g.getActiveAttrib(this._glProgram,h),m=p.name,y=g.getAttribLocation(this._glProgram,m),f={};f.name=m,f.location=y,f.index=h,f.type=p.type,f.size=p.size,this.attributes[m]=f}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var g=this._renderer.GL,u=g.getProgramParameter(this._glProgram,g.ACTIVE_UNIFORMS),h=0,p=0;p<u;++p){var m=g.getActiveUniform(this._glProgram,p),y={},f=(y.location=g.getUniformLocation(this._glProgram,m.name),y.size=m.size,m.name);1<m.size&&(f=f.substring(0,f.indexOf("[0]"))),y.name=f,y.type=m.type,y._cachedData=void 0,y.type===g.SAMPLER_2D&&(y.samplerIndex=h,h++,this.samplers.push(y)),y.isArray=1<m.size||y.type===g.FLOAT_MAT3||y.type===g.FLOAT_MAT4||y.type===g.FLOAT_VEC2||y.type===g.FLOAT_VEC3||y.type===g.FLOAT_VEC4||y.type===g.INT_VEC2||y.type===g.INT_VEC4||y.type===g.INT_VEC3,this.uniforms[f]=y}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var g=this._renderer.GL,u=!0,h=!1,p=void 0;try{for(var m,y=this.samplers[Symbol.iterator]();!(u=(m=y.next()).done);u=!0){var f=m.value,v=f.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),g.activeTexture(g.TEXTURE0+f.samplerIndex),v.bindTexture(),v.update(),g.uniform1i(f.location,f.samplerIndex)}}catch(_){h=!0,p=_}finally{try{u||y.return==null||y.return()}finally{if(h)throw p}}}},{key:"updateTextures",value:function(){var g=!0,u=!1,h=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(g=(p=m.next()).done);g=!0){var y=p.value.texture;y&&y.update()}}catch(f){u=!0,h=f}finally{try{g||m.return==null||m.return()}finally{if(u)throw h}}}},{key:"unbindTextures",value:function(){var g=!0,u=!1,h=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(g=(p=m.next()).done);g=!0){var y=p.value;this.setUniform(y.name,this._renderer._getEmptyTexture())}}catch(f){u=!0,h=f}finally{try{g||m.return==null||m.return()}finally{if(u)throw h}}}},{key:"_setMatrixUniforms",value:function(){var g=this._renderer._curCamera.cameraMatrix,u=this._renderer.uPMatrix,h=this._renderer.uMVMatrix,p=h.copy();p.mult(u),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",g.mat4),this.setUniform("uProjectionMatrix",u.mat4),this.setUniform("uModelViewMatrix",h.mat4),this.setUniform("uModelViewProjectionMatrix",p.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var g=this._renderer.GL;return this._renderer._curShader!==this&&(g.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(g,u){var h=this.uniforms[g];if(h){var p=this._renderer.GL;if(h.isArray){if(h._cachedData&&this._renderer._arraysEqual(h._cachedData,u))return;h._cachedData=u.slice(0)}else{if(h._cachedData&&h._cachedData===u)return;Array.isArray(u)?h._cachedData=u.slice(0):h._cachedData=u}var m=h.location;switch(this.useProgram(),h.type){case p.BOOL:u===!0?p.uniform1i(m,1):p.uniform1i(m,0);break;case p.INT:1<h.size?u.length&&p.uniform1iv(m,u):p.uniform1i(m,u);break;case p.FLOAT:1<h.size?u.length&&p.uniform1fv(m,u):p.uniform1f(m,u);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(m,!1,u);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(m,!1,u);break;case p.FLOAT_VEC2:1<h.size?u.length&&p.uniform2fv(m,u):p.uniform2f(m,u[0],u[1]);break;case p.FLOAT_VEC3:1<h.size?u.length&&p.uniform3fv(m,u):p.uniform3f(m,u[0],u[1],u[2]);break;case p.FLOAT_VEC4:1<h.size?u.length&&p.uniform4fv(m,u):p.uniform4f(m,u[0],u[1],u[2],u[3]);break;case p.INT_VEC2:1<h.size?u.length&&p.uniform2iv(m,u):p.uniform2i(m,u[0],u[1]);break;case p.INT_VEC3:1<h.size?u.length&&p.uniform3iv(m,u):p.uniform3i(m,u[0],u[1],u[2]);break;case p.INT_VEC4:1<h.size?u.length&&p.uniform4iv(m,u):p.uniform4i(m,u[0],u[1],u[2],u[3]);break;case p.SAMPLER_2D:p.activeTexture(p.TEXTURE0+h.samplerIndex),h.texture=u instanceof o.default.Texture?u:this._renderer.getTexture(u),p.uniform1i(m,h.samplerIndex),h.texture.src.gifProperties&&h.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(g){return g!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(g,u,h,p,m,y){var f;return g&&(g=g.location)!==-1&&(f=this._renderer.GL,this._renderer.registerEnabled.has(g)||(f.enableVertexAttribArray(g),this._renderer.registerEnabled.add(g)),this._renderer.GL.vertexAttribPointer(g,u,h||f.FLOAT,p||!1,m||0,y||0)),this}},{key:"disableRemainingAttributes",value:function(){var g=this,u=!0,h=!1,p=void 0;try{for(var m,y=this._renderer.registerEnabled.values()[Symbol.iterator]();!(u=(m=y.next()).done);u=!0)(function(){var f=m.value;Object.keys(g.attributes).some(function(v){return g.attributes[v].location===f})||(g._renderer.GL.disableVertexAttribArray(f),g._renderer.registerEnabled.delete(f))})()}catch(f){h=!0,p=f}finally{try{u||y.return==null||y.return()}finally{if(h)throw p}}}}])&&c(l.prototype,b),a}(),t=o.default.Shader,d.default=t},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(t,i,d){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function c(_){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.checkWebGLCapabilities=v,d.default=d.MipmapTexture=void 0;var a=(f=t("../core/main"))&&f.__esModule?f:{default:f},l=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var x=b();if(x&&x.has(_))return x.get(_);var C,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in _){var P;Object.prototype.hasOwnProperty.call(_,C)&&((P=S?Object.getOwnPropertyDescriptor(_,C):null)&&(P.get||P.set)?Object.defineProperty(M,C,P):M[C]=_[C])}return M.default=_,x&&x.set(_,M),M}(t("../core/constants"));function b(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,b=function(){return _},_)}function g(_,x){return(g=Object.setPrototypeOf||function(C,M){return C.__proto__=M,C})(_,x)}function u(_){return function(){var x,C=h(_),C=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=h(this).constructor,Reflect.construct(C,arguments,x)):C.apply(this,arguments),this);if(!x||c(x)!=="object"&&typeof x!="function"){if(C!==void 0)return C;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function h(_){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}function p(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function m(_,x){for(var C=0;C<x.length;C++){var M=x[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function y(_,x,C){x&&m(_.prototype,x)}a.default.Texture=function(){function _(L,C,P){p(this,_),this._renderer=L;var S=this._renderer.GL,P=(P=P||{},this.src=C,this.glTex=void 0,this.glTarget=S.TEXTURE_2D,this.glFormat=P.format||S.RGBA,this.mipmaps=!1,this.glMinFilter=P.minFilter||S.LINEAR,this.glMagFilter=P.magFilter||S.LINEAR,this.glWrapS=P.wrapS||S.CLAMP_TO_EDGE,this.glWrapT=P.wrapT||S.CLAMP_TO_EDGE,this.glDataType=P.dataType||S.UNSIGNED_BYTE,v(L)),L=(this.glFormat!==S.HALF_FLOAT||P.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=S.FLOAT),this.glFormat!==S.HALF_FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||P.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.glFormat!==S.FLOAT||P.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=S.UNSIGNED_BYTE),this.glFormat!==S.FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||P.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.isSrcMediaElement=a.default.MediaElement!==void 0&&C instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&C instanceof a.default.Element&&!(C instanceof a.default.Graphics)&&!(C instanceof a.default.Renderer),this.isSrcP5Image=C instanceof a.default.Image,this.isSrcP5Graphics=C instanceof a.default.Graphics,this.isSrcP5Renderer=C instanceof a.default.Renderer,this.isImageData=typeof ImageData<"u"&&C instanceof ImageData,this.isFramebufferTexture=C instanceof a.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=L.width,this.height=L.height,this.init(L),this}return y(_,[{key:"_getTextureDataFromSource",value:function(){var x;return this.isFramebufferTexture?x=this.src.rawTexture():this.isSrcP5Image?x=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?x=this.src.elt:this.isImageData&&(x=this.src),x}},{key:"init",value:function(x){var C,M=this._renderer.GL;this.isFramebufferTexture||(this.glTex=M.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,this.glMagFilter),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(C=new Uint8Array([1,1,1,1]),M.texImage2D(this.glTarget,0,M.RGBA,1,1,0,this.glFormat,this.glDataType,C)):M.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x))}},{key:"update",value:function(){var x,C,M,S=this.src;return S.width!==0&&S.height!==0&&!this.isFramebufferTexture&&(x=this._getTextureDataFromSource(),C=!1,M=this._renderer.GL,x.width!==this.width||x.height!==this.height?(C=!0,this.width=x.width||S.width,this.height=x.height||S.height,this.isSrcP5Image?S.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&S.setModified(!0)):this.isSrcP5Image?S.isModified()&&S.setModified(!(C=!0)):this.isSrcMediaElement?S.isModified()?S.setModified(!(C=!0)):S.loadedmetadata&&this._videoPrevUpdateTime!==S.time()&&(this._videoPrevUpdateTime=S.time(),C=!0):this.isImageData?S._dirty&&(C=!(S._dirty=!1)):C=!0,C&&(this.bindTexture(),M.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x)),C)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(x,C){var M=this._renderer.GL;this.glMinFilter=this.glFilter(x),this.glMagFilter=this.glFilter(C),this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,this.glMinFilter),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(x){var C=this._renderer.GL;return x===l.NEAREST?C.NEAREST:C.LINEAR}},{key:"setWrapMode",value:function(x,C){function M(D){return(D&D-1)==0}var S=this._renderer.GL,L=this._getTextureDataFromSource(),L=L.naturalWidth&&L.naturalHeight?(P=L.naturalWidth,L.naturalHeight):(P=this.width,this.height),P=M(P),L=M(L);x===l.REPEAT?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapS=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):x===l.MIRROR?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapS=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):this.glWrapS=S.CLAMP_TO_EDGE,C===l.REPEAT?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapT=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):C===l.MIRROR?this._renderer.webglVersion===l.WEBGL2||P&&L?this.glWrapT=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):this.glWrapT=S.CLAMP_TO_EDGE,this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.glWrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),_}();var f=function(_){var x=M;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&g(x,_);var C=u(M);function M(S,P,L){return p(this,M),P=(S=C.call(this,S,P,L))._renderer.GL,S.glMinFilter===P.LINEAR&&(S.glMinFilter=P.LINEAR_MIPMAP_LINEAR),S}return y(M,[{key:"glFilter",value:function(S){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(S){var P=this._renderer.GL;this.glTex=P.createTexture(),this.bindTexture();for(var L=0;L<S.length;L++)P.texImage2D(this.glTarget,L,this.glFormat,this.glFormat,this.glDataType,S[L]);this.glMinFilter=P.LINEAR_MIPMAP_LINEAR,P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),M}(a.default.Texture);function v(S){var x=S.GL,S=S.webglVersion,C=S===l.WEBGL2?x.getExtension("EXT_color_buffer_float")&&x.getExtension("EXT_float_blend"):x.getExtension("OES_texture_float"),M=C&&x.getExtension("OES_texture_float_linear"),S=S===l.WEBGL2?x.getExtension("EXT_color_buffer_float"):x.getExtension("OES_texture_half_float");return{float:C,floatLinear:M,halfFloat:S,halfFloatLinear:S&&x.getExtension("OES_texture_half_float_linear")}}d.MipmapTexture=f,t=a.default.Texture,d.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(t,i,d){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function c(_){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var a,l=(a=t("../core/main"))&&a.__esModule?a:{default:a},b=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var x=g();if(x&&x.has(_))return x.get(_);var C,M={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in _){var P;Object.prototype.hasOwnProperty.call(_,C)&&((P=S?Object.getOwnPropertyDescriptor(_,C):null)&&(P.get||P.set)?Object.defineProperty(M,C,P):M[C]=_[C])}return M.default=_,x&&x.set(_,M),M}(t("../core/constants"));function g(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,g=function(){return _},_)}function u(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function h(_,x){for(var C=0;C<x.length;C++){var M=x[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}function p(_,x,C){x&&h(_.prototype,x)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),l.default.RendererGL.prototype._applyTextProperties=function(){},l.default.RendererGL.prototype.textWidth=function(_){return this._isOpenType()?this._textFont._textWidth(_,this._textSize):0};var m=function(){function _(x,C){u(this,_),this.width=x,this.height=C,this.infos=[]}return p(_,[{key:"findImage",value:function(x){var C,M,S=this.width*this.height;if(S<x)throw new Error("font is too complex to render in 3D");for(var P=this.infos.length-1;0<=P;--P){var L=this.infos[P];if(L.index+x<S){M=(C=L).imageData;break}}if(!C){try{M=new ImageData(this.width,this.height)}catch{var D=document.getElementsByTagName("canvas")[0],k=!D,I=(D||((D=document.createElement("canvas")).style.display="none",document.body.appendChild(D)),D.getContext("2d"));I&&(M=I.createImageData(this.width,this.height)),k&&document.body.removeChild(D)}this.infos.push(C={index:0,imageData:M})}return I=C.index,C.index+=x,M._dirty=!0,{imageData:M,index:I}}}]),_}();function y(L,x,C,M,S){var P=L.imageData.data,L=4*L.index++;P[L++]=x,P[L++]=C,P[L++]=M,P[+L]=S}var f=Math.sqrt(3),v=function(){function _(x){u(this,_),this.font=x,this.strokeImageInfos=new m(64,64),this.colDimImageInfos=new m(64,64),this.rowDimImageInfos=new m(64,64),this.colCellImageInfos=new m(64,64),this.rowCellImageInfos=new m(64,64),this.glyphInfos={}}return p(_,[{key:"getGlyphInfo",value:function(x){var C=this.glyphInfos[x.index];if(!C){var M=x.getBoundingBox(),S=M.x1,P=M.y1,L=M.x2-S,D=M.y2-P,k=x.path.commands;if(L==0||D==0||!k.length)return this.glyphInfos[x.index]={};for(var I=[],A=[],F=[],N=8;0<=N;--N)F.push([]);for(N=8;0<=N;--N)A.push([]);var U,W,G,z,Y=function(){function Ge(ze,He,qe,ce){u(this,Ge),this.p0=ze,this.c0=He,this.c1=qe,this.p1=ce}return p(Ge,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return l.default.Vector.sub(l.default.Vector.sub(this.p1,this.p0),l.default.Vector.mult(l.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ae){var He=l.default.Vector.lerp(this.p0,this.c0,Ae),ce=l.default.Vector.lerp(this.c0,this.c1,Ae),qe=l.default.Vector.lerp(He,ce,Ae),ce=(this.c1=l.default.Vector.lerp(this.c1,this.p1,Ae),this.c0=l.default.Vector.lerp(ce,this.c1,Ae),l.default.Vector.lerp(qe,this.c0,Ae)),Ae=new Ge(this.p0,He,qe,ce);return this.p0=ce,Ae}},{key:"splitInflections",value:function(){var ze=l.default.Vector.sub(this.c0,this.p0),He=l.default.Vector.sub(l.default.Vector.sub(this.c1,this.c0),ze),qe=l.default.Vector.sub(l.default.Vector.sub(l.default.Vector.sub(this.p1,this.c1),ze),l.default.Vector.mult(He,2)),ce=[],Ae=He.x*qe.y-He.y*qe.x;return Ae!==0&&0<=(ze=(qe=ze.x*qe.y-ze.y*qe.x)*qe-4*Ae*(ze.x*He.y-ze.y*He.x))&&(Ae<0&&(Ae=-Ae,qe=-qe),ze=(-qe+(He=Math.sqrt(ze)))/(2*Ae),0<(qe=(-qe-He)/(2*Ae))&&qe<1&&(ce.push(this.split(qe)),ze=1-(1-ze)/(1-qe)),0<ze&&ze<1&&ce.push(this.split(ze))),ce.push(this),ce}}]),Ge}(),K=!0,ie=!1,E=void 0;try{for(var R,B=k[Symbol.iterator]();!(K=(R=B.next()).done);K=!0){var H=R.value,Z=(H.x-S)/L,te=(H.y-P)/D;if(!Te(U,W,Z,te)){switch(H.type){case"M":G=Z,z=te;break;case"L":Ie(U,W,Z,te);break;case"Q":var se=(H.x1-S)/L,pe=(H.y1-P)/D;_e([U,Z,se],[W,te,pe],{x:U,y:W,cx:se,cy:pe});break;case"Z":Te(U,W,G,z)?I.push({x:U,y:W}):(Ie(U,W,G,z),I.push({x:G,y:z}));break;case"C":for(var oe=function(re,je,Le,qe,ce,Ae,xe,Q){var re=new Y(new l.default.Vector(re,je),new l.default.Vector(Le,qe),new l.default.Vector(ce,Ae),new l.default.Vector(xe,Q)).splitInflections(),$=[],ne=30/f,ve=!0,je=!1,Le=void 0;try{for(var Ne,Be=re[Symbol.iterator]();!(ve=(Ne=Be.next()).done);ve=!0){for(var Ue=Ne.value,Xe=[],ct=void 0;!(.125<=(ct=ne/Ue.quadError()));){var ot=Math.pow(ct,.3333333333333333),Je=Ue.split(ot),lt=Ue.split(1-ot/(1-ot));$.push(Je),Xe.push(Ue),Ue=lt}ct<1&&$.push(Ue.split(.5)),$.push(Ue),Array.prototype.push.apply($,Xe.reverse())}}catch(st){je=!0,Le=st}finally{try{ve||Be.return==null||Be.return()}finally{if(je)throw Le}}return $}(U,W,(H.x1-S)/L,(H.y1-P)/D,(H.x2-S)/L,(H.y2-P)/D,Z,te),he=0;he<oe.length;he++){var de=oe[he].toQuadratic();_e([de.x,de.x1,de.cx],[de.y,de.y1,de.cy],de)}break;default:throw new Error("unknown command type: ".concat(H.type))}U=Z,W=te}}}catch(Ge){ie=!0,E=Ge}finally{try{K||B.return==null||B.return()}finally{if(ie)throw E}}for(var J=I.length,ue=this.strokeImageInfos.findImage(J),ye=ue.index,Ce=0;Ce<J;++Ce){var ge=I[Ce];y(ue,Ee(ge.x),Ee(ge.y),Ee(ge.cx),Ee(ge.cy))}(C=this.glyphInfos[x.index]={glyph:x,uGlyphRect:[M.x1,-M.y1,M.x2,-M.y2],strokeImageInfo:ue,strokes:I,colInfo:Ke(F,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ke(A,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[C.colInfo.dimOffset,C.rowInfo.dimOffset]}return C;function _e(Ge,ze,He){var qe=I.length;function ce($,ne,ve){for(var je=$.length;0<je--;){var Le=$[je];Le<ne&&(ne=Le),ve<Le&&(ve=Le)}return{min:ne,max:ve}}I.push(He);for(var He=ce(Ge,1,0),Ge=Math.max(Math.floor(9*He.min-.5),0),Ae=Math.min(Math.ceil(9*He.max+.5),9),xe=Ge;xe<Ae;++xe)F[xe].push(qe);for(var He=ce(ze,1,0),Ge=Math.max(Math.floor(9*He.min-.5),0),Q=Math.min(Math.ceil(9*He.max+.5),9),re=Ge;re<Q;++re)A[re].push(qe)}function Ee(Ge){return(Ge=(He=255)*Ge)<(ze=0)?ze:He<Ge?He:Ge;var ze,He}function Ie(Ge,ze,He,qe){_e([Ge,He],[ze,qe],{x:Ge,y:ze,cx:(Ge+He)/2,cy:(ze+qe)/2})}function Te(Ge,ze,He,qe){return Math.abs(He-Ge)<1e-5&&Math.abs(qe-ze)<1e-5}function Ke(Ge,ze,He){for(var qe=Ge.length,ce=ze.findImage(qe),ze=ce.index,Ae=0,xe=0;xe<qe;++xe)Ae+=Ge[xe].length;for(var Q=He.findImage(Ae),re=0;re<qe;++re){var $=Ge[re],ne=$.length,ve=Q.index;y(ce,ve>>7,127&ve,ne>>7,127&ne);for(var je=0;je<ne;++je){var Le=$[je]+ye;y(Q,Le>>7,127&Le,0,0)}}return{cellImageInfo:Q,dimOffset:ze,dimImageInfo:ce}}}}]),_}();l.default.RendererGL.prototype._renderText=function(_,x,C,M,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=M)&&this._doFill){if(this._isOpenType()){_.push();var S=this._doStroke,P=this.drawMode,L=(this._doStroke=!1,this.drawMode=b.TEXTURE,this._textFont.font),D=(D=this._textFont._fontInfo)||(this._textFont._fontInfo=new v(L)),C=this._textFont._handleAlignment(this,x,C,M),M=this._textSize/L.unitsPerEm,k=(this.translate(C.x,C.y,0),this.scale(M,M,1),this.GL),C=!this._defaultFontShader,I=this._getFontShader(),A=(I.init(),I.bindShader(),C&&(I.setUniform("uGridImageSize",[64,64]),I.setUniform("uCellsImageSize",[64,64]),I.setUniform("uStrokeImageSize",[64,64]),I.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),F=(A||((M=this._textGeom=new l.default.Geometry(1,1,function(){for(var he=0;he<=1;he++)for(var de=0;de<=1;de++)this.vertices.push(new l.default.Vector(de,he,0)),this.uvs.push(de,he)})).computeFaces().computeNormals(),A=this.createBuffers("glyph",M)),!0),C=!1,M=void 0;try{for(var N,U=this.retainedMode.buffers.text[Symbol.iterator]();!(F=(N=U.next()).done);F=!0)N.value._prepareBuffer(A,I)}catch(he){C=!0,M=he}finally{try{F||U.return==null||U.return()}finally{if(C)throw M}}this._bindBuffer(A.indexBuffer,k.ELEMENT_ARRAY_BUFFER),I.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var W=0,G=null,z=L.stringToGlyphs(x),Y=!0,K=!1,ie=void 0;try{for(var E,R=z[Symbol.iterator]();!(Y=(E=R.next()).done);Y=!0){var B,H,Z=E.value,te=(G&&(W+=L.getKerningValue(G,Z)),D.getGlyphInfo(Z));te.uGlyphRect&&(B=te.rowInfo,H=te.colInfo,I.setUniform("uSamplerStrokes",te.strokeImageInfo.imageData),I.setUniform("uSamplerRowStrokes",B.cellImageInfo.imageData),I.setUniform("uSamplerRows",B.dimImageInfo.imageData),I.setUniform("uSamplerColStrokes",H.cellImageInfo.imageData),I.setUniform("uSamplerCols",H.dimImageInfo.imageData),I.setUniform("uGridOffset",te.uGridOffset),I.setUniform("uGlyphRect",te.uGlyphRect),I.setUniform("uGlyphOffset",W),I.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),W+=Z.advanceWidth,G=Z}}catch(he){K=!0,ie=he}finally{try{Y||R.return==null||R.return()}finally{if(K)throw ie}}}finally{I.unbindShader(),this._doStroke=S,this.drawMode=P,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),_.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return _}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})})(Ch);var Mm=Ch.exports;const Lm=Tm(Mm);var ri,ni;class Am{constructor(r,n){Oi(this,ri,0);Oi(this,ni,0);this.size=r||{x:400,y:300},this.bricksSize=n||{x:60,y:30},Va(this,ri,this.size.x/this.bricksSize.x),Va(this,ni,this.size.y/this.bricksSize.y)}print(r){r.push(),r.noFill(),r.stroke(0),r.strokeWeight(2);for(let n=0;n<Ai(this,ri);n++)for(let t=0;t<Ai(this,ni);t++)t%2?r.rect(n*this.bricksSize.x+this.bricksSize.x/2,t*this.bricksSize.y,this.bricksSize.x,this.bricksSize.y):r.rect(n*this.bricksSize.x,t*this.bricksSize.y,this.bricksSize.x,this.bricksSize.y);r.pop()}}ri=new WeakMap,ni=new WeakMap;const Tc={"#":()=>{},square:(s,r,n,t,i)=>{s.rect(r,n,t,i)},point:{center:(s,r,n,t,i)=>{s.point(r+t*.5,n+i*.5)},side:(s,r,n,t,i)=>{s.point(r,n+i*.5)},corner:(s,r,n,t,i)=>{s.point(r,n)}},line:{side:(s,r,n,t,i)=>{s.line(r,n,r,n+i)},center:(s,r,n,t,i)=>{s.line(r+t*.5,n,r+t*.5,n+i)}},arc:(s,r,n,t,i)=>{s.arc(r+t,n+i,t*2,i*2,s.PI*1,s.PI*1.5)},arcInv:(s,r,n,t,i)=>{s.beginClip({invert:!0}),s.circle(r+t,n+i,t*2),s.endClip(),s.rect(r,n,t,i)}},Mc={" ":{outline:[[[["#"]]],[[["#"]]],[[["#"]]],[[["#"]]]],fill:[[[["#"]]],[[["#"]]],[[["#"]]],[[["#"]]]]},a:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["point-corner",1]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},b:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-side",2]],[["arc",1]]],[[["line-side"]],[["point-side",2]],[["arc",.5]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["arc",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},c:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["line-side"],["line-side",1.5]],[["arc",1]]],[[["line-side"]],[["line-side"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},d:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["arc",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},e:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["arc",1.5]],[["arc",.5]],[["arc",1]]],[[["arc"]],[["arc",2]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},f:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["arc",1.5]],[["arc",1]]],[[["line-side"]],[],[["line-side",1],["line-side",.5],["line-side",1.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]],[["#"]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["#"]]]]},g:{outline:[[[["arc"]],[["arc",.5]],[["#"]]],[[["line-side"]],[["line-side"],["line-side",.5]],[["line-side",1],["line-side",.5]]],[[["line-side"]],[["line-side"],["arc"]],[["line-side",1]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},h:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["#"]],[["#"]]],[[["line-side"]],[["line-side"],["arc"]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["#"]],[["#"]]],[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},H:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},i:{outline:[[[["arc"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]]],[[["arc"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]]],[[["arc"]],[["arc",.5]]],[[["square"]],[["square"]]]]},j:{outline:[[[["#"]],[["arc"]],[["arc",.5]]],[[["arc"]],[["arc",.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["#"]],[["arc"]],[["arc",.5]]],[[["arc"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]]]},k:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["line-side"],["line-side",.5]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["arc",1]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5],["line-side",1]],[["line-side",1.5]],[["line-side",1],["line-side",1.5]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},l:{outline:[[[["arc"]],[["arc",.5]],[["line-side",1.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]]]},m:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-center"]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["line-side"]],[["line-side"],["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side"]],[["line-side"],["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},n:{outline:[[[["line-side"],["line-side",.5]],[["arc"],["line-side"]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["line-side"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-side"]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]},o:{outline:[[[["arc"]],[["line-side",.5]],[["arc",.5]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["point-corner",.5]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["arc"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},p:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["line-side",1]]],[[["line-side"]],[["#"]],[["arc",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1],["line-side",1.5]],[["#"]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["#"]]]]},q:{outline:[[[["arc"]],[["arc",.5]],[["#"]]],[[["line-side"]],[["line-side",1]],[["#"]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1],["line-side",1.5]]]],fill:[[[["arc"]],[["arc",.5]],[["#"]]],[[["square"]],[["square"]],[["#"]]],[[["square"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},r:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"]],[["point-corner",1.5]],[["arc",1]]],[[["line-side"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side"],["line-side",1.5]],[["line-side",1],["line-side",1.5]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["arc",1]]],[[["square"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},s:{outline:[[[["arc"]],[["arc",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["arc"]],[["line-side",1],["arc",.5]]],[[["line-side"],["arc",1.5]],[["arc",1]],[["line-side",1]]],[[["line-side"],["line-side",1],["line-side",1.5]],[["arc",1.5]],[["arc",1]]]],fill:[[[["arc"]],[["arc",.5]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["arc",1.5]],[["arc",1]]]]},t:{outline:[[[["arc",1]],[["line-side",.5]],[["line-side"],["arc",1],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc"],["line-side",.5]],[["arc"]],[["line-side",.5],["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["line-side"],["line-side",1],["line-side",1.5]]]],fill:[[[["arcInv",1]],[["square"]],[["arcInv",1]]],[[["square"]],[["square"]],[["square"]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["arc",1.5]],[["arc",1]],[["square"]]]]},u:{outline:[[[["line-side"],["line-side",.5],["line-side",1]],[["arc"]],[["arc",.5]]],[[["line-side"],["line-side",1]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["square"]],[["arc"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},v:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-side",1]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["line-side",1]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]]]},w:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-side"],["line-side",1]],[["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["line-side"]],[["#"]],[["line-side",1]]],[[["arc",1.5]],[["line-side",1.5],["line-center"]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]]]},x:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5],["line-center"]],[["line-side",.5],["line-side",1]]],[[["arc",1.5]],[["#"]],[["arc",1]]],[[["arc"]],[["#"]],[["arc",.5]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5],["line-center"]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["arc",1]]],[[["arc"]],[["square"]],[["arc",.5]]],[[["square"]],[["square"]],[["square"]]]]},y:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side"],["line-side",.5],["line-side",1]]],[[["line-side"]],[["#"]],[["line-side"],["line-side",1]]],[[["arc",1.5]],[["#"]],[["line-side",1]]],[[["line-side"],["line-side",.5],["line-side",1.5]],[["line-side",1.5],["line-side",.5]],[["arc",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["arc",1.5]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["arc",1]]]]},z:{outline:[[[["line-side"],["line-side",.5]],[["line-side",.5]],[["line-side",.5],["line-side",1]]],[[["line-side"],["arc"]],[["arc",.5]],[["line-side",1]]],[[["line-side"]],[["arc",1.5]],[["arc",1],["line-side",1]]],[[["line-side"],["line-side",1.5]],[["line-side",1.5]],[["line-side",1.5],["line-side",1]]]],fill:[[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]],[[["square"]],[["square"]],[["square"]]]]}};var da;class Om{constructor(r,n){Oi(this,da,{fill:{fill:"#FFFF00",stroke:"#000000",strokeWeight:0},outline:{fill:"#00000000",stroke:"#000000",strokeWeight:4}});this.id=r,this.cellSize=n||30,this.fillCells=[],this.outlineCells=[],this.width=0,this.height=0,this.transform={translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},this.init()}init(){this.fillCells=this.createLayer(Mc[this.id].fill),this.outlineCells=this.createLayer(Mc[this.id].outline),this.width=this.outlineCells[0].length*this.cellSize,this.height=this.outlineCells.length*this.cellSize}createShape(r,n){let t=r.split("-"),i=t[0],d=t[1]||null;return{print:(a,l,b,g,u)=>{d?Tc[i][d](a,l,b,g,u):Tc[i](a,l,b,g,u)},rotation:n||0}}createCell(r){let n=[];if(r.length>0)for(let t of r){let i=this.createShape(t[0],t[1]||0);n.push(i)}return n}createLayer(r){let n=r,t=[];for(let i of n){let d=[];for(let o of i){let c=this.createCell(o);d=[...d,c]}t=[...t,d]}return t}print(r,n){let t=n||Ai(this,da);this.printLayer(r,this.fillCells,t.fill),this.printLayer(r,this.outlineCells,t.outline)}printLayer(r,n,t){let i={x:0,y:0};r.push();for(let d=0;d<n.length;d++){let o=n[d];for(let c=0;c<o.length;c++){let a=o[c];for(let l of a)r.push(),r.fill(t.fill),r.stroke(t.stroke),r.strokeWeight(t.strokeWeight),this.applyTransform(r),r.translate(-this.width/2,-this.height/2),r.translate(i.x,i.y),r.translate(this.cellSize*.5,this.cellSize*.5),r.rotate(3.1416*Number(l.rotation)),r.translate(-this.cellSize*.5,-this.cellSize*.5),l.print(r,0,0,this.cellSize,this.cellSize),r.pop();i.x+=this.cellSize,c==o.length-1&&(i.x=0,i.y+=this.cellSize)}}r.pop()}applyTransform(r){r.translate(this.transform.translate.x,this.transform.translate.y),r.shearX(this.transform.shear.x),r.shearY(this.transform.shear.y),r.rotate(3.1416*this.transform.rotation),r.scale(this.transform.scale.x,this.transform.scale.y)}updateTransform(r){this.transform=r}}da=new WeakMap;class Rm{constructor(r){this.string=r,this.width=0,this.gap=0,this.transform={translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},this.init()}init(r){this.characters=[];let t=(r||this.string).split("");for(let i=0;i<t.length;i++){let d=new Om(t[i]);this.characters=[...this.characters,d]}this.updateWidth()}updateWidth(){this.width=0;for(let r of this.characters)this.width+=r.width+this.gap}print(r,n){let t={x:0,y:0};r.push(),this.applyTransform(r),r.translate(this.width/2-this.characters[this.characters.length-1].width*.5,0);for(let i=0;i<this.characters.length;i++){r.translate(-this.gap,0),r.push(),r.translate(t.x-this.gap,t.y);let d=this.characters.length-1-i;if(this.characters[d].print(r,n),this.characters[d-1]){let o=(this.characters[d].width+this.characters[d-1].width)/2;console.warn(o),t.x-=o}r.pop()}r.pop()}applyTransform(r){r.translate(this.transform.translate.x,this.transform.translate.y),r.shearX(this.transform.shear.x),r.shearY(this.transform.shear.y),r.rotate(3.1416*this.transform.rotation),r.scale(this.transform.scale.x,this.transform.scale.y)}updateTransform(r,n){this.transform=r;for(let t of this.characters)t.updateTransform(n)}updateGap(r){this.gap=r,this.updateWidth()}}const Ns=[];function ha(s,r=fr){let n;const t=new Set;function i(c){if(Cr(s,c)&&(s=c,n)){const a=!Ns.length;for(const l of t)l[1](),Ns.push(l,s);if(a){for(let l=0;l<Ns.length;l+=2)Ns[l][0](Ns[l+1]);Ns.length=0}}}function d(c){i(c(s))}function o(c,a=fr){const l=[c,a];return t.add(l),t.size===1&&(n=r(i,d)||fr),c(s),()=>{t.delete(l),t.size===0&&n&&(n(),n=null)}}return{set:i,update:d,subscribe:o}}const fs=ha({text:"asca",gap:0,tupTransform:{translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},charTransform:{translate:{x:0,y:0},scale:{x:1,y:1},rotation:0,shear:{x:0,y:0}},style:{fill:{fill:"#FF00FFFF",stroke:"#00000000",strokeWeight:0},outline:{fill:"#00000000",stroke:"#000000FF",strokeWeight:2}}}),Dm=s=>{let r=fm(fs);const n={x:540,y:540};let t,i,d,o;s.setup=()=>{s.pixelDensity(4),s.createCanvas(n.x,n.y),i=s.createGraphics(n.x,n.y),d=s.createGraphics(n.x,n.y),s.noSmooth(),i.noSmooth(),i.translate(n.x/2,n.y/2),d.translate(n.x/2,n.y/2),t=new Rm(r.text),o=new Am(n,{x:40,y:20})},s.draw=()=>{s.clear(),i.clear(),d.clear(),s.background(125),o.print(s),t.updateTransform(r.tupTransform,r.charTransform),t.updateGap(r.gap),t.print(i,r.style),s.image(i,0,0)},s.windowResized=()=>{},s.resetTup=()=>{t.init(r.text)}};function Gt(s){return s==null}function Fl(s){return s!==null&&typeof s=="object"}function gl(s){return s!==null&&typeof s=="object"}function Im(s,r){if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==r[n])return!1;return!0}function ws(s,r){return Array.from(new Set([...Object.keys(s),...Object.keys(r)])).reduce((t,i)=>{const d=s[i],o=r[i];return gl(d)&&gl(o)?Object.assign(Object.assign({},t),{[i]:ws(d,o)}):Object.assign(Object.assign({},t),{[i]:i in r?o:d})},{})}function Fm(s){return Fl(s)?"target"in s:!1}const Nm={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:s=>`Not compatible with  plugin '${s.id}'`,propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let un=class Ks{static alreadyDisposed(){return new Ks({type:"alreadydisposed"})}static notBindable(){return new Ks({type:"notbindable"})}static notCompatible(r,n){return new Ks({type:"notcompatible",context:{id:`${r}.${n}`}})}static propertyNotFound(r){return new Ks({type:"propertynotfound",context:{name:r}})}static shouldNeverHappen(){return new Ks({type:"shouldneverhappen"})}constructor(r){var n;this.message=(n=Nm[r.type](r.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=r.type}toString(){return this.message}},Lc=class Eh{constructor(r,n){this.obj_=r,this.key=n}static isBindable(r){return!(r===null||typeof r!="object"&&typeof r!="function")}read(){return this.obj_[this.key]}write(r){this.obj_[this.key]=r}writeProperty(r,n){const t=this.read();if(!Eh.isBindable(t))throw un.notBindable();if(!(r in t))throw un.propertyNotFound(r);t[r]=n}},Lr=class{constructor(){this.observers_={}}on(r,n,t){var i;let d=this.observers_[r];return d||(d=this.observers_[r]=[]),d.push({handler:n,key:(i=t==null?void 0:t.key)!==null&&i!==void 0?i:n}),this}off(r,n){const t=this.observers_[r];return t&&(this.observers_[r]=t.filter(i=>i.key!==n)),this}emit(r,n){const t=this.observers_[r];t&&t.forEach(i=>{i.handler(n)})}},Vm=class{constructor(r,n){var t;this.constraint_=n==null?void 0:n.constraint,this.equals_=(t=n==null?void 0:n.equals)!==null&&t!==void 0?t:(i,d)=>i===d,this.emitter=new Lr,this.rawValue_=r}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(r){this.setRawValue(r,{forceEmit:!1,last:!0})}setRawValue(r,n){const t=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(r):r,d=this.rawValue_;this.equals_(d,i)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:t,previousRawValue:d,rawValue:i,sender:this}))}},Bm=class{constructor(r){this.emitter=new Lr,this.value_=r}get rawValue(){return this.value_}set rawValue(r){this.setRawValue(r,{forceEmit:!1,last:!0})}setRawValue(r,n){const t=n??{forceEmit:!1,last:!0},i=this.value_;i===r&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=r,this.emitter.emit("change",{options:t,previousRawValue:i,rawValue:this.value_,sender:this}))}},Um=class{constructor(r){this.emitter=new Lr,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=r,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(r){this.emitter.emit("beforechange",Object.assign(Object.assign({},r),{sender:this}))}onValueChange_(r){this.emitter.emit("change",Object.assign(Object.assign({},r),{sender:this}))}};function Zt(s,r){const n=r==null?void 0:r.constraint,t=r==null?void 0:r.equals;return!n&&!t?new Bm(s):new Vm(s,r)}function Gm(s){return[new Um(s),(r,n)=>{s.setRawValue(r,n)}]}let ht=class Sh{constructor(r){this.emitter=new Lr,this.valMap_=r;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(r){return Object.keys(r).reduce((t,i)=>Object.assign(t,{[i]:Zt(r[i])}),{})}static fromObject(r){const n=this.createCore(r);return new Sh(n)}get(r){return this.valMap_[r].rawValue}set(r,n){this.valMap_[r].rawValue=n}value(r){return this.valMap_[r]}},ii=class{constructor(r){this.values=ht.fromObject({max:r.max,min:r.min})}constrain(r){const n=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(r,t),n)}},pa=class{constructor(r){this.values=ht.fromObject({max:r.max,min:r.min})}constrain(r){const n=this.values.get("max"),t=this.values.get("min");let i=r;return Gt(t)||(i=Math.max(i,t)),Gt(n)||(i=Math.min(i,n)),i}},Ph=class{constructor(r,n=0){this.step=r,this.origin=n}constrain(r){const n=this.origin%this.step,t=Math.round((r-n)/this.step);return n+t*this.step}},zm=class{constructor(r){this.text=r}evaluate(){return Number(this.text)}toString(){return this.text}};const qm={"**":(s,r)=>Math.pow(s,r),"*":(s,r)=>s*r,"/":(s,r)=>s/r,"%":(s,r)=>s%r,"+":(s,r)=>s+r,"-":(s,r)=>s-r,"<<":(s,r)=>s<<r,">>":(s,r)=>s>>r,">>>":(s,r)=>s>>>r,"&":(s,r)=>s&r,"^":(s,r)=>s^r,"|":(s,r)=>s|r};let Hm=class{constructor(r,n,t){this.left=n,this.operator=r,this.right=t}evaluate(){const r=qm[this.operator];if(!r)throw new Error(`unexpected binary operator: '${this.operator}`);return r(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const Wm={"+":s=>s,"-":s=>-s,"~":s=>~s};let Xm=class{constructor(r,n){this.operator=r,this.expression=n}evaluate(){const r=Wm[this.operator];if(!r)throw new Error(`unexpected unary operator: '${this.operator}`);return r(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Nl(s){return(r,n)=>{for(let t=0;t<s.length;t++){const i=s[t](r,n);if(i!=="")return i}return""}}function qo(s,r){var n;const t=s.substr(r).match(/^\s+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Ym(s,r){const n=s.substr(r,1);return n.match(/^[1-9]$/)?n:""}function Ho(s,r){var n;const t=s.substr(r).match(/^[0-9]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function $m(s,r){const n=Ho(s,r);if(n!=="")return n;const t=s.substr(r,1);if(r+=1,t!=="-"&&t!=="+")return"";const i=Ho(s,r);return i===""?"":t+i}function Vl(s,r){const n=s.substr(r,1);if(r+=1,n.toLowerCase()!=="e")return"";const t=$m(s,r);return t===""?"":n+t}function kh(s,r){const n=s.substr(r,1);if(n==="0")return n;const t=Ym(s,r);return r+=t.length,t===""?"":t+Ho(s,r)}function Km(s,r){const n=kh(s,r);if(r+=n.length,n==="")return"";const t=s.substr(r,1);if(r+=t.length,t!==".")return"";const i=Ho(s,r);return r+=i.length,n+t+i+Vl(s,r)}function Zm(s,r){const n=s.substr(r,1);if(r+=n.length,n!==".")return"";const t=Ho(s,r);return r+=t.length,t===""?"":n+t+Vl(s,r)}function Qm(s,r){const n=kh(s,r);return r+=n.length,n===""?"":n+Vl(s,r)}const Jm=Nl([Km,Zm,Qm]);function ey(s,r){var n;const t=s.substr(r).match(/^[01]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function ty(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0b")return"";const t=ey(s,r);return t===""?"":n+t}function ry(s,r){var n;const t=s.substr(r).match(/^[0-7]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function ny(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0o")return"";const t=ry(s,r);return t===""?"":n+t}function sy(s,r){var n;const t=s.substr(r).match(/^[0-9a-f]+/i);return(n=t&&t[0])!==null&&n!==void 0?n:""}function oy(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0x")return"";const t=sy(s,r);return t===""?"":n+t}const iy=Nl([ty,ny,oy]),ay=Nl([iy,Jm]);function ly(s,r){const n=ay(s,r);return r+=n.length,n===""?null:{evaluable:new zm(n),cursor:r}}function uy(s,r){const n=s.substr(r,1);if(r+=n.length,n!=="(")return null;const t=Mh(s,r);if(!t)return null;r=t.cursor,r+=qo(s,r).length;const i=s.substr(r,1);return r+=i.length,i!==")"?null:{evaluable:t.evaluable,cursor:r}}function cy(s,r){var n;return(n=ly(s,r))!==null&&n!==void 0?n:uy(s,r)}function Th(s,r){const n=cy(s,r);if(n)return n;const t=s.substr(r,1);if(r+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const i=Th(s,r);return i?(r=i.cursor,{cursor:r,evaluable:new Xm(t,i.evaluable)}):null}function dy(s,r,n){n+=qo(r,n).length;const t=s.filter(i=>r.startsWith(i,n))[0];return t?(n+=t.length,n+=qo(r,n).length,{cursor:n,operator:t}):null}function hy(s,r){return(n,t)=>{const i=s(n,t);if(!i)return null;t=i.cursor;let d=i.evaluable;for(;;){const o=dy(r,n,t);if(!o)break;t=o.cursor;const c=s(n,t);if(!c)return null;t=c.cursor,d=new Hm(o.operator,d,c.evaluable)}return d?{cursor:t,evaluable:d}:null}}const py=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,r)=>hy(s,r),Th);function Mh(s,r){return r+=qo(s,r).length,py(s,r)}function fy(s){const r=Mh(s,0);return!r||r.cursor+qo(s,r.cursor).length!==s.length?null:r.evaluable}function Ir(s){var r;const n=fy(s);return(r=n==null?void 0:n.evaluate())!==null&&r!==void 0?r:null}function ai(s){if(typeof s=="number")return s;if(typeof s=="string"){const r=Ir(s);if(!Gt(r))return r}return 0}function cr(s){return r=>r.toFixed(Math.max(Math.min(s,20),0))}function mt(s,r,n,t,i){const d=(s-r)/(n-r);return t+d*(i-t)}function vl(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Kt(s,r,n){return Math.min(Math.max(s,r),n)}function Lh(s,r){return(s%r+r)%r}function my(s,r){return Gt(s.step)?Math.max(vl(r),2):vl(s.step)}function Ah(s){var r;return(r=s.step)!==null&&r!==void 0?r:1}function yy(s,r){var n;const t=Math.abs((n=s.step)!==null&&n!==void 0?n:r);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function fa(s,r){return Gt(s.step)?null:new Ph(s.step,r)}function ma(s){return!Gt(s.max)&&!Gt(s.min)?new ii({max:s.max,min:s.min}):!Gt(s.max)||!Gt(s.min)?new pa({max:s.max,min:s.min}):null}function li(s,r){var n,t,i;return{formatter:(n=s.format)!==null&&n!==void 0?n:cr(my(s,r)),keyScale:(t=s.keyScale)!==null&&t!==void 0?t:Ah(s),pointerScale:(i=s.pointerScale)!==null&&i!==void 0?i:yy(s,r)}}function ui(s){return{format:s.optional.function,keyScale:s.optional.number,max:s.optional.number,min:s.optional.number,pointerScale:s.optional.number,step:s.optional.number}}function Bl(s){return{constraint:s.constraint,textProps:ht.fromObject(li(s.params,s.initialValue))}}let ns=class{constructor(r){this.controller=r}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(r){this.controller.viewProps.set("disabled",r)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(r){this.controller.viewProps.set("hidden",r)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(r){return this.controller.importState(r)}exportState(){return this.controller.exportState()}},Ts=class{constructor(r){this.target=r}},ya=class extends Ts{constructor(r,n,t){super(r),this.value=n,this.last=t??!0}},gy=class extends Ts{constructor(r,n){super(r),this.expanded=n}},vy=class extends Ts{constructor(r,n){super(r),this.index=n}},by=class extends Ts{constructor(r,n){super(r),this.native=n}},Ul=class extends ns{constructor(r){super(r),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Lr,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(r){this.controller.tag=r}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}refresh(){this.controller.value.fetch()}onValueChange_(r){const n=this.controller.value;this.emitter_.emit("change",new ya(this,n.binding.target.read(),r.options.last))}};function _y(s,r){const t=Object.keys(r).reduce((i,d)=>{if(i===void 0)return;const o=r[d],c=o(s[d]);return c.succeeded?Object.assign(Object.assign({},i),{[d]:c.value}):void 0},{});return t}function wy(s,r){return s.reduce((n,t)=>{if(n===void 0)return;const i=r(t);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function xy(s){return s===null?!1:typeof s=="object"}function Sn(s){return r=>n=>{if(!r&&n===void 0)return{succeeded:!1,value:void 0};if(r&&n===void 0)return{succeeded:!0,value:void 0};const t=s(n);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function Ac(s){return{custom:r=>Sn(r)(s),boolean:Sn(r=>typeof r=="boolean"?r:void 0)(s),number:Sn(r=>typeof r=="number"?r:void 0)(s),string:Sn(r=>typeof r=="string"?r:void 0)(s),function:Sn(r=>typeof r=="function"?r:void 0)(s),constant:r=>Sn(n=>n===r?r:void 0)(s),raw:Sn(r=>r)(s),object:r=>Sn(n=>{if(xy(n))return _y(n,r)})(s),array:r=>Sn(n=>{if(Array.isArray(n))return wy(n,r)})(s)}}const bl={optional:Ac(!0),required:Ac(!1)};function It(s,r){const n=r(bl),t=bl.required.object(n)(s);return t.succeeded?t.value:void 0}function hn(s,r,n,t){if(r&&!r(s))return!1;const i=It(s,n);return i?t(i):!1}function pn(s,r){var n;return ws((n=s==null?void 0:s())!==null&&n!==void 0?n:{},r)}function Xi(s){return"value"in s}function jy(s){if(!Fl(s)||!("binding"in s))return!1;const r=s.binding;return Fm(r)}const Mt="http://www.w3.org/2000/svg";function ta(s){s.offsetHeight}function Cy(s,r){const n=s.style.transition;s.style.transition="none",r(),s.style.transition=n}function ci(s){return s.ontouchstart!==void 0}function Ey(){return globalThis}function Sy(){return Ey().document}function Py(s){const r=s.ownerDocument.defaultView;return r&&"document"in r?s.getContext("2d",{willReadFrequently:!0}):null}const ky={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ga(s,r){const n=s.createElementNS(Mt,"svg");return n.innerHTML=ky[r],n}function Oh(s,r,n){s.insertBefore(r,s.children[n])}function Wo(s){s.parentElement&&s.parentElement.removeChild(s)}function Rh(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function Ty(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function va(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}function en(s,r){s.emitter.on("change",n=>{r(n.rawValue)}),r(s.rawValue)}function Gr(s,r,n){en(s.value(r),n)}const My="tp";function at(s){return(n,t)=>[My,"-",s,"v",n?`_${n}`:"",t?`-${t}`:""].join("")}const ko=at("lbl");function Ly(s,r){const n=s.createDocumentFragment();return r.split(`
`).map(i=>s.createTextNode(i)).forEach((i,d)=>{d>0&&n.appendChild(s.createElement("br")),n.appendChild(i)}),n}let Dh=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(ko()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(ko("l")),Gr(n.props,"label",d=>{Gt(d)?this.element.classList.add(ko(void 0,"nol")):(this.element.classList.remove(ko(void 0,"nol")),Ty(t),t.appendChild(Ly(r,d)))}),this.element.appendChild(t),this.labelElement=t;const i=r.createElement("div");i.classList.add(ko("v")),this.element.appendChild(i),this.valueElement=i}},di=class{constructor(r,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Dh(r,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(r){return hn(r,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return pn(null,{label:this.props.get("label")})}};function Ay(){return["veryfirst","first","last","verylast"]}const Oc=at(""),Rc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let uo=class{constructor(r){this.parent_=null,this.blade=r.blade,this.view=r.view,this.viewProps=r.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Ay().forEach(t=>{n.classList.remove(Oc(void 0,Rc[t]))}),this.blade.get("positions").forEach(t=>{n.classList.add(Oc(void 0,Rc[t]))})}),this.viewProps.handleDispose(()=>{Wo(n)})}get parent(){return this.parent_}set parent(r){this.parent_=r,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(r){return hn(r,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return pn(null,Object.assign({},this.viewProps.exportState()))}},ra=class extends uo{constructor(r,n){if(n.value!==n.valueController.value)throw un.shouldNeverHappen();const t=n.valueController.viewProps,i=new di(r,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Dh(r,{props:n.props,viewProps:t}),viewProps:t})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(r){return hn(r,n=>{var t,i,d;return super.importState(n)&&this.labelController.importProps(n)&&((d=(i=(t=this.valueController).importProps)===null||i===void 0?void 0:i.call(t,r))!==null&&d!==void 0?d:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var r,n,t;return pn(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(t=(n=(r=this.valueController).exportProps)===null||n===void 0?void 0:n.call(r))!==null&&t!==void 0?t:{}))}};function Ih(s,r){for(;s.length<r;)s.push(void 0)}function Oy(s){const r=[];return Ih(r,s),r}function Ry(s){const r=s.indexOf(void 0);return r<0?s:s.slice(0,r)}function Dy(s,r){const n=[...Ry(s),r];return n.length>s.length?n.splice(0,n.length-s.length):Ih(n,s.length),n}let Iy=class extends ns{get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get title(){var r;return(r=this.controller.buttonController.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller.buttonController.props.set("title",r)}on(r,n){const t=n.bind(this);return this.controller.buttonController.emitter.on(r,d=>{t(new by(this,d.nativeEvent))}),this}off(r,n){return this.controller.buttonController.emitter.off(r,n),this}};function Fy(s,r,n){n?s.classList.add(r):s.classList.remove(r)}function Dn(s,r){return n=>{Fy(s,r,n)}}function Gl(s,r){en(s,n=>{r.textContent=n??""})}const Ua=at("btn");let Ny=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Ua()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("button");t.classList.add(Ua("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const i=r.createElement("div");i.classList.add(Ua("t")),Gl(n.props.value("title"),i),this.buttonElement.appendChild(i)}},Fh=class{constructor(r,n){this.emitter=new Lr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Ny(r,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(r){return hn(r,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return pn(null,{title:this.props.get("title")})}onClick_(r){this.emitter.emit("click",{nativeEvent:r,sender:this})}},Dc=class extends uo{constructor(r,n){const t=new Fh(r,{props:n.buttonProps,viewProps:n.viewProps}),i=new di(r,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=t,this.labelController=i}importState(r){return hn(r,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return pn(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Vy=class{constructor(r){const[n,t]=r.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=t??null}toString(){const r=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[r,this.prerelease].join("-"):r}};const By=new Vy("2.0.3");function Nt(s){return Object.assign({core:By},s)}Nt({id:"button",type:"blade",accept(s){const r=It(s,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return r?{params:r}:null},controller(s){return new Dc(s.document,{blade:s.blade,buttonProps:ht.fromObject({title:s.params.title}),labelProps:ht.fromObject({label:s.params.label}),viewProps:s.viewProps})},api(s){return s.controller instanceof Dc?new Iy(s.controller):null}});function Uy(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"button"}))}function Gy(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"folder"}))}function zy(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"tab"}))}function qy(s){return Fl(s)?"refresh"in s&&typeof s.refresh=="function":!1}function Hy(s,r){if(!Lc.isBindable(s))throw un.notBindable();return new Lc(s,r)}let Wy=class{constructor(r,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=r,this.emitter_=new Lr,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(r=>this.pool_.createApi(r))}addBinding(r,n,t){const i=t??{},d=this.controller_.element.ownerDocument,o=this.pool_.createBinding(d,Hy(r,n),i),c=this.pool_.createBindingApi(o);return this.add(c,i.index)}addFolder(r){return Gy(this,r)}addButton(r){return Uy(this,r)}addTab(r){return zy(this,r)}add(r,n){const t=r.controller;return this.controller_.rack.add(t,n),r}remove(r){this.controller_.rack.remove(r.controller)}addBlade(r){const n=this.controller_.element.ownerDocument,t=this.pool_.createBlade(n,r),i=this.pool_.createApi(t);return this.add(i,r.index)}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}refresh(){this.children.forEach(r=>{qy(r)&&r.refresh()})}onRackValueChange_(r){const n=r.bladeController,t=this.pool_.createApi(n),i=jy(n.value)?n.value.binding:null;this.emitter_.emit("change",new ya(t,i?i.target.read():n.value.rawValue,r.options.last))}},zl=class extends ns{constructor(r,n){super(r),this.rackApi_=new Wy(r.rackController,n)}refresh(){this.rackApi_.refresh()}},ql=class extends uo{constructor(r){super({blade:r.blade,view:r.view,viewProps:r.rackController.viewProps}),this.rackController=r.rackController}importState(r){return hn(r,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((t,i)=>t.importState(n.children[i])))}exportState(){return pn(()=>super.exportState(),{children:this.rackController.rack.children.map(r=>r.exportState())})}};function _l(s){return"rackController"in s}let Xy=class{constructor(r){this.emitter=new Lr,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=r}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(r){for(const n of this.allItems())if(r(n))return n;return null}includes(r){return this.cache_.has(r)}add(r,n){if(this.includes(r))throw un.shouldNeverHappen();const t=n!==void 0?n:this.items_.length;this.items_.splice(t,0,r),this.cache_.add(r);const i=this.extract_(r);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(d=>{this.cache_.add(d)})),this.emitter.emit("add",{index:t,item:r,root:this,target:this})}remove(r){const n=this.items_.indexOf(r);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(r);const t=this.extract_(r);t&&(t.allItems().forEach(i=>{this.cache_.delete(i)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:r,root:this,target:this})}onSubListAdd_(r){this.cache_.add(r.item),this.emitter.emit("add",{index:r.index,item:r.item,root:this,target:r.target})}onSubListRemove_(r){this.cache_.delete(r.item),this.emitter.emit("remove",{index:r.index,item:r.item,root:this,target:r.target})}};function Yy(s,r){for(let n=0;n<s.length;n++){const t=s[n];if(Xi(t)&&t.value===r)return t}return null}function $y(s){return _l(s)?s.rackController.rack.bcSet_:null}let Ky=class{constructor(r){var n,t;this.emitter=new Lr,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=r.blade)!==null&&n!==void 0?n:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=r.viewProps,this.bcSet_=new Xy($y),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(r,n){var t;(t=r.parent)===null||t===void 0||t.remove(r),r.parent=this,this.bcSet_.add(r,n)}remove(r){r.parent=null,this.bcSet_.remove(r)}find(r){return this.bcSet_.allItems().filter(r)}onSetAdd_(r){this.updatePositions_();const n=r.target===r.root;if(this.emitter.emit("add",{bladeController:r.item,index:r.index,root:n,sender:this}),!n)return;const t=r.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),Xi(t))t.value.emitter.on("change",this.onChildValueChange_);else if(_l(t)){const i=t.rackController.rack;if(i){const d=i.emitter;d.on("layout",this.onRackLayout_),d.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(r){this.updatePositions_();const n=r.target===r.root;if(this.emitter.emit("remove",{bladeController:r.item,root:n,sender:this}),!n)return;const t=r.item;if(Xi(t))t.value.emitter.off("change",this.onChildValueChange_);else if(_l(t)){const i=t.rackController.rack;if(i){const d=i.emitter;d.off("layout",this.onRackLayout_),d.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const r=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=r[0],t=r[r.length-1];this.bcSet_.items.forEach(i=>{const d=[];i===n&&(d.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&d.push("veryfirst")),i===t&&(d.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&d.push("verylast")),i.blade.set("positions",d)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(r){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(r){const n=Yy(this.find(Xi),r.sender);if(!n)throw un.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:r.options,sender:this})}onRackLayout_(r){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(r){this.emitter.emit("valuechange",{bladeController:r.bladeController,options:r.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},Hl=class{constructor(r){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=r.element,this.viewProps=r.viewProps;const n=new Ky({blade:r.root?void 0:r.blade,viewProps:r.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(r){r.root&&Oh(this.element,r.bladeController.view.element,r.index)}onRackRemove_(r){r.root&&Wo(r.bladeController.view.element)}};function Nh(){return new ht({positions:Zt([],{equals:Im})})}let hi=class Vh extends ht{constructor(r){super(r)}static create(r){const n={completed:!0,expanded:r,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=ht.createCore(n);return new Vh(t)}get styleExpanded(){var r;return(r=this.get("temporaryExpanded"))!==null&&r!==void 0?r:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const r=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Gt(r)?`${r}px`:"auto"}bindExpandedClass(r,n){const t=()=>{this.styleExpanded?r.classList.add(n):r.classList.remove(n)};Gr(this,"expanded",t),Gr(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function Zy(s,r){let n=0;return Cy(r,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),ta(r),n=r.clientHeight,s.set("temporaryExpanded",null),ta(r)}),n}function Ic(s,r){r.style.height=s.styleHeight}function pi(s,r){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),Gt(s.get("expandedHeight"))){const n=Zy(s,r);n>0&&s.set("expandedHeight",n)}s.set("shouldFixHeight",!0),ta(r)}),s.emitter.on("change",()=>{Ic(s,r)}),Ic(s,r),r.addEventListener("transitionend",n=>{n.propertyName==="height"&&s.cleanUpTransition()})}let Qy=class extends zl{constructor(r,n){super(r,n),this.emitter_=new Lr,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new gy(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(r){this.controller.foldable.set("expanded",r)}get title(){return this.controller.props.get("title")}set title(r){this.controller.props.set("title",r)}get children(){return this.rackApi_.children}addBinding(r,n,t){return this.rackApi_.addBinding(r,n,t)}addFolder(r){return this.rackApi_.addFolder(r)}addButton(r){return this.rackApi_.addButton(r)}addTab(r){return this.rackApi_.addTab(r)}add(r,n){return this.rackApi_.add(r,n)}remove(r){this.rackApi_.remove(r)}addBlade(r){return this.rackApi_.addBlade(r)}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}};const Bh=at("cnt");let Jy=class{constructor(r,n){var t;this.className_=at((t=n.viewName)!==null&&t!==void 0?t:"fld"),this.element=r.createElement("div"),this.element.classList.add(this.className_(),Bh()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Gr(this.foldable_,"completed",Dn(this.element,this.className_(void 0,"cpl")));const i=r.createElement("button");i.classList.add(this.className_("b")),Gr(n.props,"title",l=>{Gt(l)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const d=r.createElement("div");d.classList.add(this.className_("i")),this.element.appendChild(d);const o=r.createElement("div");o.classList.add(this.className_("t")),Gl(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const c=r.createElement("div");c.classList.add(this.className_("m")),this.buttonElement.appendChild(c);const a=r.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}},Fc=class extends ql{constructor(r,n){var t;const i=hi.create((t=n.expanded)!==null&&t!==void 0?t:!0),d=new Jy(r,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Hl({blade:n.blade,element:d.containerElement,root:n.root,viewProps:n.viewProps}),view:d})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,pi(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(r){return hn(r,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return pn(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};Nt({id:"folder",type:"blade",accept(s){const r=It(s,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return r?{params:r}:null},controller(s){return new Fc(s.document,{blade:s.blade,expanded:s.params.expanded,props:ht.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof Fc?new Qy(s.controller,s.pool):null}});const eg=at("");function Nc(s,r){return Dn(s,eg(void 0,r))}let xs=class Uh extends ht{constructor(r){var n;super(r),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Gm(Zt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(r){var n,t,i;const d=r??{};return new Uh(ht.createCore({disabled:(n=d.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(t=d.hidden)!==null&&t!==void 0?t:!1,parent:(i=d.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(r){en(this.globalDisabled_,Nc(r,"disabled")),Gr(this,"hidden",Nc(r,"hidden"))}bindDisabled(r){en(this.globalDisabled_,n=>{r.disabled=n})}bindTabIndex(r){en(this.globalDisabled_,n=>{r.tabIndex=n?-1:0})}handleDispose(r){this.value("disposed").emitter.on("change",n=>{n&&r()})}importState(r){this.set("disabled",r.disabled),this.set("hidden",r.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const r=this.get("parent");return(r?r.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(r){var n;const t=r.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Vc=at("tbp");let tg=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Vc()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Vc("c")),this.element.appendChild(t),this.containerElement=t}};const To=at("tbi");let rg=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(To()),n.viewProps.bindClassModifiers(this.element),Gr(n.props,"selected",d=>{d?this.element.classList.add(To(void 0,"sel")):this.element.classList.remove(To(void 0,"sel"))});const t=r.createElement("button");t.classList.add(To("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const i=r.createElement("div");i.classList.add(To("t")),Gl(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},ng=class{constructor(r,n){this.emitter=new Lr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new rg(r,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},wl=class extends ql{constructor(r,n){const t=new tg(r,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Hl({blade:n.blade,element:t.containerElement,viewProps:n.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new ng(r,{props:n.itemProps,viewProps:xs.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Gr(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(r){return hn(r,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return pn(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},sg=class extends zl{constructor(r,n){super(r,n),this.emitter_=new Lr,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(r){const n=this.controller.view.element.ownerDocument,t=new wl(n,{blade:Nh(),itemProps:ht.fromObject({selected:!1,title:r.title}),props:ht.fromObject({selected:!1}),viewProps:xs.create()}),i=this.pool_.createApi(t);return this.rackApi_.add(i,r.index)}removePage(r){this.rackApi_.remove(this.rackApi_.children[r])}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}onSelect_(r){this.emitter_.emit("select",new vy(this,r.rawValue))}},og=class extends zl{get title(){var r;return(r=this.controller.itemController.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller.itemController.props.set("title",r)}get selected(){return this.controller.props.get("selected")}set selected(r){this.controller.props.set("selected",r)}get children(){return this.rackApi_.children}addButton(r){return this.rackApi_.addButton(r)}addFolder(r){return this.rackApi_.addFolder(r)}addTab(r){return this.rackApi_.addTab(r)}add(r,n){this.rackApi_.add(r,n)}remove(r){this.rackApi_.remove(r)}addBinding(r,n,t){return this.rackApi_.addBinding(r,n,t)}addBlade(r){return this.rackApi_.addBlade(r)}};const Bc=-1;let ig=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Zt(!0),this.selectedIndex=Zt(Bc),this.items_=[]}add(r,n){const t=n??this.items_.length;this.items_.splice(t,0,r),r.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(r){const n=this.items_.indexOf(r);n<0||(this.items_.splice(n,1),r.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Bc,this.empty.rawValue=!0;return}const r=this.items_.findIndex(n=>n.rawValue);r<0?(this.items_.forEach((n,t)=>{n.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,t)=>{n.rawValue=t===r}),this.selectedIndex.rawValue=r),this.empty.rawValue=!1}onItemSelectedChange_(r){if(r.rawValue){const n=this.items_.findIndex(t=>t===r.sender);this.items_.forEach((t,i)=>{t.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const Mo=at("tab");let ag=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Mo(),Bh()),n.viewProps.bindClassModifiers(this.element),en(n.empty,Dn(this.element,Mo(void 0,"nop")));const t=r.createElement("div");t.classList.add(Mo("t")),this.element.appendChild(t),this.itemsElement=t;const i=r.createElement("div");i.classList.add(Mo("i")),this.element.appendChild(i);const d=r.createElement("div");d.classList.add(Mo("c")),this.element.appendChild(d),this.contentsElement=d}},Uc=class extends ql{constructor(r,n){const t=new ig,i=new ag(r,{empty:t.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Hl({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const d=this.rackController.rack;d.emitter.on("add",this.onRackAdd_),d.emitter.on("remove",this.onRackRemove_),this.tab=t}add(r,n){this.rackController.rack.add(r,n)}remove(r){this.rackController.rack.remove(this.rackController.rack.children[r])}onRackAdd_(r){if(!r.root)return;const n=r.bladeController;Oh(this.view.itemsElement,n.itemController.view.element,r.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(r){if(!r.root)return;const n=r.bladeController;Wo(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};Nt({id:"tab",type:"blade",accept(s){const r=It(s,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!r||r.pages.length===0?null:{params:r}},controller(s){const r=new Uc(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(n=>{const t=new wl(s.document,{blade:Nh(),itemProps:ht.fromObject({selected:!1,title:n.title}),props:ht.fromObject({selected:!1}),viewProps:xs.create()});r.add(t)}),r},api(s){return s.controller instanceof Uc?new sg(s.controller,s.pool):s.controller instanceof wl?new og(s.controller,s.pool):null}});let Wl=class extends Ul{get options(){return this.controller.valueController.props.get("options")}set options(r){this.controller.valueController.props.set("options",r)}},Gh=class{constructor(){this.disabled=!1,this.emitter=new Lr}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},zh=class{constructor(r,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=r,this.emitter=new Lr,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(r){this.disabled_=r,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const r=this.doc_.defaultView;r&&r.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const r=this.doc_.defaultView;r&&(this.timerId_=r.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},ss=class{constructor(r){this.constraints=r}constrain(r){return this.constraints.reduce((n,t)=>t.constrain(n),r)}};function Xo(s,r){if(s instanceof r)return s;if(s instanceof ss){const n=s.constraints.reduce((t,i)=>t||(i instanceof r?i:null),null);if(n)return n}return null}let ba=class{constructor(r){this.values=ht.fromObject({options:r})}constrain(r){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===r).length>0?r:n[0].value}};function _a(s){var r;const n=bl;if(Array.isArray(s))return(r=It({items:s},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||r===void 0?void 0:r.items;if(typeof s=="object")return n.required.raw(s).value}function qh(s){if(Array.isArray(s))return s;const r=[];return Object.keys(s).forEach(n=>{r.push({text:n,value:s[n]})}),r}function Xl(s){return Gt(s)?null:new ba(qh(s))}const Ga=at("lst");let lg=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=r.createElement("div"),this.element.classList.add(Ga()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("select");t.classList.add(Ga("s")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const i=r.createElement("div");i.classList.add(Ga("m")),i.appendChild(ga(r,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Gr(this.props_,"options",d=>{Rh(this.selectElement),d.forEach(o=>{const c=r.createElement("option");c.textContent=o.text,this.selectElement.appendChild(c)}),this.update_()})}update_(){const r=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=r.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},to=class{constructor(r,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new lg(r,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(r){const n=r.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(r){return hn(r,null,n=>({options:n.required.custom(_a)}),n=>(this.props.set("options",qh(n.options)),!0))}exportProps(){return pn(null,{options:this.props.get("options")})}};const Gc=at("pop");let ug=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Gc()),n.viewProps.bindClassModifiers(this.element),en(n.shows,Dn(this.element,Gc(void 0,"v")))}},wa=class{constructor(r,n){this.shows=Zt(!1),this.viewProps=n.viewProps,this.view=new ug(r,{shows:this.shows,viewProps:this.viewProps})}};const zc=at("txt");let cg=class{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(zc()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const t=r.createElement("input");t.classList.add(zc("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const r=this.props_.get("formatter");this.inputElement.value=r(this.value_.rawValue)}onChange_(){this.refresh()}},xa=class{constructor(r,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new cg(r,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(r){const t=r.currentTarget.value,i=this.parser_(t);Gt(i)||(this.value.rawValue=i),this.view.refresh()}};function dg(s){return String(s)}function Yl(s){return s==="false"?!1:!!s}function qc(s){return dg(s)}function hg(s){return r=>s.reduce((n,t)=>n!==null?n:t(r),null)}const pg=cr(0);function na(s){return pg(s)+"%"}function $l(s){return String(s)}function xl(s){return s}function os({primary:s,secondary:r,forward:n,backward:t}){let i=!1;function d(o){i||(i=!0,o(),i=!1)}s.emitter.on("change",o=>{d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),o.options)})}),r.emitter.on("change",o=>{d(()=>{s.setRawValue(t(s.rawValue,r.rawValue),o.options)}),d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),o.options)})}),d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),{forceEmit:!1,last:!0})})}function ur(s,r){const n=s*(r.altKey?.1:1)*(r.shiftKey?10:1);return r.upKey?+n:r.downKey?-n:0}function Qn(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function rn(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function fg(s){return s==="ArrowUp"||s==="ArrowDown"}function Yo(s){return fg(s)||s==="ArrowLeft"||s==="ArrowRight"}function za(s,r){var n,t;const i=r.ownerDocument.defaultView,d=r.getBoundingClientRect();return{x:s.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+d.left),y:s.pageY-(((t=i&&i.scrollY)!==null&&t!==void 0?t:0)+d.top)}}let pr=class{constructor(r){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=r,this.emitter=new Lr,r.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),r.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),r.addEventListener("touchend",this.onTouchEnd_),r.addEventListener("mousedown",this.onMouseDown_)}computePosition_(r){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:r?{x:r.x,y:r.y}:null}}onMouseDown_(r){var n;r.preventDefault(),(n=r.currentTarget)===null||n===void 0||n.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:r.altKey,data:this.computePosition_(za(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onDocumentMouseMove_(r){this.emitter.emit("move",{altKey:r.altKey,data:this.computePosition_(za(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onDocumentMouseUp_(r){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:r.altKey,data:this.computePosition_(za(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onTouchStart_(r){r.preventDefault();const n=r.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:r.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:r.shiftKey}),this.lastTouch_=n}onTouchMove_(r){const n=r.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:r.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:r.shiftKey}),this.lastTouch_=n}onTouchEnd_(r){var n;const t=(n=r.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:r.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:r.shiftKey})}};const $r=at("txt");let mg=class{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=r.createElement("div"),this.element.classList.add($r(),$r(void 0,"num")),n.arrayPosition&&this.element.classList.add($r(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("input");t.classList.add($r("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add($r()),this.inputElement.classList.add($r("i"));const i=r.createElement("div");i.classList.add($r("k")),this.element.appendChild(i),this.knobElement=i;const d=r.createElementNS(Mt,"svg");d.classList.add($r("g")),this.knobElement.appendChild(d);const o=r.createElementNS(Mt,"path");o.classList.add($r("gb")),d.appendChild(o),this.guideBodyElem_=o;const c=r.createElementNS(Mt,"path");c.classList.add($r("gh")),d.appendChild(c),this.guideHeadElem_=c;const a=r.createElement("div");a.classList.add(at("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(r){if(r.rawValue===null){this.element.classList.remove($r(void 0,"drg"));return}this.element.classList.add($r(void 0,"drg"));const n=r.rawValue/this.props_.get("pointerScale"),t=n+(n>0?-1:n<0?1:0),i=Kt(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+i},0 L${t},4 L${t+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const d=this.props_.get("formatter");this.tooltipElem_.textContent=d(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const r=this.props_.get("formatter");this.inputElement.value=r(this.value.rawValue)}onChange_(){this.refresh()}},co=class{constructor(r,n){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(t=n.sliderProps)!==null&&t!==void 0?t:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Zt(null),this.view=new mg(r,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new pr(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(r){var n,t;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),d=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let o=r;return i!==void 0&&(o=Math.max(o,i)),d!==void 0&&(o=Math.min(o,d)),o}onInputChange_(r){const t=r.currentTarget.value,i=this.parser_(t);Gt(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(r){const n=ur(this.props.get("keyScale"),Qn(r));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(r){ur(this.props.get("keyScale"),Qn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(r){if(!r.point)return null;const n=r.point.x-r.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(r){const n=this.computeDraggingValue_(r.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(r){const n=this.computeDraggingValue_(r.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const qa=at("sld");let yg=class{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=r.createElement("div"),this.element.classList.add(qa()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(qa("t")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const i=r.createElement("div");i.classList.add(qa("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const r=Kt(mt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${r}%`}onChange_(){this.update_()}},gg=class{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new yg(r,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pr(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){r.point&&this.value.setRawValue(mt(Kt(r.point.x,0,r.bounds.width),0,r.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=ur(this.props.get("keyScale"),rn(r));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(r){ur(this.props.get("keyScale"),rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Ha=at("sldtxt");let vg=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Ha());const t=r.createElement("div");t.classList.add(Ha("s")),this.sliderView_=n.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(Ha("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},Hc=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new gg(r,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new co(r,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new vg(r,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(r){return hn(r,null,n=>({max:n.required.number,min:n.required.number}),n=>{const t=this.sliderC_.props;return t.set("max",n.max),t.set("min",n.min),!0})}exportProps(){const r=this.sliderC_.props;return pn(null,{max:r.get("max"),min:r.get("min")})}};function bg(s){return{sliderProps:new ht({keyScale:s.keyScale,max:s.max,min:s.min}),textProps:new ht({formatter:Zt(s.formatter),keyScale:s.keyScale,pointerScale:Zt(s.pointerScale)})}}const _g={containerUnitSize:"cnt-usz"};function Hh(s){return`--${_g[s]}`}class Wh{constructor(r,n){const t=at(n.viewName);this.element=r.createElement("div"),this.element.classList.add(t()),n.viewProps.bindClassModifiers(this.element)}}function $o(s){return ui(s)}function Or(s){if(gl(s))return It(s,$o)}function kn(s,r){if(!s)return;const n=[],t=fa(s,r);t&&n.push(t);const i=ma(s);return i&&n.push(i),new ss(n)}function ja(s){if(s==="inline"||s==="popup")return s}function jn(s,r){s.write(r)}const Ni=at("ckb");let wg=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(Ni()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("label");t.classList.add(Ni("l")),this.element.appendChild(t),this.labelElement=t;const i=r.createElement("input");i.classList.add(Ni("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const d=r.createElement("div");d.classList.add(Ni("w")),this.labelElement.appendChild(d);const o=ga(r,"check");d.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},xg=class{constructor(r,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new wg(r,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(r){const n=r.currentTarget;this.value.rawValue=n.checked,r.preventDefault(),r.stopPropagation()}onLabelMouseDown_(r){r.preventDefault()}};function jg(s){const r=[],n=Xl(s.options);return n&&r.push(n),new ss(r)}Nt({id:"input-bool",type:"input",accept:(s,r)=>{if(typeof s!="boolean")return null;const n=It(r,t=>({options:t.optional.custom(_a),readonly:t.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Yl,constraint:s=>jg(s.params),writer:s=>jn},controller:s=>{const r=s.document,n=s.value,t=s.constraint,i=t&&Xo(t,ba);return i?new to(r,{props:new ht({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new xg(r,{value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="boolean"?null:s.controller.valueController instanceof to?new Wl(s.controller):null}});const as=at("col");let Cg=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(as()),n.foldable.bindExpandedClass(this.element,as(void 0,"expanded")),Gr(n.foldable,"completed",Dn(this.element,as(void 0,"cpl")));const t=r.createElement("div");t.classList.add(as("h")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(as("s")),t.appendChild(i),this.swatchElement=i;const d=r.createElement("div");if(d.classList.add(as("t")),t.appendChild(d),this.textElement=d,n.pickerLayout==="inline"){const o=r.createElement("div");o.classList.add(as("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function Eg(s,r,n){const t=Kt(s/255,0,1),i=Kt(r/255,0,1),d=Kt(n/255,0,1),o=Math.max(t,i,d),c=Math.min(t,i,d),a=o-c;let l=0,b=0;const g=(c+o)/2;return a!==0&&(b=a/(1-Math.abs(o+c-1)),t===o?l=(i-d)/a:i===o?l=2+(d-t)/a:l=4+(t-i)/a,l=l/6+(l<0?1:0)),[l*360,b*100,g*100]}function Sg(s,r,n){const t=(s%360+360)%360,i=Kt(r/100,0,1),d=Kt(n/100,0,1),o=(1-Math.abs(2*d-1))*i,c=o*(1-Math.abs(t/60%2-1)),a=d-o/2;let l,b,g;return t>=0&&t<60?[l,b,g]=[o,c,0]:t>=60&&t<120?[l,b,g]=[c,o,0]:t>=120&&t<180?[l,b,g]=[0,o,c]:t>=180&&t<240?[l,b,g]=[0,c,o]:t>=240&&t<300?[l,b,g]=[c,0,o]:[l,b,g]=[o,0,c],[(l+a)*255,(b+a)*255,(g+a)*255]}function Pg(s,r,n){const t=Kt(s/255,0,1),i=Kt(r/255,0,1),d=Kt(n/255,0,1),o=Math.max(t,i,d),c=Math.min(t,i,d),a=o-c;let l;a===0?l=0:o===t?l=60*(((i-d)/a%6+6)%6):o===i?l=60*((d-t)/a+2):l=60*((t-i)/a+4);const b=o===0?0:a/o,g=o;return[l,b*100,g*100]}function Xh(s,r,n){const t=Lh(s,360),i=Kt(r/100,0,1),d=Kt(n/100,0,1),o=d*i,c=o*(1-Math.abs(t/60%2-1)),a=d-o;let l,b,g;return t>=0&&t<60?[l,b,g]=[o,c,0]:t>=60&&t<120?[l,b,g]=[c,o,0]:t>=120&&t<180?[l,b,g]=[0,o,c]:t>=180&&t<240?[l,b,g]=[0,c,o]:t>=240&&t<300?[l,b,g]=[c,0,o]:[l,b,g]=[o,0,c],[(l+a)*255,(b+a)*255,(g+a)*255]}function kg(s,r,n){const t=n+r*(100-Math.abs(2*n-100))/200;return[s,t!==0?r*(100-Math.abs(2*n-100))/t:0,n+r*(100-Math.abs(2*n-100))/(2*100)]}function Tg(s,r,n){const t=100-Math.abs(n*(200-r)/100-100);return[s,t!==0?r*n/t:0,n*(200-r)/(2*100)]}function _n(s){return[s[0],s[1],s[2]]}function Ca(s,r){return[s[0],s[1],s[2],r]}const Mg={hsl:{hsl:(s,r,n)=>[s,r,n],hsv:kg,rgb:Sg},hsv:{hsl:Tg,hsv:(s,r,n)=>[s,r,n],rgb:Xh},rgb:{hsl:Eg,hsv:Pg,rgb:(s,r,n)=>[s,r,n]}};function ro(s,r){return[r==="float"?1:s==="rgb"?255:360,r==="float"?1:s==="rgb"?255:100,r==="float"?1:s==="rgb"?255:100]}function Lg(s,r){return s===r?r:Lh(s,r)}function Yh(s,r,n){var t;const i=ro(r,n);return[r==="rgb"?Kt(s[0],0,i[0]):Lg(s[0],i[0]),Kt(s[1],0,i[1]),Kt(s[2],0,i[2]),Kt((t=s[3])!==null&&t!==void 0?t:1,0,1)]}function Wc(s,r,n,t){const i=ro(r,n),d=ro(r,t);return s.map((o,c)=>o/i[c]*d[c])}function $h(s,r,n){const t=Wc(s,r.mode,r.type,"int"),i=Mg[r.mode][n.mode](...t);return Wc(i,n.mode,"int",n.type)}let Rt=class Kh{static black(){return new Kh([0,0,0],"rgb")}constructor(r,n){this.type="int",this.mode=n,this.comps_=Yh(r,n,this.type)}getComponents(r){return Ca($h(_n(this.comps_),{mode:this.mode,type:this.type},{mode:r??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const r=this.getComponents("rgb");return{r:r[0],g:r[1],b:r[2],a:r[3]}}};const Bn=at("colp");let Ag=class{constructor(r,n){this.alphaViews_=null,this.element=r.createElement("div"),this.element.classList.add(Bn()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Bn("hsv"));const i=r.createElement("div");i.classList.add(Bn("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),t.appendChild(i);const d=r.createElement("div");d.classList.add(Bn("h")),this.hPaletteView_=n.hPaletteView,d.appendChild(this.hPaletteView_.element),t.appendChild(d),this.element.appendChild(t);const o=r.createElement("div");if(o.classList.add(Bn("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const c=r.createElement("div");c.classList.add(Bn("a"));const a=r.createElement("div");a.classList.add(Bn("ap")),a.appendChild(this.alphaViews_.palette.element),c.appendChild(a);const l=r.createElement("div");l.classList.add(Bn("at")),l.appendChild(this.alphaViews_.text.element),c.appendChild(l),this.element.appendChild(c)}}get allFocusableElements(){const r=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&r.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),r}};function Og(s){return s==="int"?"int":s==="float"?"float":void 0}function Kl(s){return It(s,r=>({color:r.optional.object({alpha:r.optional.boolean,type:r.optional.custom(Og)}),expanded:r.optional.boolean,picker:r.optional.custom(ja),readonly:r.optional.constant(!1)}))}function js(s){return s?.1:1}function Zh(s){var r;return(r=s.color)===null||r===void 0?void 0:r.type}let Zl=class{constructor(r,n){this.type="float",this.mode=n,this.comps_=Yh(r,n,this.type)}getComponents(r){return Ca($h(_n(this.comps_),{mode:this.mode,type:this.type},{mode:r??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const r=this.getComponents("rgb");return{r:r[0],g:r[1],b:r[2],a:r[3]}}};const Rg={int:(s,r)=>new Rt(s,r),float:(s,r)=>new Zl(s,r)};function Ql(s,r,n){return Rg[n](s,r)}function Dg(s){return s.type==="float"}function Ig(s){return s.type==="int"}function Fg(s){const r=s.getComponents(),n=ro(s.mode,"int");return new Rt([Math.round(mt(r[0],0,1,0,n[0])),Math.round(mt(r[1],0,1,0,n[1])),Math.round(mt(r[2],0,1,0,n[2])),r[3]],s.mode)}function Ng(s){const r=s.getComponents(),n=ro(s.mode,"int");return new Zl([mt(r[0],0,n[0],0,1),mt(r[1],0,n[1],0,1),mt(r[2],0,n[2],0,1),r[3]],s.mode)}function Rr(s,r){if(s.type===r)return s;if(Ig(s)&&r==="float")return Ng(s);if(Dg(s)&&r==="int")return Fg(s);throw un.shouldNeverHappen()}function Vg(s,r){return s.alpha===r.alpha&&s.mode===r.mode&&s.notation===r.notation&&s.type===r.type}function Qr(s,r){const n=s.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*r:parseFloat(s),r)}const Bg={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function Qh(s){const r=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!r)return parseFloat(s);const n=parseFloat(r[1]),t=r[2];return Bg[t](n)}function Jh(s){const r=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qr(r[1],255),Qr(r[2],255),Qr(r[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ug(s){const r=Jh(s);return r?new Rt(r,"rgb"):null}function ep(s){const r=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qr(r[1],255),Qr(r[2],255),Qr(r[3],255),Qr(r[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Gg(s){const r=ep(s);return r?new Rt(r,"rgb"):null}function tp(s){const r=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qh(r[1]),Qr(r[2],100),Qr(r[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zg(s){const r=tp(s);return r?new Rt(r,"hsl"):null}function rp(s){const r=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qh(r[1]),Qr(r[2],100),Qr(r[3],100),Qr(r[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function qg(s){const r=rp(s);return r?new Rt(r,"hsl"):null}function np(s){const r=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(r)return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)];const n=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Hg(s){const r=np(s);return r?new Rt(r,"rgb"):null}function sp(s){const r=s.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(r)return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16),mt(parseInt(r[4]+r[4],16),0,255,0,1)];const n=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),mt(parseInt(n[4],16),0,255,0,1)]:null}function Wg(s){const r=sp(s);return r?new Rt(r,"rgb"):null}function op(s){const r=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!r)return null;const n=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Xg(s){return r=>{const n=op(r);return n?Ql(n,"rgb",s):null}}function ip(s){const r=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!r)return null;const n=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Yg(s){return r=>{const n=ip(r);return n?Ql(n,"rgb",s):null}}const $g=[{parser:np,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:sp,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Jh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:ep,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:tp,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:rp,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:op,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ip,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Kg(s){return $g.reduce((r,{parser:n,result:t})=>r||(n(s)?t:null),null)}function Zg(s,r="int"){const n=Kg(s);return n?n.notation==="hex"&&r!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:r}):null:null}function fi(s){const r=[Hg,Wg,Ug,Gg,zg,qg];r.push(Xg("int"),Yg("int"));const n=hg(r);return t=>{const i=n(t);return i?Rr(i,s):null}}function Qg(s){const r=fi("int");if(typeof s!="string")return Rt.black();const n=r(s);return n??Rt.black()}function ap(s){const r=Kt(Math.floor(s),0,255).toString(16);return r.length===1?`0${r}`:r}function Jl(s,r="#"){const n=_n(s.getComponents("rgb")).map(ap).join("");return`${r}${n}`}function eu(s,r="#"){const n=s.getComponents("rgb"),t=[n[0],n[1],n[2],n[3]*255].map(ap).join("");return`${r}${t}`}function lp(s){const r=cr(0),n=Rr(s,"int");return`rgb(${_n(n.getComponents("rgb")).map(i=>r(i)).join(", ")})`}function Yi(s){const r=cr(2),n=cr(0);return`rgba(${Rr(s,"int").getComponents("rgb").map((d,o)=>(o===3?r:n)(d)).join(", ")})`}function Jg(s){const r=[cr(0),na,na],n=Rr(s,"int");return`hsl(${_n(n.getComponents("hsl")).map((i,d)=>r[d](i)).join(", ")})`}function ev(s){const r=[cr(0),na,na,cr(2)];return`hsla(${Rr(s,"int").getComponents("hsl").map((i,d)=>r[d](i)).join(", ")})`}function up(s,r){const n=cr(r==="float"?2:0),t=["r","g","b"],i=Rr(s,r);return`{${_n(i.getComponents("rgb")).map((o,c)=>`${t[c]}: ${n(o)}`).join(", ")}}`}function tv(s){return r=>up(r,s)}function cp(s,r){const n=cr(2),t=cr(r==="float"?2:0),i=["r","g","b","a"];return`{${Rr(s,r).getComponents("rgb").map((c,a)=>{const l=a===3?n:t;return`${i[a]}: ${l(c)}`}).join(", ")}}`}function rv(s){return r=>cp(r,s)}const nv=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Jl},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:eu},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:lp},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Yi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Jg},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:ev},...["int","float"].reduce((s,r)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"object",type:r},stringifier:tv(r)},{format:{alpha:!0,mode:"rgb",notation:"object",type:r},stringifier:rv(r)}],[])];function dp(s){return nv.reduce((r,n)=>r||(Vg(n.format,s)?n.stringifier:null),null)}const Lo=at("apl");let sv=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(Lo()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("div");t.classList.add(Lo("b")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(Lo("c")),t.appendChild(i),this.colorElem_=i;const d=r.createElement("div");d.classList.add(Lo("m")),this.element.appendChild(d),this.markerElem_=d;const o=r.createElement("div");o.classList.add(Lo("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const r=this.value.rawValue,n=r.getComponents("rgb"),t=new Rt([n[0],n[1],n[2],0],"rgb"),i=new Rt([n[0],n[1],n[2],255],"rgb"),d=["to right",Yi(t),Yi(i)];this.colorElem_.style.background=`linear-gradient(${d.join(",")})`,this.previewElem_.style.backgroundColor=Yi(r);const o=mt(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},ov=class{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new sv(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=r.point.x/r.bounds.width,i=this.value.rawValue,[d,o,c]=i.getComponents("hsv");this.value.setRawValue(new Rt([d,o,c,t],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=ur(js(!0),rn(r));if(n===0)return;const t=this.value.rawValue,[i,d,o,c]=t.getComponents("hsv");this.value.setRawValue(new Rt([i,d,o,c+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){ur(js(!0),rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Vs=at("coltxt");function iv(s){const r=s.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return r.appendChild(n.reduce((t,i)=>{const d=s.createElement("option");return d.textContent=i.text,d.value=i.value,t.appendChild(d),t},s.createDocumentFragment())),r}let av=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Vs()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Vs("m")),this.modeElem_=iv(r),this.modeElem_.classList.add(Vs("ms")),t.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=r.createElement("div");i.classList.add(Vs("mm")),i.appendChild(ga(r,"dropdown")),t.appendChild(i),this.element.appendChild(t);const d=r.createElement("div");d.classList.add(Vs("w")),this.element.appendChild(d),this.inputsElem_=d,this.inputViews_=n.inputViews,this.applyInputViews_(),en(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(r){this.inputViews_=r,this.applyInputViews_()}applyInputViews_(){Rh(this.inputsElem_);const r=this.element.ownerDocument;this.inputViews_.forEach(n=>{const t=r.createElement("div");t.classList.add(Vs("c")),t.appendChild(n.element),this.inputsElem_.appendChild(t)})}};function lv(s){return cr(s==="float"?2:0)}function uv(s,r,n){const t=ro(s,r)[n];return new ii({min:0,max:t})}function cv(s,r,n){return new co(s,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:r.parser,props:ht.fromObject({formatter:lv(r.colorType),keyScale:js(!1),pointerScale:r.colorType==="float"?.01:1}),value:Zt(0,{constraint:uv(r.colorMode,r.colorType,n)}),viewProps:r.viewProps})}function dv(s,r){const n={colorMode:r.colorMode,colorType:r.colorType,parser:Ir,viewProps:r.viewProps};return[0,1,2].map(t=>{const i=cv(s,n,t);return os({primary:r.value,secondary:i.value,forward(d){return Rr(d,r.colorType).getComponents(r.colorMode)[t]},backward(d,o){const c=r.colorMode,l=Rr(d,r.colorType).getComponents(c);l[t]=o;const b=Ql(Ca(_n(l),l[3]),c,r.colorType);return Rr(b,"int")}}),i})}function hv(s,r){const n=new xa(s,{parser:fi("int"),props:ht.fromObject({formatter:Jl}),value:Zt(Rt.black()),viewProps:r.viewProps});return os({primary:r.value,secondary:n.value,forward:t=>new Rt(_n(t.getComponents()),t.mode),backward:(t,i)=>new Rt(Ca(_n(i.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}function pv(s){return s!=="hex"}let fv=class{constructor(r,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Zt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(r),this.view=new av(r,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(r){const n=this.colorMode.rawValue;return pv(n)?dv(r,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):hv(r,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(r){const n=r.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}};const Wa=at("hpl");let mv=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(Wa()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("div");t.classList.add(Wa("c")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(Wa("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const r=this.value.rawValue,[n]=r.getComponents("hsv");this.markerElem_.style.backgroundColor=lp(new Rt([n,100,100],"hsv"));const t=mt(n,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}},yv=class{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new mv(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=mt(Kt(r.point.x,0,r.bounds.width),0,r.bounds.width,0,360),i=this.value.rawValue,[,d,o,c]=i.getComponents("hsv");this.value.setRawValue(new Rt([t,d,o,c],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=ur(js(!1),rn(r));if(n===0)return;const t=this.value.rawValue,[i,d,o,c]=t.getComponents("hsv");this.value.setRawValue(new Rt([i+n,d,o,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){ur(js(!1),rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Xa=at("svp"),Xc=64;let gv=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(Xa()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("canvas");t.height=Xc,t.width=Xc,t.classList.add(Xa("c")),this.element.appendChild(t),this.canvasElement=t;const i=r.createElement("div");i.classList.add(Xa("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const r=Py(this.canvasElement);if(!r)return;const t=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,d=this.canvasElement.height,o=r.getImageData(0,0,i,d),c=o.data;for(let b=0;b<d;b++)for(let g=0;g<i;g++){const u=mt(g,0,i,0,100),h=mt(b,0,d,100,0),p=Xh(t[0],u,h),m=(b*i+g)*4;c[m]=p[0],c[m+1]=p[1],c[m+2]=p[2],c[m+3]=255}r.putImageData(o,0,0);const a=mt(t[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const l=mt(t[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}},vv=class{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new gv(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=mt(r.point.x,0,r.bounds.width,0,100),i=mt(r.point.y,0,r.bounds.height,100,0),[d,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Rt([d,t,i,o],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){Yo(r.key)&&r.preventDefault();const[n,t,i,d]=this.value.rawValue.getComponents("hsv"),o=js(!1),c=ur(o,rn(r)),a=ur(o,Qn(r));c===0&&a===0||this.value.setRawValue(new Rt([n,t+c,i+a,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){const n=js(!1),t=ur(n,rn(r)),i=ur(n,Qn(r));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},bv=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new yv(r,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new vv(r,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new ov(r,{value:this.value,viewProps:this.viewProps}),text:new co(r,{parser:Ir,props:ht.fromObject({pointerScale:.01,keyScale:.1,formatter:cr(2)}),value:Zt(0,{constraint:new ii({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&os({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,i)=>{const d=t.getComponents();return d[3]=i,new Rt(d,t.mode)}}),this.textsC_=new fv(r,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Ag(r,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const Ya=at("colsw");let _v=class{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=r.createElement("div"),this.element.classList.add(Ya()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Ya("sw")),this.element.appendChild(t),this.swatchElem_=t;const i=r.createElement("button");i.classList.add(Ya("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const r=this.value.rawValue;this.swatchElem_.style.backgroundColor=eu(r)}onValueChange_(){this.update_()}},wv=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new _v(r,{value:this.value,viewProps:this.viewProps})}},tu=class{constructor(r,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hi.create(n.expanded),this.swatchC_=new wv(r,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new xa(r,{parser:n.parser,props:ht.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Cg(r,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new wa(r,{viewProps:this.viewProps}):null;const i=new bv(r,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(d=>{d.addEventListener("blur",this.onPopupChildBlur_),d.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),os({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:d=>d,backward:(d,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pi(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(r){if(!this.popC_)return;const n=this.view.element,t=r.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=va(r);t&&n.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!ci(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_?r.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&r.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function xv(s){return _n(s.getComponents("rgb")).reduce((r,n)=>r<<8|Math.floor(n)&255,0)}function jv(s){return s.getComponents("rgb").reduce((r,n,t)=>{const i=Math.floor(t===3?n*255:n)&255;return r<<8|i},0)>>>0}function Cv(s){return new Rt([s>>16&255,s>>8&255,s&255],"rgb")}function Ev(s){return new Rt([s>>24&255,s>>16&255,s>>8&255,mt(s&255,0,255,0,1)],"rgb")}function Sv(s){return typeof s!="number"?Rt.black():Cv(s)}function Pv(s){return typeof s!="number"?Rt.black():Ev(s)}function $i(s,r){return typeof s!="object"||Gt(s)?!1:r in s&&typeof s[r]=="number"}function ru(s){return $i(s,"r")&&$i(s,"g")&&$i(s,"b")}function nu(s){return ru(s)&&$i(s,"a")}function su(s){return ru(s)}function ou(s,r){if(s.mode!==r.mode||s.type!==r.type)return!1;const n=s.getComponents(),t=r.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}function Yc(s){return"a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b]}function kv(s){const r=dp(s);return r?(n,t)=>{jn(n,r(t))}:null}function Tv(s){const r=s?jv:xv;return(n,t)=>{jn(n,r(t))}}function Mv(s,r,n){const i=Rr(r,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b),s.writeProperty("a",i.a)}function Lv(s,r,n){const i=Rr(r,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b)}function Av(s,r){return(n,t)=>{s?Mv(n,t,r):Lv(n,t,r)}}function Ov(s){var r;return!!(!((r=s==null?void 0:s.color)===null||r===void 0)&&r.alpha)}function Rv(s){return s?r=>eu(r,"0x"):r=>Jl(r,"0x")}function Dv(s){return"color"in s||s.view==="color"}Nt({id:"input-color-number",type:"input",accept:(s,r)=>{if(typeof s!="number"||!Dv(r))return null;const n=Kl(r);return n?{initialValue:s,params:Object.assign(Object.assign({},n),{supportsAlpha:Ov(r)})}:null},binding:{reader:s=>s.params.supportsAlpha?Pv:Sv,equals:ou,writer:s=>Tv(s.params.supportsAlpha)},controller:s=>{var r,n;return new tu(s.document,{colorType:"int",expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:Rv(s.params.supportsAlpha),parser:fi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.supportsAlpha,value:s.value,viewProps:s.viewProps})}});function Iv(s,r){if(!su(s))return Rr(Rt.black(),r);if(r==="int"){const n=Yc(s);return new Rt(n,"rgb")}if(r==="float"){const n=Yc(s);return new Zl(n,"rgb")}return Rr(Rt.black(),"int")}function Fv(s){return nu(s)}function Nv(s){return r=>{const n=Iv(r,s);return Rr(n,"int")}}function Vv(s,r){return n=>s?cp(n,r):up(n,r)}Nt({id:"input-color-object",type:"input",accept:(s,r)=>{var n;if(!su(s))return null;const t=Kl(r);return t?{initialValue:s,params:Object.assign(Object.assign({},t),{colorType:(n=Zh(r))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:s=>Nv(s.params.colorType),equals:ou,writer:s=>Av(Fv(s.initialValue),s.params.colorType)},controller:s=>{var r,n;const t=nu(s.initialValue);return new tu(s.document,{colorType:s.params.colorType,expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:Vv(t,s.params.colorType),parser:fi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t,value:s.value,viewProps:s.viewProps})}});Nt({id:"input-color-string",type:"input",accept:(s,r)=>{if(typeof s!="string"||r.view==="text")return null;const n=Zg(s,Zh(r));if(!n)return null;const t=dp(n);if(!t)return null;const i=Kl(r);return i?{initialValue:s,params:Object.assign(Object.assign({},i),{format:n,stringifier:t})}:null},binding:{reader:()=>Qg,equals:ou,writer:s=>{const r=kv(s.params.format);if(!r)throw un.notBindable();return r}},controller:s=>{var r,n;return new tu(s.document,{colorType:s.params.format.type,expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:s.params.stringifier,parser:fi("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.format.alpha,value:s.value,viewProps:s.viewProps})}});let Jn=class{constructor(r){this.components=r.components,this.asm_=r.assembly}constrain(r){const n=this.asm_.toComponents(r).map((t,i)=>{var d,o;return(o=(d=this.components[i])===null||d===void 0?void 0:d.constrain(t))!==null&&o!==void 0?o:t});return this.asm_.fromComponents(n)}};const $c=at("pndtxt");let Bv=class{constructor(r,n){this.textViews=n.textViews,this.element=r.createElement("div"),this.element.classList.add($c()),this.textViews.forEach(t=>{const i=r.createElement("div");i.classList.add($c("a")),i.appendChild(t.element),this.element.appendChild(i)})}};function Uv(s,r,n){return new co(s,{arrayPosition:n===0?"fst":n===r.axes.length-1?"lst":"mid",parser:r.parser,props:r.axes[n].textProps,value:Zt(0,{constraint:r.axes[n].constraint}),viewProps:r.viewProps})}let Ms=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((t,i)=>Uv(r,n,i)),this.acs_.forEach((t,i)=>{os({primary:this.value,secondary:t.value,forward:d=>n.assembly.toComponents(d)[i],backward:(d,o)=>{const c=n.assembly.toComponents(d);return c[i]=o,n.assembly.fromComponents(c)}})}),this.view=new Bv(r,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}},Gv=class extends Ul{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(r){this.controller.valueController.sliderController.props.set("max",r)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(r){this.controller.valueController.sliderController.props.set("min",r)}};function zv(s,r){const n=[],t=fa(s,r);t&&n.push(t);const i=ma(s);i&&n.push(i);const d=Xl(s.options);return d&&n.push(d),new ss(n)}Nt({id:"input-number",type:"input",accept:(s,r)=>{if(typeof s!="number")return null;const n=It(r,t=>Object.assign(Object.assign({},ui(t)),{options:t.optional.custom(_a),readonly:t.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>ai,constraint:s=>zv(s.params,s.initialValue),writer:s=>jn},controller:s=>{const r=s.value,n=s.constraint,t=n&&Xo(n,ba);if(t)return new to(s.document,{props:new ht({options:t.values.value("options")}),value:r,viewProps:s.viewProps});const i=li(s.params,r.rawValue),d=n&&Xo(n,ii);return d?new Hc(s.document,Object.assign(Object.assign({},bg(Object.assign(Object.assign({},i),{keyScale:Zt(i.keyScale),max:d.values.value("max"),min:d.values.value("min")}))),{parser:Ir,value:r,viewProps:s.viewProps})):new co(s.document,{parser:Ir,props:ht.fromObject(i),value:r,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="number"?null:s.controller.valueController instanceof Hc?new Gv(s.controller):s.controller.valueController instanceof to?new Wl(s.controller):null}});let Ln=class{constructor(r=0,n=0){this.x=r,this.y=n}getComponents(){return[this.x,this.y]}static isObject(r){if(Gt(r))return!1;const n=r.x,t=r.y;return!(typeof n!="number"||typeof t!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y}toObject(){return{x:this.x,y:this.y}}};const hp={toComponents:s=>s.getComponents(),fromComponents:s=>new Ln(...s)},Bs=at("p2d");let qv=class{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Bs()),n.viewProps.bindClassModifiers(this.element),en(n.expanded,Dn(this.element,Bs(void 0,"expanded")));const t=r.createElement("div");t.classList.add(Bs("h")),this.element.appendChild(t);const i=r.createElement("button");i.classList.add(Bs("b")),i.appendChild(ga(r,"p2dpad")),n.viewProps.bindDisabled(i),t.appendChild(i),this.buttonElement=i;const d=r.createElement("div");if(d.classList.add(Bs("t")),t.appendChild(d),this.textElement=d,n.pickerLayout==="inline"){const o=r.createElement("div");o.classList.add(Bs("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const Un=at("p2dp");let Hv=class{constructor(r,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=r.createElement("div"),this.element.classList.add(Un()),n.layout==="popup"&&this.element.classList.add(Un(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Un("p")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const i=r.createElementNS(Mt,"svg");i.classList.add(Un("g")),this.padElement.appendChild(i),this.svgElem_=i;const d=r.createElementNS(Mt,"line");d.classList.add(Un("ax")),d.setAttributeNS(null,"x1","0"),d.setAttributeNS(null,"y1","50%"),d.setAttributeNS(null,"x2","100%"),d.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(d);const o=r.createElementNS(Mt,"line");o.classList.add(Un("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const c=r.createElementNS(Mt,"line");c.classList.add(Un("l")),c.setAttributeNS(null,"x1","50%"),c.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(c),this.lineElem_=c;const a=r.createElement("div");a.classList.add(Un("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[r,n]=this.value.rawValue.getComponents(),t=this.props_.get("max"),i=mt(r,-t,+t,0,100),d=mt(n,-t,+t,0,100),o=this.props_.get("invertsY")?100-d:d;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function Kc(s,r,n){return[ur(r[0],rn(s)),ur(r[1],Qn(s))*(n?1:-1)]}let Wv=class{constructor(r,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Hv(r,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pr(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=this.props.get("max"),i=mt(r.point.x,0,r.bounds.width,-t,+t),d=mt(this.props.get("invertsY")?r.bounds.height-r.point.y:r.point.y,0,r.bounds.height,-t,+t);this.value.setRawValue(new Ln(i,d),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onPadKeyDown_(r){Yo(r.key)&&r.preventDefault();const[n,t]=Kc(r,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(new Ln(this.value.rawValue.x+n,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(r){const[n,t]=Kc(r,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Xv=class{constructor(r,n){var t,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hi.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new wa(r,{viewProps:this.viewProps}):null;const d=new Wv(r,{layout:n.pickerLayout,props:new ht({invertsY:Zt(n.invertsY),max:Zt(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});d.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=d,this.textC_=new Ms(r,{assembly:hp,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new qv(r,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),os({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,c)=>c})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pi(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(r){if(!this.popC_)return;const n=this.view.element,t=r.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=va(r);t&&n.contains(t)||t&&t===this.view.buttonElement&&!ci(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_?r.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&r.key==="Escape"&&this.view.buttonElement.focus()}};function Yv(s){return Ln.isObject(s)?new Ln(s.x,s.y):new Ln}function $v(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y)}function Kv(s,r){return new Jn({assembly:hp,components:[kn(Object.assign(Object.assign({},s),s.x),r.x),kn(Object.assign(Object.assign({},s),s.y),r.y)]})}function Zc(s,r){var n,t;if(!Gt(s.min)||!Gt(s.max))return Math.max(Math.abs((n=s.min)!==null&&n!==void 0?n:0),Math.abs((t=s.max)!==null&&t!==void 0?t:0));const i=Ah(s);return Math.max(Math.abs(i)*10,Math.abs(r)*10)}function Zv(s,r){var n,t;const i=Zc(ws(s,(n=s.x)!==null&&n!==void 0?n:{}),r.x),d=Zc(ws(s,(t=s.y)!==null&&t!==void 0?t:{}),r.y);return Math.max(i,d)}function Qv(s){if(!("y"in s))return!1;const r=s.y;return r&&"inverted"in r?!!r.inverted:!1}Nt({id:"input-point2d",type:"input",accept:(s,r)=>{if(!Ln.isObject(s))return null;const n=It(r,t=>Object.assign(Object.assign({},$o(t)),{expanded:t.optional.boolean,picker:t.optional.custom(ja),readonly:t.optional.constant(!1),x:t.optional.custom(Or),y:t.optional.object(Object.assign(Object.assign({},$o(t)),{inverted:t.optional.boolean}))}));return n?{initialValue:s,params:n}:null},binding:{reader:()=>Yv,constraint:s=>Kv(s.params,s.initialValue),equals:Ln.equals,writer:()=>$v},controller:s=>{var r,n;const t=s.document,i=s.value,d=s.constraint,o=[s.params.x,s.params.y];return new Xv(t,{axes:i.rawValue.getComponents().map((c,a)=>{var l;return Bl({constraint:d.components[a],initialValue:c,params:ws(s.params,(l=o[a])!==null&&l!==void 0?l:{})})}),expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,invertsY:Qv(s.params),max:Zv(s.params,i.rawValue),parser:Ir,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps})}});let vs=class{constructor(r=0,n=0,t=0){this.x=r,this.y=n,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(r){if(Gt(r))return!1;const n=r.x,t=r.y,i=r.z;return!(typeof n!="number"||typeof t!="number"||typeof i!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y&&r.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const pp={toComponents:s=>s.getComponents(),fromComponents:s=>new vs(...s)};function Jv(s){return vs.isObject(s)?new vs(s.x,s.y,s.z):new vs}function e0(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y),s.writeProperty("z",r.z)}function t0(s,r){return new Jn({assembly:pp,components:[kn(Object.assign(Object.assign({},s),s.x),r.x),kn(Object.assign(Object.assign({},s),s.y),r.y),kn(Object.assign(Object.assign({},s),s.z),r.z)]})}Nt({id:"input-point3d",type:"input",accept:(s,r)=>{if(!vs.isObject(s))return null;const n=It(r,t=>Object.assign(Object.assign({},$o(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Or),y:t.optional.custom(Or),z:t.optional.custom(Or)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Jv,constraint:s=>t0(s.params,s.initialValue),equals:vs.equals,writer:s=>e0},controller:s=>{const r=s.value,n=s.constraint,t=[s.params.x,s.params.y,s.params.z];return new Ms(s.document,{assembly:pp,axes:r.rawValue.getComponents().map((i,d)=>{var o;return Bl({constraint:n.components[d],initialValue:i,params:ws(s.params,(o=t[d])!==null&&o!==void 0?o:{})})}),parser:Ir,value:r,viewProps:s.viewProps})}});let bs=class{constructor(r=0,n=0,t=0,i=0){this.x=r,this.y=n,this.z=t,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(r){if(Gt(r))return!1;const n=r.x,t=r.y,i=r.z,d=r.w;return!(typeof n!="number"||typeof t!="number"||typeof i!="number"||typeof d!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y&&r.z===n.z&&r.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const fp={toComponents:s=>s.getComponents(),fromComponents:s=>new bs(...s)};function r0(s){return bs.isObject(s)?new bs(s.x,s.y,s.z,s.w):new bs}function n0(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y),s.writeProperty("z",r.z),s.writeProperty("w",r.w)}function s0(s,r){return new Jn({assembly:fp,components:[kn(Object.assign(Object.assign({},s),s.x),r.x),kn(Object.assign(Object.assign({},s),s.y),r.y),kn(Object.assign(Object.assign({},s),s.z),r.z),kn(Object.assign(Object.assign({},s),s.w),r.w)]})}Nt({id:"input-point4d",type:"input",accept:(s,r)=>{if(!bs.isObject(s))return null;const n=It(r,t=>Object.assign(Object.assign({},$o(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Or),x:t.optional.custom(Or),y:t.optional.custom(Or),z:t.optional.custom(Or)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>r0,constraint:s=>s0(s.params,s.initialValue),equals:bs.equals,writer:s=>n0},controller:s=>{const r=s.value,n=s.constraint,t=[s.params.x,s.params.y,s.params.z,s.params.w];return new Ms(s.document,{assembly:fp,axes:r.rawValue.getComponents().map((i,d)=>{var o;return Bl({constraint:n.components[d],initialValue:i,params:ws(s.params,(o=t[d])!==null&&o!==void 0?o:{})})}),parser:Ir,value:r,viewProps:s.viewProps})}});function o0(s){const r=[],n=Xl(s.options);return n&&r.push(n),new ss(r)}Nt({id:"input-string",type:"input",accept:(s,r)=>{if(typeof s!="string")return null;const n=It(r,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(_a)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>$l,constraint:s=>o0(s.params),writer:s=>jn},controller:s=>{const r=s.document,n=s.value,t=s.constraint,i=t&&Xo(t,ba);return i?new to(r,{props:new ht({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new xa(r,{parser:d=>d,props:ht.fromObject({formatter:xl}),value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="string"?null:s.controller.valueController instanceof to?new Wl(s.controller):null}});const ho={monitor:{defaultInterval:200,defaultRows:3}},Qc=at("mll");let i0=class{constructor(r,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=r.createElement("div"),this.element.classList.add(Qc()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("textarea");t.classList.add(Qc("i")),t.style.height=`calc(var(${Hh("containerUnitSize")}) * ${n.rows})`,t.readOnly=!0,n.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const r=this.textareaElem_,n=r.scrollTop===r.scrollHeight-r.clientHeight,t=[];this.value.rawValue.forEach(i=>{i!==void 0&&t.push(this.formatter_(i))}),r.textContent=t.join(`
`),n&&(r.scrollTop=r.scrollHeight)}onValueUpdate_(){this.update_()}},iu=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new i0(r,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const Jc=at("sgl");let a0=class{constructor(r,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=r.createElement("div"),this.element.classList.add(Jc()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("input");t.classList.add(Jc("i")),t.readOnly=!0,t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const r=this.value.rawValue,n=r[r.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},au=class{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new a0(r,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};Nt({id:"monitor-bool",type:"monitor",accept:(s,r)=>{if(typeof s!="boolean")return null;const n=It(r,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Yl},controller:s=>{var r;return s.value.rawValue.length===1?new au(s.document,{formatter:qc,value:s.value,viewProps:s.viewProps}):new iu(s.document,{formatter:qc,rows:(r=s.params.rows)!==null&&r!==void 0?r:ho.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}});let l0=class extends Ul{get max(){return this.controller.valueController.props.get("max")}set max(r){this.controller.valueController.props.set("max",r)}get min(){return this.controller.valueController.props.get("min")}set min(r){this.controller.valueController.props.set("min",r)}};const Gn=at("grl");let u0=class{constructor(r,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=r.createElement("div"),this.element.classList.add(Gn()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=r.createElementNS(Mt,"svg");t.classList.add(Gn("g")),t.style.height=`calc(var(${Hh("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(t),this.svgElem_=t;const i=r.createElementNS(Mt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const d=r.createElement("div");d.classList.add(Gn("t"),at("tt")()),this.element.appendChild(d),this.tooltipElem_=d,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:r,clientHeight:n}=this.element,t=this.value.rawValue.length-1,i=this.props_.get("min"),d=this.props_.get("max"),o=[];this.value.rawValue.forEach((g,u)=>{if(g===void 0)return;const h=mt(u,0,t,0,r),p=mt(g,i,d,n,0);o.push([h,p].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const c=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){c.classList.remove(Gn("t","a"));return}const l=mt(this.cursor_.rawValue,0,t,0,r),b=mt(a,i,d,n,0);c.style.left=`${l}px`,c.style.top=`${b}px`,c.textContent=`${this.formatter_(a)}`,c.classList.contains(Gn("t","a"))||(c.classList.add(Gn("t","a"),Gn("t","in")),ta(c),c.classList.remove(Gn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},lu=class{constructor(r,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Zt(-1),this.view=new u0(r,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!ci(r))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new pr(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(r){return hn(r,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return pn(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(r){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(mt(r.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(r){this.onGraphPointerMove_(r)}onGraphPointerMove_(r){if(!r.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(mt(r.data.point.x,0,r.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function jl(s){return Gt(s.format)?cr(2):s.format}function c0(s){var r;return s.value.rawValue.length===1?new au(s.document,{formatter:jl(s.params),value:s.value,viewProps:s.viewProps}):new iu(s.document,{formatter:jl(s.params),rows:(r=s.params.rows)!==null&&r!==void 0?r:ho.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}function d0(s){var r,n,t;return new lu(s.document,{formatter:jl(s.params),rows:(r=s.params.rows)!==null&&r!==void 0?r:ho.monitor.defaultRows,props:ht.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:100,min:(t=s.params.min)!==null&&t!==void 0?t:0}),value:s.value,viewProps:s.viewProps})}function ed(s){return s.view==="graph"}Nt({id:"monitor-number",type:"monitor",accept:(s,r)=>{if(typeof s!="number")return null;const n=It(r,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>ed(s)?64:1,reader:s=>ai},controller:s=>ed(s.params)?d0(s):c0(s),api:s=>s.controller.valueController instanceof lu?new l0(s.controller):null});Nt({id:"monitor-string",type:"monitor",accept:(s,r)=>{if(typeof s!="string")return null;const n=It(r,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>$l},controller:s=>{var r;const n=s.value;return n.rawValue.length>1||s.params.multiline?new iu(s.document,{formatter:xl,rows:(r=s.params.rows)!==null&&r!==void 0?r:ho.monitor.defaultRows,value:n,viewProps:s.viewProps}):new au(s.document,{formatter:xl,value:n,viewProps:s.viewProps})}});const sa={baseBackgroundColor:"hsl(230, 7%, 17%)",baseBorderRadius:"6px",baseFontFamily:"Roboto Mono, Source Code Pro, Menlo, Courier, monospace",baseShadowColor:"rgba(0, 0, 0, 0.2)",bladeBorderRadius:"2px",bladeHorizontalPadding:"4px",bladeValueWidth:"160px",buttonBackgroundColor:"hsl(230, 7%, 70%)",buttonBackgroundColorActive:"#d6d7db",buttonBackgroundColorFocus:"#c8cad0",buttonBackgroundColorHover:"#bbbcc4",buttonForegroundColor:"hsl(230, 7%, 17%)",containerBackgroundColor:"rgba(187, 188, 196, 0.1)",containerBackgroundColorActive:"rgba(187, 188, 196, 0.25)",containerBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",containerBackgroundColorHover:"rgba(187, 188, 196, 0.15)",containerForegroundColor:"hsl(230, 7%, 75%)",containerHorizontalPadding:"4px",containerUnitSize:"20px",containerUnitSpacing:"4px",containerVerticalPadding:"4px",grooveForegroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColorActive:"rgba(187, 188, 196, 0.25)",inputBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",inputBackgroundColorHover:"rgba(187, 188, 196, 0.15)",inputForegroundColor:"hsl(230, 7%, 75%)",labelForegroundColor:"rgba(187, 188, 196, 0.7)",monitorBackgroundColor:"rgba(0, 0, 0, 0.2)",monitorForegroundColor:"rgba(187, 188, 196, 0.7)",pluginImageDraggingColor:"hsla(230, 100%, 66%, 1)"};Object.keys(sa).reduce((s,r)=>(s[r]=r,s),{});const h0=new Map([["baseBackgroundColor","--tp-base-background-color"],["baseBorderRadius","--tp-base-border-radius"],["baseFontFamily","--tp-base-font-family"],["baseShadowColor","--tp-base-shadow-color"],["bladeBorderRadius","--tp-blade-border-radius"],["bladeHorizontalPadding","--tp-blade-horizontal-padding"],["bladeValueWidth","--tp-blade-value-width"],["buttonBackgroundColor","--tp-button-background-color"],["buttonBackgroundColorActive","--tp-button-background-color-active"],["buttonBackgroundColorFocus","--tp-button-background-color-focus"],["buttonBackgroundColorHover","--tp-button-background-color-hover"],["buttonForegroundColor","--tp-button-foreground-color"],["containerBackgroundColor","--tp-container-background-color"],["containerBackgroundColorActive","--tp-container-background-color-active"],["containerBackgroundColorFocus","--tp-container-background-color-focus"],["containerBackgroundColorHover","--tp-container-background-color-hover"],["containerForegroundColor","--tp-container-foreground-color"],["containerHorizontalPadding","--tp-container-horizontal-padding"],["containerUnitSize","--tp-container-unit-size"],["containerUnitSpacing","--tp-container-unit-spacing"],["containerVerticalPadding","--tp-container-vertical-padding"],["grooveForegroundColor","--tp-groove-foreground-color"],["inputBackgroundColor","--tp-input-background-color"],["inputBackgroundColorActive","--tp-input-background-color-active"],["inputBackgroundColorFocus","--tp-input-background-color-focus"],["inputBackgroundColorHover","--tp-input-background-color-hover"],["inputForegroundColor","--tp-input-foreground-color"],["labelForegroundColor","--tp-label-foreground-color"],["monitorBackgroundColor","--tp-monitor-background-color"],["monitorForegroundColor","--tp-monitor-foreground-color"],["pluginImageDraggingColor","--tp-plugin-image-dragging-color"]]);function Cl(s){if(s!==void 0){if(typeof s=="string")return s;if(nu(s))return`rgba(${s.r}, ${s.g}, ${s.b}, ${s.a})`;if(ru(s))return`rgb(${s.r}, ${s.g}, ${s.b})`}}function td(s){if(s.startsWith("--tp-"))return s;const r=h0.get(s);if(r)return r;throw new Error(`Unknown Tweakpane CSS theme map variable key: "${s}"`)}function rd(s,r){return(s==null?void 0:s[r])===void 0?Cl(sa[r]):Cl(s[r])}function p0(s,r){const n=Sy().documentElement;if(r===void 0)for(const t of Object.keys(sa)){const i=td(t);s.style.getPropertyValue(i).length>0&&s.style.removeProperty(i)}else for(const[t,i]of Object.entries(r)){const d=td(t),o=Cl(i),c=sa[t]||void 0,a=n.style.getPropertyValue(d)||void 0;r!==void 0&&o!==void 0&&(((a&&o!==a)??!1)||!a&&((c&&o!==c)??!1))?s.style.setProperty(d,o):s.style.getPropertyValue(d).length>0&&s.style.removeProperty(d)}}function nd(s){let r,n=`${s[0]}px`;return{c(){r=ln("div"),lr(r,"background",null),lr(r,"height",n)},m(t,i){Lt(t,r,i)},p(t,i){i&1&&n!==(n=`${t[0]}px`)&&lr(r,"height",n)},d(t){t&&Et(r)}}}function f0(s){let r,n=s[0]>0&&nd(s);return{c(){n&&n.c(),r=Vr()},m(t,i){n&&n.m(t,i),Lt(t,r,i)},p(t,[i]){t[0]>0?n?n.p(t,i):(n=nd(t),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:fr,o:fr,d(t){t&&Et(r),n&&n.d(t)}}}function sd(s){return Number.parseFloat(s.replace("px",""))}function m0(s,r,n){let t,{theme:i=void 0}=r,{keysAdd:d=[]}=r,{keysSubtract:o=[]}=r,{extra:c=void 0}=r;function a(l,b,g=0){return l.reduce((u,h)=>u+=sd(rd(i,h)),0)-b.reduce((u,h)=>u+=sd(rd(i,h)),0)+g}return s.$$set=l=>{"theme"in l&&n(1,i=l.theme),"keysAdd"in l&&n(2,d=l.keysAdd),"keysSubtract"in l&&n(3,o=l.keysSubtract),"extra"in l&&n(4,c=l.extra)},s.$$.update=()=>{s.$$.dirty&28&&n(0,t=a(d,o,c))},[t,i,d,o,c]}class po extends Mr{constructor(r){super(),Tr(this,r,m0,f0,Cr,{theme:1,keysAdd:2,keysSubtract:3,extra:4})}}function mp(s){return s.constructor.name==="Pane"}function $a(s,r,n){return Math.min(Math.max(s,r),n)}function yp(s){let r=0,n=s;for(;(n=n.previousElementSibling)!==null;)r++;return r}function es(s,...r){for(const n of r)n in s&&delete s[n];return s}function od(s){s.isTrusted&&s.stopPropagation()}function gp(s,r,n,t){if(r){const i=r.querySelector(`.${n}`);if(i){const d=t?r.querySelector(`.${t}`):void 0;s?(i.removeEventListener("click",od,{capture:!0}),i.style.cursor="pointer",d&&(d.style.display="block")):(i.addEventListener("click",od,{capture:!0}),i.style.cursor="default",d&&(d.style.display="none"))}}else console.warn(`Title bar element not found with class "${n}"`)}function y0(s){var r,n,t,i;return(i=(t=(n=(r=s.controller.valueController)==null?void 0:r.foldable_)==null?void 0:n.valMap_)==null?void 0:t.expanded)==null?void 0:i.value_}function g0(s){var n,t,i,d,o,c,a;return((d=(i=(t=(n=s.controller)==null?void 0:n.valueController)==null?void 0:t.view)==null?void 0:i.swatchElement)==null?void 0:d.querySelector("button"))??((a=(c=(o=s.controller)==null?void 0:o.valueController)==null?void 0:c.view)==null?void 0:a.buttonElement)}/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Ht(s){return s==null}function uu(s){return s!==null&&typeof s=="object"}function El(s){return s!==null&&typeof s=="object"}function v0(s,r){if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==r[n])return!1;return!0}function Cs(s,r){return Array.from(new Set([...Object.keys(s),...Object.keys(r)])).reduce((t,i)=>{const d=s[i],o=r[i];return El(d)&&El(o)?Object.assign(Object.assign({},t),{[i]:Cs(d,o)}):Object.assign(Object.assign({},t),{[i]:i in r?o:d})},{})}function cu(s){return uu(s)?"target"in s:!1}const b0={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:s=>`Not compatible with  plugin '${s.id}'`,propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class nr{static alreadyDisposed(){return new nr({type:"alreadydisposed"})}static notBindable(){return new nr({type:"notbindable"})}static notCompatible(r,n){return new nr({type:"notcompatible",context:{id:`${r}.${n}`}})}static propertyNotFound(r){return new nr({type:"propertynotfound",context:{name:r}})}static shouldNeverHappen(){return new nr({type:"shouldneverhappen"})}constructor(r){var n;this.message=(n=b0[r.type](r.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=r.type}toString(){return this.message}}class oa{constructor(r,n){this.obj_=r,this.key=n}static isBindable(r){return!(r===null||typeof r!="object"&&typeof r!="function")}read(){return this.obj_[this.key]}write(r){this.obj_[this.key]=r}writeProperty(r,n){const t=this.read();if(!oa.isBindable(t))throw nr.notBindable();if(!(r in t))throw nr.propertyNotFound(r);t[r]=n}}class dr{constructor(){this.observers_={}}on(r,n,t){var i;let d=this.observers_[r];return d||(d=this.observers_[r]=[]),d.push({handler:n,key:(i=t==null?void 0:t.key)!==null&&i!==void 0?i:n}),this}off(r,n){const t=this.observers_[r];return t&&(this.observers_[r]=t.filter(i=>i.key!==n)),this}emit(r,n){const t=this.observers_[r];t&&t.forEach(i=>{i.handler(n)})}}class _0{constructor(r,n){var t;this.constraint_=n==null?void 0:n.constraint,this.equals_=(t=n==null?void 0:n.equals)!==null&&t!==void 0?t:(i,d)=>i===d,this.emitter=new dr,this.rawValue_=r}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(r){this.setRawValue(r,{forceEmit:!1,last:!0})}setRawValue(r,n){const t=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(r):r,d=this.rawValue_;this.equals_(d,i)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:t,previousRawValue:d,rawValue:i,sender:this}))}}class w0{constructor(r){this.emitter=new dr,this.value_=r}get rawValue(){return this.value_}set rawValue(r){this.setRawValue(r,{forceEmit:!1,last:!0})}setRawValue(r,n){const t=n??{forceEmit:!1,last:!0},i=this.value_;i===r&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=r,this.emitter.emit("change",{options:t,previousRawValue:i,rawValue:this.value_,sender:this}))}}class x0{constructor(r){this.emitter=new dr,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=r,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(r){this.emitter.emit("beforechange",Object.assign(Object.assign({},r),{sender:this}))}onValueChange_(r){this.emitter.emit("change",Object.assign(Object.assign({},r),{sender:this}))}}function Qt(s,r){const n=r==null?void 0:r.constraint,t=r==null?void 0:r.equals;return!n&&!t?new w0(s):new _0(s,r)}function j0(s){return[new x0(s),(r,n)=>{s.setRawValue(r,n)}]}class gt{constructor(r){this.emitter=new dr,this.valMap_=r;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(r){return Object.keys(r).reduce((t,i)=>Object.assign(t,{[i]:Qt(r[i])}),{})}static fromObject(r){const n=this.createCore(r);return new gt(n)}get(r){return this.valMap_[r].rawValue}set(r,n){this.valMap_[r].rawValue=n}value(r){return this.valMap_[r]}}class mi{constructor(r){this.values=gt.fromObject({max:r.max,min:r.min})}constrain(r){const n=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(r,t),n)}}class C0{constructor(r){this.values=gt.fromObject({max:r.max,min:r.min})}constrain(r){const n=this.values.get("max"),t=this.values.get("min");let i=r;return Ht(t)||(i=Math.max(i,t)),Ht(n)||(i=Math.min(i,n)),i}}class E0{constructor(r,n=0){this.step=r,this.origin=n}constrain(r){const n=this.origin%this.step,t=Math.round((r-n)/this.step);return n+t*this.step}}class S0{constructor(r){this.text=r}evaluate(){return Number(this.text)}toString(){return this.text}}const P0={"**":(s,r)=>Math.pow(s,r),"*":(s,r)=>s*r,"/":(s,r)=>s/r,"%":(s,r)=>s%r,"+":(s,r)=>s+r,"-":(s,r)=>s-r,"<<":(s,r)=>s<<r,">>":(s,r)=>s>>r,">>>":(s,r)=>s>>>r,"&":(s,r)=>s&r,"^":(s,r)=>s^r,"|":(s,r)=>s|r};class k0{constructor(r,n,t){this.left=n,this.operator=r,this.right=t}evaluate(){const r=P0[this.operator];if(!r)throw new Error(`unexpected binary operator: '${this.operator}`);return r(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const T0={"+":s=>s,"-":s=>-s,"~":s=>~s};class M0{constructor(r,n){this.operator=r,this.expression=n}evaluate(){const r=T0[this.operator];if(!r)throw new Error(`unexpected unary operator: '${this.operator}`);return r(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function du(s){return(r,n)=>{for(let t=0;t<s.length;t++){const i=s[t](r,n);if(i!=="")return i}return""}}function Ko(s,r){var n;const t=s.substr(r).match(/^\s+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function L0(s,r){const n=s.substr(r,1);return n.match(/^[1-9]$/)?n:""}function Zo(s,r){var n;const t=s.substr(r).match(/^[0-9]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function A0(s,r){const n=Zo(s,r);if(n!=="")return n;const t=s.substr(r,1);if(r+=1,t!=="-"&&t!=="+")return"";const i=Zo(s,r);return i===""?"":t+i}function hu(s,r){const n=s.substr(r,1);if(r+=1,n.toLowerCase()!=="e")return"";const t=A0(s,r);return t===""?"":n+t}function vp(s,r){const n=s.substr(r,1);if(n==="0")return n;const t=L0(s,r);return r+=t.length,t===""?"":t+Zo(s,r)}function O0(s,r){const n=vp(s,r);if(r+=n.length,n==="")return"";const t=s.substr(r,1);if(r+=t.length,t!==".")return"";const i=Zo(s,r);return r+=i.length,n+t+i+hu(s,r)}function R0(s,r){const n=s.substr(r,1);if(r+=n.length,n!==".")return"";const t=Zo(s,r);return r+=t.length,t===""?"":n+t+hu(s,r)}function D0(s,r){const n=vp(s,r);return r+=n.length,n===""?"":n+hu(s,r)}const I0=du([O0,R0,D0]);function F0(s,r){var n;const t=s.substr(r).match(/^[01]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function N0(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0b")return"";const t=F0(s,r);return t===""?"":n+t}function V0(s,r){var n;const t=s.substr(r).match(/^[0-7]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function B0(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0o")return"";const t=V0(s,r);return t===""?"":n+t}function U0(s,r){var n;const t=s.substr(r).match(/^[0-9a-f]+/i);return(n=t&&t[0])!==null&&n!==void 0?n:""}function G0(s,r){const n=s.substr(r,2);if(r+=n.length,n.toLowerCase()!=="0x")return"";const t=U0(s,r);return t===""?"":n+t}const z0=du([N0,B0,G0]),q0=du([z0,I0]);function H0(s,r){const n=q0(s,r);return r+=n.length,n===""?null:{evaluable:new S0(n),cursor:r}}function W0(s,r){const n=s.substr(r,1);if(r+=n.length,n!=="(")return null;const t=_p(s,r);if(!t)return null;r=t.cursor,r+=Ko(s,r).length;const i=s.substr(r,1);return r+=i.length,i!==")"?null:{evaluable:t.evaluable,cursor:r}}function X0(s,r){var n;return(n=H0(s,r))!==null&&n!==void 0?n:W0(s,r)}function bp(s,r){const n=X0(s,r);if(n)return n;const t=s.substr(r,1);if(r+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const i=bp(s,r);return i?(r=i.cursor,{cursor:r,evaluable:new M0(t,i.evaluable)}):null}function Y0(s,r,n){n+=Ko(r,n).length;const t=s.filter(i=>r.startsWith(i,n))[0];return t?(n+=t.length,n+=Ko(r,n).length,{cursor:n,operator:t}):null}function $0(s,r){return(n,t)=>{const i=s(n,t);if(!i)return null;t=i.cursor;let d=i.evaluable;for(;;){const o=Y0(r,n,t);if(!o)break;t=o.cursor;const c=s(n,t);if(!c)return null;t=c.cursor,d=new k0(o.operator,d,c.evaluable)}return d?{cursor:t,evaluable:d}:null}}const K0=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,r)=>$0(s,r),bp);function _p(s,r){return r+=Ko(s,r).length,K0(s,r)}function Z0(s){const r=_p(s,0);return!r||r.cursor+Ko(s,r.cursor).length!==s.length?null:r.evaluable}function On(s){var r;const n=Z0(s);return(r=n==null?void 0:n.evaluate())!==null&&r!==void 0?r:null}function wp(s){if(typeof s=="number")return s;if(typeof s=="string"){const r=On(s);if(!Ht(r))return r}return 0}function Q0(s){return String(s)}function Br(s){return r=>r.toFixed(Math.max(Math.min(s,20),0))}function Ot(s,r,n,t,i){const d=(s-r)/(n-r);return t+d*(i-t)}function id(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function mr(s,r,n){return Math.min(Math.max(s,r),n)}function xp(s,r){return(s%r+r)%r}function J0(s,r){return Ht(s.step)?Math.max(id(r),2):id(s.step)}function jp(s){var r;return(r=s.step)!==null&&r!==void 0?r:1}function Cp(s,r){var n;const t=Math.abs((n=s.step)!==null&&n!==void 0?n:r);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function Ep(s,r){return Ht(s.step)?null:new E0(s.step,r)}function Sp(s){return!Ht(s.max)&&!Ht(s.min)?new mi({max:s.max,min:s.min}):!Ht(s.max)||!Ht(s.min)?new C0({max:s.max,min:s.min}):null}function Pp(s,r){var n,t,i;return{formatter:(n=s.format)!==null&&n!==void 0?n:Br(J0(s,r)),keyScale:(t=s.keyScale)!==null&&t!==void 0?t:jp(s),pointerScale:(i=s.pointerScale)!==null&&i!==void 0?i:Cp(s,r)}}function kp(s){return{format:s.optional.function,keyScale:s.optional.number,max:s.optional.number,min:s.optional.number,pointerScale:s.optional.number,step:s.optional.number}}function pu(s){return{constraint:s.constraint,textProps:gt.fromObject(Pp(s.params,s.initialValue))}}class Ls{constructor(r){this.controller=r}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(r){this.controller.viewProps.set("disabled",r)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(r){this.controller.viewProps.set("hidden",r)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(r){return this.controller.importState(r)}exportState(){return this.controller.exportState()}}class Ea{constructor(r){this.target=r}}class yi extends Ea{constructor(r,n,t){super(r),this.value=n,this.last=t??!0}}class eb extends Ea{constructor(r,n){super(r),this.expanded=n}}class tb extends Ea{constructor(r,n){super(r),this.index=n}}class rb extends Ea{constructor(r,n){super(r),this.native=n}}class Qo extends Ls{constructor(r){super(r),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new dr,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(r){this.controller.tag=r}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}refresh(){this.controller.value.fetch()}onValueChange_(r){const n=this.controller.value;this.emitter_.emit("change",new yi(this,n.binding.target.read(),r.options.last))}}class nb{constructor(r,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=r,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new dr}get rawValue(){return this.value_.rawValue}set rawValue(r){this.value_.rawValue=r}setRawValue(r,n){this.value_.setRawValue(r,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(r){this.emitter.emit("beforechange",Object.assign(Object.assign({},r),{sender:this}))}onValueChange_(r){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},r),{sender:this}))}}function sb(s){if(!("binding"in s))return!1;const r=s.binding;return cu(r)&&"read"in r&&"write"in r}function ob(s,r){const t=Object.keys(r).reduce((i,d)=>{if(i===void 0)return;const o=r[d],c=o(s[d]);return c.succeeded?Object.assign(Object.assign({},i),{[d]:c.value}):void 0},{});return t}function ib(s,r){return s.reduce((n,t)=>{if(n===void 0)return;const i=r(t);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function ab(s){return s===null?!1:typeof s=="object"}function Pn(s){return r=>n=>{if(!r&&n===void 0)return{succeeded:!1,value:void 0};if(r&&n===void 0)return{succeeded:!0,value:void 0};const t=s(n);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function ad(s){return{custom:r=>Pn(r)(s),boolean:Pn(r=>typeof r=="boolean"?r:void 0)(s),number:Pn(r=>typeof r=="number"?r:void 0)(s),string:Pn(r=>typeof r=="string"?r:void 0)(s),function:Pn(r=>typeof r=="function"?r:void 0)(s),constant:r=>Pn(n=>n===r?r:void 0)(s),raw:Pn(r=>r)(s),object:r=>Pn(n=>{if(ab(n))return ob(n,r)})(s),array:r=>Pn(n=>{if(Array.isArray(n))return ib(n,r)})(s)}}const Sl={optional:ad(!0),required:ad(!1)};function er(s,r){const n=r(Sl),t=Sl.required.object(n)(s);return t.succeeded?t.value:void 0}function Xr(s,r,n,t){if(r&&!r(s))return!1;const i=er(s,n);return i?t(i):!1}function Yr(s,r){var n;return Cs((n=s==null?void 0:s())!==null&&n!==void 0?n:{},r)}function _s(s){return"value"in s}function Tp(s){if(!uu(s)||!("binding"in s))return!1;const r=s.binding;return cu(r)}const vn="http://www.w3.org/2000/svg";function ia(s){s.offsetHeight}function lb(s,r){const n=s.style.transition;s.style.transition="none",r(),s.style.transition=n}function fu(s){return s.ontouchstart!==void 0}function ub(){return globalThis}function cb(){return ub().document}function db(s){const r=s.ownerDocument.defaultView;return r&&"document"in r?s.getContext("2d",{willReadFrequently:!0}):null}const hb={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Sa(s,r){const n=s.createElementNS(vn,"svg");return n.innerHTML=hb[r],n}function Mp(s,r,n){s.insertBefore(r,s.children[n])}function mu(s){s.parentElement&&s.parentElement.removeChild(s)}function Lp(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function pb(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function Ap(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}function An(s,r){s.emitter.on("change",n=>{r(n.rawValue)}),r(s.rawValue)}function wn(s,r,n){An(s.value(r),n)}const fb="tp";function St(s){return(n,t)=>[fb,"-",s,"v",n?`_${n}`:"",t?`-${t}`:""].join("")}const Ao=St("lbl");function mb(s,r){const n=s.createDocumentFragment();return r.split(`
`).map(i=>s.createTextNode(i)).forEach((i,d)=>{d>0&&n.appendChild(s.createElement("br")),n.appendChild(i)}),n}class Op{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Ao()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Ao("l")),wn(n.props,"label",d=>{Ht(d)?this.element.classList.add(Ao(void 0,"nol")):(this.element.classList.remove(Ao(void 0,"nol")),pb(t),t.appendChild(mb(r,d)))}),this.element.appendChild(t),this.labelElement=t;const i=r.createElement("div");i.classList.add(Ao("v")),this.element.appendChild(i),this.valueElement=i}}class Rp{constructor(r,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Op(r,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(r){return Xr(r,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Yr(null,{label:this.props.get("label")})}}function yb(){return["veryfirst","first","last","verylast"]}const ld=St(""),ud={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Pa{constructor(r){this.parent_=null,this.blade=r.blade,this.view=r.view,this.viewProps=r.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{yb().forEach(t=>{n.classList.remove(ld(void 0,ud[t]))}),this.blade.get("positions").forEach(t=>{n.classList.add(ld(void 0,ud[t]))})}),this.viewProps.handleDispose(()=>{mu(n)})}get parent(){return this.parent_}set parent(r){this.parent_=r,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(r){return Xr(r,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Yr(null,Object.assign({},this.viewProps.exportState()))}}class Es extends Pa{constructor(r,n){if(n.value!==n.valueController.value)throw nr.shouldNeverHappen();const t=n.valueController.viewProps,i=new Rp(r,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Op(r,{props:n.props,viewProps:t}),viewProps:t})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(r){return Xr(r,n=>{var t,i,d;return super.importState(n)&&this.labelController.importProps(n)&&((d=(i=(t=this.valueController).importProps)===null||i===void 0?void 0:i.call(t,r))!==null&&d!==void 0?d:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var r,n,t;return Yr(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(t=(n=(r=this.valueController).exportProps)===null||n===void 0?void 0:n.call(r))!==null&&t!==void 0?t:{}))}}function cd(s){const r=Object.assign({},s);return delete r.value,r}class Dp extends Es{constructor(r,n){super(r,n),this.tag=n.tag}importState(r){return Xr(r,n=>super.importState(cd(r)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Yr(()=>cd(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function gb(s){return _s(s)&&Tp(s.value)}class vb extends Dp{importState(r){return Xr(r,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function bb(s){return _s(s)&&sb(s.value)}function Ip(s,r){for(;s.length<r;)s.push(void 0)}function _b(s){const r=[];return Ip(r,s),r}function wb(s){const r=s.indexOf(void 0);return r<0?s:s.slice(0,r)}function xb(s,r){const n=[...wb(s),r];return n.length>s.length?n.splice(0,n.length-s.length):Ip(n,s.length),n}class jb{constructor(r){this.emitter=new dr,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=r.binding,this.value_=Qt(_b(r.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=r.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(r){this.value_.rawValue=r}setRawValue(r,n){this.value_.setRawValue(r,n)}fetch(){this.value_.rawValue=xb(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(r){this.emitter.emit("beforechange",Object.assign(Object.assign({},r),{sender:this}))}onValueChange_(r){this.emitter.emit("change",Object.assign(Object.assign({},r),{sender:this}))}}function Cb(s){if(!("binding"in s))return!1;const r=s.binding;return cu(r)&&"read"in r&&!("write"in r)}class Eb extends Dp{exportState(){return Yr(()=>super.exportState(),{binding:{readonly:!0}})}}function Sb(s){return _s(s)&&Cb(s.value)}class Pb extends Ls{get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get title(){var r;return(r=this.controller.buttonController.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller.buttonController.props.set("title",r)}on(r,n){const t=n.bind(this);return this.controller.buttonController.emitter.on(r,d=>{t(new rb(this,d.nativeEvent))}),this}off(r,n){return this.controller.buttonController.emitter.off(r,n),this}}function kb(s,r,n){n?s.classList.add(r):s.classList.remove(r)}function fo(s,r){return n=>{kb(s,r,n)}}function yu(s,r){An(s,n=>{r.textContent=n??""})}const Ka=St("btn");class Tb{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Ka()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("button");t.classList.add(Ka("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const i=r.createElement("div");i.classList.add(Ka("t")),yu(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class Mb{constructor(r,n){this.emitter=new dr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Tb(r,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(r){return Xr(r,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Yr(null,{title:this.props.get("title")})}onClick_(r){this.emitter.emit("click",{nativeEvent:r,sender:this})}}class dd extends Pa{constructor(r,n){const t=new Mb(r,{props:n.buttonProps,viewProps:n.viewProps}),i=new Rp(r,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=t,this.labelController=i}importState(r){return Xr(r,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Yr(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Fp{constructor(r){const[n,t]=r.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=t??null}toString(){const r=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[r,this.prerelease].join("-"):r}}const mo=new Fp("2.0.3");function Fr(s){return Object.assign({core:mo},s)}const Lb=Fr({id:"button",type:"blade",accept(s){const r=er(s,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return r?{params:r}:null},controller(s){return new dd(s.document,{blade:s.blade,buttonProps:gt.fromObject({title:s.params.title}),labelProps:gt.fromObject({label:s.params.label}),viewProps:s.viewProps})},api(s){return s.controller instanceof dd?new Pb(s.controller):null}});function Ab(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"button"}))}function Ob(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"folder"}))}function Rb(s,r){return s.addBlade(Object.assign(Object.assign({},r),{view:"tab"}))}function Db(s){return uu(s)?"refresh"in s&&typeof s.refresh=="function":!1}function Ib(s,r){if(!oa.isBindable(s))throw nr.notBindable();return new oa(s,r)}class Fb{constructor(r,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=r,this.emitter_=new dr,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(r=>this.pool_.createApi(r))}addBinding(r,n,t){const i=t??{},d=this.controller_.element.ownerDocument,o=this.pool_.createBinding(d,Ib(r,n),i),c=this.pool_.createBindingApi(o);return this.add(c,i.index)}addFolder(r){return Ob(this,r)}addButton(r){return Ab(this,r)}addTab(r){return Rb(this,r)}add(r,n){const t=r.controller;return this.controller_.rack.add(t,n),r}remove(r){this.controller_.rack.remove(r.controller)}addBlade(r){const n=this.controller_.element.ownerDocument,t=this.pool_.createBlade(n,r),i=this.pool_.createApi(t);return this.add(i,r.index)}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}refresh(){this.children.forEach(r=>{Db(r)&&r.refresh()})}onRackValueChange_(r){const n=r.bladeController,t=this.pool_.createApi(n),i=Tp(n.value)?n.value.binding:null;this.emitter_.emit("change",new yi(t,i?i.target.read():n.value.rawValue,r.options.last))}}class gu extends Ls{constructor(r,n){super(r),this.rackApi_=new Fb(r.rackController,n)}refresh(){this.rackApi_.refresh()}}class vu extends Pa{constructor(r){super({blade:r.blade,view:r.view,viewProps:r.rackController.viewProps}),this.rackController=r.rackController}importState(r){return Xr(r,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((t,i)=>t.importState(n.children[i])))}exportState(){return Yr(()=>super.exportState(),{children:this.rackController.rack.children.map(r=>r.exportState())})}}function Pl(s){return"rackController"in s}class Nb{constructor(r){this.emitter=new dr,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=r}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(r){for(const n of this.allItems())if(r(n))return n;return null}includes(r){return this.cache_.has(r)}add(r,n){if(this.includes(r))throw nr.shouldNeverHappen();const t=n!==void 0?n:this.items_.length;this.items_.splice(t,0,r),this.cache_.add(r);const i=this.extract_(r);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(d=>{this.cache_.add(d)})),this.emitter.emit("add",{index:t,item:r,root:this,target:this})}remove(r){const n=this.items_.indexOf(r);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(r);const t=this.extract_(r);t&&(t.allItems().forEach(i=>{this.cache_.delete(i)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:r,root:this,target:this})}onSubListAdd_(r){this.cache_.add(r.item),this.emitter.emit("add",{index:r.index,item:r.item,root:this,target:r.target})}onSubListRemove_(r){this.cache_.delete(r.item),this.emitter.emit("remove",{index:r.index,item:r.item,root:this,target:r.target})}}function Vb(s,r){for(let n=0;n<s.length;n++){const t=s[n];if(_s(t)&&t.value===r)return t}return null}function Bb(s){return Pl(s)?s.rackController.rack.bcSet_:null}class Ub{constructor(r){var n,t;this.emitter=new dr,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=r.blade)!==null&&n!==void 0?n:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=r.viewProps,this.bcSet_=new Nb(Bb),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(r,n){var t;(t=r.parent)===null||t===void 0||t.remove(r),r.parent=this,this.bcSet_.add(r,n)}remove(r){r.parent=null,this.bcSet_.remove(r)}find(r){return this.bcSet_.allItems().filter(r)}onSetAdd_(r){this.updatePositions_();const n=r.target===r.root;if(this.emitter.emit("add",{bladeController:r.item,index:r.index,root:n,sender:this}),!n)return;const t=r.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),_s(t))t.value.emitter.on("change",this.onChildValueChange_);else if(Pl(t)){const i=t.rackController.rack;if(i){const d=i.emitter;d.on("layout",this.onRackLayout_),d.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(r){this.updatePositions_();const n=r.target===r.root;if(this.emitter.emit("remove",{bladeController:r.item,root:n,sender:this}),!n)return;const t=r.item;if(_s(t))t.value.emitter.off("change",this.onChildValueChange_);else if(Pl(t)){const i=t.rackController.rack;if(i){const d=i.emitter;d.off("layout",this.onRackLayout_),d.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const r=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=r[0],t=r[r.length-1];this.bcSet_.items.forEach(i=>{const d=[];i===n&&(d.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&d.push("veryfirst")),i===t&&(d.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&d.push("verylast")),i.blade.set("positions",d)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(r){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(r){const n=Vb(this.find(_s),r.sender);if(!n)throw nr.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:r.options,sender:this})}onRackLayout_(r){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(r){this.emitter.emit("valuechange",{bladeController:r.bladeController,options:r.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class bu{constructor(r){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=r.element,this.viewProps=r.viewProps;const n=new Ub({blade:r.root?void 0:r.blade,viewProps:r.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(r){r.root&&Mp(this.element,r.bladeController.view.element,r.index)}onRackRemove_(r){r.root&&mu(r.bladeController.view.element)}}function yo(){return new gt({positions:Qt([],{equals:v0})})}class gi extends gt{constructor(r){super(r)}static create(r){const n={completed:!0,expanded:r,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=gt.createCore(n);return new gi(t)}get styleExpanded(){var r;return(r=this.get("temporaryExpanded"))!==null&&r!==void 0?r:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const r=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ht(r)?`${r}px`:"auto"}bindExpandedClass(r,n){const t=()=>{this.styleExpanded?r.classList.add(n):r.classList.remove(n)};wn(this,"expanded",t),wn(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Gb(s,r){let n=0;return lb(r,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),ia(r),n=r.clientHeight,s.set("temporaryExpanded",null),ia(r)}),n}function hd(s,r){r.style.height=s.styleHeight}function _u(s,r){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),Ht(s.get("expandedHeight"))){const n=Gb(s,r);n>0&&s.set("expandedHeight",n)}s.set("shouldFixHeight",!0),ia(r)}),s.emitter.on("change",()=>{hd(s,r)}),hd(s,r),r.addEventListener("transitionend",n=>{n.propertyName==="height"&&s.cleanUpTransition()})}class Np extends gu{constructor(r,n){super(r,n),this.emitter_=new dr,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new eb(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(r){this.controller.foldable.set("expanded",r)}get title(){return this.controller.props.get("title")}set title(r){this.controller.props.set("title",r)}get children(){return this.rackApi_.children}addBinding(r,n,t){return this.rackApi_.addBinding(r,n,t)}addFolder(r){return this.rackApi_.addFolder(r)}addButton(r){return this.rackApi_.addButton(r)}addTab(r){return this.rackApi_.addTab(r)}add(r,n){return this.rackApi_.add(r,n)}remove(r){this.rackApi_.remove(r)}addBlade(r){return this.rackApi_.addBlade(r)}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}}const Vp=St("cnt");class zb{constructor(r,n){var t;this.className_=St((t=n.viewName)!==null&&t!==void 0?t:"fld"),this.element=r.createElement("div"),this.element.classList.add(this.className_(),Vp()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),wn(this.foldable_,"completed",fo(this.element,this.className_(void 0,"cpl")));const i=r.createElement("button");i.classList.add(this.className_("b")),wn(n.props,"title",l=>{Ht(l)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const d=r.createElement("div");d.classList.add(this.className_("i")),this.element.appendChild(d);const o=r.createElement("div");o.classList.add(this.className_("t")),yu(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const c=r.createElement("div");c.classList.add(this.className_("m")),this.buttonElement.appendChild(c);const a=r.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class kl extends vu{constructor(r,n){var t;const i=gi.create((t=n.expanded)!==null&&t!==void 0?t:!0),d=new zb(r,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new bu({blade:n.blade,element:d.containerElement,root:n.root,viewProps:n.viewProps}),view:d})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,_u(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(r){return Xr(r,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Yr(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const qb=Fr({id:"folder",type:"blade",accept(s){const r=er(s,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return r?{params:r}:null},controller(s){return new kl(s.document,{blade:s.blade,expanded:s.params.expanded,props:gt.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof kl?new Np(s.controller,s.pool):null}}),Hb=St("");function pd(s,r){return fo(s,Hb(void 0,r))}class In extends gt{constructor(r){var n;super(r),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=j0(Qt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(r){var n,t,i;const d=r??{};return new In(gt.createCore({disabled:(n=d.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(t=d.hidden)!==null&&t!==void 0?t:!1,parent:(i=d.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(r){An(this.globalDisabled_,pd(r,"disabled")),wn(this,"hidden",pd(r,"hidden"))}bindDisabled(r){An(this.globalDisabled_,n=>{r.disabled=n})}bindTabIndex(r){An(this.globalDisabled_,n=>{r.tabIndex=n?-1:0})}handleDispose(r){this.value("disposed").emitter.on("change",n=>{n&&r()})}importState(r){this.set("disabled",r.disabled),this.set("hidden",r.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const r=this.get("parent");return(r?r.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(r){var n;const t=r.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const fd=St("tbp");class Wb{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(fd()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(fd("c")),this.element.appendChild(t),this.containerElement=t}}const Oo=St("tbi");class Xb{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Oo()),n.viewProps.bindClassModifiers(this.element),wn(n.props,"selected",d=>{d?this.element.classList.add(Oo(void 0,"sel")):this.element.classList.remove(Oo(void 0,"sel"))});const t=r.createElement("button");t.classList.add(Oo("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const i=r.createElement("div");i.classList.add(Oo("t")),yu(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Yb{constructor(r,n){this.emitter=new dr,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Xb(r,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Tl extends vu{constructor(r,n){const t=new Wb(r,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new bu({blade:n.blade,element:t.containerElement,viewProps:n.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Yb(r,{props:n.itemProps,viewProps:In.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,wn(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(r){return Xr(r,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Yr(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class $b extends gu{constructor(r,n){super(r,n),this.emitter_=new dr,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(r){const n=this.controller.view.element.ownerDocument,t=new Tl(n,{blade:yo(),itemProps:gt.fromObject({selected:!1,title:r.title}),props:gt.fromObject({selected:!1}),viewProps:In.create()}),i=this.pool_.createApi(t);return this.rackApi_.add(i,r.index)}removePage(r){this.rackApi_.remove(this.rackApi_.children[r])}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}onSelect_(r){this.emitter_.emit("select",new tb(this,r.rawValue))}}class Kb extends gu{get title(){var r;return(r=this.controller.itemController.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller.itemController.props.set("title",r)}get selected(){return this.controller.props.get("selected")}set selected(r){this.controller.props.set("selected",r)}get children(){return this.rackApi_.children}addButton(r){return this.rackApi_.addButton(r)}addFolder(r){return this.rackApi_.addFolder(r)}addTab(r){return this.rackApi_.addTab(r)}add(r,n){this.rackApi_.add(r,n)}remove(r){this.rackApi_.remove(r)}addBinding(r,n,t){return this.rackApi_.addBinding(r,n,t)}addBlade(r){return this.rackApi_.addBlade(r)}}const md=-1;class Zb{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Qt(!0),this.selectedIndex=Qt(md),this.items_=[]}add(r,n){const t=n??this.items_.length;this.items_.splice(t,0,r),r.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(r){const n=this.items_.indexOf(r);n<0||(this.items_.splice(n,1),r.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=md,this.empty.rawValue=!0;return}const r=this.items_.findIndex(n=>n.rawValue);r<0?(this.items_.forEach((n,t)=>{n.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,t)=>{n.rawValue=t===r}),this.selectedIndex.rawValue=r),this.empty.rawValue=!1}onItemSelectedChange_(r){if(r.rawValue){const n=this.items_.findIndex(t=>t===r.sender);this.items_.forEach((t,i)=>{t.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Ro=St("tab");class Qb{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Ro(),Vp()),n.viewProps.bindClassModifiers(this.element),An(n.empty,fo(this.element,Ro(void 0,"nop")));const t=r.createElement("div");t.classList.add(Ro("t")),this.element.appendChild(t),this.itemsElement=t;const i=r.createElement("div");i.classList.add(Ro("i")),this.element.appendChild(i);const d=r.createElement("div");d.classList.add(Ro("c")),this.element.appendChild(d),this.contentsElement=d}}class yd extends vu{constructor(r,n){const t=new Zb,i=new Qb(r,{empty:t.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new bu({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const d=this.rackController.rack;d.emitter.on("add",this.onRackAdd_),d.emitter.on("remove",this.onRackRemove_),this.tab=t}add(r,n){this.rackController.rack.add(r,n)}remove(r){this.rackController.rack.remove(this.rackController.rack.children[r])}onRackAdd_(r){if(!r.root)return;const n=r.bladeController;Mp(this.view.itemsElement,n.itemController.view.element,r.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(r){if(!r.root)return;const n=r.bladeController;mu(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}const Bp=Fr({id:"tab",type:"blade",accept(s){const r=er(s,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!r||r.pages.length===0?null:{params:r}},controller(s){const r=new yd(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(n=>{const t=new Tl(s.document,{blade:yo(),itemProps:gt.fromObject({selected:!1,title:n.title}),props:gt.fromObject({selected:!1}),viewProps:In.create()});r.add(t)}),r},api(s){return s.controller instanceof yd?new $b(s.controller,s.pool):s.controller instanceof Tl?new Kb(s.controller,s.pool):null}});function Jb(s,r){const n=s.accept(r.params);if(!n)return null;const t=er(r.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return s.controller({blade:yo(),document:r.document,params:Object.assign(Object.assign({},n.params),{disabled:t==null?void 0:t.disabled,hidden:t==null?void 0:t.hidden}),viewProps:In.create({disabled:t==null?void 0:t.disabled,hidden:t==null?void 0:t.hidden})})}class wu extends Qo{get options(){return this.controller.valueController.props.get("options")}set options(r){this.controller.valueController.props.set("options",r)}}class e1{constructor(){this.disabled=!1,this.emitter=new dr}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class t1{constructor(r,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=r,this.emitter=new dr,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(r){this.disabled_=r,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const r=this.doc_.defaultView;r&&r.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const r=this.doc_.defaultView;r&&(this.timerId_=r.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class vi{constructor(r){this.constraints=r}constrain(r){return this.constraints.reduce((n,t)=>t.constrain(n),r)}}function aa(s,r){if(s instanceof r)return s;if(s instanceof vi){const n=s.constraints.reduce((t,i)=>t||(i instanceof r?i:null),null);if(n)return n}return null}class bi{constructor(r){this.values=gt.fromObject({options:r})}constrain(r){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===r).length>0?r:n[0].value}}function _i(s){var r;const n=Sl;if(Array.isArray(s))return(r=er({items:s},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||r===void 0?void 0:r.items;if(typeof s=="object")return n.required.raw(s).value}function xu(s){if(Array.isArray(s))return s;const r=[];return Object.keys(s).forEach(n=>{r.push({text:n,value:s[n]})}),r}function ju(s){return Ht(s)?null:new bi(xu(s))}const Za=St("lst");class r1{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=r.createElement("div"),this.element.classList.add(Za()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("select");t.classList.add(Za("s")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const i=r.createElement("div");i.classList.add(Za("m")),i.appendChild(Sa(r,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,wn(this.props_,"options",d=>{Lp(this.selectElement),d.forEach(o=>{const c=r.createElement("option");c.textContent=o.text,this.selectElement.appendChild(c)}),this.update_()})}update_(){const r=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=r.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ts{constructor(r,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new r1(r,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(r){const n=r.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(r){return Xr(r,null,n=>({options:n.required.custom(_i)}),n=>(this.props.set("options",xu(n.options)),!0))}exportProps(){return Yr(null,{options:this.props.get("options")})}}const gd=St("pop");class n1{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(gd()),n.viewProps.bindClassModifiers(this.element),An(n.shows,fo(this.element,gd(void 0,"v")))}}class Up{constructor(r,n){this.shows=Qt(!1),this.viewProps=n.viewProps,this.view=new n1(r,{shows:this.shows,viewProps:this.viewProps})}}const vd=St("txt");class s1{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(vd()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const t=r.createElement("input");t.classList.add(vd("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const r=this.props_.get("formatter");this.inputElement.value=r(this.value_.rawValue)}onChange_(){this.refresh()}}class Jo{constructor(r,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new s1(r,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(r){const t=r.currentTarget.value,i=this.parser_(t);Ht(i)||(this.value.rawValue=i),this.view.refresh()}}function o1(s){return String(s)}function Gp(s){return s==="false"?!1:!!s}function bd(s){return o1(s)}function i1(s){return r=>s.reduce((n,t)=>n!==null?n:t(r),null)}const a1=Br(0);function la(s){return a1(s)+"%"}function zp(s){return String(s)}function Ml(s){return s}function go({primary:s,secondary:r,forward:n,backward:t}){let i=!1;function d(o){i||(i=!0,o(),i=!1)}s.emitter.on("change",o=>{d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),o.options)})}),r.emitter.on("change",o=>{d(()=>{s.setRawValue(t(s.rawValue,r.rawValue),o.options)}),d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),o.options)})}),d(()=>{r.setRawValue(n(s.rawValue,r.rawValue),{forceEmit:!1,last:!0})})}function Nr(s,r){const n=s*(r.altKey?.1:1)*(r.shiftKey?10:1);return r.upKey?+n:r.downKey?-n:0}function ei(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function Rn(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function l1(s){return s==="ArrowUp"||s==="ArrowDown"}function qp(s){return l1(s)||s==="ArrowLeft"||s==="ArrowRight"}function Qa(s,r){var n,t;const i=r.ownerDocument.defaultView,d=r.getBoundingClientRect();return{x:s.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+d.left),y:s.pageY-(((t=i&&i.scrollY)!==null&&t!==void 0?t:0)+d.top)}}class As{constructor(r){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=r,this.emitter=new dr,r.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),r.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),r.addEventListener("touchend",this.onTouchEnd_),r.addEventListener("mousedown",this.onMouseDown_)}computePosition_(r){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:r?{x:r.x,y:r.y}:null}}onMouseDown_(r){var n;r.preventDefault(),(n=r.currentTarget)===null||n===void 0||n.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:r.altKey,data:this.computePosition_(Qa(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onDocumentMouseMove_(r){this.emitter.emit("move",{altKey:r.altKey,data:this.computePosition_(Qa(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onDocumentMouseUp_(r){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:r.altKey,data:this.computePosition_(Qa(r,this.elem_)),sender:this,shiftKey:r.shiftKey})}onTouchStart_(r){r.preventDefault();const n=r.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:r.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:r.shiftKey}),this.lastTouch_=n}onTouchMove_(r){const n=r.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:r.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:r.shiftKey}),this.lastTouch_=n}onTouchEnd_(r){var n;const t=(n=r.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:r.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:r.shiftKey})}}const Kr=St("txt");class u1{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=r.createElement("div"),this.element.classList.add(Kr(),Kr(void 0,"num")),n.arrayPosition&&this.element.classList.add(Kr(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("input");t.classList.add(Kr("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Kr()),this.inputElement.classList.add(Kr("i"));const i=r.createElement("div");i.classList.add(Kr("k")),this.element.appendChild(i),this.knobElement=i;const d=r.createElementNS(vn,"svg");d.classList.add(Kr("g")),this.knobElement.appendChild(d);const o=r.createElementNS(vn,"path");o.classList.add(Kr("gb")),d.appendChild(o),this.guideBodyElem_=o;const c=r.createElementNS(vn,"path");c.classList.add(Kr("gh")),d.appendChild(c),this.guideHeadElem_=c;const a=r.createElement("div");a.classList.add(St("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(r){if(r.rawValue===null){this.element.classList.remove(Kr(void 0,"drg"));return}this.element.classList.add(Kr(void 0,"drg"));const n=r.rawValue/this.props_.get("pointerScale"),t=n+(n>0?-1:n<0?1:0),i=mr(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+i},0 L${t},4 L${t+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const d=this.props_.get("formatter");this.tooltipElem_.textContent=d(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const r=this.props_.get("formatter");this.inputElement.value=r(this.value.rawValue)}onChange_(){this.refresh()}}class wi{constructor(r,n){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(t=n.sliderProps)!==null&&t!==void 0?t:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Qt(null),this.view=new u1(r,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new As(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(r){var n,t;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),d=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let o=r;return i!==void 0&&(o=Math.max(o,i)),d!==void 0&&(o=Math.min(o,d)),o}onInputChange_(r){const t=r.currentTarget.value,i=this.parser_(t);Ht(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(r){const n=Nr(this.props.get("keyScale"),ei(r));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(r){Nr(this.props.get("keyScale"),ei(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(r){if(!r.point)return null;const n=r.point.x-r.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(r){const n=this.computeDraggingValue_(r.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(r){const n=this.computeDraggingValue_(r.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ja=St("sld");class c1{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=r.createElement("div"),this.element.classList.add(Ja()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Ja("t")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const i=r.createElement("div");i.classList.add(Ja("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const r=mr(Ot(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${r}%`}onChange_(){this.update_()}}class d1{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new c1(r,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new As(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){r.point&&this.value.setRawValue(Ot(mr(r.point.x,0,r.bounds.width),0,r.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=Nr(this.props.get("keyScale"),Rn(r));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(r){Nr(this.props.get("keyScale"),Rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const el=St("sldtxt");class h1{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(el());const t=r.createElement("div");t.classList.add(el("s")),this.sliderView_=n.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(el("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class ua{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new d1(r,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new wi(r,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new h1(r,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(r){return Xr(r,null,n=>({max:n.required.number,min:n.required.number}),n=>{const t=this.sliderC_.props;return t.set("max",n.max),t.set("min",n.min),!0})}exportProps(){const r=this.sliderC_.props;return Yr(null,{max:r.get("max"),min:r.get("min")})}}function Hp(s){return{sliderProps:new gt({keyScale:s.keyScale,max:s.max,min:s.min}),textProps:new gt({formatter:Qt(s.formatter),keyScale:s.keyScale,pointerScale:Qt(s.pointerScale)})}}const p1={containerUnitSize:"cnt-usz"};function Wp(s){return`--${p1[s]}`}function ti(s){return kp(s)}function $n(s){if(El(s))return er(s,ti)}function Tn(s,r){if(!s)return;const n=[],t=Ep(s,r);t&&n.push(t);const i=Sp(s);return i&&n.push(i),new vi(n)}function f1(s){return s?s.major===mo.major:!1}function Xp(s){if(s==="inline"||s==="popup")return s}function xi(s,r){s.write(r)}const Vi=St("ckb");class m1{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(Vi()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("label");t.classList.add(Vi("l")),this.element.appendChild(t),this.labelElement=t;const i=r.createElement("input");i.classList.add(Vi("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const d=r.createElement("div");d.classList.add(Vi("w")),this.labelElement.appendChild(d);const o=Sa(r,"check");d.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class y1{constructor(r,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new m1(r,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(r){const n=r.currentTarget;this.value.rawValue=n.checked,r.preventDefault(),r.stopPropagation()}onLabelMouseDown_(r){r.preventDefault()}}function g1(s){const r=[],n=ju(s.options);return n&&r.push(n),new vi(r)}const v1=Fr({id:"input-bool",type:"input",accept:(s,r)=>{if(typeof s!="boolean")return null;const n=er(r,t=>({options:t.optional.custom(_i),readonly:t.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Gp,constraint:s=>g1(s.params),writer:s=>xi},controller:s=>{const r=s.document,n=s.value,t=s.constraint,i=t&&aa(t,bi);return i?new ts(r,{props:new gt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new y1(r,{value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="boolean"?null:s.controller.valueController instanceof ts?new wu(s.controller):null}}),ls=St("col");class b1{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(ls()),n.foldable.bindExpandedClass(this.element,ls(void 0,"expanded")),wn(n.foldable,"completed",fo(this.element,ls(void 0,"cpl")));const t=r.createElement("div");t.classList.add(ls("h")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(ls("s")),t.appendChild(i),this.swatchElement=i;const d=r.createElement("div");if(d.classList.add(ls("t")),t.appendChild(d),this.textElement=d,n.pickerLayout==="inline"){const o=r.createElement("div");o.classList.add(ls("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function _1(s,r,n){const t=mr(s/255,0,1),i=mr(r/255,0,1),d=mr(n/255,0,1),o=Math.max(t,i,d),c=Math.min(t,i,d),a=o-c;let l=0,b=0;const g=(c+o)/2;return a!==0&&(b=a/(1-Math.abs(o+c-1)),t===o?l=(i-d)/a:i===o?l=2+(d-t)/a:l=4+(t-i)/a,l=l/6+(l<0?1:0)),[l*360,b*100,g*100]}function w1(s,r,n){const t=(s%360+360)%360,i=mr(r/100,0,1),d=mr(n/100,0,1),o=(1-Math.abs(2*d-1))*i,c=o*(1-Math.abs(t/60%2-1)),a=d-o/2;let l,b,g;return t>=0&&t<60?[l,b,g]=[o,c,0]:t>=60&&t<120?[l,b,g]=[c,o,0]:t>=120&&t<180?[l,b,g]=[0,o,c]:t>=180&&t<240?[l,b,g]=[0,c,o]:t>=240&&t<300?[l,b,g]=[c,0,o]:[l,b,g]=[o,0,c],[(l+a)*255,(b+a)*255,(g+a)*255]}function x1(s,r,n){const t=mr(s/255,0,1),i=mr(r/255,0,1),d=mr(n/255,0,1),o=Math.max(t,i,d),c=Math.min(t,i,d),a=o-c;let l;a===0?l=0:o===t?l=60*(((i-d)/a%6+6)%6):o===i?l=60*((d-t)/a+2):l=60*((t-i)/a+4);const b=o===0?0:a/o,g=o;return[l,b*100,g*100]}function Yp(s,r,n){const t=xp(s,360),i=mr(r/100,0,1),d=mr(n/100,0,1),o=d*i,c=o*(1-Math.abs(t/60%2-1)),a=d-o;let l,b,g;return t>=0&&t<60?[l,b,g]=[o,c,0]:t>=60&&t<120?[l,b,g]=[c,o,0]:t>=120&&t<180?[l,b,g]=[0,o,c]:t>=180&&t<240?[l,b,g]=[0,c,o]:t>=240&&t<300?[l,b,g]=[c,0,o]:[l,b,g]=[o,0,c],[(l+a)*255,(b+a)*255,(g+a)*255]}function j1(s,r,n){const t=n+r*(100-Math.abs(2*n-100))/200;return[s,t!==0?r*(100-Math.abs(2*n-100))/t:0,n+r*(100-Math.abs(2*n-100))/(2*100)]}function C1(s,r,n){const t=100-Math.abs(n*(200-r)/100-100);return[s,t!==0?r*n/t:0,n*(200-r)/(2*100)]}function xn(s){return[s[0],s[1],s[2]]}function ka(s,r){return[s[0],s[1],s[2],r]}const E1={hsl:{hsl:(s,r,n)=>[s,r,n],hsv:j1,rgb:w1},hsv:{hsl:C1,hsv:(s,r,n)=>[s,r,n],rgb:Yp},rgb:{hsl:_1,hsv:x1,rgb:(s,r,n)=>[s,r,n]}};function no(s,r){return[r==="float"?1:s==="rgb"?255:360,r==="float"?1:s==="rgb"?255:100,r==="float"?1:s==="rgb"?255:100]}function S1(s,r){return s===r?r:xp(s,r)}function $p(s,r,n){var t;const i=no(r,n);return[r==="rgb"?mr(s[0],0,i[0]):S1(s[0],i[0]),mr(s[1],0,i[1]),mr(s[2],0,i[2]),mr((t=s[3])!==null&&t!==void 0?t:1,0,1)]}function _d(s,r,n,t){const i=no(r,n),d=no(r,t);return s.map((o,c)=>o/i[c]*d[c])}function Kp(s,r,n){const t=_d(s,r.mode,r.type,"int"),i=E1[r.mode][n.mode](...t);return _d(i,n.mode,"int",n.type)}class Tt{static black(){return new Tt([0,0,0],"rgb")}constructor(r,n){this.type="int",this.mode=n,this.comps_=$p(r,n,this.type)}getComponents(r){return ka(Kp(xn(this.comps_),{mode:this.mode,type:this.type},{mode:r??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const r=this.getComponents("rgb");return{r:r[0],g:r[1],b:r[2],a:r[3]}}}const zn=St("colp");class P1{constructor(r,n){this.alphaViews_=null,this.element=r.createElement("div"),this.element.classList.add(zn()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(zn("hsv"));const i=r.createElement("div");i.classList.add(zn("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),t.appendChild(i);const d=r.createElement("div");d.classList.add(zn("h")),this.hPaletteView_=n.hPaletteView,d.appendChild(this.hPaletteView_.element),t.appendChild(d),this.element.appendChild(t);const o=r.createElement("div");if(o.classList.add(zn("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const c=r.createElement("div");c.classList.add(zn("a"));const a=r.createElement("div");a.classList.add(zn("ap")),a.appendChild(this.alphaViews_.palette.element),c.appendChild(a);const l=r.createElement("div");l.classList.add(zn("at")),l.appendChild(this.alphaViews_.text.element),c.appendChild(l),this.element.appendChild(c)}}get allFocusableElements(){const r=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&r.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),r}}function k1(s){return s==="int"?"int":s==="float"?"float":void 0}function Cu(s){return er(s,r=>({color:r.optional.object({alpha:r.optional.boolean,type:r.optional.custom(k1)}),expanded:r.optional.boolean,picker:r.optional.custom(Xp),readonly:r.optional.constant(!1)}))}function Ss(s){return s?.1:1}function Zp(s){var r;return(r=s.color)===null||r===void 0?void 0:r.type}class Eu{constructor(r,n){this.type="float",this.mode=n,this.comps_=$p(r,n,this.type)}getComponents(r){return ka(Kp(xn(this.comps_),{mode:this.mode,type:this.type},{mode:r??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const r=this.getComponents("rgb");return{r:r[0],g:r[1],b:r[2],a:r[3]}}}const T1={int:(s,r)=>new Tt(s,r),float:(s,r)=>new Eu(s,r)};function Su(s,r,n){return T1[n](s,r)}function M1(s){return s.type==="float"}function L1(s){return s.type==="int"}function A1(s){const r=s.getComponents(),n=no(s.mode,"int");return new Tt([Math.round(Ot(r[0],0,1,0,n[0])),Math.round(Ot(r[1],0,1,0,n[1])),Math.round(Ot(r[2],0,1,0,n[2])),r[3]],s.mode)}function O1(s){const r=s.getComponents(),n=no(s.mode,"int");return new Eu([Ot(r[0],0,n[0],0,1),Ot(r[1],0,n[1],0,1),Ot(r[2],0,n[2],0,1),r[3]],s.mode)}function Dr(s,r){if(s.type===r)return s;if(L1(s)&&r==="float")return O1(s);if(M1(s)&&r==="int")return A1(s);throw nr.shouldNeverHappen()}function R1(s,r){return s.alpha===r.alpha&&s.mode===r.mode&&s.notation===r.notation&&s.type===r.type}function Jr(s,r){const n=s.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*r:parseFloat(s),r)}const D1={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function Qp(s){const r=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!r)return parseFloat(s);const n=parseFloat(r[1]),t=r[2];return D1[t](n)}function Jp(s){const r=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Jr(r[1],255),Jr(r[2],255),Jr(r[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function I1(s){const r=Jp(s);return r?new Tt(r,"rgb"):null}function ef(s){const r=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Jr(r[1],255),Jr(r[2],255),Jr(r[3],255),Jr(r[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function F1(s){const r=ef(s);return r?new Tt(r,"rgb"):null}function tf(s){const r=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qp(r[1]),Jr(r[2],100),Jr(r[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function N1(s){const r=tf(s);return r?new Tt(r,"hsl"):null}function rf(s){const r=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!r)return null;const n=[Qp(r[1]),Jr(r[2],100),Jr(r[3],100),Jr(r[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function V1(s){const r=rf(s);return r?new Tt(r,"hsl"):null}function nf(s){const r=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(r)return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)];const n=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function B1(s){const r=nf(s);return r?new Tt(r,"rgb"):null}function sf(s){const r=s.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(r)return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16),Ot(parseInt(r[4]+r[4],16),0,255,0,1)];const n=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Ot(parseInt(n[4],16),0,255,0,1)]:null}function U1(s){const r=sf(s);return r?new Tt(r,"rgb"):null}function of(s){const r=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!r)return null;const n=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function G1(s){return r=>{const n=of(r);return n?Su(n,"rgb",s):null}}function af(s){const r=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!r)return null;const n=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function z1(s){return r=>{const n=af(r);return n?Su(n,"rgb",s):null}}const q1=[{parser:nf,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:sf,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Jp,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:ef,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:tf,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:rf,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:of,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:af,result:{alpha:!0,mode:"rgb",notation:"object"}}];function H1(s){return q1.reduce((r,{parser:n,result:t})=>r||(n(s)?t:null),null)}function W1(s,r="int"){const n=H1(s);return n?n.notation==="hex"&&r!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:r}):null:null}function ji(s){const r=[B1,U1,I1,F1,N1,V1];r.push(G1("int"),z1("int"));const n=i1(r);return t=>{const i=n(t);return i?Dr(i,s):null}}function X1(s){const r=ji("int");if(typeof s!="string")return Tt.black();const n=r(s);return n??Tt.black()}function lf(s){const r=mr(Math.floor(s),0,255).toString(16);return r.length===1?`0${r}`:r}function Pu(s,r="#"){const n=xn(s.getComponents("rgb")).map(lf).join("");return`${r}${n}`}function ku(s,r="#"){const n=s.getComponents("rgb"),t=[n[0],n[1],n[2],n[3]*255].map(lf).join("");return`${r}${t}`}function uf(s){const r=Br(0),n=Dr(s,"int");return`rgb(${xn(n.getComponents("rgb")).map(i=>r(i)).join(", ")})`}function Ki(s){const r=Br(2),n=Br(0);return`rgba(${Dr(s,"int").getComponents("rgb").map((d,o)=>(o===3?r:n)(d)).join(", ")})`}function Y1(s){const r=[Br(0),la,la],n=Dr(s,"int");return`hsl(${xn(n.getComponents("hsl")).map((i,d)=>r[d](i)).join(", ")})`}function $1(s){const r=[Br(0),la,la,Br(2)];return`hsla(${Dr(s,"int").getComponents("hsl").map((i,d)=>r[d](i)).join(", ")})`}function cf(s,r){const n=Br(r==="float"?2:0),t=["r","g","b"],i=Dr(s,r);return`{${xn(i.getComponents("rgb")).map((o,c)=>`${t[c]}: ${n(o)}`).join(", ")}}`}function K1(s){return r=>cf(r,s)}function df(s,r){const n=Br(2),t=Br(r==="float"?2:0),i=["r","g","b","a"];return`{${Dr(s,r).getComponents("rgb").map((c,a)=>{const l=a===3?n:t;return`${i[a]}: ${l(c)}`}).join(", ")}}`}function Z1(s){return r=>df(r,s)}const Q1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Pu},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ku},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:uf},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Ki},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Y1},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:$1},...["int","float"].reduce((s,r)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"object",type:r},stringifier:K1(r)},{format:{alpha:!0,mode:"rgb",notation:"object",type:r},stringifier:Z1(r)}],[])];function hf(s){return Q1.reduce((r,n)=>r||(R1(n.format,s)?n.stringifier:null),null)}const Do=St("apl");class J1{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(Do()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("div");t.classList.add(Do("b")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(Do("c")),t.appendChild(i),this.colorElem_=i;const d=r.createElement("div");d.classList.add(Do("m")),this.element.appendChild(d),this.markerElem_=d;const o=r.createElement("div");o.classList.add(Do("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const r=this.value.rawValue,n=r.getComponents("rgb"),t=new Tt([n[0],n[1],n[2],0],"rgb"),i=new Tt([n[0],n[1],n[2],255],"rgb"),d=["to right",Ki(t),Ki(i)];this.colorElem_.style.background=`linear-gradient(${d.join(",")})`,this.previewElem_.style.backgroundColor=Ki(r);const o=Ot(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class e_{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new J1(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new As(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=r.point.x/r.bounds.width,i=this.value.rawValue,[d,o,c]=i.getComponents("hsv");this.value.setRawValue(new Tt([d,o,c,t],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=Nr(Ss(!0),Rn(r));if(n===0)return;const t=this.value.rawValue,[i,d,o,c]=t.getComponents("hsv");this.value.setRawValue(new Tt([i,d,o,c+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){Nr(Ss(!0),Rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Us=St("coltxt");function t_(s){const r=s.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return r.appendChild(n.reduce((t,i)=>{const d=s.createElement("option");return d.textContent=i.text,d.value=i.value,t.appendChild(d),t},s.createDocumentFragment())),r}class r_{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Us()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(Us("m")),this.modeElem_=t_(r),this.modeElem_.classList.add(Us("ms")),t.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=r.createElement("div");i.classList.add(Us("mm")),i.appendChild(Sa(r,"dropdown")),t.appendChild(i),this.element.appendChild(t);const d=r.createElement("div");d.classList.add(Us("w")),this.element.appendChild(d),this.inputsElem_=d,this.inputViews_=n.inputViews,this.applyInputViews_(),An(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(r){this.inputViews_=r,this.applyInputViews_()}applyInputViews_(){Lp(this.inputsElem_);const r=this.element.ownerDocument;this.inputViews_.forEach(n=>{const t=r.createElement("div");t.classList.add(Us("c")),t.appendChild(n.element),this.inputsElem_.appendChild(t)})}}function n_(s){return Br(s==="float"?2:0)}function s_(s,r,n){const t=no(s,r)[n];return new mi({min:0,max:t})}function o_(s,r,n){return new wi(s,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:r.parser,props:gt.fromObject({formatter:n_(r.colorType),keyScale:Ss(!1),pointerScale:r.colorType==="float"?.01:1}),value:Qt(0,{constraint:s_(r.colorMode,r.colorType,n)}),viewProps:r.viewProps})}function i_(s,r){const n={colorMode:r.colorMode,colorType:r.colorType,parser:On,viewProps:r.viewProps};return[0,1,2].map(t=>{const i=o_(s,n,t);return go({primary:r.value,secondary:i.value,forward(d){return Dr(d,r.colorType).getComponents(r.colorMode)[t]},backward(d,o){const c=r.colorMode,l=Dr(d,r.colorType).getComponents(c);l[t]=o;const b=Su(ka(xn(l),l[3]),c,r.colorType);return Dr(b,"int")}}),i})}function a_(s,r){const n=new Jo(s,{parser:ji("int"),props:gt.fromObject({formatter:Pu}),value:Qt(Tt.black()),viewProps:r.viewProps});return go({primary:r.value,secondary:n.value,forward:t=>new Tt(xn(t.getComponents()),t.mode),backward:(t,i)=>new Tt(ka(xn(i.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}function l_(s){return s!=="hex"}class u_{constructor(r,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Qt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(r),this.view=new r_(r,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(r){const n=this.colorMode.rawValue;return l_(n)?i_(r,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):a_(r,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(r){const n=r.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}}const tl=St("hpl");class c_{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(tl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("div");t.classList.add(tl("c")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(tl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const r=this.value.rawValue,[n]=r.getComponents("hsv");this.markerElem_.style.backgroundColor=uf(new Tt([n,100,100],"hsv"));const t=Ot(n,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}}class d_{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new c_(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new As(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=Ot(mr(r.point.x,0,r.bounds.width),0,r.bounds.width,0,360),i=this.value.rawValue,[,d,o,c]=i.getComponents("hsv");this.value.setRawValue(new Tt([t,d,o,c],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){const n=Nr(Ss(!1),Rn(r));if(n===0)return;const t=this.value.rawValue,[i,d,o,c]=t.getComponents("hsv");this.value.setRawValue(new Tt([i+n,d,o,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){Nr(Ss(!1),Rn(r))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const rl=St("svp"),wd=64;class h_{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=r.createElement("div"),this.element.classList.add(rl()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("canvas");t.height=wd,t.width=wd,t.classList.add(rl("c")),this.element.appendChild(t),this.canvasElement=t;const i=r.createElement("div");i.classList.add(rl("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const r=db(this.canvasElement);if(!r)return;const t=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,d=this.canvasElement.height,o=r.getImageData(0,0,i,d),c=o.data;for(let b=0;b<d;b++)for(let g=0;g<i;g++){const u=Ot(g,0,i,0,100),h=Ot(b,0,d,100,0),p=Yp(t[0],u,h),m=(b*i+g)*4;c[m]=p[0],c[m+1]=p[1],c[m+2]=p[2],c[m+3]=255}r.putImageData(o,0,0);const a=Ot(t[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const l=Ot(t[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class p_{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new h_(r,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new As(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=Ot(r.point.x,0,r.bounds.width,0,100),i=Ot(r.point.y,0,r.bounds.height,100,0),[d,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Tt([d,t,i,o],"hsv"),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onKeyDown_(r){qp(r.key)&&r.preventDefault();const[n,t,i,d]=this.value.rawValue.getComponents("hsv"),o=Ss(!1),c=Nr(o,Rn(r)),a=Nr(o,ei(r));c===0&&a===0||this.value.setRawValue(new Tt([n,t+c,i+a,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(r){const n=Ss(!1),t=Nr(n,Rn(r)),i=Nr(n,ei(r));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class f_{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new d_(r,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new p_(r,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new e_(r,{value:this.value,viewProps:this.viewProps}),text:new wi(r,{parser:On,props:gt.fromObject({pointerScale:.01,keyScale:.1,formatter:Br(2)}),value:Qt(0,{constraint:new mi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&go({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,i)=>{const d=t.getComponents();return d[3]=i,new Tt(d,t.mode)}}),this.textsC_=new u_(r,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new P1(r,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const nl=St("colsw");class m_{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=r.createElement("div"),this.element.classList.add(nl()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(nl("sw")),this.element.appendChild(t),this.swatchElem_=t;const i=r.createElement("button");i.classList.add(nl("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const r=this.value.rawValue;this.swatchElem_.style.backgroundColor=ku(r)}onValueChange_(){this.update_()}}class y_{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new m_(r,{value:this.value,viewProps:this.viewProps})}}class Tu{constructor(r,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=gi.create(n.expanded),this.swatchC_=new y_(r,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new Jo(r,{parser:n.parser,props:gt.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new b1(r,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Up(r,{viewProps:this.viewProps}):null;const i=new f_(r,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(d=>{d.addEventListener("blur",this.onPopupChildBlur_),d.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),go({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:d=>d,backward:(d,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_u(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(r){if(!this.popC_)return;const n=this.view.element,t=r.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=Ap(r);t&&n.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!fu(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_?r.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&r.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function g_(s){return xn(s.getComponents("rgb")).reduce((r,n)=>r<<8|Math.floor(n)&255,0)}function v_(s){return s.getComponents("rgb").reduce((r,n,t)=>{const i=Math.floor(t===3?n*255:n)&255;return r<<8|i},0)>>>0}function b_(s){return new Tt([s>>16&255,s>>8&255,s&255],"rgb")}function __(s){return new Tt([s>>24&255,s>>16&255,s>>8&255,Ot(s&255,0,255,0,1)],"rgb")}function w_(s){return typeof s!="number"?Tt.black():b_(s)}function x_(s){return typeof s!="number"?Tt.black():__(s)}function Zi(s,r){return typeof s!="object"||Ht(s)?!1:r in s&&typeof s[r]=="number"}function pf(s){return Zi(s,"r")&&Zi(s,"g")&&Zi(s,"b")}function ff(s){return pf(s)&&Zi(s,"a")}function mf(s){return pf(s)}function Mu(s,r){if(s.mode!==r.mode||s.type!==r.type)return!1;const n=s.getComponents(),t=r.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}function xd(s){return"a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b]}function j_(s){const r=hf(s);return r?(n,t)=>{xi(n,r(t))}:null}function C_(s){const r=s?v_:g_;return(n,t)=>{xi(n,r(t))}}function E_(s,r,n){const i=Dr(r,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b),s.writeProperty("a",i.a)}function S_(s,r,n){const i=Dr(r,n).toRgbaObject();s.writeProperty("r",i.r),s.writeProperty("g",i.g),s.writeProperty("b",i.b)}function P_(s,r){return(n,t)=>{s?E_(n,t,r):S_(n,t,r)}}function k_(s){var r;return!!(!((r=s==null?void 0:s.color)===null||r===void 0)&&r.alpha)}function T_(s){return s?r=>ku(r,"0x"):r=>Pu(r,"0x")}function M_(s){return"color"in s||s.view==="color"}const L_=Fr({id:"input-color-number",type:"input",accept:(s,r)=>{if(typeof s!="number"||!M_(r))return null;const n=Cu(r);return n?{initialValue:s,params:Object.assign(Object.assign({},n),{supportsAlpha:k_(r)})}:null},binding:{reader:s=>s.params.supportsAlpha?x_:w_,equals:Mu,writer:s=>C_(s.params.supportsAlpha)},controller:s=>{var r,n;return new Tu(s.document,{colorType:"int",expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:T_(s.params.supportsAlpha),parser:ji("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.supportsAlpha,value:s.value,viewProps:s.viewProps})}});function A_(s,r){if(!mf(s))return Dr(Tt.black(),r);if(r==="int"){const n=xd(s);return new Tt(n,"rgb")}if(r==="float"){const n=xd(s);return new Eu(n,"rgb")}return Dr(Tt.black(),"int")}function O_(s){return ff(s)}function R_(s){return r=>{const n=A_(r,s);return Dr(n,"int")}}function D_(s,r){return n=>s?df(n,r):cf(n,r)}const I_=Fr({id:"input-color-object",type:"input",accept:(s,r)=>{var n;if(!mf(s))return null;const t=Cu(r);return t?{initialValue:s,params:Object.assign(Object.assign({},t),{colorType:(n=Zp(r))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:s=>R_(s.params.colorType),equals:Mu,writer:s=>P_(O_(s.initialValue),s.params.colorType)},controller:s=>{var r,n;const t=ff(s.initialValue);return new Tu(s.document,{colorType:s.params.colorType,expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:D_(t,s.params.colorType),parser:ji("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t,value:s.value,viewProps:s.viewProps})}}),F_=Fr({id:"input-color-string",type:"input",accept:(s,r)=>{if(typeof s!="string"||r.view==="text")return null;const n=W1(s,Zp(r));if(!n)return null;const t=hf(n);if(!t)return null;const i=Cu(r);return i?{initialValue:s,params:Object.assign(Object.assign({},i),{format:n,stringifier:t})}:null},binding:{reader:()=>X1,equals:Mu,writer:s=>{const r=j_(s.params.format);if(!r)throw nr.notBindable();return r}},controller:s=>{var r,n;return new Tu(s.document,{colorType:s.params.format.type,expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,formatter:s.params.stringifier,parser:ji("int"),pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s.params.format.alpha,value:s.value,viewProps:s.viewProps})}});class Lu{constructor(r){this.components=r.components,this.asm_=r.assembly}constrain(r){const n=this.asm_.toComponents(r).map((t,i)=>{var d,o;return(o=(d=this.components[i])===null||d===void 0?void 0:d.constrain(t))!==null&&o!==void 0?o:t});return this.asm_.fromComponents(n)}}const jd=St("pndtxt");class N_{constructor(r,n){this.textViews=n.textViews,this.element=r.createElement("div"),this.element.classList.add(jd()),this.textViews.forEach(t=>{const i=r.createElement("div");i.classList.add(jd("a")),i.appendChild(t.element),this.element.appendChild(i)})}}function V_(s,r,n){return new wi(s,{arrayPosition:n===0?"fst":n===r.axes.length-1?"lst":"mid",parser:r.parser,props:r.axes[n].textProps,value:Qt(0,{constraint:r.axes[n].constraint}),viewProps:r.viewProps})}class Au{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((t,i)=>V_(r,n,i)),this.acs_.forEach((t,i)=>{go({primary:this.value,secondary:t.value,forward:d=>n.assembly.toComponents(d)[i],backward:(d,o)=>{const c=n.assembly.toComponents(d);return c[i]=o,n.assembly.fromComponents(c)}})}),this.view=new N_(r,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}}class B_ extends Qo{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(r){this.controller.valueController.sliderController.props.set("max",r)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(r){this.controller.valueController.sliderController.props.set("min",r)}}function U_(s,r){const n=[],t=Ep(s,r);t&&n.push(t);const i=Sp(s);i&&n.push(i);const d=ju(s.options);return d&&n.push(d),new vi(n)}const G_=Fr({id:"input-number",type:"input",accept:(s,r)=>{if(typeof s!="number")return null;const n=er(r,t=>Object.assign(Object.assign({},kp(t)),{options:t.optional.custom(_i),readonly:t.optional.constant(!1)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>wp,constraint:s=>U_(s.params,s.initialValue),writer:s=>xi},controller:s=>{const r=s.value,n=s.constraint,t=n&&aa(n,bi);if(t)return new ts(s.document,{props:new gt({options:t.values.value("options")}),value:r,viewProps:s.viewProps});const i=Pp(s.params,r.rawValue),d=n&&aa(n,mi);return d?new ua(s.document,Object.assign(Object.assign({},Hp(Object.assign(Object.assign({},i),{keyScale:Qt(i.keyScale),max:d.values.value("max"),min:d.values.value("min")}))),{parser:On,value:r,viewProps:s.viewProps})):new wi(s.document,{parser:On,props:gt.fromObject(i),value:r,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="number"?null:s.controller.valueController instanceof ua?new B_(s.controller):s.controller.valueController instanceof ts?new wu(s.controller):null}});class Kn{constructor(r=0,n=0){this.x=r,this.y=n}getComponents(){return[this.x,this.y]}static isObject(r){if(Ht(r))return!1;const n=r.x,t=r.y;return!(typeof n!="number"||typeof t!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y}toObject(){return{x:this.x,y:this.y}}}const yf={toComponents:s=>s.getComponents(),fromComponents:s=>new Kn(...s)},Gs=St("p2d");class z_{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Gs()),n.viewProps.bindClassModifiers(this.element),An(n.expanded,fo(this.element,Gs(void 0,"expanded")));const t=r.createElement("div");t.classList.add(Gs("h")),this.element.appendChild(t);const i=r.createElement("button");i.classList.add(Gs("b")),i.appendChild(Sa(r,"p2dpad")),n.viewProps.bindDisabled(i),t.appendChild(i),this.buttonElement=i;const d=r.createElement("div");if(d.classList.add(Gs("t")),t.appendChild(d),this.textElement=d,n.pickerLayout==="inline"){const o=r.createElement("div");o.classList.add(Gs("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const qn=St("p2dp");class q_{constructor(r,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=r.createElement("div"),this.element.classList.add(qn()),n.layout==="popup"&&this.element.classList.add(qn(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(qn("p")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const i=r.createElementNS(vn,"svg");i.classList.add(qn("g")),this.padElement.appendChild(i),this.svgElem_=i;const d=r.createElementNS(vn,"line");d.classList.add(qn("ax")),d.setAttributeNS(null,"x1","0"),d.setAttributeNS(null,"y1","50%"),d.setAttributeNS(null,"x2","100%"),d.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(d);const o=r.createElementNS(vn,"line");o.classList.add(qn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const c=r.createElementNS(vn,"line");c.classList.add(qn("l")),c.setAttributeNS(null,"x1","50%"),c.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(c),this.lineElem_=c;const a=r.createElement("div");a.classList.add(qn("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[r,n]=this.value.rawValue.getComponents(),t=this.props_.get("max"),i=Ot(r,-t,+t,0,100),d=Ot(n,-t,+t,0,100),o=this.props_.get("invertsY")?100-d:d;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Cd(s,r,n){return[Nr(r[0],Rn(s)),Nr(r[1],ei(s))*(n?1:-1)]}class H_{constructor(r,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new q_(r,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new As(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(r,n){if(!r.point)return;const t=this.props.get("max"),i=Ot(r.point.x,0,r.bounds.width,-t,+t),d=Ot(this.props.get("invertsY")?r.bounds.height-r.point.y:r.point.y,0,r.bounds.height,-t,+t);this.value.setRawValue(new Kn(i,d),n)}onPointerDown_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerMove_(r){this.handlePointerEvent_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.handlePointerEvent_(r.data,{forceEmit:!0,last:!0})}onPadKeyDown_(r){qp(r.key)&&r.preventDefault();const[n,t]=Cd(r,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(new Kn(this.value.rawValue.x+n,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(r){const[n,t]=Cd(r,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class W_{constructor(r,n){var t,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=gi.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Up(r,{viewProps:this.viewProps}):null;const d=new H_(r,{layout:n.pickerLayout,props:new gt({invertsY:Qt(n.invertsY),max:Qt(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});d.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=d,this.textC_=new Au(r,{assembly:yf,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new z_(r,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),go({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,c)=>c})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_u(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(r){if(!this.popC_)return;const n=this.view.element,t=r.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=Ap(r);t&&n.contains(t)||t&&t===this.view.buttonElement&&!fu(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_?r.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&r.key==="Escape"&&this.view.buttonElement.focus()}}function X_(s){return Kn.isObject(s)?new Kn(s.x,s.y):new Kn}function Y_(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y)}function $_(s,r){return new Lu({assembly:yf,components:[Tn(Object.assign(Object.assign({},s),s.x),r.x),Tn(Object.assign(Object.assign({},s),s.y),r.y)]})}function Ed(s,r){var n,t;if(!Ht(s.min)||!Ht(s.max))return Math.max(Math.abs((n=s.min)!==null&&n!==void 0?n:0),Math.abs((t=s.max)!==null&&t!==void 0?t:0));const i=jp(s);return Math.max(Math.abs(i)*10,Math.abs(r)*10)}function K_(s,r){var n,t;const i=Ed(Cs(s,(n=s.x)!==null&&n!==void 0?n:{}),r.x),d=Ed(Cs(s,(t=s.y)!==null&&t!==void 0?t:{}),r.y);return Math.max(i,d)}function Z_(s){if(!("y"in s))return!1;const r=s.y;return r&&"inverted"in r?!!r.inverted:!1}const Q_=Fr({id:"input-point2d",type:"input",accept:(s,r)=>{if(!Kn.isObject(s))return null;const n=er(r,t=>Object.assign(Object.assign({},ti(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Xp),readonly:t.optional.constant(!1),x:t.optional.custom($n),y:t.optional.object(Object.assign(Object.assign({},ti(t)),{inverted:t.optional.boolean}))}));return n?{initialValue:s,params:n}:null},binding:{reader:()=>X_,constraint:s=>$_(s.params,s.initialValue),equals:Kn.equals,writer:()=>Y_},controller:s=>{var r,n;const t=s.document,i=s.value,d=s.constraint,o=[s.params.x,s.params.y];return new W_(t,{axes:i.rawValue.getComponents().map((c,a)=>{var l;return pu({constraint:d.components[a],initialValue:c,params:Cs(s.params,(l=o[a])!==null&&l!==void 0?l:{})})}),expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,invertsY:Z_(s.params),max:K_(s.params,i.rawValue),parser:On,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps})}});class Qs{constructor(r=0,n=0,t=0){this.x=r,this.y=n,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(r){if(Ht(r))return!1;const n=r.x,t=r.y,i=r.z;return!(typeof n!="number"||typeof t!="number"||typeof i!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y&&r.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const gf={toComponents:s=>s.getComponents(),fromComponents:s=>new Qs(...s)};function J_(s){return Qs.isObject(s)?new Qs(s.x,s.y,s.z):new Qs}function ew(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y),s.writeProperty("z",r.z)}function tw(s,r){return new Lu({assembly:gf,components:[Tn(Object.assign(Object.assign({},s),s.x),r.x),Tn(Object.assign(Object.assign({},s),s.y),r.y),Tn(Object.assign(Object.assign({},s),s.z),r.z)]})}const rw=Fr({id:"input-point3d",type:"input",accept:(s,r)=>{if(!Qs.isObject(s))return null;const n=er(r,t=>Object.assign(Object.assign({},ti(t)),{readonly:t.optional.constant(!1),x:t.optional.custom($n),y:t.optional.custom($n),z:t.optional.custom($n)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>J_,constraint:s=>tw(s.params,s.initialValue),equals:Qs.equals,writer:s=>ew},controller:s=>{const r=s.value,n=s.constraint,t=[s.params.x,s.params.y,s.params.z];return new Au(s.document,{assembly:gf,axes:r.rawValue.getComponents().map((i,d)=>{var o;return pu({constraint:n.components[d],initialValue:i,params:Cs(s.params,(o=t[d])!==null&&o!==void 0?o:{})})}),parser:On,value:r,viewProps:s.viewProps})}});class Js{constructor(r=0,n=0,t=0,i=0){this.x=r,this.y=n,this.z=t,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(r){if(Ht(r))return!1;const n=r.x,t=r.y,i=r.z,d=r.w;return!(typeof n!="number"||typeof t!="number"||typeof i!="number"||typeof d!="number")}static equals(r,n){return r.x===n.x&&r.y===n.y&&r.z===n.z&&r.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const vf={toComponents:s=>s.getComponents(),fromComponents:s=>new Js(...s)};function nw(s){return Js.isObject(s)?new Js(s.x,s.y,s.z,s.w):new Js}function sw(s,r){s.writeProperty("x",r.x),s.writeProperty("y",r.y),s.writeProperty("z",r.z),s.writeProperty("w",r.w)}function ow(s,r){return new Lu({assembly:vf,components:[Tn(Object.assign(Object.assign({},s),s.x),r.x),Tn(Object.assign(Object.assign({},s),s.y),r.y),Tn(Object.assign(Object.assign({},s),s.z),r.z),Tn(Object.assign(Object.assign({},s),s.w),r.w)]})}const iw=Fr({id:"input-point4d",type:"input",accept:(s,r)=>{if(!Js.isObject(s))return null;const n=er(r,t=>Object.assign(Object.assign({},ti(t)),{readonly:t.optional.constant(!1),w:t.optional.custom($n),x:t.optional.custom($n),y:t.optional.custom($n),z:t.optional.custom($n)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>nw,constraint:s=>ow(s.params,s.initialValue),equals:Js.equals,writer:s=>sw},controller:s=>{const r=s.value,n=s.constraint,t=[s.params.x,s.params.y,s.params.z,s.params.w];return new Au(s.document,{assembly:vf,axes:r.rawValue.getComponents().map((i,d)=>{var o;return pu({constraint:n.components[d],initialValue:i,params:Cs(s.params,(o=t[d])!==null&&o!==void 0?o:{})})}),parser:On,value:r,viewProps:s.viewProps})}});function aw(s){const r=[],n=ju(s.options);return n&&r.push(n),new vi(r)}const lw=Fr({id:"input-string",type:"input",accept:(s,r)=>{if(typeof s!="string")return null;const n=er(r,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(_i)}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>zp,constraint:s=>aw(s.params),writer:s=>xi},controller:s=>{const r=s.document,n=s.value,t=s.constraint,i=t&&aa(t,bi);return i?new ts(r,{props:new gt({options:i.values.value("options")}),value:n,viewProps:s.viewProps}):new Jo(r,{parser:d=>d,props:gt.fromObject({formatter:Ml}),value:n,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="string"?null:s.controller.valueController instanceof ts?new wu(s.controller):null}}),Ci={monitor:{defaultInterval:200,defaultRows:3}},Sd=St("mll");class uw{constructor(r,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=r.createElement("div"),this.element.classList.add(Sd()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("textarea");t.classList.add(Sd("i")),t.style.height=`calc(var(${Wp("containerUnitSize")}) * ${n.rows})`,t.readOnly=!0,n.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const r=this.textareaElem_,n=r.scrollTop===r.scrollHeight-r.clientHeight,t=[];this.value.rawValue.forEach(i=>{i!==void 0&&t.push(this.formatter_(i))}),r.textContent=t.join(`
`),n&&(r.scrollTop=r.scrollHeight)}onValueUpdate_(){this.update_()}}class Ou{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new uw(r,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Pd=St("sgl");class cw{constructor(r,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=r.createElement("div"),this.element.classList.add(Pd()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("input");t.classList.add(Pd("i")),t.readOnly=!0,t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const r=this.value.rawValue,n=r[r.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class Ru{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new cw(r,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}const dw=Fr({id:"monitor-bool",type:"monitor",accept:(s,r)=>{if(typeof s!="boolean")return null;const n=er(r,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>Gp},controller:s=>{var r;return s.value.rawValue.length===1?new Ru(s.document,{formatter:bd,value:s.value,viewProps:s.viewProps}):new Ou(s.document,{formatter:bd,rows:(r=s.params.rows)!==null&&r!==void 0?r:Ci.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}});class hw extends Qo{get max(){return this.controller.valueController.props.get("max")}set max(r){this.controller.valueController.props.set("max",r)}get min(){return this.controller.valueController.props.get("min")}set min(r){this.controller.valueController.props.set("min",r)}}const Hn=St("grl");class pw{constructor(r,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=r.createElement("div"),this.element.classList.add(Hn()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=r.createElementNS(vn,"svg");t.classList.add(Hn("g")),t.style.height=`calc(var(${Wp("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(t),this.svgElem_=t;const i=r.createElementNS(vn,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const d=r.createElement("div");d.classList.add(Hn("t"),St("tt")()),this.element.appendChild(d),this.tooltipElem_=d,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:r,clientHeight:n}=this.element,t=this.value.rawValue.length-1,i=this.props_.get("min"),d=this.props_.get("max"),o=[];this.value.rawValue.forEach((g,u)=>{if(g===void 0)return;const h=Ot(u,0,t,0,r),p=Ot(g,i,d,n,0);o.push([h,p].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const c=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){c.classList.remove(Hn("t","a"));return}const l=Ot(this.cursor_.rawValue,0,t,0,r),b=Ot(a,i,d,n,0);c.style.left=`${l}px`,c.style.top=`${b}px`,c.textContent=`${this.formatter_(a)}`,c.classList.contains(Hn("t","a"))||(c.classList.add(Hn("t","a"),Hn("t","in")),ia(c),c.classList.remove(Hn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class bf{constructor(r,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Qt(-1),this.view=new pw(r,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!fu(r))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new As(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(r){return Xr(r,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Yr(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(r){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(Ot(r.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(r){this.onGraphPointerMove_(r)}onGraphPointerMove_(r){if(!r.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ot(r.data.point.x,0,r.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Ll(s){return Ht(s.format)?Br(2):s.format}function fw(s){var r;return s.value.rawValue.length===1?new Ru(s.document,{formatter:Ll(s.params),value:s.value,viewProps:s.viewProps}):new Ou(s.document,{formatter:Ll(s.params),rows:(r=s.params.rows)!==null&&r!==void 0?r:Ci.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}function mw(s){var r,n,t;return new bf(s.document,{formatter:Ll(s.params),rows:(r=s.params.rows)!==null&&r!==void 0?r:Ci.monitor.defaultRows,props:gt.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:100,min:(t=s.params.min)!==null&&t!==void 0?t:0}),value:s.value,viewProps:s.viewProps})}function kd(s){return s.view==="graph"}const yw=Fr({id:"monitor-number",type:"monitor",accept:(s,r)=>{if(typeof s!="number")return null;const n=er(r,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>kd(s)?64:1,reader:s=>wp},controller:s=>kd(s.params)?mw(s):fw(s),api:s=>s.controller.valueController instanceof bf?new hw(s.controller):null}),gw=Fr({id:"monitor-string",type:"monitor",accept:(s,r)=>{if(typeof s!="string")return null;const n=er(r,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>zp},controller:s=>{var r;const n=s.value;return n.rawValue.length>1||s.params.multiline?new Ou(s.document,{formatter:Ml,rows:(r=s.params.rows)!==null&&r!==void 0?r:Ci.monitor.defaultRows,value:n,viewProps:s.viewProps}):new Ru(s.document,{formatter:Ml,value:n,viewProps:s.viewProps})}});class vw{constructor(){this.map_=new Map}get(r){var n;return(n=this.map_.get(r))!==null&&n!==void 0?n:null}has(r){return this.map_.has(r)}add(r,n){return this.map_.set(r,n),r.viewProps.handleDispose(()=>{this.map_.delete(r)}),n}}class bw{constructor(r){this.target=r.target,this.reader_=r.reader,this.writer_=r.writer}read(){return this.reader_(this.target.read())}write(r){this.writer_(this.target,r)}inject(r){this.write(this.reader_(r))}}function _w(s,r){var n;const t=s.accept(r.target.read(),r.params);if(Ht(t))return null;const i={target:r.target,initialValue:t.initialValue,params:t.params},d=er(r.params,g=>({disabled:g.optional.boolean,hidden:g.optional.boolean,label:g.optional.string,tag:g.optional.string})),o=s.binding.reader(i),c=s.binding.constraint?s.binding.constraint(i):void 0,a=new bw({reader:o,target:r.target,writer:s.binding.writer(i)}),l=new nb(Qt(o(t.initialValue),{constraint:c,equals:s.binding.equals}),a),b=s.controller({constraint:c,document:r.document,initialValue:t.initialValue,params:t.params,value:l,viewProps:In.create({disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden})});return new vb(r.document,{blade:yo(),props:gt.fromObject({label:"label"in r.params?(n=d==null?void 0:d.label)!==null&&n!==void 0?n:null:r.target.key}),tag:d==null?void 0:d.tag,value:l,valueController:b})}class ww{constructor(r){this.target=r.target,this.reader_=r.reader}read(){return this.reader_(this.target.read())}}function xw(s,r){return r===0?new e1:new t1(s,r??Ci.monitor.defaultInterval)}function jw(s,r){var n,t,i;const d=s.accept(r.target.read(),r.params);if(Ht(d))return null;const o={target:r.target,initialValue:d.initialValue,params:d.params},c=er(r.params,u=>({bufferSize:u.optional.number,disabled:u.optional.boolean,hidden:u.optional.boolean,interval:u.optional.number,label:u.optional.string})),a=s.binding.reader(o),l=(t=(n=c==null?void 0:c.bufferSize)!==null&&n!==void 0?n:s.binding.defaultBufferSize&&s.binding.defaultBufferSize(d.params))!==null&&t!==void 0?t:1,b=new jb({binding:new ww({reader:a,target:r.target}),bufferSize:l,ticker:xw(r.document,c==null?void 0:c.interval)}),g=s.controller({document:r.document,params:d.params,value:b,viewProps:In.create({disabled:c==null?void 0:c.disabled,hidden:c==null?void 0:c.hidden})});return g.viewProps.bindDisabled(b.ticker),g.viewProps.handleDispose(()=>{b.ticker.dispose()}),new Eb(r.document,{blade:yo(),props:gt.fromObject({label:"label"in r.params?(i=c==null?void 0:c.label)!==null&&i!==void 0?i:null:r.target.key}),value:b,valueController:g})}class Cw{constructor(r){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=r}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(r,n){if(!f1(n.core))throw nr.notCompatible(r,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(r,n,t){return this.pluginsMap_.inputs.reduce((i,d)=>i??_w(d,{document:r,target:n,params:t}),null)}createMonitor_(r,n,t){return this.pluginsMap_.monitors.reduce((i,d)=>i??jw(d,{document:r,params:t,target:n}),null)}createBinding(r,n,t){const i=n.read();if(Ht(i))throw new nr({context:{key:n.key},type:"nomatchingcontroller"});const d=this.createInput_(r,n,t);if(d)return d;const o=this.createMonitor_(r,n,t);if(o)return o;throw new nr({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(r,n){const t=this.pluginsMap_.blades.reduce((i,d)=>i??Jb(d,{document:r,params:n}),null);if(!t)throw new nr({type:"nomatchingview",context:{params:n}});return t}createInputBindingApi_(r){const n=this.pluginsMap_.inputs.reduce((t,i)=>{var d,o;return t||((o=(d=i.api)===null||d===void 0?void 0:d.call(i,{controller:r}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(r,n??new Qo(r))}createMonitorBindingApi_(r){const n=this.pluginsMap_.monitors.reduce((t,i)=>{var d,o;return t||((o=(d=i.api)===null||d===void 0?void 0:d.call(i,{controller:r}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(r,n??new Qo(r))}createBindingApi(r){if(this.apiCache_.has(r))return this.apiCache_.get(r);if(bb(r))return this.createInputBindingApi_(r);if(Sb(r))return this.createMonitorBindingApi_(r);throw nr.shouldNeverHappen()}createApi(r){if(this.apiCache_.has(r))return this.apiCache_.get(r);if(gb(r))return this.createBindingApi(r);const n=this.pluginsMap_.blades.reduce((t,i)=>t??i.api({controller:r,pool:this}),null);if(!n)throw nr.shouldNeverHappen();return this.apiCache_.add(r,n)}}const Ew=new vw;function Sw(){const s=new Cw(Ew);return[Q_,rw,iw,lw,G_,F_,I_,L_,v1,dw,gw,yw,Lb,qb,Bp].forEach(r=>{s.register("core",r)}),s}class Pw extends Ls{constructor(r){super(r),this.emitter_=new dr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new yi(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get options(){return this.controller.valueController.props.get("options")}set options(r){this.controller.valueController.props.set("options",r)}get value(){return this.controller.value.rawValue}set value(r){this.controller.value.rawValue=r}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}}class kw extends Ls{}class Tw extends Ls{constructor(r){super(r),this.emitter_=new dr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new yi(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(r){this.controller.valueController.sliderController.props.set("max",r)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(r){this.controller.valueController.sliderController.props.set("min",r)}get value(){return this.controller.value.rawValue}set value(r){this.controller.value.rawValue=r}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}}class Mw extends Ls{constructor(r){super(r),this.emitter_=new dr,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new yi(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(r){this.controller.valueController.props.set("formatter",r)}get value(){return this.controller.value.rawValue}set value(r){this.controller.value.rawValue=r}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i)},{key:n}),this}off(r,n){return this.emitter_.off(r,n),this}}const Lw=function(){return{id:"list",type:"blade",core:mo,accept(s){const r=er(s,n=>({options:n.required.custom(_i),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return r?{params:r}:null},controller(s){const r=new bi(xu(s.params.options)),n=Qt(s.params.value,{constraint:r}),t=new ts(s.document,{props:new gt({options:r.values.value("options")}),value:n,viewProps:s.viewProps});return new Es(s.document,{blade:s.blade,props:gt.fromObject({label:s.params.label}),value:n,valueController:t})},api(s){return!(s.controller instanceof Es)||!(s.controller.valueController instanceof ts)?null:new Pw(s.controller)}}}();class Aw extends Np{constructor(r,n){super(r,n)}get element(){return this.controller.view.element}}class Ow extends kl{constructor(r,n){super(r,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Td=St("spr");class Rw{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Td()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("hr");t.classList.add(Td("r")),this.element.appendChild(t)}}class Md extends Pa{constructor(r,n){super(Object.assign(Object.assign({},n),{view:new Rw(r,{viewProps:n.viewProps})}))}}const Dw={id:"separator",type:"blade",core:mo,accept(s){const r=er(s,n=>({view:n.required.constant("separator")}));return r?{params:r}:null},controller(s){return new Md(s.document,{blade:s.blade,viewProps:s.viewProps})},api(s){return s.controller instanceof Md?new kw(s.controller):null}},Iw={id:"slider",type:"blade",core:mo,accept(s){const r=er(s,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return r?{params:r}:null},controller(s){var r,n;const t=(r=s.params.value)!==null&&r!==void 0?r:0,i=new mi({max:s.params.max,min:s.params.min}),d=Qt(t,{constraint:i}),o=new ua(s.document,Object.assign(Object.assign({},Hp({formatter:(n=s.params.format)!==null&&n!==void 0?n:Q0,keyScale:Qt(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:Cp(s.params,t)})),{parser:On,value:d,viewProps:s.viewProps}));return new Es(s.document,{blade:s.blade,props:gt.fromObject({label:s.params.label}),value:d,valueController:o})},api(s){return!(s.controller instanceof Es)||!(s.controller.valueController instanceof ua)?null:new Tw(s.controller)}},Fw=function(){return{id:"text",type:"blade",core:mo,accept(s){const r=er(s,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return r?{params:r}:null},controller(s){var r;const n=Qt(s.params.value),t=new Jo(s.document,{parser:s.params.parse,props:gt.fromObject({formatter:(r=s.params.format)!==null&&r!==void 0?r:i=>String(i)}),value:n,viewProps:s.viewProps});return new Es(s.document,{blade:s.blade,props:gt.fromObject({label:s.params.label}),value:n,valueController:t})},api(s){return!(s.controller instanceof Es)||!(s.controller.valueController instanceof Jo)?null:new Mw(s.controller)}}}();function Nw(s){const r=s.createElement("div");return r.classList.add(St("dfw")()),s.body&&s.body.appendChild(r),r}function Vw(s,r,n){if(s.querySelector(`style[data-tp-style=${r}]`))return;const t=s.createElement("style");t.dataset.tpStyle=r,t.textContent=n,s.head.appendChild(t)}let Bw=class extends Aw{constructor(r){var n,t;const i=r??{},d=(n=i.document)!==null&&n!==void 0?n:cb(),o=Sw(),c=new Ow(d,{expanded:i.expanded,blade:yo(),props:gt.fromObject({title:i.title}),viewProps:In.create()});super(c,o),this.pool_=o,this.containerElem_=(t=i.container)!==null&&t!==void 0?t:Nw(d),this.containerElem_.appendChild(this.element),this.doc_=d,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw nr.alreadyDisposed();return this.doc_}dispose(){const r=this.containerElem_;if(!r)throw nr.alreadyDisposed();if(this.usesDefaultWrapper_){const n=r.parentElement;n&&n.removeChild(r)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(r){r.css&&Vw(this.document,`plugin-${r.id}`,r.css),("plugin"in r?[r.plugin]:"plugins"in r?r.plugins:[]).forEach(t=>{this.pool_.register(r.id,t)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Lw,Dw,Iw,Bp,Fw]})}};new Fp("4.0.3");function Uw(s){let r,n;return r=new po({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:s[2]}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&4&&(d.theme=t[2]),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function Gw(s){return{c:fr,m:fr,p:fr,i:fr,o:fr,d:fr}}function zw(s){let r,n,t,i;const d=[Ww,Hw],o=[];function c(b,g){return b[1]===void 0?0:1}r=c(s),n=o[r]=d[r](s);const a=s[11].default,l=zr(a,s,s[10],null);return{c(){n.c(),t=Mn(),l&&l.c()},m(b,g){o[r].m(b,g),Lt(b,t,g),l&&l.m(b,g),i=!0},p(b,g){let u=r;r=c(b),r===u?o[r].p(b,g):(ao(),Qe(o[u],1,1,()=>{o[u]=null}),lo(),n=o[r],n?n.p(b,g):(n=o[r]=d[r](b),n.c()),Ze(n,1),n.m(t.parentNode,t)),l&&l.p&&(!i||g&1024)&&Hr(l,a,b,b[10],i?qr(a,b[10],g,null):Wr(b[10]),null)},i(b){i||(Ze(n),Ze(l,b),i=!0)},o(b){Qe(n),Qe(l,b),i=!1},d(b){b&&Et(t),o[r].d(b),l&&l.d(b)}}}function qw(s){let r;const n=s[11].default,t=zr(n,s,s[10],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&1024)&&Hr(t,n,i,i[10],r?qr(n,i[10],d,null):Wr(i[10]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function Hw(s){let r,n;return r=new po({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding","containerVerticalPadding","containerUnitSize"],theme:s[2]}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&4&&(d.theme=t[2]),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function Ww(s){let r,n;return r=new po({props:{keysAdd:["containerVerticalPadding"],theme:s[2]}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&4&&(d.theme=t[2]),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function Xw(s){let r,n,t,i;const d=[qw,zw,Gw,Uw],o=[];function c(a,l){return 0}return r=c(),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,[l]){let b=r;r=c(),r===b?o[r].p(a,l):(ao(),Qe(o[b],1,1,()=>{o[b]=null}),lo(),n=o[r],n?n.p(a,l):(n=o[r]=d[r](a),n.c()),Ze(n,1),n.m(t.parentNode,t))},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function Yw(s,r,n){let t,i,{$$slots:d={},$$scope:o}=r,{title:c=void 0}=r,{userExpandable:a=!0}=r,{expanded:l=!0}=r,{theme:b=void 0}=r,{scale:g=1}=r,{userCreatedPane:u=!0}=r,{tpPane:h=void 0}=r;const p=ha();eo(s,p,C=>n(12,t=C));const m=gs("parentStore");eo(s,m,C=>n(13,i=C));let y=[];Hi("registerPlugin",C=>{h===void 0?console.warn(`tpPane is undefined, failed to register plugin "${C.id}"`):y.includes(C.id)||(h==null||h.registerPlugin(C),y.push(C.id))}),Hi("userCreatedPane",u),i!==void 0&&console.warn("<Panes> must not be nested");let v=l;bh(p,t=new Bw({expanded:l,title:c}),t),t.on("fold",()=>{n(9,v=t.expanded)}),h=t,Hi("parentStore",p),oi(()=>{t.dispose()});function _(C){if(h)if(C===1)h.element.style.removeProperty("transform-origin"),h.element.style.removeProperty("transform"),h.element.style.removeProperty("width");else{const M=Math.max(0,C);n(5,h.element.style.transformOrigin="0 0",h),n(5,h.element.style.transform=`scale(${M})`,h),n(5,h.element.style.width=`${100/M}%`,h)}}function x(){h&&h.expanded!==v&&n(5,h.expanded=v,h),n(0,l=v)}return s.$$set=C=>{"title"in C&&n(1,c=C.title),"userExpandable"in C&&n(6,a=C.userExpandable),"expanded"in C&&n(0,l=C.expanded),"theme"in C&&n(2,b=C.theme),"scale"in C&&n(7,g=C.scale),"userCreatedPane"in C&&n(8,u=C.userCreatedPane),"tpPane"in C&&n(5,h=C.tpPane),"$$scope"in C&&n(10,o=C.$$scope)},s.$$.update=()=>{s.$$.dirty&34&&h&&c&&n(5,h.title=c,h),s.$$.dirty&32&&h!=null&&h.element&&(h==null||h.element.classList.add("svelte-tweakpane-ui")),s.$$.dirty&160&&h&&_(g),s.$$.dirty&96&&h&&gp(a,h.element,"tp-rotv_b","tp-rotv_m"),s.$$.dirty&36&&h&&p0(h.element,b),s.$$.dirty&33&&h&&n(9,v=l),s.$$.dirty&545&&h&&l!==void 0&&x()},[l,c,b,p,m,h,a,g,u,v,o,d]}class Du extends Mr{constructor(r){super(),Tr(this,r,Yw,Xw,Cr,{title:1,userExpandable:6,expanded:0,theme:2,scale:7,userCreatedPane:8,tpPane:5})}}function $w(s){let r;const n=s[6].default,t=zr(n,s,s[10],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&1024)&&Hr(t,n,i,i[10],r?qr(n,i[10],d,null):Wr(i[10]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function Kw(s){let r,n,t,i,d;const o=[{theme:s[3]},es(s[5],"position")];function c(b){s[7](b)}function a(b){s[8](b)}let l={$$slots:{default:[$w]},$$scope:{ctx:s}};for(let b=0;b<o.length;b+=1)l=Dt(l,o[b]);return s[0]!==void 0&&(l.expanded=s[0]),s[1]!==void 0&&(l.tpPane=s[1]),n=new Du({props:l}),it.push(()=>ft(n,"expanded",c)),it.push(()=>ft(n,"tpPane",a)),{c(){r=ln("div"),wt(n.$$.fragment),lr(r,"width",s[2]===void 0?null:`${s[2]}px`)},m(b,g){Lt(b,r,g),vt(n,r,null),s[9](r),d=!0},p(b,[g]){const u=g&40?cn(o,[g&8&&{theme:b[3]},g&32&&dn(es(b[5],"position"))]):{};g&1024&&(u.$$scope={dirty:g,ctx:b}),!t&&g&1&&(t=!0,u.expanded=b[0],pt(()=>t=!1)),!i&&g&2&&(i=!0,u.tpPane=b[1],pt(()=>i=!1)),n.$set(u),g&4&&lr(r,"width",b[2]===void 0?null:`${b[2]}px`)},i(b){d||(Ze(n.$$.fragment,b),d=!0)},o(b){Qe(n.$$.fragment,b),d=!1},d(b){b&&Et(r),bt(n),s[9](null)}}}function Zw(s,r,n){const t=["expanded","width","tpPane","theme"];let i=_r(r,t),{$$slots:d={},$$scope:o}=r,{expanded:c=void 0}=r,{width:a=void 0}=r,{tpPane:l=void 0}=r,{theme:b={baseBorderRadius:"0px",baseShadowColor:"hsla(0, 0%, 0%, 0)"}}=r,g;si(()=>{if(l){const m=l.element.parentElement;g.append(l.element),m==null||m.remove()}else console.warn("tpPane is undefined")});function u(m){c=m,n(0,c)}function h(m){l=m,n(1,l)}function p(m){it[m?"unshift":"push"](()=>{g=m,n(4,g)})}return s.$$set=m=>{r=Dt(Dt({},r),bn(m)),n(5,i=_r(r,t)),"expanded"in m&&n(0,c=m.expanded),"width"in m&&n(2,a=m.width),"tpPane"in m&&n(1,l=m.tpPane),"theme"in m&&n(3,b=m.theme),"$$scope"in m&&n(10,o=m.$$scope)},[c,l,a,b,g,i,d,u,h,p,o]}class Ta extends Mr{constructor(r){super(),Tr(this,r,Zw,Kw,Cr,{expanded:0,width:2,tpPane:1,theme:3})}}class Qw{constructor(r){this.controller_=r}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(r){this.controller_.viewProps.set("disabled",r)}get title(){var r;return(r=this.controller_.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller_.props.set("title",r)}on(r,n){const t=n.bind(this);return this.controller_.emitter.on(r,()=>{t(new Ts(this))}),this}}class Jw extends Ts{constructor(r,n,t){super(r),this.cell=n,this.index=t}}class ex extends ns{constructor(r){super(r),this.cellToApiMap_=new Map,this.emitter_=new Lr;const n=this.controller.valueController;n.cellControllers.forEach((t,i)=>{const d=new Qw(t);this.cellToApiMap_.set(t,d),t.emitter.on("click",()=>{const o=i%n.size[0],c=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new Jw(this,d,[o,c])})})})}cell(r,n){const t=this.controller.valueController,i=t.cellControllers[n*t.size[0]+r];return this.cellToApiMap_.get(i)}on(r,n){const t=n.bind(this);return this.emitter_.on(r,i=>{t(i.event)}),this}}class tx{constructor(r,n){this.size=n.size;const[t,i]=this.size,d=[];for(let o=0;o<i;o++)for(let c=0;c<t;c++){const a=new Fh(r,{props:ht.fromObject(Object.assign({},n.cellConfig(c,o))),viewProps:xs.create()});d.push(a)}this.cellCs_=d,this.viewProps=xs.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new Wh(r,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${t}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}class Ld extends uo{constructor(r,n){const t=n.valueController,i=new di(r,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:i.view,viewProps:t.viewProps}),this.valueController=t,this.labelController=i}}Nt({id:"buttongrid",type:"blade",accept(s){const r=It(s,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return r?{params:r}:null},controller(s){return new Ld(s.document,{blade:s.blade,labelProps:ht.fromObject({label:s.params.label}),valueController:new tx(s.document,{cellConfig:s.params.cells,size:s.params.size})})},api(s){return s.controller instanceof Ld?new ex(s.controller):null}});class rx extends ns{get label(){return this.controller.labelController.props.get("label")}set label(r){this.controller.labelController.props.set("label",r)}get value(){return this.controller.valueController.value.rawValue}set value(r){this.controller.valueController.value.rawValue=r}on(r,n){const t=n.bind(this);return this.controller.valueController.value.emitter.on(r,i=>{t(new ya(this,i.rawValue,i.options.last))}),this}}function Zr(s,r,n){return s*(1-n)+r*n}const nx=20,sx=.001,sl=100;function ox(s,r){let n=.25,t=.5,i=-1;for(let d=0;d<nx;d++){const[o,c]=s.curve(t);if(t+=n*(o<r?1:-1),i=c,n*=.5,Math.abs(r-o)<sx)break}return i}class Ps{constructor(r=0,n=0,t=1,i=1){this.cache_=[],this.comps_=[r,n,t,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(r){return Gt(r)||!Array.isArray(r)?!1:typeof r[0]=="number"&&typeof r[1]=="number"&&typeof r[2]=="number"&&typeof r[3]=="number"}static equals(r,n){return r.x1===n.x1&&r.y1===n.y1&&r.x2===n.x2&&r.y2===n.y2}curve(r){const n=Zr(0,this.x1,r),t=Zr(0,this.y1,r),i=Zr(this.x1,this.x2,r),d=Zr(this.y1,this.y2,r),o=Zr(this.x2,1,r),c=Zr(this.y2,1,r),a=Zr(n,i,r),l=Zr(t,d,r),b=Zr(i,o,r),g=Zr(d,c,r);return[Zr(a,b,r),Zr(l,g,r)]}y(r){if(this.cache_.length===0){const n=[];for(let t=0;t<sl;t++)n.push(ox(this,mt(t,0,sl-1,0,1)));this.cache_=n}return this.cache_[Math.round(mt(Kt(r,0,1),0,1,0,sl-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const _f={toComponents:s=>s.toObject(),fromComponents:s=>new Ps(...s)};function ix(s){const r=cr(2);return`cubic-bezier(${s.toObject().map(t=>r(t)).join(", ")})`}const Ad=[0,.5,.5,1];function ax(s){const r=s.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!r)return new Ps(...Ad);const n=[r[1],r[2],r[3],r[4]].reduce((t,i)=>{if(!t)return null;const d=Number(i);return isNaN(d)?null:[...t,d]},[]);return new Ps(...n??Ad)}const us=at("cbz");class lx{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(us()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,us(void 0,"expanded")),Gr(n.foldable,"completed",Dn(this.element,us(void 0,"cpl")));const t=r.createElement("div");t.classList.add(us("h")),this.element.appendChild(t);const i=r.createElement("button");i.classList.add(us("b")),n.viewProps.bindDisabled(i);const d=r.createElementNS(Mt,"svg");d.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(d),t.appendChild(i),this.buttonElement=i;const o=r.createElement("div");if(o.classList.add(us("t")),t.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const c=r.createElement("div");c.classList.add(us("p")),this.element.appendChild(c),this.pickerElement=c}else this.pickerElement=null}}const ol=at("cbzp");class ux{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(ol()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("div");t.classList.add(ol("g")),this.element.appendChild(t),this.graphElement=t;const i=r.createElement("div");i.classList.add(ol("t")),this.element.appendChild(i),this.textElement=i}}function wf(s,r){const n=new MutationObserver(i=>{for(const d of i)d.type==="childList"&&d.addedNodes.forEach(o=>{o.contains(o)&&(r(),n.disconnect())})}),t=s.ownerDocument;n.observe(t.body,{attributes:!0,childList:!0,subtree:!0})}const Wn=at("cbzg");function cx(s,r){return n=>r(s(n))}class dx{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Wn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=r.createElement("div");t.classList.add(Wn("p")),this.element.appendChild(t),this.previewElement=t;const i=r.createElementNS(Mt,"svg");i.classList.add(Wn("g")),this.element.appendChild(i),this.svgElem_=i;const d=r.createElementNS(Mt,"path");d.classList.add(Wn("u")),this.svgElem_.appendChild(d),this.guideElem_=d;const o=r.createElementNS(Mt,"polyline");o.classList.add(Wn("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[r.createElement("div"),r.createElement("div")],this.handleElems_.forEach(c=>{c.classList.add(Wn("h")),this.element.appendChild(c)}),this.vectorElems_=[r.createElementNS(Mt,"line"),r.createElementNS(Mt,"line")],this.vectorElems_.forEach(c=>{c.classList.add(Wn("v")),this.svgElem_.appendChild(c)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((c,a)=>{en(this.sel_,cx(l=>l===a,Dn(c,Wn("h","sel"))))}),wf(this.element,()=>{this.refresh()})}getVertMargin_(r){return r*.25}valueToPosition(r,n){const{clientWidth:t,clientHeight:i}=this.element,d=this.getVertMargin_(i);return{x:mt(r,0,1,0,t),y:mt(n,0,1,i-d,d)}}positionToValue(r,n){const t=this.element.getBoundingClientRect(),i=t.width,d=t.height,o=this.getVertMargin_(d);return{x:Kt(mt(r,0,i,0,1),0,1),y:mt(n,d-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(d=>{const o=this.valueToPosition(0,d),c=this.valueToPosition(1,d);return[`M ${o.x},${o.y}`,`L ${c.x},${c.y}`].join(" ")}).join(" "));const r=this.value_.rawValue,n=[];let t=0;for(;;){const d=this.valueToPosition(...r.curve(t));if(n.push([d.x,d.y].join(",")),t>=1)break;t=Math.min(t+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=r.toObject();[0,1].forEach(d=>{const o=this.valueToPosition(d,d),c=this.valueToPosition(i[d*2],i[d*2+1]),a=this.vectorElems_[d];a.setAttributeNS(null,"x1",String(o.x)),a.setAttributeNS(null,"y1",String(o.y)),a.setAttributeNS(null,"x2",String(c.x)),a.setAttributeNS(null,"y2",String(c.y));const l=this.handleElems_[d];l.style.left=`${c.x}px`,l.style.top=`${c.y}px`})}onValueChange_(){this.refresh()}}const Od=24,Rd=400,Dd=1e3,zs=at("cbzprv");class hx{constructor(r,n){this.stopped_=!0,this.startTime_=-1,this.requestId_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(zs()),n.viewProps.bindClassModifiers(this.element);const t=r.createElementNS(Mt,"svg");t.classList.add(zs("g")),this.element.appendChild(t),this.svgElem_=t;const i=r.createElementNS(Mt,"path");i.classList.add(zs("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const d=r.createElement("div");d.classList.add(zs("m")),this.element.appendChild(d),this.markerElem_=d,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),wf(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(zs("m","a")),this.startTime_=new Date().getTime()+Rd,this.stopped_=!1,this.requestId_=requestAnimationFrame(this.onTimer_)}stop(){cancelAnimationFrame(this.requestId_),this.stopped_=!0,this.markerElem_.classList.remove(zs("m","a"))}onDispose_(){this.stop()}updateMarker_(r){const n=this.value_.rawValue.y(Kt(r,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const{clientWidth:r,clientHeight:n}=this.svgElem_,t=[],i=this.value_.rawValue;for(let d=0;d<Od;d++){const o=mt(d,0,Od-1,0,1),c=mt(i.y(o),0,1,0,r);t.push(`M ${c},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",t.join(" "))}onTimer_(){if(this.startTime_===null)return;const r=new Date().getTime()-this.startTime_,n=r/Dd;this.updateMarker_(n),r>Dd+Rd&&this.stop(),this.stopped_||(this.requestId_=requestAnimationFrame(this.onTimer_))}onValueChange_(){this.refresh(),this.play()}}function Al(s,r,n,t){const i=n-s,d=t-r;return Math.sqrt(i*i+d*d)}function px(s,r,n,t){const i=Al(s,r,n,t),d=Math.atan2(t-r,n-s),o=Math.round(d/(Math.PI/4))*Math.PI/4;return{x:s+Math.cos(o)*i,y:r+Math.sin(o)*i}}class fx{constructor(r,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=Zt(0),this.viewProps=n.viewProps,this.view=new dx(r,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new hx(r,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const t=new pr(this.view.element);t.emitter.on("down",this.onPointerDown_),t.emitter.on("move",this.onPointerMove_),t.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(r,n,t){const i=this.sel_.rawValue,d=this.value.rawValue.toObject(),o=this.view.positionToValue(r.x,r.y),c=n?px(i,i,o.x,o.y):o;d[i*2]=c.x,d[i*2+1]=c.y,this.value.setRawValue(new Ps(...d),t)}onPointerDown_(r){const n=r.data;if(!n.point)return;const t=this.value.rawValue,i=this.view.valueToPosition(t.x1,t.y1),d=Al(n.point.x,n.point.y,i.x,i.y),o=this.view.valueToPosition(t.x2,t.y2),c=Al(n.point.x,n.point.y,o.x,o.y);this.sel_.rawValue=d<=c?0:1,this.updateValue_(n.point,r.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(r){const n=r.data;n.point&&this.updateValue_(n.point,r.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(r){const n=r.data;n.point&&this.updateValue_(n.point,r.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(r){Yo(r.key)&&r.preventDefault();const n=this.sel_.rawValue,t=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;t[n*2]+=ur(i,rn(r)),t[n*2+1]+=ur(i,Qn(r)),this.value.setRawValue(new Ps(...t),{forceEmit:!1,last:!1})}onKeyUp_(r){Yo(r.key)&&r.preventDefault();const n=this.keyScale_.rawValue,t=ur(n,rn(r)),i=ur(n,Qn(r));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class mx{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new ux(r,{viewProps:this.viewProps}),this.gc_=new fx(r,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const t=Object.assign(Object.assign({},n.axis),{constraint:new pa({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new Ms(r,{assembly:_f,axes:[t,i,t,i],parser:Ir,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(r=>r.inputElement)]}refresh(){this.gc_.refresh()}}class Id{constructor(r,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hi.create(n.expanded),this.view=new lx(r,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new xa(r,{parser:ax,props:ht.fromObject({formatter:ix}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new wa(r,{viewProps:this.viewProps}):null;const t=new mx(r,{axis:n.axis,value:this.value,viewProps:this.viewProps});t.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=t,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),en(this.popC_.shows,i=>{i&&t.refresh()}),os({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pi(this.foldable_,this.view.pickerElement))}onButtonBlur_(r){if(!this.popC_)return;const n=r.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=va(r);t&&n.contains(t)||t&&t===this.view.buttonElement&&!ci(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_&&r.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function yx(){return new Jn({assembly:_f,components:[0,1,2,3].map(s=>s%2===0?new pa({min:0,max:1}):void 0)})}Nt({id:"cubicbezier",type:"blade",accept(s){const r=It(s,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(t=>t==="inline"||t==="popup"?t:void 0)}));return r?{params:r}:null},controller(s){var r,n;const t=new Ps(...s.params.value),i=Zt(t,{constraint:yx(),equals:Ps.equals}),d=new Id(s.document,{axis:{textProps:ht.fromObject({keyScale:.1,pointerScale:.01,formatter:cr(2)})},expanded:(r=s.params.expanded)!==null&&r!==void 0?r:!1,pickerLayout:(n=s.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:s.viewProps});return new ra(s.document,{blade:s.blade,props:ht.fromObject({label:s.params.label}),value:i,valueController:d})},api(s){return!(s.controller instanceof ra)||!(s.controller.valueController instanceof Id)?null:new rx(s.controller)}});class gx extends ns{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(r){this.controller.valueController.props.set("max",r)}get min(){return this.controller.valueController.props.get("min")}set min(r){this.controller.valueController.props.set("min",r)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(r,n){const t=n.bind(this);return this.controller.valueController.ticker.emitter.on(r,()=>{t(new Ts(this))}),this}}const Fd=20;class vx{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(r){this.start_=r.getTime()}calculateFps_(r){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(r-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Fd)return;const r=this.timestamps_.length-Fd;this.timestamps_.splice(0,r);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(t=>{t.frameCount-=n}),this.frameCount_-=n}end(r){if(this.start_===null)return;const n=r.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const Io=at("fps");class bx{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Io()),n.viewProps.bindClassModifiers(this.element),this.graphElement=r.createElement("div"),this.graphElement.classList.add(Io("g")),this.element.appendChild(this.graphElement);const t=r.createElement("div");t.classList.add(Io("l")),this.element.appendChild(t);const i=r.createElement("span");i.classList.add(Io("v")),i.textContent="--",t.appendChild(i),this.valueElement=i;const d=r.createElement("span");d.classList.add(Io("u")),d.textContent="FPS",t.appendChild(d)}}class _x{constructor(r,n){this.stopwatch_=new vx,this.onTick_=this.onTick_.bind(this),this.ticker=n.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=n.props,this.value_=n.value,this.viewProps=n.viewProps,this.view=new bx(r,{viewProps:this.viewProps}),this.graphC_=new lu(r,{formatter:cr(0),props:this.props,rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()})}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const r=this.fps;if(r!==null){const n=this.value_.rawValue;this.value_.rawValue=Dy(n,r),this.view.valueElement.textContent=r.toFixed(0)}}}class Nd extends uo{constructor(r,n){const t=n.valueController,i=new di(r,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:i.view,viewProps:t.viewProps}),this.valueController=t,this.labelController=i}}function wx(s,r){return r===0?new Gh:new zh(s,r??ho.monitor.defaultInterval)}Nt({id:"fpsgraph",type:"blade",accept(s){const r=It(s,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return r?{params:r}:null},controller(s){var r,n,t,i;const d=(r=s.params.interval)!==null&&r!==void 0?r:500;return new Nd(s.document,{blade:s.blade,labelProps:ht.fromObject({label:s.params.label}),valueController:new _x(s.document,{props:ht.fromObject({max:(n=s.params.max)!==null&&n!==void 0?n:90,min:(t=s.params.min)!==null&&t!==void 0?t:0}),rows:(i=s.params.rows)!==null&&i!==void 0?i:2,ticker:wx(s.document,d),value:Zt(Oy(80)),viewProps:s.viewProps})})},api(s){return s.controller instanceof Nd?new gx(s.controller):null}});class tn{constructor(r,n){this.min=r,this.max=n}static isObject(r){if(typeof r!="object"||r===null)return!1;const n=r.min,t=r.max;return!(typeof n!="number"||typeof t!="number")}static equals(r,n){return r.min===n.min&&r.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const xf={fromComponents:s=>new tn(s[0],s[1]),toComponents:s=>[s.min,s.max]};class jf{constructor(r){this.edge=r}constrain(r){var n,t,i,d,o,c,a,l;if(r.min<=r.max)return new tn((t=(n=this.edge)===null||n===void 0?void 0:n.constrain(r.min))!==null&&t!==void 0?t:r.min,(d=(i=this.edge)===null||i===void 0?void 0:i.constrain(r.max))!==null&&d!==void 0?d:r.max);const b=(r.min+r.max)/2;return new tn((c=(o=this.edge)===null||o===void 0?void 0:o.constrain(b))!==null&&c!==void 0?c:b,(l=(a=this.edge)===null||a===void 0?void 0:a.constrain(b))!==null&&l!==void 0?l:b)}}const il=at("rsltxt");class xx{constructor(r,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=r.createElement("div"),this.element.classList.add(il());const t=r.createElement("div");t.classList.add(il("s")),t.appendChild(this.sliderView_.element),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(il("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const cs=at("rsl");class jx{constructor(r,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=r.createElement("div"),this.element.classList.add(cs()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const t=r.createElement("div");t.classList.add(cs("t")),this.element.appendChild(t),this.trackElement=t;const i=r.createElement("div");i.classList.add(cs("b")),t.appendChild(i),this.barElement=i;const d=["min","max"].map(o=>{const c=r.createElement("div");return c.classList.add(cs("k"),cs("k",o)),t.appendChild(c),c});this.knobElements=[d[0],d[1]],this.update_()}valueToX_(r){const n=this.sliderProps_.get("min"),t=this.sliderProps_.get("max");return Kt(mt(r,n,t,0,1),0,1)*100}update_(){const r=this.value_.rawValue;r.length===0?this.element.classList.add(cs(void 0,"zero")):this.element.classList.remove(cs(void 0,"zero"));const n=[this.valueToX_(r.min),this.valueToX_(r.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((t,i)=>{t.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Cx{constructor(r,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new jx(r,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const t=new pr(this.view.trackElement);t.emitter.on("down",this.onPointerDown_),t.emitter.on("move",this.onPointerMove_),t.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(r){if(!r.point)return null;const n=(r.point.x+this.ofs_())/r.bounds.width,t=this.sliderProps.get("min"),i=this.sliderProps.get("max");return mt(n,0,1,t,i)}onPointerDown_(r){if(!r.data.point)return;const n=r.data.point.x/r.data.bounds.width,t=this.value.rawValue,i=this.sliderProps.get("min"),d=this.sliderProps.get("max"),o=mt(t.min,i,d,0,1),c=mt(t.max,i,d,0,1);Math.abs(c-n)<=.025?this.grabbing_="max":Math.abs(o-n)<=.025?this.grabbing_="min":n>=o&&n<=c?(this.grabbing_="length",this.grabOffset_=mt(n-o,0,1,0,d-i)):n<o?(this.grabbing_="min",this.onPointerMove_(r)):n>c&&(this.grabbing_="max",this.onPointerMove_(r))}applyPointToValue_(r,n){const t=this.valueFromData_(r);if(t===null)return;const i=this.sliderProps.get("min"),d=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new tn(t,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new tn(this.value.rawValue.min,t),n);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let c=t-this.grabOffset_,a=c+o;c<i?(c=i,a=i+o):a>d&&(c=d-o,a=d),this.value.setRawValue(new tn(c,a),n)}}onPointerMove_(r){this.applyPointToValue_(r.data,{forceEmit:!1,last:!1})}onPointerUp_(r){this.applyPointToValue_(r.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Ex{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new Cx(r,n);const t={constraint:n.constraint,textProps:n.textProps};this.tc_=new Ms(r,{assembly:xf,axes:[t,t],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new xx(r,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Sx(s){return tn.isObject(s)?new tn(s.min,s.max):new tn(0,0)}function Px(s,r){s.writeProperty("max",r.max),s.writeProperty("min",r.min)}function kx(s){const r=[],n=ma(s);n&&r.push(n);const t=fa(s);return t&&r.push(t),new jf(new ss(r))}Nt({id:"input-interval",type:"input",accept:(s,r)=>{if(!tn.isObject(s))return null;const n=It(r,t=>Object.assign(Object.assign({},ui(t)),{readonly:t.optional.constant(!1)}));return n?{initialValue:new tn(s.min,s.max),params:n}:null},binding:{reader:s=>Sx,constraint:s=>kx(s.params),equals:tn.equals,writer:s=>Px},controller(s){const r=s.value,n=s.constraint;if(!(n instanceof jf))throw un.shouldNeverHappen();const t=(r.rawValue.min+r.rawValue.max)/2,i=ht.fromObject(li(s.params,t)),d=n.edge&&Xo(n.edge,ii);if(d)return new Ex(s.document,{constraint:n.edge,parser:Ir,sliderProps:new ht({keyScale:i.value("keyScale"),max:d.values.value("max"),min:d.values.value("min")}),textProps:i,value:r,viewProps:s.viewProps});const o={constraint:n.edge,textProps:i};return new Ms(s.document,{assembly:xf,axes:[o,o],parser:Ir,value:r,viewProps:s.viewProps})}});class Tx{constructor(r){this.controller_=r}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(r){this.controller_.viewProps.set("disabled",r)}get title(){var r;return(r=this.controller_.props.get("title"))!==null&&r!==void 0?r:""}set title(r){this.controller_.props.set("title",r)}}class Mx extends ya{constructor(r,n,t,i,d){super(r,i,d),this.cell=n,this.index=t}}class Lx extends ns{constructor(r){super(r),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(t=>{const i=new Tx(t);this.cellToApiMap_.set(t,i)})}get value(){return this.controller.value}cell(r,n){const t=this.controller.valueController,i=t.cellControllers[n*t.size[0]+r];return this.cellToApiMap_.get(i)}on(r,n){const t=n.bind(this);this.controller.value.emitter.on(r,i=>{const d=this.controller.valueController,o=d.findCellByValue(i.rawValue);if(!o)return;const c=this.cellToApiMap_.get(o);if(!c)return;const a=d.cellControllers.indexOf(o);t(new Mx(this,c,[a%d.size[0],Math.floor(a/d.size[0])],i.rawValue))})}}const Fo=at("rad");class Ax{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Fo()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("label");t.classList.add(Fo("l")),this.element.appendChild(t);const i=r.createElement("input");i.classList.add(Fo("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),t.appendChild(i),this.inputElement=i;const d=r.createElement("div");d.classList.add(Fo("b")),t.appendChild(d);const o=r.createElement("div");o.classList.add(Fo("t")),d.appendChild(o),Gr(n.props,"title",c=>{o.textContent=c})}}class Ox{constructor(r,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new Ax(r,{name:n.name,props:this.props,viewProps:this.viewProps})}}class Ol{constructor(r,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[t,i]=this.size;for(let d=0;d<i;d++)for(let o=0;o<t;o++){const c=new Ox(r,{name:n.groupName,props:ht.fromObject(Object.assign({},n.cellConfig(o,d))),viewProps:xs.create()});this.cellCs_.push(c),this.cellValues_.push(n.cellConfig(o,d).value)}this.value=n.value,en(this.value,d=>{const o=this.findCellByValue(d);o&&(o.view.inputElement.checked=!0)}),this.viewProps=xs.create(),this.view=new Wh(r,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${t}, 1fr)`,this.cellCs_.forEach(d=>{d.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(d.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(r){const n=this.cellValues_.findIndex(t=>t===r);return n<0?null:this.cellCs_[n]}onCellInputChange_(r){const n=r.currentTarget,t=this.cellCs_.findIndex(i=>i.view.inputElement===n);t<0||(this.value.rawValue=this.cellValues_[t])}}(function(){return Nt({id:"radiogrid",type:"blade",accept(s){const r=It(s,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return r?{params:r}:null},controller(s){const r=Zt(s.params.value);return new ra(s.document,{blade:s.blade,props:ht.fromObject({label:s.params.label}),value:r,valueController:new Ol(s.document,{groupName:s.params.groupName,cellConfig:s.params.cells,size:s.params.size,value:r})})},api(s){return!(s.controller instanceof ra)||!(s.controller.valueController instanceof Ol)?null:new Lx(s.controller)}})})();function Iu(s){return Nt({id:"input-radiogrid",type:"input",accept(r,n){if(!s.isType(r))return null;const t=It(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return t?{initialValue:r,params:t}:null},binding:s.binding,controller:r=>new Ol(r.document,{cellConfig:r.params.cells,groupName:r.params.groupName,size:r.params.size,value:r.value})})}Iu({isType:s=>typeof s=="number",binding:{reader:s=>ai,writer:s=>jn}});Iu({isType:s=>typeof s=="string",binding:{reader:s=>$l,writer:s=>jn}});Iu({isType:s=>typeof s=="boolean",binding:{reader:s=>Yl,writer:s=>jn}});var Rx=Function.prototype.toString,al=Object.create,Dx=Object.prototype.toString,Ix=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(r){return!!~this._keys.indexOf(r)},s.prototype.get=function(r){return this._values[this._keys.indexOf(r)]},s.prototype.set=function(r,n){this._keys.push(r),this._values.push(n)},s}();function Fx(){return new Ix}function Nx(){return new WeakMap}var Vx=typeof WeakMap<"u"?Nx:Fx;function Fu(s){if(!s)return al(null);var r=s.constructor;if(r===Object)return s===Object.prototype?{}:al(s);if(~Rx.call(r).indexOf("[native code]"))try{return new r}catch{}return al(s)}function Bx(s){var r="";return s.global&&(r+="g"),s.ignoreCase&&(r+="i"),s.multiline&&(r+="m"),s.unicode&&(r+="u"),s.sticky&&(r+="y"),r}function Ux(s){return s.flags}var Gx=/test/g.flags==="g"?Ux:Bx;function Cf(s){var r=Dx.call(s);return r.substring(8,r.length-1)}function zx(s){return s[Symbol.toStringTag]||Cf(s)}var qx=typeof Symbol<"u"?zx:Cf,Hx=Object.defineProperty,Wx=Object.getOwnPropertyDescriptor,Ef=Object.getOwnPropertyNames,Nu=Object.getOwnPropertySymbols,Sf=Object.prototype,Pf=Sf.hasOwnProperty,Xx=Sf.propertyIsEnumerable,kf=typeof Nu=="function";function Yx(s){return Ef(s).concat(Nu(s))}var $x=kf?Yx:Ef;function Ma(s,r,n){for(var t=$x(s),i=0,d=t.length,o=void 0,c=void 0;i<d;++i)if(o=t[i],!(o==="callee"||o==="caller")){if(c=Wx(s,o),!c){r[o]=n.copier(s[o],n);continue}!c.get&&!c.set&&(c.value=n.copier(c.value,n));try{Hx(r,o,c)}catch{r[o]=c.value}}return r}function Kx(s,r){var n=new r.Constructor;r.cache.set(s,n);for(var t=0,i=s.length;t<i;++t)n[t]=r.copier(s[t],r);return n}function Zx(s,r){var n=new r.Constructor;return r.cache.set(s,n),Ma(s,n,r)}function Tf(s,r){return s.slice(0)}function Qx(s,r){return s.slice(0,s.size,s.type)}function Jx(s,r){return new r.Constructor(Tf(s.buffer))}function e2(s,r){return new r.Constructor(s.getTime())}function Mf(s,r){var n=new r.Constructor;return r.cache.set(s,n),s.forEach(function(t,i){n.set(i,r.copier(t,r))}),n}function t2(s,r){return Ma(s,Mf(s,r),r)}function r2(s,r){var n=Fu(r.prototype);r.cache.set(s,n);for(var t in s)Pf.call(s,t)&&(n[t]=r.copier(s[t],r));return n}function n2(s,r){var n=Fu(r.prototype);r.cache.set(s,n);for(var t in s)Pf.call(s,t)&&(n[t]=r.copier(s[t],r));for(var i=Nu(s),d=0,o=i.length,c=void 0;d<o;++d)c=i[d],Xx.call(s,c)&&(n[c]=r.copier(s[c],r));return n}var s2=kf?n2:r2;function o2(s,r){var n=Fu(r.prototype);return r.cache.set(s,n),Ma(s,n,r)}function ll(s,r){return new r.Constructor(s.valueOf())}function i2(s,r){var n=new r.Constructor(s.source,Gx(s));return n.lastIndex=s.lastIndex,n}function Qi(s,r){return s}function Lf(s,r){var n=new r.Constructor;return r.cache.set(s,n),s.forEach(function(t){n.add(r.copier(t,r))}),n}function a2(s,r){return Ma(s,Lf(s,r),r)}var l2=Array.isArray,Vu=Object.assign,u2=Object.getPrototypeOf||function(s){return s.__proto__},Af={array:Kx,arrayBuffer:Tf,blob:Qx,dataView:Jx,date:e2,error:Qi,map:Mf,object:s2,regExp:i2,set:Lf},c2=Vu({},Af,{array:Zx,map:t2,object:o2,set:a2});function d2(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:ll,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:ll,Object:s.object,Promise:Qi,RegExp:s.regExp,Set:s.set,String:ll,WeakMap:Qi,WeakSet:Qi,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function Of(s){var r=Vu({},Af,s),n=d2(r),t=n.Array,i=n.Object;function d(o,c){if(c.prototype=c.Constructor=void 0,!o||typeof o!="object")return o;if(c.cache.has(o))return c.cache.get(o);if(c.prototype=u2(o),c.Constructor=c.prototype&&c.prototype.constructor,!c.Constructor||c.Constructor===Object)return i(o,c);if(l2(o))return t(o,c);var a=n[qx(o)];return a?a(o,c):typeof o.then=="function"?o:i(o,c)}return function(c){return d(c,{Constructor:void 0,cache:Vx(),copier:d,prototype:void 0})}}function h2(s){return Of(Vu({},c2,s))}h2({});var Ji=Of({}),p2=Object.getOwnPropertyNames,f2=Object.getOwnPropertySymbols,m2=Object.prototype.hasOwnProperty;function Vd(s,r){return function(t,i,d){return s(t,i,d)&&r(t,i,d)}}function Bi(s){return function(n,t,i){if(!n||!t||typeof n!="object"||typeof t!="object")return s(n,t,i);var d=i.cache,o=d.get(n),c=d.get(t);if(o&&c)return o===t&&c===n;d.set(n,t),d.set(t,n);var a=s(n,t,i);return d.delete(n),d.delete(t),a}}function Bd(s){return p2(s).concat(f2(s))}var Rf=Object.hasOwn||function(s,r){return m2.call(s,r)};function vo(s,r){return s||r?s===r:s===r||s!==s&&r!==r}var Df="_owner",Ud=Object.getOwnPropertyDescriptor,Gd=Object.keys;function y2(s,r,n){var t=s.length;if(r.length!==t)return!1;for(;t-- >0;)if(!n.equals(s[t],r[t],t,t,s,r,n))return!1;return!0}function g2(s,r){return vo(s.getTime(),r.getTime())}function zd(s,r,n){if(s.size!==r.size)return!1;for(var t={},i=s.entries(),d=0,o,c;(o=i.next())&&!o.done;){for(var a=r.entries(),l=!1,b=0;(c=a.next())&&!c.done;){var g=o.value,u=g[0],h=g[1],p=c.value,m=p[0],y=p[1];!l&&!t[b]&&(l=n.equals(u,m,d,b,s,r,n)&&n.equals(h,y,u,m,s,r,n))&&(t[b]=!0),b++}if(!l)return!1;d++}return!0}function v2(s,r,n){var t=Gd(s),i=t.length;if(Gd(r).length!==i)return!1;for(var d;i-- >0;)if(d=t[i],d===Df&&(s.$$typeof||r.$$typeof)&&s.$$typeof!==r.$$typeof||!Rf(r,d)||!n.equals(s[d],r[d],d,d,s,r,n))return!1;return!0}function No(s,r,n){var t=Bd(s),i=t.length;if(Bd(r).length!==i)return!1;for(var d,o,c;i-- >0;)if(d=t[i],d===Df&&(s.$$typeof||r.$$typeof)&&s.$$typeof!==r.$$typeof||!Rf(r,d)||!n.equals(s[d],r[d],d,d,s,r,n)||(o=Ud(s,d),c=Ud(r,d),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function b2(s,r){return vo(s.valueOf(),r.valueOf())}function _2(s,r){return s.source===r.source&&s.flags===r.flags}function qd(s,r,n){if(s.size!==r.size)return!1;for(var t={},i=s.values(),d,o;(d=i.next())&&!d.done;){for(var c=r.values(),a=!1,l=0;(o=c.next())&&!o.done;)!a&&!t[l]&&(a=n.equals(d.value,o.value,d.value,o.value,s,r,n))&&(t[l]=!0),l++;if(!a)return!1}return!0}function w2(s,r){var n=s.length;if(r.length!==n)return!1;for(;n-- >0;)if(s[n]!==r[n])return!1;return!0}var x2="[object Arguments]",j2="[object Boolean]",C2="[object Date]",E2="[object Map]",S2="[object Number]",P2="[object Object]",k2="[object RegExp]",T2="[object Set]",M2="[object String]",L2=Array.isArray,Hd=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Wd=Object.assign,A2=Object.prototype.toString.call.bind(Object.prototype.toString);function O2(s){var r=s.areArraysEqual,n=s.areDatesEqual,t=s.areMapsEqual,i=s.areObjectsEqual,d=s.arePrimitiveWrappersEqual,o=s.areRegExpsEqual,c=s.areSetsEqual,a=s.areTypedArraysEqual;return function(b,g,u){if(b===g)return!0;if(b==null||g==null||typeof b!="object"||typeof g!="object")return b!==b&&g!==g;var h=b.constructor;if(h!==g.constructor)return!1;if(h===Object)return i(b,g,u);if(L2(b))return r(b,g,u);if(Hd!=null&&Hd(b))return a(b,g,u);if(h===Date)return n(b,g,u);if(h===RegExp)return o(b,g,u);if(h===Map)return t(b,g,u);if(h===Set)return c(b,g,u);var p=A2(b);return p===C2?n(b,g,u):p===k2?o(b,g,u):p===E2?t(b,g,u):p===T2?c(b,g,u):p===P2?typeof b.then!="function"&&typeof g.then!="function"&&i(b,g,u):p===x2?i(b,g,u):p===j2||p===S2||p===M2?d(b,g,u):!1}}function R2(s){var r=s.circular,n=s.createCustomConfig,t=s.strict,i={areArraysEqual:t?No:y2,areDatesEqual:g2,areMapsEqual:t?Vd(zd,No):zd,areObjectsEqual:t?No:v2,arePrimitiveWrappersEqual:b2,areRegExpsEqual:_2,areSetsEqual:t?Vd(qd,No):qd,areTypedArraysEqual:t?No:w2};if(n&&(i=Wd({},i,n(i))),r){var d=Bi(i.areArraysEqual),o=Bi(i.areMapsEqual),c=Bi(i.areObjectsEqual),a=Bi(i.areSetsEqual);i=Wd({},i,{areArraysEqual:d,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:a})}return i}function D2(s){return function(r,n,t,i,d,o,c){return s(r,n,c)}}function I2(s){var r=s.circular,n=s.comparator,t=s.createState,i=s.equals,d=s.strict;if(t)return function(a,l){var b=t(),g=b.cache,u=g===void 0?r?new WeakMap:void 0:g,h=b.meta;return n(a,l,{cache:u,equals:i,meta:h,strict:d})};if(r)return function(a,l){return n(a,l,{cache:new WeakMap,equals:i,meta:void 0,strict:d})};var o={cache:void 0,equals:i,meta:void 0,strict:d};return function(a,l){return n(a,l,o)}}is();is({strict:!0});is({circular:!0});is({circular:!0,strict:!0});var F2=is({createInternalComparator:function(){return vo}});is({strict:!0,createInternalComparator:function(){return vo}});is({circular:!0,createInternalComparator:function(){return vo}});is({circular:!0,createInternalComparator:function(){return vo},strict:!0});function is(s){s===void 0&&(s={});var r=s.circular,n=r===void 0?!1:r,t=s.createInternalComparator,i=s.createState,d=s.strict,o=d===void 0?!1:d,c=R2(s),a=O2(c),l=t?t(a):D2(a);return I2({circular:n,comparator:a,createState:i,equals:l,strict:o})}function N2(s){let r,n;return r=new Ta({props:{theme:s[7],userCreatedPane:!1,$$slots:{default:[B2]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i[0]&128&&(d.theme=t[7]),i[0]&127|i[1]&1&&(d.$$scope={dirty:i,ctx:t}),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function V2(s){let r,n,t,i;const d=[G2,U2],o=[];function c(a,l){return 0}return r=c(),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function B2(s){let r,n,t,i,d,o,c,a,l;function b(v){s[14](v)}function g(v){s[15](v)}function u(v){s[16](v)}function h(v){s[17](v)}function p(v){s[18](v)}function m(v){s[19](v)}function y(v){s[20](v)}let f={};return s[1]!==void 0&&(f.disabled=s[1]),s[5]!==void 0&&(f.key=s[5]),s[2]!==void 0&&(f.label=s[2]),s[0]!==void 0&&(f.object=s[0]),s[3]!==void 0&&(f.options=s[3]),s[6]!==void 0&&(f.plugin=s[6]),s[4]!==void 0&&(f.ref=s[4]),r=new Bu({props:f}),it.push(()=>ft(r,"disabled",b)),it.push(()=>ft(r,"key",g)),it.push(()=>ft(r,"label",u)),it.push(()=>ft(r,"object",h)),it.push(()=>ft(r,"options",p)),it.push(()=>ft(r,"plugin",m)),it.push(()=>ft(r,"ref",y)),r.$on("change",s[21]),{c(){wt(r.$$.fragment)},m(v,_){vt(r,v,_),l=!0},p(v,_){const x={};!n&&_[0]&2&&(n=!0,x.disabled=v[1],pt(()=>n=!1)),!t&&_[0]&32&&(t=!0,x.key=v[5],pt(()=>t=!1)),!i&&_[0]&4&&(i=!0,x.label=v[2],pt(()=>i=!1)),!d&&_[0]&1&&(d=!0,x.object=v[0],pt(()=>d=!1)),!o&&_[0]&8&&(o=!0,x.options=v[3],pt(()=>o=!1)),!c&&_[0]&64&&(c=!0,x.plugin=v[6],pt(()=>c=!1)),!a&&_[0]&16&&(a=!0,x.ref=v[4],pt(()=>a=!1)),r.$set(x)},i(v){l||(Ze(r.$$.fragment,v),l=!0)},o(v){Qe(r.$$.fragment,v),l=!1},d(v){bt(r,v)}}}function U2(s){let r,n;return r=new po({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:s[7]}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i[0]&128&&(d.theme=t[7]),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function G2(s){let r;return{c(){r=ln("div"),lr(r,"display","none")},m(n,t){Lt(n,r,t),s[13](r)},p:fr,i:fr,o:fr,d(n){n&&Et(r),s[13](null)}}}function z2(s){let r,n,t,i;const d=[V2,N2],o=[];function c(a,l){return a[9]?0:1}return r=c(s),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function q2(s,r,n){let t,{object:i}=r,{key:d}=r,{disabled:o=!1}=r,{label:c=void 0}=r,{options:a=void 0}=r,{theme:l=void 0}=r,{ref:b=void 0}=r,{plugin:g=void 0}=r;const u=gs("registerPlugin"),h=gs("parentStore");eo(s,h,G=>n(12,t=G));const p=gs("userCreatedPane");let m,y,f;function v(){m&&m.dispose(),g!==void 0&&u(g),n(10,m=t.addBinding(i,d,{index:f,label:c,...a,disabled:o})),n(4,b=m),m.on("change",P)}si(()=>{n(11,f=y?yp(y):0)}),oi(()=>{m==null||m.dispose()});const _=xh();let x=i,C=Ji(i[d]),M=!1;function S(G){x!==G&&(M=!1),F2(G[d],C)||(C=Ji(G[d]),_("change",{value:Ji(G[d]),origin:M?"internal":"external"}),!M&&m&&(m.off("change",P),m.refresh(),m.on("change",P))),M=!1,x!==G&&(x=G,v())}function P(){M=!0,n(0,i)}function L(G){it[G?"unshift":"push"](()=>{y=G,n(8,y)})}function D(G){o=G,n(1,o)}function k(G){d=G,n(5,d)}function I(G){c=G,n(2,c)}function A(G){i=G,n(0,i)}function F(G){a=G,n(3,a)}function N(G){g=G,n(6,g)}function U(G){b=G,n(4,b)}function W(G){io.call(this,s,G)}return s.$$set=G=>{"object"in G&&n(0,i=G.object),"key"in G&&n(5,d=G.key),"disabled"in G&&n(1,o=G.disabled),"label"in G&&n(2,c=G.label),"options"in G&&n(3,a=G.options),"theme"in G&&n(7,l=G.theme),"ref"in G&&n(4,b=G.ref),"plugin"in G&&n(6,g=G.plugin)},s.$$.update=()=>{s.$$.dirty[0]&1026&&m!==void 0&&n(10,m.disabled=o,m),s.$$.dirty[0]&1028&&m!==void 0&&n(10,m.label=c,m),s.$$.dirty[0]&1040,s.$$.dirty[0]&6152&&t!==void 0&&f!==void 0&&v(),s.$$.dirty[0]&4097&&t!==void 0&&S(i),s.$$.dirty[0]&4224&&l&&t!==void 0&&(p||!mp(t))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)")},[i,o,c,a,b,d,g,l,y,h,m,f,t,L,D,k,I,A,F,N,U,W]}class Bu extends Mr{constructor(r){super(),Tr(this,r,q2,z2,Cr,{object:0,key:5,disabled:1,label:2,options:3,theme:7,ref:4,plugin:6},null,[-1,-1])}}function H2(s){let r,n,t,i;const d=[{key:s[3]},{options:s[1]},s[4]];function o(l){s[6](l)}function c(l){s[7](l)}let a={};for(let l=0;l<d.length;l+=1)a=Dt(a,d[l]);return s[2]!==void 0&&(a.object=s[2]),s[0]!==void 0&&(a.ref=s[0]),r=new Bu({props:a}),it.push(()=>ft(r,"object",o)),it.push(()=>ft(r,"ref",c)),r.$on("change",s[8]),{c(){wt(r.$$.fragment)},m(l,b){vt(r,l,b),i=!0},p(l,[b]){const g=b&26?cn(d,[b&8&&{key:l[3]},b&2&&{options:l[1]},b&16&&dn(l[4])]):{};!n&&b&4&&(n=!0,g.object=l[2],pt(()=>n=!1)),!t&&b&1&&(t=!0,g.ref=l[0],pt(()=>t=!1)),r.$set(g)},i(l){i||(Ze(r.$$.fragment,l),i=!0)},o(l){Qe(r.$$.fragment,l),i=!1},d(l){bt(r,l)}}}function W2(s,r,n){let t;const i=["value","ref","options"];let d=_r(r,i),{value:o}=r,{ref:c=void 0}=r,{options:a=void 0}=r;const l=Symbol("key");function b(){return o}function g(){n(2,t[l]=o,t)}function u(m){t=m,n(2,t)}function h(m){c=m,n(0,c)}function p(m){io.call(this,s,m)}return s.$$set=m=>{r=Dt(Dt({},r),bn(m)),n(4,d=_r(r,i)),"value"in m&&n(5,o=m.value),"ref"in m&&n(0,c=m.ref),"options"in m&&n(1,a=m.options)},s.$$.update=()=>{s.$$.dirty&4&&n(5,o=t[l]),s.$$.dirty&32&&g()},n(2,t={[l]:b()}),[c,a,t,l,d,o,u,h,p]}class X2 extends Mr{constructor(r){super(),Tr(this,r,W2,H2,Cr,{value:5,ref:0,options:1})}}function Y2(s){let r,n,t,i;const d=[{options:s[2]},s[3]];function o(l){s[5](l)}function c(l){s[6](l)}let a={};for(let l=0;l<d.length;l+=1)a=Dt(a,d[l]);return s[1]!==void 0&&(a.value=s[1]),s[0]!==void 0&&(a.ref=s[0]),r=new X2({props:a}),it.push(()=>ft(r,"value",o)),it.push(()=>ft(r,"ref",c)),r.$on("change",s[7]),{c(){wt(r.$$.fragment)},m(l,b){vt(r,l,b),i=!0},p(l,[b]){const g=b&12?cn(d,[b&4&&{options:l[2]},b&8&&dn(l[3])]):{};!n&&b&2&&(n=!0,g.value=l[1],pt(()=>n=!1)),!t&&b&1&&(t=!0,g.ref=l[0],pt(()=>t=!1)),r.$set(g)},i(l){i||(Ze(r.$$.fragment,l),i=!0)},o(l){Qe(r.$$.fragment,l),i=!1},d(l){bt(r,l)}}}function $2(s,r,n){const t=["options","ref","value"];let i=_r(r,t),{options:d=void 0}=r,{ref:o=void 0}=r,{value:c}=r,a;function l(u){c=u,n(1,c)}function b(u){o=u,n(0,o)}function g(u){io.call(this,s,u)}return s.$$set=u=>{r=Dt(Dt({},r),bn(u)),n(3,i=_r(r,t)),"options"in u&&n(4,d=u.options),"ref"in u&&n(0,o=u.ref),"value"in u&&n(1,c=u.value)},s.$$.update=()=>{s.$$.dirty&16&&n(2,a={...d,readonly:!1})},[o,c,a,i,d,l,b,g]}class If extends Mr{constructor(r){super(),Tr(this,r,$2,Y2,Cr,{options:4,ref:0,value:1})}}function K2(){const s=`
	<svg width="320" height="50" xmlns="http://www.w3.org/2000/svg">
  <style>
    text {
      font-family: "Menlo", monospace;
      font-size: 12px;
			fill: gray;
    }
  </style>
  <text x="50%" y="55%" text-anchor="middle">
    No Image
  </text>
</svg>`,r=new Blob([s],{type:"image/svg+xml"}),n=new Image;return n.src=URL.createObjectURL(r),n}function Xd(s){const r=new Image;return r.crossOrigin="anonymous",r.src=s,r}const ds=at("img");class Z2{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(ds()),n.viewProps.bindClassModifiers(this.element),this.input=r.createElement("input"),this.input.classList.add(ds("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",n.extensions.join(",")),this.image_=r.createElement("img"),this.image_.id="tpimg_"+Math.random().toString(36).slice(2),this.image_.classList.add(ds("image")),this.image_.classList.add(ds(`image_${n.imageFit}`)),this.image_.crossOrigin="anonymous",this.image_.onclick=t=>{n.clickCallback?n.clickCallback(t,this.input):this.input.click()},this.element.classList.add(ds("area_root")),this.element.appendChild(this.image_),this.element.appendChild(this.input)}changeImage(r){this.image_.src=r}changeDraggingState(r){const n=this.element;r?n==null||n.classList.add(ds("area_dragging")):n==null||n.classList.remove(ds("area_dragging"))}}let ul=null;class Q2{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Z2(r,{viewProps:this.viewProps,extensions:n.extensions,imageFit:n.imageFit,clickCallback:n.clickCallback}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragstart",this.onDragStart),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragstart",this.onDragStart),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave)}),this.value.emitter.on("change",()=>this.handleValueChange()),this.handleValueChange()}onFile(r){const n=(r==null?void 0:r.target).files;if(!n||!n.length)return;const t=n[0];this.setValue(t)}onDrop(r){r.preventDefault();try{const{dataTransfer:n}=r,t=n==null?void 0:n.files[0];if(t)this.setValue(t);else{const i=n==null?void 0:n.getData("img-id");if(i){const d=document.getElementById(i);this.setValue(d)}else{const d=n==null?void 0:n.getData("url");if(!d)throw new Error("No url");this.setValue(d)}}}catch(n){console.error("Could not parse the dropped image",n)}finally{this.view.changeDraggingState(!1)}}onDragStart(r){var n,t;(n=r.dataTransfer)===null||n===void 0||n.setData("img-id",this.view.image_.id),(t=r.dataTransfer)===null||t===void 0||t.setDragImage(this.view.image_,0,0)}onDragOver(r){r.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(r){r instanceof HTMLImageElement?this.updateImage(r.src):typeof r=="string"||!r?((r==="placeholder"||!r)&&(r=this.handlePlaceholderImage().src),this.updateImage(r)):this.setValue(r)}updateImage(r){this.view.changeImage(r)}setValue(r){if(r instanceof HTMLImageElement)this.value.setRawValue(r);else if(r instanceof File){const n=URL.createObjectURL(r)+"#"+r.name;r.src=n;const t=Xd(n);this.value.setRawValue(t||r)}else r?this.value.setRawValue(Xd(r)):this.value.setRawValue(this.handlePlaceholderImage())}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return ul||(ul=K2()),ul}}const J2=[".jpg",".png",".gif"];Nt({id:"input-image",type:"input",accept(s,r){if(!(s instanceof HTMLImageElement||typeof s=="string"))return null;const n=It(r,t=>({view:t.required.constant("input-image"),acceptUrl:t.optional.boolean,clickCallback:t.optional.function,imageFit:t.optional.custom(i=>i==="contain"||i==="cover"?i:void 0),extensions:t.optional.array(t.required.string)}));return n?{initialValue:s,params:n}:null},binding:{reader(s){return r=>r.src!==void 0?r.src===""?"placeholder":r.src:r},writer(s){return(r,n)=>{r.write(n)}}},controller(s){var r,n;return new Q2(s.document,{value:s.value,imageFit:(r=s.params.imageFit)!==null&&r!==void 0?r:"cover",clickCallback:s.params.clickCallback,viewProps:s.viewProps,extensions:(n=s.params.extensions)!==null&&n!==void 0?n:J2})}});function ej(s){let r,n,t,i;const d=[{options:s[2]},s[3]];function o(l){s[12](l)}function c(l){s[13](l)}let a={};for(let l=0;l<d.length;l+=1)a=Dt(a,d[l]);return s[0]!==void 0&&(a.value=s[0]),s[1]!==void 0&&(a.ref=s[1]),r=new If({props:a}),it.push(()=>ft(r,"value",o)),it.push(()=>ft(r,"ref",c)),r.$on("change",s[14]),{c(){wt(r.$$.fragment)},m(l,b){vt(r,l,b),i=!0},p(l,[b]){const g=b&12?cn(d,[b&4&&{options:l[2]},b&8&&dn(l[3])]):{};!n&&b&1&&(n=!0,g.value=l[0],pt(()=>n=!1)),!t&&b&2&&(t=!0,g.ref=l[1],pt(()=>t=!1)),r.$set(g)},i(l){i||(Ze(r.$$.fragment,l),i=!0)},o(l){Qe(r.$$.fragment,l),i=!1},d(l){bt(r,l)}}}function tj(s,r,n){const t=["value","options","min","max","step","pointerScale","keyScale","format","ref"];let i=_r(r,t),{value:d}=r,{options:o=void 0}=r,{min:c=void 0}=r,{max:a=void 0}=r,{step:l=void 0}=r,{pointerScale:b=void 0}=r,{keyScale:g=void 0}=r,{format:u=void 0}=r,{ref:h=void 0}=r,p=u,m;function y(_){d=_,n(0,d)}function f(_){h=_,n(1,h)}function v(_){io.call(this,s,_)}return s.$$set=_=>{r=Dt(Dt({},r),bn(_)),n(3,i=_r(r,t)),"value"in _&&n(0,d=_.value),"options"in _&&n(4,o=_.options),"min"in _&&n(5,c=_.min),"max"in _&&n(6,a=_.max),"step"in _&&n(7,l=_.step),"pointerScale"in _&&n(8,b=_.pointerScale),"keyScale"in _&&n(9,g=_.keyScale),"format"in _&&n(10,u=_.format),"ref"in _&&n(1,h=_.ref)},s.$$.update=()=>{s.$$.dirty&3072&&p!==u&&n(11,p=u),s.$$.dirty&3056&&n(2,m={min:c,max:a,format:p,keyScale:g,pointerScale:b,step:l,...o})},[d,h,m,i,o,c,a,l,b,g,u,p,y,f,v]}class rj extends Mr{constructor(r){super(),Tr(this,r,tj,ej,Cr,{value:0,options:4,min:5,max:6,step:7,pointerScale:8,keyScale:9,format:10,ref:1})}}const an=at("ckr");class nj{constructor(r,n){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=n.formatters,this.unit_=n.unit,this.element=r.createElement("div"),this.element.classList.add(an(),an(void 0,`m${n.seriesId}`)),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const t=r.createElement("div");t.classList.add(an("w")),this.element.appendChild(t),this.offsetElem_=r.createElement("div"),this.offsetElem_.classList.add(an("o")),t.appendChild(this.offsetElem_),this.svgElem_=r.createElementNS(Mt,"svg"),this.svgElem_.classList.add(an("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=r.createElement("div"),this.tooltipElem_.classList.add(at("tt")(),an("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const r=new IntersectionObserver(n=>{n.forEach(t=>{t.target!==this.element||t.intersectionRatio===0||(this.update(),r.disconnect())})},{root:null});r.observe(this.element)}rebuildScaleIfNeeded_(r){if(this.boundsWidth_===r)return;this.boundsWidth_=r,this.tickElems_.forEach(l=>{Wo(l)}),this.tickElems_=[],this.labelElems_.forEach(l=>{Wo(l)}),this.labelElems_=[];const n=this.element.ownerDocument,t=this.unit_.ticks,i=this.unit_.pixels,c=((Math.ceil(r/2/i)+1)*2+1)*t,a=i/t;for(let l=0;l<c;l++){const b=l*a;if(l%t===0){const g=n.createElementNS(Mt,"line");g.classList.add(an("mjt")),g.setAttributeNS(null,"x1",String(b)),g.setAttributeNS(null,"y1","0"),g.setAttributeNS(null,"x2",String(b)),g.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(g),this.tickElems_.push(g);const u=n.createElement("div");u.classList.add(an("l")),u.style.left=`${b}px`,this.offsetElem_.appendChild(u),this.labelElems_.push(u)}else{const g=n.createElementNS(Mt,"line");g.classList.add(an("mnt")),g.setAttributeNS(null,"x1",String(b)),g.setAttributeNS(null,"y1","0"),g.setAttributeNS(null,"x2",String(b)),g.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(g),this.tickElems_.push(g)}}}updateScale_(r){const n=this.unit_.value,t=this.unit_.pixels,i=this.value_.rawValue,d=Math.ceil(r/2/t)+1,o=i-i%n-n*d,c=l=>1-Math.pow(Kt(Math.abs(i-l)/(r/2*(n/t)),0,1),10);this.labelElems_.forEach((l,b)=>{const g=o+b*n;l.textContent=this.formatters_.ring(g),l.style.opacity=String(c(g))});const a=this.unit_.ticks;this.tickElems_.forEach((l,b)=>{const g=o+b/a*n;l.style.opacity=String(c(g))})}update(){const r=this.element.getBoundingClientRect().width,n=this.unit_.value,t=this.unit_.pixels,i=this.value_.rawValue,d=Math.ceil(r/2/t)+1,o=(i%n+n*d)*(t/n),c=r/2-o;this.offsetElem_.style.transform=`translateX(${c}px)`,this.tooltipElem_.textContent=this.formatters_.text(i),this.rebuildScaleIfNeeded_(r),this.updateScale_(r)}onValueChange_(){this.update()}onShowsTooltipChange_(r){r.rawValue?this.element.classList.add(an(void 0,"tt")):this.element.classList.remove(an(void 0,"tt"))}}class Uu{constructor(r,n){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.tooltipEnabled_=n.tooltipEnabled,this.unit_=n.unit,this.showsTooltip_=Zt(!1),this.view=new nj(r,{formatters:n.formatters,seriesId:n.seriesId,showsTooltip:this.showsTooltip_,unit:n.unit,value:this.value,viewProps:this.viewProps});const t=new pr(this.view.element);t.emitter.on("down",this.onPointerDown_),t.emitter.on("move",this.onPointerMove_),t.emitter.on("up",this.onPointerUp_)}onPointerDown_(r){const n=r.data;n.point&&(this.ox_=n.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(r){const n=r.data;if(!n.point)return;const t=n.point.x-this.ox_,i=this.unit_.pixels,d=this.unit_.value;this.value.setRawValue(this.ov_-t/i*d,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const cl=at("ckrtxt");class sj{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(cl());const t=r.createElement("div");t.classList.add(cl("r")),t.appendChild(n.ringView.element),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(cl("t")),i.appendChild(n.textView.element),this.element.appendChild(i)}}class Ff{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.rc_=new Uu(r,{formatters:{ring:n.ringFormatter,text:n.textProps.get("formatter")},seriesId:n.seriesId,tooltipEnabled:!1,unit:n.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new co(r,{parser:n.parser,props:n.textProps,value:this.value,viewProps:this.viewProps}),this.view=new sj(r,{ringView:this.rc_.view,textView:this.tc_.view})}}function Nf(s){const r=[],n=ma(s);n&&r.push(n);const t=fa(s);return t&&r.push(t),new ss(r)}function oj(s){return s===0||s===1||s===2?s:void 0}function Yd(s){return s!==void 0?String(s):"0"}function ij(s){const r=cr(vl(s.value));return n=>{const t=r(n),i=t.substr(0,1);return t+(i==="-"||i==="+"?" ":"")}}const aj=Nt({id:"input-ring",type:"input",accept(s,r){if(typeof s!="number")return null;const n=It(r,t=>Object.assign(Object.assign({},ui(t)),{series:t.optional.custom(oj),unit:t.optional.object({pixels:t.required.number,ticks:t.required.number,value:t.required.number}),view:t.required.constant("cameraring"),wide:t.optional.boolean}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>ai,constraint:s=>Nf(s.params),writer:s=>jn},controller(s){var r,n,t;const i=(r=s.params.unit)!==null&&r!==void 0?r:{ticks:5,pixels:40,value:10},d=ij(i),o=li(s.params,s.initialValue);if(s.params.wide)return new Uu(s.document,{formatters:{ring:d,text:o.formatter},seriesId:(n=Yd(s.params.series))!==null&&n!==void 0?n:"0",tooltipEnabled:!0,unit:i,value:s.value,viewProps:s.viewProps});const c=ht.fromObject(o);return new Ff(s.document,{parser:Ir,ringFormatter:d,ringUnit:i,seriesId:(t=Yd(s.params.series))!==null&&t!==void 0?t:"0",textProps:c,value:s.value,viewProps:s.viewProps})}}),lj=Nt({id:"input-wheel",type:"input",accept(s,r){if(typeof s!="number")return null;const n=It(r,t=>Object.assign(Object.assign({},ui(t)),{amount:t.optional.number,view:t.required.constant("camerawheel"),wide:t.optional.boolean}));return n?{initialValue:s,params:n}:null},binding:{reader:s=>ai,constraint:s=>Nf(s.params),writer:s=>jn},controller(s){var r,n;const t=cr(0),i=li(s.params,s.initialValue);return s.params.wide?new Uu(s.document,{formatters:{ring:t,text:i.formatter},seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:((r=s.params.amount)!==null&&r!==void 0?r:i.pointerScale)*40},value:s.value,viewProps:s.viewProps}):new Ff(s.document,{parser:Ir,ringFormatter:t,ringUnit:{ticks:10,pixels:40,value:((n=s.params.amount)!==null&&n!==void 0?n:i.pointerScale)*40},seriesId:"w",textProps:ht.fromObject(i),value:s.value,viewProps:s.viewProps})}}),uj="camerakit",cj='.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:"";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:"";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--cnt-usz));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}',dj=[aj,lj],hj=Object.freeze(Object.defineProperty({__proto__:null,css:cj,id:uj,plugins:dj},Symbol.toStringTag,{value:"Module"}));class Vf{multiply(r){return this.format(this.quat.multiply(r.quat))}premultiply(r){return this.format(r.multiply(this))}slerp(r,n){return this.format(this.quat.slerp(r.quat,n))}}function Bf(s,r,n){return Math.min(Math.max(s,r),n)}function pj(s,r){return Math.floor(s/r)*r}function fj(s,r){return s-pj(s,r)}function Uo(s){return fj(s+Math.PI,Math.PI*2)-Math.PI}class Zn extends Vf{static fromQuaternion(r,n,t){const i=r.toMat3(),[d,o,c,a]=n==="XYZ"?[0,1,2,1]:n==="XZY"?[0,2,1,-1]:n==="YXZ"?[1,0,2,-1]:n==="YZX"?[1,2,0,1]:n==="ZXY"?[2,0,1,1]:[2,1,0,-1],l=[0,0,0],b=i[c+d*3];return l[o]=-a*Math.asin(Bf(b,-1,1)),Math.abs(b)<.999999?(l[d]=a*Math.atan2(i[c+o*3],i[c*4]),l[c]=a*Math.atan2(i[o+d*3],i[d*4])):l[d]=a*Math.atan2(-i[o+c*3],i[o*4]),Math.abs(l[d])+Math.abs(l[c])>Math.PI&&(l[d]=Uo(l[d]+Math.PI),l[o]=Uo(Math.PI-l[o]),l[c]=Uo(l[c]+Math.PI)),new Zn(...l,n).reunit(t)}constructor(r,n,t,i,d){super(),this.x=r??0,this.y=n??0,this.z=t??0,this.order=i??"XYZ",this.unit=d??"rad"}get quat(){return Pt.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(r,n){return this.reorder(r).reunit(n)}format(r){return r instanceof Zn?r.reorder(this.order):r.toEuler(this.order,this.unit)}reorder(r){return r===this.order?this:this.quat.toEuler(r,this.unit)}reunit(r){const n={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit],t={deg:180/Math.PI,rad:1,turn:.5/Math.PI}[r],i=n*t;return new Zn(i*this.x,i*this.y,i*this.z,this.order,r)}}class Pt extends Vf{static fromAxisAngle(r,n){const t=n/2,i=Math.sin(t);return new Pt(r.x*i,r.y*i,r.z*i,Math.cos(t))}static fromEuler(r){const n=r.reunit("rad"),[t,i,d,o]=n.order==="XYZ"?[0,1,2,1]:n.order==="XZY"?[0,2,1,-1]:n.order==="YXZ"?[1,0,2,-1]:n.order==="YZX"?[1,2,0,1]:n.order==="ZXY"?[2,0,1,1]:[2,1,0,-1],c=n.getComponents(),a=.5*c[t],l=.5*o*c[i],b=.5*c[d],g=Math.cos(a),u=Math.cos(l),h=Math.cos(b),p=Math.sin(a),m=Math.sin(l),y=Math.sin(b),f=[0,0,0,h*u*g+y*m*p];return f[t]=h*u*p-y*m*g,f[i]=o*(h*m*g+y*u*p),f[d]=y*u*g-h*m*p,new Pt(...f)}static lookRotation(r,n){const{normal:t,tangent:i,binormal:d}=r.orthoNormalize(n),o=d.x,c=i.x,a=t.x,l=d.y,b=i.y,g=t.y,u=d.z,h=i.z,p=t.z,m=o+b+p;if(m>0){const y=.5/Math.sqrt(m+1);return new Pt((h-g)*y,(a-u)*y,(l-c)*y,.25/y)}else if(o>b&&o>p){const y=2*Math.sqrt(1+o-b-p);return new Pt(.25*y,(c+l)/y,(a+u)/y,(h-g)/y)}else if(b>p){const y=2*Math.sqrt(1+b-o-p);return new Pt((c+l)/y,.25*y,(g+h)/y,(a-u)/y)}else{const y=2*Math.sqrt(1+p-o-b);return new Pt((a+u)/y,(g+h)/y,.25*y,(l-c)/y)}}constructor(r,n,t,i){super(),this.x=r??0,this.y=n??0,this.z=t??0,this.w=i??1}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(r,n){return Zn.fromQuaternion(this,r,n)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const r=this.length;return r===0?new Pt:new Pt(this.x/r,this.y/r,this.z/r,this.w/r)}get negated(){return new Pt(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(r){const n=r.quat;return new Pt(this.w*n.x+this.x*n.w+this.y*n.z-this.z*n.y,this.w*n.y-this.x*n.z+this.y*n.w+this.z*n.x,this.w*n.z+this.x*n.y-this.y*n.x+this.z*n.w,this.w*n.w-this.x*n.x-this.y*n.y-this.z*n.z)}format(r){return r.quat}slerp(r,n){let t=r.quat;if(n===0)return this;if(n===1)return t;const i=this.ban360s;t=t.ban360s;let d=i.w*t.w+i.x*t.x+i.y*t.y+i.z*t.z;if(d<0&&(t=t.negated,d=-d),d>=1)return i;const o=1-d*d;if(o<=Number.EPSILON){const g=1-n;return new Pt(g*i.x+n*t.x,g*i.y+n*t.y,g*i.z+n*t.z,g*i.w+n*t.w).normalized}const c=Math.sqrt(o),a=Math.atan2(c,d),l=Math.sin((1-n)*a)/c,b=Math.sin(n*a)/c;return new Pt(i.x*l+t.x*b,i.y*l+t.y*b,i.z*l+t.z*b,i.w*l+t.w*b)}toMat3(){const{x:r,y:n,z:t,w:i}=this;return[1-2*n*n-2*t*t,2*r*n+2*t*i,2*r*t-2*n*i,2*r*n-2*t*i,1-2*r*r-2*t*t,2*n*t+2*r*i,2*r*t+2*n*i,2*n*t-2*r*i,1-2*r*r-2*n*n]}}class Uf{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(r){const n=(this.viewport[0]+this.viewport[2])*.5,t=(this.viewport[1]+this.viewport[3])*.5,i=this.viewport[2]-this.viewport[0],d=this.viewport[3]-this.viewport[1],o=1/Math.tan(this.fov*Math.PI/360),c=-(r.z+this.offset[2]),a=n+(r.x+this.offset[0])/c*o*i*.5/this.aspect,l=t-(r.y+this.offset[1])/c*o*d*.5;return[a,l]}}class $t{constructor(r,n,t){this.element=r.createElementNS(Mt,"path"),this.vertices=n,this.projector=t}setRotation(r){let n="";return this.vertices.forEach((t,i)=>{const d=t.applyQuaternion(r),[o,c]=this.projector.project(d);n+=`${i===0?"M":"L"}${o} ${c}`}),this.element.setAttributeNS(null,"d",n),this}}class kt{constructor(r,n,t){this.x=r??0,this.y=n??0,this.z=t??0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const r=this.length;return r===0?new kt:new kt(this.x/r,this.y/r,this.z/r)}get negated(){return new kt(-this.x,-this.y,-this.z)}add(r){return new kt(this.x+r.x,this.y+r.y,this.z+r.z)}sub(r){return new kt(this.x-r.x,this.y-r.y,this.z-r.z)}scale(r){return new kt(this.x*r,this.y*r,this.z*r)}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}cross(r){return new kt(this.y*r.z-this.z*r.y,this.z*r.x-this.x*r.z,this.x*r.y-this.y*r.x)}orthoNormalize(r){const n=this.normalized;r=r.normalized;let t=n.dot(r);t===1&&(Math.abs(n.y)>Math.abs(n.z)?r=new kt(0,0,1):r=new kt(0,1,0),t=n.dot(r)),r=r.sub(n.scale(t)).normalized;const i=r.cross(n);return{normal:n,tangent:r,binormal:i}}applyQuaternion(r){const n=r.w*this.x+r.y*this.z-r.z*this.y,t=r.w*this.y+r.z*this.x-r.x*this.z,i=r.w*this.z+r.x*this.y-r.y*this.x,d=-r.x*this.x-r.y*this.y-r.z*this.z;return new kt(n*r.w+d*-r.x+t*-r.z-i*-r.y,t*r.w+d*-r.y+i*-r.x-n*-r.z,i*r.w+d*-r.z+n*-r.y-t*-r.x)}}function Ar(s,r){const n=r.z>0?new Pt(0,0,0,1):new Pt(0,0,1,0);return Math.abs(s.z)>.9999?n:Pt.lookRotation(s,r)}function ca(s,r,n,t,i,d=1){const o=[];for(let c=0;c<n;c++){const a=s+r*c/(n-1),l=new kt;l[t]=d*Math.cos(a),l[i]=d*Math.sin(a),o.push(l)}return o}const ut=at("rotationgizmo"),qs=new kt(0,0,0),mj=new kt(1,0,0),yj=new kt(0,1,0),hs=new kt(0,0,1),Hs=new kt(0,0,-1),$d=new kt(.7,0,0),Kd=new kt(0,.7,0),Zd=new kt(0,0,.7),Qd=new kt(-.7,0,0),Jd=new kt(0,-.7,0),eh=new kt(0,0,-.7),th=new Pt(0,0,0,1);function Ws(s,r,n){const t=s.createElementNS(Mt,"g"),i=s.createElementNS(Mt,"circle");i.classList.add(ut(r)),i.setAttributeNS(null,"cx","0"),i.setAttributeNS(null,"cy","0"),i.setAttributeNS(null,"r","8"),t.appendChild(i);const d=s.createElementNS(Mt,"text");return d.classList.add(ut("labeltext")),d.setAttributeNS(null,"y","4"),d.setAttributeNS(null,"text-anchor","middle"),d.setAttributeNS(null,"font-size","10"),d.textContent=n,t.appendChild(d),t}class gj{get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}constructor(r,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(ut()),n.pickerLayout==="popup"&&this.element.classList.add(ut(void 0,"p"));const t=r.createElement("div");t.classList.add(ut("p")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const i=r.createElementNS(Mt,"svg");i.classList.add(ut("g")),this.padElement.appendChild(i),this.svgElem_=i,this.projector_=new Uf,this.projector_.viewport=[0,0,136,136];const d=ca(0,Math.PI,33,"x","y"),o=ca(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new $t(r,d,this.projector_),this.xArcB_.element.classList.add(ut("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new $t(r,d,this.projector_),this.yArcB_.element.classList.add(ut("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new $t(r,d,this.projector_),this.zArcB_.element.classList.add(ut("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new $t(r,d,this.projector_),this.xArcBC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new $t(r,d,this.projector_),this.yArcBC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new $t(r,d,this.projector_),this.zArcBC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const c=r.createElementNS(Mt,"g");i.classList.add(ut("axes")),this.svgElem_.appendChild(c),this.axesElem_=c,this.xAxis_=new $t(r,[qs,$d],this.projector_),this.xAxis_.element.classList.add(ut("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new $t(r,[qs,Kd],this.projector_),this.yAxis_.element.classList.add(ut("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new $t(r,[qs,Zd],this.projector_),this.zAxis_.element.classList.add(ut("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new $t(r,[qs,Qd],this.projector_),this.xnAxis_.element.classList.add(ut("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new $t(r,[qs,Jd],this.projector_),this.ynAxis_.element.classList.add(ut("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new $t(r,[qs,eh],this.projector_),this.znAxis_.element.classList.add(ut("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new $t(r,d,this.projector_),this.xArcF_.element.classList.add(ut("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new $t(r,d,this.projector_),this.yArcF_.element.classList.add(ut("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new $t(r,d,this.projector_),this.zArcF_.element.classList.add(ut("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new $t(r,d,this.projector_),this.xArcFC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new $t(r,d,this.projector_),this.yArcFC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new $t(r,d,this.projector_),this.zArcFC_.element.classList.add(ut("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new $t(r,o,this.projector_),this.rArc_.element.classList.add(ut("arcr")),this.rArc_.setRotation(th),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new $t(r,o,this.projector_),this.rArcC_.element.classList.add(ut("arcc")),this.rArcC_.setRotation(th),this.svgElem_.appendChild(this.rArcC_.element);const a=r.createElementNS(Mt,"g");i.classList.add(ut("labels")),this.svgElem_.appendChild(a),this.labelsElem_=a,this.xLabel=Ws(r,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=Ws(r,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=Ws(r,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=Ws(r,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=Ws(r,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=Ws(r,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const l=()=>{this.xArcB_.element.classList.add(ut("arcx_hover")),this.xArcF_.element.classList.add(ut("arcx_hover"))},b=()=>{this.xArcB_.element.classList.remove(ut("arcx_hover")),this.xArcF_.element.classList.remove(ut("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",l),this.xArcBC_.element.addEventListener("mouseleave",b),this.xArcFC_.element.addEventListener("mouseenter",l),this.xArcFC_.element.addEventListener("mouseleave",b);const g=()=>{this.yArcB_.element.classList.add(ut("arcy_hover")),this.yArcF_.element.classList.add(ut("arcy_hover"))},u=()=>{this.yArcB_.element.classList.remove(ut("arcy_hover")),this.yArcF_.element.classList.remove(ut("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",g),this.yArcBC_.element.addEventListener("mouseleave",u),this.yArcFC_.element.addEventListener("mouseenter",g),this.yArcFC_.element.addEventListener("mouseleave",u);const h=()=>{this.zArcB_.element.classList.add(ut("arcz_hover")),this.zArcF_.element.classList.add(ut("arcz_hover"))},p=()=>{this.zArcB_.element.classList.remove(ut("arcz_hover")),this.zArcF_.element.classList.remove(ut("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",h),this.zArcBC_.element.addEventListener("mouseleave",p),this.zArcFC_.element.addEventListener("mouseenter",h),this.zArcFC_.element.addEventListener("mouseleave",p);const m=()=>{this.rArc_.element.classList.add(ut("arcr_hover"))},y=()=>{this.rArc_.element.classList.remove(ut("arcr_hover"))};this.rArcC_.element.addEventListener("mouseenter",m),this.rArcC_.element.addEventListener("mouseleave",y),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,n.mode.emitter.on("change",this.onModeChange_),this.mode_=n.mode,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const r=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(r),this.yAxis_.setRotation(r),this.zAxis_.setRotation(r),this.xnAxis_.setRotation(r),this.ynAxis_.setRotation(r),this.znAxis_.setRotation(r);const n=mj.applyQuaternion(r),t=yj.applyQuaternion(r),i=hs.applyQuaternion(r),d=n.negated,o=t.negated,c=i.negated;[{el:this.xAxis_.element,v:n},{el:this.yAxis_.element,v:t},{el:this.zAxis_.element,v:i},{el:this.xnAxis_.element,v:d},{el:this.ynAxis_.element,v:o},{el:this.znAxis_.element,v:c}].map(({el:a,v:l})=>(this.axesElem_.removeChild(a),{el:a,v:l})).sort((a,l)=>a.v.z-l.v.z).forEach(({el:a})=>{this.axesElem_.appendChild(a)}),this.xArcB_.setRotation(Ar(n,Hs)),this.yArcB_.setRotation(Ar(t,Hs)),this.zArcB_.setRotation(Ar(i,Hs)),this.xArcBC_.setRotation(Ar(n,Hs)),this.yArcBC_.setRotation(Ar(t,Hs)),this.zArcBC_.setRotation(Ar(i,Hs)),this.xArcF_.setRotation(Ar(n,hs)),this.yArcF_.setRotation(Ar(t,hs)),this.zArcF_.setRotation(Ar(i,hs)),this.xArcFC_.setRotation(Ar(n,hs)),this.yArcFC_.setRotation(Ar(t,hs)),this.zArcFC_.setRotation(Ar(i,hs)),[{el:this.xLabel,v:$d},{el:this.yLabel,v:Kd},{el:this.zLabel,v:Zd},{el:this.xnLabel,v:Qd},{el:this.ynLabel,v:Jd},{el:this.znLabel,v:eh}].forEach(({el:a,v:l})=>{const[b,g]=this.projector_.project(l.applyQuaternion(r));a.setAttributeNS(null,"transform",`translate( ${b}, ${g} )`)}),[{el:this.xLabel,v:n},{el:this.yLabel,v:t},{el:this.zLabel,v:i},{el:this.xnLabel,v:d},{el:this.ynLabel,v:o},{el:this.znLabel,v:c}].map(({el:a,v:l})=>(this.labelsElem_.removeChild(a),{el:a,v:l})).sort((a,l)=>a.v.z-l.v.z).forEach(({el:a})=>{this.labelsElem_.appendChild(a)})}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const r=this.mode_.rawValue,n=r==="angle-x"?"add":"remove",t=r==="angle-y"?"add":"remove",i=r==="angle-z"?"add":"remove",d=r==="angle-r"?"add":"remove";this.xArcB_.element.classList[n](ut("arcx_active")),this.yArcB_.element.classList[t](ut("arcy_active")),this.zArcB_.element.classList[i](ut("arcz_active")),this.xArcF_.element.classList[n](ut("arcx_active")),this.yArcF_.element.classList[t](ut("arcy_active")),this.zArcF_.element.classList[i](ut("arcz_active")),this.rArc_.element.classList[d](ut("arcr_active"))}}function Gf(s){return Bf(s,0,1)}function vj(s){if(s<=0)return 0;if(s>=1)return 1;const r=1-s,n=r*(r*(r*(r*(r*(r*(r*-6+7))))));return Gf(1-n)}function bj(s,r,n){return Gf((n-s)/(r-s))}const rs=1/Math.sqrt(2),_j=new kt(1,0,0),wj=new kt(0,1,0),xj=new kt(0,0,1),jj=new Pt(0,0,0,1),Cj=new Pt(rs,0,0,rs),Ej=new Pt(0,-rs,0,rs),Sj=new Pt(-rs,0,0,rs),Pj=new Pt(0,rs,0,rs),kj=new Pt(0,1,0,0);class Tj{constructor(r,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.mode_=Zt("free"),this.view=new gj(r,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:n.pickerLayout}),this.ptHandler_=new pr(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const t=new pr(this.view.xArcBElement);t.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),t.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const i=new pr(this.view.xArcFElement);i.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),i.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const d=new pr(this.view.yArcBElement);d.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),d.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const o=new pr(this.view.yArcFElement);o.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),o.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const c=new pr(this.view.zArcBElement);c.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),c.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const a=new pr(this.view.zArcFElement);a.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),a.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const l=new pr(this.view.rArcElement);l.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-r")),l.emitter.on("up",()=>this.changeModeIfNotAuto_("free")),[{el:this.view.xLabel,q:Ej},{el:this.view.yLabel,q:Cj},{el:this.view.zLabel,q:jj},{el:this.view.xnLabel,q:Pj},{el:this.view.ynLabel,q:Sj},{el:this.view.znLabel,q:kj}].forEach(({el:b,q:g})=>{new pr(b).emitter.on("down",()=>this.autoRotate_(g))}),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(r){if(!r.point)return;const n=this.mode_.rawValue,t=r.point.x,i=r.point.y;if(n!=="auto")if(n==="free"){if(this.px_!=null&&this.py_!=null){const d=t-this.px_,o=i-this.py_,c=Math.sqrt(d*d+o*o);if(c===0)return;const a=new kt(o/c,d/c,0),l=Pt.fromAxisAngle(a,c/68);this.value.rawValue=this.value.rawValue.premultiply(l)}this.px_=t,this.py_=i}else if(n==="angle-r"){const d=r.bounds.width/2,o=r.bounds.height/2,c=Math.atan2(i-o,t-d);if(this.angleState_==null){const a=new kt(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:c,axis:a,reverseAngle:!0}}else{const{initialRotation:a,initialAngle:l,axis:b}=this.angleState_,g=-Uo(c-l),u=Pt.fromAxisAngle(b,g);this.value.rawValue=a.premultiply(u)}}else{const d=r.bounds.width/2,o=r.bounds.height/2,c=Math.atan2(i-o,t-d);if(this.angleState_==null){const a=n==="angle-x"?_j:n==="angle-y"?wj:xj,l=a.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:c,axis:a,reverseAngle:l}}else{const{initialRotation:a,initialAngle:l,axis:b,reverseAngle:g}=this.angleState_;let u=Uo(c-l);u=g?-u:u;const h=Pt.fromAxisAngle(b,u);this.value.rawValue=a.multiply(h)}}}onPointerDown_(r){this.handlePointerEvent_(r.data)}onPointerMove_(r){this.handlePointerEvent_(r.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(r){Yo(r.key)&&r.preventDefault();const n=ur(1,rn(r)),t=ur(1,Qn(r));if(n!==0||t!==0){const i=new kt(-t,n,0),d=Pt.fromAxisAngle(i,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(d)}}changeModeIfNotAuto_(r){this.mode_.rawValue!=="auto"&&(this.mode_.rawValue=r)}autoRotate_(r){this.mode_.rawValue="auto";const n=this.value.rawValue,t=Date.now(),i=()=>{const d=Date.now(),o=vj(bj(0,300,d-t));if(this.value.rawValue=n.slerp(r,o),o===1){this.mode_.rawValue="free";return}requestAnimationFrame(i)};requestAnimationFrame(i)}}const ps=at("rotationswatch"),Mj=new kt(1,0,0),Lj=new kt(0,1,0),Ui=new kt(0,0,1),Aj=new Pt(0,0,0,1);class Oj{constructor(r,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=r.createElement("div"),this.element.classList.add(ps()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("button");t.classList.add(ps("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const i=r.createElementNS(Mt,"svg");i.classList.add(ps("g")),t.appendChild(i),this.svgElem_=i,this.projector_=new Uf,this.projector_.viewport=[0,0,20,20];const d=ca(0,Math.PI,33,"x","y"),o=ca(0,2*Math.PI,65,"x","y");this.rArc_=new $t(r,o,this.projector_),this.rArc_.element.classList.add(ps("arcr")),i.appendChild(this.rArc_.element),this.rArc_.setRotation(Aj),this.xArc_=new $t(r,d,this.projector_),this.xArc_.element.classList.add(ps("arc")),i.appendChild(this.xArc_.element),this.yArc_=new $t(r,d,this.projector_),this.yArc_.element.classList.add(ps("arc")),i.appendChild(this.yArc_.element),this.zArc_=new $t(r,d,this.projector_),this.zArc_.element.classList.add(ps("arc")),i.appendChild(this.zArc_.element),this.update_()}update_(){const r=this.value.rawValue.quat.normalized,n=Mj.applyQuaternion(r),t=Lj.applyQuaternion(r),i=Ui.applyQuaternion(r);this.xArc_.setRotation(Ar(n,Ui)),this.yArc_.setRotation(Ar(t,Ui)),this.zArc_.setRotation(Ar(i,Ui))}onValueChange_(){this.update_()}}class Rj{constructor(r,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Oj(r,{value:this.value,viewProps:this.viewProps})}}const Xn=at("rotation");class Dj{constructor(r,n){this.element=r.createElement("div"),this.element.classList.add(Xn()),n.foldable.bindExpandedClass(this.element,Xn(void 0,"expanded")),Gr(n.foldable,"completed",Dn(this.element,Xn(void 0,"cpl"))),n.rotationMode==="quaternion"&&this.element.classList.add(Xn("quat"));const t=r.createElement("div");t.classList.add(Xn("h")),this.element.appendChild(t);const i=r.createElement("div");i.classList.add(Xn("s")),t.appendChild(i),this.swatchElement=i;const d=r.createElement("div");if(d.classList.add(Xn("t")),t.appendChild(d),this.textElement=d,n.pickerLayout==="inline"){const o=r.createElement("div");o.classList.add(Xn("g")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}class zf{constructor(r,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hi.create(n.expanded),this.swatchC_=new Rj(r,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new Ms(r,{assembly:n.assembly,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Dj(r,{rotationMode:n.rotationMode,foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new wa(r,{viewProps:this.viewProps}):null;const i=new Tj(r,{value:this.value,viewProps:this.viewProps,pickerLayout:n.pickerLayout});i.view.allFocusableElements.forEach(d=>{d.addEventListener("blur",this.onPopupChildBlur_),d.addEventListener("keydown",this.onPopupChildKeydown_)}),this.gizmoC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),os({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:d=>d,backward:(d,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),pi(this.foldable_,this.view.pickerElement))}onButtonBlur_(r){if(!this.popC_)return;const n=this.view.element,t=r.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(r){if(!this.popC_)return;const n=this.popC_.view.element,t=va(r);t&&n.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!ci(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(r){this.popC_?r.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&r.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function dl(s,r){const n=Math.pow(.1,s);return{baseStep:n,constraint:r,textProps:ht.fromObject({formatter:cr(s),keyScale:n,pointerScale:n})}}function ys(s){if(!s)return;const r=[];return Gt(s.step)||r.push(new Ph(s.step)),(!Gt(s.max)||!Gt(s.min))&&r.push(new pa({max:s.max,min:s.min})),new ss(r)}function rh(s,r){return{toComponents:n=>n.getComponents(),fromComponents:n=>new Zn(n[0],n[1],n[2],s,r)}}function nh(s,r,n){return typeof(s==null?void 0:s.x)=="number"&&typeof(s==null?void 0:s.y)=="number"&&typeof(s==null?void 0:s.z)=="number"?new Zn(s.x,s.y,s.z,r,n):new Zn(0,0,0,r,n)}function Ij(s){switch(s){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return s;default:return}}function Fj(s){switch(s){case"rad":case"deg":case"turn":return s;default:return}}Nt({id:"rotation",type:"input",accept(s,r){var n,t;const i=It(r,d=>({view:d.required.constant("rotation"),label:d.optional.string,picker:d.optional.custom(ja),expanded:d.optional.boolean,rotationMode:d.required.constant("euler"),x:d.optional.custom(Or),y:d.optional.custom(Or),z:d.optional.custom(Or),order:d.optional.custom(Ij),unit:d.optional.custom(Fj)}));return i?{initialValue:nh(s,(n=i.order)!==null&&n!==void 0?n:"XYZ",(t=i.unit)!==null&&t!==void 0?t:"rad"),params:i}:null},binding:{reader({params:s}){return r=>{var n,t;return nh(r,(n=s.order)!==null&&n!==void 0?n:"XYZ",(t=s.unit)!==null&&t!==void 0?t:"rad")}},constraint({params:s}){var r,n;return new Jn({assembly:rh((r=s.order)!==null&&r!==void 0?r:"XYZ",(n=s.unit)!==null&&n!==void 0?n:"rad"),components:[ys("x"in s?s.x:void 0),ys("y"in s?s.y:void 0),ys("z"in s?s.z:void 0)]})},writer(s){return(r,n)=>{r.writeProperty("x",n.x),r.writeProperty("y",n.y),r.writeProperty("z",n.z)}}},controller({document:s,value:r,constraint:n,params:t,viewProps:i}){var d,o;if(!(n instanceof Jn))throw un.shouldNeverHappen();const c="expanded"in t?t.expanded:void 0,a="picker"in t?t.picker:void 0,l=(d=t.unit)!==null&&d!==void 0?d:"rad",b={rad:2,deg:0,turn:2}[l];return new zf(s,{axes:[dl(b,n.components[0]),dl(b,n.components[1]),dl(b,n.components[2])],assembly:rh((o=t.order)!==null&&o!==void 0?o:"XYZ",l),rotationMode:"euler",expanded:c??!1,parser:Ir,pickerLayout:a??"popup",value:r,viewProps:i})}});const sh={toComponents:s=>[s.x,s.y,s.z,s.w],fromComponents:s=>new Pt(s[0],s[1],s[2],s[3])};function Gi(s){return{baseStep:.01,constraint:s,textProps:ht.fromObject({formatter:r=>Math.abs(r)<.995?r.toFixed(2).replace("0.","."):r.toFixed(1),keyScale:.01,pointerScale:.01})}}function oh(s){return typeof(s==null?void 0:s.x)=="number"&&typeof(s==null?void 0:s.y)=="number"&&typeof(s==null?void 0:s.z)=="number"&&typeof(s==null?void 0:s.w)=="number"?new Pt(s.x,s.y,s.z,s.w):new Pt(0,0,0,1)}Nt({id:"rotation",type:"input",accept(s,r){const n=It(r,t=>({view:t.required.constant("rotation"),label:t.optional.string,picker:t.optional.custom(ja),expanded:t.optional.boolean,rotationMode:t.optional.constant("quaternion"),x:t.optional.custom(Or),y:t.optional.custom(Or),z:t.optional.custom(Or),w:t.optional.custom(Or)}));return n?{initialValue:oh(s),params:n}:null},binding:{reader(s){return r=>oh(r)},constraint({params:s}){return new Jn({assembly:sh,components:[ys("x"in s?s.x:void 0),ys("y"in s?s.y:void 0),ys("z"in s?s.z:void 0),ys("w"in s?s.w:void 0)]})},writer(s){return(r,n)=>{r.writeProperty("x",n.x),r.writeProperty("y",n.y),r.writeProperty("z",n.z),r.writeProperty("w",n.w)}}},controller({document:s,value:r,constraint:n,params:t,viewProps:i}){if(!(n instanceof Jn))throw un.shouldNeverHappen();const d="expanded"in t?t.expanded:void 0,o="picker"in t?t.picker:void 0;return new zf(s,{axes:[Gi(n.components[0]),Gi(n.components[1]),Gi(n.components[2]),Gi(n.components[3])],assembly:sh,rotationMode:"quaternion",expanded:d??!1,parser:Ir,pickerLayout:o??"popup",value:r,viewProps:i})}});function Nj(s){let r,n,t,i;const d=[s[2]];function o(l){s[4](l)}function c(l){s[5](l)}let a={};for(let l=0;l<d.length;l+=1)a=Dt(a,d[l]);return s[0]!==void 0&&(a.value=s[0]),s[1]!==void 0&&(a.ref=s[1]),r=new If({props:a}),it.push(()=>ft(r,"value",o)),it.push(()=>ft(r,"ref",c)),r.$on("change",s[6]),{c(){wt(r.$$.fragment)},m(l,b){vt(r,l,b),i=!0},p(l,[b]){const g=b&4?cn(d,[dn(l[2])]):{};!n&&b&1&&(n=!0,g.value=l[0],pt(()=>n=!1)),!t&&b&2&&(t=!0,g.ref=l[1],pt(()=>t=!1)),r.$set(g)},i(l){i||(Ze(r.$$.fragment,l),i=!0)},o(l){Qe(r.$$.fragment,l),i=!1},d(l){bt(r,l)}}}function ih(s){var r;(r=s.target)==null||r.dispatchEvent(new Event("change"))}function Vj(s,r,n){const t=["value","live"];let i=_r(r,t),{value:d}=r,{live:o=!0}=r,c;oi(()=>{a(o??!0,!0)});function a(u,h=!1){const p=c==null?void 0:c.controller.valueController.view.element.querySelector("input");p==null||p.removeEventListener("input",ih),!h&&u&&(p==null||p.addEventListener("input",ih))}function l(u){d=u,n(0,d)}function b(u){c=u,n(1,c)}function g(u){io.call(this,s,u)}return s.$$set=u=>{r=Dt(Dt({},r),bn(u)),n(2,i=_r(r,t)),"value"in u&&n(0,d=u.value),"live"in u&&n(3,o=u.live)},s.$$.update=()=>{s.$$.dirty&10&&c&&o!==void 0&&a(o)},[d,c,i,o,l,b,g]}class qf extends Mr{constructor(r){super(),Tr(this,r,Vj,Nj,Cr,{value:0,live:3})}}const ah=at("txtr");class Bj{constructor(r,n){this.onChange_=this.onChange_.bind(this),this.element=r.createElement("div"),this.element.classList.add(ah()),n.viewProps.bindClassModifiers(this.element);const t=r.createElement("textarea");t.rows=n.rows,t.cols=22,t.placeholder=n.placeholder,t.classList.add(ah("i")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class Uj{constructor(r,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.rows=n.rows,this.placeholder=n.placeholder,this.view=new Bj(r,{value:this.value,viewProps:this.viewProps,rows:this.rows,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(r){const t=r.currentTarget.value;this.value.rawValue=t,this.view.refresh()}}Nt({id:"input-template",type:"input",accept(s,r){if(typeof s!="string")return null;const n=It(r,t=>({view:t.required.constant("textarea"),rows:t.optional.number,placeholder:t.optional.string}));return n?{initialValue:s,params:n}:null},binding:{reader(s){return r=>typeof r=="string"?r:""},writer(s){return(r,n)=>{r.write(n)}}},controller(s){var r,n;return new Uj(s.document,{value:s.value,rows:(r=s.params.rows)!==null&&r!==void 0?r:3,placeholder:(n=s.params.placeholder)!==null&&n!==void 0?n:"Enter text here",viewProps:s.viewProps})}});function Gj(s){let r,n,t;const i=[{options:s[1]},{plugin:hj},s[2]];function d(c){s[5](c)}let o={};for(let c=0;c<i.length;c+=1)o=Dt(o,i[c]);return s[0]!==void 0&&(o.value=s[0]),r=new rj({props:o}),it.push(()=>ft(r,"value",d)),r.$on("change",s[6]),{c(){wt(r.$$.fragment)},m(c,a){vt(r,c,a),t=!0},p(c,[a]){const l=a&6?cn(i,[a&2&&{options:c[1]},i[1],a&4&&dn(c[2])]):{};!n&&a&1&&(n=!0,l.value=c[0],pt(()=>n=!1)),r.$set(l)},i(c){t||(Ze(r.$$.fragment,c),t=!0)},o(c){Qe(r.$$.fragment,c),t=!1},d(c){bt(r,c)}}}function zj(s,r,n){const t=["value","amount","wide"];let i=_r(r,t),{value:d}=r,{amount:o=void 0}=r,{wide:c=void 0}=r,a;function l(g){d=g,n(0,d)}function b(g){io.call(this,s,g)}return s.$$set=g=>{r=Dt(Dt({},r),bn(g)),n(2,i=_r(r,t)),"value"in g&&n(0,d=g.value),"amount"in g&&n(3,o=g.amount),"wide"in g&&n(4,c=g.wide)},s.$$.update=()=>{s.$$.dirty&24&&n(1,a={amount:o,view:"camerawheel",wide:c})},[d,a,i,o,c,l,b]}class qj extends Mr{constructor(r){super(),Tr(this,r,zj,Gj,Cr,{value:0,amount:3,wide:4})}}function Hj(s){let r,n;return r=new Ta({props:{theme:s[4],userCreatedPane:!1,$$slots:{default:[Yj]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&16&&(d.theme=t[4]),i&16399&&(d.$$scope={dirty:i,ctx:t}),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function Wj(s){let r,n,t,i;const d=[Kj,$j],o=[];function c(a,l){return 0}return r=c(),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function Xj(s){let r;const n=s[11].default,t=zr(n,s,s[14],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&16384)&&Hr(t,n,i,i[14],r?qr(n,i[14],d,null):Wr(i[14]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function Yj(s){let r,n,t;function i(o){s[13](o)}let d={disabled:s[2],title:s[1],userExpandable:s[3],$$slots:{default:[Xj]},$$scope:{ctx:s}};return s[0]!==void 0&&(d.expanded=s[0]),r=new Go({props:d}),it.push(()=>ft(r,"expanded",i)),{c(){wt(r.$$.fragment)},m(o,c){vt(r,o,c),t=!0},p(o,c){const a={};c&4&&(a.disabled=o[2]),c&2&&(a.title=o[1]),c&8&&(a.userExpandable=o[3]),c&16384&&(a.$$scope={dirty:c,ctx:o}),!n&&c&1&&(n=!0,a.expanded=o[0],pt(()=>n=!1)),r.$set(a)},i(o){t||(Ze(r.$$.fragment,o),t=!0)},o(o){Qe(r.$$.fragment,o),t=!1},d(o){bt(r,o)}}}function $j(s){let r,n,t,i;r=new po({props:{keysAdd:["containerUnitSize"],theme:s[4]}});let d=s[0]&&lh(s);return{c(){wt(r.$$.fragment),n=Mn(),d&&d.c(),t=Vr()},m(o,c){vt(r,o,c),Lt(o,n,c),d&&d.m(o,c),Lt(o,t,c),i=!0},p(o,c){const a={};c&16&&(a.theme=o[4]),r.$set(a),o[0]?d?(d.p(o,c),c&1&&Ze(d,1)):(d=lh(o),d.c(),Ze(d,1),d.m(t.parentNode,t)):d&&(ao(),Qe(d,1,1,()=>{d=null}),lo())},i(o){i||(Ze(r.$$.fragment,o),Ze(d),i=!0)},o(o){Qe(r.$$.fragment,o),Qe(d),i=!1},d(o){o&&(Et(n),Et(t)),bt(r,o),d&&d.d(o)}}}function Kj(s){let r,n;const t=s[11].default,i=zr(t,s,s[14],null);return{c(){r=ln("div"),i&&i.c(),lr(r,"display","none")},m(d,o){Lt(d,r,o),i&&i.m(r,null),s[12](r),n=!0},p(d,o){i&&i.p&&(!n||o&16384)&&Hr(i,t,d,d[14],n?qr(t,d[14],o,null):Wr(d[14]),null)},i(d){n||(Ze(i,d),n=!0)},o(d){Qe(i,d),n=!1},d(d){d&&Et(r),i&&i.d(d),s[12](null)}}}function lh(s){let r,n,t;r=new po({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding"],theme:s[4]}});const i=s[11].default,d=zr(i,s,s[14],null);return{c(){wt(r.$$.fragment),n=Mn(),d&&d.c()},m(o,c){vt(r,o,c),Lt(o,n,c),d&&d.m(o,c),t=!0},p(o,c){const a={};c&16&&(a.theme=o[4]),r.$set(a),d&&d.p&&(!t||c&16384)&&Hr(d,i,o,o[14],t?qr(i,o[14],c,null):Wr(o[14]),null)},i(o){t||(Ze(r.$$.fragment,o),Ze(d,o),t=!0)},o(o){Qe(r.$$.fragment,o),Qe(d,o),t=!1},d(o){o&&Et(n),bt(r,o),d&&d.d(o)}}}function Zj(s){let r,n,t,i;const d=[Wj,Hj],o=[];function c(a,l){return a[6]?0:1}return r=c(s),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function Qj(s,r,n){let t,i,{$$slots:d={},$$scope:o}=r,{title:c="Folder"}=r,{disabled:a=!1}=r,{expanded:l=!0}=r,{userExpandable:b=!0}=r,{theme:g=void 0}=r;const u=gs("parentStore");eo(s,u,C=>n(10,t=C));const h=ha();eo(s,h,C=>n(15,i=C));const p=gs("userCreatedPane");let m,y,f;Hi("parentStore",h);function v(){bh(h,i=t.addFolder({disabled:a,expanded:l,index:y,title:c}),i),i.on("fold",()=>{n(0,l=i.expanded)}),n(9,f=i)}si(()=>{n(8,y=m?yp(m):0)}),oi(()=>{i==null||i.dispose()});function _(C){it[C?"unshift":"push"](()=>{m=C,n(5,m)})}function x(C){l=C,n(0,l)}return s.$$set=C=>{"title"in C&&n(1,c=C.title),"disabled"in C&&n(2,a=C.disabled),"expanded"in C&&n(0,l=C.expanded),"userExpandable"in C&&n(3,b=C.userExpandable),"theme"in C&&n(4,g=C.theme),"$$scope"in C&&n(14,o=C.$$scope)},s.$$.update=()=>{s.$$.dirty&514&&f&&n(9,f.title=c,f),s.$$.dirty&516&&f&&n(9,f.disabled=a,f),s.$$.dirty&513&&f&&l!==void 0&&n(9,f.expanded=l,f),s.$$.dirty&1792&&t&&!f&&y!==void 0&&v(),s.$$.dirty&520&&f&&gp(b,f.element,"tp-fldv_b","tp-fldv_m"),s.$$.dirty&1040&&g&&t&&(p||!mp(t))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Folder> components for a theme prop.)")},[l,c,a,b,g,m,u,h,y,f,t,d,_,x,o]}class Go extends Mr{constructor(r){super(),Tr(this,r,Qj,Zj,Cr,{title:1,disabled:2,expanded:0,userExpandable:3,theme:4})}}var hl={local:{},session:{}};function Jj(s){return s==="local"?localStorage:sessionStorage}function uh(s,r,n){var t,i;const d=(t=void 0)!=null?t:JSON,o=(i=void 0)!=null?i:"local",c=typeof window<"u"&&typeof document<"u",a=c?Jj(o):null;function l(b,g){a==null||a.setItem(b,d.stringify(g))}if(!hl[o][s]){const b=ha(r,h=>{const p=a==null?void 0:a.getItem(s);if(p&&h(d.parse(p)),c&&o=="local"){const m=y=>{y.key===s&&h(y.newValue?d.parse(y.newValue):null)};return window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)}}),{subscribe:g,set:u}=b;hl[o][s]={set(h){l(s,h),u(h)},update(h){return b.update(p=>{const m=h(p);return l(s,m),m})},subscribe:g}}return hl[o][s]}const{window:eC}=mm;function tC(s){let r;const n=s[25].default,t=zr(n,s,s[32],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d[1]&2)&&Hr(t,n,i,i[32],r?qr(n,i[32],d,null):Wr(i[32]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function rC(s){let r,n,t,i,d,o=`${s[2]}px`,c=`${s[3]}px`,a=`${s[4]}px`,l,b,g;const u=[{scale:s[8]},{title:s[7]},es(s[16],"position")];function h(y){s[26](y)}function p(y){s[27](y)}let m={$$slots:{default:[tC]},$$scope:{ctx:s}};for(let y=0;y<u.length;y+=1)m=Dt(m,u[y]);return s[1]!==void 0&&(m.expanded=s[1]),s[0]!==void 0&&(m.tpPane=s[0]),n=new Du({props:m}),it.push(()=>ft(n,"expanded",h)),it.push(()=>ft(n,"tpPane",p)),{c(){r=ln("div"),wt(n.$$.fragment),wh(r,"class","draggable-container svelte-ex9mcb"),ea(()=>s[28].call(r)),Di(r,"not-collapsable",!s[6]),Di(r,"not-resizable",!s[5]),lr(r,"left",o),lr(r,"padding",s[9]),lr(r,"top",c),lr(r,"width",a),lr(r,"z-index",s[14])},m(y,f){Lt(y,r,f),vt(n,r,null),d=vm(r,s[28].bind(r)),s[29](r),l=!0,b||(g=[Vo(eC,"resize",s[15]),Vo(r,"focus",s[30],!0),Vo(r,"pointerdown",s[31],!0)],b=!0)},p(y,f){const v=f[0]&65920?cn(u,[f[0]&256&&{scale:y[8]},f[0]&128&&{title:y[7]},f[0]&65536&&dn(es(y[16],"position"))]):{};f[1]&2&&(v.$$scope={dirty:f,ctx:y}),!t&&f[0]&2&&(t=!0,v.expanded=y[1],pt(()=>t=!1)),!i&&f[0]&1&&(i=!0,v.tpPane=y[0],pt(()=>i=!1)),n.$set(v),(!l||f[0]&64)&&Di(r,"not-collapsable",!y[6]),(!l||f[0]&32)&&Di(r,"not-resizable",!y[5]),f[0]&4&&o!==(o=`${y[2]}px`)&&lr(r,"left",o),f[0]&512&&lr(r,"padding",y[9]),f[0]&8&&c!==(c=`${y[3]}px`)&&lr(r,"top",c),f[0]&16&&a!==(a=`${y[4]}px`)&&lr(r,"width",a),f[0]&16384&&lr(r,"z-index",y[14])},i(y){l||(Ze(n.$$.fragment,y),l=!0)},o(y){Qe(n.$$.fragment,y),l=!1},d(y){y&&Et(r),bt(n),d(),s[29](null),b=!1,ks(g)}}}const zi="svelte-tweakpane-ui-draggable-position-",nC="1",Xs=[];let pl=1e3;const sC=!0,oC=3;function iC(s,r,n){let t;const i=["storePositionLocally","localStoreId","tpPane","expanded","collapseChildrenToFit","x","y","width","resizable","userExpandable","minWidth","maxWidth","title","scale","padding"];let d=_r(r,i),o,c=fr,a=()=>(c(),c=Il(m,ce=>n(41,o=ce)),m);s.$$.on_destroy.push(()=>c());let{$$slots:l={},$$scope:b}=r,g,{storePositionLocally:u=!0}=r,{localStoreId:h=nC}=r,{tpPane:p=void 0}=r,m;u&&a(m=uh(`${zi}${h}`,{x:0,y:0,expanded:!0,width:350}));let{expanded:y=(o==null?void 0:o.expanded)??!0}=r,{collapseChildrenToFit:f=!1}=r,{x:v=(o==null?void 0:o.x)??0}=r,{y:_=(o==null?void 0:o.y)??0}=r,{width:x=(o==null?void 0:o.width)??256}=r,{resizable:C=!0}=r,{userExpandable:M=!0}=r,{minWidth:S=200}=r,{maxWidth:P=600}=r,{title:L="Tweakpane"}=r,{scale:D=1}=r,{padding:k="0"}=r,I,A,F,N,U,W,G,z,Y=pl;function K(){h!==void 0&&(Xs.includes(h)&&console.warn('Multiple instances of <Pane> with `mode="draggable"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.'),Xs.push(h))}function ie(){h&&(Xs.splice(Xs.indexOf(h),1),localStorage.removeItem(`${zi}${h}`))}function E(ce){ce!==void 0&&m!==void 0&&y!==void 0&&x!==void 0&&v!==void 0&&_!==void 0&&a(n(10,m=uh(`${zi}${h}`,{x:v,y:_,expanded:y,width:x})))}function R(){if(v!==void 0&&_!==void 0&&x!==void 0){const ce=G,Ae=z;n(23,G=document.documentElement.clientWidth),n(24,z=document.documentElement.clientHeight);const xe=G-ce,Q=z-Ae,re=(v+x/2)/G,$=(_+U/2)/z;!Number.isNaN(xe)&&re>=.5&&n(2,v+=xe),!Number.isNaN(Q)&&$>=.5&&n(3,_+=Q)}}const B=ce=>{ce.stopPropagation()};let H=0,Z=0,te=0,se=0;const pe=ce=>{ce.stopPropagation(),ce.target&&x!==void 0&&ce.target===F&&n(4,x=x<t?t:S)},oe=ce=>{v!==void 0&&_!==void 0&&ce.button===0&&ce.target instanceof HTMLElement&&(se=0,g=ce,ye(),Ce(),ce.target===A&&(A.style.cursor="grabbing"),n(11,I.style.transition="width 0s ease",I),ce.target.setPointerCapture(ce.pointerId),H=x??0,Z=v-ce.pageX,te=_-ce.pageY)},he=ce=>{ce.target instanceof HTMLElement&&x!==void 0&&S!==void 0&&v!==void 0&&_!==void 0&&(ce.target===A?(se+=Math.hypot(ce.movementX,ce.movementY),n(2,v=ce.pageX+Z),n(3,_=ce.pageY+te)):ce.target===F&&n(4,x=$a(ce.pageX+Z+H-v,S,t)))},de=()=>{if((g==null?void 0:g.target)instanceof HTMLElement){const{target:ce}=g,Ae=ce.getBoundingClientRect(),xe=new PointerEvent("pointercancel",{bubbles:!0,clientX:Ae.left+Ae.width/2,clientY:Ae.top+Ae.height/2,composed:!0,pointerId:g.pointerId,pointerType:g.pointerType});ce.dispatchEvent(xe)}},J=ce=>{ce.stopImmediatePropagation(),ce.target instanceof HTMLElement&&(ce.target.hasPointerCapture(ce.pointerId)&&ce.target.releasePointerCapture(ce.pointerId),ce.target===A&&A.style.removeProperty("cursor"),I.style.removeProperty("transition"),ce.type==="pointerup"&&sC&&ce.target===A&&se<oC&&M&&p&&n(0,p.expanded=!p.expanded,p),g=void 0,ge(),ue())},ue=()=>{A.addEventListener("pointerdown",oe),F==null||F.addEventListener("pointerdown",oe)},ye=()=>{A.removeEventListener("pointerdown",oe),F==null||F.removeEventListener("pointerdown",oe)},Ce=()=>{window.addEventListener("blur",de),A.addEventListener("pointermove",he),A.addEventListener("pointerup",J),A.addEventListener("pointercancel",J),F==null||F.addEventListener("pointermove",he),F==null||F.addEventListener("pointerup",J),F==null||F.addEventListener("pointercancel",J)},ge=()=>{window.removeEventListener("blur",de),A.removeEventListener("pointermove",he),A.removeEventListener("pointerup",J),A.removeEventListener("pointercancel",J),F==null||F.removeEventListener("pointermove",he),F==null||F.removeEventListener("pointerup",J),F==null||F.removeEventListener("pointercancel",J)},_e=ce=>{ce.preventDefault()};si(()=>{var Ae;R(),p?I.append(p.element):console.warn("no tpPane in draggable"),I.addEventListener("touchmove",_e,{passive:!1});const ce=I.querySelector(".tp-rotv_t");ce&&(A=ce,A.addEventListener("click",B),A.addEventListener("dblclick",pe),F=(Ae=A.parentElement)==null?void 0:Ae.appendChild(document.createElement("div")),F&&(F.className="tp-custom-width-handle",F.textContent="↔",F.addEventListener("click",B),F.addEventListener("dblclick",pe)),ue())}),oi(()=>{ye(),ge(),A.removeEventListener("click",B),A.removeEventListener("dblclick",pe),F==null||F.removeEventListener("click",B),F==null||F.removeEventListener("dblclick",pe),I==null||I.removeEventListener("touchmove",_e),h!==void 0&&Xs.splice(Xs.indexOf(h),1)});function Ee(ce){F&&(F.style.display=ce?"block":"none")}function Ie(ce,Ae=Number.MAX_SAFE_INTEGER){if(Ae>0)for(const xe of ce)if("expanded"in xe)xe.expanded&&(Ae--,xe.expanded=!1),"children"in xe&&Ie(xe.children,Ae);else{const Q=g0(xe);Q&&y0(xe)&&(Ae--,Q.click())}}function Te(ce){y=ce,n(1,y)}function Ke(ce){p=ce,n(0,p)}function Ge(){N=this.clientHeight,W=this.clientWidth,n(12,N),n(13,W)}function ze(ce){it[ce?"unshift":"push"](()=>{I=ce,n(11,I)})}const He=()=>{n(14,Y=++pl)},qe=()=>{n(14,Y=++pl)};return s.$$set=ce=>{r=Dt(Dt({},r),bn(ce)),n(16,d=_r(r,i)),"storePositionLocally"in ce&&n(17,u=ce.storePositionLocally),"localStoreId"in ce&&n(18,h=ce.localStoreId),"tpPane"in ce&&n(0,p=ce.tpPane),"expanded"in ce&&n(1,y=ce.expanded),"collapseChildrenToFit"in ce&&n(19,f=ce.collapseChildrenToFit),"x"in ce&&n(2,v=ce.x),"y"in ce&&n(3,_=ce.y),"width"in ce&&n(4,x=ce.width),"resizable"in ce&&n(5,C=ce.resizable),"userExpandable"in ce&&n(6,M=ce.userExpandable),"minWidth"in ce&&n(20,S=ce.minWidth),"maxWidth"in ce&&n(21,P=ce.maxWidth),"title"in ce&&n(7,L=ce.title),"scale"in ce&&n(8,D=ce.scale),"padding"in ce&&n(9,k=ce.padding),"$$scope"in ce&&n(32,b=ce.$$scope)},s.$$.update=()=>{if(s.$$.dirty[0]&33&&p&&C&&Ee(C),s.$$.dirty[0]&6400&&I)if(D===void 0||D===1)n(22,U=N);else{const ce=window.getComputedStyle(I),Ae=Number.parseFloat(ce.paddingTop)+Number.parseFloat(ce.paddingBottom);n(22,U=(N-Ae)*D+Ae)}s.$$.dirty[0]&33038365&&U!==void 0&&G!==void 0&&z!==void 0&&v!==void 0&&_!==void 0&&x!==void 0&&S!==void 0&&P!==void 0&&(f&&U>z&&p&&Ie(p.children),n(2,v=$a(v,0,Math.max(0,G-W))),n(3,_=$a(_,0,Math.max(0,z-U))),G<W&&n(4,x=Math.max(S,Math.min(P,G)))),s.$$.dirty[0]&10485764&&(t=Math.min(P??600,G-(v??0))),s.$$.dirty[0]&393216&&u&&K(),s.$$.dirty[0]&393216&&!u&&ie(),s.$$.dirty[0]&262144&&h!==`${zi}${h}`&&E(h),s.$$.dirty[0]&394270&&u&&h!==void 0&&v!==void 0&&_!==void 0&&x!==void 0&&y!==void 0&&(m==null||m.set({x:v,y:_,expanded:y,width:x}))},[p,y,v,_,x,C,M,L,D,k,m,I,N,W,Y,R,d,u,h,f,S,P,U,G,z,l,Te,Ke,Ge,ze,He,qe,b]}class aC extends Mr{constructor(r){super(),Tr(this,r,iC,rC,Cr,{storePositionLocally:17,localStoreId:18,tpPane:0,expanded:1,collapseChildrenToFit:19,x:2,y:3,width:4,resizable:5,userExpandable:6,minWidth:20,maxWidth:21,title:7,scale:8,padding:9},null,[-1,-1])}}function lC(s){let r;const n=s[8].default,t=zr(n,s,s[11],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&2048)&&Hr(t,n,i,i[11],r?qr(n,i[11],d,null):Wr(i[11]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function uC(s){let r,n,t,i,d;const o=[{title:s[2]},es(s[3],"position")];function c(b){s[9](b)}function a(b){s[10](b)}let l={$$slots:{default:[lC]},$$scope:{ctx:s}};for(let b=0;b<o.length;b+=1)l=Dt(l,o[b]);return s[1]!==void 0&&(l.expanded=s[1]),s[0]!==void 0&&(l.tpPane=s[0]),n=new Du({props:l}),it.push(()=>ft(n,"expanded",c)),it.push(()=>ft(n,"tpPane",a)),{c(){r=ln("div"),wt(n.$$.fragment),lr(r,"display","none")},m(b,g){Lt(b,r,g),vt(n,r,null),d=!0},p(b,[g]){const u=g&12?cn(o,[g&4&&{title:b[2]},g&8&&dn(es(b[3],"position"))]):{};g&2048&&(u.$$scope={dirty:g,ctx:b}),!t&&g&2&&(t=!0,u.expanded=b[1],pt(()=>t=!1)),!i&&g&1&&(i=!0,u.tpPane=b[0],pt(()=>i=!1)),n.$set(u)},i(b){d||(Ze(n.$$.fragment,b),d=!0)},o(b){Qe(n.$$.fragment,b),d=!1},d(b){b&&Et(r),bt(n)}}}function cC(s,r,n){const t=["expanded","x","y","width","title","tpPane"];let i=_r(r,t),{$$slots:d={},$$scope:o}=r,{expanded:c=void 0}=r,{x:a=void 0}=r,{y:l=void 0}=r,{width:b=void 0}=r,{title:g="Tweakpane"}=r,{tpPane:u=void 0}=r,h;function p(y){c=y,n(1,c)}function m(y){u=y,n(0,u)}return s.$$set=y=>{r=Dt(Dt({},r),bn(y)),n(3,i=_r(r,t)),"expanded"in y&&n(1,c=y.expanded),"x"in y&&n(4,a=y.x),"y"in y&&n(5,l=y.y),"width"in y&&n(6,b=y.width),"title"in y&&n(2,g=y.title),"tpPane"in y&&n(0,u=y.tpPane),"$$scope"in y&&n(11,o=y.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&u!=null&&u.element.parentElement&&n(7,h=u.element.parentElement),s.$$.dirty&144&&h!==void 0&&a!==void 0&&(h.style.setProperty("right","unset"),h.style.setProperty("left",`${a}px`)),s.$$.dirty&160&&h!==void 0&&l!==void 0&&h.style.setProperty("top",`${l}px`),s.$$.dirty&192&&h!==void 0&&b!==void 0&&h.style.setProperty("width",`${b}px`)},[u,c,g,i,a,l,b,h,d,p,m,o]}class dC extends Mr{constructor(r){super(),Tr(this,r,cC,uC,Cr,{expanded:1,x:4,y:5,width:6,title:2,tpPane:0})}}function hC(s){let r,n,t,i;const d=[yC,mC],o=[];function c(a,l){return 0}return r=c(),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function pC(s){let r,n,t,i;const d=[{width:s[1]},es(s[6],"storePositionLocally")];function o(l){s[13](l)}function c(l){s[14](l)}let a={$$slots:{default:[vC]},$$scope:{ctx:s}};for(let l=0;l<d.length;l+=1)a=Dt(a,d[l]);return s[0]!==void 0&&(a.expanded=s[0]),s[2]!==void 0&&(a.tpPane=s[2]),r=new Ta({props:a}),it.push(()=>ft(r,"expanded",o)),it.push(()=>ft(r,"tpPane",c)),{c(){wt(r.$$.fragment)},m(l,b){vt(r,l,b),i=!0},p(l,b){const g=b&66?cn(d,[b&2&&{width:l[1]},b&64&&dn(es(l[6],"storePositionLocally"))]):{};b&524288&&(g.$$scope={dirty:b,ctx:l}),!n&&b&1&&(n=!0,g.expanded=l[0],pt(()=>n=!1)),!t&&b&4&&(t=!0,g.tpPane=l[2],pt(()=>t=!1)),r.$set(g)},i(l){i||(Ze(r.$$.fragment,l),i=!0)},o(l){Qe(r.$$.fragment,l),i=!1},d(l){bt(r,l)}}}function fC(s){let r,n,t,i;const d=[_C,bC],o=[];function c(a,l){return 0}return r=c(),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,l){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function mC(s){let r,n;const t=s[7].default,i=zr(t,s,s[19],null);return{c(){r=ln("div"),i&&i.c(),lr(r,"display","none")},m(d,o){Lt(d,r,o),i&&i.m(r,null),n=!0},p(d,o){i&&i.p&&(!n||o&524288)&&Hr(i,t,d,d[19],n?qr(t,d[19],o,null):Wr(d[19]),null)},i(d){n||(Ze(i,d),n=!0)},o(d){Qe(i,d),n=!1},d(d){d&&Et(r),i&&i.d(d)}}}function yC(s){let r,n,t,i,d,o;const c=[{width:s[1]},s[6]];function a(h){s[15](h)}function l(h){s[16](h)}function b(h){s[17](h)}function g(h){s[18](h)}let u={$$slots:{default:[gC]},$$scope:{ctx:s}};for(let h=0;h<c.length;h+=1)u=Dt(u,c[h]);return s[0]!==void 0&&(u.expanded=s[0]),s[2]!==void 0&&(u.tpPane=s[2]),s[3]!==void 0&&(u.x=s[3]),s[4]!==void 0&&(u.y=s[4]),r=new dC({props:u}),it.push(()=>ft(r,"expanded",a)),it.push(()=>ft(r,"tpPane",l)),it.push(()=>ft(r,"x",b)),it.push(()=>ft(r,"y",g)),{c(){wt(r.$$.fragment)},m(h,p){vt(r,h,p),o=!0},p(h,p){const m=p&66?cn(c,[p&2&&{width:h[1]},p&64&&dn(h[6])]):{};p&524288&&(m.$$scope={dirty:p,ctx:h}),!n&&p&1&&(n=!0,m.expanded=h[0],pt(()=>n=!1)),!t&&p&4&&(t=!0,m.tpPane=h[2],pt(()=>t=!1)),!i&&p&8&&(i=!0,m.x=h[3],pt(()=>i=!1)),!d&&p&16&&(d=!0,m.y=h[4],pt(()=>d=!1)),r.$set(m)},i(h){o||(Ze(r.$$.fragment,h),o=!0)},o(h){Qe(r.$$.fragment,h),o=!1},d(h){bt(r,h)}}}function gC(s){let r;const n=s[7].default,t=zr(n,s,s[19],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&524288)&&Hr(t,n,i,i[19],r?qr(n,i[19],d,null):Wr(i[19]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function vC(s){let r;const n=s[7].default,t=zr(n,s,s[19],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&524288)&&Hr(t,n,i,i[19],r?qr(n,i[19],d,null):Wr(i[19]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function bC(s){let r,n;const t=s[7].default,i=zr(t,s,s[19],null);return{c(){r=ln("div"),i&&i.c(),lr(r,"display","none")},m(d,o){Lt(d,r,o),i&&i.m(r,null),n=!0},p(d,o){i&&i.p&&(!n||o&524288)&&Hr(i,t,d,d[19],n?qr(t,d[19],o,null):Wr(d[19]),null)},i(d){n||(Ze(i,d),n=!0)},o(d){Qe(i,d),n=!1},d(d){d&&Et(r),i&&i.d(d)}}}function _C(s){let r,n,t,i,d,o,c;const a=[s[6]];function l(m){s[8](m)}function b(m){s[9](m)}function g(m){s[10](m)}function u(m){s[11](m)}function h(m){s[12](m)}let p={$$slots:{default:[wC]},$$scope:{ctx:s}};for(let m=0;m<a.length;m+=1)p=Dt(p,a[m]);return s[0]!==void 0&&(p.expanded=s[0]),s[2]!==void 0&&(p.tpPane=s[2]),s[1]!==void 0&&(p.width=s[1]),s[3]!==void 0&&(p.x=s[3]),s[4]!==void 0&&(p.y=s[4]),r=new aC({props:p}),it.push(()=>ft(r,"expanded",l)),it.push(()=>ft(r,"tpPane",b)),it.push(()=>ft(r,"width",g)),it.push(()=>ft(r,"x",u)),it.push(()=>ft(r,"y",h)),{c(){wt(r.$$.fragment)},m(m,y){vt(r,m,y),c=!0},p(m,y){const f=y&64?cn(a,[dn(m[6])]):{};y&524288&&(f.$$scope={dirty:y,ctx:m}),!n&&y&1&&(n=!0,f.expanded=m[0],pt(()=>n=!1)),!t&&y&4&&(t=!0,f.tpPane=m[2],pt(()=>t=!1)),!i&&y&2&&(i=!0,f.width=m[1],pt(()=>i=!1)),!d&&y&8&&(d=!0,f.x=m[3],pt(()=>d=!1)),!o&&y&16&&(o=!0,f.y=m[4],pt(()=>o=!1)),r.$set(f)},i(m){c||(Ze(r.$$.fragment,m),c=!0)},o(m){Qe(r.$$.fragment,m),c=!1},d(m){bt(r,m)}}}function wC(s){let r;const n=s[7].default,t=zr(n,s,s[19],null);return{c(){t&&t.c()},m(i,d){t&&t.m(i,d),r=!0},p(i,d){t&&t.p&&(!r||d&524288)&&Hr(t,n,i,i[19],r?qr(n,i[19],d,null):Wr(i[19]),null)},i(i){r||(Ze(t,i),r=!0)},o(i){Qe(t,i),r=!1},d(i){t&&t.d(i)}}}function xC(s){let r,n,t,i;const d=[fC,pC,hC],o=[];function c(a,l){return a[5]===void 0||a[5]==="draggable"?0:a[5]==="inline"?1:a[5]==="fixed"?2:-1}return~(r=c(s))&&(n=o[r]=d[r](s)),{c(){n&&n.c(),t=Vr()},m(a,l){~r&&o[r].m(a,l),Lt(a,t,l),i=!0},p(a,[l]){let b=r;r=c(a),r===b?~r&&o[r].p(a,l):(n&&(ao(),Qe(o[b],1,1,()=>{o[b]=null}),lo()),~r?(n=o[r],n?n.p(a,l):(n=o[r]=d[r](a),n.c()),Ze(n,1),n.m(t.parentNode,t)):n=null)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),~r&&o[r].d(a)}}}function jC(s,r,n){const t=["expanded","position","width","tpPane","x","y"];let i=_r(r,t),{$$slots:d={},$$scope:o}=r,{expanded:c=void 0}=r,{position:a=void 0}=r,{width:l=void 0}=r,{tpPane:b=void 0}=r,{x:g=void 0}=r,{y:u=void 0}=r;_m(()=>{(r.position==="inline"||r.position==="fixed")&&(n(3,g=r.x),n(4,u=r.y),n(1,l=r.width),n(0,c=r.expanded))});function h(P){c=P,n(0,c)}function p(P){b=P,n(2,b)}function m(P){l=P,n(1,l)}function y(P){g=P,n(3,g)}function f(P){u=P,n(4,u)}function v(P){c=P,n(0,c)}function _(P){b=P,n(2,b)}function x(P){c=P,n(0,c)}function C(P){b=P,n(2,b)}function M(P){g=P,n(3,g)}function S(P){u=P,n(4,u)}return s.$$set=P=>{n(20,r=Dt(Dt({},r),bn(P))),n(6,i=_r(r,t)),"expanded"in P&&n(0,c=P.expanded),"position"in P&&n(5,a=P.position),"width"in P&&n(1,l=P.width),"tpPane"in P&&n(2,b=P.tpPane),"x"in P&&n(3,g=P.x),"y"in P&&n(4,u=P.y),"$$scope"in P&&n(19,o=P.$$scope)},r=bn(r),[c,l,b,g,u,a,i,d,h,p,m,y,f,v,_,x,C,M,S,o]}class CC extends Mr{constructor(r){super(),Tr(this,r,jC,xC,Cr,{expanded:0,position:5,width:1,tpPane:2,x:3,y:4})}}function ch(s,r,n){const t=s.slice();return t[13]=r[n],t[14]=r,t[15]=n,t}function EC(s){let r,n;return r=new Ta({props:{theme:s[2],userCreatedPane:!1,$$slots:{default:[PC]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&4&&(d.theme=t[2]),i&65539&&(d.$$scope={dirty:i,ctx:t}),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function SC(s){let r=[],n=new Map,t,i,d=kc(Object.keys(s[1]));const o=c=>c[13];for(let c=0;c<d.length;c+=1){let a=ch(s,d,c),l=o(a);n.set(l,r[c]=dh(l,a))}return{c(){for(let c=0;c<r.length;c+=1)r[c].c();t=Vr()},m(c,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(c,a);Lt(c,t,a),i=!0},p(c,a){a&51&&(d=kc(Object.keys(c[1])),ao(),r=Sm(r,a,o,1,c,d,n,t.parentNode,Em,dh,t,ch),lo())},i(c){if(!i){for(let a=0;a<d.length;a+=1)Ze(r[a]);i=!0}},o(c){for(let a=0;a<r.length;a+=1)Qe(r[a]);i=!1},d(c){c&&Et(t);for(let a=0;a<r.length;a+=1)r[a].d(c)}}}function PC(s){let r,n,t,i;function d(a){s[10](a)}function o(a){s[11](a)}let c={};return s[1]!==void 0&&(c.object=s[1]),s[0]!==void 0&&(c.prettyLabels=s[0]),r=new Ei({props:c}),it.push(()=>ft(r,"object",d)),it.push(()=>ft(r,"prettyLabels",o)),r.$on("change",s[5]),{c(){wt(r.$$.fragment)},m(a,l){vt(r,a,l),i=!0},p(a,l){const b={};!n&&l&2&&(n=!0,b.object=a[1],pt(()=>n=!1)),!t&&l&1&&(t=!0,b.prettyLabels=a[0],pt(()=>t=!1)),r.$set(b)},i(a){i||(Ze(r.$$.fragment,a),i=!0)},o(a){Qe(r.$$.fragment,a),i=!1},d(a){bt(r,a)}}}function kC(s){let r,n,t;function i(o){s[9](o)}let d={key:s[13],label:so(s[13],s[0])};return s[1]!==void 0&&(d.object=s[1]),r=new Bu({props:d}),it.push(()=>ft(r,"object",i)),r.$on("change",s[5]),{c(){wt(r.$$.fragment)},m(o,c){vt(r,o,c),t=!0},p(o,c){const a={};c&2&&(a.key=o[13]),c&3&&(a.label=so(o[13],o[0])),!n&&c&2&&(n=!0,a.object=o[1],pt(()=>n=!1)),r.$set(a)},i(o){t||(Ze(r.$$.fragment,o),t=!0)},o(o){Qe(r.$$.fragment,o),t=!1},d(o){bt(r,o)}}}function TC(s){let r,n,t;function i(o){s[8](o,s[13])}let d={label:so(s[13],s[0])};return s[1][s[13]]!==void 0&&(d.value=s[1][s[13]]),r=new qf({props:d}),it.push(()=>ft(r,"value",i)),r.$on("change",s[5]),{c(){wt(r.$$.fragment)},m(o,c){vt(r,o,c),t=!0},p(o,c){s=o;const a={};c&3&&(a.label=so(s[13],s[0])),!n&&c&2&&(n=!0,a.value=s[1][s[13]],pt(()=>n=!1)),r.$set(a)},i(o){t||(Ze(r.$$.fragment,o),t=!0)},o(o){Qe(r.$$.fragment,o),t=!1},d(o){bt(r,o)}}}function MC(s){let r,n;return r=new Go({props:{title:so(s[13],s[0]),$$slots:{default:[LC]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,i){const d={};i&3&&(d.title=so(t[13],t[0])),i&65539&&(d.$$scope={dirty:i,ctx:t}),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function LC(s){let r,n,t,i,d;function o(l){s[6](l,s[13])}function c(l){s[7](l)}let a={};return s[1][s[13]]!==void 0&&(a.object=s[1][s[13]]),s[0]!==void 0&&(a.prettyLabels=s[0]),r=new Ei({props:a}),it.push(()=>ft(r,"object",o)),it.push(()=>ft(r,"prettyLabels",c)),r.$on("change",s[5]),{c(){wt(r.$$.fragment),i=Mn()},m(l,b){vt(r,l,b),Lt(l,i,b),d=!0},p(l,b){s=l;const g={};!n&&b&2&&(n=!0,g.object=s[1][s[13]],pt(()=>n=!1)),!t&&b&1&&(t=!0,g.prettyLabels=s[0],pt(()=>t=!1)),r.$set(g)},i(l){d||(Ze(r.$$.fragment,l),d=!0)},o(l){Qe(r.$$.fragment,l),d=!1},d(l){l&&Et(i),bt(r,l)}}}function dh(s,r){let n,t,i,d,o,c;const a=[MC,TC,kC],l=[];function b(g,u){return u&2&&(t=null),t==null&&(t=g[1][g[13]].constructor===Object&&!su(g[1][g[13]])&&!g[4](g[1][g[13]])),t?0:typeof g[1][g[13]]=="string"?1:2}return i=b(r,-1),d=l[i]=a[i](r),{key:s,first:null,c(){n=Vr(),d.c(),o=Vr(),this.first=n},m(g,u){Lt(g,n,u),l[i].m(g,u),Lt(g,o,u),c=!0},p(g,u){r=g;let h=i;i=b(r,u),i===h?l[i].p(r,u):(ao(),Qe(l[h],1,1,()=>{l[h]=null}),lo(),d=l[i],d?d.p(r,u):(d=l[i]=a[i](r),d.c()),Ze(d,1),d.m(o.parentNode,o))},i(g){c||(Ze(d),c=!0)},o(g){Qe(d),c=!1},d(g){g&&(Et(n),Et(o)),l[i].d(g)}}}function AC(s){let r,n,t,i;const d=[SC,EC],o=[];function c(a,l){return a[3]?0:1}return r=c(s),n=o[r]=d[r](s),{c(){n.c(),t=Vr()},m(a,l){o[r].m(a,l),Lt(a,t,l),i=!0},p(a,[l]){n.p(a,l)},i(a){i||(Ze(n),i=!0)},o(a){Qe(n),i=!1},d(a){a&&Et(t),o[r].d(a)}}}function so(s,r=!0){return r?s.replaceAll(/([\da-z])([A-Z])/g,"$1 $2").replaceAll(/[_-]+/g," ").toLowerCase().replaceAll(/\b[a-z]/g,n=>n.toUpperCase()):s}function OC(s,r,n){let{theme:t=void 0}=r,{prettyLabels:i=!0}=r,{object:d}=r;const o=xh(),c=gs("parentStore");function a(y){return Ln.isObject(y)||vs.isObject(y)||bs.isObject(y)}function l(y){o("change",{value:Ji(d),origin:y.detail.origin})}function b(y,f){s.$$.not_equal(d[f],y)&&(d[f]=y,n(1,d))}function g(y){i=y,n(0,i)}function u(y,f){s.$$.not_equal(d[f],y)&&(d[f]=y,n(1,d))}function h(y){d=y,n(1,d)}function p(y){d=y,n(1,d)}function m(y){i=y,n(0,i)}return s.$$set=y=>{"theme"in y&&n(2,t=y.theme),"prettyLabels"in y&&n(0,i=y.prettyLabels),"object"in y&&n(1,d=y.object)},[i,d,t,c,a,l,b,g,u,h,p,m]}class Ei extends Mr{constructor(r){super(),Tr(this,r,OC,AC,Cr,{theme:2,prettyLabels:0,object:1})}}class RC extends ns{measureStart(r){this.controller.valueController.measureStart(r)}measureEnd(){return this.controller.valueController.measureEnd()}measure(r,n){this.controller.valueController.measure(r,n)}measureAsync(r,n){return this.controller.valueController.measureAsync(r,n)}get measureHandler(){return this.controller.valueController.measureHandler}set measureHandler(r){this.controller.valueController.measureHandler=r}}class hh extends uo{constructor(r,n){const t=n.valueController,i=new di(r,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:i.view,viewProps:t.viewProps}),this.valueController=t,this.labelController=i}}class DC{measureStart(){const r=performance.now();return()=>performance.now()-r}}function ph(s,r,n,t){function i(d){return d instanceof n?d:new n(function(o){o(d)})}return new(n||(n=Promise))(function(d,o){function c(b){try{l(t.next(b))}catch(g){o(g)}}function a(b){try{l(t.throw(b))}catch(g){o(g)}}function l(b){b.done?d(b.value):i(b.value).then(c,a)}l((t=t.apply(s,[])).next())})}class Hf{constructor(){this.map=new Map,this.keySet=new Set}get(r){return this.map.get(r)}getOrCreate(r,n){this.keySet.has(r)||this.keySet.add(r);let t=this.map.get(r);return t==null&&(t=n(),this.map.set(r,t)),t}set(r,n){this.keySet.has(r)||this.keySet.add(r),this.map.set(r,n)}resetUsedSet(){this.keySet.clear()}vaporize(r){for(const[n,t]of this.map.entries())this.keySet.has(n)||(this.map.delete(n),r==null||r([n,t]))}}function IC(s){s.splice(0,s.length)}function qi(s){let r=0;return s.forEach(n=>r+=n),r}class FC{constructor(r){this.__recalcForEach=0,this.__countUntilRecalc=0,this.__history=[],this.__index=0,this.__count=0,this.__cache=0,this.__length=r,this.__recalcForEach=r;for(let n=0;n<r;n++)this.__history[n]=0}get mean(){const r=Math.min(this.__count,this.__length);return r===0?0:this.__cache/r}get recalcForEach(){return this.__recalcForEach}set recalcForEach(r){const n=r-this.__recalcForEach;this.__recalcForEach=r,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+n)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let r=0;r<this.__length;r++)this.__history[r]=0}push(r){const n=this.__history[this.__index];this.__history[this.__index]=r,this.__count++,this.__index=(this.__index+1)%this.__length,this.__countUntilRecalc===0?this.recalc():(this.__countUntilRecalc--,this.__cache-=n,this.__cache+=r)}recalc(){this.__countUntilRecalc=this.__recalcForEach;const r=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((n,t)=>n+t,0);this.__cache=r}}function Rl(s,r){if(typeof r!="function")return Rl(s,d=>d<r);const n=r;let t=0,i=s.length;for(;t<i;){const d=t+i>>1,o=s[d];n(o)?t=d+1:i=d}return t}class NC{constructor(r){this.__history=[],this.__sorted=[],this.__index=0,this.__length=r}get median(){return this.percentile(50)}percentile(r){return this.__history.length===0?0:this.__sorted[Math.round(r*.01*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(r){const n=this.__history[this.__index];if(this.__history[this.__index]=r,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){const i=Rl(this.__sorted,n);this.__sorted.splice(i,1)}const t=Rl(this.__sorted,r);this.__sorted.splice(t,0,r)}}function Ys(s,r){let n=0;for(let t=0;t<s.length;t++)n+=s[t]*r[t];return n}function Gu(s){return Math.min(Math.max(s,0),1)}function VC(s){return`rgb( ${s.map(n=>Gu(n)*256).join(", ")} )`}function BC(s){const r=[.13572138,4.6153926,-42.66032258,132.13108234],n=[.09140261,2.19418839,4.84296658,-14.18503333],t=[.1066733,12.64194608,-60.58204836,110.36276771],i=[-152.94239396,59.28637943],d=[4.27729857,2.82956604],o=[-89.90310912,27.34824973];s=Gu(s);const c=[1,s,s*s,s*s*s],a=[c[2],c[3]].map(b=>b*c[2]),l=[Ys(c,r)+Ys(a,i),Ys(c,n)+Ys(a,d),Ys(c,t)+Ys(a,o)];return VC(l)}const Yn=at("profiler");class UC{constructor(r,n){this.targetDelta=n.targetDelta,this.deltaUnit=n.deltaUnit,this.fractionDigits=n.fractionDigits,this.calcMode=n.calcMode,this.element=r.createElement("div"),this.element.classList.add(Yn()),n.viewProps.bindClassModifiers(this.element),this.svgRootElement_=r.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgRootElement_.classList.add(Yn("root")),this.element.appendChild(this.svgRootElement_),this.entryContainerElement_=r.createElementNS("http://www.w3.org/2000/svg","g"),this.entryContainerElement_.classList.add(Yn("container")),this.entryContainerElement_.setAttribute("transform","translate( 1, 1 )"),this.svgRootElement_.appendChild(this.entryContainerElement_),this.tooltipElement_=r.createElement("div"),this.tooltipElement_.classList.add(Yn("tooltip")),this.tooltipElement_.style.display="none",this.element.appendChild(this.tooltipElement_),this.tooltipInsideElement_=r.createElement("div"),this.tooltipInsideElement_.classList.add(Yn("tooltipinside")),this.tooltipElement_.appendChild(this.tooltipInsideElement_),this.labelElement_=r.createElement("div"),this.labelElement_.classList.add(Yn("label")),this.labelElement_.textContent=this.deltaToDisplayDelta_(0),this.element.appendChild(this.labelElement_),this.entryElementCacheMap_=new Hf,this.hoveringEntry_=null}update(r){const n=this.entryToDelta_(r);this.labelElement_.textContent=this.deltaToDisplayDelta_(n),this.entryElementCacheMap_.resetUsedSet();const t=160/Math.max(this.targetDelta,n);let i=0;for(const d of r.children)this.addEntry_(d,"",this.entryContainerElement_,t).setAttribute("transform",`translate( ${i}, 0 )`),i+=this.entryToDelta_(d)*t;this.entryElementCacheMap_.vaporize(([d,o])=>{o.remove(),this.hoveringEntry_===d&&(this.hoveringEntry_=null)}),this.updateTooltip_()}updateTooltip_(){const r=this.hoveringEntry_;if(r){const n=this.entryElementCacheMap_.get(r),t=n==null?void 0:n.getAttribute("data-delta"),i=this.deltaToDisplayDelta_(parseFloat(t??"0.0")),d=`${r}
${i}`;this.tooltipElement_.style.display="block",this.tooltipInsideElement_.textContent=d}else this.tooltipElement_.style.display="none"}addEntry_(r,n,t,i){const d=`${n}/${r.name}`,o=this.entryElementCacheMap_.getOrCreate(d,()=>{const b=document.createElementNS("http://www.w3.org/2000/svg","g");b.classList.add(Yn("entry")),t.appendChild(b),this.entryElementCacheMap_.set(d,b);const g=document.createElementNS("http://www.w3.org/2000/svg","rect");return g.classList.add(Yn("entryrect")),b.appendChild(g),g.addEventListener("mouseenter",()=>{this.hoveringEntry_=d,this.updateTooltip_()}),g.addEventListener("mouseleave",()=>{this.hoveringEntry_=null,this.updateTooltip_()}),b}),c=this.entryToDelta_(r);o.setAttribute("data-delta",`${c}`);const a=o.childNodes[0];a.setAttribute("width",`${Math.max(.01,c*i-1)}px`),a.setAttribute("height","9px");const l=.15+.7*Gu(c/this.targetDelta);if(a.setAttribute("fill",BC(l)),r.children.length>0){let b=0;r.children.forEach(g=>{this.addEntry_(g,d,o,i).setAttribute("transform",`translate( ${b}, 10 )`),b+=this.entryToDelta_(g)*i})}return o}entryToDelta_(r){if(this.calcMode==="frame")return r.delta;if(this.calcMode==="mean")return r.deltaMean;if(this.calcMode==="median")return r.deltaMedian;throw new Error('Unreachable! calcMode must be one of "frame", "mean", or "median"')}deltaToDisplayDelta_(r){return`${r.toFixed(this.fractionDigits)} ${this.deltaUnit}`}}class GC{constructor(r,n){this.targetDelta=n.targetDelta,this.bufferSize=n.bufferSize,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.viewProps=n.viewProps,this.view=new UC(r,{targetDelta:this.targetDelta,deltaUnit:n.deltaUnit,fractionDigits:n.fractionDigits,calcMode:n.calcMode,viewProps:this.viewProps}),this.viewProps.handleDispose(()=>{this.ticker_.dispose()}),this.measureHandler=n.measureHandler,this.rootCalcCacheStack_=[this.createNewEntryCalcCache_()]}measureStart(r){const t=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1].childrenCacheMap.getOrCreate(r,()=>this.createNewEntryCalcCache_());t.childrenCacheMap.resetUsedSet(),IC(t.childrenPromiseDelta),this.rootCalcCacheStack_.push(t),t.measureEnd=this.measureHandler.measureStart()}measureEnd(){return ph(this,void 0,void 0,function*(){const r=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1],n=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-2],t=Promise.resolve(r.measureEnd());r.measureEnd=null,n.childrenPromiseDelta.push(t),this.rootCalcCacheStack_.pop(),r.childrenCacheMap.vaporize();const i=yield Promise.all(r.childrenPromiseDelta),d=qi(i),o=(yield t)-d;r.meanCalc.push(o),r.medianCalc.push(o),r.latest=o})}measure(r,n){this.measureStart(r),n(),this.measureEnd()}measureAsync(r,n){return ph(this,void 0,void 0,function*(){this.measureStart(r),yield n(),this.measureEnd()})}renderEntry(){return this.renderEntryFromCalcCache_("",this.rootCalcCacheStack_[0])}renderEntryFromCalcCache_(r,n){const t=[];for(const h of n.childrenCacheMap.keySet){const p=n.childrenCacheMap.get(h);t.push(this.renderEntryFromCalcCache_(h,p))}const i=n.latest,d=n.meanCalc.mean,o=n.medianCalc.median,c=qi(t.map(h=>h.delta)),a=qi(t.map(h=>h.deltaMean)),l=qi(t.map(h=>h.deltaMedian)),b=i+c,g=d+a,u=o+l;return{name:r,delta:b,deltaMean:g,deltaMedian:u,selfDelta:i,selfDeltaMean:d,selfDeltaMedian:o,children:t}}onTick_(){this.view.update(this.renderEntry())}createNewEntryCalcCache_(){return{meanCalc:new FC(this.bufferSize),medianCalc:new NC(this.bufferSize),latest:0,measureEnd:null,childrenCacheMap:new Hf,childrenPromiseDelta:[]}}}function zC(s,r){return r===0?new Gh:new zh(s,r??ho.monitor.defaultInterval)}function qC(s){switch(s){case"frame":case"mean":case"median":return s;default:return}}function HC(s){if(typeof s=="object"&&s!=null&&"measureStart"in s)return s;typeof s=="object"&&s!=null&&"measure"in s&&console.warn("The API of `ProfilerBladeDefaultMeasureHandler` has been changed in v0.4.0! Please define `measureStart` instead of `measure`. Fallback to the default measure handler.")}Nt({id:"profiler",type:"blade",accept(s){const r=It(s,n=>({view:n.required.constant("profiler"),targetDelta:n.optional.number,bufferSize:n.optional.number,deltaUnit:n.optional.string,fractionDigits:n.optional.number,calcMode:n.optional.custom(qC),label:n.optional.string,interval:n.optional.number,measureHandler:n.optional.custom(HC)}));return r?{params:r}:null},controller(s){var r,n,t,i,d,o,c;const a=(r=s.params.interval)!==null&&r!==void 0?r:500,l=(n=s.params.targetDelta)!==null&&n!==void 0?n:16.67,b=(t=s.params.bufferSize)!==null&&t!==void 0?t:30,g=(i=s.params.deltaUnit)!==null&&i!==void 0?i:"ms",u=(d=s.params.fractionDigits)!==null&&d!==void 0?d:2,h=(o=s.params.calcMode)!==null&&o!==void 0?o:"mean",p=(c=s.params.measureHandler)!==null&&c!==void 0?c:new DC;return new hh(s.document,{blade:s.blade,labelProps:ht.fromObject({label:s.params.label}),valueController:new GC(s.document,{ticker:zC(s.document,a),targetDelta:l,bufferSize:b,deltaUnit:g,fractionDigits:u,calcMode:h,viewProps:s.viewProps,measureHandler:p})})},api(s){return s.controller instanceof hh?new RC(s.controller):null}});class fh{constructor(){this.drawer=r=>`L ${r[0]} ${r[1]}`}}class WC{constructor(){this.drawer=(r,n,t)=>{const[i,d]=this.controlPoint(t[n-1],t[n-2],r),[o,c]=this.controlPoint(r,t[n-1],t[n+1],!0);return`C ${i},${d} ${o},${c} ${r[0]},${r[1]}`}}controlPoint(r,n,t,i){const d=n||r,o=t||r,c=.2,a=o[0]-d[0],l=o[1]-d[1],b=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))*c,g=Math.atan2(l,a)+(i?Math.PI:0),u=r[0]+Math.cos(g)*b,h=r[1]+Math.sin(g)*b;return[u,h]}}const mh=at("wfm");class XC{constructor(r,n){switch(this.element=r.createElement("div"),this.element.classList.add(mh()),n.viewProps.bindClassModifiers(this.element),this.svgElem=r.createElementNS(Mt,"svg"),this.svgElem.classList.add(mh("g")),this.element.appendChild(this.svgElem),this.pathElem=r.createElementNS(Mt,"path"),this.svgElem.appendChild(this.pathElem),this.props=n.props,this.value=n.value,this.value.emitter.on("change",this.onValueChange_.bind(this)),this.props.get("lineStyle")){case"linear":this.lineDrawerProvider=new fh;break;case"bezier":this.lineDrawerProvider=new WC;break;default:this.lineDrawerProvider=new fh;break}this.refresh(),n.viewProps.handleDispose(()=>{this.value.emitter.off("change",this.onValueChange_)})}svgPath(r,n){return r.reduce((i,d,o,c)=>o===0?`M ${d[0]},${d[1]}`:`${i} ${n(d,o,c)}`,"")}refresh(){var r,n;const t=this.svgElem.getBoundingClientRect(),i=this.value.rawValue[0];if(i){const d=(r=this.props.get("min"))!==null&&r!==void 0?r:Math.min(...i)-1,o=(n=this.props.get("max"))!==null&&n!==void 0?n:Math.max(...i)+1,c=o-d,a=[],l=i.length-1,b=i.length>32?0:t.width/(i.length-1),g=c>50?0:t.height/c;this.element.style.backgroundSize=`${b}px ${g}px`,i.forEach((h,p)=>{if(h===void 0)return;const m=mt(p,0,l,0,t.width),y=mt(h,d,o,t.height,0);a.push([Math.floor(m),Math.floor(y)])});const u=this.svgPath(a,this.lineDrawerProvider.drawer);this.pathElem.setAttributeNS(null,"d",u)}}onValueChange_(){this.refresh()}}class YC{constructor(r,n){this.value=n.value,this.props=n.props,this.viewProps=n.viewProps,this.viewProps.handleDispose(()=>{}),this.view=new XC(r,{value:this.value,viewProps:this.viewProps,props:this.props})}}function $C(s){return"view"in s&&s.view==="waveform"}function yh(s){return typeof s=="object"?"length"in s:!1}Nt({id:"monitor-waveform",type:"monitor",accept:(s,r)=>{if(!yh(s))return null;const n=It(r,t=>({max:t.optional.number,min:t.optional.number,style:t.optional.custom(i=>i==="linear"||i==="bezier"?i:void 0),view:t.optional.string}));return n?{initialValue:s,params:n}:null},binding:{defaultBufferSize:s=>$C(s)?64:1,reader:s=>r=>yh(r)?r:[]},controller:s=>{var r,n,t;return new YC(s.document,{props:ht.fromObject({max:(r="max"in s.params?s.params.max:null)!==null&&r!==void 0?r:null,min:(n="min"in s.params?s.params.min:null)!==null&&n!==void 0?n:null,lineStyle:(t="style"in s.params?s.params.style:null)!==null&&t!==void 0?t:"linear"}),value:s.value,viewProps:s.viewProps})}});function KC(s){let r,n,t,i,d,o;function c(g){s[3](g)}let a={label:"gap"};s[1].gap!==void 0&&(a.value=s[1].gap),r=new qj({props:a}),it.push(()=>ft(r,"value",c));function l(g){s[4](g)}let b={};return s[1].tupTransform!==void 0&&(b.object=s[1].tupTransform),i=new Ei({props:b}),it.push(()=>ft(i,"object",l)),{c(){wt(r.$$.fragment),t=Mn(),wt(i.$$.fragment)},m(g,u){vt(r,g,u),Lt(g,t,u),vt(i,g,u),o=!0},p(g,u){const h={};!n&&u&2&&(n=!0,h.value=g[1].gap,pt(()=>n=!1)),r.$set(h);const p={};!d&&u&2&&(d=!0,p.object=g[1].tupTransform,pt(()=>d=!1)),i.$set(p)},i(g){o||(Ze(r.$$.fragment,g),Ze(i.$$.fragment,g),o=!0)},o(g){Qe(r.$$.fragment,g),Qe(i.$$.fragment,g),o=!1},d(g){g&&Et(t),bt(r,g),bt(i,g)}}}function ZC(s){let r,n,t;function i(o){s[5](o)}let d={};return s[1].charTransform!==void 0&&(d.object=s[1].charTransform),r=new Ei({props:d}),it.push(()=>ft(r,"object",i)),{c(){wt(r.$$.fragment)},m(o,c){vt(r,o,c),t=!0},p(o,c){const a={};!n&&c&2&&(n=!0,a.object=o[1].charTransform,pt(()=>n=!1)),r.$set(a)},i(o){t||(Ze(r.$$.fragment,o),t=!0)},o(o){Qe(r.$$.fragment,o),t=!1},d(o){bt(r,o)}}}function QC(s){let r,n,t;function i(o){s[6](o)}let d={};return s[1].style!==void 0&&(d.object=s[1].style),r=new Ei({props:d}),it.push(()=>ft(r,"object",i)),{c(){wt(r.$$.fragment)},m(o,c){vt(r,o,c),t=!0},p(o,c){const a={};!n&&c&2&&(n=!0,a.object=o[1].style,pt(()=>n=!1)),r.$set(a)},i(o){t||(Ze(r.$$.fragment,o),t=!0)},o(o){Qe(r.$$.fragment,o),t=!1},d(o){bt(r,o)}}}function JC(s){let r,n,t,i,d,o,c,a,l;function b(u){s[2](u)}let g={label:"text"};return s[1].text!==void 0&&(g.value=s[1].text),r=new qf({props:g}),it.push(()=>ft(r,"value",b)),r.$on("change",function(){Dl(s[0].resetTup)&&s[0].resetTup.apply(this,arguments)}),i=new Go({props:{expanded:!1,title:"ThrowUp",$$slots:{default:[KC]},$$scope:{ctx:s}}}),o=new Go({props:{expanded:!1,title:"Characters",$$slots:{default:[ZC]},$$scope:{ctx:s}}}),a=new Go({props:{expanded:!1,title:"Style",$$slots:{default:[QC]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment),t=Mn(),wt(i.$$.fragment),d=Mn(),wt(o.$$.fragment),c=Mn(),wt(a.$$.fragment)},m(u,h){vt(r,u,h),Lt(u,t,h),vt(i,u,h),Lt(u,d,h),vt(o,u,h),Lt(u,c,h),vt(a,u,h),l=!0},p(u,h){s=u;const p={};!n&&h&2&&(n=!0,p.value=s[1].text,pt(()=>n=!1)),r.$set(p);const m={};h&130&&(m.$$scope={dirty:h,ctx:s}),i.$set(m);const y={};h&130&&(y.$$scope={dirty:h,ctx:s}),o.$set(y);const f={};h&130&&(f.$$scope={dirty:h,ctx:s}),a.$set(f)},i(u){l||(Ze(r.$$.fragment,u),Ze(i.$$.fragment,u),Ze(o.$$.fragment,u),Ze(a.$$.fragment,u),l=!0)},o(u){Qe(r.$$.fragment,u),Qe(i.$$.fragment,u),Qe(o.$$.fragment,u),Qe(a.$$.fragment,u),l=!1},d(u){u&&(Et(t),Et(d),Et(c)),bt(r,u),bt(i,u),bt(o,u),bt(a,u)}}}function eE(s){let r,n;return r=new CC({props:{position:"inline",title:"ThrowUp",$$slots:{default:[JC]},$$scope:{ctx:s}}}),{c(){wt(r.$$.fragment)},m(t,i){vt(r,t,i),n=!0},p(t,[i]){const d={};i&131&&(d.$$scope={dirty:i,ctx:t}),r.$set(d)},i(t){n||(Ze(r.$$.fragment,t),n=!0)},o(t){Qe(r.$$.fragment,t),n=!1},d(t){bt(r,t)}}}function tE(s,r,n){let t;eo(s,fs,b=>n(1,t=b));let{p5:i}=r;function d(b){s.$$.not_equal(t.text,b)&&(t.text=b,fs.set(t))}function o(b){s.$$.not_equal(t.gap,b)&&(t.gap=b,fs.set(t))}function c(b){s.$$.not_equal(t.tupTransform,b)&&(t.tupTransform=b,fs.set(t))}function a(b){s.$$.not_equal(t.charTransform,b)&&(t.charTransform=b,fs.set(t))}function l(b){s.$$.not_equal(t.style,b)&&(t.style=b,fs.set(t))}return s.$$set=b=>{"p5"in b&&n(0,i=b.p5)},[i,t,d,o,c,a,l]}class rE extends Mr{constructor(r){super(),Tr(this,r,tE,eE,Cr,{p5:0})}}function nE(s){let r,n,t,i,d;return i=new rE({props:{p5:s[0]}}),{c(){r=ln("main"),n=ln("div"),t=Mn(),wt(i.$$.fragment),wh(n,"id","sketch")},m(o,c){Lt(o,r,c),fl(r,n),fl(r,t),vt(i,r,null),d=!0},p(o,[c]){const a={};c&1&&(a.p5=o[0]),i.$set(a)},i(o){d||(Ze(i.$$.fragment,o),d=!0)},o(o){Qe(i.$$.fragment,o),d=!1},d(o){o&&Et(r),bt(i)}}}function sE(s,r,n){let t;return si(()=>{n(0,t=new Lm(Dm,document.getElementById("sketch")))}),[t]}class oE extends Mr{constructor(r){super(),Tr(this,r,sE,nE,Cr,{})}}new oE({target:document.getElementById("app")});
